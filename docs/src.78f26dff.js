parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"X4AU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KernelBackend=exports.EPSILON_FLOAT32=exports.EPSILON_FLOAT16=exports.DataStorage=void 0;const t=1e-7;exports.EPSILON_FLOAT32=t;const e=1e-4;exports.EPSILON_FLOAT16=e;class r{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}exports.DataStorage=r;class a{refCount(t){return s("refCount")}incRef(t){return s("incRef")}timerAvailable(){return!0}time(t){return s("time")}read(t){return s("read")}readSync(t){return s("readSync")}numDataIds(){return s("numDataIds")}disposeData(t,e){return s("disposeData")}write(t,e,r){return s("write")}move(t,e,r,a,n){return s("move")}memory(){return s("memory")}floatPrecision(){return s("floatPrecision")}epsilon(){return 32===this.floatPrecision()?t:e}dispose(){return s("dispose")}}function s(t){throw new Error(`'${t}' not yet implemented or not found in the registry. `+"This kernel may not be supported by the tfjs backend you have chosen")}exports.KernelBackend=a;
},{}],"cppa":[function(require,module,exports) {
"use strict";function t(t){let r=t.length,e=0;for(;r>0;)e=Math.random()*r|0,o(t,--r,e)}function r(t,r){if(t.length!==r.length)throw new Error("Array sizes must match to be shuffled together "+`First array length was ${t.length}`+`Second array length was ${r.length}`);let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,o(t,--e,n),o(r,e,n)}function e(t,r,e){return Math.max(t,Math.min(r,e))}function n(t){return t%2==0?t:t+1}function o(t,r,e){const n=t[r];t[r]=t[e],t[e]=n}function i(t){let r=0;for(let e=0;e<t.length;e++)r+=t[e];return r}function s(t,r){const e=Math.random();return r*e+(1-e)*t}function a(t,r){let e=0;for(let n=0;n<t.length;n++){const o=Number(t[n])-Number(r[n]);e+=o*o}return e}function l(t,r){if(!t)throw new Error("string"==typeof r?r:r())}function u(t,r,e=""){l(y(t,r),()=>e+` Shapes ${t} and ${r} must match`)}function f(t){l(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function c(t,r=[],e=!1){if(null==r&&(r=[]),Array.isArray(t)||M(t)&&!e)for(let n=0;n<t.length;++n)c(t[n],r,e);else r.push(t);return r}function p(t){if(0===t.length)return 1;let r=t[0];for(let e=1;e<t.length;e++)r*=t[e];return r}function h(t){return 0===t.length}function y(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==r[e])return!1;return!0}function m(t){return t%1==0}function x(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const r=Math.exp(2*t);return(r-1)/(r+1)}}function g(t){const r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function w(r){const e=new Uint32Array(r);for(let t=0;t<r;++t)e[t]=t;return t(e),e}function d(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function A(t,r=(t=>0),e){return new Promise((n,o)=>{let i=0;const s=()=>{if(t())return void n();const a=r(++i);null!=e&&i>=e?o():setTimeout(s,a)};s()})}function b(t,r){let e=1,n=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(-1===t[i]){if(-1!==n)throw Error("Shapes can only have 1 implicit size. "+`Found -1 at dim ${n} and dim ${i}`);n=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(-1===n){if(r>0&&r!==e)throw Error(`Size(${r}) must match the product of shape ${t}`);return t}if(0===e)throw Error(`Cannot infer the missing size in [${t}] when `+"there are 0 elements");if(r%e!=0)throw Error("The implicit shape can't be a fractional number. "+`Got ${r} / ${e}`);const o=t.slice();return o[n]=r/e,o}function $(t,r){const e=r.length;return l((t=null==t?r.map((t,r)=>r):[].concat(t)).every(t=>t>=-e&&t<e),()=>`All values in axis param must be in range [-${e}, ${e}) but `+`got axis ${t}`),l(t.every(t=>m(t)),()=>"All values in axis param must be integers but "+`got axis ${t}`),t.map(t=>t<0?e+t:t)}function E(t,r){const e=[],n=[],o=null!=r&&Array.isArray(r)&&0===r.length,i=null==r||o?null:$(r,t).sort();let s=0;for(let a=0;a<t.length;++a){if(null!=i){if(i[s]===a&&1!==t[a])throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(null==i[s]||i[s]>a)&&1===t[a]&&(e.push(t[a]),n.push(a)),i[s]<=a&&s++}1!==t[a]&&(e.push(t[a]),n.push(a))}return{newShape:e,keptDims:n}}function S(t,r){let e=null;if(null==t||"float32"===t)e=new Float32Array(r);else if("int32"===t)e=new Int32Array(r);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);e=new Uint8Array(r)}return e}function F(t,r){let e=null;if(null==t||"float32"===t)e=new Float32Array(r);else if("int32"===t)e=new Int32Array(r);else if("bool"===t)e=new Uint8Array(r);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);e=new Array(r)}return e}function T(t,r){for(let e=0;e<t.length;e++){const n=t[e];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${r} being uploaded contains ${n}.`)}}function U(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function v(t,r){return"complex64"!==r&&(("float32"!==r||"complex64"===t)&&(("int32"!==r||"float32"===t||"complex64"===t)&&("bool"!==r||"bool"!==t)))}function M(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function I(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function N(t){if(null==t)return 0;let r=0;return t.forEach(t=>r+=t.length),r}function k(t){return"string"==typeof t||t instanceof String}function z(t){return"boolean"==typeof t}function D(t){return"number"==typeof t}function q(t){return Array.isArray(t)?q(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":D(t)?"float32":k(t)?"string":z(t)?"bool":"float32"}function C(t){return!!(t&&t.constructor&&t.call&&t.apply)}function P(t,r){for(let e=r;e<t;++e)if(t%e==0)return e;return t}function L(t){const r=t.length;if(r<2)return[];const e=new Array(r-1);e[r-2]=t[r-1];for(let n=r-3;n>=0;--n)e[n]=e[n+1]*t[n+1];return e}function O(t,r,e,n=!1){const o=new Array;if(1===r.length){const i=r[0]*(n?2:1);for(let r=0;r<i;r++)o[r]=e[t+r]}else{const i=r[0],s=r.slice(1),a=s.reduce((t,r)=>t*r)*(n?2:1);for(let r=0;r<i;r++)o[r]=O(t+r*a,s,e,n)}return o}function Z(t,r,e=!1){if(0===t.length)return r[0];const n=t.reduce((t,r)=>t*r)*(e?2:1);if(0===n)return[];if(n!==r.length)throw new Error(`[${t}] does not match the input size ${r.length}${e?" for a complex tensor":""}.`);return O(0,t,r,e)}function _(t,r){const e=j(t,r);for(let n=0;n<e.length;n++)e[n]=1;return e}function j(t,r){if(null==r||"float32"===r||"complex64"===r)return new Float32Array(t);if("int32"===r)return new Int32Array(t);if("bool"===r)return new Uint8Array(t);throw new Error(`Unknown data type ${r}`)}function B(t,r){const e=t.reduce((t,r)=>t*r,1);if(null==r||"float32"===r)return Z(t,new Float32Array(e));if("int32"===r)return Z(t,new Int32Array(e));if("bool"===r)return Z(t,new Uint8Array(e));throw new Error(`Unknown data type ${r}`)}function G(t){t.forEach(r=>{l(Number.isInteger(r)&&r>=0,()=>"Tensor must have a shape comprised of positive integers but got "+`shape [${t}].`)})}function V(t,r,e){if(0===r)return 0;if(1===r)return t[0];let n=t[t.length-1];for(let o=0;o<t.length-1;++o)n+=e[o]*t[o];return n}function H(t,r,e){if(0===r)return[];if(1===r)return[t];const n=new Array(r);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(t/e[o]),t-=n[o]*e[o];return n[n.length-1]=t,n}function J(t){return t&&t.then&&"function"==typeof t.then}Object.defineProperty(exports,"__esModule",{value:!0}),exports.arraysEqual=y,exports.assert=l,exports.assertNonNegativeIntegerDimensions=G,exports.assertNonNull=f,exports.assertShapesMatch=u,exports.bytesFromStringArray=N,exports.bytesPerElement=I,exports.checkConversionForErrors=T,exports.clamp=e,exports.computeStrides=L,exports.createShuffledIndices=w,exports.distSquared=a,exports.flatten=c,exports.getArrayFromDType=F,exports.getTypedArrayFromDType=S,exports.hasEncodingLoss=v,exports.indexToLoc=H,exports.inferDtype=q,exports.inferFromImplicitShape=b,exports.isBoolean=z,exports.isFunction=C,exports.isInt=m,exports.isNumber=D,exports.isPromise=J,exports.isScalarShape=h,exports.isString=k,exports.isTypedArray=M,exports.isValidDtype=U,exports.locToIndex=V,exports.makeOnesTypedArray=_,exports.makeZerosNestedTypedArray=B,exports.makeZerosTypedArray=j,exports.nearestDivisor=P,exports.nearestLargerEven=n,exports.parseAxisParam=$,exports.randUniform=s,exports.repeatedTry=A,exports.rightPad=d,exports.shuffle=t,exports.shuffleCombo=r,exports.sizeFromShape=p,exports.sizeToSquarishShape=g,exports.squeezeShape=E,exports.sum=i,exports.swap=o,exports.tanh=x,exports.toNestedArray=Z;
},{}],"EnTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=n,exports.warn=o;var e=require("./environment");function o(...o){(0,e.env)().getBool("IS_TEST")||(0,e.env)().getBool("PROD")||console.warn(...o)}function n(...o){(0,e.env)().getBool("IS_TEST")||(0,e.env)().getBool("PROD")||console.log(...o)}
},{"./environment":"Fbeg"}],"Fbeg":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.Environment=exports.ENV=void 0,exports.env=g,exports.getQueryParams=o,exports.setEnvironmentGlobal=h;var e=require("./util_base"),r=a(require("./log"));function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if("default"!==l&&Object.prototype.hasOwnProperty.call(t,l)){var o=n?Object.getOwnPropertyDescriptor(t,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=t[l]}return a.default=t,r&&r.set(t,a),a}const n="tfjsflags";class l{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=o,this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&r.warn(`Platform ${this.platformName} has already been set. `+`Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,s){if(this.flagRegistry[t]={evaluationFn:e,setHook:s},null!=this.urlFlags[t]){const e=this.urlFlags[t];r.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const r=this.evaluateFlag(t);if((0,e.isPromise)(r))throw new Error(`Flag ${t} cannot be synchronously evaluated. `+"Please use getAsync() instead.");return this.flags[t]=r,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=this.getQueryParams(this.global.location.search);if(n in t){t[n].split(",").forEach(t=>{const[e,r]=t.split(":");this.urlFlags[e]=u(e,r)})}}}function o(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(i(e,r[0],r[1]),r.join("="))),e}function i(t,e,r){t[decodeURIComponent(e)]=decodeURIComponent(r||"")}function u(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function g(){return f}exports.Environment=l;let f=null;function h(t){exports.ENV=f=t}exports.ENV=f;
},{"./util_base":"cppa","./log":"EnTq"}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"QcKL":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process");let o;function n(){if(null==o){let n;if("undefined"!=typeof window)n=window;else if(void 0!==e)n=e;else if(void 0!==t)n=t;else{if("undefined"==typeof self)throw new Error("Could not find a global object");n=self}o=n}return o}function l(){const e=n();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}function r(e,t){const o=l();if(o.has(e))return o.get(e);{const n=t();return o.set(e,n),o.get(e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlobal=r,exports.getGlobalNamespace=n;
},{"process":"g5IB"}],"sdEe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Multinomial=exports.Mod=exports.MirrorPad=exports.Minimum=exports.Min=exports.Mean=exports.Maximum=exports.MaxPoolWithArgmax=exports.MaxPoolGrad=exports.MaxPool3DGrad=exports.MaxPool3D=exports.MaxPool=exports.Max=exports.LogicalOr=exports.LogicalNot=exports.LogicalAnd=exports.LogSoftmax=exports.Log1p=exports.Log=exports.LinSpace=exports.LessEqual=exports.Less=exports.LeakyRelu=exports.LRNGrad=exports.LRN=exports.IsNan=exports.IsInf=exports.IsFinite=exports.Imag=exports.Identity=exports.IFFT=exports.GreaterEqual=exports.Greater=exports.GatherV2=exports.GatherNd=exports.FusedDepthwiseConv2D=exports.FusedConv2D=exports.FusedBatchNorm=exports.FromPixels=exports.FloorDiv=exports.Floor=exports.FlipLeftRight=exports.Fill=exports.FFT=exports.Expm1=exports.ExpandDims=exports.Exp=exports.Erf=exports.Equal=exports.EluGrad=exports.Elu=exports.Einsum=exports.Dilation2DBackpropInput=exports.Dilation2DBackpropFilter=exports.Dilation2D=exports.Diag=exports.DepthwiseConv2dNativeBackpropInput=exports.DepthwiseConv2dNativeBackpropFilter=exports.DepthwiseConv2dNative=exports.DepthToSpace=exports.DenseBincount=exports.Cumsum=exports.CropAndResize=exports.Cosh=exports.Cos=exports.Conv3DBackpropInputV2=exports.Conv3DBackpropFilterV2=exports.Conv3D=exports.Conv2DBackpropInput=exports.Conv2DBackpropFilter=exports.Conv2D=exports.Concat=exports.ComplexAbs=exports.Complex=exports.ClipByValue=exports.Ceil=exports.Cast=exports.BroadcastTo=exports.BroadcastArgs=exports.Bincount=exports.BatchToSpaceND=exports.BatchMatMul=exports.AvgPoolGrad=exports.AvgPool3DGrad=exports.AvgPool3D=exports.AvgPool=exports.Atanh=exports.Atan2=exports.Atan=exports.Asinh=exports.Asin=exports.ArgMin=exports.ArgMax=exports.Any=exports.All=exports.AddN=exports.Add=exports.Acosh=exports.Acos=exports.Abs=void 0,exports._FusedMatMul=exports.ZerosLike=exports.UnsortedSegmentSum=exports.Unpack=exports.Unique=exports.Transpose=exports.Transform=exports.TopK=exports.Tile=exports.Tanh=exports.Tan=exports.Sum=exports.Sub=exports.StringToHashBucketFast=exports.StringSplit=exports.StringNGrams=exports.StridedSlice=exports.Step=exports.SquaredDifference=exports.Square=exports.Sqrt=exports.SplitV=exports.SparseToDense=exports.SparseSegmentSum=exports.SparseSegmentMean=exports.SparseReshape=exports.SparseFillEmptyRows=exports.SpaceToBatchND=exports.Softplus=exports.Softmax=exports.Slice=exports.Sinh=exports.Sin=exports.Sign=exports.Sigmoid=exports.Selu=exports.Select=exports.ScatterNd=exports.Rsqrt=exports.Round=exports.RotateWithOffset=exports.Reverse=exports.ResizeNearestNeighborGrad=exports.ResizeNearestNeighbor=exports.ResizeBilinearGrad=exports.ResizeBilinear=exports.Reshape=exports.Relu6=exports.Relu=exports.Reciprocal=exports.RealDiv=exports.Real=exports.Range=exports.Prod=exports.Prelu=exports.Pow=exports.Pool=exports.PadV2=exports.Pack=exports.OnesLike=exports.OneHot=exports.NotEqual=exports.NonMaxSuppressionV5=exports.NonMaxSuppressionV4=exports.NonMaxSuppressionV3=exports.Neg=exports.Multiply=exports.Multinomial=exports.Mod=exports.MirrorPad=exports.Minimum=exports.Min=exports.Mean=exports.Maximum=exports.MaxPoolWithArgmax=exports.MaxPoolGrad=exports.MaxPool3DGrad=exports.MaxPool3D=exports.MaxPool=exports.Max=exports.LogicalOr=exports.LogicalNot=exports.LogicalAnd=exports.LogSoftmax=exports.Log1p=exports.Log=exports.LinSpace=exports.LessEqual=exports.Less=exports.LeakyRelu=exports.LRNGrad=exports.LRN=exports.IsNan=exports.IsInf=exports.IsFinite=exports.Imag=exports.Identity=exports.IFFT=exports.GreaterEqual=exports.Greater=exports.GatherV2=exports.GatherNd=exports.FusedDepthwiseConv2D=exports.FusedConv2D=exports.FusedBatchNorm=exports.FromPixels=exports.FloorDiv=exports.Floor=exports.FlipLeftRight=exports.Fill=exports.FFT=exports.Expm1=exports.ExpandDims=exports.Exp=exports.Erf=exports.Equal=exports.EluGrad=exports.Elu=exports.Einsum=exports.Dilation2DBackpropInput=exports.Dilation2DBackpropFilter=exports.Dilation2D=exports.Diag=exports.DepthwiseConv2dNativeBackpropInput=exports.DepthwiseConv2dNativeBackpropFilter=exports.DepthwiseConv2dNative=exports.DepthToSpace=exports.DenseBincount=exports.Cumsum=exports.CropAndResize=exports.Cosh=exports.Cos=exports.Conv3DBackpropInputV2=exports.Conv3DBackpropFilterV2=exports.Conv3D=exports.Conv2DBackpropInput=exports.Conv2DBackpropFilter=exports.Conv2D=exports.Concat=exports.ComplexAbs=exports.Complex=exports.ClipByValue=exports.Ceil=exports.Cast=exports.BroadcastTo=exports.BroadcastArgs=exports.Bincount=exports.BatchToSpaceND=exports.BatchMatMul=exports.AvgPoolGrad=exports.AvgPool3DGrad=exports.AvgPool3D=exports.AvgPool=exports.Atanh=exports.Atan2=exports.Atan=exports.Asinh=exports.Asin=exports.ArgMin=exports.ArgMax=exports.Any=exports.All=exports.AddN=exports.Add=exports.Acosh=exports.Acos=exports.Abs=void 0;const o="Abs";exports.Abs=o;const t="Acos";exports.Acos=t;const e="Acosh";exports.Acosh=e;const s="Add";exports.Add=s;const r="AddN";exports.AddN=r;const p="All";exports.All=p;const x="Any";exports.Any=x;const n="ArgMax";exports.ArgMax=n;const a="ArgMin";exports.ArgMin=a;const i="Asin";exports.Asin=i;const c="Asinh";exports.Asinh=c;const l="Atan";exports.Atan=l;const u="Atanh";exports.Atanh=u;const d="Atan2";exports.Atan2=d;const S="AvgPool";exports.AvgPool=S;const D="AvgPoolGrad";exports.AvgPoolGrad=D;const g="AvgPool3D";exports.AvgPool3D=g;const m="AvgPool3DGrad";exports.AvgPool3DGrad=m;const A="BatchMatMul";exports.BatchMatMul=A;const h="BatchToSpaceND";exports.BatchToSpaceND=h;const M="Bincount";exports.Bincount=M;const v="BroadcastTo";exports.BroadcastTo=v;const C="BroadcastArgs";exports.BroadcastArgs=C;const N="Cast";exports.Cast=N;const F="Ceil";exports.Ceil=F;const B="ClipByValue";exports.ClipByValue=B;const R="Complex";exports.Complex=R;const P="ComplexAbs";exports.ComplexAbs=P;const L="Concat";exports.Concat=L;const k="Conv2D";exports.Conv2D=k;const G="Conv2DBackpropFilter";exports.Conv2DBackpropFilter=G;const T="Conv2DBackpropInput";exports.Conv2DBackpropInput=T;const E="Conv3D";exports.Conv3D=E;const I="Conv3DBackpropFilterV2";exports.Conv3DBackpropFilterV2=I;const f="Conv3DBackpropInputV2";exports.Conv3DBackpropInputV2=f;const V="Cos";exports.Cos=V;const q="Cosh";exports.Cosh=q;const y="Cumsum";exports.Cumsum=y;const w="CropAndResize";exports.CropAndResize=w;const b="DenseBincount";exports.DenseBincount=b;const z="DepthToSpace";exports.DepthToSpace=z;const O="DepthwiseConv2dNative";exports.DepthwiseConv2dNative=O;const U="DepthwiseConv2dNativeBackpropFilter";exports.DepthwiseConv2dNativeBackpropFilter=U;const W="DepthwiseConv2dNativeBackpropInput";exports.DepthwiseConv2dNativeBackpropInput=W;const H="Diag";exports.Diag=H;const _="Dilation2D";exports.Dilation2D=_;const K="Dilation2DBackpropInput";exports.Dilation2DBackpropInput=K;const Z="Dilation2DBackpropFilter";exports.Dilation2DBackpropFilter=Z;const j="RealDiv";exports.RealDiv=j;const J="Einsum";exports.Einsum=J;const Q="Elu";exports.Elu=Q;const X="EluGrad";exports.EluGrad=X;const Y="Erf";exports.Erf=Y;const $="Equal";exports.Equal=$;const oo="Exp";exports.Exp=oo;const to="ExpandDims";exports.ExpandDims=to;const eo="Expm1";exports.Expm1=eo;const so="FFT";exports.FFT=so;const ro="Fill";exports.Fill=ro;const po="FlipLeftRight";exports.FlipLeftRight=po;const xo="Floor";exports.Floor=xo;const no="FloorDiv";exports.FloorDiv=no;const ao="FusedBatchNorm";exports.FusedBatchNorm=ao;const io="GatherV2";exports.GatherV2=io;const co="GatherNd";exports.GatherNd=co;const lo="Greater";exports.Greater=lo;const uo="GreaterEqual";exports.GreaterEqual=uo;const So="Identity";exports.Identity=So;const Do="IFFT";exports.IFFT=Do;const go="Imag";exports.Imag=go;const mo="IsFinite";exports.IsFinite=mo;const Ao="IsInf";exports.IsInf=Ao;const ho="IsNan";exports.IsNan=ho;const Mo="LeakyRelu";exports.LeakyRelu=Mo;const vo="Less";exports.Less=vo;const Co="LessEqual";exports.LessEqual=Co;const No="LinSpace";exports.LinSpace=No;const Fo="Log";exports.Log=Fo;const Bo="Log1p";exports.Log1p=Bo;const Ro="LogicalAnd";exports.LogicalAnd=Ro;const Po="LogicalNot";exports.LogicalNot=Po;const Lo="LogicalOr";exports.LogicalOr=Lo;const ko="LogSoftmax";exports.LogSoftmax=ko;const Go="LRN";exports.LRN=Go;const To="LRNGrad";exports.LRNGrad=To;const Eo="Max";exports.Max=Eo;const Io="Maximum";exports.Maximum=Io;const fo="MaxPool";exports.MaxPool=fo;const Vo="MaxPoolGrad";exports.MaxPoolGrad=Vo;const qo="MaxPool3D";exports.MaxPool3D=qo;const yo="MaxPool3DGrad";exports.MaxPool3DGrad=yo;const wo="MaxPoolWithArgmax";exports.MaxPoolWithArgmax=wo;const bo="Mean";exports.Mean=bo;const zo="Min";exports.Min=zo;const Oo="Minimum";exports.Minimum=Oo;const Uo="MirrorPad";exports.MirrorPad=Uo;const Wo="Mod";exports.Mod=Wo;const Ho="Multinomial";exports.Multinomial=Ho;const _o="Multiply";exports.Multiply=_o;const Ko="Neg";exports.Neg=Ko;const Zo="NotEqual";exports.NotEqual=Zo;const jo="NonMaxSuppressionV3";exports.NonMaxSuppressionV3=jo;const Jo="NonMaxSuppressionV4";exports.NonMaxSuppressionV4=Jo;const Qo="NonMaxSuppressionV5";exports.NonMaxSuppressionV5=Qo;const Xo="OnesLike";exports.OnesLike=Xo;const Yo="OneHot";exports.OneHot=Yo;const $o="Pack";exports.Pack=$o;const ot="PadV2";exports.PadV2=ot;const tt="Pool";exports.Pool=tt;const et="Pow";exports.Pow=et;const st="Prelu";exports.Prelu=st;const rt="Prod";exports.Prod=rt;const pt="Range";exports.Range=pt;const xt="Real";exports.Real=xt;const nt="Reciprocal";exports.Reciprocal=nt;const at="Relu";exports.Relu=at;const it="Reshape";exports.Reshape=it;const ct="ResizeNearestNeighbor";exports.ResizeNearestNeighbor=ct;const lt="ResizeNearestNeighborGrad";exports.ResizeNearestNeighborGrad=lt;const ut="ResizeBilinear";exports.ResizeBilinear=ut;const dt="ResizeBilinearGrad";exports.ResizeBilinearGrad=dt;const St="Relu6";exports.Relu6=St;const Dt="Reverse";exports.Reverse=Dt;const gt="Round";exports.Round=gt;const mt="Rsqrt";exports.Rsqrt=mt;const At="ScatterNd";exports.ScatterNd=At;const ht="Select";exports.Select=ht;const Mt="Selu";exports.Selu=Mt;const vt="Slice";exports.Slice=vt;const Ct="Sin";exports.Sin=Ct;const Nt="Sinh";exports.Sinh=Nt;const Ft="Sign";exports.Sign=Ft;const Bt="Sigmoid";exports.Sigmoid=Bt;const Rt="Softplus";exports.Softplus=Rt;const Pt="Sqrt";exports.Sqrt=Pt;const Lt="Sum";exports.Sum=Lt;const kt="SpaceToBatchND";exports.SpaceToBatchND=kt;const Gt="SplitV";exports.SplitV=Gt;const Tt="Softmax";exports.Softmax=Tt;const Et="SparseFillEmptyRows";exports.SparseFillEmptyRows=Et;const It="SparseReshape";exports.SparseReshape=It;const ft="SparseSegmentMean";exports.SparseSegmentMean=ft;const Vt="SparseSegmentSum";exports.SparseSegmentSum=Vt;const qt="SparseToDense";exports.SparseToDense=qt;const yt="SquaredDifference";exports.SquaredDifference=yt;const wt="Square";exports.Square=wt;const bt="StridedSlice";exports.StridedSlice=bt;const zt="StringNGrams";exports.StringNGrams=zt;const Ot="StringSplit";exports.StringSplit=Ot;const Ut="StringToHashBucketFast";exports.StringToHashBucketFast=Ut;const Wt="Sub";exports.Sub=Wt;const Ht="Tan";exports.Tan=Ht;const _t="Tanh";exports.Tanh=_t;const Kt="Tile";exports.Tile=Kt;const Zt="TopK";exports.TopK=Zt;const jt="Transform";exports.Transform=jt;const Jt="Transpose";exports.Transpose=Jt;const Qt="Unique";exports.Unique=Qt;const Xt="Unpack";exports.Unpack=Xt;const Yt="UnsortedSegmentSum";exports.UnsortedSegmentSum=Yt;const $t="ZerosLike";exports.ZerosLike=$t;const oe="Step";exports.Step=oe;const te="FromPixels";exports.FromPixels=te;const ee="RotateWithOffset";exports.RotateWithOffset=ee;const se="_FusedMatMul";exports._FusedMatMul=se;const re="FusedConv2D";exports.FusedConv2D=re;const pe="FusedDepthwiseConv2D";exports.FusedDepthwiseConv2D=pe;
},{}],"wJg6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyRegisteredKernels=g,exports.getGradient=u,exports.getKernel=a,exports.getKernelsForBackend=c,exports.registerGradient=l,exports.registerKernel=f,exports.unregisterGradient=d,exports.unregisterKernel=p;var e=require("./environment"),r=require("./global_util"),t=o(require("./log"));function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}const i=(0,r.getGlobal)("kernelRegistry",()=>new Map),s=(0,r.getGlobal)("gradRegistry",()=>new Map);function a(e,r){const t=b(e,r);return i.get(t)}function u(e){return s.get(e)}function c(e){const r=i.entries(),t=[];for(;;){const{done:n,value:o}=r.next();if(n)break;const[i,s]=o,[a]=i.split("_");a===e&&t.push(s)}return t}function f(e){const{kernelName:r,backendName:n}=e,o=b(r,n);i.has(o)&&t.warn(`The kernel '${r}' for backend `+`'${n}' is already registered`),i.set(o,e)}function l(r){const{kernelName:n}=r;s.has(n)&&(0,e.env)().getBool("DEBUG")&&t.warn(`Overriding the gradient for '${n}'`),s.set(n,r)}function p(e,r){const t=b(e,r);if(!i.has(t))throw new Error(`The kernel '${e}' for backend `+`'${r}' is not registered`);i.delete(t)}function d(e){if(!s.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);s.delete(e)}function g(e,r){c(e).forEach(e=>{f(Object.assign({},e,{backendName:r}))})}function b(e,r){return`${r}_${e}`}
},{"./environment":"Fbeg","./global_util":"QcKL","./log":"EnTq"}],"YA3p":[function(require,module,exports) {
module.exports=t;var i=null;try{i=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(L){}function t(i,t,n){this.low=0|i,this.high=0|t,this.unsigned=!!n}function n(i){return!0===(i&&i.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=n;var h={},s={};function e(i,t){var n,e,r;return t?(r=0<=(i>>>=0)&&i<256)&&(e=s[i])?e:(n=u(i,(0|i)<0?-1:0,!0),r&&(s[i]=n),n):(r=-128<=(i|=0)&&i<128)&&(e=h[i])?e:(n=u(i,i<0?-1:0,!1),r&&(h[i]=n),n)}function r(i,t){if(isNaN(i))return t?N:m;if(t){if(i<0)return N;if(i>=c)return p}else{if(i<=-w)return _;if(i+1>=w)return q}return i<0?r(-i,t).neg():u(i%d|0,i/d|0,t)}function u(i,n,h){return new t(i,n,h)}t.fromInt=e,t.fromNumber=r,t.fromBits=u;var o=Math.pow;function g(i,t,n){if(0===i.length)throw Error("empty string");if("NaN"===i||"Infinity"===i||"+Infinity"===i||"-Infinity"===i)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var h;if((h=i.indexOf("-"))>0)throw Error("interior hyphen");if(0===h)return g(i.substring(1),t,n).neg();for(var s=r(o(n,8)),e=m,u=0;u<i.length;u+=8){var f=Math.min(8,i.length-u),l=parseInt(i.substring(u,u+f),n);if(f<8){var a=r(o(n,f));e=e.mul(a).add(r(l))}else e=(e=e.mul(s)).add(r(l))}return e.unsigned=t,e}function f(i,t){return"number"==typeof i?r(i,t):"string"==typeof i?g(i,t):u(i.low,i.high,"boolean"==typeof t?t:i.unsigned)}t.fromString=g,t.fromValue=f;var l=65536,a=1<<24,d=l*l,c=d*d,w=c/2,v=e(a),m=e(0);t.ZERO=m;var N=e(0,!0);t.UZERO=N;var E=e(1);t.ONE=E;var y=e(1,!0);t.UONE=y;var b=e(-1);t.NEG_ONE=b;var q=u(-1,2147483647,!1);t.MAX_VALUE=q;var p=u(-1,-1,!0);t.MAX_UNSIGNED_VALUE=p;var _=u(0,-2147483648,!1);t.MIN_VALUE=_;var B=t.prototype;B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},B.toString=function(i){if((i=i||10)<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=r(i),n=this.div(t),h=n.mul(t).sub(this);return n.toString(i)+h.toInt().toString(i)}return"-"+this.neg().toString(i)}for(var s=r(o(i,6),this.unsigned),e=this,u="";;){var g=e.div(s),f=(e.sub(g.mul(s)).toInt()>>>0).toString(i);if((e=g).isZero())return f+u;for(;f.length<6;)f="0"+f;u=""+f+u}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var i=0!=this.high?this.high:this.low,t=31;t>0&&0==(i&1<<t);t--);return 0!=this.high?t+33:t+1},B.isZero=function(){return 0===this.high&&0===this.low},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return 1==(1&this.low)},B.isEven=function(){return 0==(1&this.low)},B.equals=function(i){return n(i)||(i=f(i)),(this.unsigned===i.unsigned||this.high>>>31!=1||i.high>>>31!=1)&&(this.high===i.high&&this.low===i.low)},B.eq=B.equals,B.notEquals=function(i){return!this.eq(i)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(i){return this.comp(i)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(i){return this.comp(i)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(i){return this.comp(i)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(i){return this.comp(i)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(i){if(n(i)||(i=f(i)),this.eq(i))return 0;var t=this.isNegative(),h=i.isNegative();return t&&!h?-1:!t&&h?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(E)},B.neg=B.negate,B.add=function(i){n(i)||(i=f(i));var t=this.high>>>16,h=65535&this.high,s=this.low>>>16,e=65535&this.low,r=i.high>>>16,o=65535&i.high,g=i.low>>>16,l=0,a=0,d=0,c=0;return d+=(c+=e+(65535&i.low))>>>16,a+=(d+=s+g)>>>16,l+=(a+=h+o)>>>16,l+=t+r,u((d&=65535)<<16|(c&=65535),(l&=65535)<<16|(a&=65535),this.unsigned)},B.subtract=function(i){return n(i)||(i=f(i)),this.add(i.neg())},B.sub=B.subtract,B.multiply=function(t){if(this.isZero())return m;if(n(t)||(t=f(t)),i)return u(i.mul(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(_))return t.isOdd()?_:m;if(t.eq(_))return this.isOdd()?_:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(v)&&t.lt(v))return r(this.toNumber()*t.toNumber(),this.unsigned);var h=this.high>>>16,s=65535&this.high,e=this.low>>>16,o=65535&this.low,g=t.high>>>16,l=65535&t.high,a=t.low>>>16,d=65535&t.low,c=0,w=0,N=0,E=0;return N+=(E+=o*d)>>>16,w+=(N+=e*d)>>>16,N&=65535,w+=(N+=o*a)>>>16,c+=(w+=s*d)>>>16,w&=65535,c+=(w+=e*a)>>>16,w&=65535,c+=(w+=o*l)>>>16,c+=h*d+s*a+e*l+o*g,u((N&=65535)<<16|(E&=65535),(c&=65535)<<16|(w&=65535),this.unsigned)},B.mul=B.multiply,B.divide=function(t){if(n(t)||(t=f(t)),t.isZero())throw Error("division by zero");var h,s,e;if(i)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?i.div_u:i.div_s)(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?N:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return N;if(t.gt(this.shru(1)))return y;e=N}else{if(this.eq(_))return t.eq(E)||t.eq(b)?_:t.eq(_)?E:(h=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?E:b:(s=this.sub(t.mul(h)),e=h.add(s.div(t)));if(t.eq(_))return this.unsigned?N:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();e=m}for(s=this;s.gte(t);){h=Math.max(1,Math.floor(s.toNumber()/t.toNumber()));for(var g=Math.ceil(Math.log(h)/Math.LN2),l=g<=48?1:o(2,g-48),a=r(h),d=a.mul(t);d.isNegative()||d.gt(s);)d=(a=r(h-=l,this.unsigned)).mul(t);a.isZero()&&(a=E),e=e.add(a),s=s.sub(d)}return e},B.div=B.divide,B.modulo=function(t){return n(t)||(t=f(t)),i?u((this.unsigned?i.rem_u:i.rem_s)(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return u(~this.low,~this.high,this.unsigned)},B.and=function(i){return n(i)||(i=f(i)),u(this.low&i.low,this.high&i.high,this.unsigned)},B.or=function(i){return n(i)||(i=f(i)),u(this.low|i.low,this.high|i.high,this.unsigned)},B.xor=function(i){return n(i)||(i=f(i)),u(this.low^i.low,this.high^i.high,this.unsigned)},B.shiftLeft=function(i){return n(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?u(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):u(0,this.low<<i-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(i){return n(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?u(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):u(this.high>>i-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(i){if(n(i)&&(i=i.toInt()),0===(i&=63))return this;var t=this.high;return i<32?u(this.low>>>i|t<<32-i,t>>>i,this.unsigned):u(32===i?t:t>>>i-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},B.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var i=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&i,i>>>8&255,i>>>16&255,i>>>24]},B.toBytesBE=function(){var i=this.high,t=this.low;return[i>>>24,i>>>16&255,i>>>8&255,255&i,t>>>24,t>>>16&255,t>>>8&255,255&t]},t.fromBytes=function(i,n,h){return h?t.fromBytesLE(i,n):t.fromBytesBE(i,n)},t.fromBytesLE=function(i,n){return new t(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,n)},t.fromBytesBE=function(i,n){return new t(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],n)};
},{}],"o3Db":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fingerPrint64=x,exports.hexToLong=a;var d=t(require("long"));function r(d){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(d){return d?n:t})(d)}function t(d,t){if(!t&&d&&d.__esModule)return d;if(null===d||"object"!=typeof d&&"function"!=typeof d)return{default:d};var n=r(t);if(n&&n.has(d))return n.get(d);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in d)if("default"!==u&&Object.prototype.hasOwnProperty.call(d,u)){var o=e?Object.getOwnPropertyDescriptor(d,u):null;o&&(o.get||o.set)?Object.defineProperty(a,u,o):a[u]=d[u]}return a.default=d,n&&n.set(d,a),a}const n=d.default||d;function a(d){return n.fromString(d,!0,16)}const e=a("c3a5c85c97cb3127"),u=a("b492b66fbe98f273"),o=a("9ae16a3b2f90404f");function l(d){return d.xor(d.shru(47))}function f(d,r,t){const a=d.slice(r,r+t);return n.fromBytes(Array.from(a),!0,!0)}function c(d,r){return f(d,r,8)}function i(d,r){return f(d,r,4)}function m(d,r){return 0===r?d:d.shru(r).or(d.shl(64-r))}function s(d,r,t=a("9ddfea08eb382d69")){let n=d.xor(r).mul(t);n=n.xor(n.shru(47));let e=r.xor(n).mul(t);return e=(e=e.xor(e.shru(47))).mul(t)}function p(d,r,t,n,a,e){a=a.add(d),e=m(e.add(a).add(n),21);const u=a;return a=(a=a.add(r)).add(t),e=e.add(m(a,44)),[a.add(n),e.add(u)]}function h(d,r,t,n){return p(c(d,r),c(d,r+8),c(d,r+16),c(d,r+24),t,n)}function b(d,r=d.length){if(r>=8){const t=o.add(2*r),n=c(d,0).add(o),a=c(d,r-8);return s(m(a,37).mul(t).add(n),m(n,25).add(a).mul(t),t)}if(r>=4){const t=o.add(2*r);return s(i(d,0).shl(3).add(r),i(d,r-4),t)}if(r>0){const t=d[0]+(d[r>>1]<<8),n=r+(d[r-1]<<2);return l(o.mul(t).xor(e.mul(n))).mul(o)}return o}function O(d,r=d.length){const t=o.add(2*r),n=c(d,0).mul(u),a=c(d,8),e=c(d,r-8).mul(t),l=c(d,r-16).mul(o);return s(m(n.add(a),43).add(m(e,30)).add(l),n.add(m(a.add(o),18)).add(e),t)}function g(d,r=d.length){const t=o.add(2*r),n=c(d,0).mul(o),a=c(d,8),e=c(d,r-8).mul(t),u=c(d,r-16).mul(o),l=m(n.add(a),43).add(m(e,30)).add(u),f=s(l,n.add(m(a.add(o),18)).add(e),t),i=c(d,16).mul(t),p=c(d,24),h=l.add(c(d,r-32)).mul(t),b=f.add(c(d,r-24)).mul(t);return s(m(i.add(p),43).add(m(h,30)).add(b),i.add(m(p.add(n),18)).add(h),t)}function x(d,r=d.length){const t=n.fromNumber(81,!0);if(r<=32)return r<=16?b(d,r):O(d,r);if(r<=64)return g(d,r);let a=t,f=t.mul(u).add(113),i=l(f.mul(o).add(113)).mul(o),p=[n.UZERO,n.UZERO],x=[n.UZERO,n.UZERO];a=a.mul(o).add(c(d,0));let y=0;const j=64*(r-1>>6),v=j+(r-1&63)-63;do{a=m(a.add(f).add(p[0]).add(c(d,y+8)),37).mul(u),f=m(f.add(p[1]).add(c(d,y+48)),42).mul(u),a=a.xor(x[1]),f=f.add(p[0]).add(c(d,y+40)),i=m(i.add(x[0]),33).mul(u),p=h(d,y,p[1].mul(u),a.add(x[0])),x=h(d,y+32,i.add(x[1]),f.add(c(d,y+16))),[i,a]=[a,i],y+=64}while(y!==j);const P=u.add(i.and(255).shl(1));return y=v,x[0]=x[0].add(r-1&63),p[0]=p[0].add(x[0]),x[0]=x[0].add(p[0]),a=m(a.add(f).add(p[0]).add(c(d,y+8)),37).mul(P),f=m(f.add(p[1]).add(c(d,y+48)),42).mul(P),a=a.xor(x[1].mul(9)),f=f.add(p[0].mul(9).add(c(d,y+40))),i=m(i.add(x[0]),33).mul(P),p=h(d,y,p[1].mul(P),a.add(x[0])),x=h(d,y+32,i.add(x[1]),f.add(c(d,y+16))),[i,a]=[a,i],s(s(p[0],x[0],P).add(l(f).mul(e)).add(i),s(p[1],x[1],P).add(a),P)}
},{"long":"YA3p"}],"P6nv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createScalarValue:!0,toTypedArray:!0,now:!0,fetch:!0,encodeString:!0,decodeString:!0};exports.createScalarValue=u,exports.decodeString=s,exports.encodeString=p,exports.fetch=l,exports.now=c,exports.toTypedArray=i;var r=require("./environment"),t=a(require("./util_base"));Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var n=require("./hash_util");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=a?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(e,r){return"string"===r?p(e):i([e],r)}function f(e,r){return e instanceof Float32Array&&"float32"===r||e instanceof Int32Array&&"int32"===r||e instanceof Uint8Array&&"bool"===r}function i(e,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=t.flatten(e)),(0,r.env)().getBool("DEBUG")&&t.checkConversionForErrors(e,n),f(e,n))return e;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(e);if("int32"===n)return new Int32Array(e);if("bool"===n){const r=new Uint8Array(e.length);for(let t=0;t<r.length;++t)0!==Math.round(e[t])&&(r[t]=1);return r}throw new Error(`Unknown data type ${n}`)}function c(){return(0,r.env)().platform.now()}function l(e,t){return(0,r.env)().platform.fetch(e,t)}function p(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.encode(e,t)}function s(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.decode(e,t)}Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===n[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});
},{"./environment":"Fbeg","./util_base":"cppa","./hash_util":"o3Db"}],"LCLi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Profiler=exports.Logger=void 0,exports.checkComputationForErrors=l;var e=require("./environment"),t=o(require("./util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=l?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,o&&o.set(e,n),n}class n{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new i)}profileKernel(r,o,n){let i;const s=()=>{i=n()};let a;const c=t.now();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(const e of i)e.dataSync();a=Promise.resolve({kernelMs:t.now()-c})}if((0,e.env)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let e=0;e<i.length;e++){const t=i[e];t.data().then(e=>{l(e,t.dtype,r)})}return{kernelName:r,outputs:i,inputs:o,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:o,inputs:n,extraInfo:l}=e;r.forEach(e=>{Promise.all([e.data(),o,l]).then(r=>{this.logger.logKernelProfile(t,e,r[0],r[1],n,r[2])})})}}function l(e,t,r){if("float32"!==t)return!1;for(let o=0;o<e.length;o++){const t=e[o];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${r}'`),!0}return!1}exports.Profiler=n;class i{logKernelProfile(e,r,o,n,l,i){const s="number"==typeof n?t.rightPad(`${n}ms`,9):n.error,a=t.rightPad(e,25),c=r.rank,f=r.size,u=t.rightPad(r.shape.toString(),14);let p="";for(const t in l){const e=l[t];if(null!=e){const o=e.shape||r.shape,n=o.length;p+=`${t}: ${n}D ${n>0?o:""} `}}console.log(`%c${a}\t%c${s}\t%c${c}D ${u}\t%c${f}\t%c${p}\t%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}exports.Logger=i;
},{"./environment":"Fbeg","./util":"P6nv"}],"ugac":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.backpropagateGradients=o,exports.getFilteredNodesXToY=r;var t=n(require("./util"));function e(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(e=function(t){return t?r:n})(t)}function n(t,n){if(!n&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=e(n);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=i?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=t[s]}return o.default=t,r&&r.set(t,o),o}function r(t,e,n){const r={},o={};for(let a=0;a<e.length;a++)r[e[a].id]=!0;for(let a=0;a<t.length;a++){const n=t[a],i=n.inputs;for(const t in i){const s=i[t];let u=!1;for(let t=0;t<e.length;t++)if(r[s.id]){n.outputs.forEach(t=>r[t.id]=!0),u=!0,o[n.id]=!0;break}if(u)break}}const i={};i[n.id]=!0;const s={};for(let a=t.length-1;a>=0;a--){const e=t[a],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(i[e.outputs[t].id]){for(const t in n)i[n[t].id]=!0,s[e.id]=!0;break}}const u=[];for(let a=0;a<t.length;a++){const e=t[a];if(o[e.id]&&s[e.id]){const t={};for(const o in e.inputs){const n=e.inputs[o];r[n.id]&&(t[o]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,u.push(n)}}return u}function o(e,n,r,o){for(let i=n.length-1;i>=0;i--){const s=n[i],u=[];if(s.outputs.forEach(t=>{const n=e[t.id];null!=n?u.push(n):u.push(null)}),null==s.gradient)throw new Error("Cannot compute gradient: gradient function not found "+`for ${s.kernelName}.`);const a=s.gradient(u);for(const n in s.inputs){if(!(n in a))throw new Error(`Cannot backprop through input ${n}. `+`Available gradients found: ${Object.keys(a)}.`);const i=r(()=>a[n]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`${n} must have 'float32' dtype, but has '${i.dtype}'`);const u=s.inputs[n];if(!t.arraysEqual(i.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`'${n}' has shape '${i.shape}', which does not match `+`the shape of the input '${u.shape}'`);if(null==e[u.id])e[u.id]=i;else{const t=e[u.id];e[u.id]=o(t,i),t.dispose()}}}}
},{"./util":"P6nv"}],"GKxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensorToString=o;var e=require("./util");const t=20,r=3,n=7;function o(t,r,n,o){const l=(0,e.computeStrides)(r),i=s(t,r,n,l),c=r.length,p=u(t,r,n,l,i),a=["Tensor"];return o&&(a.push(`  dtype: ${n}`),a.push(`  rank: ${c}`),a.push(`  shape: [${r}]`),a.push("  values:")),a.push(p.map(e=>"    "+e).join("\n")),a.join("\n")}function s(t,r,n,o){const s=(0,e.sizeFromShape)(r),i=o[o.length-1],u=new Array(i).fill(0),p=r.length,a="complex64"===n?c(t):t;if(p>1)for(let e=0;e<s/i;e++){const t=e*i;for(let e=0;e<i;e++)u[e]=Math.max(u[e],l(a[t+e],0,n).length)}return u}function l(t,r,o){let s;return s=Array.isArray(t)?`${parseFloat(t[0].toFixed(n))} + `+`${parseFloat(t[1].toFixed(n))}j`:(0,e.isString)(t)?`'${t}'`:"bool"===o?i(t):parseFloat(t.toFixed(n)).toString(),(0,e.rightPad)(s,r)}function i(e){return 0===e?"false":"true"}function u(e,n,o,s,p,a=!0){const f="complex64"===o?2:1,h=n[0],m=n.length;if(0===m){if("complex64"===o){return[l(c(e)[0],0,o)]}return"bool"===o?[i(e[0])]:[e[0].toString()]}if(1===m){if(h>t){const t=r*f;let n=Array.from(e.slice(0,t)),s=Array.from(e.slice((h-r)*f,h*f));return"complex64"===o&&(n=c(n),s=c(s)),["["+n.map((e,t)=>l(e,p[t],o)).join(", ")+", ..., "+s.map((e,t)=>l(e,p[h-r+t],o)).join(", ")+"]"]}return["["+("complex64"===o?c(e):Array.from(e)).map((e,t)=>l(e,p[t],o)).join(", ")+"]"]}const g=n.slice(1),x=s.slice(1),d=s[0]*f,y=[];if(h>t){for(let t=0;t<r;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,!1))}y.push("...");for(let t=h-r;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}}else for(let t=0;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}const j=2===m?",":"";y[0]="["+y[0]+j;for(let t=1;t<y.length-1;t++)y[t]=" "+y[t]+j;let F=",\n";for(let t=2;t<m;t++)F+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":F),y}function c(e){const t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}
},{"./util":"P6nv"}],"DTHt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Variable=exports.TensorBuffer=exports.Tensor=void 0,exports.getGlobalTensorClass=c,exports.setDeprecationWarningFn=d,exports.setOpHandler=p,exports.setTensorTracker=l;var t=require("./global_util"),e=require("./tensor_format"),s=i(require("./util"));function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(r=function(t){return t?s:e})(t)}function i(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=r(e);if(s&&s.has(t))return s.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=n?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=t[a]}return i.default=t,s&&s.set(t,i),i}class n{constructor(t,e,r){if(this.dtype=e,this.shape=t.slice(),this.size=s.sizeFromShape(t),null!=r){const t=r.length;s.assert(t===this.size,()=>`Length of values '${t}' does not match the size `+`inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||s.getArrayFromDType(e,this.size),this.strides=(0,s.computeStrides)(t)}set(t,...e){0===e.length&&(e=[0]),s.assert(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must `+`match the rank (${this.rank})`);const r=this.locToIndex(e);this.values[r]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e]){const e=`Requested out of range element at ${t}. `+`  Buffer shape=${this.shape}`;throw new Error(e)}e++}let s=t[t.length-1];for(let r=0;r<t.length-1;++r)s+=this.strides[r]*t[r];return this.values[s]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let s=0;s<t.length-1;++s)e+=this.strides[s]*t[s];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let s=0;s<e.length-1;++s)e[s]=Math.floor(t/this.strides[s]),t-=e[s]*this.strides[s];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return a().makeTensor(this.values,this.shape,this.dtype)}}exports.TensorBuffer=n;let a=null,o=null,h=null;function l(t){a=t}function p(t){o=t}function d(t){h=t}class u{constructor(t,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=s.sizeFromShape(t),this.strides=(0,s.computeStrides)(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return o.buffer(this.shape,this.dtype,t)}bufferSync(){return o.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return(0,s.toNestedArray)(this.shape,t,"complex64"===this.dtype)}arraySync(){return(0,s.toNestedArray)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const t=a().read(this.dataId);if("string"===this.dtype){const r=await t;try{return r.map(t=>s.decodeString(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=a().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>s.decodeString(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await a().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(a().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return o.print(this,t)}clone(){return this.throwIfDisposed(),o.clone(this)}toString(t=!1){const s=this.dataSync();return(0,e.tensorToString)(s,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),o.cast(this,t)}variable(t=!0,e,s){return this.throwIfDisposed(),a().makeVariable(this,t,e,s)}}function c(){return(0,t.getGlobal)("Tensor",()=>u)}exports.Tensor=u,Object.defineProperty(u,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),c();class f extends u{constructor(t,e,s,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and `+`previous value (${this.dtype}) must match`);if(!s.arraysEqual(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and `+`previous value (${this.shape}) must match`);a().disposeTensor(this),this.dataId=t.dataId,a().incRef(this,null)}dispose(){a().disposeVariable(this),this.isDisposedInternal=!0}}exports.Variable=f,Object.defineProperty(f,Symbol.hasInstance,{value:t=>t instanceof u&&null!=t.assign&&t.assign instanceof Function});
},{"./global_util":"QcKL","./tensor_format":"GKxW","./util":"P6nv"}],"Grh1":[function(require,module,exports) {
"use strict";var o,t,n,e,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rank=void 0,exports.sumOutType=c,exports.upcastType=r,exports.Rank=o,function(o){o.R0="R0",o.R1="R1",o.R2="R2",o.R3="R3",o.R4="R4",o.R5="R5",o.R6="R6"}(o||(exports.Rank=o={})),function(o){o.float32="float32",o.int32="int32",o.bool="int32",o.complex64="complex64"}(t||(t={})),function(o){o.float32="float32",o.int32="int32",o.bool="bool",o.complex64="complex64"}(n||(n={})),function(o){o.float32="float32",o.int32="float32",o.bool="float32",o.complex64="complex64"}(e||(e={})),function(o){o.float32="complex64",o.int32="complex64",o.bool="complex64",o.complex64="complex64"}(l||(l={}));const i={float32:e,int32:t,bool:n,complex64:l};function r(o,t){if("string"===o||"string"===t){if("string"===o&&"string"===t)return"string";throw new Error(`Can not upcast ${o} with ${t}`)}return i[o][t]}function c(o){return r(o,"int32")}
},{}],"fpST":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertTypesMatch=s,exports.getTensorsInContainer=i,exports.isTensorInList=o,exports.makeTypesMatch=n;var t=require("./tensor"),e=require("./types"),r=require("./util");function n(t,r){if(t.dtype===r.dtype)return[t,r];const n=(0,e.upcastType)(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function s(t,e){(0,r.assert)(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and`+` second(${e.dtype}) input must match`)}function o(t,e){return e.some(e=>e.id===t.id)}function i(t){const e=[];return u(t,e,new Set),e}function u(e,r,n){if(null==e)return;if(e instanceof t.Tensor)return void r.push(e);if(!p(e))return;const s=e;for(const t in s){const e=s[t];n.has(e)||(n.add(e),u(e,r,n))}}function p(t){return Array.isArray(t)||"object"==typeof t}
},{"./tensor":"DTHt","./types":"Grh1","./util":"P6nv"}],"Nc3Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Engine=exports.ENGINE=void 0,exports.add=b,exports.getOrMakeEngine=g;var e=require("./backends/backend"),t=require("./environment"),s=require("./global_util"),n=require("./kernel_names"),r=require("./kernel_registry"),a=require("./profiler"),i=require("./tape"),o=require("./tensor"),c=require("./tensor_util"),d=u(require("./util")),h=u(require("./log"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(l=function(e){return e?s:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=l(t);if(s&&s.has(e))return s.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,s&&s.set(e,n),n}function p(e){return null!=e.kernelName}class f{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class k{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new f}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t];if(await this.initializeBackend(s).success)return void(await this.setBackend(s))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make `+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been `+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,s=1){return e in this.registryFactory?(h.warn(`${e} backend was already registered. `+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:s},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:s}=this.initializeBackend(e);if(!(s?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new a.Profiler(this.backendInstance),!0}setupRegisteredKernels(){(0,r.getKernelsForBackend)(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){(0,r.getKernelsForBackend)(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(t){const s=this.registryFactory[t];if(null==s)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=s.factory();if(!r||r instanceof e.KernelBackend||"function"!=typeof r.then)return this.registry[t]=r,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,s=r.then(s=>!(e<this.pendingBackendInitId)&&(this.registry[t]=s,this.pendingBackendInit=null,!0)).catch(s=>!(e<this.pendingBackendInitId)&&(this.pendingBackendInit=null,h.warn(`Initialization of backend ${t} failed`),h.warn(s.stack||s.message),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}}catch(n){return h.warn(`Initialization of backend ${t} failed`),h.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t],{success:n,asyncInit:r}=this.initializeBackend(s);if(r||n)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const s=this.state.tensorInfo.get(t),n=s.backend,r=this.readSync(t),a=n.refCount(t);n.disposeData(t,!0),s.backend=e,e.move(t,r,s.shape,s.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let s,n=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}return this.scopedRun(()=>this.startScope(n),()=>this.endScope(s),()=>((s=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,t,s){e();try{const e=s();return t(),e}catch(n){throw t(),n}}nextTensorId(){return k.nextTensorId++}nextVariableId(){return k.nextVariableId++}clone(e){const t=m.runKernel(n.Identity,{x:e}),s={x:e};return this.addTapeNode(this.state.activeScope.name,s,[t],e=>({x:()=>{const t={x:e},s={dtype:"float32"};return m.runKernel(n.Cast,t,s)}}),[],{}),t}runKernel(e,t,s){if(null==this.backendName&&this.backend,!(null!=(0,r.getKernel)(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,s){const n=this.backend.numDataIds();let r=0;s.forEach(e=>{r+="complex64"===e.dtype?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=n-t-r-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak `+`(${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,s=[];const n=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;let o,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const h=p(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(p(e)){const{kernelName:t,inputs:a,attrs:i}=e;null==this.backendName&&this.backend;const h=(0,r.getKernel)(t,this.backendName);d.assert(null!=h,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),o=(()=>{const e=this.backend.numDataIds();c=h.kernelFunc({inputs:a,attrs:i,backend:this.backend});const r=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,r);const o=r.map(e=>{if(null!=e.rank)return e;const{dataId:t,shape:s,dtype:n}=e;return this.makeTensorFromDataId(t,s,n)});if(n){const e=this.getTensorsForGradient(t,a,o);s=this.saveTensorsForBackwardMode(e)}return o})}else{const{forwardFunc:t}=e,r=e=>{n&&(s=e.map(e=>this.keep(this.clone(e))))};o=(()=>{const e=this.backend.numDataIds();c=this.tidy(()=>t(this.backend,r));const s=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,e,s),s})}const{inputs:l,attrs:u}=e,f=p(e)?null:e.backwardsFunc;let k;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(k=this.profiler.profileKernel(h,l,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(k),t=k.outputs):t=o()}),n&&this.addTapeNode(h,l,t,f,s,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:h,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(e=>null!=l[e]?l[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:k.timeMs,extraInfo:k.extraInfo}),Array.isArray(c)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,s){const n=(0,r.getGradient)(e);if(null!=n){const e=n.inputsToSave||[],r=n.outputsToSave||[];let a;n.saveAllInputs?(d.assert(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(t).map(e=>t[e])):a=e.map(e=>t[e]);const i=s.filter((e,t)=>r[t]);return a.concat(i)}return[]}makeTensor(e,t,s,n){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",n=n||this.backend;let r=e;"string"===s&&d.isString(e[0])&&(r=e.map(e=>d.encodeString(e)));const a=n.write(r,t,s),i=new o.Tensor(t,s,a,this.nextTensorId());if(this.trackTensor(i,n),"string"===s){const e=this.state.tensorInfo.get(a),t=(0,d.bytesFromStringArray)(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,s,n){s=s||"float32";const r=new o.Tensor(t,s,e,this.nextTensorId());return this.trackTensor(r,n),r}makeVariable(e,t=!0,s,n){s=s||this.nextVariableId().toString(),null!=n&&n!==e.dtype&&(e=e.cast(n));const r=new o.Variable(e,t,s,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let s=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(s=e.size*d.bytesPerElement(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof o.Variable||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*d.bytesPerElement(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const n of this.state.activeProfile.kernels)n.kernelTimeMs=await n.kernelTimeMs,n.extraInfo=await n.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,s,n,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:s,saved:a},c=(0,r.getGradient)(e);null!=c&&(n=c.gradFunc),null!=n&&(o.gradient=(e=>(e=e.map((e,t)=>{if(null==e){const e=s[t],n=d.makeZerosTypedArray(e.size,e.dtype);return this.makeTensor(n,e.shape,e.dtype)}return e}),n(e.length>1?e:e[0],a,i)))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,c.getTensorsInContainer)(e),s=new Set(t.map(e=>e.id));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||s.has(e.id)||e.dispose()}const n=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==n.id||this.track(e)})}gradients(e,t,s,n=!1){if(d.assert(t.length>0,()=>"gradients() received an empty list of xs."),null!=s&&"float32"!==s.dtype)throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));d.assert(r instanceof o.Tensor,()=>"The result y returned by f() must be a tensor.");const a=(0,i.getFilteredNodesXToY)(this.state.activeTape,t,r);if(!n&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[r.id]=null==s?y(r.shape):s,(0,i.backpropagateGradients)(e,a,e=>this.tidy(e),b);const n=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:r,grads:n}})}customGrad(e){return d.assert(d.isFunction(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let s;d.assert(t.every(e=>e instanceof o.Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const n={};t.forEach((e,t)=>{n[t]=e});return this.runKernelFunc({forwardFunc:(n,r)=>(s=e(...t,r),d.assert(s.value instanceof o.Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),d.assert(d.isFunction(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),backwardsFunc:(e,n)=>{const r=s.gradFunc(e,n),a=Array.isArray(r)?r:[r];d.assert(a.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),d.assert(a.every(e=>e instanceof o.Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const i={};return a.forEach((e,t)=>{i[t]=(()=>e)}),i},inputs:n})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=(0,d.now)(),s=await this.backend.time(e);return s.wallMs=(0,d.now)()-t,s}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new f;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function y(e){const t=(0,d.makeOnesTypedArray)((0,d.sizeFromShape)(e),"float32");return m.makeTensor(t,e,"float32")}function g(){const e=(0,s.getGlobalNamespace)();if(null==e._tfengine){const s=new t.Environment(e);e._tfengine=new k(s)}return(0,t.setEnvironmentGlobal)(e._tfengine.ENV),(0,o.setTensorTracker)(()=>e._tfengine),e._tfengine}exports.Engine=k,k.nextTensorId=0,k.nextVariableId=0;const m=g();function b(e,t){const s={a:e,b:t};return m.runKernel(n.Add,s)}exports.ENGINE=m;
},{"./backends/backend":"X4AU","./environment":"Fbeg","./global_util":"QcKL","./kernel_names":"sdEe","./kernel_registry":"wJg6","./profiler":"LCLi","./tape":"ugac","./tensor":"DTHt","./tensor_util":"fpST","./util":"P6nv","./log":"EnTq"}],"GUPw":[function(require,module,exports) {
"use strict";function e(){return"undefined"!=typeof navigator&&null!=navigator}let i;function o(e){i=e}function t(o){if(void 0!==i)return i;if(o||e()){if(o||(o=navigator),"ReactNative"===o.product)return!0;const e=o.userAgent||o.vendor||("undefined"!=typeof window?window.opera:"");if(!e){const e=o;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function a(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBrowser=a,exports.isMobile=t,exports.mockIsMobile=o;
},{}],"BElI":[function(require,module,exports) {
var process = require("process");
var e=require("process");require("./engine");var r=i(require("./device_util")),t=require("./environment");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var g=o?Object.getOwnPropertyDescriptor(e,a):null;g&&(g.get||g.set)?Object.defineProperty(i,a,g):i[a]=e[a]}return i.default=e,t&&t.set(e,i),i}const o=(0,t.env)();o.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),o.registerFlag("IS_BROWSER",()=>r.isBrowser()),o.registerFlag("IS_NODE",()=>void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node),o.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),o.registerFlag("PROD",()=>!1),o.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>o.getBool("DEBUG")),o.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),o.registerFlag("IS_TEST",()=>!1),o.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),o.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);
},{"./engine":"Nc3Y","./device_util":"GUPw","./environment":"Fbeg","process":"g5IB"}],"c6yR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertToTensor=a,exports.convertToTensorArray=u,exports.inferShape=o;var r=require("./engine"),e=require("./environment"),n=require("./tensor"),t=require("./util");function o(r,n){let o=r;if((0,t.isTypedArray)(r))return"string"===n?[]:[r.length];if(!Array.isArray(r))return[];const i=[];for(;Array.isArray(o)||(0,t.isTypedArray)(o)&&"string"!==n;)i.push(o.length),o=o[0];return Array.isArray(r)&&(0,e.env)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&s(r,i,[]),i}function s(r,e,n){if(n=n||[],!Array.isArray(r)&&!(0,t.isTypedArray)(r))return void(0,t.assert)(0===e.length,()=>`Element arr[${n.join("][")}] is a primitive, `+`but should be an array/TypedArray of ${e[0]} elements`);(0,t.assert)(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, `+`but is an array of ${r.length} elements`),(0,t.assert)(r.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} `+`elements, but has ${r.length} elements`);const o=e.slice(1);for(let t=0;t<r.length;++t)s(r[t],o,n.concat(t))}function i(r,e,n,t){if("string_or_numeric"!==r){if(null==r)throw new Error("Expected dtype cannot be null.");if("numeric"!==r&&r!==e||"numeric"===r&&"string"===e)throw new Error(`Argument '${n}' passed to '${t}' must `+`be ${r} tensor, but got ${e} tensor`)}}function a(e,s,a,u="numeric"){if(e instanceof n.Tensor)return i(u,e.dtype,s,a),e;let l=(0,t.inferDtype)(e);if("string"!==l&&["bool","int32","float32"].indexOf(u)>=0&&(l=u),i(u,l,s,a),null==e||!(0,t.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${s}' passed to '${a}' must be a `+`Tensor or TensorLike, but got '${r}'`)}const y=o(e,l);(0,t.isTypedArray)(e)||Array.isArray(e)||(e=[e]);const f="string"!==l?(0,t.toTypedArray)(e,l):(0,t.flatten)(e,[],!0);return r.ENGINE.makeTensor(f,y,l)}function u(r,e,n,t="numeric"){if(!Array.isArray(r))throw new Error(`Argument ${e} passed to ${n} must be a `+"`Tensor[]` or `TensorLike[]`");return r.map((r,o)=>a(r,`${e}[${o}]`,n,t))}
},{"./engine":"Nc3Y","./environment":"Fbeg","./tensor":"DTHt","./util":"P6nv"}],"JtaO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OP_SCOPE_SUFFIX=void 0,exports.op=n;var e=require("../engine"),t=require("../util");const o="__op";function n(n){const r=Object.keys(n);if(1!==r.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+`${r.length} keys.`);let i=r[0];const s=n[i];i.endsWith("_")&&(i=i.substring(0,i.length-1)),i+=o;const c=(...o)=>{e.ENGINE.startScope(i);try{const r=s(...o);return(0,t.isPromise)(r)&&console.error("Cannot return a Promise inside of tidy."),e.ENGINE.endScope(r),r}catch(n){throw e.ENGINE.endScope(null),n}};return Object.defineProperty(c,"name",{value:i,configurable:!0}),c}exports.OP_SCOPE_SUFFIX=o;
},{"../engine":"Nc3Y","../util":"P6nv"}],"Iowv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=p(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var u=o?Object.getOwnPropertyDescriptor(e,p):null;u&&(u.get||u.set)?Object.defineProperty(n,p,u):n[p]=e[p]}return n.default=e,t&&t.set(e,n),n}function u(o,a){const p=(0,t.convertToTensor)(o,"real","complex"),u=(0,t.convertToTensor)(a,"imag","complex");n.assertShapesMatch(p.shape,u.shape,`real and imag shapes, ${p.shape} and ${u.shape}, `+"must match in call to tf.complex().");const i={real:p,imag:u};return e.ENGINE.runKernel(r.Complex,i)}const i=(0,o.op)({complex_:u});exports.complex=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"m0jF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTensor=s;var e=require("../engine"),r=require("../util");function s(s,o,t,a){if(null==a&&(a=(0,r.inferDtype)(s)),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,r.isTypedArray)(s)&&!Array.isArray(s)&&"number"!=typeof s&&"boolean"!=typeof s&&"string"!=typeof s)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=o){(0,r.assertNonNegativeIntegerDimensions)(o);const e=(0,r.sizeFromShape)(o),s=(0,r.sizeFromShape)(t);(0,r.assert)(e===s,()=>`Based on the provided shape, [${o}], the tensor should have `+`${e} values but has ${s}`);for(let a=0;a<t.length;++a){const e=t[a],s=a!==t.length-1||e!==(0,r.sizeFromShape)(o.slice(a));(0,r.assert)(t[a]===o[a]||!s,()=>"Error creating a new Tensor. Inferred shape "+`(${t}) does not match the provided `+`shape (${o}). `)}}return(0,r.isTypedArray)(s)||Array.isArray(s)||(s=[s]),o=o||t,s="string"!==a?(0,r.toTypedArray)(s,a):(0,r.flatten)(s,[],!0),e.ENGINE.makeTensor(s,o,a)}
},{"../engine":"Nc3Y","../util":"P6nv"}],"P2QC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor=t;var e=require("../tensor_util_env"),r=require("./tensor_ops_util");function t(t,n,o){const s=(0,e.inferShape)(t,o);return(0,r.makeTensor)(t,n,s,o)}
},{"../tensor_util_env":"c6yR","./tensor_ops_util":"m0jF"}],"annF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DTYPE_VALUE_SIZE_MAP=void 0;const t={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};exports.DTYPE_VALUE_SIZE_MAP=t;
},{}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"aqZJ":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aqZJ","buffer":"aMB2"}],"FekA":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayBufferToBase64String=u,exports.base64StringToArrayBuffer=p,exports.basename=c,exports.concatenateArrayBuffers=d,exports.concatenateTypedArrays=l,exports.decodeWeights=s,exports.encodeWeights=a,exports.getFloat16Decoder=U,exports.getModelArtifactsForJSON=h,exports.getModelArtifactsInfoForJSON=w,exports.getModelJSONForModelArtifacts=g,exports.stringByteLength=y;var t=require("../ops/complex"),n=require("../ops/tensor"),r=require("../util"),o=require("./types");const i=4;async function a(e,t){const n=[],r=[],o=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let a=0;a<o.length;++a){const s=o[a],l=Array.isArray(e)?e[a].tensor:e[s];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype&&"complex64"!==l.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const f={name:s,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){const e=new Promise(async e=>{const t=await l.bytes(),n=t.reduce((e,t)=>e+t.length,0)+i*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=i,r.set(e,o),o+=e.length}e(r)});r.push(e)}else r.push(l.data());null!=t&&(f.group=t),n.push(f)}return{data:l(await Promise.all(r)),specs:n}}function s(e,a){const s={};let l,f=0;for(const y of a){const a=y.name,u=y.dtype,p=y.shape,d=(0,r.sizeFromShape)(p);let c;if("quantization"in y){const t=y.quantization;if("uint8"===t.dtype||"uint16"===t.dtype){if(!("min"in t&&"scale"in t))throw new Error(`Weight ${y.name} with quantization ${t.dtype} `+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==t.dtype)throw new Error(`Weight ${y.name} has unknown `+`quantization dtype ${t.dtype}. `+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==u)throw new Error(`Weight ${y.name} is quantized with ${t.dtype} `+`which only supports weights of type float32 not ${u}.`)}const n=o.DTYPE_VALUE_SIZE_MAP[t.dtype],r=e.slice(f,f+d*n),i="uint8"===t.dtype?new Uint8Array(r):new Uint16Array(r);if("float32"===u)if("uint8"===t.dtype||"uint16"===t.dtype){c=new Float32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];c[e]=n*t.scale+t.min}}else{if("float16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type float32.");void 0===l&&(l=U()),c=l(i)}else{if("int32"!==u)throw new Error(`Unsupported dtype in weight '${a}': ${u}`);if("uint8"!==t.dtype&&"uint16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type int32.");c=new Int32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];c[e]=Math.round(n*t.scale+t.min)}}f+=d*n}else if("string"===u){const t=(0,r.sizeFromShape)(y.shape);c=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(f,f+i))[0];f+=i;const n=new Uint8Array(e.slice(f,f+t));c.push(n),f+=t}}else{const r=o.DTYPE_VALUE_SIZE_MAP[u],i=e.slice(f,f+d*r);if("float32"===u)c=new Float32Array(i);else if("int32"===u)c=new Int32Array(i);else if("bool"===u)c=new Uint8Array(i);else{if("complex64"!==u)throw new Error(`Unsupported dtype in weight '${a}': ${u}`);{c=new Float32Array(i);const e=new Float32Array(c.length/2),r=new Float32Array(c.length/2);for(let t=0;t<e.length;t++)e[t]=c[2*t],r[t]=c[2*t+1];const o=(0,n.tensor)(e,p,"float32"),l=(0,n.tensor)(r,p,"float32");s[a]=(0,t.complex)(o,l),o.dispose(),l.dispose()}}f+=d*r}"complex64"!==u&&(s[a]=(0,n.tensor)(c,p,u))}return s}function l(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});const r=new Uint8Array(t);let o=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength}),r.buffer}const f=void 0!==e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function y(t){return f?e.byteLength(t):new Blob([t]).size}function u(t){if(f)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,o=n.length;e<o;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function p(t){if(f){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function d(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function c(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function g(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function h(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){const[r,o]=await t(e.weightsManifest);n.weightSpecs=r,n.weightData=o}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),n}function w(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:y(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:y(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function A(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function m(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function b(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function U(){const e=A(),t=m(),n=b();return r=>{const o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let a=0;a<r.length;a++){const o=r[a],s=e[n[o>>10]+(1023&o)]+t[o>>10];i[a]=s}return new Float32Array(o)}}
},{"../ops/complex":"Iowv","../ops/tensor":"P2QC","../util":"P6nv","./types":"annF","buffer":"aMB2"}],"y7n6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerSaveRouter=exports.registerLoadRouter=exports.getSaveHandlers=exports.getLoadHandlers=exports.IORouterRegistry=void 0;class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==e.instance&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,s){return e.getHandlers(t,"load",s)}static getHandlers(t,s,r){const a=[];return("load"===s?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(e=>{const s=e(t,r);null!==s&&a.push(s)}),a}}exports.IORouterRegistry=e;const t=t=>e.registerSaveRouter(t);exports.registerSaveRouter=t;const s=t=>e.registerLoadRouter(t);exports.registerLoadRouter=s;const r=t=>e.getSaveHandlers(t);exports.getSaveHandlers=r;const a=(t,s)=>e.getLoadHandlers(t,s);exports.getLoadHandlers=a;
},{}],"nmFM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserIndexedDBManager=exports.BrowserIndexedDB=void 0,exports.browserIndexedDB=h,exports.deleteDatabase=d,exports.indexedDBRouter=void 0,require("../flags");var e=require("../environment"),o=require("./io_utils"),r=require("./router_registry");const t="tensorflowjs",n=1,s="models_store",c="model_info_store";async function d(){const e=l();return new Promise((o,r)=>{const n=e.deleteDatabase(t);n.onsuccess=(()=>o()),n.onerror=(e=>r(e))})}function l(){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const o="undefined"==typeof window?self:window,r=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB||o.shimIndexedDB;if(null==r)throw new Error("The current browser does not appear to support IndexedDB.");return r}function i(e){const o=e.result;o.createObjectStore(s,{keyPath:"modelPath"}),o.createObjectStore(c,{keyPath:"modelPath"})}class a{constructor(e){if(this.indexedDB=l(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,r){return new Promise((e,d)=>{const l=this.indexedDB.open(t,n);l.onupgradeneeded=(()=>i(l)),l.onsuccess=(()=>{const t=l.result;if(null==r){const o=t.transaction(s,"readonly"),r=o.objectStore(s).get(this.modelPath);r.onsuccess=(()=>{if(null==r.result)return t.close(),d(new Error(`Cannot find model with path '${this.modelPath}' `+"in IndexedDB."));e(r.result.modelArtifacts)}),r.onerror=(e=>(t.close(),d(r.error))),o.oncomplete=(()=>t.close())}else{const n=(0,o.getModelArtifactsInfoForJSON)(r),l=t.transaction(c,"readwrite");let i=l.objectStore(c);const a=i.put({modelPath:this.modelPath,modelArtifactsInfo:n});let u;a.onsuccess=(()=>{const o=(u=t.transaction(s,"readwrite")).objectStore(s).put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:n});o.onsuccess=(()=>e({modelArtifactsInfo:n})),o.onerror=(e=>{const r=(i=l.objectStore(c)).delete(this.modelPath);r.onsuccess=(()=>(t.close(),d(o.error))),r.onerror=(e=>(t.close(),d(o.error)))})}),a.onerror=(e=>(t.close(),d(a.error))),l.oncomplete=(()=>{null==u?t.close():u.oncomplete=(()=>t.close())})}}),l.onerror=(e=>d(l.error))})}}exports.BrowserIndexedDB=a,a.URL_SCHEME="indexeddb://";const u=o=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(o)&&o.startsWith(a.URL_SCHEME)?h(o.slice(a.URL_SCHEME.length)):null;function h(e){return new a(e)}function m(e){return e.startsWith(a.URL_SCHEME)?e.slice(a.URL_SCHEME.length):e}exports.indexedDBRouter=u,r.IORouterRegistry.registerSaveRouter(u),r.IORouterRegistry.registerLoadRouter(u);class f{constructor(){this.indexedDB=l()}async listModels(){return new Promise((e,o)=>{const r=this.indexedDB.open(t,n);r.onupgradeneeded=(()=>i(r)),r.onsuccess=(()=>{const t=r.result,n=t.transaction(c,"readonly"),s=n.objectStore(c).getAll();s.onsuccess=(()=>{const o={};for(const e of s.result)o[e.modelPath]=e.modelArtifactsInfo;e(o)}),s.onerror=(e=>(t.close(),o(s.error))),n.oncomplete=(()=>t.close())}),r.onerror=(e=>o(r.error))})}async removeModel(e){return e=m(e),new Promise((o,r)=>{const d=this.indexedDB.open(t,n);d.onupgradeneeded=(()=>i(d)),d.onsuccess=(()=>{const t=d.result,n=t.transaction(c,"readwrite"),l=n.objectStore(c),i=l.get(e);let a;i.onsuccess=(()=>{if(null==i.result)return t.close(),r(new Error(`Cannot find model with path '${e}' `+"in IndexedDB."));{const n=l.delete(e),c=()=>{const n=(a=t.transaction(s,"readwrite")).objectStore(s).delete(e);n.onsuccess=(()=>o(i.result.modelArtifactsInfo)),n.onerror=(e=>r(i.error))};n.onsuccess=c,n.onerror=(e=>(c(),t.close(),r(i.error)))}}),i.onerror=(e=>(t.close(),r(i.error))),n.oncomplete=(()=>{null==a?t.close():a.oncomplete=(()=>t.close())})}),d.onerror=(e=>r(d.error))})}}exports.BrowserIndexedDBManager=f;
},{"../flags":"BElI","../environment":"Fbeg","./io_utils":"FekA","./router_registry":"y7n6"}],"TVL0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserLocalStorageManager=exports.BrowserLocalStorage=void 0,exports.browserLocalStorage=y,exports.localStorageRouter=void 0,exports.purgeLocalStorageArtifacts=h,require("../flags");var e=require("../environment"),t=require("../util"),o=require("./io_utils"),r=require("./router_registry");const i="/",n="tensorflowjs_models",s="info",a="model_topology",l="weight_specs",g="weight_data",d="model_metadata";function h(){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("purgeLocalStorageModels() cannot proceed because local storage is unavailable in the current environment.");const t=window.localStorage,o=[];for(let e=0;e<t.length;++e){const r=t.key(e),s=n+i;if(r.startsWith(s)&&r.length>s.length){t.removeItem(r);const e=f(r);-1===o.indexOf(e)&&o.push(e)}}return o}function c(e){return{info:[n,e,s].join(i),topology:[n,e,a].join(i),weightSpecs:[n,e,l].join(i),weightData:[n,e,g].join(i),modelMetadata:[n,e,d].join(i)}}function u(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function f(e){const t=e.split(i);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(i)}function w(e){return e.startsWith(S.URL_SCHEME)?e.slice(S.URL_SCHEME.length):e}class S{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=c(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const r=JSON.stringify(e.modelTopology),i=JSON.stringify(e.weightSpecs),n=(0,o.getModelArtifactsInfoForJSON)(e);try{this.LS.setItem(this.keys.info,JSON.stringify(n)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,(0,o.arrayBufferToBase64String)(e.weightData));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:n}}catch(t){throw u(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: `+"size quota being exceeded is a possible cause of this failure: "+`modelTopologyBytes=${n.modelTopologyBytes}, `+`weightSpecsBytes=${n.weightSpecsBytes}, `+`weightDataBytes=${n.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${this.modelPath}' `+"is missing.");t.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==i)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' `+"are missing.");t.weightSpecs=i;const n=this.LS.getItem(this.keys.modelMetadata);if(null!=n){const e=JSON.parse(n);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error("In local storage, the binary weight values of model "+`'${this.modelPath}' are missing.`);return t.weightData=(0,o.base64StringToArrayBuffer)(s),t}}exports.BrowserLocalStorage=S,S.URL_SCHEME="localstorage://";const m=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(S.URL_SCHEME)?y(t.slice(S.URL_SCHEME.length)):null;function y(e){return new S(e)}exports.localStorageRouter=m,r.IORouterRegistry.registerSaveRouter(m),r.IORouterRegistry.registerLoadRouter(m);class p{constructor(){(0,t.assert)((0,e.env)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,t.assert)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=n+i,o=i+s;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(o)){e[f(i)]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){const t=c(e=w(e));if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);const o=JSON.parse(this.LS.getItem(t.info));return u(t),o}}exports.BrowserLocalStorageManager=p;
},{"../flags":"BElI","../environment":"Fbeg","../util":"P6nv","./io_utils":"FekA","./router_registry":"y7n6"}],"HWNt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModelStoreManagerRegistry=void 0,exports.copyModel=c,exports.listModels=o,exports.moveModel=l,exports.removeModel=i;var e=require("../util"),t=require("./router_registry");const n="://";class s{constructor(){this.managers={}}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}static registerManager(t,r){(0,e.assert)(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(n)&&(t=t.slice(0,t.indexOf(n))),(0,e.assert)(t.length>0,()=>"scheme must not be an empty string.");const a=s.getInstance();(0,e.assert)(null==a.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),a.managers[t]=r}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function r(e){if(-1===e.indexOf(n))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+`${s.getSchemes().join(",")}`);return{scheme:e.split(n)[0],path:e.split(n)[1]}}async function a(n,a,o=!1){(0,e.assert)(n!==a,()=>`Old path and new path are the same: '${n}'`);const i=t.IORouterRegistry.getLoadHandlers(n);(0,e.assert)(i.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),(0,e.assert)(i.length<2,()=>`Copying failed because more than one (${i.length}) `+`load handlers for source URL ${n}.`);const c=i[0],l=t.IORouterRegistry.getSaveHandlers(a);(0,e.assert)(l.length>0,()=>"Copying failed because no save handler is found for destination "+`URL ${a}.`),(0,e.assert)(l.length<2,()=>`Copying failed because more than one (${i.length}) `+`save handlers for destination URL ${a}.`);const g=l[0],d=r(n).scheme,u=r(n).path,h=d===r(n).scheme,m=await c.load();o&&h&&await s.getManager(d).removeModel(u);const f=await g.save(m);return o&&!h&&await s.getManager(d).removeModel(u),f.modelArtifactsInfo}async function o(){const e=s.getSchemes(),t={};for(const r of e){const e=await s.getManager(r).listModels();for(const s in e){t[r+n+s]=e[s]}}return t}async function i(e){const t=r(e);return s.getManager(t.scheme).removeModel(t.path)}async function c(e,t){return a(e,t,!1)}async function l(e,t){return a(e,t,!0)}exports.ModelStoreManagerRegistry=s;
},{"../util":"P6nv","./router_registry":"y7n6"}],"szKX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlatformBrowser=void 0,require("../flags");var e=require("../environment"),r=require("../io/indexed_db"),t=require("../io/local_storage"),o=require("../io/model_management");class n{fetch(e,r){return fetch(e,r)}now(){return performance.now()}encode(e,r){if("utf-8"!==r&&"utf8"!==r)throw new Error(`Browser's encoder only supports utf-8, but got ${r}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,r){return new TextDecoder(r).decode(e)}}if(exports.PlatformBrowser=n,(0,e.env)().get("IS_BROWSER")){(0,e.env)().setPlatform("browser",new n);try{o.ModelStoreManagerRegistry.registerManager(t.BrowserLocalStorage.URL_SCHEME,new t.BrowserLocalStorageManager)}catch(a){}try{o.ModelStoreManagerRegistry.registerManager(r.BrowserIndexedDB.URL_SCHEME,new r.BrowserIndexedDBManager)}catch(a){}}
},{"../flags":"BElI","../environment":"Fbeg","../io/indexed_db":"nmFM","../io/local_storage":"TVL0","../io/model_management":"HWNt"}],"sC8V":[function(require,module,exports) {

},{}],"sDG1":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNodeFetch=exports.PlatformNode=void 0,exports.getSystemFetch=s,exports.resetSystemFetch=n,exports.setSystemFetch=c;var t=require("../environment");const r={importFetch:()=>require("node-fetch")};let o;function n(){o=null}function c(e){o=e}function s(){return o}exports.getNodeFetch=r;class u{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=(0,t.env)().global.fetch?(0,t.env)().global.fetch(e,n):(null==o&&(o=r.importFetch()),o(e,n))}now(){const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}exports.PlatformNode=u,(0,t.env)().get("IS_NODE")&&(0,t.env)().setPlatform("node",new u);
},{"../environment":"Fbeg","node-fetch":"sC8V","util":"sC8V","process":"g5IB"}],"WyiN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=o;var e=require("../tensor"),t=n(require("../util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&Object.prototype.hasOwnProperty.call(e,f)){var i=u?Object.getOwnPropertyDescriptor(e,f):null;i&&(i.get||i.set)?Object.defineProperty(o,f,i):o[f]=e[f]}return o.default=e,n&&n.set(e,o),o}function o(r,n="float32",o){return n=n||"float32",t.assertNonNegativeIntegerDimensions(r),new e.TensorBuffer(r,n,o)}
},{"../tensor":"DTHt","../util":"P6nv"}],"qqq3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function u(o,i){const s=(0,r.convertToTensor)(o,"x","cast");if(!n.isValidDtype(i))throw new Error(`Failed to cast to unknown dtype ${i}`);if("string"===i&&"string"!==s.dtype||"string"!==i&&"string"===s.dtype)throw new Error("Only strings can be casted to strings");const u={x:s},a={dtype:i};return e.ENGINE.runKernel(t.Cast,u,a)}const a=(0,o.op)({cast_:u});exports.cast=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"F06q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","clone","string_or_numeric")};return e.ENGINE.runKernel(r.Identity,t)}const i=(0,o.op)({clone_:t});exports.clone=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"xBTU":[function(require,module,exports) {
"use strict";function e(e,t=!1){console.log(e.toString(t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.print=e;
},{}],"i0z4":[function(require,module,exports) {
"use strict";var r=require("./engine");require("./flags"),require("./platforms/platform_browser"),require("./platforms/platform_node");var e=require("./ops/buffer"),s=require("./ops/cast"),t=require("./ops/clone"),i=require("./ops/print"),o=require("./tensor");(0,r.getOrMakeEngine)();const n={buffer:e.buffer,cast:s.cast,clone:t.clone,print:i.print};(0,o.setOpHandler)(n);
},{"./engine":"Nc3Y","./flags":"BElI","./platforms/platform_browser":"szKX","./platforms/platform_node":"sDG1","./ops/buffer":"WyiN","./ops/cast":"qqq3","./ops/clone":"F06q","./ops/print":"xBTU","./tensor":"DTHt"}],"D1db":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserDownloads=void 0,exports.browserDownloads=d,exports.browserDownloadsRouter=void 0,exports.browserFiles=w,require("../flags");var e=require("../environment"),t=require("./io_utils"),o=require("./router_registry");const s="model",r=".json",i=".weights.bin";function n(e){return new Promise(e=>setTimeout(e)).then(e)}class a{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(a.URL_SCHEME)&&(t=t.slice(a.URL_SCHEME.length)),null!=t&&0!==t.length||(t=s),this.modelJsonFileName=t+r,this.weightDataFileName=t+i}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const o=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r=(0,t.getModelJSONForModelArtifacts)(e,s),i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=i,await n(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=o,await n(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:(0,t.getModelArtifactsInfoForJSON)(e)}}}}exports.BrowserDownloads=a,a.URL_SCHEME="downloads://";class l{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+`but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,o)=>{const s=new FileReader;s.onload=(s=>{const r=JSON.parse(s.target.result),i=r.modelTopology;if(null==i)return void o(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void o(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:i});const n=(0,t.getModelArtifactsForJSON)(r,e=>this.loadWeights(e));e(n)}),s.onerror=(e=>o("Failed to read model topology and weights manifest JSON "+`from file '${this.jsonFile.name}'. BrowserFiles supports loading `+"Keras-style tf.Model artifacts only.")),s.readAsText(this.jsonFile)})}loadWeights(e){const o=[],s=[];for(const t of e)o.push(...t.weights),s.push(...t.paths);const r=this.checkManifestAndWeightFiles(e),i=s.map(e=>this.loadWeightsFile(e,r[e]));return Promise.all(i).then(e=>[o,(0,t.concatenateArrayBuffers)(e)])}loadWeightsFile(e,t){return new Promise((o,s)=>{const r=new FileReader;r.onload=(e=>{const t=e.target.result;o(t)}),r.onerror=(t=>s(`Failed to weights data from file of path '${e}'.`)),r.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const o=[],s=this.weightsFiles.map(e=>(0,t.basename)(e.name)),r={};for(const i of e)i.paths.forEach(e=>{const i=(0,t.basename)(e);if(-1!==o.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: "+`'${i}'`);if(o.push(i),-1===s.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);r[e]=this.weightsFiles[s.indexOf(i)]});if(o.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+`(${o.length}) and the number of weight files provided `+`(${this.weightsFiles.length}).`);return r}}const h=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(a.URL_SCHEME)?d(t.slice(a.URL_SCHEME.length)):null;function d(e="model"){return new a(e)}function w(e){return new l(e)}exports.browserDownloadsRouter=h,o.IORouterRegistry.registerSaveRouter(h);
},{"../flags":"BElI","../environment":"Fbeg","./io_utils":"FekA","./router_registry":"y7n6"}],"lqgM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.monitorPromisesProgress=r;var t=require("../util");function r(r,e,n,s){!function(r){(0,t.assert)(null!=r&&Array.isArray(r)&&r.length>0,()=>"promises must be a none empty array")}(r),function(r,e){(0,t.assert)(r>=0&&r<=1,()=>"Progress fraction must be in range [0, 1], but "+`got startFraction ${r}`),(0,t.assert)(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+`got endFraction ${e}`),(0,t.assert)(e>=r,()=>"startFraction must be no more than endFraction, but "+`got startFraction ${r} and endFraction `+`${e}`)}(n=null==n?0:n,s=null==s?1:s);let o=0;return Promise.all(r.map(t=>(t.then(t=>{const a=n+ ++o/r.length*(s-n);return e(a),t}),t)))}
},{"../util":"P6nv"}],"gxqX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadWeights=u,exports.loadWeightsAsArrayBuffer=a,exports.weightsLoaderFactory=f;var e=require("../environment"),t=i(require("../util")),r=require("./io_utils"),n=require("./progress"),o=require("./types");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}async function a(t,r){null==r&&(r={});const o=null==r.fetchFunc?(0,e.env)().platform.fetch:r.fetchFunc,s=t.map(e=>o(e,r.requestInit,{isBinary:!0})),i=(null==r.onProgress?await Promise.all(s):await(0,n.monitorPromisesProgress)(s,r.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==r.onProgress?await Promise.all(i):await(0,n.monitorPromisesProgress)(i,r.onProgress,.5,1)}async function u(e,t="",r,n){return f(e=>a(e,{requestInit:n}))(e,t,r)}function f(e){return async(n,s="",i)=>{const a=n.map(()=>!1),u={},f=null!=i?i.map(()=>!1):[],c=[];if(n.forEach((e,r)=>{let n=0;e.weights.forEach(e=>{const s="quantization"in e?e.quantization.dtype:e.dtype,l=o.DTYPE_VALUE_SIZE_MAP[s]*t.sizeFromShape(e.shape),p=()=>{a[r]=!0,null==u[r]&&(u[r]=[]),u[r].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=i?i.forEach((t,r)=>{t===e.name&&(p(),f[r]=!0)}):p(),c.push(e.name),n+=l})}),!f.every(e=>e)){const e=i.filter((e,t)=>!f[t]);throw new Error("Could not find weights in manifest with names: "+`${e.join(", ")}. \n`+"Manifest JSON has weights with names: "+`${c.join(", ")}.`)}const l=a.reduce((e,t,r)=>(t&&e.push(r),e),[]),p=[];l.forEach(e=>{n[e].paths.forEach(e=>{const t=s+(s.endsWith("/")?"":"/")+e;p.push(t)})});const h=await e(p),y={};let g=0;return l.forEach(e=>{const t=n[e].paths.length;let o=0;for(let r=0;r<t;r++)o+=h[g+r].byteLength;const s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let r=0;r<t;r++){const e=new Uint8Array(h[g+r]);i.set(e,a),a+=e.byteLength}u[e].forEach(e=>{const t=s.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=(0,r.decodeWeights)(t,[e.manifestEntry]);for(const r in n)y[r]=n[r]}),g+=t}),y}}
},{"../environment":"Fbeg","../util":"P6nv","./io_utils":"FekA","./progress":"lqgM","./types":"annF"}],"qhti":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HTTPRequest=void 0,exports.browserHTTPRequest=c,exports.http=f,exports.httpRouter=void 0,exports.isHTTPScheme=l,exports.parseUrl=a;var t=require("../environment"),e=require("../util"),r=require("./io_utils"),s=require("./router_registry"),o=require("./weights_loader");const n="application/octet-stream",i="application/json";class h{constructor(r,s){if(this.DEFAULT_METHOD="POST",null==s&&(s={}),this.weightPathPrefix=s.weightPathPrefix,this.onProgress=s.onProgress,this.weightUrlConverter=s.weightUrlConverter,null!=s.fetchFunc?((0,e.assert)("function"==typeof s.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=s.fetchFunc):this.fetch=(0,t.env)().platform.fetch,(0,e.assert)(null!=r&&r.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(r)&&(0,e.assert)(2===r.length,()=>"URL paths for http must have a length of 2, "+`(actual length is ${r.length}).`),this.path=r,null!=s.requestInit&&null!=s.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=s.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o=(0,r.getModelJSONForModelArtifacts)(t,s);e.body.append("model.json",new Blob([JSON.stringify(o)],{type:i}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:n}),"model.weights.bin");const h=await this.fetch(this.path,e);if(h.ok)return{modelArtifactsInfo:(0,r.getModelArtifactsInfoForJSON)(t),responses:[h]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+`${h.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code `+`${t.status}. Please verify this URL points to `+"the model JSON of the model to load.");let e;try{e=await t.json()}catch(n){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const s=e.modelTopology,o=e.weightsManifest;if(null==s&&null==o)throw new Error(`The JSON from HTTP path ${this.path} contains neither model `+"topology or manifest for weights.");return(0,r.getModelArtifactsForJSON)(e,t=>this.loadWeights(t))}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[s,n]=a(e),i=this.weightPathPrefix||s,h=[];for(const r of t)h.push(...r.weights);const l=[],u=[];for(const r of t)for(const t of r.paths)null!=this.weightUrlConverter?u.push(this.weightUrlConverter(t)):l.push(i+t+n);this.weightUrlConverter&&l.push(...await Promise.all(u));const f=await(0,o.loadWeightsAsArrayBuffer)(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[h,(0,r.concatenateArrayBuffers)(f)]}}function a(t){const e=t.lastIndexOf("/"),r=t.lastIndexOf("?");return[t.substring(0,e)+"/",r>e?t.substring(r):""]}function l(t){return null!=t.match(h.URL_SCHEME_REGEX)}exports.HTTPRequest=h,h.URL_SCHEME_REGEX=/^https?:\/\//;const u=(t,e)=>{if("undefined"==typeof fetch&&(null==e||null==e.fetchFunc))return null;{let r=!0;if(r=Array.isArray(t)?t.every(t=>l(t)):l(t))return f(t,e)}return null};function f(t,e){return new h(t,e)}function c(t,e){return f(t,e)}exports.httpRouter=u,s.IORouterRegistry.registerSaveRouter(u),s.IORouterRegistry.registerLoadRouter(u);
},{"../environment":"Fbeg","../util":"P6nv","./io_utils":"FekA","./router_registry":"y7n6","./weights_loader":"gxqX"}],"ulLq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromMemory=t,exports.withSaveHandler=r;class e{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class o{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function t(o,t,r,n){if(1===arguments.length){return null!=o.modelTopology||null!=o.weightSpecs?new e(o):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o,weightSpecs:t,weightData:r,trainingConfig:n})}function r(e){return new o(e)}
},{}],"EwEE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"browserFiles",{enumerable:!0,get:function(){return e.browserFiles}}),Object.defineProperty(exports,"browserHTTPRequest",{enumerable:!0,get:function(){return r.browserHTTPRequest}}),Object.defineProperty(exports,"concatenateArrayBuffers",{enumerable:!0,get:function(){return t.concatenateArrayBuffers}}),Object.defineProperty(exports,"copyModel",{enumerable:!0,get:function(){return i.copyModel}}),Object.defineProperty(exports,"decodeWeights",{enumerable:!0,get:function(){return t.decodeWeights}}),Object.defineProperty(exports,"encodeWeights",{enumerable:!0,get:function(){return t.encodeWeights}}),Object.defineProperty(exports,"fromMemory",{enumerable:!0,get:function(){return o.fromMemory}}),Object.defineProperty(exports,"getLoadHandlers",{enumerable:!0,get:function(){return n.getLoadHandlers}}),Object.defineProperty(exports,"getModelArtifactsForJSON",{enumerable:!0,get:function(){return t.getModelArtifactsForJSON}}),Object.defineProperty(exports,"getModelArtifactsInfoForJSON",{enumerable:!0,get:function(){return t.getModelArtifactsInfoForJSON}}),Object.defineProperty(exports,"getSaveHandlers",{enumerable:!0,get:function(){return n.getSaveHandlers}}),Object.defineProperty(exports,"http",{enumerable:!0,get:function(){return r.http}}),Object.defineProperty(exports,"isHTTPScheme",{enumerable:!0,get:function(){return r.isHTTPScheme}}),Object.defineProperty(exports,"listModels",{enumerable:!0,get:function(){return i.listModels}}),Object.defineProperty(exports,"loadWeights",{enumerable:!0,get:function(){return u.loadWeights}}),Object.defineProperty(exports,"moveModel",{enumerable:!0,get:function(){return i.moveModel}}),Object.defineProperty(exports,"registerLoadRouter",{enumerable:!0,get:function(){return n.registerLoadRouter}}),Object.defineProperty(exports,"registerSaveRouter",{enumerable:!0,get:function(){return n.registerSaveRouter}}),Object.defineProperty(exports,"removeModel",{enumerable:!0,get:function(){return i.removeModel}}),Object.defineProperty(exports,"weightsLoaderFactory",{enumerable:!0,get:function(){return u.weightsLoaderFactory}}),Object.defineProperty(exports,"withSaveHandler",{enumerable:!0,get:function(){return o.withSaveHandler}}),require("./indexed_db"),require("./local_storage");var e=require("./browser_files"),r=require("./http"),t=require("./io_utils"),o=require("./passthrough"),n=require("./router_registry"),u=require("./weights_loader"),i=require("./model_management");
},{"./indexed_db":"nmFM","./local_storage":"TVL0","./browser_files":"D1db","./http":"qhti","./io_utils":"FekA","./passthrough":"ulLq","./router_registry":"y7n6","./weights_loader":"gxqX","./model_management":"HWNt"}],"mMWq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u,s=!1,a=!1){let i=(0,n.convertToTensor)(o,"a","matMul"),l=(0,n.convertToTensor)(u,"b","matMul");[i,l]=(0,t.makeTypesMatch)(i,l);const c={a:i,b:l},p={transposeA:s,transposeB:a};return e.ENGINE.runKernel(r.BatchMatMul,c,p)}const s=(0,o.op)({matMul_:u});exports.matMul=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"ETzZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHot=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation");function t(n,t,i=1,s=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const u={indices:(0,r.convertToTensor)(n,"indices","oneHot","int32")},c={depth:t,onValue:i,offValue:s};return e.ENGINE.runKernel(o.OneHot,u,c)}const i=(0,n.op)({oneHot_:t});exports.oneHot=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"uQkx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function u(o,a){const s=(0,t.convertToTensor)(o,"x","transpose");if(null==a&&(a=s.shape.map((e,r)=>r).reverse()),n.assert(s.rank===a.length,()=>`Error in transpose: rank of input ${s.rank} `+`must match length of perm ${a}.`),a.forEach(e=>{n.assert(e>=0&&e<s.rank,()=>`All entries in 'perm' must be between 0 and ${s.rank-1}`+` but got ${a}`)}),s.rank<=1)return s.clone();const u={x:s},i={perm:a};return e.ENGINE.runKernel(r.Transpose,u,i)}const i=(0,o.op)({transpose_:u});exports.transpose=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"vqyG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.confusionMatrix=void 0,exports.confusionMatrix_=c;var e=require("../tensor_util_env"),t=u(require("../util")),r=require("./cast"),n=require("./mat_mul"),o=require("./one_hot"),s=require("./operation"),i=require("./transpose");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function c(s,a,u){const c=(0,e.convertToTensor)(s,"labels","confusionMatrix"),p=(0,e.convertToTensor)(a,"predictions","confusionMatrix");t.assert(null==u||u>0&&Number.isInteger(u),()=>"If provided, numClasses must be a positive integer, "+`but got ${u}`),t.assert(1===c.rank,()=>`Expected the rank of labels to be 1, but got ${c.rank}`),t.assert(1===p.rank,()=>"Expected the rank of predictions to be 1, "+`but got ${p.rank}`),t.assert(c.shape[0]===p.shape[0],()=>"Mismatch in the number of examples: "+`${c.shape[0]} vs. ${p.shape[0]}. `+"Labels and predictions should have the same number of elements."),t.assert(u>0&&Number.isInteger(u),()=>"numClasses is required to be a positive integer, but got "+`${u}`);const f=(0,o.oneHot)((0,r.cast)(c,"int32"),u),l=(0,o.oneHot)((0,r.cast)(p,"int32"),u),b=(0,i.transpose)(f),d=(0,n.matMul)(b,l);return(0,r.cast)(d,"int32")}const p=(0,s.op)({confusionMatrix_:c});exports.confusionMatrix=p;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./cast":"qqq3","./mat_mul":"mMWq","./one_hot":"ETzZ","./operation":"JtaO","./transpose":"uQkx"}],"bMAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"confusionMatrix",{enumerable:!0,get:function(){return e.confusionMatrix}});var e=require("./ops/confusion_matrix");
},{"./ops/confusion_matrix":"vqyG"}],"v3VY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor3d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&3!==o.length)throw new Error("tensor3d() requires shape to have three numbers");const u=(0,e.inferShape)(n,s);if(3!==u.length&&1!==u.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"yVDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromPixels=void 0,exports.fromPixelsAsync=p,exports.toPixels=w;var e=require("../engine"),t=require("../environment"),n=require("../kernel_names"),r=require("../kernel_registry"),o=require("../tensor"),a=require("../tensor_util_env"),i=require("./cast"),s=require("./operation"),l=require("./tensor3d");let f;function d(t,o=3){if(o>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let a=!1,i=!1,s=!1,d=!1,u=!1,m=!1;if(t.data instanceof Uint8Array)a=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)i=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)s=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)d=!0;else if(null!=t.getContext)u=!0;else{if(!("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+`but was ${t.constructor.name}`);m=!0}if(s){const e=2;if(s&&t.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=(0,r.getKernel)(n.FromPixels,e.ENGINE.backendName)){const r={pixels:t},a={numChannels:o};return e.ENGINE.runKernel(n.FromPixels,r,a)}const[c,h]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let p,w;if(u?p=t.getContext("2d").getImageData(0,0,c,h).data:i||a?p=t.data:(d||s||m)&&(null==f&&(f=document.createElement("canvas").getContext("2d")),f.canvas.width=c,f.canvas.height=h,f.drawImage(t,0,0,c,h),p=f.getImageData(0,0,c,h).data),4===o)w=new Int32Array(p);else{const e=c*h;w=new Int32Array(e*o);for(let t=0;t<e;t++)for(let e=0;e<o;++e)w[t*o+e]=p[4*t+e]}const g=[h,c,o];return(0,l.tensor3d)(w,g,"int32")}function u(e){return null!=e&&e.data instanceof Uint8Array}function m(){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")}function c(e){return null!=e&&0!==e.width&&0!==e.height}function h(e){return m()&&!(e instanceof ImageBitmap)&&c(e)&&!u(e)}async function p(e,n=3){let r=null;if((0,t.env)().getBool("WRAP_TO_IMAGEBITMAP")&&h(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(o){t=null}r=null!=t&&t.width===e.width&&t.height===e.height?t:e}else r=e;return d(r,n)}async function w(e,t){let n=(0,a.convertToTensor)(e,"img","toPixels");if(!(e instanceof o.Tensor)){const e=n;n=(0,i.cast)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,s]=n.shape.slice(0,2),l=2===n.rank?1:n.shape[2];if(l>4||2===l)throw new Error("toPixels only supports depth of size "+`1, 3 or 4 but got ${l}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}.`+" Please use float32 or int32 tensors.");const f=await n.data(),d="float32"===n.dtype?255:1,u=new Uint8ClampedArray(s*r*4);for(let o=0;o<r*s;++o){const e=[0,0,0,255];for(let r=0;r<l;r++){const t=f[o*l+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+`range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+`range [0 - 255] but encountered ${t}.`);1===l?(e[0]=t*d,e[1]=t*d,e[2]=t*d):e[r]=t*d}const t=4*o;u[t+0]=Math.round(e[0]),u[t+1]=Math.round(e[1]),u[t+2]=Math.round(e[2]),u[t+3]=Math.round(e[3])}if(null!=t){t.width=s,t.height=r;const e=t.getContext("2d"),n=new ImageData(u,s,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),u}const g=(0,s.op)({fromPixels_:d});exports.fromPixels=g;
},{"../engine":"Nc3Y","../environment":"Fbeg","../kernel_names":"sdEe","../kernel_registry":"wJg6","../tensor":"DTHt","../tensor_util_env":"c6yR","./cast":"qqq3","./operation":"JtaO","./tensor3d":"v3VY"}],"ZyFe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareAndValidate=t;var e=require("../util");function t(t,r){const s=t.shape.length,n=r.shape.length;if(s<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+` but the rank was ${s}.`);if(n<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+` but the rank was ${n}.`);if("int32"!==r.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+` but the dtype was ${r.dtype}.`);if(r.shape[n-1]>s)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+`${r.shape[n-1]} vs. ${s}`);if(0===(0,e.sizeFromShape)(t.shape))throw new Error("Requested more than 0 entries, but input is empty."+` Input shape: ${t.shape}.`);const h=r.shape,o=h[h.length-1];let p=1;for(let e=0;e<h.length-1;++e)p*=h[e];const i=t.shape,a=h.slice();a.pop();let u=1;for(let e=o;e<s;++e)u*=i[e],a.push(i[e]);const c=[...(0,e.computeStrides)(t.shape).map(e=>e/u),1].slice(0,o);return[a,p,u,c]}
},{"../util":"P6nv"}],"H15o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateShapes=a,exports.validateInput=r,exports.validateUpdateShape=t;var e=require("../util");function t(e,t,r){const a=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,p="Must have updates.shape = indices.shape[:batchDim] + "+`shape[sliceDim:], got updates.shape: ${r.shape}`+`, indices.shape: ${t.shape}, shape: ${e}`+`, sliceDim: ${a}, and batchDim: ${s}.`;if(r.rank<s)throw new Error(p+` update.rank < ${s}. `);if(e.length<a+(r.rank-s))throw new Error(p+` Output shape length < ${a+(r.rank-s)}`);if(r.rank!==s+e.length-a)throw new Error(p+` update.rank != ${s+e.length-a}`);for(let h=0;h<s;++h)if(r.shape[h]!==t.shape[h])throw new Error(p+` updates.shape[${h}] (${r.shape[h]}) != indices.shape[${h}] (${t.shape[h]}).`);for(let h=0;h<r.rank-s;++h)if(r.shape[h+s]!==e[h+a])throw new Error(p+` updates.shape[${h+s}] (${r.shape[h+s]}) != shape[${h+s}] (${e[h+s]})`)}function r(e,r,a){if(r.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+` but the rank was ${r.rank}.`);if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if("int32"!==r.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(a.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${a}`);if(0===a.length){if(0===r.size)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}t(a,r,e)}function a(t,r,a){const s=r.shape.length,p=s>1?r.shape[s-1]:1,h=a.length;let n=1;for(let e=p;e<h;++e)n*=a[e];const i=p<1?1:p;return{sliceRank:p,numUpdates:(0,e.sizeFromShape)(r.shape)/i,sliceSize:n,strides:[...(0,e.computeStrides)(a.slice(0,p)),1],outputSize:(0,e.sizeFromShape)(a)}}
},{"../util":"P6nv"}],"Quoj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsValid=r,exports.computeFlatOffset=E,exports.computeOutShape=o,exports.getNormalizedAxes=u,exports.isSliceContinous=d,exports.maskToAxes=s,exports.parseSliceParams=x,exports.sliceInfo=y,exports.startForAxis=h,exports.startIndicesWithElidedDims=a,exports.stopForAxis=g,exports.stopIndicesWithElidedDims=f,exports.stridesForAxis=p,exports.stridesWithElidedDims=l;var e=n(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}function n(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(s,l,i):s[l]=e[l]}return s.default=e,r&&r.set(e,s),s}function r(t,n,r){const s=t.shape.length;e.assert(s===n.length,()=>`Error in slice${s}D: Length of begin ${n} must `+`match the rank of the array (${s}).`),e.assert(s===r.length,()=>`Error in slice${s}D: Length of size ${r} must `+`match the rank of the array (${s}).`);for(let o=0;o<s;++o)e.assert(n[o]+r[o]<=t.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] `+`(${n[o]+r[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function s(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function o(e,t,n){const r=[];for(let s=0;s<e.length;s++)r[s]=Math.ceil((t[s]-e[s])/n[s]);return r}function l(e,t,n,r){const s=[...e];for(let o=s.length;o<r.length;o++)s.push(1);for(let o=0;o<n;o++)0===o?s[t]=1:(s.splice(t,0,1),s.pop());return s}function i(e,t,n){return n<=e?n:n-(t-1)}function c(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function u(e,t,n,r,s,o,i,c,u){const d=e.length;let E=new Array(d),x=new Array(d),y=new Array(d);if(t.length&&n>0){const u=t[0],p=n+1;E=a(i,u,p,r,e),x=f(c,u,p,s,e),y=l(o,u,p,e)}else for(let l=0;l<d;l++)E[l]=h(i,r,o,e,l,u),x[l]=g(c,s,o,e,l,u),y[l]=p(o,l,u);return{begin:E,end:x,strides:y}}function a(e,t,n,r,s){const o=[...s],l=c(n,t);for(let c=0;c<o.length;c++)if(l.indexOf(c)>-1)o[c]=0;else{const s=i(t,n,c);let l=r[s];e&1<<s&&(l=0),o[c]=l}return o}function f(t,n,r,s,o){const l=[...o],u=c(r,n);for(let e=0;e<l.length;e++)if(u.indexOf(e)>-1)l[e]=Number.MAX_SAFE_INTEGER;else{const o=i(n,r,e);let c=s[o];t&1<<o&&(c=Number.MAX_SAFE_INTEGER),l[e]=c}for(let i=0;i<l.length;i++){const t=o[i];l[i]<0&&(l[i]+=t),l[i]=e.clamp(0,l[i],o[i])}return l}function p(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function h(t,n,r,s,o,l){let i=n[o];const c=r[o]||1;(t&1<<o||l&1<<o||null==i)&&(i=c>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const u=s[o];return i<0&&(i+=u),i=e.clamp(0,i,u-1)}function g(t,n,r,s,o,l){let i=n[o];const c=r[o]||1;(t&1<<o||l&1<<o||null==i)&&(i=c>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const u=s[o];return i<0&&(i+=u),i=c>0?e.clamp(0,i,u):e.clamp(-1,i,u-1)}function d(e,t,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(t[s]>0||n[s]!==e[s])return!1;return!0}function E(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function x(t,n,r){let s;const o=t.shape.length;let l;return(s="number"==typeof n?[n,...new Array(o-1).fill(0)]:n.length<o?n.concat(new Array(o-n.length).fill(0)):n.slice()).forEach(t=>{e.assert(-1!==t,()=>"slice() does not support negative begin indexing.")}),l=(l=null==r?new Array(o).fill(-1):"number"==typeof r?[r,...new Array(o-1).fill(-1)]:r.length<o?r.concat(new Array(o-r.length).fill(-1)):r).map((n,r)=>n>=0?n:(e.assert(-1===n,()=>"Negative size values should be exactly -1 but got "+`${n} for the slice() size at index ${r}.`),t.shape[r]-s[r])),[s,l]}function y(e,t,n,r,l,i,c,a,f){let p=t.slice(),h=n.slice(),g=r;null==r&&(g=new Array(p.length));const d=s(c);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==c&&0!==a)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==c&&0!==f)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const E=e.length-p.length,x=s(a),y=e.slice();x.forEach(e=>{p[e]=0,h[e]=1,y.splice(e,0,1)});const{begin:b,end:m,strides:A}=u(y,d,E,p,h,g,l,i,c);p=b,h=m,g=A;const w=s(f);w.forEach(e=>{h[e]=p[e]+1,g[e]=1});const M=o(p,h,g),$=M.filter((e,t)=>-1===w.indexOf(t));return{nonStrided:g.every(e=>1===e),$begin:p,$end:h,$strides:g,size:M,newShape:y,outShape:$}}
},{"../util":"P6nv"}],"HDfU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerializationMap=exports.Serializable=void 0,exports.registerClass=t;var e=require("./util");class s{getClassName(){return this.constructor.className}static fromConfig(e,s){return new e(s)}}exports.Serializable=s;class a{constructor(){this.classNameMap={}}static getMap(){return null==a.instance&&(a.instance=new a),a.instance}static register(e){a.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function t(s){(0,e.assert)(null!=s.className,()=>"Class being registered does not have the static className property defined."),(0,e.assert)("string"==typeof s.className,()=>"className is required to be a string, but got type "+typeof s.className),(0,e.assert)(s.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),a.register(s)}exports.SerializationMap=a;
},{"./util":"P6nv"}],"ip5I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TEST_EPSILON_FLOAT16=void 0,exports.encodeStrings=A,exports.expectArrayBuffersEqual=y,exports.expectArraysClose=i,exports.expectArraysEqual=f,exports.expectNumbersClose=l,exports.expectPromiseToFail=c,exports.expectValuesInRange=p,exports.testEpsilon=s;var e=require("./engine"),r=require("./tensor_util_env"),t=require("./util");const n=.001,o=.1;function i(e,r,t){return null==t&&(t=s()),a(e,r,(e,r)=>u(e,r,t))}function s(){return 32===e.ENGINE.backend.floatPrecision()?n:o}function a(e,n,o){let i=!0;if(((0,t.isTypedArray)(e)||(0,t.isTypedArray)(n))&&(i=!1),(0,t.isTypedArray)(e)&&(0,t.isTypedArray)(n)&&(i=!0),i){const r=e.constructor.name,t=n.constructor.name;if(r!==t)throw new Error(`Arrays are of different type. Actual: ${r}. `+`Expected: ${t}`)}if(Array.isArray(e)&&Array.isArray(n)){const o=(0,r.inferShape)(e),i=(0,r.inferShape)(n);if(!(0,t.arraysEqual)(o,i))throw new Error("Arrays have different shapes. "+`Actual: [${o}]. Expected: [${i}]`)}const s=(0,t.isTypedArray)(e)?e:(0,t.flatten)(e),a=(0,t.isTypedArray)(n)?n:(0,t.flatten)(n);if(s.length!==a.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs `+`expected: ${a.length}.\n`+`Actual:   ${s}.\n`+`Expected: ${a}.`);for(let r=0;r<a.length;++r){const e=s[r],t=a[r];if(!o(e,t))throw new Error(`Arrays differ: actual[${r}] = ${e}, expected[${r}] = ${t}.\n`+`Actual:   ${s}.\n`+`Expected: ${a}.`)}}function c(e,r){e().then(()=>r.fail(),()=>r())}function f(e,r){const n="string"==typeof r||"number"==typeof r||"boolean"==typeof r?[r]:r;return(0,t.isString)(e)||(0,t.isString)(e[0])||(0,t.isString)(r)||(0,t.isString)(r[0])?a(e,n,(e,r)=>e==r):a(e,r,(e,r)=>u(e,r,0))}function l(e,r,t){if(null==t&&(t=s()),!u(e,r,t))throw new Error(`Numbers differ: actual === ${e}, expected === ${r}`)}function u(e,r,t){return!isFinite(e)&&!isFinite(r)||!(isNaN(e)||isNaN(r)||Math.abs(e-r)>t)}function p(e,r,t){for(let n=0;n<e.length;n++)if(e[n]<r||e[n]>t)throw new Error(`Value out of range:${e[n]} low: ${r}, high: ${t}`)}function y(e,r){expect(new Float32Array(e)).toEqual(new Float32Array(r))}function A(e){for(let r=0;r<e.length;r++){const n=e[r];Array.isArray(n)?A(n):e[r]=(0,t.encodeString)(n)}return e}exports.TEST_EPSILON_FLOAT16=o;
},{"./engine":"Nc3Y","./tensor_util_env":"c6yR","./util":"P6nv"}],"SdA6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="3.10.0";exports.version=e;
},{}],"GWnL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.backend=m,exports.deprecationWarn=a,exports.disableDeprecationWarnings=s,exports.dispose=p,exports.disposeVariables=c,exports.enableDebugMode=i,exports.enableProdMode=o,exports.engine=u,exports.findBackend=B,exports.findBackendFactory=b,exports.getBackend=G,exports.keep=f,exports.memory=E,exports.profile=d,exports.ready=l,exports.registerBackend=g,exports.removeBackend=k,exports.setBackend=I,exports.setPlatform=v,exports.tidy=N,exports.time=x;var e=require("./engine"),n=require("./environment"),r=require("./tensor"),t=require("./tensor_util");function o(){(0,n.env)().set("PROD",!0)}function i(){(0,n.env)().set("DEBUG",!0)}function s(){(0,n.env)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function a(e){(0,n.env)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function c(){e.ENGINE.disposeVariables()}function u(){return e.ENGINE}function E(){return e.ENGINE.memory()}function d(n){return e.ENGINE.profile(n)}function N(n,r){return e.ENGINE.tidy(n,r)}function p(e){(0,t.getTensorsInContainer)(e).forEach(e=>e.dispose())}function f(n){return e.ENGINE.keep(n)}function x(n){return e.ENGINE.time(n)}function I(n){return e.ENGINE.setBackend(n)}function l(){return e.ENGINE.ready()}function G(){return e.ENGINE.backendName}function k(n){e.ENGINE.removeBackend(n)}function B(n){return e.ENGINE.findBackend(n)}function b(n){return e.ENGINE.findBackendFactory(n)}function g(n,r,t=1){return e.ENGINE.registerBackend(n,r,t)}function m(){return e.ENGINE.backend}function v(e,r){(0,n.env)().setPlatform(e,r)}(0,r.setDeprecationWarningFn)(a);
},{"./engine":"Nc3Y","./environment":"Fbeg","./tensor":"DTHt","./tensor_util":"fpST"}],"ZDFV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),o=require("../tensor_util_env"),t=require("./operation");function d(t,d){let s=(0,o.convertToTensor)(t,"a","add"),a=(0,o.convertToTensor)(d,"b","add");[s,a]=(0,n.makeTypesMatch)(s,a);const i={a:s,b:a};return e.ENGINE.runKernel(r.Add,i)}const s=(0,t.op)({add_:d});exports.add=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Pk64":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDiv=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function i(t,i){let s=(0,n.convertToTensor)(t,"a","floorDiv"),l=(0,n.convertToTensor)(i,"b","floorDiv");[s,l]=(0,o.makeTypesMatch)(s,l);const u={a:s,b:l};return e.ENGINE.runKernel(r.FloorDiv,u)}const s=(0,t.op)({floorDiv_:i});exports.floorDiv=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"D8Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.div=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./floorDiv"),n=require("./operation");function u(n,u){let s=(0,t.convertToTensor)(n,"a","div"),v=(0,t.convertToTensor)(u,"b","div");if([s,v]=(0,i.makeTypesMatch)(s,v),"int32"===s.dtype&&"int32"===v.dtype)return(0,o.floorDiv)(s,v);const d={a:s,b:v};return e.ENGINE.runKernel(r.RealDiv,d,{})}const s=(0,n.op)({div_:u});exports.div=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./floorDiv":"Pk64","./operation":"JtaO"}],"k2PI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mul=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u){let i=(0,n.convertToTensor)(o,"a","mul"),l=(0,n.convertToTensor)(u,"b","mul");[i,l]=(0,t.makeTypesMatch)(i,l);const s={a:i,b:l};return e.ENGINE.runKernel(r.Multiply,s)}const i=(0,o.op)({mul_:u});exports.mul=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"aE3W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s=(0,n.convertToTensor)(o,"x","abs");if("complex64"===s.dtype){const n={x:s};return e.ENGINE.runKernel(r.ComplexAbs,n)}{const n={x:s};return e.ENGINE.runKernel(r.Abs,n)}}const t=(0,o.op)({abs_:s});exports.abs=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"wQJc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","acos")};return e.ENGINE.runKernel(r.Acos,s)}const t=(0,n.op)({acos_:s});exports.acos=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"JJYu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","acosh")};return e.ENGINE.runKernel(r.Acosh,s)}const t=(0,n.op)({acosh_:s});exports.acosh=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"EQUq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function u(o){n.assert(Array.isArray(o),()=>"The argument passed to tf.addN() must be a list of tensors"),n.assert(o.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+`${o.length}`);const a=o.map((e,t)=>(0,r.convertToTensor)(e,`tensors${t}`,"addN")),s=a[0];a.forEach(e=>{if(e.dtype!==s.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),a.forEach(e=>{if(!n.arraysEqual(e.shape,s.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const u=a;return e.ENGINE.runKernel(t.AddN,u)}const d=(0,o.op)({addN_:u});exports.addN=d;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"VAUj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=void 0;var e=require("../engine"),r=require("../kernel_names"),l=require("../tensor_util_env"),n=require("./operation");function o(n,o=null,t=!1){const i={x:(0,l.convertToTensor)(n,"x","all","bool")},s={axis:o,keepDims:t};return e.ENGINE.runKernel(r.All,i,s)}const t=(0,n.op)({all_:o});exports.all=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"OF1E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","any","bool")},u={axis:t,keepDims:i};return e.ENGINE.runKernel(r.Any,s,u)}const i=(0,o.op)({any_:t});exports.any=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"wSFk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=0){const a={x:(0,n.convertToTensor)(o,"x","argMax")},i={axis:t};return e.ENGINE.runKernel(r.ArgMax,a,i)}const a=(0,o.op)({argMax_:t});exports.argMax=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Zhc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i,o=0){const t={x:(0,n.convertToTensor)(i,"x","argMin")},s={axis:o};return e.ENGINE.runKernel(r.ArgMin,t,s)}const t=(0,i.op)({argMin_:o});exports.argMin=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"pS4z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","asin")};return e.ENGINE.runKernel(r.Asin,o)}const s=(0,i.op)({asin_:o});exports.asin=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"B3dx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","asinh")};return e.ENGINE.runKernel(r.Asinh,o)}const s=(0,i.op)({asinh_:o});exports.asinh=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Yh9p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","atan")};return e.ENGINE.runKernel(r.Atan,o)}const a=(0,t.op)({atan_:o});exports.atan=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"eUJw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./operation");function a(o,a){let s=(0,t.convertToTensor)(o,"a","atan2"),i=(0,t.convertToTensor)(a,"b","atan2");[s,i]=(0,n.makeTypesMatch)(s,i);const u={a:s,b:i};return e.ENGINE.runKernel(r.Atan2,u)}const s=(0,o.op)({atan2_:a});exports.atan2=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"DlnE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","atanh")};return e.ENGINE.runKernel(r.Atanh,o)}const a=(0,t.op)({atanh_:o});exports.atanh=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Evju":[function(require,module,exports) {
"use strict";function t(t,e,n,r,i="NHWC",a){return o(t,[...e,t[3]],n,a,r,null,null,M(i))}function e(t,e,n,r,i,a,h="channelsLast"){const[s,f]=l(e);let c;if("channelsLast"===h)c=[s,f,t[3],t[3]];else{if("channelsFirst"!==h)throw new Error(`Unknown dataFormat ${h}`);c=[s,f,t[1],t[1]]}return o(t,c,n,r,i,a,!1,h)}function n(t,e,n,o,i,a,h="NDHWC"){const[l,f,c]=s(e);let u,p;if("NDHWC"===h)p="channelsLast",u=[l,f,c,t[4],t[4]];else{if("NCDHW"!==h)throw new Error(`Unknown dataFormat ${h}`);p="channelsFirst",u=[l,f,c,t[1],t[1]]}return r(t,u,n,o,i,!1,p,a)}function o(t,e,n,o,r,i,a=!1,h="channelsLast"){let[s,u,p,d]=[-1,-1,-1,-1];if("channelsLast"===h)[s,u,p,d]=t;else{if("channelsFirst"!==h)throw new Error(`Unknown dataFormat ${h}`);[s,d,u,p]=t}const[m,M,,g]=e,[D,w]=l(n),[H,W]=l(o),F=f(m,H),L=f(M,W),{padInfo:b,outHeight:I,outWidth:C}=c(r,u,p,D,w,F,L,i,h),y=a?g*d:g;let E;return"channelsFirst"===h?E=[s,y,I,C]:"channelsLast"===h&&(E=[s,I,C,y]),{batchSize:s,dataFormat:h,inHeight:u,inWidth:p,inChannels:d,outHeight:I,outWidth:C,outChannels:y,padInfo:b,strideHeight:D,strideWidth:w,filterHeight:m,filterWidth:M,effectiveFilterHeight:F,effectiveFilterWidth:L,dilationHeight:H,dilationWidth:W,inShape:t,outShape:E,filterShape:e}}function r(t,e,n,o,r,i=!1,a="channelsLast",h){let[l,c,p,d,m]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,c,p,d,m]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,m,c,p,d]=t}const[M,g,D,,w]=e,[H,W,F]=s(n),[L,b,I]=s(o),C=f(M,L),y=f(g,b),E=f(D,I),{padInfo:v,outDepth:x,outHeight:k,outWidth:S}=u(r,c,p,d,H,W,F,C,y,E,h),U=i?w*m:w;let A;return"channelsFirst"===a?A=[l,U,x,k,S]:"channelsLast"===a&&(A=[l,x,k,S,U]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:p,inWidth:d,inChannels:m,outDepth:x,outHeight:k,outWidth:S,outChannels:U,padInfo:v,strideDepth:H,strideHeight:W,strideWidth:F,filterDepth:M,filterHeight:g,filterWidth:D,effectiveFilterDepth:C,effectiveFilterHeight:y,effectiveFilterWidth:E,dilationDepth:L,dilationHeight:b,dilationWidth:I,inShape:t,outShape:A,filterShape:e}}function i(t,e,n,o,r){null==o&&(o=h(t,e,n));const i=t[0],a=t[1];return[p((i-e+2*o)/n+1,r),p((a-e+2*o)/n+1,r)]}function a(t,e,n,o,r,i){null==r&&(r=h(t,e,o));const a=t[0],l=t[1],s=t[2];return[p((a-e+2*r)/o+1,i),p((l-e+2*r)/o+1,i),p((s-e+2*r)/o+1,i),n]}function h(t,e,n,o=1){const r=f(e,o);return Math.floor((t[0]*(n-1)-n+r)/2)}function l(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function s(t){return"number"==typeof t?[t,t,t]:t}function f(t,e){return e<=1?t:t+(t-1)*(e-1)}function c(t,e,n,o,r,a,h,l,s){let f,c,u;if("number"==typeof t){f={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const r=i([e,n],a,o,t,l);c=r[0],u=r[1]}else if("same"===t){c=Math.ceil(e/o),u=Math.ceil(n/r);const t=Math.max(0,(c-1)*o+a-e),i=Math.max(0,(u-1)*r+h-n),l=Math.floor(t/2),s=t-l,p=Math.floor(i/2);f={top:l,bottom:s,left:p,right:i-p,type:"SAME"}}else if("valid"===t)f={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-a+1)/o),u=Math.ceil((n-h+1)/r);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const i="channelsLast"===s?t[1][0]:t[2][0],d="channelsLast"===s?t[1][1]:t[2][1],m="channelsLast"===s?t[2][0]:t[3][0],M="channelsLast"===s?t[2][1]:t[3][1];f={top:i,bottom:d,left:m,right:M,type:0===i&&0===d&&0===m&&0===M?"VALID":"EXPLICIT"},c=p((e-a+i+d)/o+1,l),u=p((n-h+m+M)/r+1,l)}}return{padInfo:f,outHeight:c,outWidth:u}}function u(t,e,n,o,r,i,h,l,s,f,c){let u,p,d,m;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const i=a([e,n,o,1],l,1,r,t,c);p=i[0],d=i[1],m=i[2]}else if("same"===t){const t=((p=Math.ceil(e/r))-1)*r+l-e,a=((d=Math.ceil(n/i))-1)*i+s-n,c=((m=Math.ceil(o/h))-1)*h+f-o,M=Math.floor(t/2),g=t-M,D=Math.floor(a/2),w=a-D,H=Math.floor(c/2);u={top:D,bottom:w,left:H,right:c-H,front:M,back:g,type:"SAME"}}else{if("valid"!==t)throw Error(`Unknown padding parameter: ${t}`);u={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-l+1)/r),d=Math.ceil((n-s+1)/i),m=Math.ceil((o-f+1)/h)}return{padInfo:u,outDepth:p,outHeight:d,outWidth:m}}function p(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function d(t){const[e,n,o]=l(t);return 1===e&&1===n&&1===o}function m(t,e){return d(t)||d(e)}function M(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeConv2DInfo=o,exports.computeConv3DInfo=r,exports.computeDefaultPad=h,exports.computeDilation2DInfo=t,exports.computePool2DInfo=e,exports.computePool3DInfo=n,exports.convertConv2DDataFormat=M,exports.eitherStridesOrDilationsAreOne=m,exports.tupleValuesAreOne=d;
},{}],"QI4k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function o(s,o){const t={x:(0,n.convertToTensor)(s,"x","reshape","string_or_numeric")},i={shape:o};return e.ENGINE.runKernel(r.Reshape,t,i)}const t=(0,s.op)({reshape_:o});exports.reshape=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"iP9e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=l(require("../util")),o=require("./cast"),a=l(require("./conv_util")),i=require("./operation"),s=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(i,u,l,p,d){const c=(0,t.convertToTensor)(i,"x","avgPool","float32");n.assert(a.eitherStridesOrDilationsAreOne(l,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${l} and dilations '1'`);let f=c,g=!1;3===c.rank&&(g=!0,f=(0,s.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),n.assert(4===f.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${f.rank}.`),null!=d&&n.assert(n.isInt(p),()=>"Error in avgPool: pad must be an integer when using, "+`dimRoundingMode ${d} but got pad ${p}.`);const v={x:f},h={filterSize:u,strides:l,pad:p,dimRoundingMode:d};let P=e.ENGINE.runKernel(r.AvgPool,v,h);return P=(0,o.cast)(P,c.dtype),g?(0,s.reshape)(P,[P.shape[1],P.shape[2],P.shape[3]]):P}const d=(0,i.op)({avgPool_:p});exports.avgPool=d;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./cast":"qqq3","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"df2t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=i(require("../util")),n=require("./cast"),a=require("./operation"),s=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function p(a,u,i,p,l,d="NDHWC"){const c=(0,t.convertToTensor)(a,"x","avgPool3d","float32");let f=c,g=!1;4===c.rank&&(g=!0,f=(0,s.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),o.assert(5===f.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${f.rank}.`),o.assert("NDHWC"===d,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${d}`),null!=l&&o.assert(o.isInt(p),()=>"Error in avgPool3d: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${p}.`);const v={x:f},h={filterSize:u,strides:i,pad:p,dimRoundingMode:l,dataFormat:d};let P=e.ENGINE.runKernel(r.AvgPool3D,v,h);return P=(0,n.cast)(P,f.dtype),g?(0,s.reshape)(P,[P.shape[1],P.shape[2],P.shape[3],P.shape[4]]):P}const l=(0,a.op)({avgPool3d_:p});exports.avgPool3d=l;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./cast":"qqq3","./operation":"JtaO","./reshape":"QI4k"}],"dDdq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),o=require("./clone"),c=require("./operation");function s(c,s=0){(0,n.assert)(c.length>=1,()=>"Pass at least one tensor to concat");const a=(0,t.convertToTensorArray)(c,"tensors","concat","string_or_numeric");if("complex64"===a[0].dtype&&a.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===a.length)return(0,o.clone)(a[0]);const i=a,u={axis:s};return e.ENGINE.runKernel(r.Concat,i,u)}const a=(0,c.op)({concat_:s});exports.concat=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./clone":"F06q","./operation":"JtaO"}],"yARQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoid=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),i=require("./operation");function n(i){const n={x:(0,o.convertToTensor)(i,"x","sigmoid","float32")};return e.ENGINE.runKernel(r.Sigmoid,n)}const t=(0,i.op)({sigmoid_:n});exports.sigmoid=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"zP07":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),n=require("./operation");function o(n,o,s){const t=(0,i.convertToTensor)(n,"x","slice","string_or_numeric");if(0===t.rank)throw new Error("Slicing scalar is not possible");const c={x:t},l={begin:o,size:s};return e.ENGINE.runKernel(r.Slice,c,l)}const s=(0,n.op)({slice_:o});exports.slice=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"ZRNG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","tanh","float32")};return e.ENGINE.runKernel(r.Tanh,o)}const i=(0,t.op)({tanh_:o});exports.tanh=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"yZSA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.basicLSTMCell=void 0;var e=require("../tensor_util_env"),r=require("./add"),i=require("./concat"),s=require("./mat_mul"),o=require("./mul"),l=require("./operation"),t=require("./sigmoid"),c=require("./slice"),a=require("./tanh");function n(l,n,u,T,d,m){const M=(0,e.convertToTensor)(l,"forgetBias","basicLSTMCell"),b=(0,e.convertToTensor)(n,"lstmKernel","basicLSTMCell"),v=(0,e.convertToTensor)(u,"lstmBias","basicLSTMCell"),q=(0,e.convertToTensor)(T,"data","basicLSTMCell"),C=(0,e.convertToTensor)(d,"c","basicLSTMCell"),L=(0,e.convertToTensor)(m,"h","basicLSTMCell"),S=(0,i.concat)([q,L],1),p=(0,s.matMul)(S,b),h=(0,r.add)(p,v),_=h.shape[0],g=h.shape[1]/4,f=[_,g],x=(0,c.slice)(h,[0,0],f),B=(0,c.slice)(h,[0,g],f),j=(0,c.slice)(h,[0,2*g],f),y=(0,c.slice)(h,[0,3*g],f),K=(0,r.add)((0,o.mul)((0,t.sigmoid)(x),(0,a.tanh)(B)),(0,o.mul)(C,(0,t.sigmoid)((0,r.add)(M,j))));return[K,(0,o.mul)((0,a.tanh)(K),(0,t.sigmoid)(y))]}const u=(0,l.op)({basicLSTMCell_:n});exports.basicLSTMCell=u;
},{"../tensor_util_env":"c6yR","./add":"ZDFV","./concat":"dDdq","./mat_mul":"mMWq","./mul":"k2PI","./operation":"JtaO","./sigmoid":"yARQ","./slice":"zP07","./tanh":"ZRNG"}],"Q9gF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=o?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function c(o,a,u){const c=(0,r.convertToTensor)(o,"x","batchToSpaceND"),i=a.reduce((e,t)=>e*t);n.assert(c.rank>=1+a.length,()=>`input rank is ${c.rank} but should be > than blockShape.length ${a.length}`),n.assert(u.length===a.length,()=>`crops.length is ${u.length} but should be equal to blockShape.length  ${a.length}`),n.assert(c.shape[0]%i==0,()=>`input tensor batch is ${c.shape[0]} but is not divisible by the product of `+`the elements of blockShape ${a.join(" * ")} === ${i}`);const s={x:c},p={blockShape:a,crops:u};return e.ENGINE.runKernel(t.BatchToSpaceND,s,p)}const i=(0,o.op)({batchToSpaceND_:c});exports.batchToSpaceND=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"ONs6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xAs4D=r;var e=require("./reshape");function r(r){let s;return s=0===r.rank||1===r.rank?(0,e.reshape)(r,[1,1,1,r.size]):2===r.rank?(0,e.reshape)(r,[1,1,r.shape[0],r.shape[1]]):3===r.rank?(0,e.reshape)(r,[1,r.shape[0],r.shape[1],r.shape[2]]):r}
},{"./reshape":"QI4k"}],"qqTf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=u(require("../util")),a=require("./batchnorm_util"),o=require("./operation"),i=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(r);if(n&&n.has(e))return n.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}function c(o,s,u,c,l,f){null==f&&(f=.001);const p=(0,n.convertToTensor)(o,"x","batchNorm"),h=(0,n.convertToTensor)(s,"mean","batchNorm"),v=(0,n.convertToTensor)(u,"variance","batchNorm");let m,b;null!=l&&(m=(0,n.convertToTensor)(l,"scale","batchNorm")),null!=c&&(b=(0,n.convertToTensor)(c,"offset","batchNorm")),t.assert(h.rank===v.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),t.assert(null==b||h.rank===b.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),t.assert(null==m||h.rank===m.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:(0,a.xAs4D)(p),scale:m,offset:b,mean:h,variance:v},k={varianceEpsilon:f},q=e.ENGINE.runKernel(r.FusedBatchNorm,d,k);return(0,i.reshape)(q,p.shape)}const l=(0,o.op)({batchNorm_:c});exports.batchNorm=l;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./batchnorm_util":"ONs6","./operation":"JtaO","./reshape":"QI4k"}],"fmF3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm2d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(2===i.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+`${i.rank}.`),t.assert(2===b.rank||1===b.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+`got rank ${b.rank}.`),t.assert(2===k.rank||1===k.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(2===f.rank||1===f.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm2d_:u});exports.batchNorm2d=c;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./batchnorm":"qqTf","./operation":"JtaO"}],"seIf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm3d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(3===i.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+`${i.rank}.`),t.assert(3===b.rank||1===b.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+`got rank ${b.rank}.`),t.assert(3===k.rank||1===k.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(3===f.rank||1===f.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm3d_:u});exports.batchNorm3d=c;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./batchnorm":"qqTf","./operation":"JtaO"}],"REgA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm4d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(4===i.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+`${i.rank}.`),t.assert(4===b.rank||1===b.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+`got rank ${b.rank}.`),t.assert(4===k.rank||1===k.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(4===f.rank||1===f.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm4d_:u});exports.batchNorm4d=c;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./batchnorm":"qqTf","./operation":"JtaO"}],"MD76":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincount=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../tensor_util_env"),r=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function s(o,i,u){const s=(0,n.convertToTensor)(o,"x","bincount"),a=(0,n.convertToTensor)(i,"weights","bincount");r.assert("int32"===s.dtype,()=>"Error in bincount: input "+`dtype must be int32, but got ${s.dtype}`),r.assert(u>=0,()=>`size must be non-negative, but got ${u}.`),r.assert(a.size===s.size||0===a.size,()=>"Error in bincount: weights must have the same size as input or"+`0-length, but got input shape: ${s.shape}, weights shape: `+`${a.shape}.`);const p={x:s,weights:a},c={size:u};return e.ENGINE.runKernel(t.Bincount,p,c)}const a=(0,o.op)({bincount_:s});exports.bincount=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"dIQw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastArgs=void 0;var r=require("../engine"),e=require("../kernel_names"),s=require("../tensor_util_env"),t=require("./operation");function n(t,n){const o=(0,s.convertToTensor)(t,"s0","broadcastArgs","int32"),a=(0,s.convertToTensor)(n,"s1","broadcastArgs","int32");if(1!==o.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+`Has rank ${o.rank}`);if(1!==a.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+`Has rank ${a.rank}`);const c={s0:o,s1:a};return r.ENGINE.runKernel(e.BroadcastArgs,c)}const o=(0,t.op)({broadcastArgs_:n});exports.broadcastArgs=o;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"qUV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastTo=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./clone"),n=require("./operation"),a=require("./reshape");function s(n,s){let i=(0,o.convertToTensor)(n,"broadcastTo","x");const c=i.shape;if(s.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${s}].`);if(s.length<i.rank)throw new Error(`broadcastTo(): shape.length=${s.length} < input.rank=${i.rank}.`);if(s.length>i.rank){const e=i.shape.slice();for(;e.length<s.length;)e.unshift(1);i=(0,a.reshape)(i,e)}const l=i.shape,h=Array.from(s);for(let e=s.length-1;e>=0;e--)if(l[e]===s[e])h[e]=1;else if(1!==i.shape[e])throw new Error(`broadcastTo(): [${c}] cannot be broadcast to [${s}].`);if(0===h.map((e,r)=>e>1?r:-1).filter(e=>e>=0).length)return(0,t.clone)(i);const p={x:i},u={reps:h};return e.ENGINE.runKernel(r.Tile,p,u)}const i=(0,n.op)({broadcastTo_:s});exports.broadcastTo=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./clone":"F06q","./operation":"JtaO","./reshape":"QI4k"}],"S70G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceil=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function i(o){const i={x:(0,n.convertToTensor)(o,"x","ceil","float32")};return e.ENGINE.runKernel(r.Ceil,i)}const t=(0,o.op)({ceil_:i});exports.ceil=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"VfEE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValue=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),u=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function l(u,o,i){const l=(0,t.convertToTensor)(u,"x","clipByValue");n.assert(o<=i,()=>`Error in clip: min (${o}) must be `+`less than or equal to max (${i}).`);const a={x:l},p={clipValueMin:o,clipValueMax:i};return e.ENGINE.runKernel(r.ClipByValue,a,p)}const a=(0,u.op)({clipByValue_:l});exports.clipByValue=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"J9se":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat1d=void 0;var e=require("./concat"),o=require("./operation");function t(o){return(0,e.concat)(o,0)}const c=(0,o.op)({concat1d_:t});exports.concat1d=c;
},{"./concat":"dDdq","./operation":"JtaO"}],"Y6Ad":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat2d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat2d_:t});exports.concat2d=c;
},{"./concat":"dDdq","./operation":"JtaO"}],"NSM9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat3d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat3d_:t});exports.concat3d=c;
},{"./concat":"dDdq","./operation":"JtaO"}],"Yjfb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat4d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat4d_:t});exports.concat4d=c;
},{"./concat":"dDdq","./operation":"JtaO"}],"oJQk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),i=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function p(i,s,u,p,d="NHWC",c=[1,1],l){const f=(0,t.convertToTensor)(i,"x","conv2d","float32"),v=(0,t.convertToTensor)(s,"filter","conv2d","float32");let h=f,b=!1;3===f.rank&&(b=!0,h=(0,a.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),n.assert(4===h.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${h.rank}.`),n.assert(4===v.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+`${v.rank}.`),null!=l&&n.assert(n.isInt(p),()=>"Error in conv2d: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${p}.`);const k="NHWC"===d?h.shape[3]:h.shape[1];n.assert(k===v.shape[2],()=>`Error in conv2d: depth of input (${k}) must match `+`input depth for filter ${v.shape[2]}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,c),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${c}'`);const g={x:h,filter:v},O={strides:u,pad:p,dataFormat:d,dilations:c,dimRoundingMode:l},m=e.ENGINE.runKernel(r.Conv2D,g,O);return b?(0,a.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const d=(0,i.op)({conv2d_:p});exports.conv2d=d;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"n3wz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=i(require("./conv_util")),o=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(o,s,i,p,u="NWC",c=1,d){const h=(0,e.convertToTensor)(o,"x","conv1d"),l=(0,e.convertToTensor)(s,"filter","conv1d");let f=h,v=!1;2===h.rank&&(v=!0,f=(0,a.reshape)(h,[1,h.shape[0],h.shape[1]])),r.assert(3===f.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`),r.assert(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+`${l.rank}.`),null!=d&&r.assert(r.isInt(p),()=>"Error in conv1d: pad must be an integer when using, "+`dimRoundingMode ${d} but got pad ${p}.`),r.assert(f.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${f.shape[2]}) must match `+`input depth for filter ${l.shape[1]}.`),r.assert(n.eitherStridesOrDilationsAreOne(i,c),()=>"Error in conv1D: Either stride or dilation must be 1. "+`Got stride ${i} and dilation '${c}'`),r.assert("NWC"===u,()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`);const b=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),k=(0,a.reshape)(f,[f.shape[0],1,f.shape[1],f.shape[2]]),y=[1,i],g=[1,c],O=(0,t.conv2d)(k,b,y,p,"NHWC",g,d);return v?(0,a.reshape)(O,[O.shape[2],O.shape[3]]):(0,a.reshape)(O,[O.shape[0],O.shape[2],O.shape[3]])}const u=(0,o.op)({conv1d_:p});exports.conv1d=u;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./conv2d":"oJQk","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"GLx7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=p(require("../util")),n=require("./operation"),a=require("./reshape");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var u=a?Object.getOwnPropertyDescriptor(e,p):null;u&&(u.get||u.set)?Object.defineProperty(n,p,u):n[p]=e[p]}return n.default=e,t&&t.set(e,n),n}function u(n,o,p,u,s,i="NHWC",c){t.assert(n.length===o.rank,()=>"Length of inShape "+`(${n.length}) and rank of dy (${o.rank}) must match`);let h=n,d=o,f=!1;3===o.rank&&(f=!0,d=(0,a.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),h=[1,n[0],n[1],n[2]]),t.assert(4===h.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+`${h.length}.`),t.assert(4===d.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${d.rank}`),t.assert(4===p.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${p.rank}`);const l="NHWC"===i?h[3]:h[1],g="NHWC"===i?d.shape[3]:d.shape[1];t.assert(l===p.shape[2],()=>`Error in conv2dDerInput: depth of input (${l}) must `+`match input depth for filter ${p.shape[2]}.`),t.assert(g===p.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must `+`match output depth for filter ${p.shape[3]}.`),null!=c&&t.assert(t.isInt(s),()=>"Error in conv2dDerInput: pad must be an integer when using, "+`dimRoundingMode ${c} but got pad ${s}.`);const k={dy:d,filter:p},v={strides:u,pad:s,dataFormat:i,dimRoundingMode:c,inputShape:h},b=e.ENGINE.runKernel(r.Conv2DBackpropInput,k,v);return f?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const s=(0,n.op)({conv2DBackpropInput_:u});exports.conv2DBackpropInput=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"GCOF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv2d_backprop_input"),r=require("./operation");function n(r,n,s,t,p,c){const v=(0,o.convertToTensor)(r,"x","conv2dTranspose"),i=(0,o.convertToTensor)(n,"filter","conv2dTranspose");return(0,e.conv2DBackpropInput)(s,v,i,t,p,"NHWC",c)}const s=(0,r.op)({conv2dTranspose_:n});exports.conv2dTranspose=s;
},{"../tensor_util_env":"c6yR","./conv2d_backprop_input":"GLx7","./operation":"JtaO"}],"VJ2T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./conv_util"),a=require("./operation"),s=require("./reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(a,i,u,p,c="NDHWC",d=[1,1,1]){const l=(0,t.convertToTensor)(a,"x","conv3d"),f=(0,t.convertToTensor)(i,"filter","conv3d");let v=l,h=!1;4===l.rank&&(h=!0,v=(0,s.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),n.assert(5===v.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${v.rank}.`),n.assert(5===f.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+`${f.rank}.`),n.assert(v.shape[4]===f.shape[3],()=>`Error in conv3d: depth of input (${v.shape[4]}) must match `+`input depth for filter ${f.shape[3]}.`),n.assert((0,o.eitherStridesOrDilationsAreOne)(u,d),()=>"Error in conv3D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${d}'`),n.assert("NDHWC"===c,()=>`Error in conv3d: got dataFormat of ${c} but only NDHWC is currently supported.`);const b={x:v,filter:f},k={strides:u,pad:p,dataFormat:c,dilations:d},y=e.ENGINE.runKernel(r.Conv3D,b,k);return h?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const c=(0,a.op)({conv3d_:p});exports.conv3d=c;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"bEFz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=o(require("../util")),n=require("./operation"),a=require("./reshape");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function u(n,p,o,u,s){t.assert(n.length===p.rank,()=>"Length of inShape "+`(${n.length}) and rank of dy (${p.rank}) must match`);let i=n,c=p,h=!1;4===p.rank&&(h=!0,c=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]]),i=[1,n[0],n[1],n[2],n[3]]);const f=i[4],l=c.shape[4];t.assert(5===i.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+`${i.length}.`),t.assert(5===c.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+`rank ${c.rank}`),t.assert(5===o.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+`rank ${o.rank}`),t.assert(f===o.shape[3],()=>`Error in conv3dDerInput: depth of input (${f}) must `+`match input depth for filter ${o.shape[3]}.`),t.assert(l===o.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must `+`match output depth for filter ${o.shape[4]}.`);const d={dy:c,filter:o},k={pad:s,strides:u,inputShape:i},v=e.ENGINE.runKernel(r.Conv3DBackpropInputV2,d,k);return h?(0,a.reshape)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const s=(0,n.op)({conv3DBackpropInput_:u});exports.conv3DBackpropInput=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"fQzO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv3d_backprop_input"),r=require("./operation");function n(r,n,s,t,p){const c=(0,o.convertToTensor)(r,"x","conv3dTranspose"),v=(0,o.convertToTensor)(n,"filter","conv3dTranspose");return(0,e.conv3DBackpropInput)(s,c,v,t,p)}const s=(0,r.op)({conv3dTranspose_:n});exports.conv3dTranspose=s;
},{"../tensor_util_env":"c6yR","./conv3d_backprop_input":"bEFz","./operation":"JtaO"}],"g9ZU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","cos","float32")};return e.ENGINE.runKernel(r.Cos,s)}const t=(0,n.op)({cos_:s});exports.cos=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"GpTU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","cosh","float32")};return e.ENGINE.runKernel(r.Cosh,s)}const t=(0,n.op)({cosh_:s});exports.cosh=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Kzhc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=void 0;var e=require("../engine"),r=require("../kernel_names"),u=require("../tensor_util_env"),s=require("./operation");function n(s,n=0,o=!1,t=!1){const i={x:(0,u.convertToTensor)(s,"x","cumsum")},c={axis:n,exclusive:o,reverse:t};return e.ENGINE.runKernel(r.Cumsum,i,c)}const o=(0,s.op)({cumsum_:n});exports.cumsum=o;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"HdYS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBincount=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../tensor_util_env"),r=i(require("../util")),o=require("./operation");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function u(o,s,i,u=!1){const a=(0,n.convertToTensor)(o,"x","denseBincount"),p=(0,n.convertToTensor)(s,"weights","denseBincount");r.assert("int32"===a.dtype,()=>"Error in denseBincount: input "+`dtype must be int32, but got ${a.dtype}`),r.assert(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+`rank ${a.rank}.`),r.assert(i>=0,()=>`size must be non-negative, but got ${i}.`),r.assert(p.size===a.size||0===p.size,()=>"Error in denseBincount: weights must have the same shape as x or "+`0-length, but got x shape: ${a.shape}, weights shape: `+`${p.shape}.`);const c={x:a,weights:p},f={size:i,binaryOutput:u};return e.ENGINE.runKernel(t.DenseBincount,c,f)}const a=(0,o.op)({denseBincount_:u});exports.denseBincount=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"U4UL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=p(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var i=o?Object.getOwnPropertyDescriptor(e,p):null;i&&(i.get||i.set)?Object.defineProperty(n,p,i):n[p]=e[p]}return n.default=e,r&&r.set(e,n),n}function i(o,a,p="NHWC"){const i=(0,r.convertToTensor)(o,"x","depthToSpace","float32"),s="NHWC"===p?i.shape[1]:i.shape[2],u="NHWC"===p?i.shape[2]:i.shape[3],c="NHWC"===p?i.shape[3]:i.shape[1];n.assert(a>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${a}`),n.assert(s*a>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${a}  for depthToSpace with input shape\n    ${i.shape}`),n.assert(u*a>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${a} for depthToSpace with input shape\n        ${i.shape}`),n.assert(c%(a*a)==0,()=>`Dimension size must be evenly divisible by ${a*a} but is ${c} for depthToSpace with input shape ${i.shape}`);const l={x:i},h={blockSize:a,dataFormat:p};return e.ENGINE.runKernel(t.DepthToSpace,l,h)}const s=(0,o.op)({depthToSpace_:i});exports.depthToSpace=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"Kahd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=a(require("../util")),o=require("./operation"),i=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function p(o,s,a,p,u="NHWC",d=[1,1],h){const l=(0,t.convertToTensor)(o,"x","depthwiseConv2d","float32"),f=(0,t.convertToTensor)(s,"filter","depthwiseConv2d","float32");let c=l,v=!1;3===l.rank&&(v=!0,c=(0,i.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),n.assert(4===c.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),n.assert(4===f.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+`${f.rank}.`),n.assert(c.shape[3]===f.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+`(${c.shape[3]}) must match the inChannels dimension in `+`filter ${f.shape[2]}.`),null!=h&&n.assert(n.isInt(p),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${h} but got pad ${p}.`);const w={x:c,filter:f},b={strides:a,pad:p,dataFormat:u,dilations:d,dimRoundingMode:h},k=e.ENGINE.runKernel(r.DepthwiseConv2dNative,w,b);return v?(0,i.reshape)(k,[k.shape[1],k.shape[2],k.shape[3]]):k}const u=(0,o.op)({depthwiseConv2d_:p});exports.depthwiseConv2d=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"B6ot":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","diag")};return e.ENGINE.runKernel(r.Diag,o)}const t=(0,i.op)({diag_:o});exports.diag=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"q2Zv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation"),i=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function u(o,a,s,u,l=[1,1],p="NHWC"){const d=(0,t.convertToTensor)(o,"x","dilation2d"),f=(0,t.convertToTensor)(a,"filter","dilation2d");n.assert(3===d.rank||4===d.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+`${d.rank}.`),n.assert(3===f.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+`${f.rank}.`),n.assert("NHWC"===p,()=>"Error in dilation2d: Only NHWC is currently supported, "+`but got dataFormat of ${p}`);let c=d,k=!1;3===d.rank&&(c=(0,i.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),k=!0);const b={x:c,filter:f},y={strides:s,pad:u,dilations:l},h=e.ENGINE.runKernel(r.Dilation2D,b,y);return k?(0,i.reshape)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const l=(0,o.op)({dilation2d_:u});exports.dilation2d=l;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"Xh9J":[function(require,module,exports) {
"use strict";function t(t,e){const n=t.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,l=t[r]||1;(e[e.length-1-o]||1)>1&&1===l&&s.unshift(r)}return s}function e(t,e){const n=[];for(let s=0;s<e.length;s++){const o=t[t.length-s-1],r=e.length-s-1,l=e[r];(null==o||1===o&&l>1)&&n.unshift(r)}return n}function n(t,e){const n=[],s=Math.max(t.length,e.length);for(let o=0;o<s;o++){let s=t[t.length-o-1];null==s&&(s=1);let r=e[e.length-o-1];if(null==r&&(r=1),1===s)n.unshift(r);else if(1===r)n.unshift(s);else{if(s!==r){throw Error("Operands could not be broadcast together with shapes "+`${t} and ${e}.`)}n.unshift(s)}}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertAndGetBroadcastShape=n,exports.getBroadcastDims=t,exports.getReductionAxes=e;
},{}],"WG94":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equal=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./broadcast_util"),u=require("./operation");function a(u,a){let s=(0,n.convertToTensor)(u,"a","equal","string_or_numeric"),i=(0,n.convertToTensor)(a,"b","equal","string_or_numeric");[s,i]=(0,t.makeTypesMatch)(s,i),(0,o.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.Equal,l)}const s=(0,u.op)({equal_:a});exports.equal=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"BsuI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.where=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./broadcast_to"),n=require("./broadcast_util"),s=require("./operation");function a(s,a,c){const i=(0,o.convertToTensor)(a,"a","where"),d=(0,o.convertToTensor)(c,"b","where"),u=(0,o.convertToTensor)(s,"condition","where","bool"),h=(0,n.assertAndGetBroadcastShape)((0,n.assertAndGetBroadcastShape)(u.shape,i.shape),d.shape),p={condition:(0,t.broadcastTo)(u,h),t:(0,t.broadcastTo)(i,h),e:(0,t.broadcastTo)(d,h)};return e.ENGINE.runKernel(r.Select,p)}const c=(0,s.op)({where_:a});exports.where=c;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./broadcast_to":"qUV0","./broadcast_util":"Xh9J","./operation":"JtaO"}],"PDcB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function i(n){const i={x:(0,o.convertToTensor)(n,"x","zerosLike")};return e.ENGINE.runKernel(r.ZerosLike,i)}const s=(0,n.op)({zerosLike_:i});exports.zerosLike=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"mdNH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divNoNan=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),o=require("./div"),i=require("./equal"),t=require("./operation"),n=require("./where"),u=require("./zeros_like");function s(t,s){let v=(0,r.convertToTensor)(t,"a","div"),a=(0,r.convertToTensor)(s,"b","div");[v,a]=(0,e.makeTypesMatch)(v,a);const d=(0,o.div)(v,a),q=(0,u.zerosLike)(d),c=(0,i.equal)(a,q);return(0,n.where)(c,q,d)}const v=(0,t.op)({divNoNan_:s});exports.divNoNan=v;
},{"../tensor_util":"fpST","../tensor_util_env":"c6yR","./div":"D8Fc","./equal":"WG94","./operation":"JtaO","./where":"BsuI","./zeros_like":"PDcB"}],"bUs4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dot=void 0;var e=require("../tensor_util_env"),r=s(require("../util")),t=require("./mat_mul"),n=require("./operation"),a=require("./reshape");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function u(n,o){const s=(0,e.convertToTensor)(n,"t1","dot"),u=(0,e.convertToTensor)(o,"t2","dot");r.assert(!(1!==s.rank&&2!==s.rank||1!==u.rank&&2!==u.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+`${s.rank} and ${u.rank}.`);const i=1===s.rank?s.size:s.shape[1],p=1===u.rank?u.size:u.shape[0];if(r.assert(i===p,()=>"Error in dot: inner dimensions of inputs must match, but got "+`${i} and ${p}.`),1===s.rank&&1===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[-1,1]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[])}if(1===s.rank&&2===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[u.shape[0],u.shape[1]]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[n.size])}if(2===s.rank&&1===u.rank){const e=(0,a.reshape)(u,[-1,1]),r=(0,t.matMul)(s,e);return(0,a.reshape)(r,[r.size])}{const e=(0,a.reshape)(u,[u.shape[0],u.shape[1]]);return(0,t.matMul)(s,e)}}const i=(0,n.op)({dot_:u});exports.dot=i;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./mat_mul":"mMWq","./operation":"JtaO","./reshape":"QI4k"}],"FP9h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.einsum=void 0,exports.einsum_=o;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function o(s,...o){const i=o.map((e,r)=>(0,n.convertToTensor)(e,`tensors${r}`,"einsum")),t={equation:s};return e.ENGINE.runKernel(r.Einsum,i,t)}const i=(0,s.op)({einsum_:o});exports.einsum=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"a7Il":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","elu","float32")};return e.ENGINE.runKernel(r.Elu,t)}const u=(0,o.op)({elu_:t});exports.elu=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"roFm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erf=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=f(require("../util")),o=require("./cast"),u=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function a(u){let i=(0,r.convertToTensor)(u,"x","erf");n.assert("int32"===i.dtype||"float32"===i.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===i.dtype&&(i=(0,o.cast)(i,"float32"));const f={x:i};return e.ENGINE.runKernel(t.Erf,f)}const p=(0,u.op)({erf_:a});exports.erf=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./cast":"qqq3","./operation":"JtaO"}],"zsk9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.exp=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","exp")};return e.ENGINE.runKernel(r.Exp,t)}const i=(0,o.op)({exp_:t});exports.exp=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"XF6l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function s(o,i=0){const u=(0,t.convertToTensor)(o,"x","expandDims","string_or_numeric");n.assert(i<=u.rank,()=>"Axis must be <= rank of the tensor");const s={input:u},a={dim:i};return e.ENGINE.runKernel(r.ExpandDims,s,a)}const a=(0,o.op)({expandDims_:s});exports.expandDims=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"ntzg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","expm1")};return e.ENGINE.runKernel(r.Expm1,t)}const i=(0,o.op)({expm1_:t});exports.expm1=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"mfii":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function a(o,i){const u=(0,t.convertToTensor)(o,"x","tile","string_or_numeric");n.assert(u.rank===i.length,()=>`Error in transpose: rank of input ${u.rank} `+`must match length of reps ${i}.`);const a={x:u},s={reps:i};return e.ENGINE.runKernel(r.Tile,a,s)}const s=(0,o.op)({tile_:a});exports.tile=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"HzEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eye=void 0;var e=require("./buffer"),r=require("./expand_dims"),t=require("./operation"),n=require("./reshape"),i=require("./tile");function s(t,s,o,u="float32"){null==s&&(s=t);const l=(0,e.buffer)([t,s],u),p=t<=s?t:s;for(let e=0;e<p;++e)l.set(1,e,e);const a=(0,n.reshape)(l.toTensor(),[t,s]);if(null==o)return a;if(1===o.length)return(0,i.tile)((0,r.expandDims)(a,0),[o[0],1,1]);if(2===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)(a,0),0),[o[0],o[1],1,1]);if(3===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)((0,r.expandDims)(a,0),0),0),[o[0],o[1],o[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+`batchShapes, but received ${o.length}D.`)}const o=(0,t.op)({eye_:s});exports.eye=o;
},{"./buffer":"WyiN","./expand_dims":"XF6l","./operation":"JtaO","./reshape":"QI4k","./tile":"mfii"}],"e6pp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=n;var e=require("../engine"),r=require("../kernel_names");function n(n,t,l){const u={shape:n,value:t,dtype:l};return e.ENGINE.runKernel(r.Fill,{},u)}
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"XD37":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floor=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","floor","float32")};return e.ENGINE.runKernel(r.Floor,t)}const i=(0,n.op)({floor_:t});exports.floor=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"ESvM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gather=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o,i=0,s=0){const a={x:(0,t.convertToTensor)(n,"x","gather"),indices:(0,t.convertToTensor)(o,"indices","gather","int32")},u={axis:i,batchDims:s};return e.ENGINE.runKernel(r.GatherV2,a,u)}const i=(0,n.op)({gather_:o});exports.gather=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"QdS7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greater=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./broadcast_util"),a=require("./operation");function s(a,s){let i=(0,n.convertToTensor)(a,"a","greater","string_or_numeric"),u=(0,n.convertToTensor)(s,"b","greater","string_or_numeric");[i,u]=(0,t.makeTypesMatch)(i,u),(0,o.assertAndGetBroadcastShape)(i.shape,u.shape);const c={a:i,b:u};return e.ENGINE.runKernel(r.Greater,c)}const i=(0,a.op)({greater_:s});exports.greater=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"Dbo2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function u(o,u){let s=(0,a.convertToTensor)(o,"a","greaterEqual","string_or_numeric"),i=(0,a.convertToTensor)(u,"b","greaterEqual","string_or_numeric");[s,i]=(0,t.makeTypesMatch)(s,i),(0,n.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.GreaterEqual,l)}const s=(0,o.op)({greaterEqual_:u});exports.greaterEqual=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"C5d3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function t(i){const t={input:(0,n.convertToTensor)(i,"input","imag")};return e.ENGINE.runKernel(r.Imag,t)}const o=(0,i.op)({imag_:t});exports.imag=o;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"JMGA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFinite=void 0;var e=require("../engine"),i=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,r.convertToTensor)(n,"x","isFinite")};return e.ENGINE.runKernel(i.IsFinite,t)}const o=(0,n.op)({isFinite_:t});exports.isFinite=o;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"PwB1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInf=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s={x:(0,n.convertToTensor)(o,"x","isInf")};return e.ENGINE.runKernel(r.IsInf,s)}const i=(0,o.op)({isInf_:s});exports.isInf=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"LVjE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaN=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s={x:(0,n.convertToTensor)(o,"x","isNaN")};return e.ENGINE.runKernel(r.IsNan,s)}const i=(0,o.op)({isNaN_:s});exports.isNaN=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"hUKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u=.2){const l={x:(0,n.convertToTensor)(o,"x","leakyRelu")},t={alpha:u};return e.ENGINE.runKernel(r.LeakyRelu,l,t)}const l=(0,o.op)({leakyRelu_:u});exports.leakyRelu=l;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Ndy5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.less=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function i(o,i){let u=(0,t.convertToTensor)(o,"a","less","string_or_numeric"),a=(0,t.convertToTensor)(i,"b","less","string_or_numeric");[u,a]=(0,s.makeTypesMatch)(u,a),(0,n.assertAndGetBroadcastShape)(u.shape,a.shape);const l={a:u,b:a};return e.ENGINE.runKernel(r.Less,l)}const u=(0,o.op)({less_:i});exports.less=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"FvS1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function u(o,u){let a=(0,t.convertToTensor)(o,"a","lessEqual","string_or_numeric"),i=(0,t.convertToTensor)(u,"b","lessEqual","string_or_numeric");[a,i]=(0,s.makeTypesMatch)(a,i),(0,n.assertAndGetBroadcastShape)(a.shape,i.shape);const l={a:a,b:i};return e.ENGINE.runKernel(r.LessEqual,l)}const a=(0,o.op)({lessEqual_:u});exports.lessEqual=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"encs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linspace=n;var e=require("../engine"),r=require("../kernel_names");function n(n,t,s){if(s<=0)throw new Error("The number of values should be positive.");const o={start:n,stop:t,num:s};return e.ENGINE.runKernel(r.LinSpace,{},o)}
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"wFSX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localResponseNormalization=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(o,s=5,i=1,p=1,u=.5){const l=(0,t.convertToTensor)(o,"x","localResponseNormalization");n.assert(4===l.rank||3===l.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`),n.assert(n.isInt(s),()=>"Error in localResponseNormalization: depthRadius must be an "+`integer but got depthRadius ${s}.`);let c=l,f=!1;3===l.rank&&(f=!0,c=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const d={x:c},h={depthRadius:s,bias:i,alpha:p,beta:u},b=e.ENGINE.runKernel(r.LRN,d,h);return f?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const u=(0,o.op)({localResponseNormalization_:p});exports.localResponseNormalization=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"vwHA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","log","float32")};return e.ENGINE.runKernel(r.Log,t)}const i=(0,n.op)({log_:t});exports.log=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"PxfL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1p=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","log1p")};return e.ENGINE.runKernel(r.Log1p,t)}const i=(0,n.op)({log1p_:t});exports.log1p=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"yPDw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.customGrad=f,exports.grad=o,exports.grads=u,exports.valueAndGrad=i,exports.valueAndGrads=l,exports.variableGrads=d;var e=require("./engine"),r=require("./tensor"),a=require("./tensor_util_env"),s=n(require("./util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=e[o]}return s.default=e,a&&a.set(e,s),s}function o(r){return s.assert(s.isFunction(r),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const o=(0,a.convertToTensor)(t,"x","tf.grad","string_or_numeric"),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grad"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(o),[o],u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),c(t),t[0]})}}function u(r){return s.assert(s.isFunction(r),()=>"The f passed in grads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const o=(0,a.convertToTensorArray)(t,"args","tf.grads","string_or_numeric"),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grads"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(...o),o,u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(t),t})}}function i(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{s.assert(t instanceof r.Tensor,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:o,value:u}=e.ENGINE.gradients(()=>a(t),[t],n);return c(o),{grad:o[0],value:u}}}function l(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t)&&t.every(e=>e instanceof r.Tensor),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const o=e.ENGINE.gradients(()=>a(...t),t,n);return null!=n&&s.assertShapesMatch(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(o.grads),o}}function d(a,t){s.assert(s.isFunction(a),()=>"The f passed in variableGrads(f) must be a function"),s.assert(null==t||Array.isArray(t)&&t.every(e=>e instanceof r.Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const r in e.ENGINE.registeredVariables)t.push(e.ENGINE.registeredVariables[r])}const o=n?t.filter(e=>!e.trainable):null,u=t.length;t=t.filter(e=>e.trainable),s.assert(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+`be trainable, but none of the ${u} variables is `+"trainable.");const{value:i,grads:l}=e.ENGINE.gradients(a,t,null,!0);s.assert(l.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),s.assert(0===i.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+`returned a rank-${i.rank} tensor`);const d={};return t.forEach((e,r)=>{null!=l[r]&&(d[e.name]=l[r])}),null!=o&&o.forEach(e=>d[e.name]=null),{value:i,grads:d}}function f(r){return e.ENGINE.customGrad(r)}function c(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}
},{"./engine":"Nc3Y","./tensor":"DTHt","./tensor_util_env":"c6yR","./util":"P6nv"}],"iGYA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","neg")};return e.ENGINE.runKernel(r.Neg,t)}const i=(0,o.op)({neg_:t});exports.neg=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"eE4m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplus=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),s=require("./operation");function t(s){const t={x:(0,o.convertToTensor)(s,"x","softplus")};return e.ENGINE.runKernel(r.Softplus,t)}const n=(0,s.op)({softplus_:t});exports.softplus=n;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"lXsJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSigmoid=void 0;var e=require("../gradients"),r=require("../tensor_util_env"),o=require("./mul"),i=require("./neg"),u=require("./operation"),t=require("./sigmoid"),n=require("./softplus");function s(u){const s=(0,r.convertToTensor)(u,"x","logSigmoid");return(0,e.customGrad)(e=>{return{value:(0,i.neg)((0,n.softplus)((0,i.neg)(e))),gradFunc:r=>{return(0,o.mul)(r,(0,t.sigmoid)((0,i.neg)(e)))}}})(s)}const g=(0,u.op)({logSigmoid_:s});exports.logSigmoid=g;
},{"../gradients":"yPDw","../tensor_util_env":"c6yR","./mul":"k2PI","./neg":"iGYA","./operation":"JtaO","./sigmoid":"yARQ","./softplus":"eE4m"}],"iipD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","max")},u={reductionIndices:t,keepDims:i};return e.ENGINE.runKernel(r.Max,s,u)}const i=(0,o.op)({max_:t});exports.max=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"dGex":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sub=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),o=require("../tensor_util_env"),t=require("./operation");function s(t,s){let u=(0,o.convertToTensor)(t,"a","sub"),i=(0,o.convertToTensor)(s,"b","sub");[u,i]=(0,n.makeTypesMatch)(u,i);const b={a:u,b:i};return e.ENGINE.runKernel(r.Sub,b)}const u=(0,t.op)({sub_:s});exports.sub=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"ITAy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./cast"),s=require("./operation");function o(s,o=null,u=!1){let i=(0,t.convertToTensor)(s,"x","sum");"bool"===i.dtype&&(i=(0,n.cast)(i,"int32"));const l={x:i},c={axis:o,keepDims:u};return e.ENGINE.runKernel(r.Sum,l,c)}const u=(0,s.op)({sum_:o});exports.sum=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./cast":"qqq3","./operation":"JtaO"}],"I1du":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSoftmax=void 0;var r=require("../gradients"),e=require("../tensor_util_env"),o=require("./cast"),t=require("./exp"),s=require("./log"),u=require("./max"),a=require("./mul"),n=require("./operation"),i=require("./sub"),l=require("./sum");function m(n,m=-1){const x=(0,e.convertToTensor)(n,"logits","logSoftmax");if(-1===m&&(m=x.rank-1),m!==x.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${x.rank} and axis was ${m}`);return(0,r.customGrad)((r,e)=>{const n=(0,u.max)(r,m,!0),x=(0,i.sub)(r,n),c=(0,i.sub)((0,o.cast)(x,"float32"),(0,s.log)((0,l.sum)((0,t.exp)(x),m,!0)));e([c]);return{value:c,gradFunc:(r,e)=>{const[o]=e,s=(0,t.exp)(o);return(0,i.sub)(r,(0,a.mul)((0,l.sum)(r,m,!0),s))}}})(x)}const x=(0,n.op)({logSoftmax_:m});exports.logSoftmax=x;
},{"../gradients":"yPDw","../tensor_util_env":"c6yR","./cast":"qqq3","./exp":"zsk9","./log":"vwHA","./max":"iipD","./mul":"k2PI","./operation":"JtaO","./sub":"dGex","./sum":"ITAy"}],"DsMP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertAxesAreInnerMostDims=p,exports.axesAreInnerMostDims=n,exports.combineLocations=o,exports.computeOutAndReduceShapes=u,exports.expandShapeToKeepDim=s,exports.getAxesPermutation=i,exports.getInnerMostAxes=a,exports.getUndoAxesPermutation=f;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var p=u?Object.getOwnPropertyDescriptor(e,s):null;p&&(p.get||p.set)?Object.defineProperty(o,s,p):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}function n(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function o(e,t,r){const n=e.length+t.length,o=[];let u=0,s=0;for(let p=0;p<n;p++)-1===r.indexOf(p)?o.push(e[u++]):o.push(t[s++]);return o}function u(e,t){const r=[],n=e.length;for(let o=0;o<n;o++)-1===t.indexOf(o)&&r.push(e[o]);return[r,t.map(t=>e[t])]}function s(e,t){return o(e,t.map(e=>1),t)}function p(t,r,o){e.assert(n(r,o),()=>`${t} supports only inner-most axes for now. `+`Got axes ${r} and rank-${o} input.`)}function i(e,t){if(n(e,t))return null;const r=[];for(let n=0;n<t;++n)-1===e.indexOf(n)&&r.push(n);return e.forEach(e=>r.push(e)),r}function f(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function a(e,t){const r=[];for(let n=t-e;n<t;++n)r.push(n);return r}
},{"../util":"P6nv"}],"MQ55":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSumExp=void 0;var e=require("../tensor_util_env"),r=require("../util"),u=require("./add"),o=require("./axis_util"),s=require("./exp"),i=require("./log"),p=require("./max"),a=require("./operation"),t=require("./reshape"),n=require("./sub"),x=require("./sum");function l(a,l=null,q=!1){const m=(0,e.convertToTensor)(a,"x","logSumExp"),d=(0,r.parseAxisParam)(l,m.shape),c=(0,p.max)(m,d,!0),h=(0,n.sub)(m,c),g=(0,s.exp)(h),_=(0,x.sum)(g,d),v=(0,i.log)(_),S=(0,u.add)((0,t.reshape)(c,v.shape),v);if(q){const e=(0,o.expandShapeToKeepDim)(S.shape,d);return(0,t.reshape)(S,e)}return S}const q=(0,a.op)({logSumExp_:l});exports.logSumExp=q;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./add":"ZDFV","./axis_util":"DsMP","./exp":"zsk9","./log":"vwHA","./max":"iipD","./operation":"JtaO","./reshape":"QI4k","./sub":"dGex","./sum":"ITAy"}],"lYzt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAnd=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./broadcast_util"),t=require("./operation");function a(t,a){const i=(0,r.convertToTensor)(t,"a","logicalAnd","bool"),l=(0,r.convertToTensor)(a,"b","logicalAnd","bool");(0,n.assertAndGetBroadcastShape)(i.shape,l.shape);const s={a:i,b:l};return e.ENGINE.runKernel(o.LogicalAnd,s)}const i=(0,t.op)({logicalAnd_:a});exports.logicalAnd=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"XZse":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNot=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function n(t){const n={x:(0,r.convertToTensor)(t,"x","logicalNot","bool")};return e.ENGINE.runKernel(o.LogicalNot,n)}const i=(0,t.op)({logicalNot_:n});exports.logicalNot=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"HD5h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOr=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./broadcast_util"),n=require("./operation");function a(n,a){const i=(0,o.convertToTensor)(n,"a","logicalOr","bool"),l=(0,o.convertToTensor)(a,"b","logicalOr","bool");(0,t.assertAndGetBroadcastShape)(i.shape,l.shape);const s={a:i,b:l};return e.ENGINE.runKernel(r.LogicalOr,s)}const i=(0,n.op)({logicalOr_:a});exports.logicalOr=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"FEKV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalXor=void 0;var o=require("../tensor_util_env"),r=require("./broadcast_util"),e=require("./logical_and"),l=require("./logical_not"),a=require("./logical_or"),i=require("./operation");function t(i,t){const c=(0,o.convertToTensor)(i,"a","logicalXor","bool"),n=(0,o.convertToTensor)(t,"b","logicalXor","bool");return(0,r.assertAndGetBroadcastShape)(c.shape,n.shape),(0,e.logicalAnd)((0,a.logicalOr)(i,t),(0,l.logicalNot)((0,e.logicalAnd)(i,t)))}const c=(0,i.op)({logicalXor_:t});exports.logicalXor=c;
},{"../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./logical_and":"lYzt","./logical_not":"XZse","./logical_or":"HD5h","./operation":"JtaO"}],"hJeZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),i=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function l(i,s,u,l,p){const d=(0,t.convertToTensor)(i,"x","maxPool");let c=d,f=!1;3===d.rank&&(f=!0,c=(0,a.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),n.assert(4===c.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${c.rank}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '1'`),null!=p&&n.assert(n.isInt(l),()=>"Error in maxPool: pad must be an integer when using, "+`dimRoundingMode ${p} but got pad ${l}.`);const h={x:c},P={filterSize:s,strides:u,pad:l,dimRoundingMode:p},m=e.ENGINE.runKernel(r.MaxPool,h,P);return f?(0,a.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const p=(0,i.op)({maxPool_:l});exports.maxPool=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./conv_util":"Evju","./operation":"JtaO","./reshape":"QI4k"}],"Cet1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=u(require("../util")),n=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function i(n,s=[1,1,1],u,i,p,l="NDHWC"){const d=(0,t.convertToTensor)(n,"x","maxPool3d");let f=d,c=!1;4===d.rank&&(c=!0,f=(0,a.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.assert(5===f.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${f.rank}.`),o.assert("NDHWC"===l,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${l}`),null!=p&&o.assert(o.isInt(i),()=>"Error in maxPool3d: pad must be an integer when using, "+`dimRoundingMode ${p} but got pad ${i}.`);const h={x:f},m={filterSize:s,strides:u,pad:i,dimRoundingMode:p,dataFormat:l},x=e.ENGINE.runKernel(r.MaxPool3D,h,m);return c?(0,a.reshape)(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}const p=(0,n.op)({maxPool3d_:i});exports.maxPool3d=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"gxl3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmax=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./operation");function i(t,i,n,x,a=!1){const s={x:(0,o.convertToTensor)(t,"x","maxPoolWithArgmax")},l={filterSize:i,strides:n,pad:x,includeBatchInIndex:a},u=e.ENGINE.runKernel(r.MaxPoolWithArgmax,s,l);return{result:u[0],indexes:u[1]}}const n=(0,t.op)({maxPoolWithArgmax_:i});exports.maxPoolWithArgmax=n;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"X5MV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),i=require("./broadcast_util"),o=require("./cast"),n=require("./operation");function s(n,s){let u=(0,a.convertToTensor)(n,"a","maximum"),m=(0,a.convertToTensor)(s,"b","maximum");[u,m]=(0,t.makeTypesMatch)(u,m),"bool"===u.dtype&&(u=(0,o.cast)(u,"int32"),m=(0,o.cast)(m,"int32")),(0,i.assertAndGetBroadcastShape)(u.shape,m.shape);const c={a:u,b:m};return e.ENGINE.runKernel(r.Maximum,c)}const u=(0,n.op)({maximum_:s});exports.maximum=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./cast":"qqq3","./operation":"JtaO"}],"jwZo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mean=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","mean")},u={axis:t,keepDims:i};return e.ENGINE.runKernel(r.Mean,s,u)}const i=(0,o.op)({mean_:t});exports.mean=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"R5fo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=t;var e=require("../engine"),r=require("../util"),o=require("./complex");function t(s,i="float32"){if("complex64"===i){const e=t(s,"float32"),r=t(s,"float32");return(0,o.complex)(e,r)}const n=(0,r.makeZerosTypedArray)((0,r.sizeFromShape)(s),i);return e.ENGINE.makeTensor(n,s,i)}
},{"../engine":"Nc3Y","../util":"P6nv","./complex":"Iowv"}],"POxQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ones=s;var e=require("../engine"),r=require("../util"),o=require("./complex"),t=require("./zeros");function s(n,i="float32"){if("complex64"===i){const e=s(n,"float32"),r=(0,t.zeros)(n,"float32");return(0,o.complex)(e,r)}const u=(0,r.makeOnesTypedArray)((0,r.sizeFromShape)(n),i);return e.ENGINE.makeTensor(u,n,i)}
},{"../engine":"Nc3Y","../util":"P6nv","./complex":"Iowv","./zeros":"R5fo"}],"JdaY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meshgrid=n;var e=require("./mat_mul"),r=require("./ones"),t=require("./reshape"),s=require("../tensor"),o=require("../tensor_util_env"),i=require("../util_base");function n(n,a,{indexing:u="xy"}={}){if("xy"!==u&&"ij"!==u)throw new TypeError(`${u} is not a valid third argument to meshgrid`);if(void 0===n)return[];let p=(0,o.convertToTensor)(n,"x","meshgrid",n instanceof s.Tensor?n.dtype:"float32");if(void 0===a)return[p];let d=(0,o.convertToTensor)(a,"y","meshgrid",a instanceof s.Tensor?a.dtype:"float32");const h=(0,i.sizeFromShape)(p.shape),l=(0,i.sizeFromShape)(d.shape);return"xy"===u?(p=(0,t.reshape)(p,[1,-1]),d=(0,t.reshape)(d,[-1,1]),[(0,e.matMul)((0,r.ones)([l,1],p.dtype),p),(0,e.matMul)(d,(0,r.ones)([1,h],d.dtype))]):(p=(0,t.reshape)(p,[-1,1]),d=(0,t.reshape)(d,[1,-1]),[(0,e.matMul)(p,(0,r.ones)([1,l],p.dtype)),(0,e.matMul)((0,r.ones)([h,1],d.dtype),d)])}
},{"./mat_mul":"mMWq","./ones":"POxQ","./reshape":"QI4k","../tensor":"DTHt","../tensor_util_env":"c6yR","../util_base":"cppa"}],"w9We":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i,o=null,t=!1){const s={x:(0,n.convertToTensor)(i,"x","min")},u={axis:o,keepDims:t};return e.ENGINE.runKernel(r.Min,s,u)}const t=(0,i.op)({min_:o});exports.min=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"crIr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),i=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./cast"),s=require("./operation");function u(s,u){let a=(0,i.convertToTensor)(s,"a","minimum"),m=(0,i.convertToTensor)(u,"b","minimum");[a,m]=(0,t.makeTypesMatch)(a,m),"bool"===a.dtype&&(a=(0,o.cast)(a,"int32"),m=(0,o.cast)(m,"int32")),(0,n.assertAndGetBroadcastShape)(a.shape,m.shape);const c={a:a,b:m};return e.ENGINE.runKernel(r.Minimum,c)}const a=(0,s.op)({minimum_:u});exports.minimum=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./cast":"qqq3","./operation":"JtaO"}],"yI5U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function s(o,a,i){n.assert("reflect"===i||"symmetric"===i,()=>"Invalid mode. Mode must be either reflect or symmetric. "+`Got ${i}.`);const s=(0,t.convertToTensor)(o,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");n.assert(a.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. `+`Got ${a.length}.`);const u="reflect"===i?1:0;for(let e=0;e<s.rank;e++)n.assert(2===a[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),n.assert(a[e][0]>=0&&a[e][0]<=s.shape[e]-u&&a[e][1]>=0&&a[e][1]<=s.shape[e]-u,()=>`Padding in dimension ${e} cannot be greater than or equal `+`to ${s.shape[e]-u} or less than 0 for input of `+`shape ${s.shape}`);const d={paddings:a,mode:i},c={x:s};return e.ENGINE.runKernel(r.MirrorPad,c,d)}const u=(0,o.op)({mirrorPad_:s});exports.mirrorPad=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"lYF1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function s(t,s){let i=(0,n.convertToTensor)(t,"a","mod"),u=(0,n.convertToTensor)(s,"b","mod");[i,u]=(0,o.makeTypesMatch)(i,u);const d={a:i,b:u};return e.ENGINE.runKernel(r.Mod,d)}const i=(0,t.op)({mod_:s});exports.mod=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"mJRX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.square=void 0;var e=require("../engine"),r=require("../tensor_util_env"),o=require("./operation");function n(o){const n=(0,r.convertToTensor)(o,"x","square");return e.ENGINE.runKernel("Square",{x:n},{})}const t=(0,o.op)({square_:n});exports.square=t;
},{"../engine":"Nc3Y","../tensor_util_env":"c6yR","./operation":"JtaO"}],"rBcz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moments=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./axis_util"),t=require("./cast"),a=require("./mean"),n=require("./operation"),o=require("./reshape"),u=require("./square"),i=require("./sub");function p(n,p=null,m=!1){n=(0,e.convertToTensor)(n,"x","moments");const q=(0,r.parseAxisParam)(p,n.shape),c=(0,a.mean)(n,q,m);let l=c.shape;m||(l=(0,s.expandShapeToKeepDim)(c.shape,q));const x=(0,u.square)((0,i.sub)((0,t.cast)(n,"float32"),(0,o.reshape)(c,l)));return{mean:c,variance:(0,a.mean)(x,q,m)}}const m=(0,n.op)({moments_:p});exports.moments=m;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./axis_util":"DsMP","./cast":"qqq3","./mean":"jwZo","./operation":"JtaO","./reshape":"QI4k","./square":"mJRX","./sub":"dGex"}],"V2Xb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiRNNCell=void 0;var e=require("../tensor_util_env"),t=require("./operation");function o(t,o,r,l){const n=(0,e.convertToTensor)(o,"data","multiRNNCell"),s=(0,e.convertToTensorArray)(r,"c","multiRNNCell"),u=(0,e.convertToTensorArray)(l,"h","multiRNNCell");let i=n;const c=[];for(let e=0;e<t.length;e++){const o=t[e](i,s[e],u[e]);c.push(o[0]),c.push(o[1]),i=o[1]}const N=[],p=[];for(let e=0;e<c.length;e+=2)N.push(c[e]),p.push(c[e+1]);return[N,p]}const r=(0,t.op)({multiRNNCell_:o});exports.multiRNNCell=r;
},{"../tensor_util_env":"c6yR","./operation":"JtaO"}],"GA9C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),i=require("./operation"),t=require("./reshape");function n(i,n,s,u=!1){const l=(0,o.convertToTensor)(i,"logits","multinomial"),a=l.size,m=l.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${a}.`);if(m>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${m}`);s=s||Math.random();const p={logits:1===m?(0,t.reshape)(l,[1,-1]):l},c={numSamples:n,seed:s,normalized:u},d=e.ENGINE.runKernel(r.Multinomial,p,c);return 1===m?(0,t.reshape)(d,[d.size]):d}const s=(0,i.op)({multinomial_:n});exports.multinomial=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO","./reshape":"QI4k"}],"jVu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./broadcast_util"),u=require("./operation");function a(u,a){let s=(0,n.convertToTensor)(u,"a","notEqual","string_or_numeric"),i=(0,n.convertToTensor)(a,"b","notEqual","string_or_numeric");[s,i]=(0,t.makeTypesMatch)(s,i),(0,o.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.NotEqual,l)}const s=(0,u.op)({notEqual_:a});exports.notEqual=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"VzlV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function i(o){const i={x:(0,n.convertToTensor)(o,"x","onesLike")};return e.ENGINE.runKernel(r.OnesLike,i)}const s=(0,o.op)({onesLike_:i});exports.onesLike=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"lKlD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outerProduct=void 0;var e=require("../tensor_util_env"),r=a(require("../util")),t=require("./mat_mul"),o=require("./operation"),n=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function i(o,u){const a=(0,e.convertToTensor)(o,"v1","outerProduct"),i=(0,e.convertToTensor)(u,"v2","outerProduct");r.assert(1===a.rank&&1===i.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+`${a.rank} and ${i.rank}.`);const c=(0,n.reshape)(a,[-1,1]),s=(0,n.reshape)(i,[1,-1]);return(0,t.matMul)(c,s)}const c=(0,o.op)({outerProduct_:i});exports.outerProduct=c;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./mat_mul":"mMWq","./operation":"JtaO","./reshape":"QI4k"}],"hajs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t,a=0){const s=(0,n.convertToTensor)(o,"x","pad");if(0===s.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:a},d={x:s};return e.ENGINE.runKernel(r.PadV2,d,i)}const a=(0,o.op)({pad_:t});exports.pad=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"aLXo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad1d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,o=0){return(0,e.assert)(2===d.length,()=>"Invalid number of paddings. Must be length of 2."),(0,t.pad)(r,[d],o)}const o=(0,r.op)({pad1d_:d});exports.pad1d=o;
},{"../util":"P6nv","./operation":"JtaO","./pad":"hajs"}],"OUX7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad2d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,n=0){return(0,e.assert)(2===d.length&&2===d[0].length&&2===d[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,t.pad)(r,d,n)}const n=(0,r.op)({pad2d_:d});exports.pad2d=n;
},{"../util":"P6nv","./operation":"JtaO","./pad":"hajs"}],"Exwp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad3d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function d(t,d,n=0){return(0,e.assert)(3===d.length&&2===d[0].length&&2===d[1].length&&2===d[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,d,n)}const n=(0,t.op)({pad3d_:d});exports.pad3d=n;
},{"../util":"P6nv","./operation":"JtaO","./pad":"hajs"}],"HxGt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad4d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function n(t,n,d=0){return(0,e.assert)(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,n,d)}const d=(0,t.op)({pad4d_:n});exports.pad4d=d;
},{"../util":"P6nv","./operation":"JtaO","./pad":"hajs"}],"rWul":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),a=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function i(a,o,s){const i=(0,r.convertToTensor)(a,"x","spaceToBatchND");n.assert(i.rank>=1+o.length,()=>`input rank ${i.rank} should be > than [blockShape] ${o.length}`),n.assert(s.length===o.length,()=>`paddings.shape[0] ${s.length} must be equal to [blockShape] ${o.length}`),n.assert(i.shape.reduce((e,t,r)=>r>0&&r<=o.length?e&&(t+s[r-1][0]+s[r-1][1])%o[r-1]==0:e,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${s.toString()} must be divisible by blockShapes ${o.toString()}`);const p={x:i},u={blockShape:o,paddings:s};return e.ENGINE.runKernel(t.SpaceToBatchND,p,u)}const p=(0,a.op)({spaceToBatchND_:i});exports.spaceToBatchND=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"T3We":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool=void 0;var e=require("../tensor_util_env"),t=l(require("../util")),r=require("./avg_pool"),o=require("./batch_to_space_nd"),a=l(require("./conv_util")),n=require("./max_pool"),i=require("./operation"),p=require("./reshape"),s=require("./space_to_batch_nd");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=a?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}function c(i,u,l,c,d,m){null==d&&(d=[1,1]),null==m&&(m=1),0===c&&(c="valid");const v=(0,e.convertToTensor)(i,"x","maxPool");let _=v,b=!1;3===v.rank&&(b=!0,_=(0,p.reshape)(v,[1,v.shape[0],v.shape[1],v.shape[2]])),t.assert(a.eitherStridesOrDilationsAreOne(m,d),()=>"Error in pool: Either strides or dilations must be 1. "+`Got strides ${m} and dilations '${d}'`);const O=a.computePool2DInfo(_.shape,u,m,d,c),g=[O.dilationHeight,O.dilationWidth];let y;y="same"===c?h([O.filterHeight,O.filterWidth],g):[[0,0],[0,0]];const P=1===g[0]&&1===g[1],[q,j]=f([O.inHeight,O.inWidth],g,y),x=P?c:"valid",D=P?_:(0,s.spaceToBatchND)(_,g,q),M=("avg"===l?()=>(0,r.avgPool)(D,u,m,x):()=>(0,n.maxPool)(D,u,m,x))(),W=P?M:(0,o.batchToSpaceND)(M,g,j);return b?(0,p.reshape)(W,[W.shape[1],W.shape[2],W.shape[3]]):W}function f(e,t,r){const o=r.map(e=>e[0]),a=r.map(e=>e[1]),n=e.concat(o,a),i=t.map((e,t)=>(e-n[t]%e)%e),p=a.map((e,t)=>e+i[t]);return[t.map((e,t)=>[o[t],p[t]]),t.map((e,t)=>[0,i[t]])]}function h(e,t){const r=e.map((e,r)=>e+(e-1)*(t[r]-1)).map(e=>e-1),o=r.map(e=>Math.floor(e/2)),a=r.map((e,t)=>e-o[t]);return r.map((e,t)=>[o[t],a[t]])}const d=(0,i.op)({pool_:c});exports.pool=d;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./avg_pool":"iP9e","./batch_to_space_nd":"Q9gF","./conv_util":"Evju","./max_pool":"hJeZ","./operation":"JtaO","./reshape":"QI4k","./space_to_batch_nd":"rWul"}],"vt1B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pow=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function s(t,s){let i=(0,n.convertToTensor)(t,"base","pow"),p=(0,n.convertToTensor)(s,"exp","pow");[i,p]=(0,o.makeTypesMatch)(i,p);const u={a:i,b:p};return e.ENGINE.runKernel(r.Pow,u)}const i=(0,t.op)({pow_:s});exports.pow=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./operation":"JtaO"}],"mkuj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u){const t={x:(0,n.convertToTensor)(o,"x","prelu"),alpha:(0,n.convertToTensor)(u,"alpha","prelu")};return e.ENGINE.runKernel(r.Prelu,t)}const t=(0,o.op)({prelu_:u});exports.prelu=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"pvB6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./cast"),n=require("./operation");function i(n,i=null,s=!1){let u=(0,o.convertToTensor)(n,"x","prod");"bool"===u.dtype&&(u=(0,t.cast)(u,"int32"));const p={x:u},d={axis:i,keepDims:s};return e.ENGINE.runKernel(r.Prod,p,d)}const s=(0,n.op)({prod_:i});exports.prod=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./cast":"qqq3","./operation":"JtaO"}],"WpBM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rand=void 0;var e=require("../engine"),r=require("../util"),n=require("./operation");function t(n,t,o){const i=(0,r.sizeFromShape)(n);let a=null;if(null==o||"float32"===o)a=new Float32Array(i);else if("int32"===o)a=new Int32Array(i);else{if("bool"!==o)throw new Error(`Unknown data type ${o}`);a=new Uint8Array(i)}for(let e=0;e<i;e++)a[e]=t();return e.ENGINE.makeTensor(a,n,o)}const o=(0,n.op)({rand_:t});exports.rand=o;
},{"../engine":"Nc3Y","../util":"P6nv","./operation":"JtaO"}],"uCqK":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function s(t){var n,e=this,s=(n=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var s=.02519603282416938*(n+=t.charCodeAt(e));s-=n=s>>>0,n=(s*=n)>>>0,n+=4294967296*(s-=n)}return 2.3283064365386963e-10*(n>>>0)});e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=s(" "),e.s1=s(" "),e.s2=s(" "),e.s0-=s(t),e.s0<0&&(e.s0+=1),e.s1-=s(t),e.s1<0&&(e.s1+=1),e.s2-=s(t),e.s2<0&&(e.s2+=1),s=null}function r(t,n){return n.c=t.c,n.s0=t.s0,n.s1=t.s1,n.s2=t.s2,n}function o(t,n){var e=new s(t),o=n&&n.state,u=e.next;return u.int32=function(){return 4294967296*e.next()|0},u.double=function(){return u()+1.1102230246251565e-16*(2097152*u()|0)},u.quick=u,o&&("object"==typeof o&&r(o,e),u.state=function(){return r(e,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.alea=o}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"w3Ll":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function r(t){var n=this,e="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var t=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^t^t>>>8},t===(0|t)?n.x=t:e+=t;for(var r=0;r<e.length+64;r++)n.x^=0|e.charCodeAt(r),n.next()}function o(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n}function u(t,n){var e=new r(t),u=n&&n.state,x=function(){return(e.next()>>>0)/4294967296};return x.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},x.int32=e.next,x.quick=x,u&&("object"==typeof u&&o(u,e),x.state=function(){return o(e,{})}),x}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xor128=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"OwKO":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^t^t<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,t===(0|t)?n.x=t:e+=t;for(var o=0;o<e.length+64;o++)n.x^=0|e.charCodeAt(o),o==e.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function r(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n.v=t.v,n.d=t.d,n}function u(t,n){var e=new o(t),u=n&&n.state,x=function(){return(e.next()>>>0)/4294967296};return x.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},x.int32=e.next,x.quick=x,u&&("object"==typeof u&&r(u,e),x.state=function(){return r(e,{})}),x}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xorwow=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"OrVu":[function(require,module,exports) {
var define;
var n;!function(n,t,e){function r(n){var t=this;t.next=function(){var n,e,r=t.x,o=t.i;return n=r[o],e=(n^=n>>>7)^n<<24,e^=(n=r[o+1&7])^n>>>10,e^=(n=r[o+3&7])^n>>>3,e^=(n=r[o+4&7])^n<<7,n=r[o+7&7],e^=(n^=n<<13)^n<<9,r[o]=e,t.i=o+1&7,e},function(n,t){var e,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,e=0;e<t.length;++e)r[7&e]=r[7&e]<<15^t.charCodeAt(e)+r[e+1&7]<<13;for(;r.length<8;)r.push(0);for(e=0;e<8&&0===r[e];++e);for(8==e?r[7]=-1:r[e],n.x=r,n.i=0,e=256;e>0;--e)n.next()}(t,n)}function o(n,t){return t.x=n.x.slice(),t.i=n.i,t}function i(n,t){null==n&&(n=+new Date);var e=new r(n),i=t&&t.state,u=function(){return(e.next()>>>0)/4294967296};return u.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},u.int32=e.next,u.quick=u,i&&(i.x&&o(i,e),u.state=function(){return o(e,{})}),u}t&&t.exports?t.exports=i:e&&e.amd?e(function(){return i}):this.xorshift7=i}(0,"object"==typeof module&&module,"function"==typeof n&&n);
},{}],"DrnH":[function(require,module,exports) {
var define;
var n;!function(n,t,e){function r(n){var t=this;t.next=function(){var n,e,r=t.w,o=t.X,u=t.i;return t.w=r=r+1640531527|0,e=o[u+34&127],n=o[u=u+1&127],e^=e<<13,n^=n<<17,e^=e>>>15,n^=n>>>12,e=o[u]=e^n,t.i=u,e+(r^r>>>16)|0},function(n,t){var e,r,o,u,i,c=[],f=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,f=Math.max(f,t.length)),o=0,u=-32;u<f;++u)t&&(r^=t.charCodeAt((u+32)%t.length)),0===u&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,u>=0&&(i=i+1640531527|0,o=0==(e=c[127&u]^=r+i)?o+1:0);for(o>=128&&(c[127&(t&&t.length||0)]=-1),o=127,u=512;u>0;--u)r=c[o+34&127],e=c[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,c[o]=r^e;n.w=i,n.X=c,n.i=o}(t,n)}function o(n,t){return t.i=n.i,t.w=n.w,t.X=n.X.slice(),t}function u(n,t){null==n&&(n=+new Date);var e=new r(n),u=t&&t.state,i=function(){return(e.next()>>>0)/4294967296};return i.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},i.int32=e.next,i.quick=i,u&&(u.X&&o(u,e),i.state=function(){return o(e,{})}),i}t&&t.exports?t.exports=u:e&&e.amd?e(function(){return u}):this.xor4096=u}(0,"object"==typeof module&&module,"function"==typeof n&&n);
},{}],"yIlK":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.b,e=n.c,o=n.d,r=n.a;return t=t<<25^t>>>7^e,e=e-o|0,o=o<<24^o>>>8^r,r=r-t|0,n.b=t=t<<20^t>>>12^e,n.c=e=e-o|0,n.d=o<<16^e>>>16^r,n.a=r-t|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,t===Math.floor(t)?(n.a=t/4294967296|0,n.b=0|t):e+=t;for(var o=0;o<e.length+20;o++)n.b^=0|e.charCodeAt(o),n.next()}function r(t,n){return n.a=t.a,n.b=t.b,n.c=t.c,n.d=t.d,n}function u(t,n){var e=new o(t),u=n&&n.state,c=function(){return(e.next()>>>0)/4294967296};return c.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},c.int32=e.next,c.quick=c,u&&("object"==typeof u&&r(u,e),c.state=function(){return r(e,{})}),c}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.tychei=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"D1cN":[function(require,module,exports) {
var global = arguments[3];
var define;
var r,n=arguments[3];!function(n,t){var e,o=this,u=256,i=6,a="random",c=t.pow(u,i),f=t.pow(2,52),s=2*f,l=u-1;function p(r,l,p){var m=[],v=h(function r(n,t){var e,o=[],u=typeof n;if(t&&"object"==u)for(e in n)try{o.push(r(n[e],t-1))}catch(i){}return o.length?o:"string"==u?n:n+"\0"}((l=1==l?{entropy:!0}:l||{}).entropy?[r,d(n)]:null==r?function(){try{var r;return e&&(r=e.randomBytes)?r=r(u):(r=new Uint8Array(u),(o.crypto||o.msCrypto).getRandomValues(r)),d(r)}catch(a){var t=o.navigator,i=t&&t.plugins;return[+new Date,o,i,o.screen,d(n)]}}():r,3),m),j=new g(m),S=function(){for(var r=j.g(i),n=c,t=0;r<f;)r=(r+t)*u,n*=u,t=j.g(1);for(;r>=s;)r/=2,n/=2,t>>>=1;return(r+t)/n};return S.int32=function(){return 0|j.g(4)},S.quick=function(){return j.g(4)/4294967296},S.double=S,h(d(j.S),n),(l.pass||p||function(r,n,e,o){return o&&(o.S&&y(o,j),r.state=function(){return y(j,{})}),e?(t[a]=r,n):r})(S,v,"global"in l?l.global:this==t,l.state)}function g(r){var n,t=r.length,e=this,o=0,i=e.i=e.j=0,a=e.S=[];for(t||(r=[t++]);o<u;)a[o]=o++;for(o=0;o<u;o++)a[o]=a[i=l&i+r[o%t]+(n=a[o])],a[i]=n;(e.g=function(r){for(var n,t=0,o=e.i,i=e.j,a=e.S;r--;)n=a[o=l&o+1],t=t*u+a[l&(a[o]=a[i=l&i+n])+(a[i]=n)];return e.i=o,e.j=i,t})(u)}function y(r,n){return n.i=r.i,n.j=r.j,n.S=r.S.slice(),n}function h(r,n){for(var t,e=r+"",o=0;o<e.length;)n[l&o]=l&(t^=19*n[l&o])+e.charCodeAt(o++);return d(n)}function d(r){return String.fromCharCode.apply(0,r)}if(t["seed"+a]=p,h(t.random(),n),"object"==typeof module&&module.exports){module.exports=p;try{e=require("crypto")}catch(m){}}else"function"==typeof r&&r.amd&&r(function(){return p})}([],Math);
},{"crypto":"sC8V"}],"Kwju":[function(require,module,exports) {
var r=require("./lib/alea"),e=require("./lib/xor128"),i=require("./lib/xorwow"),o=require("./lib/xorshift7"),l=require("./lib/xor4096"),x=require("./lib/tychei"),u=require("./seedrandom");u.alea=r,u.xor128=e,u.xorwow=i,u.xorshift7=o,u.xor4096=l,u.tychei=x,module.exports=u;
},{"./lib/alea":"uCqK","./lib/xor128":"w3Ll","./lib/xorwow":"OwKO","./lib/xorshift7":"OrVu","./lib/xor4096":"DrnH","./lib/tychei":"yIlK","./seedrandom":"D1cN"}],"jZqu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UniformRandom=exports.RandGamma=exports.MPRandGauss=void 0,exports.expectArrayInMeanStdRange=h,exports.jarqueBeraNormalityTest=i;var t=r(require("seedrandom")),e=require("../test_util");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var i=s?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=t[o]}return a.default=t,r&&r.set(t,a),a}class a{constructor(e,n,r,a,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=s||Math.random();this.random=t.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,a,s;do{s=(r=2*this.random()-1)*r+(a=2*this.random()-1)*a}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}exports.MPRandGauss=a;class s{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const o=s||Math.random();this.randu=t.alea(o.toString()),this.randn=new a(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-s+Math.log(s)),(a=this.randu())<e||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}exports.RandGamma=s;class o{constructor(e=0,n=1,r,a){if(this.canReturnFloat=(()=>null==this.dtype||"float32"===this.dtype),this.min=e,this.range=n-e,this.dtype=r,null==a&&(a=Math.random()),"number"==typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=t.alea(a)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}function i(t){const e=t.length,n=c(t),r=d(t),a=e/6*(Math.pow(n,2)+.25*Math.pow(r-3,2));if(a>5.991)throw new Error(`Invalid p-value for JB: ${a}`)}function h(t,n,r,a){null==a&&(a=(0,e.testEpsilon)());const s=l(t);(0,e.expectNumbersClose)(s,n,a),(0,e.expectNumbersClose)(u(t,s),r,a)}function l(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}function u(t,e){let n=0;for(let r=0;r<t.length;r++){const a=t[r]-e;n+=a*a}return Math.sqrt(n/t.length)}function d(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,4)}return 1/n*a/Math.pow(1/n*r,2)}function c(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,3)}return 1/n*a/Math.pow(1/(n-1)*r,1.5)}exports.UniformRandom=o;
},{"seedrandom":"Kwju","../test_util":"ip5I"}],"fM99":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomGamma=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function a(r,a,o=1,n="float32",u){if(null==o&&(o=1),null==n&&(n="float32"),"float32"!==n&&"int32"!==n)throw new Error(`Unsupported data type ${n}`);const l=new t.RandGamma(a,o,n,u),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const o=(0,r.op)({randomGamma_:a});exports.randomGamma=o;
},{"./buffer":"WyiN","./operation":"JtaO","./rand_util":"jZqu"}],"gSkF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomNormal=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function t(r,t=0,n=1,a,u){if(null!=a&&"bool"===a)throw new Error(`Unsupported data type ${a}`);const l=new o.MPRandGauss(t,n,a,!1,u),s=(0,e.buffer)(r,a);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const n=(0,r.op)({randomNormal_:t});exports.randomNormal=n;
},{"./buffer":"WyiN","./operation":"JtaO","./rand_util":"jZqu"}],"yl8A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomUniform=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function n(r,n=0,t=1,u="float32",i){const a=(0,e.buffer)(r,u),f=new o.UniformRandom(n,t,null,i);for(let e=0;e<a.values.length;e++)a.values[e]=f.nextValue();return a.toTensor()}const t=(0,r.op)({randomUniform_:n});exports.randomUniform=t;
},{"./buffer":"WyiN","./operation":"JtaO","./rand_util":"jZqu"}],"gc29":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=t;var e=require("../engine"),r=require("../kernel_names");function t(t,n,o=1,s="float32"){if(0===o)throw new Error("Cannot have a step of zero");const a={start:t,stop:n,step:o,dtype:s};return e.ENGINE.runKernel(r.Range,{},a)}
},{"../engine":"Nc3Y","../kernel_names":"sdEe"}],"cKEu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={input:(0,n.convertToTensor)(t,"input","real")};return e.ENGINE.runKernel(r.Real,o)}const i=(0,t.op)({real_:o});exports.real=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"w0Wv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocal=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function c(n){const c={x:(0,o.convertToTensor)(n,"x","reciprocal")};return e.ENGINE.runKernel(r.Reciprocal,c)}const i=(0,n.op)({reciprocal_:c});exports.reciprocal=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"SJP3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","relu")};return e.ENGINE.runKernel(r.Relu,u)}const t=(0,o.op)({relu_:u});exports.relu=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"MNkg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","relu6")};return e.ENGINE.runKernel(r.Relu6,u)}const t=(0,o.op)({relu6_:u});exports.relu6=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"SxGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function o(s,o){const t={x:(0,n.convertToTensor)(s,"x","reverse")},i={dims:o};return e.ENGINE.runKernel(r.Reverse,t,i)}const t=(0,s.op)({reverse_:o});exports.reverse=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"dTCT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse1d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t){const o=(0,e.convertToTensor)(t,"x","reverse");return r.assert(1===o.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${o.rank}.`),(0,n.reverse)(o,0)}const s=(0,t.op)({reverse1d_:i});exports.reverse1d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reverse":"SxGN"}],"jAVH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse2d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(2===u.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse2d_:i});exports.reverse2d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reverse":"SxGN"}],"fmHW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse3d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(3===u.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse3d_:i});exports.reverse3d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reverse":"SxGN"}],"CaS6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse4d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(4===u.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse4d_:i});exports.reverse4d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reverse":"SxGN"}],"J1Ke":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.round=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","round")};return e.ENGINE.runKernel(r.Round,u)}const t=(0,o.op)({round_:u});exports.round=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"XwKw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrt=void 0;var r=require("../engine"),e=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n){const o={x:(0,t.convertToTensor)(n,"x","rsqrt","float32")};return r.ENGINE.runKernel(e.Rsqrt,o)}const s=(0,n.op)({rsqrt_:o});exports.rsqrt=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Ay42":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scalar=t;var r=require("../util"),e=require("./tensor_ops_util");function t(t,a){if(((0,r.isTypedArray)(t)&&"string"!==a||Array.isArray(t))&&"complex64"!==a)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===a&&(0,r.isTypedArray)(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,e.makeTensor)(t,[],[],a)}
},{"../util":"P6nv","./tensor_ops_util":"m0jF"}],"nLmU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","selu")};return e.ENGINE.runKernel(r.Selu,u)}const s=(0,o.op)({selu_:u});exports.selu=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"M7Hy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.separableConv2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=require("./depthwise_conv2d"),o=require("./operation"),s=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function p(o,a,i,p,u,l=[1,1],d="NHWC"){const b=(0,e.convertToTensor)(o,"x","separableConv2d"),f=(0,e.convertToTensor)(a,"depthwiseFilter","separableConv2d"),v=(0,e.convertToTensor)(i,"pointwiseFilter","separableConv2d");let c=b,h=!1;if(3===b.rank&&(h=!0,c=(0,s.reshape)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),"NCHW"===d)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");r.assert(4===c.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),r.assert(4===f.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(4===v.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(1===v.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+` must be 1, but got ${v.shape[0]}.`),r.assert(1===v.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+`filter must be 1, but got ${v.shape[1]}.`);const C=f.shape[2],k=f.shape[3];r.assert(v.shape[2]===C*k,()=>"Error in separableConv2d: the third dimension of pointwise filter "+`must be ${C*k}, `+`but got ${v.shape[2]}.`);const w=(0,n.depthwiseConv2d)(c,f,p,u,d,l),y=(0,t.conv2d)(w,v,1,"valid",d);return h?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const u=(0,o.op)({separableConv2d_:p});exports.separableConv2d=u;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./conv2d":"oJQk","./depthwise_conv2d":"Kahd","./operation":"JtaO","./reshape":"QI4k"}],"cgP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setdiff1dAsync=void 0;var e=require("../tensor"),t=require("../tensor_util_env"),r=o(require("../util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=s?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}async function s(n,o){const s=(0,t.convertToTensor)(n,"x","setdiff1d"),a=(0,t.convertToTensor)(o,"y","setdiff1d");r.assert(s.dtype===a.dtype,()=>`x and y should have the same dtype, but got x (${s.dtype}) and y (${a.dtype}).`),r.assert(1===s.rank,()=>`x should be 1D tensor, but got x (${s.shape}).`),r.assert(1===a.rank,()=>`y should be 1D tensor, but got y (${a.shape}).`);const u=await s.data(),f=await a.data(),i=new Set(f);let d=0;for(let e=0;e<u.length;e++)i.has(u[e])||d++;const p=new e.TensorBuffer([d],s.dtype),c=new e.TensorBuffer([d],"int32");for(let e=0,t=0;e<u.length;e++)i.has(u[e])||(p.values[t]=u[e],c.values[t]=e,t++);return[p.toTensor(),c.toTensor()]}const a=s;exports.setdiff1dAsync=a;
},{"../tensor":"DTHt","../tensor_util_env":"c6yR","../util":"P6nv"}],"cGq1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sign=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","sign")};return e.ENGINE.runKernel(r.Sign,o)}const s=(0,i.op)({sign_:o});exports.sign=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"AdWB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function i(o){const i={x:(0,n.convertToTensor)(o,"x","sin","float32")};return e.ENGINE.runKernel(r.Sin,i)}const t=(0,o.op)({sin_:i});exports.sin=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"fN3P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","sinh")};return e.ENGINE.runKernel(r.Sinh,o)}const s=(0,i.op)({sinh_:o});exports.sinh=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"lQVK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice1d");return r.assert(1===u.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,[o],[i])}const s=(0,t.op)({slice1d_:u});exports.slice1d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./slice":"zP07"}],"r8xQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice2d");return r.assert(2===u.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice2d_:u});exports.slice2d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./slice":"zP07"}],"jraI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice3d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice3d");return r.assert(3===u.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice3d_:u});exports.slice3d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./slice":"zP07"}],"r60P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice4d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice4d");return r.assert(4===u.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice4d_:u});exports.slice4d=s;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./slice":"zP07"}],"xLGH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function n(t,n=-1){const s=(0,r.convertToTensor)(t,"logits","softmax","float32");if(-1===n&&(n=s.rank-1),n!==s.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${s.rank} and dim was ${n}`);const a={logits:s},i={dim:n};return e.ENGINE.runKernel(o.Softmax,a,i)}const s=(0,t.op)({softmax_:n});exports.softmax=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"e6Hs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../util"),o=require("../operation");function n(o){(0,r.assert)("complex64"===o.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+`but got ${o.dtype}.`);const n={input:o};return e.ENGINE.runKernel(t.FFT,n)}const u=(0,o.op)({fft_:n});exports.fft=u;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../util":"P6nv","../operation":"JtaO"}],"PxKB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../util"),i=require("../operation");function o(i){(0,r.assert)("complex64"===i.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+`but got ${i.dtype}.`);const o={input:i};return e.ENGINE.runKernel(t.IFFT,o)}const n=(0,i.op)({ifft_:o});exports.ifft=n;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../util":"P6nv","../operation":"JtaO"}],"gr1H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.irfft=void 0;var e=require("../complex"),r=require("../concat"),s=require("../imag"),i=require("../mul"),a=require("../operation"),t=require("../real"),c=require("../reshape"),o=require("../reverse"),p=require("../scalar"),u=require("../slice"),l=require("./ifft");function f(a){const f=a.shape[a.shape.length-1],n=a.size/f;let h;if(f<=2){const e=(0,c.reshape)(a,[n,f]);h=(0,l.ifft)(e)}else{const q=[n,2*(f-1)],m=(0,c.reshape)((0,t.real)(a),[n,f]),v=(0,c.reshape)((0,s.imag)(a),[n,f]),x=(0,o.reverse)((0,u.slice)(m,[0,1],[n,f-2]),1),d=(0,i.mul)((0,o.reverse)((0,u.slice)(v,[0,1],[n,f-2]),1),(0,p.scalar)(-1)),g=(0,r.concat)([m,x],1),_=(0,r.concat)([v,d],1),b=(0,c.reshape)((0,e.complex)(g,_),[q[0],q[1]]);h=(0,l.ifft)(b)}if(h=(0,t.real)(h),3===a.rank&&0!==a.shape[0]){const e=h,r=a.shape[0];h=(0,c.reshape)(h,[r,h.shape[0]/r,h.shape[1]]),e.dispose()}return h}const n=(0,a.op)({irfft_:f});exports.irfft=n;
},{"../complex":"Iowv","../concat":"dDdq","../imag":"C5d3","../mul":"k2PI","../operation":"JtaO","../real":"cKEu","../reshape":"QI4k","../reverse":"SxGN","../scalar":"Ay42","../slice":"zP07","./ifft":"PxKB"}],"VA1I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.split=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),i=require("./operation");function n(i,n,s=0){const o={x:(0,t.convertToTensor)(i,"x","split")},p={numOrSizeSplits:n,axis:s};return e.ENGINE.runKernel(r.SplitV,o,p)}const s=(0,i.op)({split_:n});exports.split=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"AYvX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rfft=void 0;var e=require("../../util"),r=require("../complex"),t=require("../concat"),s=require("../imag"),l=require("../operation"),p=require("../real"),a=require("../reshape"),i=require("../slice"),o=require("../split"),h=require("../zeros"),u=require("../zeros_like"),n=require("./fft");function f(l,f){(0,e.assert)("float32"===l.dtype,()=>`The dtype for rfft() must be real value but got ${l.dtype}`);let c=l.shape[l.shape.length-1];const q=l.size/c;let g;if(null!=f&&f<c){const e=l.shape.map(e=>0),r=l.shape.map(e=>e);r[l.shape.length-1]=f,g=(0,i.slice)(l,e,r),c=f}else if(null!=f&&f>c){const e=l.shape.map(e=>e);e[l.shape.length-1]=f-c,g=(0,t.concat)([l,(0,h.zeros)(e)],l.shape.length-1),c=f}else g=l;const m=(0,u.zerosLike)(g),d=(0,a.reshape)((0,r.complex)(g,m),[q,c]),x=(0,n.fft)(d),z=Math.floor(c/2)+1,v=(0,p.real)(x),y=(0,s.imag)(x),_=(0,o.split)(v,[z,c-z],v.shape.length-1),b=(0,o.split)(y,[z,c-z],y.shape.length-1),k=g.shape.slice();return k[g.shape.length-1]=z,(0,a.reshape)((0,r.complex)(_[0],b[0]),k)}const c=(0,l.op)({rfft_:f});exports.rfft=c;
},{"../../util":"P6nv","../complex":"Iowv","../concat":"dDdq","../imag":"C5d3","../operation":"JtaO","../real":"cKEu","../reshape":"QI4k","../slice":"zP07","../split":"VA1I","../zeros":"R5fo","../zeros_like":"PDcB","./fft":"e6Hs"}],"iJpu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrt=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n){const o={x:(0,t.convertToTensor)(n,"x","sqrt","float32")};return e.ENGINE.runKernel(r.Sqrt,o)}const s=(0,n.op)({sqrt_:o});exports.sqrt=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"gsmP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifference=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),s=require("../tensor_util_env"),t=require("./broadcast_util"),a=require("./operation");function o(a,o){let i=(0,s.convertToTensor)(a,"a","squaredDifference"),u=(0,s.convertToTensor)(o,"b","squaredDifference");[i,u]=(0,n.makeTypesMatch)(i,u),(0,t.assertAndGetBroadcastShape)(i.shape,u.shape);const c={a:i,b:u};return e.ENGINE.runKernel(r.SquaredDifference,c,{})}const i=(0,a.op)({squaredDifference_:o});exports.squaredDifference=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util":"fpST","../tensor_util_env":"c6yR","./broadcast_util":"Xh9J","./operation":"JtaO"}],"ZVMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squeeze=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./operation"),o=require("./reshape");function t(s,t){const u=(0,e.convertToTensor)(s,"x","squeeze");return(0,o.reshape)(u,(0,r.squeezeShape)(u.shape,t).newShape)}const u=(0,s.op)({squeeze_:t});exports.squeeze=u;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"TWBn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stack=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=a(require("../util")),o=require("./operation");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function u(o,s=0){const a=(0,r.convertToTensorArray)(o,"tensors","stack","string_or_numeric");n.assert(a.length>=1,()=>"Pass at least one tensor to tf.stack"),a.length>0&&n.assert(s<=a[0].rank,()=>"Axis must be <= rank of the tensor");const u=a,i={axis:s};return e.ENGINE.runKernel(t.Pack,u,i)}const i=(0,o.op)({stack_:u});exports.stack=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"e2o4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.step=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o=0){const s={x:(0,t.convertToTensor)(n,"x","step")},p={alpha:o};return e.ENGINE.runKernel(r.Step,s,p)}const s=(0,n.op)({step_:o});exports.step=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"Q58L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),s=require("./operation");function n(s,n,t,o,d=0,c=0,l=0,u=0,a=0){const _={x:(0,i.convertToTensor)(s,"x","stridedSlice","string_or_numeric")},k={begin:n,end:t,strides:o,beginMask:d,endMask:c,ellipsisMask:l,newAxisMask:u,shrinkAxisMask:a};return e.ENGINE.runKernel(r.StridedSlice,_,k)}const t=(0,s.op)({stridedSlice_:n});exports.stridedSlice=t;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"DosY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tan=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","tan","float32")};return e.ENGINE.runKernel(r.Tan,o)}const i=(0,t.op)({tan_:o});exports.tan=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"pBg9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor1d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o){(0,r.assertNonNull)(n);const s=(0,e.inferShape)(n,o);if(1!==s.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,t.makeTensor)(n,null,s,o)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"WnBr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor2d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&2!==o.length)throw new Error("tensor2d() requires shape to have two numbers");const u=(0,e.inferShape)(n,s);if(2!==u.length&&1!==u.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"VxHJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor4d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&4!==o.length)throw new Error("tensor4d() requires shape to have four numbers");const u=(0,e.inferShape)(n,s);if(4!==u.length&&1!==u.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"qXmw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor5d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&5!==o.length)throw new Error("tensor5d() requires shape to have five numbers");const u=(0,e.inferShape)(n,s);if(5!==u.length&&1!==u.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"GISR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor6d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&6!==o.length)throw new Error("tensor6d() requires shape to have six numbers");const u=(0,e.inferShape)(n,s);if(6!==u.length&&1!==u.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return o=o||u,(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor_ops_util":"m0jF"}],"GNrW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topk=void 0;var e=require("../engine"),t=require("../kernel_names"),o=require("../tensor_util_env"),r=require("./operation");function n(r,n=1,s=!0){const i=(0,o.convertToTensor)(r,"x","topk");if(0===i.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const p=i.shape[i.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>p)throw new Error(`'k' passed to topk() must be <= the last dimension (${p}) `+`but got ${n}`);const u={x:i},k={k:n,sorted:s},[a,c]=e.ENGINE.runKernel(t.TopK,u,k);return{values:a,indices:c}}const s=(0,r.op)({topk_:n});exports.topk=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"njSi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.truncatedNormal=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function o(r,o=0,u=1,n,a){if(null!=n&&"bool"===n)throw new Error("Unsupported data type $ { dtype }");const l=new t.MPRandGauss(o,u,n,!0,a),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const u=(0,r.op)({truncatedNormal_:o});exports.truncatedNormal=u;
},{"./buffer":"WyiN","./operation":"JtaO","./rand_util":"jZqu"}],"FtQp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("../util"),i=require("./operation");function t(i,t=0){const s=(0,n.convertToTensor)(i,"x","unique","string_or_numeric");(0,u.assert)(s.rank>0,()=>"The input tensor must be at least 1D");const o={x:s},a={axis:t},[q,c]=e.ENGINE.runKernel(r.Unique,o,a);return{values:q,indices:c}}const s=(0,i.op)({unique_:t});exports.unique=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"GWRE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=void 0;var e=require("../engine"),n=require("../kernel_names"),t=require("../tensor_util_env"),r=require("../util"),s=require("./operation");function o(s,o,u){const m=(0,t.convertToTensor)(s,"x","unsortedSegmentSum"),i=(0,t.convertToTensor)(o,"segmentIds","unsortedSegmentSum","int32");(0,r.assert)((0,r.isInt)(u),()=>"numSegments must be of dtype int");const S={x:m,segmentIds:i},d={numSegments:u};return e.ENGINE.runKernel(n.UnsortedSegmentSum,S,d)}const u=(0,s.op)({unsortedSegmentSum_:o});exports.unsortedSegmentSum=u;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"JDMu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unstack=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function a(o,u=0){const i=(0,r.convertToTensor)(o,"x","unstack","string_or_numeric");n.assert(u>=-i.shape.length&&u<i.shape.length,()=>`Axis = ${u} is not in [-${i.shape.length}, ${i.shape.length})`);const a={value:i},s={axis:u};return e.ENGINE.runKernel(t.Unpack,a,s)}const s=(0,o.op)({unstack_:a});exports.unstack=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","../util":"P6nv","./operation":"JtaO"}],"oIio":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.variable=r;var e=require("../engine");function r(r,t=!0,a,i){return e.ENGINE.makeVariable(r,t,a,i)}
},{"../engine":"Nc3Y"}],"tgEp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereImpl=t;var e=require("../ops/buffer");function t(t,r){const n=[];for(let e=0;e<r.length;e++)r[e]&&n.push(e);const o=(0,e.buffer)(t,"int32"),s=(0,e.buffer)([n.length,t.length],"int32");for(let e=0;e<n.length;e++){const r=o.indexToLoc(n[e]),l=e*t.length;s.values.set(r,l)}return s.toTensor()}
},{"../ops/buffer":"WyiN"}],"md2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereAsync=void 0;var e=require("../backends/where_impl"),r=require("../tensor_util_env");async function o(o){const s=(0,r.convertToTensor)(o,"condition","whereAsync","bool"),n=await s.data(),t=(0,e.whereImpl)(s.shape,n);return o!==s&&s.dispose(),t}const s=o;exports.whereAsync=s;
},{"../backends/where_impl":"tgEp","../tensor_util_env":"c6yR"}],"hPEM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.booleanMaskAsync=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./gather"),s=require("./reshape"),o=require("./squeeze"),n=require("./where_async");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(s,n,i):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}async function c(a,i,c){const u=(0,e.convertToTensor)(a,"tensor","boolMask"),p=(0,e.convertToTensor)(i,"mask","boolMask","bool"),l=null==c?0:c,f=p.rank,h=u.shape;r.assert(f>0,()=>"mask cannot be scalar"),r.assertShapesMatch(h.slice(l,l+f),p.shape,"mask's shape must match the first K dimensions of tensor's shape,");let d=1;for(let e=l;e<l+f;e++)d*=h[e];const y=h.slice(0,l).concat([d],h.slice(l+f)),b=(0,s.reshape)(u,y),k=(0,s.reshape)(p,[-1]),v=await(0,n.whereAsync)(k),M=(0,o.squeeze)(v,[1]),O=(0,t.gather)(b,M,l);return a!==u&&u.dispose(),i!==p&&p.dispose(),M.dispose(),b.dispose(),k.dispose(),v.dispose(),O}const u=c;exports.booleanMaskAsync=u;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./gather":"ESvM","./reshape":"QI4k","./squeeze":"ZVMV","./where_async":"md2p"}],"Twvf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.norm=void 0;var r=require("../tensor_util_env"),e=require("../util"),n=require("./abs"),t=d(require("./axis_util")),i=require("./max"),u=require("./min"),a=require("./operation"),o=require("./pow"),s=require("./reshape"),f=require("./scalar"),l=require("./sqrt"),p=require("./square"),c=require("./sum");function m(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(m=function(r){return r?n:e})(r)}function d(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var n=m(e);if(n&&n.has(r))return n.get(r);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var a=i?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=r[u]}return t.default=r,n&&n.set(r,t),t}function q(n,i="euclidean",u=null,a=!1){const o=b(n=(0,r.convertToTensor)(n,"x","norm"),i,u);let f=o.shape;if(a){const r=(0,e.parseAxisParam)(u,n.shape);f=t.expandShapeToKeepDim(o.shape,r)}return(0,s.reshape)(o,f)}function b(r,e,t=null){if(0===r.rank)return(0,n.abs)(r);if(1!==r.rank&&null===t)return b((0,s.reshape)(r,[-1]),e,t);if(1===r.rank||"number"==typeof t||Array.isArray(t)&&1===t.length){if(1===e)return(0,c.sum)((0,n.abs)(r),t);if(e===1/0)return(0,i.max)((0,n.abs)(r),t);if(e===-1/0)return(0,u.min)((0,n.abs)(r),t);if("euclidean"===e||2===e)return(0,l.sqrt)((0,c.sum)((0,o.pow)((0,n.abs)(r),(0,f.scalar)(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&2===t.length){if(1===e)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[0]),t[1]-1);if(e===1/0)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if(e===-1/0)return(0,u.min)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if("fro"===e||"euclidean"===e)return(0,l.sqrt)((0,c.sum)((0,p.square)(r),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const v=(0,a.op)({norm_:q});exports.norm=v;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./abs":"aE3W","./axis_util":"DsMP","./max":"iipD","./min":"w9We","./operation":"JtaO","./pow":"vt1B","./reshape":"QI4k","./scalar":"Ay42","./sqrt":"iJpu","./square":"mJRX","./sum":"ITAy"}],"HWJh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.movingAverage=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),t=p(require("../util")),n=require("./add"),o=require("./div"),i=require("./mul"),u=require("./operation"),a=require("./pow"),s=require("./scalar"),v=require("./sub");function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function l(u,c,p,l,f=!0){const g=(0,r.convertToTensor)(u,"v","movingAverage"),d=(0,r.convertToTensor)(c,"x","movingAverage"),y=(0,r.convertToTensor)(p,"decay","movingAverage");(0,e.assertTypesMatch)(g,d),t.assert(t.arraysEqual(g.shape,d.shape),()=>"Shape mismatch in v and x");const b=(0,s.scalar)(1),q=(0,v.sub)(b,y);let m=(0,i.mul)((0,v.sub)(d,g),q);if(f){t.assert(null!=l,()=>"When using zeroDebias: true, step is required.");const e=(0,r.convertToTensor)(l,"step","movingAverage");m=(0,o.div)(m,(0,v.sub)(b,(0,a.pow)(y,e)))}return(0,n.add)(g,m)}const f=(0,u.op)({movingAverage_:l});exports.movingAverage=f;
},{"../tensor_util":"fpST","../tensor_util_env":"c6yR","../util":"P6nv","./add":"ZDFV","./div":"D8Fc","./mul":"k2PI","./operation":"JtaO","./pow":"vt1B","./scalar":"Ay42","./sub":"dGex"}],"QGqq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation"),o=i(require("./scatter_nd_util"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function a(n,u,i){const a=(0,r.convertToTensor)(n,"indices","scatterND","int32"),c=(0,r.convertToTensor)(u,"updates","scatterND");o.validateInput(c,a,i);const s={indices:a,updates:c},p={shape:i};return e.ENGINE.runKernel(t.ScatterNd,s,p)}const c=(0,n.op)({scatterND_:a});exports.scatterND=c;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO","./scatter_nd_util":"H15o"}],"wfit":[function(require,module,exports) {
"use strict";function e(e,t,r,s){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+` but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+` but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(r.length!==o)throw new Error("outputShape has incorrect number of elements:,"+` ${r.length}, should be: ${o}.`);const n=t.size;if(0!==t.rank&&(1!==t.rank||n!==a))throw new Error("sparseValues has incorrect shape "+`${t.shape}, should be [] or [${a}]`);if(t.dtype!==s.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateInput=e;
},{}],"vYKY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=void 0;var e=require("../engine"),r=require("../kernel_names"),t=a(require("../ops/sparse_to_dense_util")),n=require("../tensor_util_env"),s=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=s?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function u(s,o,a,u=0){const p=(0,n.convertToTensor)(s,"sparseIndices","sparseToDense","int32"),i=(0,n.convertToTensor)(o,"sparseValues","sparseToDense"),c=(0,n.convertToTensor)(u,"defaultValue","sparseToDense",i.dtype);t.validateInput(p,i,a,c);const l={sparseIndices:p,sparseValues:i,defaultValue:c},f={outputShape:a};return e.ENGINE.runKernel(r.SparseToDense,l,f)}const p=(0,s.op)({sparseToDense_:u});exports.sparseToDense=p;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../ops/sparse_to_dense_util":"wfit","../tensor_util_env":"c6yR","./operation":"JtaO"}],"UkmN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherND=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t,o){const i=(0,n.convertToTensor)(o,"indices","gatherND","int32"),s={params:(0,n.convertToTensor)(t,"x","gatherND","string_or_numeric"),indices:i};return e.ENGINE.runKernel(r.GatherNd,s)}const i=(0,t.op)({gatherND_:o});exports.gatherND=i;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../tensor_util_env":"c6yR","./operation":"JtaO"}],"I4lK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNoiseShape=n;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var u={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(u,o,l):u[o]=e[o]}return u.default=e,n&&n.set(e,u),u}function n(t,r){if(null==r)return t.shape.slice();if(e.arraysEqual(t.shape,r))return r;if(t.shape.length===r.length){const e=[];for(let n=0;n<t.shape.length;n++)null==r[n]&&null!=t.shape[n]?e.push(t.shape[n]):e.push(r[n]);return e}return r}
},{"../util":"P6nv"}],"sFBi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dropout=void 0;var e=require("../tensor"),r=require("../tensor_util_env"),t=l(require("../util")),o=require("./add"),n=require("./div"),u=require("./dropout_util"),i=require("./floor"),a=require("./mul"),s=require("./operation"),f=require("./random_uniform");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function d(s,p,l,d){const c=(0,r.convertToTensor)(s,"x","dropout");if(t.assert("float32"===c.dtype,()=>"x has to be a floating point tensor since it's going to be "+`scaled, but got a ${c.dtype} tensor instead.`),t.assert(p>=0&&p<1,()=>`rate must be a float in the range [0, 1), but got ${p}.`),0===p)return s instanceof e.Tensor?c.clone():c;const b=(0,u.getNoiseShape)(c,l),v=1-p,y=(0,n.div)((0,i.floor)((0,o.add)((0,f.randomUniform)(b,0,1,"float32",d),v)),v);return(0,a.mul)(c,y)}const c=(0,s.op)({dropout_:d});exports.dropout=c;
},{"../tensor":"DTHt","../tensor_util_env":"c6yR","../util":"P6nv","./add":"ZDFV","./div":"D8Fc","./dropout_util":"I4lK","./floor":"XD37","./mul":"k2PI","./operation":"JtaO","./random_uniform":"yl8A"}],"A6ms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosineWindow=e,exports.enclosingPowerOfTwo=t;var o=require("./tensor1d");function t(o){return Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2))))}function e(t,e,r){const n=1-t%2,s=new Float32Array(t);for(let o=0;o<t;++o){const a=2*Math.PI*o/(t+n-1);s[o]=e-r*Math.cos(a)}return(0,o.tensor1d)(s,"float32")}
},{"./tensor1d":"pBg9"}],"JOMU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inTopKAsync=void 0;var e=require("../tensor_util_env"),t=require("../util"),s=require("./tensor");async function r(r,n,o=1){const a=(0,e.convertToTensor)(r,"predictions","inTopK"),i=(0,e.convertToTensor)(n,"targets","inTopK");(0,t.assert)(a.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+`but got ${a.rank}`),(0,t.assert)(a.rank-1===i.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+`${a.rank} and targets rank ${i.rank}`),(0,t.assertShapesMatch)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const p=a.shape[a.shape.length-1];(0,t.assert)(o>0&&o<=p,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+`dimension (${p}), but got ${o}`);const h=await a.data(),c=await i.data(),[l,d]=[h.length/p,p],u=(0,t.getTypedArrayFromDType)("bool",l);for(let e=0;e<l;e++){const t=e*d,s=h.subarray(t,t+d),r=[];for(let e=0;e<s.length;e++)r.push({value:s[e],index:e});r.sort((e,t)=>t.value-e.value),u[e]=0;for(let n=0;n<o;n++)if(r[n].index===c[e]){u[e]=1;break}}return r!==a&&a.dispose(),n!==i&&i.dispose(),(0,s.tensor)(u,i.shape,"bool")}const n=r;exports.inTopKAsync=n;
},{"../tensor_util_env":"c6yR","../util":"P6nv","./tensor":"P2QC"}],"JjEd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=i(require("../util")),n=require("./operation"),o=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var p=o?Object.getOwnPropertyDescriptor(e,i):null;p&&(p.get||p.set)?Object.defineProperty(n,i,p):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function p(n,a,i,p,s,u="NHWC",l){let c=n;3===n.rank&&(c=(0,o.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let d=a;3===d.rank&&(d=(0,o.reshape)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),t.assert(4===c.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${c.shape}.`),t.assert(4===d.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${d.shape}.`),t.assert(4===i.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${i}.`);const h="NHWC"===u?c.shape[3]:c.shape[1],f="NHWC"===u?d.shape[3]:d.shape[1];t.assert(h===i[2],()=>`Error in conv2dDerFilter: depth of input ${h}) must `+`match input depth in filter (${i[2]}.`),t.assert(f===i[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must `+`match output depth for filter (${i[3]}).`),null!=l&&t.assert(t.isInt(s),()=>"Error in conv2dDerFilter: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${s}.`);const v={x:c,dy:d},b={strides:p,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:i};return e.ENGINE.runKernel(r.Conv2DBackpropFilter,v,b)}const s=(0,n.op)({conv2DBackpropFilter_:p});exports.conv2DBackpropFilter=s;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","../util":"P6nv","./operation":"JtaO","./reshape":"QI4k"}],"mypO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyActivation=g,exports.getFusedBiasGradient=y,exports.getFusedDyActivation=d,exports.shouldFuse=void 0;var e=c(require("./broadcast_util")),r=require("./elu"),t=require("./leaky_relu"),u=require("./mul"),n=require("./prelu"),i=require("./relu"),o=require("./relu6"),l=require("./reshape"),a=require("./sigmoid"),s=require("./step"),f=require("./sum");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function c(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(u,i,o):u[i]=e[i]}return u.default=e,t&&t.set(e,u),u}function d(e,r,t){if(null==t||"linear"===t)return e;if("relu"===t)return(0,u.mul)(e,(0,s.step)(r));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function y(r,t){let u=t;const n=e.getReductionAxes(r.shape,t.shape);return n.length>0&&(u=(0,f.sum)(u,n)),(0,l.reshape)(u,r.shape)}function g(e,u,l,s){if("linear"===u)return e;if("relu"===u)return(0,i.relu)(e);if("elu"===u)return(0,r.elu)(e);if("relu6"===u)return(0,o.relu6)(e);if("prelu"===u)return(0,n.prelu)(e,l);if("leakyrelu"===u)return(0,t.leakyRelu)(e,s);if("sigmoid"===u)return(0,a.sigmoid)(e);throw new Error(`Unknown fused activation ${u}.`)}const h=(e,r)=>{return!(e>0)||"linear"===r};exports.shouldFuse=h;
},{"./broadcast_util":"Xh9J","./elu":"a7Il","./leaky_relu":"hUKE","./mul":"k2PI","./prelu":"mkuj","./relu":"SJP3","./relu6":"MNkg","./reshape":"QI4k","./sigmoid":"yARQ","./step":"e2o4","./sum":"ITAy"}],"MWgE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../../engine"),r=require("../../gradients"),t=require("../../kernel_names"),n=require("../../tensor_util"),a=require("../../tensor_util_env"),o=g(require("../../util")),s=require("../add"),i=g(require("../broadcast_util")),u=require("../conv2d"),d=require("../conv2d_backprop_filter"),p=require("../conv2d_backprop_input"),l=g(require("../conv_util")),c=require("../fused_util"),f=require("../operation"),v=require("../reshape");function h(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(h=function(e){return e?t:r})(e)}function g(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function b({x:f,filter:h,strides:g,pad:b,dataFormat:k="NHWC",dilations:y=[1,1],dimRoundingMode:m,bias:_,activation:q="linear",preluActivationWeights:E,leakyreluAlpha:D}){if(q=q||"linear",!1===(0,c.shouldFuse)(e.ENGINE.state.gradientDepth,q)){let e=(0,u.conv2d)(f,h,g,b,k,y,m);return null!=_&&(e=(0,s.add)(e,_)),(0,c.applyActivation)(e,q,E,D)}const O=(0,a.convertToTensor)(f,"x","conv2d","float32"),F=(0,a.convertToTensor)(h,"filter","conv2d","float32");let $=O,A=!1;3===O.rank&&(A=!0,$=(0,v.reshape)(O,[1,O.shape[0],O.shape[1],O.shape[2]])),o.assert(4===$.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+`${$.rank}.`),o.assert(4===F.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+`${F.rank}.`),null!=m&&o.assert(o.isInt(b),()=>"Error in fused conv2d: pad must be an integer when using, "+`dimRoundingMode ${m} but got pad ${b}.`),o.assert($.shape[3]===F.shape[2],()=>`Error in conv2d: depth of input (${$.shape[3]}) must match `+`input depth for filter ${F.shape[2]}.`),o.assert(l.eitherStridesOrDilationsAreOne(g,y),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${g} and dilations '${y}'`),o.assert("NHWC"===k,()=>`Error in conv2d: got dataFormat of ${k} but only NHWC is currently supported.`);const G=l.computeConv2DInfo($.shape,F.shape,g,y,b,m);let M,N;null!=_&&(M=(0,a.convertToTensor)(_,"bias","fused conv2d"),[M]=(0,n.makeTypesMatch)(M,O),i.assertAndGetBroadcastShape(G.outShape,M.shape)),null!=E&&(N=(0,a.convertToTensor)(E,"prelu weights","fused conv2d"));const T=(e,r)=>{const[t,n,a,s]=r,i=(0,c.getFusedDyActivation)(e,a,q);o.assert(l.tupleValuesAreOne(y),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${y}'`);const u=[(0,p.conv2DBackpropInput)(n.shape,i,t,g,b),(0,d.conv2DBackpropFilter)(n,i,t.shape,g,b)];if(null!=s){const e=(0,c.getFusedBiasGradient)(s,i);u.push(e)}return u},W={x:$,filter:F,bias:M,preluActivationWeights:N},j={strides:g,pad:b,dataFormat:k,dilations:y,dimRoundingMode:m,activation:q,leakyreluAlpha:D};if(null==_){return(0,r.customGrad)((r,n,a)=>{let o=e.ENGINE.runKernel(t.FusedConv2D,W,j);return a([n,r,o]),A&&(o=(0,v.reshape)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:T}})($,F)}return(0,r.customGrad)((r,n,a,o)=>{let s=e.ENGINE.runKernel(t.FusedConv2D,W,j);return o([n,r,s,a]),A&&(s=(0,v.reshape)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:T}})($,F,M)}const k=(0,f.op)({fusedConv2d_:b});exports.conv2d=k;
},{"../../engine":"Nc3Y","../../gradients":"yPDw","../../kernel_names":"sdEe","../../tensor_util":"fpST","../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../broadcast_util":"Xh9J","../conv2d":"oJQk","../conv2d_backprop_filter":"JjEd","../conv2d_backprop_input":"GLx7","../conv_util":"Evju","../fused_util":"mypO","../operation":"JtaO","../reshape":"QI4k"}],"pXLg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),p=require("./operation"),t=require("./reshape");function i(p,i,a,s,o,n=[1,1],d){let h=p;3===p.rank&&(h=(0,t.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]));let l=i;3===l.rank&&(l=(0,t.reshape)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const u={x:h,dy:l},v={strides:s,pad:o,dimRoundingMode:d,dilations:n,filterShape:a};return e.ENGINE.runKernel(r.DepthwiseConv2dNativeBackpropFilter,u,v)}const a=(0,p.op)({depthwiseConv2dNativeBackpropFilter_:i});exports.depthwiseConv2dNativeBackpropFilter=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","./operation":"JtaO","./reshape":"QI4k"}],"mUFN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=void 0;var e=require("../engine"),p=require("../kernel_names"),r=require("./operation"),t=require("./reshape");function n(r,n,a,i,s,o=[1,1],d){let u=n,h=!1;3===n.rank&&(h=!0,u=(0,t.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2]]));const v={dy:u,filter:a},c={strides:i,pad:s,dimRoundingMode:d,dilations:o,inputShape:r},l=e.ENGINE.runKernel(p.DepthwiseConv2dNativeBackpropInput,v,c);return h?(0,t.reshape)(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const a=(0,r.op)({depthwiseConv2dNativeBackpropInput_:n});exports.depthwiseConv2dNativeBackpropInput=a;
},{"../engine":"Nc3Y","../kernel_names":"sdEe","./operation":"JtaO","./reshape":"QI4k"}],"NlMI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../../engine"),t=require("../../gradients"),r=require("../../kernel_names"),n=require("../../tensor_util"),i=require("../../tensor_util_env"),s=w(require("../../util")),a=require("../add"),o=w(require("../broadcast_util")),u=w(require("../conv_util")),d=require("../depthwise_conv2d"),p=require("../depthwise_conv2d_native_backprop_filter"),l=require("../depthwise_conv2d_native_backprop_input"),h=require("../fused_util"),c=require("../operation"),v=require("../reshape");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function g({x:c,filter:f,strides:w,pad:g,dataFormat:b="NHWC",dilations:_=[1,1],dimRoundingMode:k,bias:C,activation:m="linear",preluActivationWeights:y,leakyreluAlpha:q}){if(!1===(0,h.shouldFuse)(e.ENGINE.state.gradientDepth,m)){let e=(0,d.depthwiseConv2d)(c,f,w,g,b,_,k);return null!=C&&(e=(0,a.add)(e,C)),(0,h.applyActivation)(e,m,y,q)}const E=(0,i.convertToTensor)(c,"x","depthwiseConv2d","float32"),O=(0,i.convertToTensor)(f,"filter","depthwiseConv2d","float32");let D=E,F=!1;3===E.rank&&(F=!0,D=(0,v.reshape)(E,[1,E.shape[0],E.shape[1],E.shape[2]])),s.assert(4===D.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+`rank ${D.rank}.`),s.assert(4===O.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+`but got rank ${O.rank}.`),s.assert(D.shape[3]===O.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+`(${D.shape[3]}) must match the inChannels dimension in `+`filter ${O.shape[2]}.`),null==_&&(_=[1,1]),s.assert(u.eitherStridesOrDilationsAreOne(w,_),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+`be 1. Got strides ${w} and dilations '${_}'`),null!=k&&s.assert(s.isInt(g),()=>"Error in fused depthwiseConv2d: pad must be an integer when "+`using dimRoundingMode ${k} but got pad ${g}.`);const A=u.computeConv2DInfo(D.shape,O.shape,w,_,g,k,!0);let G,M;null!=C&&(G=(0,i.convertToTensor)(C,"bias","fused conv2d"),[G]=(0,n.makeTypesMatch)(G,E),o.assertAndGetBroadcastShape(A.outShape,G.shape)),null!=y&&(M=(0,i.convertToTensor)(y,"prelu weights","fused depthwiseConv2d"));const N=(e,t)=>{s.assert(u.tupleValuesAreOne(_),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+`'${_}'`);const[r,n,i,a]=t,o=(0,h.getFusedDyActivation)(e,i,m),d=(0,l.depthwiseConv2dNativeBackpropInput)(n.shape,o,r,w,g,_,k),c=(0,p.depthwiseConv2dNativeBackpropFilter)(n,o,r.shape,w,g,_,k);if(null!=a){return[d,c,(0,h.getFusedBiasGradient)(G,o)]}return[d,c]},T={x:D,filter:O,bias:G,preluActivationWeights:M},$={strides:w,pad:g,dataFormat:b,dilations:_,dimRoundingMode:k,activation:m,leakyreluAlpha:q};if(null==C){return(0,t.customGrad)((t,n,i)=>{let s=e.ENGINE.runKernel(r.FusedDepthwiseConv2D,T,$);return i([n,t,s]),F&&(s=(0,v.reshape)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:N}})(D,O)}return(0,t.customGrad)((t,n,i,s)=>{let a=e.ENGINE.runKernel(r.FusedDepthwiseConv2D,T,$);return s([n,t,a,i]),F&&(a=(0,v.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}})(D,O,G)}const b=(0,c.op)({fusedDepthwiseConv2d_:g});exports.depthwiseConv2d=b;
},{"../../engine":"Nc3Y","../../gradients":"yPDw","../../kernel_names":"sdEe","../../tensor_util":"fpST","../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../broadcast_util":"Xh9J","../conv_util":"Evju","../depthwise_conv2d":"Kahd","../depthwise_conv2d_native_backprop_filter":"pXLg","../depthwise_conv2d_native_backprop_input":"mUFN","../fused_util":"mypO","../operation":"JtaO","../reshape":"QI4k"}],"jyJT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../../engine"),r=require("../../gradients"),a=require("../../kernel_names"),t=require("../../tensor_util"),s=require("../../tensor_util_env"),n=d(require("../../util")),u=require("../add"),o=d(require("../broadcast_util")),i=require("../fused_util"),l=require("../mat_mul"),p=require("../operation"),c=require("../reshape");function h(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:r})(e)}function d(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(r);if(a&&a.has(e))return a.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=s?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(t,n,u):t[n]=e[n]}return t.default=e,a&&a.set(e,t),t}function f({a:p,b:h,transposeA:d=!1,transposeB:f=!1,bias:m,activation:M="linear",preluActivationWeights:k,leakyreluAlpha:v}){if(!1===(0,i.shouldFuse)(e.ENGINE.state.gradientDepth,M)){let e=(0,l.matMul)(p,h,d,f);return null!=m&&(e=(0,u.add)(e,m)),(0,i.applyActivation)(e,M,k,v)}let y=(0,s.convertToTensor)(p,"a","fused matMul"),g=(0,s.convertToTensor)(h,"b","fused matMul");[y,g]=(0,t.makeTypesMatch)(y,g);const b=d?y.shape[y.rank-2]:y.shape[y.rank-1],_=f?g.shape[g.rank-1]:g.shape[g.rank-2],q=d?y.shape[y.rank-1]:y.shape[y.rank-2],T=f?g.shape[g.rank-2]:g.shape[g.rank-1],$=y.shape.slice(0,-2),A=g.shape.slice(0,-2),E=n.sizeFromShape($),F=n.sizeFromShape(A);n.assert(y.rank>=2&&g.rank>=2&&y.rank===g.rank,()=>"Error in fused matMul: inputs must have the same rank of at "+`least 2, got ranks ${y.rank} and ${g.rank}.`),n.assert(n.arraysEqual($,A),()=>`Error in fused matMul: outer dimensions (${$}) and (`+`${A}) of Tensors with shapes ${y.shape} and `+`${g.shape} must match.`),n.assert(b===_,()=>`Error in fused matMul: inner shapes (${b}) and (`+`${_}) of Tensors with shapes ${y.shape} and `+`${g.shape} and transposeA=${d}`+` and transposeB=${f} must match.`);const O=y.shape.slice(0,-2).concat([q,T]),w=d?(0,c.reshape)(y,[E,b,q]):(0,c.reshape)(y,[E,q,b]),j=f?(0,c.reshape)(g,[F,T,_]):(0,c.reshape)(g,[F,_,T]);let G,N;null!=m&&(G=(0,s.convertToTensor)(m,"bias","fused matMul"),[G]=(0,t.makeTypesMatch)(G,y),o.assertAndGetBroadcastShape(O,G.shape)),null!=k&&(N=(0,s.convertToTensor)(k,"prelu weights","fused matMul"));const P=(e,r)=>{const[a,t,s,n]=r,u=(0,i.getFusedDyActivation)((0,c.reshape)(e,s.shape),s,M);let o,p;if(d||f?!d&&f?(o=(0,l.matMul)(u,t,!1,!1),p=(0,l.matMul)(u,a,!0,!1)):d&&!f?(o=(0,l.matMul)(t,u,!1,!0),p=(0,l.matMul)(a,u,!1,!1)):(o=(0,l.matMul)(t,u,!0,!0),p=(0,l.matMul)(u,a,!0,!0)):(o=(0,l.matMul)(u,t,!1,!0),p=(0,l.matMul)(a,u,!0,!1)),null!=m){return[o,p,(0,i.getFusedBiasGradient)(n,u)]}return[o,p]},B={a:w,b:j,bias:G,preluActivationWeights:N},W={transposeA:d,transposeB:f,activation:M,leakyreluAlpha:v};if(null==m){return(0,r.customGrad)((r,t,s)=>{const n=e.ENGINE.runKernel(a._FusedMatMul,B,W);return s([r,t,n]),{value:(0,c.reshape)(n,O),gradFunc:P}})(w,j)}return(0,r.customGrad)((r,t,s,n)=>{const u=e.ENGINE.runKernel(a._FusedMatMul,B,W);return n([r,t,u,s]),{value:(0,c.reshape)(u,O),gradFunc:P}})(w,j,G)}const m=(0,p.op)({fusedMatMul_:f});exports.matMul=m;
},{"../../engine":"Nc3Y","../../gradients":"yPDw","../../kernel_names":"sdEe","../../tensor_util":"fpST","../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../broadcast_util":"Xh9J","../fused_util":"mypO","../mat_mul":"mMWq","../operation":"JtaO","../reshape":"QI4k"}],"nQCt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return e.conv2d}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return r.depthwiseConv2d}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return t.matMul}});var e=require("./fused/conv2d"),r=require("./fused/depthwise_conv2d"),t=require("./fused/mat_mul");
},{"./fused/conv2d":"MWgE","./fused/depthwise_conv2d":"NlMI","./fused/mat_mul":"jyJT"}],"lH5U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hammingWindow=void 0;var e=require("../operation"),i=require("../signal_ops_util");function o(e){return(0,i.cosineWindow)(e,.54,.46)}const n=(0,e.op)({hammingWindow_:o});exports.hammingWindow=n;
},{"../operation":"JtaO","../signal_ops_util":"A6ms"}],"BcoI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hannWindow=void 0;var e=require("../operation"),n=require("../signal_ops_util");function o(e){return(0,n.cosineWindow)(e,.5,.5)}const i=(0,e.op)({hannWindow_:o});exports.hannWindow=i;
},{"../operation":"JtaO","../signal_ops_util":"A6ms"}],"Qvnk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.frame=void 0;var e=require("../concat"),r=require("../fill"),s=require("../operation"),t=require("../reshape"),i=require("../slice"),o=require("../tensor2d");function c(s,c,n,u=!1,l=0){let a=0;const f=[];for(;a+c<=s.size;)f.push((0,i.slice)(s,a,c)),a+=n;if(u)for(;a<s.size;){const t=a+c-s.size,o=(0,e.concat)([(0,i.slice)(s,a,c-t),(0,r.fill)([t],l)]);f.push(o),a+=n}return 0===f.length?(0,o.tensor2d)([],[0,c]):(0,t.reshape)((0,e.concat)(f),[f.length,c])}const n=(0,s.op)({frame_:c});exports.frame=n;
},{"../concat":"dDdq","../fill":"e6pp","../operation":"JtaO","../reshape":"QI4k","../slice":"zP07","../tensor2d":"WnBr"}],"yVfo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stft=void 0;var e=require("../mul"),r=require("../operation"),t=require("../signal_ops_util"),o=require("../spectral/rfft"),n=require("./frame"),i=require("./hann_window");function s(r,s,u,f,l=i.hannWindow){null==f&&(f=(0,t.enclosingPowerOfTwo)(s));const a=(0,n.frame)(r,s,u),p=(0,e.mul)(a,l(s));return(0,o.rfft)(p,f)}const u=(0,r.op)({stft_:s});exports.stft=u;
},{"../mul":"k2PI","../operation":"JtaO","../signal_ops_util":"A6ms","../spectral/rfft":"AYvX","./frame":"Qvnk","./hann_window":"BcoI"}],"p8Dt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResize=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),n=a(require("../../util")),o=require("../operation");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function i(o,s,a,i,u="bilinear",p=0){const c=(0,t.convertToTensor)(o,"image","cropAndResize"),l=(0,t.convertToTensor)(s,"boxes","cropAndResize","float32"),b=(0,t.convertToTensor)(a,"boxInd","cropAndResize","int32"),d=l.shape[0];n.assert(4===c.rank,()=>"Error in cropAndResize: image must be rank 4,"+`but got rank ${c.rank}.`),n.assert(2===l.rank&&4===l.shape[1],()=>`Error in cropAndResize: boxes must be have size [${d},4] `+`but had shape ${l.shape}.`),n.assert(1===b.rank&&b.shape[0]===d,()=>`Error in cropAndResize: boxInd must be have size [${d}] `+`but had shape ${l.shape}.`),n.assert(2===i.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+`length ${i.length}.`),n.assert(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),n.assert("bilinear"===u||"nearest"===u,()=>`method must be bilinear or nearest, but was ${u}`);const f={image:c,boxes:l,boxInd:b},h={method:u,extrapolationValue:p,cropSize:i};return e.ENGINE.runKernel(r.CropAndResize,f,h)}const u=(0,o.op)({cropAndResize_:i});exports.cropAndResize=u;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO"}],"JzVv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRight=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=u(require("../../util")),i=require("../operation");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=i?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function f(i){const o=(0,r.convertToTensor)(i,"image","flipLeftRight","float32");n.assert(4===o.rank,()=>"Error in flipLeftRight: image must be rank 4,"+`but got rank ${o.rank}.`);const u={image:o};return e.ENGINE.runKernel(t.FlipLeftRight,u,{})}const a=(0,i.op)({flipLeftRight_:f});exports.flipLeftRight=a;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO"}],"Ec4a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.grayscaleToRGB=void 0;var e=require("../../tensor_util_env"),r=o(require("../../util")),t=require("../operation"),a=require("../tile");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,t&&t.set(e,a),a}function i(t){const n=(0,e.convertToTensor)(t,"image","grayscaleToRGB"),o=n.rank-1,i=n.shape[o];r.assert(n.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, "+`but got rank ${n.rank}.`),r.assert(1===i,()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+`should be size 1, but got size ${i}.`);const s=new Array(n.rank);return s.fill(1,0,o),s[o]=3,(0,a.tile)(n,s)}const s=(0,t.op)({grayscaleToRGB_:i});exports.grayscaleToRGB=s;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO","../tile":"mfii"}],"GZBW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffset=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=a(require("../../util")),o=require("../operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var f=o?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(n,a,f):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function f(o,i,a=0,f=.5){const u=(0,r.convertToTensor)(o,"image","rotateWithOffset","float32");n.assert(4===u.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+`but got rank ${u.rank}.`);const s={image:u},c={radians:i,fillValue:a,center:f};return e.ENGINE.runKernel(t.RotateWithOffset,s,c)}const u=(0,o.op)({rotateWithOffset_:f});exports.rotateWithOffset=u;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO"}],"Pk0Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppSanityCheck=s;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(t=function(e){return e?s:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=t(r);if(s&&s.has(e))return s.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,s&&s.set(e,n),n}function s(t,r,s,n,a,o){null==n&&(n=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);const u=t.shape[0];return s=Math.min(s,u),e.assert(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),e.assert(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),e.assert(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),e.assert(1===r.rank,()=>"scores must be a 1D tensor"),e.assert(r.shape[0]===u,()=>`scores has incompatible shape with boxes. Expected ${u}, `+`but was ${r.shape[0]}`),e.assert(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:s,iouThreshold:n,scoreThreshold:a,softNmsSigma:o}}
},{"../util":"P6nv"}],"KRSK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppression=void 0;var e=require("../../engine"),o=require("../../kernel_names"),r=require("../../tensor_util_env"),n=require("../nonmax_util"),s=require("../operation");function u(s,u,i,t=.5,p=Number.NEGATIVE_INFINITY){const a=(0,r.convertToTensor)(s,"boxes","nonMaxSuppression","float32"),x=(0,r.convertToTensor)(u,"scores","nonMaxSuppression","float32"),c=(0,n.nonMaxSuppSanityCheck)(a,x,i,t,p),l={maxOutputSize:i=c.maxOutputSize,iouThreshold:t=c.iouThreshold,scoreThreshold:p=c.scoreThreshold};return e.ENGINE.runKernel(o.NonMaxSuppressionV3,{boxes:a,scores:x},l)}const i=(0,s.op)({nonMaxSuppression_:u});exports.nonMaxSuppression=i;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../operation":"JtaO"}],"vvmL":[function(require,module,exports) {
"use strict";function e(e,n,r){const o=t(e,n,r),c=o<0?-(o+1):o;e.splice(c,0,n)}function t(e,t,o){return r(e,t,o||n)}function n(e,t){return e>t?1:e<t?-1:0}function r(e,t,n){let r=0,o=e.length,c=0,s=!1;for(;r<o;){const u=n(t,e[c=r+(o-r>>>1)]);u>0?r=c+1:(o=c,s=!u)}return s?r:-r-1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryInsert=e,exports.binarySearch=t;
},{}],"zkpa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3Impl=n,exports.nonMaxSuppressionV4Impl=r,exports.nonMaxSuppressionV5Impl=t;var e=require("./non_max_suppression_util");function n(e,n,r,t,o){return s(e,n,r,t,o,0)}function r(e,n,r,t,o,a){return s(e,n,r,t,o,0,!1,a,!0)}function t(e,n,r,t,o,a){return s(e,n,r,t,o,a,!0)}function s(n,r,t,s,c,i,p=!1,x=!1,h=!1){const l=[];for(let e=0;e<r.length;e++)r[e]>c&&l.push({score:r[e],boxIndex:e,suppressBeginIndex:0});l.sort(u);const M=i>0?-.5/i:0,m=[],f=[];for(;m.length<t&&l.length>0;){const r=l.pop(),{score:t,boxIndex:i,suppressBeginIndex:p}=r;if(t<c)break;let x=!1;for(let e=m.length-1;e>=p;--e){const t=o(n,i,m[e]);if(t>=s){x=!0;break}if(r.score=r.score*a(s,M,t),r.score<=c)break}r.suppressBeginIndex=m.length,x||(r.score===t?(m.push(i),f.push(r.score)):r.score>c&&(0,e.binaryInsert)(l,r,u))}const d=m.length,I=t-d;x&&I>0&&(m.push(...new Array(I).fill(0)),f.push(...new Array(I).fill(0)));const b={selectedIndices:m};return p&&(b.selectedScores=f),h&&(b.validOutputs=d),b}function o(e,n,r){const t=e.subarray(4*n,4*n+4),s=e.subarray(4*r,4*r+4),o=Math.min(t[0],t[2]),a=Math.min(t[1],t[3]),u=Math.max(t[0],t[2]),c=Math.max(t[1],t[3]),i=Math.min(s[0],s[2]),p=Math.min(s[1],s[3]),x=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),l=(u-o)*(c-a),M=(x-i)*(h-p);if(l<=0||M<=0)return 0;const m=Math.max(o,i),f=Math.max(a,p),d=Math.min(u,x),I=Math.min(c,h),b=Math.max(d-m,0)*Math.max(I-f,0);return b/(l+M-b)}function a(e,n,r){const t=Math.exp(n*r*r);return r<=e?t:0}function u(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}
},{"./non_max_suppression_util":"vvmL"}],"eCHR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),n=require("../../tensor_util_env"),s=require("../nonmax_util"),o=require("../tensor1d");async function r(r,t,i,p=.5,u=Number.NEGATIVE_INFINITY){const a=(0,n.convertToTensor)(r,"boxes","nonMaxSuppressionAsync"),c=(0,n.convertToTensor)(t,"scores","nonMaxSuppressionAsync"),d=(0,s.nonMaxSuppSanityCheck)(a,c,i,p,u);i=d.maxOutputSize,p=d.iouThreshold,u=d.scoreThreshold;const x=await Promise.all([a.data(),c.data()]),l=x[0],_=x[1],{selectedIndices:S}=(0,e.nonMaxSuppressionV3Impl)(l,_,i,p,u);return a!==r&&a.dispose(),c!==t&&c.dispose(),(0,o.tensor1d)(S,"int32")}const t=r;exports.nonMaxSuppressionAsync=t;
},{"../../backends/non_max_suppression_impl":"zkpa","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../tensor1d":"pBg9"}],"Ym4G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScore=void 0;var e=require("../../engine"),o=require("../../kernel_names"),r=require("../../tensor_util_env"),s=require("../nonmax_util"),n=require("../operation");function i(n,i,t,u=.5,p=Number.NEGATIVE_INFINITY,c=0){const a=(0,r.convertToTensor)(n,"boxes","nonMaxSuppression"),S=(0,r.convertToTensor)(i,"scores","nonMaxSuppression"),x=(0,s.nonMaxSuppSanityCheck)(a,S,t,u,p,c),h={boxes:a,scores:S},l={maxOutputSize:t=x.maxOutputSize,iouThreshold:u=x.iouThreshold,scoreThreshold:p=x.scoreThreshold,softNmsSigma:c=x.softNmsSigma},d=e.ENGINE.runKernel(o.NonMaxSuppressionV5,h,l);return{selectedIndices:d[0],selectedScores:d[1]}}const t=(0,n.op)({nonMaxSuppressionWithScore_:i});exports.nonMaxSuppressionWithScore=t;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../operation":"JtaO"}],"q1EX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScoreAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),s=require("../../tensor_util_env"),n=require("../nonmax_util"),o=require("../tensor1d");async function r(r,t,i,c=.5,p=Number.NEGATIVE_INFINITY,a=0){const u=(0,s.convertToTensor)(r,"boxes","nonMaxSuppressionAsync"),d=(0,s.convertToTensor)(t,"scores","nonMaxSuppressionAsync"),l=(0,n.nonMaxSuppSanityCheck)(u,d,i,c,p,a);i=l.maxOutputSize,c=l.iouThreshold,p=l.scoreThreshold,a=l.softNmsSigma;const x=await Promise.all([u.data(),d.data()]),S=x[0],m=x[1],{selectedIndices:_,selectedScores:T}=(0,e.nonMaxSuppressionV5Impl)(S,m,i,c,p,a);return u!==r&&u.dispose(),d!==t&&d.dispose(),{selectedIndices:(0,o.tensor1d)(_,"int32"),selectedScores:(0,o.tensor1d)(T)}}const t=r;exports.nonMaxSuppressionWithScoreAsync=t;
},{"../../backends/non_max_suppression_impl":"zkpa","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../tensor1d":"pBg9"}],"Su3I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPadded=void 0;var e=require("../../engine"),o=require("../../kernel_names"),n=require("../../tensor_util_env"),r=require("../nonmax_util"),s=require("../operation");function u(s,u,i,t=.5,p=Number.NEGATIVE_INFINITY,a=!1){const d=(0,n.convertToTensor)(s,"boxes","nonMaxSuppression"),x=(0,n.convertToTensor)(u,"scores","nonMaxSuppression"),c=(0,r.nonMaxSuppSanityCheck)(d,x,i,t,p,null),l={boxes:d,scores:x},S={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:a},T=e.ENGINE.runKernel(o.NonMaxSuppressionV4,l,S);return{selectedIndices:T[0],validOutputs:T[1]}}const i=(0,s.op)({nonMaxSuppressionPadded_:u});exports.nonMaxSuppressionPadded=i;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../operation":"JtaO"}],"KZ0X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPaddedAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),s=require("../../tensor_util_env"),n=require("../nonmax_util"),o=require("../scalar"),r=require("../tensor1d");async function t(t,i,a,u=.5,p=Number.NEGATIVE_INFINITY,d=!1){const c=(0,s.convertToTensor)(t,"boxes","nonMaxSuppressionAsync"),l=(0,s.convertToTensor)(i,"scores","nonMaxSuppressionAsync"),x=(0,n.nonMaxSuppSanityCheck)(c,l,a,u,p,null),_=x.maxOutputSize,v=x.iouThreshold,S=x.scoreThreshold,[T,m]=await Promise.all([c.data(),l.data()]),{selectedIndices:y,validOutputs:I}=(0,e.nonMaxSuppressionV4Impl)(T,m,_,v,S,d);return c!==t&&c.dispose(),l!==i&&l.dispose(),{selectedIndices:(0,r.tensor1d)(y,"int32"),validOutputs:(0,o.scalar)(I,"int32")}}const i=t;exports.nonMaxSuppressionPaddedAsync=i;
},{"../../backends/non_max_suppression_impl":"zkpa","../../tensor_util_env":"c6yR","../nonmax_util":"Pk0Y","../scalar":"Ay42","../tensor1d":"pBg9"}],"XoGL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=void 0;var e=require("../../engine"),r=require("../../kernel_names"),n=require("../../tensor_util_env"),t=o(require("../../util")),i=require("../operation"),a=require("../reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(r);if(n&&n.has(e))return n.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(t,a,o):t[a]=e[a]}return t.default=e,n&&n.set(e,t),t}function u(i,s,o=!1,u=!1){const l=(0,n.convertToTensor)(i,"images","resizeBilinear");t.assert(3===l.rank||4===l.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+`rank ${l.rank}.`),t.assert(2===s.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+`${s}.`),t.assert(!1===u||!1===o,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let p=l,f=!1;3===l.rank&&(f=!0,p=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const[]=s,c={images:p},h={alignCorners:o,halfPixelCenters:u,size:s},g=e.ENGINE.runKernel(r.ResizeBilinear,c,h);return f?(0,a.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const l=(0,i.op)({resizeBilinear_:u});exports.resizeBilinear=l;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO","../reshape":"QI4k"}],"Lavm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),s=o(require("../../util")),n=require("../operation"),a=require("../reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,t&&t.set(e,s),s}function u(n,i,o=!1,u=!1){const p=(0,t.convertToTensor)(n,"images","resizeNearestNeighbor");s.assert(3===p.rank||4===p.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+`rank ${p.rank}.`),s.assert(2===i.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+`${i}.`),s.assert("float32"===p.dtype||"int32"===p.dtype,()=>"`images` must have `int32` or `float32` as dtype"),s.assert(!1===u||!1===o,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let l=p,f=!1;3===p.rank&&(f=!0,l=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]));const[]=i,h={images:l},c={alignCorners:o,halfPixelCenters:u,size:i},g=e.ENGINE.runKernel(r.ResizeNearestNeighbor,h,c);return f?(0,a.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const p=(0,n.op)({resizeNearestNeighbor_:u});exports.resizeNearestNeighbor=p;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO","../reshape":"QI4k"}],"NPov":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.threshold=void 0;var e=require("../tensor1d"),r=require("../operation"),t=require("../cast"),s=require("../split"),u=require("../bincount"),n=require("../less_equal"),o=require("../greater"),i=require("../sum"),a=require("../add"),l=require("../mul"),d=require("../div"),c=require("../sub"),p=require("../round"),f=require("../where"),h=require("../fill"),m=require("../slice"),b=require("../range"),q=require("../tensor"),y=w(require("../../util")),g=require("../../tensor_util_env");function v(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(v=function(e){return e?t:r})(e)}function w(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v(r);if(t&&t.has(e))return t.get(e);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=u?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}function O(r,i="binary",d=!1,c=.5){const f=(0,g.convertToTensor)(r,"image","threshold"),h=f.shape[0]*f.shape[1];let m,b,v,w,O=(0,l.mul)((0,e.tensor1d)([c]),255);if(y.assert(3===f.rank,()=>"Error in threshold: image must be rank 3,"+`but got rank ${f.rank}.`),y.assert(3===f.shape[2]||1===f.shape[2],()=>"Error in threshold: image color channel must be equal to 3 or 1"+`but got ${f.shape[2]}.`),y.assert("int32"===f.dtype||"float32"===f.dtype,()=>"Error in dtype: image dtype must be int32 or float32,"+`but got dtype ${f.dtype}.`),y.assert("otsu"===i||"binary"===i,()=>`Method must be binary or otsu, but was ${i}`),3===f.shape[2]){[m,b,v]=(0,s.split)(f,[1,1,1],-1);const e=(0,l.mul)(m,.2989),r=(0,l.mul)(b,.587),t=(0,l.mul)(v,.114);w=(0,a.add)((0,a.add)(e,r),t)}else w=r;if("otsu"===i){O=_((0,u.bincount)((0,t.cast)((0,p.round)(w),"int32"),(0,q.tensor)([]),256),h)}const j=d?(0,n.lessEqual)(w,O):(0,o.greater)(w,O);return(0,t.cast)((0,l.mul)(j,255),"int32")}function _(r,t){let s,u,n,p,q,y,g=(0,e.tensor1d)([-1]),v=(0,e.tensor1d)([0]),w=(0,e.tensor1d)([0]);for(let O=0;O<r.size-1;O++){s=(0,m.slice)(r,0,O+1),u=(0,m.slice)(r,O+1),q=(0,d.div)((0,i.sum)(s),t),y=(0,d.div)((0,i.sum)(u),t);const _=(0,i.sum)((0,l.mul)(s,(0,b.range)(0,s.size)));n=(0,d.div)(_,(0,i.sum)(s));const j=(0,h.fill)(u.shape,s.size),k=(0,a.add)((0,b.range)(0,u.size),j),M=(0,l.mul)(u,k);p=(0,d.div)((0,i.sum)(M),(0,i.sum)(u));const P=(0,c.sub)(n,p),z=(0,c.sub)(n,p),E=(0,l.mul)(q,y);w=(0,l.mul)((0,l.mul)(E,P),z);const $=(0,o.greater)(w,v);v=(0,f.where)($,w,v),g=(0,f.where)($,(0,e.tensor1d)([O]),g)}return g}const j=(0,r.op)({threshold_:O});exports.threshold=j;
},{"../tensor1d":"pBg9","../operation":"JtaO","../cast":"qqq3","../split":"VA1I","../bincount":"MD76","../less_equal":"FvS1","../greater":"QdS7","../sum":"ITAy","../add":"ZDFV","../mul":"k2PI","../div":"D8Fc","../sub":"dGex","../round":"J1Ke","../where":"BsuI","../fill":"e6pp","../slice":"zP07","../range":"gc29","../tensor":"P2QC","../../util":"P6nv","../../tensor_util_env":"c6yR"}],"pF1y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform=void 0;var r=require("../../engine"),e=require("../../kernel_names"),t=require("../../tensor_util_env"),n=s(require("../../util")),o=require("../operation");function a(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(a=function(r){return r?t:e})(r)}function s(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=a(e);if(t&&t.has(r))return t.get(r);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if("default"!==s&&Object.prototype.hasOwnProperty.call(r,s)){var u=o?Object.getOwnPropertyDescriptor(r,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=r[s]}return n.default=r,t&&t.set(r,n),n}function u(o,a,s="nearest",u="constant",i=0,f){const l=(0,t.convertToTensor)(o,"image","transform","float32"),p=(0,t.convertToTensor)(a,"transforms","transform","float32");n.assert(4===l.rank,()=>"Error in transform: image must be rank 4,"+`but got rank ${l.rank}.`),n.assert(2===p.rank&&(p.shape[0]===l.shape[0]||1===p.shape[0])&&8===p.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),n.assert(null==f||2===f.length,()=>"Error in transform: outputShape must be [height, width] or null, "+`but got ${f}.`);const c={image:l,transforms:p},m={interpolation:s,fillMode:u,fillValue:i,outputShape:f};return r.ENGINE.runKernel(e.Transform,c,m)}const i=(0,o.op)({transform_:u});exports.transform=i;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../../util":"P6nv","../operation":"JtaO"}],"l61h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bandPart=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),a=require("../greater_equal"),t=require("../less_equal"),n=require("../logical_and"),s=require("../operation"),u=require("../range"),o=require("../reshape"),i=require("../scalar"),l=require("../stack"),b=require("../sub"),c=require("../unstack"),p=require("../where"),q=require("../zeros");function d(s,d,g){(0,r.assert)(d%1==0,()=>`bandPart(): numLower must be an integer, got ${d}.`),(0,r.assert)(g%1==0,()=>`bandPart(): numUpper must be an integer, got ${g}.`);const h=(0,e.convertToTensor)(s,"a","bandPart");(0,r.assert)(h.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${h.rank}.`);const m=h.shape,[P,w]=h.shape.slice(-2);if(!(d<=P))throw new Error(`bandPart(): numLower (${d})`+` must not be greater than the number of rows (${P}).`);if(!(g<=w))throw new Error(`bandPart(): numUpper (${g})`+` must not be greater than the number of columns (${w}).`);d<0&&(d=P),g<0&&(g=w);const _=(0,o.reshape)((0,u.range)(0,P,1,"int32"),[-1,1]),k=(0,u.range)(0,w,1,"int32"),$=(0,b.sub)(_,k),f=(0,n.logicalAnd)((0,t.lessEqual)($,(0,i.scalar)(+d,"int32")),(0,a.greaterEqual)($,(0,i.scalar)(-g,"int32"))),v=(0,q.zeros)([P,w],h.dtype);return(0,o.reshape)((0,l.stack)((0,c.unstack)((0,o.reshape)(h,[-1,P,w])).map(e=>(0,p.where)(f,e,v))),m)}const g=(0,s.op)({bandPart_:d});exports.bandPart=g;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../greater_equal":"Dbo2","../less_equal":"FvS1","../logical_and":"lYzt","../operation":"JtaO","../range":"gc29","../reshape":"QI4k","../scalar":"Ay42","../stack":"TWBn","../sub":"dGex","../unstack":"JDMu","../where":"BsuI","../zeros":"R5fo"}],"IagJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gramSchmidt=void 0;var e=require("../../engine"),r=require("../../util"),t=require("../div"),s=require("../mul"),i=require("../norm"),u=require("../operation"),n=require("../split"),o=require("../squeeze"),l=require("../stack"),m=require("../sub"),a=require("../sum");function c(u){let c;if(Array.isArray(u)){c=!1,(0,r.assert)(null!=u&&u.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const e=u[0].shape[0];for(let t=1;t<u.length;++t)(0,r.assert)(u[t].shape[0]===e,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+`(${u[t].shape[0]} vs. ${e})`)}else c=!0,u=(0,n.split)(u,u.shape[0],0).map(e=>(0,o.squeeze)(e,[0]));(0,r.assert)(u.length<=u[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${u.length}) exceeds `+`number of dimensions (${u[0].shape[0]}).`);const h=[],p=u;for(let r=0;r<u.length;++r)h.push(e.ENGINE.tidy(()=>{let e=p[r];if(r>0)for(let t=0;t<r;++t){const r=(0,s.mul)((0,a.sum)((0,s.mul)(h[t],e)),h[t]);e=(0,m.sub)(e,r)}return(0,t.div)(e,(0,i.norm)(e,"euclidean"))}));return c?(0,l.stack)(h,0):h}const h=(0,u.op)({gramSchmidt_:c});exports.gramSchmidt=h;
},{"../../engine":"Nc3Y","../../util":"P6nv","../div":"D8Fc","../mul":"k2PI","../norm":"Twvf","../operation":"JtaO","../split":"VA1I","../squeeze":"ZVMV","../stack":"TWBn","../sub":"dGex","../sum":"ITAy"}],"hSXe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qr=void 0;var e=require("../../engine"),r=require("../../globals"),s=require("../../util"),t=require("../clone"),u=require("../concat"),a=require("../div"),n=require("../eye"),i=require("../greater"),o=require("../mat_mul"),c=require("../mul"),l=require("../neg"),p=require("../norm"),h=require("../operation"),q=require("../reshape"),m=require("../slice"),d=require("../stack"),g=require("../sub"),b=require("../tensor2d"),k=require("../transpose"),M=require("../unstack"),f=require("../where");function v(e,r=!1){if((0,s.assert)(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return y(e,r);{const s=e.shape.slice(0,e.shape.length-2).reduce((e,r)=>e*r),t=(0,M.unstack)((0,q.reshape)(e,[s,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),u=[],a=[];return t.forEach(e=>{const[s,t]=y(e,r);u.push(s),a.push(t)}),[(0,q.reshape)((0,d.stack)(u,0),e.shape),(0,q.reshape)((0,d.stack)(a,0),e.shape)]}}function y(h,q=!1){return e.ENGINE.tidy(()=>{(0,s.assert)(2===h.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${h.shape.length}D Tensor.`);const d=h.shape[0],M=h.shape[1];let v=(0,n.eye)(d),y=(0,t.clone)(h);const E=(0,b.tensor2d)([[1]],[1,1]);let N=(0,t.clone)(E);const _=d>=M?M:d;for(let s=0;s<_;++s){const n=y,h=N,q=v;[N,y,v]=e.ENGINE.tidy(()=>{const e=(0,m.slice)(y,[s,s],[d-s,1]),r=(0,p.norm)(e),n=(0,m.slice)(y,[s,s],[1,1]),h=(0,f.where)((0,i.greater)(n,0),(0,b.tensor2d)([[-1]]),(0,b.tensor2d)([[1]])),q=(0,g.sub)(n,(0,c.mul)(h,r)),_=(0,a.div)(e,q);N=1===_.shape[0]?(0,t.clone)(E):(0,u.concat)([E,(0,m.slice)(_,[1,0],[_.shape[0]-1,_.shape[1]])],0);const x=(0,l.neg)((0,a.div)((0,o.matMul)(h,q),r)),w=(0,m.slice)(y,[s,0],[d-s,M]),D=(0,c.mul)(x,N),G=(0,k.transpose)(N);if(0===s)y=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));else{const e=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));y=(0,u.concat)([(0,m.slice)(y,[0,0],[s,M]),e],0)}const I=(0,k.transpose)(D),T=(0,m.slice)(v,[0,s],[d,v.shape[1]-s]);if(0===s)v=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));else{const e=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));v=(0,u.concat)([(0,m.slice)(v,[0,0],[d,s]),e],1)}return[N,y,v]}),(0,r.dispose)([n,h,q])}return!q&&d>M&&(v=(0,m.slice)(v,[0,0],[d,M]),y=(0,m.slice)(y,[0,0],[M,M])),[v,y]})}const E=(0,h.op)({qr_:v});exports.qr=E;
},{"../../engine":"Nc3Y","../../globals":"GWnL","../../util":"P6nv","../clone":"F06q","../concat":"dDdq","../div":"D8Fc","../eye":"HzEj","../greater":"QdS7","../mat_mul":"mMWq","../mul":"k2PI","../neg":"iGYA","../norm":"Twvf","../operation":"JtaO","../reshape":"QI4k","../slice":"zP07","../stack":"TWBn","../sub":"dGex","../tensor2d":"WnBr","../transpose":"uQkx","../unstack":"JDMu","../where":"BsuI"}],"LIoB":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reduction=void 0,exports.Reduction=e,function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(e||(exports.Reduction=e={}));
},{}],"SdDZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeWeightedLoss=void 0;var e=require("../../tensor_util_env"),r=require("../cast"),s=require("../div"),u=require("../loss_ops_utils"),o=require("../mean"),t=require("../mul"),i=require("../not_equal"),n=require("../ones"),c=require("../operation"),l=require("../scalar"),a=require("../sum");function d(c,d,m=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const _=(0,e.convertToTensor)(c,"losses","computeWeightedLoss");let p=null;null!=d&&(p=(0,e.convertToTensor)(d,"weights","computeWeightedLoss"));const q=null==p?_:(0,t.mul)(_,p);if(m===u.Reduction.NONE)return q;if(m===u.Reduction.SUM)return(0,a.sum)(q);if(m===u.Reduction.MEAN){if(null==p)return(0,o.mean)(q);{const e=_.size/p.size,r=(0,s.div)((0,a.sum)(q),(0,a.sum)(p));return e>1?(0,s.div)(r,(0,l.scalar)(e)):r}}if(m===u.Reduction.SUM_BY_NONZERO_WEIGHTS){if(null==p)return(0,s.div)((0,a.sum)(q),(0,l.scalar)(_.size));{const e=(0,t.mul)(p,(0,n.ones)(_.shape)),u=(0,r.cast)((0,a.sum)((0,i.notEqual)(e,(0,l.scalar)(0))),"float32");return(0,s.div)((0,a.sum)(q),u)}}throw Error(`Unknown reduction: ${m}`)}const m=(0,c.op)({computeWeightedLoss_:d});exports.computeWeightedLoss=m;
},{"../../tensor_util_env":"c6yR","../cast":"qqq3","../div":"D8Fc","../loss_ops_utils":"LIoB","../mean":"jwZo","../mul":"k2PI","../not_equal":"jVu5","../ones":"POxQ","../operation":"JtaO","../scalar":"Ay42","../sum":"ITAy"}],"sqiT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absoluteDifference=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),o=require("../loss_ops_utils"),t=require("../operation"),i=require("../sub"),u=require("./compute_weighted_loss");function n(t,n,c,l=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const a=(0,e.convertToTensor)(t,"labels","absoluteDifference"),f=(0,e.convertToTensor)(n,"predictions","absoluteDifference");let b=null;null!=c&&(b=(0,e.convertToTensor)(c,"weights","absoluteDifference")),(0,r.assertShapesMatch)(a.shape,f.shape,"Error in absoluteDifference: ");const p=(0,s.abs)((0,i.sub)(a,f));return(0,u.computeWeightedLoss)(p,b,l)}const c=(0,t.op)({absoluteDifference_:n});exports.absoluteDifference=c;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../abs":"aE3W","../loss_ops_utils":"LIoB","../operation":"JtaO","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"dFeu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosineDistance=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),i=require("../operation"),t=require("../scalar"),n=require("../sub"),c=require("../sum"),u=require("./compute_weighted_loss");function a(i,a,l,p,_=r.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","cosineDistance"),d=(0,e.convertToTensor)(a,"predictions","cosineDistance");let h=null;null!=p&&(h=(0,e.convertToTensor)(p,"weights","cosineDistance")),(0,s.assertShapesMatch)(q.shape,d.shape,"Error in cosineDistance: ");const v=(0,t.scalar)(1),D=(0,n.sub)(v,(0,c.sum)((0,o.mul)(q,d),l,!0));return(0,u.computeWeightedLoss)(D,h,_)}const l=(0,i.op)({cosineDistance_:a});exports.cosineDistance=l;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../loss_ops_utils":"LIoB","../mul":"k2PI","../operation":"JtaO","../scalar":"Ay42","../sub":"dGex","../sum":"ITAy","./compute_weighted_loss":"SdDZ"}],"kvcm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hingeLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),t=require("../operation"),i=require("../relu"),u=require("../scalar"),n=require("../sub"),l=require("./compute_weighted_loss");function c(t,c,a,h=r.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,e.convertToTensor)(t,"labels","hingeLoss");const _=(0,e.convertToTensor)(c,"predictions","hingeLoss");let g=null;null!=a&&(g=(0,e.convertToTensor)(a,"weights","hingeLoss")),(0,s.assertShapesMatch)(p.shape,_.shape,"Error in hingeLoss: ");const q=(0,u.scalar)(1);p=(0,n.sub)((0,o.mul)((0,u.scalar)(2),p),q);const L=(0,i.relu)((0,n.sub)(q,(0,o.mul)(p,_)));return(0,l.computeWeightedLoss)(L,g,h)}const a=(0,t.op)({hingeLoss_:c});exports.hingeLoss=a;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../loss_ops_utils":"LIoB","../mul":"k2PI","../operation":"JtaO","../relu":"SJP3","../scalar":"Ay42","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"VRHQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.huberLoss=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),u=require("../add"),o=require("../loss_ops_utils"),i=require("../minimum"),t=require("../mul"),n=require("../operation"),a=require("../scalar"),l=require("../square"),c=require("../sub"),b=require("./compute_weighted_loss");function h(n,h,q,p=1,_=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(n,"labels","huberLoss"),m=(0,e.convertToTensor)(h,"predictions","huberLoss");let L=null;null!=q&&(L=(0,e.convertToTensor)(q,"weights","huberLoss")),(0,r.assertShapesMatch)(d.shape,m.shape,"Error in huberLoss: ");const v=(0,a.scalar)(p),T=(0,s.abs)((0,c.sub)(m,d)),g=(0,i.minimum)(T,v),x=(0,c.sub)(T,g),E=(0,u.add)((0,t.mul)((0,a.scalar)(.5),(0,l.square)(g)),(0,t.mul)(v,x));return(0,b.computeWeightedLoss)(E,L,_)}const q=(0,n.op)({huberLoss_:h});exports.huberLoss=q;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../abs":"aE3W","../add":"ZDFV","../loss_ops_utils":"LIoB","../minimum":"crIr","../mul":"k2PI","../operation":"JtaO","../scalar":"Ay42","../square":"mJRX","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"R42n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),r=require("../log"),u=require("../loss_ops_utils"),l=require("../mul"),t=require("../neg"),i=require("../operation"),n=require("../scalar"),a=require("../sub"),c=require("./compute_weighted_loss");function g(i,g,d,p=1e-7,_=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","logLoss"),L=(0,e.convertToTensor)(g,"predictions","logLoss");let h=null;null!=d&&(h=(0,e.convertToTensor)(d,"weights","logLoss")),(0,s.assertShapesMatch)(q.shape,L.shape,"Error in logLoss: ");const v=(0,n.scalar)(1),T=(0,n.scalar)(p),b=(0,t.neg)((0,l.mul)(q,(0,r.log)((0,o.add)(L,T)))),m=(0,l.mul)((0,a.sub)(v,q),(0,r.log)((0,o.add)((0,a.sub)(v,L),T))),x=(0,a.sub)(b,m);return(0,c.computeWeightedLoss)(x,h,_)}const d=(0,i.op)({logLoss_:g});exports.logLoss=d;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../log":"vwHA","../loss_ops_utils":"LIoB","../mul":"k2PI","../neg":"iGYA","../operation":"JtaO","../scalar":"Ay42","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"NOcW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanSquaredError=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),o=require("../loss_ops_utils"),s=require("../operation"),n=require("../squared_difference"),t=require("./compute_weighted_loss");function u(s,u,a,i=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(s,"labels","meanSquaredError"),c=(0,e.convertToTensor)(u,"predictions","meanSquaredError");let q=null;null!=a&&(q=(0,e.convertToTensor)(a,"weights","meanSquaredError")),(0,r.assertShapesMatch)(d.shape,c.shape,"Error in meanSquaredError: ");const l=(0,n.squaredDifference)(d,c);return(0,t.computeWeightedLoss)(l,q,i)}const a=(0,s.op)({meanSquaredError_:u});exports.meanSquaredError=a;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../loss_ops_utils":"LIoB","../operation":"JtaO","../squared_difference":"gsmP","./compute_weighted_loss":"SdDZ"}],"oaMf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidCrossEntropy=void 0;var r=require("../../tensor_util_env"),s=require("../../util"),e=require("../abs"),o=require("../add"),i=require("../exp"),t=require("../log1p"),n=require("../loss_ops_utils"),u=require("../mul"),l=require("../neg"),a=require("../operation"),p=require("../relu"),c=require("../scalar"),d=require("../sub"),g=require("./compute_weighted_loss");function m(n,a){const c=(0,r.convertToTensor)(n,"labels","sigmoidCrossEntropyWithLogits"),g=(0,r.convertToTensor)(a,"logits","sigmoidCrossEntropyWithLogits");(0,s.assertShapesMatch)(c.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");const m=(0,p.relu)(g),h=(0,u.mul)(g,c),q=(0,t.log1p)((0,i.exp)((0,l.neg)((0,e.abs)(g))));return(0,o.add)((0,d.sub)(m,h),q)}function h(e,i,t,l=0,a=n.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,r.convertToTensor)(e,"multiClassLabels","sigmoidCrossEntropy");const h=(0,r.convertToTensor)(i,"logits","sigmoidCrossEntropy");let q=null;if(null!=t&&(q=(0,r.convertToTensor)(t,"weights","sigmoidCrossEntropy")),(0,s.assertShapesMatch)(p.shape,h.shape,"Error in sigmoidCrossEntropy: "),l>0){const r=(0,c.scalar)(l),s=(0,c.scalar)(1),e=(0,c.scalar)(.5);p=(0,o.add)((0,u.mul)(p,(0,d.sub)(s,r)),(0,u.mul)(e,r))}const E=m(p,h);return(0,g.computeWeightedLoss)(E,q,a)}const q=(0,a.op)({sigmoidCrossEntropy_:h});exports.sigmoidCrossEntropy=q;
},{"../../tensor_util_env":"c6yR","../../util":"P6nv","../abs":"aE3W","../add":"ZDFV","../exp":"zsk9","../log1p":"PxfL","../loss_ops_utils":"LIoB","../mul":"k2PI","../neg":"iGYA","../operation":"JtaO","../relu":"SJP3","../scalar":"Ay42","../sub":"dGex","./compute_weighted_loss":"SdDZ"}],"rYqN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxCrossEntropy=void 0;var e=require("../../gradients"),r=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),t=require("../axis_util"),a=require("../cast"),n=require("../div"),u=require("../exp"),i=require("../log_sum_exp"),l=require("../loss_ops_utils"),p=require("../mul"),c=require("../neg"),m=require("../operation"),d=require("../reshape"),q=require("../scalar"),x=require("../sub"),f=require("../sum"),h=require("./compute_weighted_loss");function _(r,s,o=-1){if(-1===o&&(o=s.rank-1),o!==s.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${s.rank} `+`and dim was ${o}`);return(0,e.customGrad)((e,r,s)=>{const n=(0,i.logSumExp)(r,[o],!0),l=(0,x.sub)((0,a.cast)(r,"float32"),n);s([e,l]);const m=(0,c.neg)((0,p.mul)(l,e));return{value:(0,f.sum)(m,[o]),gradFunc:(e,r)=>{const[s,n]=r,i=(0,t.expandShapeToKeepDim)(e.shape,[o]);return[(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,a.cast)(s,"float32"),(0,u.exp)(n))),(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,u.exp)(n),(0,a.cast)(s,"float32")))]}}})(r,s)}function g(e,t,a,u=0,i=l.Reduction.SUM_BY_NONZERO_WEIGHTS){let c=(0,r.convertToTensor)(e,"onehotLabels","softmaxCrossEntropy");const m=(0,r.convertToTensor)(t,"logits","softmaxCrossEntropy");let d=null;if(null!=a&&(d=(0,r.convertToTensor)(a,"weights","softmaxCrossEntropy")),(0,s.assertShapesMatch)(c.shape,m.shape,"Error in softmaxCrossEntropy: "),u>0){const e=(0,q.scalar)(u),r=(0,q.scalar)(1),s=(0,q.scalar)(c.shape[1]);c=(0,o.add)((0,p.mul)(c,(0,x.sub)(r,e)),(0,n.div)(e,s))}const f=_(c,m);return(0,h.computeWeightedLoss)(f,d,i)}const E=(0,m.op)({softmaxCrossEntropy_:g});exports.softmaxCrossEntropy=E;
},{"../../gradients":"yPDw","../../tensor_util_env":"c6yR","../../util":"P6nv","../add":"ZDFV","../axis_util":"DsMP","../cast":"qqq3","../div":"D8Fc","../exp":"zsk9","../log_sum_exp":"MQ55","../loss_ops_utils":"LIoB","../mul":"k2PI","../neg":"iGYA","../operation":"JtaO","../reshape":"QI4k","../scalar":"Ay42","../sub":"dGex","../sum":"ITAy","./compute_weighted_loss":"SdDZ"}],"EPMc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseFillEmptyRows=void 0;var e=require("../../engine"),r=require("../../kernel_names"),s=require("../../tensor_util_env"),o=require("../operation");function n(o,n,t,a){const p=(0,s.convertToTensor)(o,"indices","sparseFillEmptyRows"),l=(0,s.convertToTensor)(n,"values","sparseFillEmptyRows"),i=(0,s.convertToTensor)(t,"denseShape","sparseFillEmptyRows"),u=(0,s.convertToTensor)(a,"defaultValue","sparseFillEmptyRows",l.dtype);if(2!==p.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${p.shape}`);if(1!==l.rank)throw new Error(`Values should be Tensor1D but received shape ${l.shape}`);if(1!==i.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(0!==u.rank)throw new Error(`Default value should be a scalar but received shape ${u.shape}`);const d={indices:p,values:l,denseShape:i,defaultValue:u},c=e.ENGINE.runKernel(r.SparseFillEmptyRows,d);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const t=(0,o.op)({sparseFillEmptyRows_:n});exports.sparseFillEmptyRows=t;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../operation":"JtaO"}],"d8Hq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseReshape=void 0;var e=require("../../engine"),r=require("../../kernel_names"),s=require("../../tensor_util_env"),n=require("../operation");function p(n,p,o){const a=(0,s.convertToTensor)(n,"inputIndices","sparseReshape"),t=(0,s.convertToTensor)(p,"inputShape","sparseReshape"),u=(0,s.convertToTensor)(o,"newShape","sparseReshape");if(2!==a.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${a.shape}`);if(1!==t.rank)throw new Error(`Input shape should be Tensor1D but received shape ${t.shape}`);if(1!==u.rank)throw new Error(`New shape should be Tensor1D but received shape ${u.shape}`);const h={inputIndices:a,inputShape:t,newShape:u},i=e.ENGINE.runKernel(r.SparseReshape,h);return{outputIndices:i[0],outputShape:i[1]}}const o=(0,n.op)({sparseReshape_:p});exports.sparseReshape=o;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../operation":"JtaO"}],"EpSg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentMean=void 0;var e=require("../../engine"),r=require("../../kernel_names"),n=require("../../tensor_util_env"),s=require("../operation");function t(s,t,a){const o=(0,n.convertToTensor)(s,"data","sparseSegmentMean"),i=(0,n.convertToTensor)(t,"indices","sparseSegmentMean"),d=(0,n.convertToTensor)(a,"segmentIds","sparseSegmentMean");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${i.shape}`);if(1!==d.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${d.shape}`);const p={data:o,indices:i,segmentIds:d};return e.ENGINE.runKernel(r.SparseSegmentMean,p)}const a=(0,s.op)({sparseSegmentMean_:t});exports.sparseSegmentMean=a;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../operation":"JtaO"}],"vkaa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentSum=void 0;var e=require("../../engine"),r=require("../../kernel_names"),n=require("../../tensor_util_env"),s=require("../operation");function t(s,t,o){const a=(0,n.convertToTensor)(s,"data","sparseSegmentSum"),i=(0,n.convertToTensor)(t,"indices","sparseSegmentSum"),u=(0,n.convertToTensor)(o,"segmentIds","sparseSegmentSum");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${i.shape}`);if(1!==u.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${u.shape}`);const m={data:a,indices:i,segmentIds:u};return e.ENGINE.runKernel(r.SparseSegmentSum,m)}const o=(0,s.op)({sparseSegmentSum_:t});exports.sparseSegmentSum=o;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../operation":"JtaO"}],"XtBx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringNGrams=void 0;var r=require("../../engine"),t=require("../../kernel_names"),e=require("../../tensor_util_env"),s=require("../operation");function a(s,a,n,i,o,p,d,u){const m=(0,e.convertToTensor)(s,"data","stringNGrams","string");if("string"!==m.dtype)throw new Error("Data must be of datatype string");if(1!==m.shape.length)throw new Error(`Data must be a vector, saw: ${m.shape}`);const g=(0,e.convertToTensor)(a,"dataSplits","stringNGrams");if("int32"!==g.dtype)throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:i,leftPad:o,rightPad:p,padWidth:d,preserveShortSequences:u},l={data:m,dataSplits:g},h=r.ENGINE.runKernel(t.StringNGrams,l,c);return{nGrams:h[0],nGramsSplits:h[1]}}const n=(0,s.op)({stringNGrams_:a});exports.stringNGrams=n;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../operation":"JtaO"}],"z59V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringSplit=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),i=require("../operation");function n(i,n,s=!0){const o=(0,t.convertToTensor)(i,"input","stringSplit","string"),p=(0,t.convertToTensor)(n,"delimiter","stringSplit","string");if(1!==o.rank)throw new Error(`Input should be Tensor1D but received shape ${o.shape}`);if(0!==p.rank)throw new Error(`Delimiter should be a scalar but received shape ${p.shape}`);const u={skipEmpty:s},l={input:o,delimiter:p},a=e.ENGINE.runKernel(r.StringSplit,l,u);return{indices:a[0],values:a[1],shape:a[2]}}const s=(0,i.op)({stringSplit_:n});exports.stringSplit=s;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../operation":"JtaO"}],"ywpJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringToHashBucketFast=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),s=require("../operation");function n(s,n){const o=(0,r.convertToTensor)(s,"input","stringToHashBucketFast","string"),u={numBuckets:n};if(n<=0)throw new Error("Number of buckets must be at least 1");const i={input:o};return e.ENGINE.runKernel(t.StringToHashBucketFast,i,u)}const o=(0,s.op)({stringToHashBucketFast_:n});exports.stringToHashBucketFast=o;
},{"../../engine":"Nc3Y","../../kernel_names":"sdEe","../../tensor_util_env":"c6yR","../operation":"JtaO"}],"R1mJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={image:!0,linalg:!0,losses:!0,spectral:!0,signal:!0,sparse:!0,string:!0,abs:!0,acos:!0,acosh:!0,add:!0,addN:!0,all:!0,any:!0,argMax:!0,argMin:!0,asin:!0,asinh:!0,atan:!0,atan2:!0,atanh:!0,avgPool:!0,avgPool3d:!0,basicLSTMCell:!0,batchToSpaceND:!0,batchNorm:!0,batchNorm2d:!0,batchNorm3d:!0,batchNorm4d:!0,bincount:!0,broadcastArgs:!0,broadcastTo:!0,buffer:!0,cast:!0,ceil:!0,clipByValue:!0,clone:!0,complex:!0,concat:!0,concat1d:!0,concat2d:!0,concat3d:!0,concat4d:!0,conv1d:!0,conv2d:!0,conv2dTranspose:!0,conv3d:!0,conv3dTranspose:!0,cos:!0,cosh:!0,cumsum:!0,denseBincount:!0,depthToSpace:!0,depthwiseConv2d:!0,diag:!0,dilation2d:!0,div:!0,divNoNan:!0,dot:!0,einsum:!0,elu:!0,equal:!0,erf:!0,exp:!0,expandDims:!0,expm1:!0,eye:!0,fill:!0,floor:!0,floorDiv:!0,gather:!0,greater:!0,greaterEqual:!0,imag:!0,isFinite:!0,isInf:!0,isNaN:!0,leakyRelu:!0,less:!0,lessEqual:!0,linspace:!0,localResponseNormalization:!0,log:!0,log1p:!0,logSigmoid:!0,logSoftmax:!0,logSumExp:!0,logicalAnd:!0,logicalNot:!0,logicalOr:!0,logicalXor:!0,matMul:!0,max:!0,maxPool:!0,maxPool3d:!0,maxPoolWithArgmax:!0,maximum:!0,mean:!0,meshgrid:!0,min:!0,minimum:!0,mirrorPad:!0,mod:!0,moments:!0,mul:!0,multiRNNCell:!0,multinomial:!0,neg:!0,notEqual:!0,oneHot:!0,ones:!0,onesLike:!0,outerProduct:!0,pad:!0,pad1d:!0,pad2d:!0,pad3d:!0,pad4d:!0,pool:!0,pow:!0,prelu:!0,print:!0,prod:!0,rand:!0,randomGamma:!0,randomNormal:!0,randomUniform:!0,range:!0,real:!0,reciprocal:!0,relu:!0,relu6:!0,reshape:!0,reverse:!0,reverse1d:!0,reverse2d:!0,reverse3d:!0,reverse4d:!0,round:!0,rsqrt:!0,scalar:!0,selu:!0,separableConv2d:!0,setdiff1dAsync:!0,sigmoid:!0,sign:!0,sin:!0,sinh:!0,slice:!0,slice1d:!0,slice2d:!0,slice3d:!0,slice4d:!0,softmax:!0,softplus:!0,spaceToBatchND:!0,fft:!0,ifft:!0,irfft:!0,rfft:!0,split:!0,sqrt:!0,square:!0,squaredDifference:!0,squeeze:!0,stack:!0,step:!0,stridedSlice:!0,sub:!0,sum:!0,tan:!0,tanh:!0,tensor:!0,tensor1d:!0,tensor2d:!0,tensor3d:!0,tensor4d:!0,tensor5d:!0,tensor6d:!0,tile:!0,topk:!0,truncatedNormal:!0,unique:!0,unsortedSegmentSum:!0,unstack:!0,variable:!0,where:!0,whereAsync:!0,zeros:!0,zerosLike:!0,op:!0,OP_SCOPE_SUFFIX:!0,fused:!0};Object.defineProperty(exports,"OP_SCOPE_SUFFIX",{enumerable:!0,get:function(){return zt.OP_SCOPE_SUFFIX}}),Object.defineProperty(exports,"abs",{enumerable:!0,get:function(){return r.abs}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return t.acos}}),Object.defineProperty(exports,"acosh",{enumerable:!0,get:function(){return n.acosh}}),Object.defineProperty(exports,"add",{enumerable:!0,get:function(){return o.add}}),Object.defineProperty(exports,"addN",{enumerable:!0,get:function(){return i.addN}}),Object.defineProperty(exports,"all",{enumerable:!0,get:function(){return u.all}}),Object.defineProperty(exports,"any",{enumerable:!0,get:function(){return s.any}}),Object.defineProperty(exports,"argMax",{enumerable:!0,get:function(){return a.argMax}}),Object.defineProperty(exports,"argMin",{enumerable:!0,get:function(){return c.argMin}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return p.asin}}),Object.defineProperty(exports,"asinh",{enumerable:!0,get:function(){return l.asinh}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return d.atan}}),Object.defineProperty(exports,"atan2",{enumerable:!0,get:function(){return f.atan2}}),Object.defineProperty(exports,"atanh",{enumerable:!0,get:function(){return b.atanh}}),Object.defineProperty(exports,"avgPool",{enumerable:!0,get:function(){return m.avgPool}}),Object.defineProperty(exports,"avgPool3d",{enumerable:!0,get:function(){return g.avgPool3d}}),Object.defineProperty(exports,"basicLSTMCell",{enumerable:!0,get:function(){return x.basicLSTMCell}}),Object.defineProperty(exports,"batchNorm",{enumerable:!0,get:function(){return q.batchNorm}}),Object.defineProperty(exports,"batchNorm2d",{enumerable:!0,get:function(){return O.batchNorm2d}}),Object.defineProperty(exports,"batchNorm3d",{enumerable:!0,get:function(){return P.batchNorm3d}}),Object.defineProperty(exports,"batchNorm4d",{enumerable:!0,get:function(){return j.batchNorm4d}}),Object.defineProperty(exports,"batchToSpaceND",{enumerable:!0,get:function(){return y.batchToSpaceND}}),Object.defineProperty(exports,"bincount",{enumerable:!0,get:function(){return _.bincount}}),Object.defineProperty(exports,"broadcastArgs",{enumerable:!0,get:function(){return h.broadcastArgs}}),Object.defineProperty(exports,"broadcastTo",{enumerable:!0,get:function(){return v.broadcastTo}}),Object.defineProperty(exports,"buffer",{enumerable:!0,get:function(){return S.buffer}}),Object.defineProperty(exports,"cast",{enumerable:!0,get:function(){return N.cast}}),Object.defineProperty(exports,"ceil",{enumerable:!0,get:function(){return w.ceil}}),Object.defineProperty(exports,"clipByValue",{enumerable:!0,get:function(){return k.clipByValue}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return M.clone}}),Object.defineProperty(exports,"complex",{enumerable:!0,get:function(){return E.complex}}),Object.defineProperty(exports,"concat",{enumerable:!0,get:function(){return z.concat}}),Object.defineProperty(exports,"concat1d",{enumerable:!0,get:function(){return T.concat1d}}),Object.defineProperty(exports,"concat2d",{enumerable:!0,get:function(){return A.concat2d}}),Object.defineProperty(exports,"concat3d",{enumerable:!0,get:function(){return D.concat3d}}),Object.defineProperty(exports,"concat4d",{enumerable:!0,get:function(){return C.concat4d}}),Object.defineProperty(exports,"conv1d",{enumerable:!0,get:function(){return L.conv1d}}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return R.conv2d}}),Object.defineProperty(exports,"conv2dTranspose",{enumerable:!0,get:function(){return W.conv2dTranspose}}),Object.defineProperty(exports,"conv3d",{enumerable:!0,get:function(){return B.conv3d}}),Object.defineProperty(exports,"conv3dTranspose",{enumerable:!0,get:function(){return F.conv3dTranspose}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return G.cos}}),Object.defineProperty(exports,"cosh",{enumerable:!0,get:function(){return I.cosh}}),Object.defineProperty(exports,"cumsum",{enumerable:!0,get:function(){return U.cumsum}}),Object.defineProperty(exports,"denseBincount",{enumerable:!0,get:function(){return X.denseBincount}}),Object.defineProperty(exports,"depthToSpace",{enumerable:!0,get:function(){return H.depthToSpace}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return V.depthwiseConv2d}}),Object.defineProperty(exports,"diag",{enumerable:!0,get:function(){return J.diag}}),Object.defineProperty(exports,"dilation2d",{enumerable:!0,get:function(){return K.dilation2d}}),Object.defineProperty(exports,"div",{enumerable:!0,get:function(){return Q.div}}),Object.defineProperty(exports,"divNoNan",{enumerable:!0,get:function(){return Y.divNoNan}}),Object.defineProperty(exports,"dot",{enumerable:!0,get:function(){return Z.dot}}),Object.defineProperty(exports,"einsum",{enumerable:!0,get:function(){return $.einsum}}),Object.defineProperty(exports,"elu",{enumerable:!0,get:function(){return ee.elu}}),Object.defineProperty(exports,"equal",{enumerable:!0,get:function(){return re.equal}}),Object.defineProperty(exports,"erf",{enumerable:!0,get:function(){return te.erf}}),Object.defineProperty(exports,"exp",{enumerable:!0,get:function(){return ne.exp}}),Object.defineProperty(exports,"expandDims",{enumerable:!0,get:function(){return oe.expandDims}}),Object.defineProperty(exports,"expm1",{enumerable:!0,get:function(){return ie.expm1}}),Object.defineProperty(exports,"eye",{enumerable:!0,get:function(){return ue.eye}}),Object.defineProperty(exports,"fft",{enumerable:!0,get:function(){return Gr.fft}}),Object.defineProperty(exports,"fill",{enumerable:!0,get:function(){return se.fill}}),Object.defineProperty(exports,"floor",{enumerable:!0,get:function(){return ae.floor}}),Object.defineProperty(exports,"floorDiv",{enumerable:!0,get:function(){return ce.floorDiv}}),exports.fused=void 0,Object.defineProperty(exports,"gather",{enumerable:!0,get:function(){return pe.gather}}),Object.defineProperty(exports,"greater",{enumerable:!0,get:function(){return le.greater}}),Object.defineProperty(exports,"greaterEqual",{enumerable:!0,get:function(){return de.greaterEqual}}),Object.defineProperty(exports,"ifft",{enumerable:!0,get:function(){return Ir.ifft}}),Object.defineProperty(exports,"imag",{enumerable:!0,get:function(){return fe.imag}}),exports.image=void 0,Object.defineProperty(exports,"irfft",{enumerable:!0,get:function(){return Ur.irfft}}),Object.defineProperty(exports,"isFinite",{enumerable:!0,get:function(){return be.isFinite}}),Object.defineProperty(exports,"isInf",{enumerable:!0,get:function(){return me.isInf}}),Object.defineProperty(exports,"isNaN",{enumerable:!0,get:function(){return ge.isNaN}}),Object.defineProperty(exports,"leakyRelu",{enumerable:!0,get:function(){return xe.leakyRelu}}),Object.defineProperty(exports,"less",{enumerable:!0,get:function(){return ye.less}}),Object.defineProperty(exports,"lessEqual",{enumerable:!0,get:function(){return qe.lessEqual}}),exports.linalg=void 0,Object.defineProperty(exports,"linspace",{enumerable:!0,get:function(){return Oe.linspace}}),Object.defineProperty(exports,"localResponseNormalization",{enumerable:!0,get:function(){return Pe.localResponseNormalization}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return je.log}}),Object.defineProperty(exports,"log1p",{enumerable:!0,get:function(){return _e.log1p}}),Object.defineProperty(exports,"logSigmoid",{enumerable:!0,get:function(){return he.logSigmoid}}),Object.defineProperty(exports,"logSoftmax",{enumerable:!0,get:function(){return ve.logSoftmax}}),Object.defineProperty(exports,"logSumExp",{enumerable:!0,get:function(){return Se.logSumExp}}),Object.defineProperty(exports,"logicalAnd",{enumerable:!0,get:function(){return Ne.logicalAnd}}),Object.defineProperty(exports,"logicalNot",{enumerable:!0,get:function(){return we.logicalNot}}),Object.defineProperty(exports,"logicalOr",{enumerable:!0,get:function(){return ke.logicalOr}}),Object.defineProperty(exports,"logicalXor",{enumerable:!0,get:function(){return Me.logicalXor}}),exports.losses=void 0,Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return Ee.matMul}}),Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return ze.max}}),Object.defineProperty(exports,"maxPool",{enumerable:!0,get:function(){return Te.maxPool}}),Object.defineProperty(exports,"maxPool3d",{enumerable:!0,get:function(){return Ae.maxPool3d}}),Object.defineProperty(exports,"maxPoolWithArgmax",{enumerable:!0,get:function(){return De.maxPoolWithArgmax}}),Object.defineProperty(exports,"maximum",{enumerable:!0,get:function(){return Ce.maximum}}),Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return Le.mean}}),Object.defineProperty(exports,"meshgrid",{enumerable:!0,get:function(){return Re.meshgrid}}),Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return We.min}}),Object.defineProperty(exports,"minimum",{enumerable:!0,get:function(){return Be.minimum}}),Object.defineProperty(exports,"mirrorPad",{enumerable:!0,get:function(){return Fe.mirrorPad}}),Object.defineProperty(exports,"mod",{enumerable:!0,get:function(){return Ge.mod}}),Object.defineProperty(exports,"moments",{enumerable:!0,get:function(){return Ie.moments}}),Object.defineProperty(exports,"mul",{enumerable:!0,get:function(){return Ue.mul}}),Object.defineProperty(exports,"multiRNNCell",{enumerable:!0,get:function(){return Xe.multiRNNCell}}),Object.defineProperty(exports,"multinomial",{enumerable:!0,get:function(){return He.multinomial}}),Object.defineProperty(exports,"neg",{enumerable:!0,get:function(){return Ve.neg}}),Object.defineProperty(exports,"notEqual",{enumerable:!0,get:function(){return Je.notEqual}}),Object.defineProperty(exports,"oneHot",{enumerable:!0,get:function(){return Ke.oneHot}}),Object.defineProperty(exports,"ones",{enumerable:!0,get:function(){return Qe.ones}}),Object.defineProperty(exports,"onesLike",{enumerable:!0,get:function(){return Ye.onesLike}}),Object.defineProperty(exports,"op",{enumerable:!0,get:function(){return zt.op}}),Object.defineProperty(exports,"outerProduct",{enumerable:!0,get:function(){return Ze.outerProduct}}),Object.defineProperty(exports,"pad",{enumerable:!0,get:function(){return $e.pad}}),Object.defineProperty(exports,"pad1d",{enumerable:!0,get:function(){return er.pad1d}}),Object.defineProperty(exports,"pad2d",{enumerable:!0,get:function(){return rr.pad2d}}),Object.defineProperty(exports,"pad3d",{enumerable:!0,get:function(){return tr.pad3d}}),Object.defineProperty(exports,"pad4d",{enumerable:!0,get:function(){return nr.pad4d}}),Object.defineProperty(exports,"pool",{enumerable:!0,get:function(){return or.pool}}),Object.defineProperty(exports,"pow",{enumerable:!0,get:function(){return ir.pow}}),Object.defineProperty(exports,"prelu",{enumerable:!0,get:function(){return ur.prelu}}),Object.defineProperty(exports,"print",{enumerable:!0,get:function(){return sr.print}}),Object.defineProperty(exports,"prod",{enumerable:!0,get:function(){return ar.prod}}),Object.defineProperty(exports,"rand",{enumerable:!0,get:function(){return cr.rand}}),Object.defineProperty(exports,"randomGamma",{enumerable:!0,get:function(){return pr.randomGamma}}),Object.defineProperty(exports,"randomNormal",{enumerable:!0,get:function(){return lr.randomNormal}}),Object.defineProperty(exports,"randomUniform",{enumerable:!0,get:function(){return dr.randomUniform}}),Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return fr.range}}),Object.defineProperty(exports,"real",{enumerable:!0,get:function(){return br.real}}),Object.defineProperty(exports,"reciprocal",{enumerable:!0,get:function(){return mr.reciprocal}}),Object.defineProperty(exports,"relu",{enumerable:!0,get:function(){return gr.relu}}),Object.defineProperty(exports,"relu6",{enumerable:!0,get:function(){return xr.relu6}}),Object.defineProperty(exports,"reshape",{enumerable:!0,get:function(){return yr.reshape}}),Object.defineProperty(exports,"reverse",{enumerable:!0,get:function(){return qr.reverse}}),Object.defineProperty(exports,"reverse1d",{enumerable:!0,get:function(){return Or.reverse1d}}),Object.defineProperty(exports,"reverse2d",{enumerable:!0,get:function(){return Pr.reverse2d}}),Object.defineProperty(exports,"reverse3d",{enumerable:!0,get:function(){return jr.reverse3d}}),Object.defineProperty(exports,"reverse4d",{enumerable:!0,get:function(){return _r.reverse4d}}),Object.defineProperty(exports,"rfft",{enumerable:!0,get:function(){return Xr.rfft}}),Object.defineProperty(exports,"round",{enumerable:!0,get:function(){return hr.round}}),Object.defineProperty(exports,"rsqrt",{enumerable:!0,get:function(){return vr.rsqrt}}),Object.defineProperty(exports,"scalar",{enumerable:!0,get:function(){return Sr.scalar}}),Object.defineProperty(exports,"selu",{enumerable:!0,get:function(){return Nr.selu}}),Object.defineProperty(exports,"separableConv2d",{enumerable:!0,get:function(){return wr.separableConv2d}}),Object.defineProperty(exports,"setdiff1dAsync",{enumerable:!0,get:function(){return kr.setdiff1dAsync}}),Object.defineProperty(exports,"sigmoid",{enumerable:!0,get:function(){return Mr.sigmoid}}),Object.defineProperty(exports,"sign",{enumerable:!0,get:function(){return Er.sign}}),exports.signal=void 0,Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return zr.sin}}),Object.defineProperty(exports,"sinh",{enumerable:!0,get:function(){return Tr.sinh}}),Object.defineProperty(exports,"slice",{enumerable:!0,get:function(){return Ar.slice}}),Object.defineProperty(exports,"slice1d",{enumerable:!0,get:function(){return Dr.slice1d}}),Object.defineProperty(exports,"slice2d",{enumerable:!0,get:function(){return Cr.slice2d}}),Object.defineProperty(exports,"slice3d",{enumerable:!0,get:function(){return Lr.slice3d}}),Object.defineProperty(exports,"slice4d",{enumerable:!0,get:function(){return Rr.slice4d}}),Object.defineProperty(exports,"softmax",{enumerable:!0,get:function(){return Wr.softmax}}),Object.defineProperty(exports,"softplus",{enumerable:!0,get:function(){return Br.softplus}}),Object.defineProperty(exports,"spaceToBatchND",{enumerable:!0,get:function(){return Fr.spaceToBatchND}}),exports.spectral=exports.sparse=void 0,Object.defineProperty(exports,"split",{enumerable:!0,get:function(){return Hr.split}}),Object.defineProperty(exports,"sqrt",{enumerable:!0,get:function(){return Vr.sqrt}}),Object.defineProperty(exports,"square",{enumerable:!0,get:function(){return Jr.square}}),Object.defineProperty(exports,"squaredDifference",{enumerable:!0,get:function(){return Kr.squaredDifference}}),Object.defineProperty(exports,"squeeze",{enumerable:!0,get:function(){return Qr.squeeze}}),Object.defineProperty(exports,"stack",{enumerable:!0,get:function(){return Yr.stack}}),Object.defineProperty(exports,"step",{enumerable:!0,get:function(){return Zr.step}}),Object.defineProperty(exports,"stridedSlice",{enumerable:!0,get:function(){return $r.stridedSlice}}),exports.string=void 0,Object.defineProperty(exports,"sub",{enumerable:!0,get:function(){return et.sub}}),Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return rt.sum}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return tt.tan}}),Object.defineProperty(exports,"tanh",{enumerable:!0,get:function(){return nt.tanh}}),Object.defineProperty(exports,"tensor",{enumerable:!0,get:function(){return ot.tensor}}),Object.defineProperty(exports,"tensor1d",{enumerable:!0,get:function(){return it.tensor1d}}),Object.defineProperty(exports,"tensor2d",{enumerable:!0,get:function(){return ut.tensor2d}}),Object.defineProperty(exports,"tensor3d",{enumerable:!0,get:function(){return st.tensor3d}}),Object.defineProperty(exports,"tensor4d",{enumerable:!0,get:function(){return at.tensor4d}}),Object.defineProperty(exports,"tensor5d",{enumerable:!0,get:function(){return ct.tensor5d}}),Object.defineProperty(exports,"tensor6d",{enumerable:!0,get:function(){return pt.tensor6d}}),Object.defineProperty(exports,"tile",{enumerable:!0,get:function(){return lt.tile}}),Object.defineProperty(exports,"topk",{enumerable:!0,get:function(){return dt.topk}}),Object.defineProperty(exports,"truncatedNormal",{enumerable:!0,get:function(){return ft.truncatedNormal}}),Object.defineProperty(exports,"unique",{enumerable:!0,get:function(){return bt.unique}}),Object.defineProperty(exports,"unsortedSegmentSum",{enumerable:!0,get:function(){return mt.unsortedSegmentSum}}),Object.defineProperty(exports,"unstack",{enumerable:!0,get:function(){return gt.unstack}}),Object.defineProperty(exports,"variable",{enumerable:!0,get:function(){return xt.variable}}),Object.defineProperty(exports,"where",{enumerable:!0,get:function(){return yt.where}}),Object.defineProperty(exports,"whereAsync",{enumerable:!0,get:function(){return qt.whereAsync}}),Object.defineProperty(exports,"zeros",{enumerable:!0,get:function(){return Ot.zeros}}),Object.defineProperty(exports,"zerosLike",{enumerable:!0,get:function(){return Pt.zerosLike}});var r=require("./abs"),t=require("./acos"),n=require("./acosh"),o=require("./add"),i=require("./add_n"),u=require("./all"),s=require("./any"),a=require("./arg_max"),c=require("./arg_min"),p=require("./asin"),l=require("./asinh"),d=require("./atan"),f=require("./atan2"),b=require("./atanh"),m=require("./avg_pool"),g=require("./avg_pool_3d"),x=require("./basic_lstm_cell"),y=require("./batch_to_space_nd"),q=require("./batchnorm"),O=require("./batchnorm2d"),P=require("./batchnorm3d"),j=require("./batchnorm4d"),_=require("./bincount"),h=require("./broadcast_args"),v=require("./broadcast_to"),S=require("./buffer"),N=require("./cast"),w=require("./ceil"),k=require("./clip_by_value"),M=require("./clone"),E=require("./complex"),z=require("./concat"),T=require("./concat_1d"),A=require("./concat_2d"),D=require("./concat_3d"),C=require("./concat_4d"),L=require("./conv1d"),R=require("./conv2d"),W=require("./conv2d_transpose"),B=require("./conv3d"),F=require("./conv3d_transpose"),G=require("./cos"),I=require("./cosh"),U=require("./cumsum"),X=require("./dense_bincount"),H=require("./depth_to_space"),V=require("./depthwise_conv2d"),J=require("./diag"),K=require("./dilation2d"),Q=require("./div"),Y=require("./div_no_nan"),Z=require("./dot"),$=require("./einsum"),ee=require("./elu"),re=require("./equal"),te=require("./erf"),ne=require("./exp"),oe=require("./expand_dims"),ie=require("./expm1"),ue=require("./eye"),se=require("./fill"),ae=require("./floor"),ce=require("./floorDiv"),pe=require("./gather"),le=require("./greater"),de=require("./greater_equal"),fe=require("./imag"),be=require("./is_finite"),me=require("./is_inf"),ge=require("./is_nan"),xe=require("./leaky_relu"),ye=require("./less"),qe=require("./less_equal"),Oe=require("./linspace"),Pe=require("./local_response_normalization"),je=require("./log"),_e=require("./log1p"),he=require("./log_sigmoid"),ve=require("./log_softmax"),Se=require("./log_sum_exp"),Ne=require("./logical_and"),we=require("./logical_not"),ke=require("./logical_or"),Me=require("./logical_xor"),Ee=require("./mat_mul"),ze=require("./max"),Te=require("./max_pool"),Ae=require("./max_pool_3d"),De=require("./max_pool_with_argmax"),Ce=require("./maximum"),Le=require("./mean"),Re=require("./meshgrid"),We=require("./min"),Be=require("./minimum"),Fe=require("./mirror_pad"),Ge=require("./mod"),Ie=require("./moments"),Ue=require("./mul"),Xe=require("./multi_rnn_cell"),He=require("./multinomial"),Ve=require("./neg"),Je=require("./not_equal"),Ke=require("./one_hot"),Qe=require("./ones"),Ye=require("./ones_like"),Ze=require("./outer_product"),$e=require("./pad"),er=require("./pad1d"),rr=require("./pad2d"),tr=require("./pad3d"),nr=require("./pad4d"),or=require("./pool"),ir=require("./pow"),ur=require("./prelu"),sr=require("./print"),ar=require("./prod"),cr=require("./rand"),pr=require("./random_gamma"),lr=require("./random_normal"),dr=require("./random_uniform"),fr=require("./range"),br=require("./real"),mr=require("./reciprocal"),gr=require("./relu"),xr=require("./relu6"),yr=require("./reshape"),qr=require("./reverse"),Or=require("./reverse_1d"),Pr=require("./reverse_2d"),jr=require("./reverse_3d"),_r=require("./reverse_4d"),hr=require("./round"),vr=require("./rsqrt"),Sr=require("./scalar"),Nr=require("./selu"),wr=require("./separable_conv2d"),kr=require("./setdiff1d_async"),Mr=require("./sigmoid"),Er=require("./sign"),zr=require("./sin"),Tr=require("./sinh"),Ar=require("./slice"),Dr=require("./slice1d"),Cr=require("./slice2d"),Lr=require("./slice3d"),Rr=require("./slice4d"),Wr=require("./softmax"),Br=require("./softplus"),Fr=require("./space_to_batch_nd"),Gr=require("./spectral/fft"),Ir=require("./spectral/ifft"),Ur=require("./spectral/irfft"),Xr=require("./spectral/rfft"),Hr=require("./split"),Vr=require("./sqrt"),Jr=require("./square"),Kr=require("./squared_difference"),Qr=require("./squeeze"),Yr=require("./stack"),Zr=require("./step"),$r=require("./strided_slice"),et=require("./sub"),rt=require("./sum"),tt=require("./tan"),nt=require("./tanh"),ot=require("./tensor"),it=require("./tensor1d"),ut=require("./tensor2d"),st=require("./tensor3d"),at=require("./tensor4d"),ct=require("./tensor5d"),pt=require("./tensor6d"),lt=require("./tile"),dt=require("./topk"),ft=require("./truncated_normal"),bt=require("./unique"),mt=require("./unsorted_segment_sum"),gt=require("./unstack"),xt=require("./variable"),yt=require("./where"),qt=require("./where_async"),Ot=require("./zeros"),Pt=require("./zeros_like"),jt=require("./boolean_mask");Object.keys(jt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===jt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return jt[r]}}))});var _t=require("./transpose");Object.keys(_t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===_t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return _t[r]}}))});var ht=require("./norm");Object.keys(ht).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===ht[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return ht[r]}}))});var vt=require("./moving_average");Object.keys(vt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===vt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return vt[r]}}))});var St=require("./scatter_nd");Object.keys(St).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===St[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return St[r]}}))});var Nt=require("./sparse_to_dense");Object.keys(Nt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Nt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Nt[r]}}))});var wt=require("./gather_nd");Object.keys(wt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===wt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return wt[r]}}))});var kt=require("./dropout");Object.keys(kt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===kt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return kt[r]}}))});var Mt=require("./signal_ops_util");Object.keys(Mt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Mt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Mt[r]}}))});var Et=require("./in_top_k");Object.keys(Et).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Et[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Et[r]}}))});var zt=require("./operation"),Tt=qn(require("./fused_ops"));exports.fused=Tt;var At=require("./signal/hamming_window"),Dt=require("./signal/hann_window"),Ct=require("./signal/frame"),Lt=require("./signal/stft"),Rt=require("./image/crop_and_resize"),Wt=require("./image/flip_left_right"),Bt=require("./image/grayscale_to_rgb"),Ft=require("./image/rotate_with_offset"),Gt=require("./image/non_max_suppression"),It=require("./image/non_max_suppression_async"),Ut=require("./image/non_max_suppression_with_score"),Xt=require("./image/non_max_suppression_with_score_async"),Ht=require("./image/non_max_suppression_padded"),Vt=require("./image/non_max_suppression_padded_async"),Jt=require("./image/resize_bilinear"),Kt=require("./image/resize_nearest_neighbor"),Qt=require("./image/threshold"),Yt=require("./image/transform"),Zt=require("./linalg/band_part"),$t=require("./linalg/gram_schmidt"),en=require("./linalg/qr"),rn=require("./losses/absolute_difference"),tn=require("./losses/compute_weighted_loss"),nn=require("./losses/cosine_distance"),on=require("./losses/hinge_loss"),un=require("./losses/huber_loss"),sn=require("./losses/log_loss"),an=require("./losses/mean_squared_error"),cn=require("./losses/sigmoid_cross_entropy"),pn=require("./losses/softmax_cross_entropy"),ln=require("./sparse/sparse_fill_empty_rows"),dn=require("./sparse/sparse_reshape"),fn=require("./sparse/sparse_segment_mean"),bn=require("./sparse/sparse_segment_sum"),mn=require("./string/string_n_grams"),gn=require("./string/string_split"),xn=require("./string/string_to_hash_bucket_fast");function yn(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(yn=function(e){return e?t:r})(e)}function qn(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=yn(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}const On={fft:Gr.fft,ifft:Ir.ifft,rfft:Xr.rfft,irfft:Ur.irfft};exports.spectral=On;const Pn={hammingWindow:At.hammingWindow,hannWindow:Dt.hannWindow,frame:Ct.frame,stft:Lt.stft};exports.signal=Pn;const jn={flipLeftRight:Wt.flipLeftRight,grayscaleToRGB:Bt.grayscaleToRGB,resizeNearestNeighbor:Kt.resizeNearestNeighbor,resizeBilinear:Jt.resizeBilinear,rotateWithOffset:Ft.rotateWithOffset,cropAndResize:Rt.cropAndResize,nonMaxSuppression:Gt.nonMaxSuppression,nonMaxSuppressionAsync:It.nonMaxSuppressionAsync,nonMaxSuppressionWithScore:Ut.nonMaxSuppressionWithScore,nonMaxSuppressionWithScoreAsync:Xt.nonMaxSuppressionWithScoreAsync,nonMaxSuppressionPadded:Ht.nonMaxSuppressionPadded,nonMaxSuppressionPaddedAsync:Vt.nonMaxSuppressionPaddedAsync,threshold:Qt.threshold,transform:Yt.transform};exports.image=jn;const _n={bandPart:Zt.bandPart,gramSchmidt:$t.gramSchmidt,qr:en.qr};exports.linalg=_n;const hn={absoluteDifference:rn.absoluteDifference,computeWeightedLoss:tn.computeWeightedLoss,cosineDistance:nn.cosineDistance,hingeLoss:on.hingeLoss,huberLoss:un.huberLoss,logLoss:sn.logLoss,meanSquaredError:an.meanSquaredError,sigmoidCrossEntropy:cn.sigmoidCrossEntropy,softmaxCrossEntropy:pn.softmaxCrossEntropy};exports.losses=hn;const vn={sparseFillEmptyRows:ln.sparseFillEmptyRows,sparseReshape:dn.sparseReshape,sparseSegmentMean:fn.sparseSegmentMean,sparseSegmentSum:bn.sparseSegmentSum};exports.sparse=vn;const Sn={stringNGrams:mn.stringNGrams,stringSplit:gn.stringSplit,stringToHashBucketFast:xn.stringToHashBucketFast};exports.string=Sn;
},{"./abs":"aE3W","./acos":"wQJc","./acosh":"JJYu","./add":"ZDFV","./add_n":"EQUq","./all":"VAUj","./any":"OF1E","./arg_max":"wSFk","./arg_min":"Zhc7","./asin":"pS4z","./asinh":"B3dx","./atan":"Yh9p","./atan2":"eUJw","./atanh":"DlnE","./avg_pool":"iP9e","./avg_pool_3d":"df2t","./basic_lstm_cell":"yZSA","./batch_to_space_nd":"Q9gF","./batchnorm":"qqTf","./batchnorm2d":"fmF3","./batchnorm3d":"seIf","./batchnorm4d":"REgA","./bincount":"MD76","./broadcast_args":"dIQw","./broadcast_to":"qUV0","./buffer":"WyiN","./cast":"qqq3","./ceil":"S70G","./clip_by_value":"VfEE","./clone":"F06q","./complex":"Iowv","./concat":"dDdq","./concat_1d":"J9se","./concat_2d":"Y6Ad","./concat_3d":"NSM9","./concat_4d":"Yjfb","./conv1d":"n3wz","./conv2d":"oJQk","./conv2d_transpose":"GCOF","./conv3d":"VJ2T","./conv3d_transpose":"fQzO","./cos":"g9ZU","./cosh":"GpTU","./cumsum":"Kzhc","./dense_bincount":"HdYS","./depth_to_space":"U4UL","./depthwise_conv2d":"Kahd","./diag":"B6ot","./dilation2d":"q2Zv","./div":"D8Fc","./div_no_nan":"mdNH","./dot":"bUs4","./einsum":"FP9h","./elu":"a7Il","./equal":"WG94","./erf":"roFm","./exp":"zsk9","./expand_dims":"XF6l","./expm1":"ntzg","./eye":"HzEj","./fill":"e6pp","./floor":"XD37","./floorDiv":"Pk64","./gather":"ESvM","./greater":"QdS7","./greater_equal":"Dbo2","./imag":"C5d3","./is_finite":"JMGA","./is_inf":"PwB1","./is_nan":"LVjE","./leaky_relu":"hUKE","./less":"Ndy5","./less_equal":"FvS1","./linspace":"encs","./local_response_normalization":"wFSX","./log":"vwHA","./log1p":"PxfL","./log_sigmoid":"lXsJ","./log_softmax":"I1du","./log_sum_exp":"MQ55","./logical_and":"lYzt","./logical_not":"XZse","./logical_or":"HD5h","./logical_xor":"FEKV","./mat_mul":"mMWq","./max":"iipD","./max_pool":"hJeZ","./max_pool_3d":"Cet1","./max_pool_with_argmax":"gxl3","./maximum":"X5MV","./mean":"jwZo","./meshgrid":"JdaY","./min":"w9We","./minimum":"crIr","./mirror_pad":"yI5U","./mod":"lYF1","./moments":"rBcz","./mul":"k2PI","./multi_rnn_cell":"V2Xb","./multinomial":"GA9C","./neg":"iGYA","./not_equal":"jVu5","./one_hot":"ETzZ","./ones":"POxQ","./ones_like":"VzlV","./outer_product":"lKlD","./pad":"hajs","./pad1d":"aLXo","./pad2d":"OUX7","./pad3d":"Exwp","./pad4d":"HxGt","./pool":"T3We","./pow":"vt1B","./prelu":"mkuj","./print":"xBTU","./prod":"pvB6","./rand":"WpBM","./random_gamma":"fM99","./random_normal":"gSkF","./random_uniform":"yl8A","./range":"gc29","./real":"cKEu","./reciprocal":"w0Wv","./relu":"SJP3","./relu6":"MNkg","./reshape":"QI4k","./reverse":"SxGN","./reverse_1d":"dTCT","./reverse_2d":"jAVH","./reverse_3d":"fmHW","./reverse_4d":"CaS6","./round":"J1Ke","./rsqrt":"XwKw","./scalar":"Ay42","./selu":"nLmU","./separable_conv2d":"M7Hy","./setdiff1d_async":"cgP9","./sigmoid":"yARQ","./sign":"cGq1","./sin":"AdWB","./sinh":"fN3P","./slice":"zP07","./slice1d":"lQVK","./slice2d":"r8xQ","./slice3d":"jraI","./slice4d":"r60P","./softmax":"xLGH","./softplus":"eE4m","./space_to_batch_nd":"rWul","./spectral/fft":"e6Hs","./spectral/ifft":"PxKB","./spectral/irfft":"gr1H","./spectral/rfft":"AYvX","./split":"VA1I","./sqrt":"iJpu","./square":"mJRX","./squared_difference":"gsmP","./squeeze":"ZVMV","./stack":"TWBn","./step":"e2o4","./strided_slice":"Q58L","./sub":"dGex","./sum":"ITAy","./tan":"DosY","./tanh":"ZRNG","./tensor":"P2QC","./tensor1d":"pBg9","./tensor2d":"WnBr","./tensor3d":"v3VY","./tensor4d":"VxHJ","./tensor5d":"qXmw","./tensor6d":"GISR","./tile":"mfii","./topk":"GNrW","./truncated_normal":"njSi","./unique":"FtQp","./unsorted_segment_sum":"GWRE","./unstack":"JDMu","./variable":"oIio","./where":"BsuI","./where_async":"md2p","./zeros":"R5fo","./zeros_like":"PDcB","./boolean_mask":"hPEM","./transpose":"uQkx","./norm":"Twvf","./moving_average":"HWJh","./scatter_nd":"QGqq","./sparse_to_dense":"vYKY","./gather_nd":"UkmN","./dropout":"sFBi","./signal_ops_util":"A6ms","./in_top_k":"JOMU","./operation":"JtaO","./fused_ops":"nQCt","./signal/hamming_window":"lH5U","./signal/hann_window":"BcoI","./signal/frame":"Qvnk","./signal/stft":"yVfo","./image/crop_and_resize":"p8Dt","./image/flip_left_right":"JzVv","./image/grayscale_to_rgb":"Ec4a","./image/rotate_with_offset":"GZBW","./image/non_max_suppression":"KRSK","./image/non_max_suppression_async":"eCHR","./image/non_max_suppression_with_score":"Ym4G","./image/non_max_suppression_with_score_async":"q1EX","./image/non_max_suppression_padded":"Su3I","./image/non_max_suppression_padded_async":"KZ0X","./image/resize_bilinear":"XoGL","./image/resize_nearest_neighbor":"Lavm","./image/threshold":"NPov","./image/transform":"pF1y","./linalg/band_part":"l61h","./linalg/gram_schmidt":"IagJ","./linalg/qr":"hSXe","./losses/absolute_difference":"sqiT","./losses/compute_weighted_loss":"SdDZ","./losses/cosine_distance":"dFeu","./losses/hinge_loss":"kvcm","./losses/huber_loss":"VRHQ","./losses/log_loss":"R42n","./losses/mean_squared_error":"NOcW","./losses/sigmoid_cross_entropy":"oaMf","./losses/softmax_cross_entropy":"rYqN","./sparse/sparse_fill_empty_rows":"EPMc","./sparse/sparse_reshape":"d8Hq","./sparse/sparse_segment_mean":"EpSg","./sparse/sparse_segment_sum":"vkaa","./string/string_n_grams":"XtBx","./string/string_split":"z59V","./string/string_to_hash_bucket_fast":"ywpJ"}],"uOca":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Optimizer=void 0;var e=require("../globals"),t=require("../gradients"),i=require("../ops/ops"),s=require("../serialization");class r extends s.Serializable{minimize(t,i=!1,s){const{value:r,grads:n}=this.computeGradients(t,s);if(null!=s){const e=s.map(e=>({name:e.name,tensor:n[e.name]}));this.applyGradients(e)}else this.applyGradients(n);return(0,e.dispose)(n),i?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,i){return(0,t.variableGrads)(e,i)}dispose(){null!=this.iterations_&&(0,e.dispose)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,i.scalar)(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+`${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}exports.Optimizer=r,Object.defineProperty(r,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});
},{"../globals":"GWnL","../gradients":"yPDw","../ops/ops":"R1mJ","../serialization":"HDfU"}],"NZz8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdadeltaOptimizer=void 0;var a=require("../engine"),e=require("../globals"),s=require("../ops/add"),i=require("../ops/div"),t=require("../ops/mul"),r=require("../ops/ops"),l=require("../ops/square"),n=require("../ops/zeros_like"),u=require("../serialization"),d=require("./optimizer");class o extends d.Optimizer{constructor(e,s,i=null){super(),this.learningRate=e,this.rho=s,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==i&&(this.epsilon=a.ENGINE.backend.epsilon())}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((d,o)=>{const c=a.ENGINE.registeredVariables[d];null==this.accumulatedGrads[o]&&(this.accumulatedGrads[o]={originalName:`${d}/accum_grad`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))}),null==this.accumulatedUpdates[o]&&(this.accumulatedUpdates[o]={originalName:`${d}/accum_var`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))});const m=Array.isArray(u)?u[o].tensor:u[d];if(null==m)return;const h=this.accumulatedGrads[o].variable,p=this.accumulatedUpdates[o].variable;(0,e.tidy)(()=>{const a=(0,s.add)((0,t.mul)(h,this.rho),(0,t.mul)((0,l.square)(m),1-this.rho)),e=(0,t.mul)((0,i.div)((0,r.sqrt)((0,s.add)(p,this.epsilon)),(0,r.sqrt)((0,s.add)(h,this.epsilon))),m),n=(0,s.add)((0,t.mul)(p,this.rho),(0,t.mul)((0,l.square)(e),1-this.rho));h.assign(a),p.assign(n);const u=(0,s.add)((0,t.mul)(e,-this.learningRate),c);c.assign(u)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,e.dispose)(this.accumulatedGrads.map(a=>a.variable)),(0,e.dispose)(this.accumulatedUpdates.map(a=>a.variable)))}async getWeights(){const a=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(a.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){const e=(a=await this.extractIterations(a)).length/2;this.accumulatedGrads=a.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)})),this.accumulatedUpdates=a.slice(e,2*e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(a,e){return new a(e.learningRate,e.rho,e.epsilon)}}exports.AdadeltaOptimizer=o,o.className="Adadelta",(0,u.registerClass)(o);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/ops":"R1mJ","../ops/square":"mJRX","../ops/zeros_like":"PDcB","../serialization":"HDfU","./optimizer":"uOca"}],"oWMZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdagradOptimizer=void 0;var a=require("../engine"),e=require("../globals"),i=require("../ops/add"),r=require("../ops/div"),t=require("../ops/fill"),s=require("../ops/mul"),l=require("../ops/sqrt"),n=require("../ops/square"),u=require("../serialization"),c=require("./optimizer");class o extends c.Optimizer{constructor(a,e=.1){super(),this.learningRate=a,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((c,o)=>{const d=a.ENGINE.registeredVariables[c];if(null==this.accumulatedGrads[o]){const a=!1;this.accumulatedGrads[o]={originalName:`${c}/accumulator`,variable:(0,e.tidy)(()=>(0,t.fill)(d.shape,this.initialAccumulatorValue).variable(a))}}const m=Array.isArray(u)?u[o].tensor:u[c];if(null==m)return;const p=this.accumulatedGrads[o].variable;(0,e.tidy)(()=>{const e=(0,i.add)(p,(0,n.square)(m));p.assign(e);const t=(0,i.add)((0,s.mul)((0,r.div)(m,(0,l.sqrt)((0,i.add)(e,a.ENGINE.backend.epsilon()))),-this.learningRate),d);d.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,e.dispose)(this.accumulatedGrads.map(a=>a.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){a=await this.extractIterations(a);this.accumulatedGrads=a.map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(a,e){return new a(e.learningRate,e.initialAccumulatorValue)}}exports.AdagradOptimizer=o,o.className="Adagrad",(0,u.registerClass)(o);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/fill":"e6pp","../ops/mul":"k2PI","../ops/sqrt":"iJpu","../ops/square":"mJRX","../serialization":"HDfU","./optimizer":"uOca"}],"K7FB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamOptimizer=void 0;var e=require("../engine"),t=require("../globals"),a=require("../ops/add"),i=require("../ops/div"),s=require("../ops/mul"),r=require("../ops/pow"),n=require("../ops/scalar"),c=require("../ops/sqrt"),o=require("../ops/square"),l=require("../ops/sub"),u=require("../ops/zeros_like"),m=require("../serialization"),d=require("./optimizer");class h extends d.Optimizer{constructor(a,i,s,r=null){super(),this.learningRate=a,this.beta1=i,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,t.tidy)(()=>{this.accBeta1=(0,n.scalar)(i).variable(),this.accBeta2=(0,n.scalar)(s).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(r){const n=Array.isArray(r)?r.map(e=>e.name):Object.keys(r);(0,t.tidy)(()=>{const m=(0,l.sub)(1,this.accBeta1),d=(0,l.sub)(1,this.accBeta2);n.forEach((n,l)=>{const h=e.ENGINE.registeredVariables[n];null==this.accumulatedFirstMoment[l]&&(this.accumulatedFirstMoment[l]={originalName:`${n}/m`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))}),null==this.accumulatedSecondMoment[l]&&(this.accumulatedSecondMoment[l]={originalName:`${n}/v`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))});const p=Array.isArray(r)?r[l].tensor:r[n];if(null==p)return;const b=this.accumulatedFirstMoment[l].variable,g=this.accumulatedSecondMoment[l].variable,v=(0,a.add)((0,s.mul)(b,this.beta1),(0,s.mul)(p,1-this.beta1)),q=(0,a.add)((0,s.mul)(g,this.beta2),(0,s.mul)((0,o.square)(p),1-this.beta2)),M=(0,i.div)(v,m),y=(0,i.div)(q,d);b.assign(v),g.assign(q);const B=(0,a.add)((0,s.mul)((0,i.div)(M,(0,a.add)((0,c.sqrt)(y),this.epsilon)),-this.learningRate),h);h.assign(B)}),this.accBeta1.assign((0,s.mul)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,s.mul)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,t.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&(0,t.dispose)(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),(0,t.tidy)(()=>{this.accBeta1.assign((0,r.pow)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,r.pow)(this.beta2,this.iterations_+1))});const a=e.length/2;this.accumulatedFirstMoment=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}exports.AdamOptimizer=h,h.className="Adam",(0,m.registerClass)(h);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/pow":"vt1B","../ops/scalar":"Ay42","../ops/sqrt":"iJpu","../ops/square":"mJRX","../ops/sub":"dGex","../ops/zeros_like":"PDcB","../serialization":"HDfU","./optimizer":"uOca"}],"NenH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamaxOptimizer=void 0;var e=require("../engine"),i=require("../globals"),t=require("../ops/abs"),a=require("../ops/add"),s=require("../ops/div"),r=require("../ops/maximum"),n=require("../ops/mul"),l=require("../ops/scalar"),o=require("../ops/sub"),u=require("../ops/zeros_like"),c=require("../serialization"),d=require("./optimizer");class m extends d.Optimizer{constructor(t,a,s,r=null,n=0){super(),this.learningRate=t,this.beta1=a,this.beta2=s,this.epsilon=r,this.decay=n,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,i.tidy)(()=>{this.iteration=(0,l.scalar)(0).variable(),this.accBeta1=(0,l.scalar)(a).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(l){const c=Array.isArray(l)?l.map(e=>e.name):Object.keys(l);(0,i.tidy)(()=>{const i=(0,o.sub)(1,this.accBeta1),d=(0,s.div)(-this.learningRate,(0,a.add)((0,n.mul)(this.iteration,this.decay),1));c.forEach((o,c)=>{const m=e.ENGINE.registeredVariables[o];null==this.accumulatedFirstMoment[c]&&(this.accumulatedFirstMoment[c]={originalName:`${o}/m`,variable:(0,u.zerosLike)(m).variable(!1)}),null==this.accumulatedWeightedInfNorm[c]&&(this.accumulatedWeightedInfNorm[c]={originalName:`${o}/v`,variable:(0,u.zerosLike)(m).variable(!1)});const h=Array.isArray(l)?l[c].tensor:l[o];if(null==h)return;const p=this.accumulatedFirstMoment[c].variable,b=this.accumulatedWeightedInfNorm[c].variable,g=(0,a.add)((0,n.mul)(p,this.beta1),(0,n.mul)(h,1-this.beta1)),v=(0,n.mul)(b,this.beta2),y=(0,t.abs)(h),f=(0,r.maximum)(v,y);p.assign(g),b.assign(f);const N=(0,a.add)((0,n.mul)((0,s.div)(d,i),(0,s.div)(g,(0,a.add)(f,this.epsilon))),m);m.assign(N)}),this.iteration.assign((0,a.add)(this.iteration,1)),this.accBeta1.assign((0,n.mul)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,i.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&(0,i.dispose)(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,i){return new e(i.learningRate,i.beta1,i.beta2,i.epsilon,i.decay)}}exports.AdamaxOptimizer=m,m.className="Adamax",(0,c.registerClass)(m);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/abs":"aE3W","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/maximum":"X5MV","../ops/mul":"k2PI","../ops/scalar":"Ay42","../ops/sub":"dGex","../ops/zeros_like":"PDcB","../serialization":"HDfU","./optimizer":"uOca"}],"jyih":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SGDOptimizer=void 0;var e=require("../engine"),t=require("../globals"),r=require("../ops/add"),i=require("../ops/mul"),s=require("../ops/scalar"),a=require("../serialization"),n=require("./optimizer");class o extends n.Optimizer{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(s){(Array.isArray(s)?s.map(e=>e.name):Object.keys(s)).forEach((a,n)=>{const o=Array.isArray(s)?s[n].tensor:s[a];if(null==o)return;const l=e.ENGINE.registeredVariables[a];(0,t.tidy)(()=>{const e=(0,r.add)((0,i.mul)(this.c,o),l);l.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,t.keep)((0,s.scalar)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}exports.SGDOptimizer=o,o.className="SGD",(0,a.registerClass)(o);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/mul":"k2PI","../ops/scalar":"Ay42","../serialization":"HDfU","./optimizer":"uOca"}],"KNfn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MomentumOptimizer=void 0;var e=require("../engine"),t=require("../globals"),s=require("../ops/add"),i=require("../ops/mul"),a=require("../ops/scalar"),r=require("../ops/zeros_like"),n=require("../serialization"),m=require("./sgd_optimizer");class o extends m.SGDOptimizer{constructor(e,t,s=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=s,this.accumulations=[],this.m=(0,a.scalar)(this.momentum)}applyGradients(a){(Array.isArray(a)?a.map(e=>e.name):Object.keys(a)).forEach((n,m)=>{const o=e.ENGINE.registeredVariables[n];if(null==this.accumulations[m]){const e=!1;this.accumulations[m]={originalName:`${n}/momentum`,variable:(0,t.tidy)(()=>(0,r.zerosLike)(o).variable(e))}}const u=this.accumulations[m].variable,l=Array.isArray(a)?a[m].tensor:a[n];null!=l&&(0,t.tidy)(()=>{let e;const t=(0,s.add)((0,i.mul)(this.m,u),l);e=this.useNesterov?(0,s.add)((0,i.mul)(this.c,(0,s.add)(l,(0,i.mul)(t,this.m))),o):(0,s.add)((0,i.mul)(this.c,t),o),u.assign(t),o.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,t.dispose)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}exports.MomentumOptimizer=o,o.className="Momentum",(0,n.registerClass)(o);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/mul":"k2PI","../ops/scalar":"Ay42","../ops/zeros_like":"PDcB","../serialization":"HDfU","./sgd_optimizer":"jyih"}],"dtrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RMSPropOptimizer=void 0;var e=require("../engine"),a=require("../globals"),s=require("../ops/add"),t=require("../ops/div"),i=require("../ops/mul"),r=require("../ops/sqrt"),n=require("../ops/square"),u=require("../ops/sub"),l=require("../ops/zeros_like"),c=require("../serialization"),m=require("./optimizer");class d extends m.Optimizer{constructor(a,s=.9,t=0,i=null,r=!1){if(super(),this.learningRate=a,this.decay=s,this.momentum=t,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==i&&(this.epsilon=e.ENGINE.backend.epsilon()),null==a)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(c){(Array.isArray(c)?c.map(e=>e.name):Object.keys(c)).forEach((m,d)=>{const o=e.ENGINE.registeredVariables[m];null==this.accumulatedMeanSquares[d]&&(this.accumulatedMeanSquares[d]={originalName:`${m}/rms`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMoments[d]&&(this.accumulatedMoments[d]={originalName:`${m}/momentum`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMeanGrads[d]&&this.centered&&(this.accumulatedMeanGrads[d]={originalName:`${m}/mg`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))});const h=Array.isArray(c)?c[d].tensor:c[m];if(null==h)return;const p=this.accumulatedMeanSquares[d].variable,g=this.accumulatedMoments[d].variable;(0,a.tidy)(()=>{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay));if(this.centered){const a=this.accumulatedMeanGrads[d].variable,l=(0,s.add)((0,i.mul)(a,this.decay),(0,i.mul)(h,1-this.decay)),c=(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,u.sub)(e,(0,s.add)((0,n.square)(l),this.epsilon)))),m=(0,s.add)((0,i.mul)(g,this.momentum),c);p.assign(e),a.assign(l),g.assign(m);const b=(0,u.sub)(o,m);o.assign(b)}else{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay)),a=(0,s.add)((0,i.mul)(g,this.momentum),(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,s.add)(e,this.epsilon))));p.assign(e),g.assign(a);const l=(0,u.sub)(o,a);o.assign(l)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,a.dispose)(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,a.dispose)(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&(0,a.dispose)(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const a=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*a,3*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,a){return new e(a.learningRate,a.decay,a.momentum,a.epsilon,a.centered)}}exports.RMSPropOptimizer=d,d.className="RMSProp",(0,c.registerClass)(d);
},{"../engine":"Nc3Y","../globals":"GWnL","../ops/add":"ZDFV","../ops/div":"D8Fc","../ops/mul":"k2PI","../ops/sqrt":"iJpu","../ops/square":"mJRX","../ops/sub":"dGex","../ops/zeros_like":"PDcB","../serialization":"HDfU","./optimizer":"uOca"}],"UCbu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptimizerConstructors=void 0;var r=require("./adadelta_optimizer"),e=require("./adagrad_optimizer"),t=require("./adam_optimizer"),i=require("./adamax_optimizer"),a=require("./momentum_optimizer"),m=require("./rmsprop_optimizer"),u=require("./sgd_optimizer");class p{static sgd(r){return new u.SGDOptimizer(r)}static momentum(r,e,t=!1){return new a.MomentumOptimizer(r,e,t)}static rmsprop(r,e=.9,t=0,i=null,a=!1){return new m.RMSPropOptimizer(r,e,t,i,a)}static adam(r=.001,e=.9,i=.999,a=null){return new t.AdamOptimizer(r,e,i,a)}static adadelta(e=.001,t=.95,i=null){return new r.AdadeltaOptimizer(e,t,i)}static adamax(r=.002,e=.9,t=.999,a=null,m=0){return new i.AdamaxOptimizer(r,e,t,a,m)}static adagrad(r,t=.1){return new e.AdagradOptimizer(r,t)}}exports.OptimizerConstructors=p;
},{"./adadelta_optimizer":"NZz8","./adagrad_optimizer":"oWMZ","./adam_optimizer":"K7FB","./adamax_optimizer":"NenH","./momentum_optimizer":"KNfn","./rmsprop_optimizer":"dtrn","./sgd_optimizer":"jyih"}],"GtIJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.train=void 0;var r=require("./optimizers/adadelta_optimizer"),i=require("./optimizers/adagrad_optimizer"),e=require("./optimizers/adam_optimizer"),t=require("./optimizers/adamax_optimizer"),m=require("./optimizers/momentum_optimizer"),o=require("./optimizers/optimizer_constructors"),a=require("./optimizers/rmsprop_optimizer"),p=require("./optimizers/sgd_optimizer");m.MomentumOptimizer,p.SGDOptimizer,r.AdadeltaOptimizer,i.AdagradOptimizer,a.RMSPropOptimizer,t.AdamaxOptimizer,e.AdamOptimizer;const s={sgd:o.OptimizerConstructors.sgd,momentum:o.OptimizerConstructors.momentum,adadelta:o.OptimizerConstructors.adadelta,adagrad:o.OptimizerConstructors.adagrad,rmsprop:o.OptimizerConstructors.rmsprop,adamax:o.OptimizerConstructors.adamax,adam:o.OptimizerConstructors.adam};exports.train=s;
},{"./optimizers/adadelta_optimizer":"NZz8","./optimizers/adagrad_optimizer":"oWMZ","./optimizers/adam_optimizer":"K7FB","./optimizers/adamax_optimizer":"NenH","./optimizers/momentum_optimizer":"KNfn","./optimizers/optimizer_constructors":"UCbu","./optimizers/rmsprop_optimizer":"dtrn","./optimizers/sgd_optimizer":"jyih"}],"mxOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nextFrame=t;const e=(()=>"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e())();function t(){return new Promise(t=>e(()=>t()))}
},{}],"Toan":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsConsistent=n,exports.computeOutShape=o;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}function n(t,r){const n=t[0].length;t.forEach((t,r)=>{e.assert(t.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same `+`as the rank of the rest (${n})`)}),e.assert(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const o=t[0];t.forEach((t,a)=>{for(let s=0;s<n;s++)e.assert(s===r||t[s]===o[s],()=>`Error in concat${n}D: Shape of tensors[${a}] (${t}) `+`does not match the shape of the rest (${o}) `+`along the non-concatenated axis ${a}.`)})}function o(e,t){const r=e[0].slice();for(let n=1;n<e.length;n++)r[t]+=e[n][t];return r}
},{"../util":"P6nv"}],"iHyk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PARALLELIZE_THRESHOLD=void 0,exports.computeOptimalWindowSize=r;var e=require("../util");const t=30;function r(r){return r<=t?r:(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)))}exports.PARALLELIZE_THRESHOLD=t;
},{"../util":"P6nv"}],"eAkN":[function(require,module,exports) {
"use strict";function e(e,t,r){return[r*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageCenter=e;
},{}],"bsd6":[function(require,module,exports) {
"use strict";function e(e,t,s,o=!0){let u=[];if(o)(u=u.concat(t.slice(0))).push(e[0]/s),u=u.concat(e.slice(1));else{u=u.concat(e[0]);const s=t.length;for(let o=0;o<s;++o)u=u.concat([e[o+1]/t[o],t[o]]);u=u.concat(e.slice(s+1))}return u}function t(e,t,s=!0){const o=[];if(s){o.push(t);for(let s=t+1;s<e;++s)s<=2*t?(o.push(s),o.push(s-(t+1))):o.push(s)}else{const s=[],u=[];for(let o=1;o<e;++o)o>=2*t+1||o%2==1?u.push(o):s.push(o);o.push(...s),o.push(0),o.push(...u)}return o}function s(e,t,s,o=!0){const u=[];o?u.push(e[0]/s):u.push(e[0]*s);for(let n=1;n<e.length;++n)n<=t.length?o?u.push(t[n-1]*e[n]):u.push(e[n]/t[n-1]):u.push(e[n]);return u}function o(e,t){const s=[0];for(let o=0;o<t;++o)s.push(e[o][0]);return s}function u(e,t,s){const o=e.slice(0,1);for(let u=0;u<s;++u)o.push(e[u+1]-t[u][0]-t[u][1]);return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPermuted=t,exports.getReshaped=e,exports.getReshapedPermuted=s,exports.getSliceBeginCoords=o,exports.getSliceSize=u;
},{}],"ssng":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SELU_SCALEALPHA=exports.SELU_SCALE=void 0;const e=1.7580993408473768;exports.SELU_SCALEALPHA=e;const t=1.0507009873554805;exports.SELU_SCALE=t;
},{}],"iVXL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERF_P=exports.ERF_A5=exports.ERF_A4=exports.ERF_A3=exports.ERF_A2=exports.ERF_A1=void 0;const t=.3275911;exports.ERF_P=t;const o=.254829592;exports.ERF_A1=o;const s=-.284496736;exports.ERF_A2=s;const e=1.421413741;exports.ERF_A3=e;const r=-1.453152027;exports.ERF_A4=r;const p=1.061405429;exports.ERF_A5=p;
},{}],"F59n":[function(require,module,exports) {
"use strict";function t(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+`${t.length}, imag: ${e.length}.`);const r=new Float32Array(2*t.length);for(let n=0;n<r.length;n+=2)r[n]=t[n/2],r[n+1]=e[n/2];return r}function e(t){const e=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=t[n],r[n/2]=t[n+1];return{real:e,imag:r}}function r(t){const e=Math.ceil(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let o=0;o<t.length;o+=4)r[Math.floor(o/4)]=t[o],n[Math.floor(o/4)]=t[o+1];return{real:r,imag:n}}function n(t){const e=Math.floor(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let o=2;o<t.length;o+=4)r[Math.floor(o/4)]=t[o],n[Math.floor(o/4)]=t[o+1];return{real:r,imag:n}}function o(t,e){return{real:t[2*e],imag:t[2*e+1]}}function a(t,e,r,n){t[2*n]=e,t[2*n+1]=r}function l(t,e){const r=new Float32Array(t/2),n=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const a=(e?2:-2)*Math.PI*(o/t);r[o]=Math.cos(a),n[o]=Math.sin(a)}return{real:r,imag:n}}function h(t,e,r){const n=(r?2:-2)*Math.PI*(t/e);return{real:Math.cos(n),imag:Math.sin(n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignToTypedArray=a,exports.complexWithEvenIndex=r,exports.complexWithOddIndex=n,exports.exponent=h,exports.exponents=l,exports.getComplexWithIndex=o,exports.mergeRealAndImagArrays=t,exports.splitRealAndImagArrays=e;
},{}],"Fe12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkEinsumDimSizes=u,exports.decodeEinsumEquation=s,exports.getEinsumComputePath=l,exports.getEinsumPermutation=i,exports.isIdentityPermutation=p;var t=require("../util_base");const e="->",n=/->/g,o=",",r="...";function s(s,i){const u=((s=s.replace(/\s/g,"")).length-s.replace(n,"").length)/e.length;if(u<1)throw new Error("Equations without an arrow are not supported.");if(u>1)throw new Error(`Equation must contain exactly one arrow ("${e}").`);const[l,p]=s.split(e);(0,t.assert)(-1===l.indexOf(r),()=>`The ellipsis notation ("${r}") is not supported yet.`);const h=l.split(o),c=h.length;if(i!==c)throw new Error(`Expected ${c} input tensors, received ${i}`);if(c>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const f=[];for(let t=0;t<p.length;++t){const e=p[t];if(!h.some(t=>-1!==t.indexOf(e)))throw new Error(`Output subscripts contain the label ${e} `+"not present in the input subscripts.");-1===f.indexOf(e)&&f.push(e)}for(let t=0;t<l.length;++t){const e=l[t];-1===f.indexOf(e)&&e!==o&&f.push(e)}const a=new Array(h.length);for(let t=0;t<c;++t){if(new Set(h[t].split("")).size!==h[t].length)throw new Error(`Found duplicate axes in input component ${h[t]}. `+"Support for duplicate axes in input is not implemented yet.");a[t]=[];for(let e=0;e<h[t].length;++e)a[t].push(f.indexOf(h[t][e]))}const d=f.length,g=[];for(let t=p.length;t<d;++t)g.push(t);return{allDims:f,summedDims:g,idDims:a}}function i(t,e){let n=new Array(t);n.fill(-1);for(let r=0;r<e.length;++r)n[e[r]]=r;const o=[];for(let r=0;r<t;++r)-1===n[r]&&o.push(r);return{permutationIndices:n=n.filter(t=>-1!==t),expandDims:o}}function u(e,n,o){const r=new Array(e);for(let s=0;s<o.length;++s){const e=o[s].shape;for(let o=0;o<n[s].length;++o)void 0===r[n[s][o]]?r[n[s][o]]=e[o]:(0,t.assert)(r[n[s][o]]===e[o],()=>`Expected dimension ${r[n[s][o]]} at axis ${o} `+`of input shaped ${JSON.stringify(e)}, `+`but got dimension ${e[o]}`)}}function l(t,e){const n=t,o=[];let r=0;0===t.length&&n.push(-1),r=t.length+1;for(let i=0;i<r;++i)o.push([]);const s=[];for(let i=0;i<n.length;++i){const t=h(e,n[i]);for(const e of t)-1===s.indexOf(e)&&(o[i].push(e),s.push(e))}return{path:n,steps:o}}function p(t){return t.every((t,e)=>t===e)}function h(t,e){const n=[];for(let o=0;o<t.length;++o)0!==t[o].length&&-1===t[o].indexOf(e)&&-1!==e||n.push(o);return n}
},{"../util_base":"cppa"}],"Z8ze":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareSplitSize=s;var e=require("../util");function s(s,t,r=0){let i=[];if("number"==typeof t)(0,e.assert)(s.shape[r]%t==0,()=>"Number of splits must evenly divide the axis."),i=new Array(t).fill(s.shape[r]/t);else{const a=t.reduce((e,s)=>(-1===s&&(e+=1),e),0);(0,e.assert)(a<=1,()=>"There should be only one negative value in split array.");const n=t.indexOf(-1);if(-1!==n){const e=t.reduce((e,s)=>s>0?e+s:e);t[n]=s.shape[r]-e}(0,e.assert)(s.shape[r]===t.reduce((e,s)=>e+s),()=>"The sum of sizes must match the size of the axis dimension."),i=t}return i}
},{"../util":"P6nv"}],"U497":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.collectGatherOpShapeInfo=o,exports.computeOutShape=s,exports.segOpComputeOptimalWindowSize=r;var e=require("../util"),t=require("./reduce_util");function r(r,s){let o,h=!1;for(r<=t.PARALLELIZE_THRESHOLD?(o=r,h=!0):o=(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)));!h;)o>s||o===r?h=!0:o=(0,e.nearestDivisor)(r,o+1);return o}function s(e,t,r){const s=[],o=e.length;for(let h=0;h<o;h++)h!==t?s.push(e[h]):s.push(r);return s}function o(e,t,r,s){const o=t.shape.length,h=e.shape.length;if(0!==s&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>h)throw new Error(`batchDims (${s}) must be less than rank(x) (\n    ${h}).`);if(r<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${r}).`);for(let l=0;l<s;++l)if(e.shape[l]!==t.shape[l])throw new Error(`x.shape[${l}]: ${e.shape[l]} should be equal to indices.shape[${l}]: ${t.shape[l]}.`);const a=e.shape[r],p=[];let i=1,u=1,n=1;for(let l=0;l<s;++l)p.push(e.shape[l]),i*=e.shape[l];for(let l=s;l<r;l++)p.push(e.shape[l]),u*=e.shape[l];for(let l=s;l<o;l++)p.push(t.shape[l]);for(let l=r+1;l<h;l++)p.push(e.shape[l]),n*=e.shape[l];return{batchSize:i,sliceSize:n,outerSize:u,dimSize:a,outputShape:p}}
},{"../util":"P6nv","./reduce_util":"iHyk"}],"yei0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={fromUint8ToStringArray:!0,fromStringArrayToUint8:!0,slice_util:!0,upcastType:!0,segment_util:!0};exports.fromStringArrayToUint8=v,exports.fromUint8ToStringArray=m,exports.slice_util=exports.segment_util=void 0,Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return i.upcastType}});var t=require("../util"),r=require("../ops/axis_util");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var o=require("../ops/broadcast_util");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===o[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))});var n=require("../ops/concat_util");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===n[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))});var u=require("../ops/conv_util");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===u[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return u[t]}}))});var p=require("../ops/fused_util");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===p[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return p[t]}}))});var c=require("../ops/reduce_util");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===c[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return c[t]}}))});var s=g(require("../ops/slice_util"));exports.slice_util=s;var i=require("../types"),a=require("../ops/rotate_util");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===a[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var l=require("../ops/array_ops_util");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===l[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return l[t]}}))});var f=require("../ops/gather_nd_util");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===f[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return f[t]}}))});var y=require("../ops/scatter_nd_util");Object.keys(y).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===y[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return y[t]}}))});var b=require("../ops/selu_util");Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===b[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))});var O=require("../ops/erf_util");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===O[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return O[t]}}))});var d=require("../log");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===d[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return d[t]}}))});var _=require("../backends/complex_util");Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===_[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return _[t]}}))});var x=require("../backends/einsum_util");Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===x[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return x[t]}}))});var j=require("../ops/split_util");Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===j[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return j[t]}}))});var P=g(require("../ops/segment_util"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var p=n?Object.getOwnPropertyDescriptor(e,u):null;p&&(p.get||p.set)?Object.defineProperty(o,u,p):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}function m(e){try{return e.map(e=>(0,t.decodeString)(e))}catch(r){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${r}`)}}function v(e){return e.map(e=>(0,t.encodeString)(e))}exports.segment_util=P;
},{"../util":"P6nv","../ops/axis_util":"DsMP","../ops/broadcast_util":"Xh9J","../ops/concat_util":"Toan","../ops/conv_util":"Evju","../ops/fused_util":"mypO","../ops/reduce_util":"iHyk","../ops/slice_util":"Quoj","../types":"Grh1","../ops/rotate_util":"eAkN","../ops/array_ops_util":"bsd6","../ops/gather_nd_util":"ZyFe","../ops/scatter_nd_util":"H15o","../ops/selu_util":"ssng","../ops/erf_util":"iVXL","../log":"EnTq","../backends/complex_util":"F59n","../backends/einsum_util":"Fe12","../ops/split_util":"Z8ze","../ops/segment_util":"U497"}],"F9kw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"nonMaxSuppressionV3Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV3Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV4Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV4Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV5Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV5Impl}}),Object.defineProperty(exports,"whereImpl",{enumerable:!0,get:function(){return r.whereImpl}});var e=require("./non_max_suppression_impl"),r=require("./where_impl");
},{"./non_max_suppression_impl":"zkpa","./where_impl":"tgEp"}],"aWHA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={io:!0,math:!0,browser:!0,gather_util:!0,scatter_util:!0,slice_util:!0,serialization:!0,tensor_util:!0,test_util:!0,util:!0,version_core:!0,AdadeltaOptimizer:!0,AdagradOptimizer:!0,AdamOptimizer:!0,AdamaxOptimizer:!0,MomentumOptimizer:!0,Optimizer:!0,RMSPropOptimizer:!0,SGDOptimizer:!0,Tensor:!0,TensorBuffer:!0,Variable:!0,Rank:!0,sumOutType:!0,upcastType:!0,Reduction:!0,customGrad:!0,grad:!0,grads:!0,valueAndGrad:!0,valueAndGrads:!0,variableGrads:!0,Environment:!0,env:!0,ENV:!0,nextFrame:!0,backend_util:!0,device_util:!0,kernel_impls:!0,KernelBackend:!0,DataStorage:!0};Object.defineProperty(exports,"AdadeltaOptimizer",{enumerable:!0,get:function(){return d.AdadeltaOptimizer}}),Object.defineProperty(exports,"AdagradOptimizer",{enumerable:!0,get:function(){return m.AdagradOptimizer}}),Object.defineProperty(exports,"AdamOptimizer",{enumerable:!0,get:function(){return f.AdamOptimizer}}),Object.defineProperty(exports,"AdamaxOptimizer",{enumerable:!0,get:function(){return b.AdamaxOptimizer}}),Object.defineProperty(exports,"DataStorage",{enumerable:!0,get:function(){return E.DataStorage}}),Object.defineProperty(exports,"ENV",{enumerable:!0,get:function(){return A.ENV}}),Object.defineProperty(exports,"Environment",{enumerable:!0,get:function(){return A.Environment}}),Object.defineProperty(exports,"KernelBackend",{enumerable:!0,get:function(){return E.KernelBackend}}),Object.defineProperty(exports,"MomentumOptimizer",{enumerable:!0,get:function(){return O.MomentumOptimizer}}),Object.defineProperty(exports,"Optimizer",{enumerable:!0,get:function(){return x.Optimizer}}),Object.defineProperty(exports,"RMSPropOptimizer",{enumerable:!0,get:function(){return y.RMSPropOptimizer}}),Object.defineProperty(exports,"Rank",{enumerable:!0,get:function(){return v.Rank}}),Object.defineProperty(exports,"Reduction",{enumerable:!0,get:function(){return P.Reduction}}),Object.defineProperty(exports,"SGDOptimizer",{enumerable:!0,get:function(){return _.SGDOptimizer}}),Object.defineProperty(exports,"Tensor",{enumerable:!0,get:function(){return g.Tensor}}),Object.defineProperty(exports,"TensorBuffer",{enumerable:!0,get:function(){return g.TensorBuffer}}),Object.defineProperty(exports,"Variable",{enumerable:!0,get:function(){return g.Variable}}),exports.browser=exports.backend_util=void 0,Object.defineProperty(exports,"customGrad",{enumerable:!0,get:function(){return h.customGrad}}),exports.device_util=void 0,Object.defineProperty(exports,"env",{enumerable:!0,get:function(){return A.env}}),exports.gather_util=void 0,Object.defineProperty(exports,"grad",{enumerable:!0,get:function(){return h.grad}}),Object.defineProperty(exports,"grads",{enumerable:!0,get:function(){return h.grads}}),exports.math=exports.kernel_impls=exports.io=void 0,Object.defineProperty(exports,"nextFrame",{enumerable:!0,get:function(){return M.nextFrame}}),exports.slice_util=exports.serialization=exports.scatter_util=void 0,Object.defineProperty(exports,"sumOutType",{enumerable:!0,get:function(){return v.sumOutType}}),exports.test_util=exports.tensor_util=void 0,Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return v.upcastType}}),exports.util=void 0,Object.defineProperty(exports,"valueAndGrad",{enumerable:!0,get:function(){return h.valueAndGrad}}),Object.defineProperty(exports,"valueAndGrads",{enumerable:!0,get:function(){return h.valueAndGrads}}),Object.defineProperty(exports,"variableGrads",{enumerable:!0,get:function(){return h.variableGrads}}),Object.defineProperty(exports,"version_core",{enumerable:!0,get:function(){return l.version}});var r=D(require("./io/io"));exports.io=r;var t=D(require("./math"));exports.math=t;var i=D(require("./ops/browser"));exports.browser=i;var n=D(require("./ops/gather_nd_util"));exports.gather_util=n;var o=D(require("./ops/scatter_nd_util"));exports.scatter_util=o;var u=D(require("./ops/slice_util"));exports.slice_util=u;var a=D(require("./serialization"));exports.serialization=a;var p=D(require("./tensor_util"));exports.tensor_util=p;var s=D(require("./test_util"));exports.test_util=s;var c=D(require("./util"));exports.util=c;var l=require("./version"),d=require("./optimizers/adadelta_optimizer"),m=require("./optimizers/adagrad_optimizer"),f=require("./optimizers/adam_optimizer"),b=require("./optimizers/adamax_optimizer"),O=require("./optimizers/momentum_optimizer"),x=require("./optimizers/optimizer"),y=require("./optimizers/rmsprop_optimizer"),_=require("./optimizers/sgd_optimizer"),g=require("./tensor"),v=require("./types"),j=require("./ops/ops");Object.keys(j).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===j[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return j[r]}}))});var P=require("./ops/loss_ops_utils"),z=require("./train");Object.keys(z).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===z[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return z[r]}}))});var q=require("./globals");Object.keys(q).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===q[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return q[r]}}))});var k=require("./kernel_registry");Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===k[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return k[r]}}))});var h=require("./gradients"),A=require("./environment"),M=require("./browser_util"),w=D(require("./backends/backend_util"));exports.backend_util=w;var G=D(require("./device_util"));exports.device_util=G;var T=D(require("./backends/kernel_impls"));exports.kernel_impls=T;var E=require("./backends/backend"),R=require("./kernel_names");function S(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(S=function(e){return e?t:r})(e)}function D(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=S(r);if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(i,o,u):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}Object.keys(R).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===R[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return R[r]}}))});
},{"./io/io":"EwEE","./math":"bMAY","./ops/browser":"yVDt","./ops/gather_nd_util":"ZyFe","./ops/scatter_nd_util":"H15o","./ops/slice_util":"Quoj","./serialization":"HDfU","./tensor_util":"fpST","./test_util":"ip5I","./util":"P6nv","./version":"SdA6","./optimizers/adadelta_optimizer":"NZz8","./optimizers/adagrad_optimizer":"oWMZ","./optimizers/adam_optimizer":"K7FB","./optimizers/adamax_optimizer":"NenH","./optimizers/momentum_optimizer":"KNfn","./optimizers/optimizer":"uOca","./optimizers/rmsprop_optimizer":"dtrn","./optimizers/sgd_optimizer":"jyih","./tensor":"DTHt","./types":"Grh1","./ops/ops":"R1mJ","./ops/loss_ops_utils":"LIoB","./train":"GtIJ","./globals":"GWnL","./kernel_registry":"wJg6","./gradients":"yPDw","./environment":"Fbeg","./browser_util":"mxOd","./backends/backend_util":"yei0","./device_util":"GUPw","./backends/kernel_impls":"F9kw","./backends/backend":"X4AU","./kernel_names":"sdEe"}],"tc6m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./base_side_effects");var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"./base_side_effects":"i0z4","./base":"aWHA"}],"S11S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearWebGLContext=n,exports.getWebGLContext=r,exports.setWebGLContext=o;const e={},t={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function n(t){delete e[t]}function o(t,n){e[t]=n}function r(t){if(!(t in e)){const n=l(t);if(null===n)return console.log("Could not get context for WebGL version",t),null;e[t]=n}const n=e[t];return n.isContextLost()?(delete e[t],r(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),e[t])}function a(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function l(n){if(1!==n&&2!==n)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const o=a(n);return o.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete e[n]},!1),1===n?o.getContext("webgl",t)||o.getContext("experimental-webgl",t):o.getContext("webgl2",t)}
},{}],"hBHG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextureUsage=exports.PhysicalTextureType=exports.PackingScheme=void 0,exports.decodeMatrixFromUnpackedColorRGBAArray=A,exports.getColorMatrixTextureShapeWidthHeight=i,exports.getDenseTexShape=u,exports.getMatrixSizeFromUnpackedArraySize=l,exports.getPackedMatrixTextureShapeWidthHeight=x,exports.getPackedRGBAArraySizeFromMatrixShape=c,exports.getTextureConfig=s,exports.getUnpackedArraySizeFromMatrixSize=n,exports.getUnpackedMatrixTextureShapeWidthHeight=a;var e,t,r,o=require("@tensorflow/tfjs-core");function a(e,t){return[t,e]}function n(e,t){return e*t}function i(e,t){return[4*t,e]}function u(e){const t=o.util.sizeFromShape(e),r=Math.ceil(t/4);return o.util.sizeToSquarishShape(r)}function l(e,t){if(e%t!=0)throw new Error(`unpackedSize (${e}) must be a multiple of `+`${t}`);return e/t}function A(e,t,r){const o=e.length*r/4;if(t.length<o)throw new Error(`matrix length (${t.length}) must be >= ${o}`);let a=0;for(let n=0;n<e.length;n+=4)for(let o=0;o<r;o++)t[a++]=e[n+o]}function x(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function c(e,t){const[r,o]=x(e,t);return r*o*4}function s(e,t){const r=e;let a,n,i,u,l,A,x,c,s,p;return 2===(0,o.env)().getNumber("WEBGL_VERSION")?(a=r.R32F,n=r.R16F,i=r.RGBA16F,u=r.RGBA32F,l=r.RED,x=4,c=1,s=r.HALF_FLOAT,p=r.FLOAT):(a=e.RGBA,n=e.RGBA,i=e.RGBA,u=r.RGBA,l=e.RGBA,x=4,c=4,s=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT),{internalFormatFloat:a,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:u,textureFormatFloat:l,downloadTextureFormat:A=e.RGBA,downloadUnpackNumChannels:x,defaultNumChannels:c,textureTypeHalfFloat:s,textureTypeFloat:p}}exports.PackingScheme=e,function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(e||(exports.PackingScheme=e={})),exports.TextureUsage=t,function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(t||(exports.TextureUsage=t={})),exports.PhysicalTextureType=r,function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(r||(exports.PhysicalTextureType=r={}));
},{"@tensorflow/tfjs-core":"tc6m"}],"p3g2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertNotComplex=te,exports.bindCanvasToFramebuffer=I,exports.bindColorTextureToFramebuffer=O,exports.bindTextureToProgramUniformSampler=S,exports.bindTextureUnit=U,exports.bindVertexBufferToProgramAttribute=d,exports.callAndCheck=n,exports.canBeRepresented=i,exports.createFragmentShader=l,exports.createFramebuffer=A,exports.createProgram=F,exports.createStaticIndexBuffer=_,exports.createStaticVertexBuffer=x,exports.createTexture=h,exports.createVertexShader=s,exports.getBatchDim=w,exports.getExtensionOrThrow=f,exports.getFramebufferErrorMessage=C,exports.getMaxTexturesInShader=z,exports.getNumChannels=b,exports.getProgramUniformLocation=L,exports.getProgramUniformLocationOrThrow=M,exports.getRowsCols=G,exports.getShapeAs3D=X,exports.getTextureShapeFromLogicalShape=W,exports.getWebGLDisjointQueryTimerVersion=j,exports.getWebGLErrorMessage=E,exports.getWebGLMaxTextureSize=H,exports.hasExtension=Y,exports.isCapableOfRenderingToFloatTexture=K,exports.isDownloadFloatTextureEnabled=Q,exports.isReshapeFree=V,exports.isWebGLFenceEnabled=re,exports.isWebGLVersionEnabled=Z,exports.linkProgram=R,exports.resetMaxTextureSize=k,exports.resetMaxTexturesInShader=q,exports.unbindColorTextureFromFramebuffer=B,exports.unbindTextureUnit=p,exports.validateFramebuffer=N,exports.validateProgram=g,exports.validateTextureSize=m;var e=require("@tensorflow/tfjs-core"),r=require("./canvas_util"),t=require("./tex_util");function n(r,t){const n=t();return(0,e.env)().getBool("DEBUG")&&o(r),n}function o(e){const r=e.getError();if(r!==e.NO_ERROR)throw new Error("WebGL Error: "+E(e,r))}const u=5.96e-8,a=65504;function i(r){return!!((0,e.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===r||u<Math.abs(r)&&Math.abs(r)<a)}function E(e,r){switch(r){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function f(e,r){return D(e,()=>e.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function s(e,r){const t=D(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(n(e,()=>e.shaderSource(t,r)),n(e,()=>e.compileShader(t)),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function l(e,r){const t=D(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(n(e,()=>e.shaderSource(t,r)),n(e,()=>e.compileShader(t)),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw T(r,e.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const c=/ERROR: [0-9]+:([0-9]+):/g;function T(r,t){const n=c.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(r);const o=+n[1],u=r.split("\n"),a=u.length.toString().length+2,i=u.map((r,t)=>e.util.rightPad((t+1).toString(),a)+r);let E=0;for(let e=0;e<i.length;e++)E=Math.max(i[e].length,E);const f=i.slice(0,o-1),s=i.slice(o-1,o),l=i.slice(o);console.log(f.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${e.util.rightPad(s[0],E)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function F(e){return D(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function R(e,r){if(n(e,()=>e.linkProgram(r)),!1===e.getProgramParameter(r,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function g(e,r){if(n(e,()=>e.validateProgram(r)),!1===e.getProgramParameter(r,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function x(e,r){const t=D(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return n(e,()=>e.bindBuffer(e.ARRAY_BUFFER,t)),n(e,()=>e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)),t}function _(e,r){const t=D(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return n(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t)),n(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)),t}function b(){return 2===(0,e.env)().getNumber("WEBGL_VERSION")?1:4}function h(e){return D(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function m(r,t){const n=(0,e.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(r<=0||t<=0){throw new Error("Requested texture size "+`[${r}x${t}]`+" is invalid.")}if(r>n||t>n){throw new Error("Requested texture size "+`[${r}x${t}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}}function A(e){return D(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function d(e,r,t,o,u,a,i){const E=e.getAttribLocation(r,t);return-1!==E&&(n(e,()=>e.bindBuffer(e.ARRAY_BUFFER,o)),n(e,()=>e.vertexAttribPointer(E,u,e.FLOAT,!1,a,i)),n(e,()=>e.enableVertexAttribArray(E)),!0)}function U(e,r,t){P(e,t),n(e,()=>e.activeTexture(e.TEXTURE0+t)),n(e,()=>e.bindTexture(e.TEXTURE_2D,r))}function p(e,r){P(e,r),n(e,()=>e.activeTexture(e.TEXTURE0+r)),n(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function M(e,r,t){return D(e,()=>e.getUniformLocation(r,t),'uniform "'+t+'" not present in program.')}function L(e,r,t){return e.getUniformLocation(r,t)}function S(e,r,t,o){n(e,()=>U(e,r,o)),n(e,()=>e.uniform1i(t,o))}function I(e){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),n(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),n(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function O(e,r,t){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),n(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0))}function B(e,r){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,r)),n(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function N(e){const r=e.checkFramebufferStatus(e.FRAMEBUFFER);if(r!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+C(e,r))}function C(e,r){switch(r){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function D(e,r,t){const o=n(e,()=>r());if(null==o)throw new Error(t);return o}function P(e,r){const t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=r+e.TEXTURE0;if(n<e.TEXTURE0||n>t){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${t}]`}.`)}}function w(r,t=2){return e.util.sizeFromShape(r.slice(0,r.length-t))}function G(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function X(e){let r=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(r=[w(e),...G(e)]),r}function W(r,t=!1){let n=(0,e.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(r=r.map((t,n)=>n>=r.length-2?e.util.nearestLargerEven(r[n]):r[n])).length&&(r=[2,r[0]])),2!==r.length){const t=e.util.squeezeShape(r);r=t.newShape}let o=e.util.sizeFromShape(r);if(r.length<=1&&o<=n)return[1,o];if(2===r.length&&r[0]<=n&&r[1]<=n)return r;if(3===r.length&&r[0]*r[1]<=n&&r[2]<=n)return[r[0]*r[1],r[2]];if(3===r.length&&r[0]<=n&&r[1]*r[2]<=n)return[r[0],r[1]*r[2]];if(4===r.length&&r[0]*r[1]*r[2]<=n&&r[3]<=n)return[r[0]*r[1]*r[2],r[3]];if(4===r.length&&r[0]<=n&&r[1]*r[2]*r[3]<=n)return[r[0],r[1]*r[2]*r[3]];if(t){const t=w(r);let n=2,u=2;return r.length&&([n,u]=G(r)),o=t*(n/2)*(u/2),e.util.sizeToSquarishShape(o).map(e=>2*e)}return e.util.sizeToSquarishShape(o)}function v(e){return e%2==0}function V(r,t){if(r=r.slice(-2),t=t.slice(-2),e.util.arraysEqual(r,t))return!0;if(!r.length||!t.length)return!0;if(0===r[0]||0===r[1]||0===t[0]||0===t[1])return!0;if(r.length!==t.length){const e=r.slice(-1)[0],n=t.slice(-1)[0];if(e===n)return!0;if(v(e)&&v(n)&&(1===r[0]||1===t[0]))return!0}return r[1]===t[1]&&v(r[0])&&v(t[0])}let y,$;function H(e){if(null==y){const t=(0,r.getWebGLContext)(e);y=t.getParameter(t.MAX_TEXTURE_SIZE)}return y}function k(){y=null}function q(){$=null}function z(e){if(null==$){const t=(0,r.getWebGLContext)(e);$=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$)}function j(e){if(0===e)return 0;let t;const n=(0,r.getWebGLContext)(e);return t=Y(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Y(n,"EXT_disjoint_timer_query")?1:0}function Y(e,r){return null!=e.getExtension(r)}function Z(e){try{if(null!=(0,r.getWebGLContext)(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function K(e){if(0===e)return!1;const t=(0,r.getWebGLContext)(e);if(1===e){if(!Y(t,"OES_texture_float"))return!1}else if(!Y(t,"EXT_color_buffer_float"))return!1;return J(t)}function Q(e){if(0===e)return!1;const t=(0,r.getWebGLContext)(e);if(1!==e){if(Y(t,"EXT_color_buffer_float"))return J(t);const e="EXT_color_buffer_half_float";if(Y(t,e)){const r=t.getExtension(e);return ee(t,r)}return!1}return!!Y(t,"OES_texture_float")&&(!!Y(t,"WEBGL_color_buffer_float")&&J(t))}function J(e){const r=(0,t.getTextureConfig)(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(o),u}function ee(e,r){const n=(0,t.getTextureConfig)(e,r),o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const u=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(o),e.deleteFramebuffer(u),a}function re(e){if(2!==e)return!1;return null!=(0,r.getWebGLContext)(e).fenceSync}function te(r,t){Array.isArray(r)||(r=[r]),r.forEach(r=>{null!=r&&e.util.assert("complex64"!==r.dtype,()=>`${t} does not support complex64 tensors `+"in the WebGL backend.")})}
},{"@tensorflow/tfjs-core":"tc6m","./canvas_util":"S11S","./tex_util":"hBHG"}],"YNu6":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),E=require("./webgl_util");const _=(0,e.env)();_.registerFlag("HAS_WEBGL",()=>_.getNumber("WEBGL_VERSION")>0),_.registerFlag("WEBGL_VERSION",()=>(0,E.isWebGLVersionEnabled)(2)?2:(0,E.isWebGLVersionEnabled)(1)?1:0),_.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),_.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===_.get("WEBGL_VERSION")),_.registerFlag("WEBGL_CPU_FORWARD",()=>!0),_.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),_.registerFlag("WEBGL_PACK",()=>_.getBool("HAS_WEBGL")),_.registerFlag("WEBGL_PACK_NORMALIZATION",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_CLIP",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_REDUCE",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_LAZILY_UNPACK",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_CONV_IM2COL",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>(0,E.getWebGLMaxTextureSize)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>(0,E.getMaxTexturesInShader)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=_.getNumber("WEBGL_VERSION");return 0===e?0:(0,E.getWebGLDisjointQueryTimerVersion)(e)}),_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>_.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!e.device_util.isMobile()),_.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>(0,E.isCapableOfRenderingToFloatTexture)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!_.getBool("WEBGL_FORCE_F16_TEXTURES")&&_.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),_.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>(0,E.isDownloadFloatTextureEnabled)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_FENCE_API_ENABLED",()=>(0,E.isWebGLFenceEnabled)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{return _.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),_.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+`delete) or at least 0, but got ${e}.`)}),_.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>e.device_util.isMobile()?1:-1,e=>{if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+`manual flush) or at least 0, but got ${e}.`)}),_.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),_.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),_.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),_.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);
},{"@tensorflow/tfjs-core":"tc6m","./webgl_util":"p3g2"}],"QbWp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlslDifferences=e;var n=require("@tensorflow/tfjs-core");function e(){let e,a,t,u,l,v,o,r,i,s;return 2===(0,n.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",a="in",t="out",u="in",l="texture",v="outputColor",o="out vec4 outputColor;",r="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",i="",s="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",a="attribute",t="varying",u="varying",l="texture2D",v="gl_FragColor",o="",r="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",i="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",s="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:a,varyingVs:t,varyingFs:u,texture2D:l,output:v,defineOutput:o,defineSpecialNaN:r,defineSpecialInf:i,defineRound:s}}
},{"@tensorflow/tfjs-core":"tc6m"}],"vOsJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENCODE_FLOAT_SNIPPET=void 0,exports.dotify=c,exports.getFlatIndexFrom3D=s,exports.getFlatIndexFrom3DOutput=l,exports.getLogicalCoordinatesFromFlatIndex=t,exports.getLogicalCoordinatesFromFlatIndexByUniform=r,exports.getOutputLogicalCoordinatesFromFlatIndexByUniform=e;var n=require("@tensorflow/tfjs-core");function t(t,e,o="index"){const r=n.util.computeStrides(e);return r.map((n,e)=>{return`${`int ${t[e]} = ${o} / ${n}`}; ${e===r.length-1?`int ${t[e+1]} = ${o} - ${t[e]} * ${n}`:`index -= ${t[e]} * ${n}`};`}).join("")}function e(t,e,o="index"){const r=n.util.computeStrides(e);return r.map((n,e)=>{return`${`int ${t[e]} = ${o} / outShapeStrides[${e}]`}; ${e===r.length-1?`int ${t[e+1]} = ${o} - ${t[e]} * outShapeStrides[${e}]`:`index -= ${t[e]} * outShapeStrides[${e}]`};`}).join("")}function o(n,t){const e=n.length,o=n.map(n=>`${t}[${n}]`),r=new Array(e-1);r[e-2]=o[e-1];for(let i=e-3;i>=0;--i)r[i]=`(${r[i+1]} * ${o[i+1]})`;return r}function r(n,t,e="index"){const r=o(n.map((n,t)=>t),t);return r.map((t,o)=>{return`${`int ${n[o]} = ${e} / ${r[o]}`}; ${o===r.length-1?`int ${n[o+1]} = ${e} - ${n[o]} * ${r[o]}`:`index -= ${n[o]} * ${r[o]}`};`}).join("")}function i(n){return 1===n.length?`${n[0]}`:`vec${n.length}(${n.join(",")})`}function c(n,t){if(n.length!==t.length)throw new Error("Vectors to be dotted must be of the same length -"+`got ${n.length} and ${t.length}`);const e=[],o=Math.floor(n.length/4),r=n.length%4;for(let c=0;c<o;c++){const o=n.slice(4*c,4*c+4),r=t.slice(4*c,4*c+4);e.push(`${i(o)}, ${i(r)}`)}if(0!==r){let r=n.slice(4*o),c=t.slice(4*o);1===r.length&&(r=r.map(n=>`float(${n})`),c=c.map(n=>`float(${n})`)),e.push(`${i(r)}, ${i(c)}`)}return e.map((n,t)=>`dot(${n})`).join("+")}function s(t){const e=n.util.computeStrides(t).map(n=>n.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;\n  }\n`}function l(){return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n"}const a="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";exports.ENCODE_FLOAT_SNIPPET=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"DIKY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCoordsDataType=W,exports.getUniformInfoFromShape=J,exports.makeShader=a,exports.squeezeInputInfo=K;var e=require("@tensorflow/tfjs-core"),n=require("./glsl_version"),t=o(require("./shader_compiler_util"));function r(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:n})(e)}function o(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(n);if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=i?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(o,a,c):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}const{getBroadcastDims:i}=e.backend_util;function a(t,r,o){const i=[];if(t.forEach(n=>{const t=e.util.sizeFromShape(n.shapeInfo.logicalShape);if(n.shapeInfo.isUniform?i.push(`uniform float ${n.name}${t>1?`[${t}]`:""};`):(i.push(`uniform sampler2D ${n.name};`),i.push(`uniform int offset${n.name};`)),o.enableShapeUniforms){const{uniformShape:e}=J(o.packedInputs,n.shapeInfo.logicalShape,n.shapeInfo.texShape);switch(e.length){case 1:i.push(`uniform int ${n.name}Shape;`);break;case 2:i.push(`uniform ivec2 ${n.name}Shape;`);break;case 3:i.push(`uniform ivec3 ${n.name}Shape;`);break;case 4:i.push(`uniform ivec4 ${n.name}Shape;`)}i.push(`uniform ivec2 ${n.name}TexShape;`)}}),o.enableShapeUniforms){switch(r.logicalShape.length){case 1:i.push("uniform int outShape;");break;case 2:i.push("uniform ivec2 outShape;"),i.push("uniform int outShapeStrides;");break;case 3:i.push("uniform ivec3 outShape;"),i.push("uniform ivec2 outShapeStrides;");break;case 4:i.push("uniform ivec4 outShape;"),i.push("uniform ivec3 outShapeStrides;")}i.push("uniform ivec2 outTexShape;")}o.customUniforms&&o.customUniforms.forEach(e=>{i.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)});const a=i.join("\n"),c=t.map(e=>l(e,r,o.packedInputs,o.enableShapeUniforms)).join("\n"),u=r.texShape,$=(0,n.getGlslDifferences)(),f=x($);let S,T,m=v($);return r.isPacked?(S=p(r.logicalShape,u,o.enableShapeUniforms),T=d($)):(S=s(r.logicalShape,u,o.enableShapeUniforms),T=h($)),o.packedInputs&&(m+=C),[m,f,T,a,S,c,o.userCode].join("\n")}function c(e,n=!1){const t=e.shapeInfo.logicalShape;switch(t.length){case 0:return F(e,n);case 1:return M(e,n);case 2:return B(e,n);case 3:return E(e,n);case 4:return j(e,n);case 5:return q(e);case 6:return P(e);default:throw new Error(`${t.length}-D input sampling`+" is not yet supported")}}function u(e,n){switch(e.shapeInfo.logicalShape.length){case 0:return D(e);case 1:return N(e,n);case 2:return L(e,n);case 3:return A(e,n);default:return z(e,n)}}function l(e,n,t=!1,r){let o="";o+=t?u(e,r):c(e,r);const i=e.shapeInfo.logicalShape,a=n.logicalShape;return i.length<=a.length&&(o+=t?G(e,n):H(e,n)),o}function p(e,n,t){switch(e.length){case 0:return T();case 1:return m(e,n,t);case 2:return O(e,n,t);case 3:return R(e,n,t);default:return y(e,n,t)}}function s(e,n,t){switch(e.length){case 0:return T();case 1:return g(e,n,t);case 2:return V(e,n,t);case 3:return w(e,n,t);case 4:return I(e,n,t);case 5:return U(e,n);case 6:return k(e,n);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function x(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}function h(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}function d(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}function v(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${$}\n    ${f}\n    ${S}\n  `}const $="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",f="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",S="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",C="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function T(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function m(e,n,t){const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return 1===r[0]?t?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?t?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:t?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}function g(e,n,t){return 1===n[0]?t?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?t?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:t?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `}function R(e,n,t){if(t)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(e[2]/2),i=o*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function w(e,n,r){if(r){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${t.getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const o=t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${o}\n      return ivec3(r, c, d);\n    }\n  `}function y(e,n,t){if(t)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(e[e.length-1]/2),i=o*Math.ceil(e[e.length-2]/2);let a=i,c="",u="b, r, c";for(let l=2;l<e.length-1;l++)c=`\n      int b${l} = index / ${a*=e[e.length-l-1]};\n      index -= b${l} * ${a};\n    `+c,u=`b${l}, `+u;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${c}\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec${e.length}(${u});\n    }\n  `}function I(e,n,r){if(r){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${t.getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const o=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${o}\n      return ivec4(r, c, d, d2);\n    }\n  `}function U(e,n){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},\n                             ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function k(e,n){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function O(n,t,r){const o=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(e.util.arraysEqual(n,t))return r?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${o[0]}, ${o[1]}));\n      }\n    `;const i=Math.ceil(n[1]/2);return r?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${o[0]}, ${o[1]}));\n\n      int index = resTexRC.x * ${o[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function V(n,t,r){return e.util.arraysEqual(n,t)?r?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===n[1]?r?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===n[0]?r?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:r?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${n[1]};\n      int c = index - r * ${n[1]};\n      return ivec2(r, c);\n    }\n  `}function b(e){return`offset${e}`}function D(e){const t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${(0,n.getGlslDifferences)().texture2D}(${t}, halfCR);\n    }\n  `}function F(e,n){const t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[o,i]=e.shapeInfo.texShape;if(1===o&&1===i)return`\n      float ${r}() {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const a=b(t);if(n)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${a});\n      return sampleTexture(${t}, uv);\n    }\n  `;const[c,u]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${c}, ${u}, ${a});\n      return sampleTexture(${t}, uv);\n    }\n  `}function N(e,t){const r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,a=(0,n.getGlslDifferences)();if(t)return`\n    vec4 ${o}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${o}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${c[0]}, ${c[1]}, index);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `}function M(e,n){const t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${_(e)}\n      }\n    `;const o=e.shapeInfo.texShape,i=o[0],a=o[1];if(1===a&&1===i)return`\n      float ${r}(int index) {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const c=b(t);return 1===a?n?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${c}) + 0.5) / float(${t}TexShape[0]));\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${c}) + 0.5) / ${i}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:1===i?n?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${c}) + 0.5) / float(${t}TexShape[1]), 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${c}) + 0.5) / ${a}.0, 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:n?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${c});\n      return sampleTexture(${t}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${i}, ${a}, index + ${c});\n      return sampleTexture(${t}, uv);\n    }\n  `}function L(t,r){const o=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),c=t.shapeInfo.texShape,u=c[0],l=c[1],p=(0,n.getGlslDifferences)();if(null!=c&&e.util.arraysEqual(o,c))return r?`\n      vec4 ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);\n\n        return ${p.texture2D}(${i}, uv);\n      }\n    `:`\n      vec4 ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${u}.0);\n\n        return ${p.texture2D}(${i}, uv);\n      }\n    `;if(r)return`\n    vec4 ${a}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${i}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${p.texture2D}(${i}, uv);\n    }\n  `;const s=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];return`\n    vec4 ${a}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(o[1]/2)}, ${s[0]}, ${s[1]}, row, col);\n      return ${p.texture2D}(${i}, uv);\n    }\n  `}function B(n,t){const r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=n.shapeInfo.texShape;if(null!=a&&e.util.arraysEqual(r,a)){if(t)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `;const e=a[0];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${e}.0);\n      return sampleTexture(${o}, uv);\n    }\n  `}const{newShape:u,keptDims:l}=e.util.squeezeShape(r),p=u;if(p.length<r.length){const e=["row","col"];return`\n      ${c(K(n,p),t)}\n      float ${i}(int row, int col) {\n        return ${i}(${Q(e,l)});\n      }\n    `}if(n.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${r[1]}, 1)));\n        ${_(n)}\n      }\n    `;const s=a[0],x=a[1],h=b(o);return 1===x?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${o}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${o}TexShape[0]));\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${r[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${s}.0);\n      return sampleTexture(${o}, uv);\n    }\n  `:1===s?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${o}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${o}TexShape[1]), 0.5);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${r[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${x}.0, 0.5);\n      return sampleTexture(${o}, uv);\n    }\n  `:t?`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o}Shape[1] + col + ${h};\n        vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${r[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${s}, ${x}, index);\n    return sampleTexture(${o}, uv);\n  }\n`}function A(e,t){const r=e.shapeInfo.logicalShape,o=e.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=e.shapeInfo.texShape,c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===r[0]){const n=[1,2],o=["b","row","col"];return`\n        ${u(K(e,r.slice(1)),t)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${Q(o,n)});\n        }\n      `}const l=(0,n.getGlslDifferences)();if(t)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${o}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${o}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${l.texture2D}(${o}, uv);\n    }\n  `;const p=c[0],s=c[1],x=Math.ceil(r[2]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${p}, ${s}, ${x*Math.ceil(r[1]/2)}, ${x}, b, row, col);\n      return ${l.texture2D}(${o}, uv);\n    }\n  `}function E(n,t){const r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[1]*r[2],u=r[2],{newShape:l,keptDims:p}=e.util.squeezeShape(r),s=l;if(s.length<r.length){const e=["row","col","depth"];return`\n        ${c(K(n,s),t)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${Q(e,p)});\n        }\n      `}if(n.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${u}, 1)));\n        ${_(n)}\n      }\n    `;const x=n.shapeInfo.texShape,h=x[0],d=x[1],v=n.shapeInfo.flatOffset;if(d===a&&null==v)return t?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${o}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${u}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${o}, uv);\n        }\n      `;if(d===u&&null==v)return t?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${o}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${r[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${o}, uv);\n    }\n  `;const $=b(o);return t?`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${o}Shape[1] * ${o}Shape[2];\n      int stride1 = ${o}Shape[2];\n      int index = row * ${a} + col * ${u} + depth + ${$};\n      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);\n      return sampleTexture(${o}, uv);\n    }\n    `:`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${u} + depth + ${$};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${o}, uv);\n      }\n  `}function z(e,t){const r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=(0,n.getGlslDifferences)();if(t)return`\n    vec4 ${o}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${r}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${r}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${r}, uv);\n    }\n  `;const a=e.shapeInfo.logicalShape,c=a.length,u=e.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],p=l[0],s=l[1],x=Math.ceil(a[c-1]/2);let h=x*Math.ceil(a[c-2]/2),d="int b, int row, int col",v=`b * ${h} + (row / 2) * ${x} + (col / 2)`;for(let n=2;n<c-1;n++)d=`int b${n}, `+d,v=`b${n} * ${h*=a[c-n-1]} + `+v;return`\n    vec4 ${o}(${d}) {\n      int index = ${v};\n      int texR = index / ${s};\n      int texC = index - texR * ${s};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}, ${p});\n      return ${i.texture2D}(${r}, uv);\n    }\n  `}function j(n,t){const r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[3],u=r[2]*a,l=r[1]*u,{newShape:p,keptDims:s}=e.util.squeezeShape(r);if(p.length<r.length){const e=["row","col","depth","depth2"];return`\n      ${c(K(n,p),t)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${Q(e,s)});\n      }\n    `}if(n.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${l}, ${u}, ${a}, 1)));\n        ${_(n)}\n      }\n    `;const x=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,d=h[0],v=h[1],$=`int stride2 = ${o}Shape[3];`,f=`int stride1 = ${o}Shape[2] * stride2;`,S=`int stride0 = ${o}Shape[1] * stride1;`;if(v===l&&null==x)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${$}\n        ${f}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${u}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${v}.0, ${d}.0);\n        return sampleTexture(${o}, uv);\n      }\n    `;if(v===a&&null==x)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${o}Shape[1] * ${o}Shape[2], ${o}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r[1]*r[2]}, ${r[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${v}.0, ${d}.0);\n        return sampleTexture(${o}, uv);\n      }\n    `;const C=b(o);return t?`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${$}\n      ${f}\n      ${S}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index + ${C});\n      return sampleTexture(${o}, uv);\n    }\n  `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${u} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${v}, index + ${C});\n      return sampleTexture(${o}, uv);\n    }\n  `}function q(n){const t=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[4],a=t[3]*i,u=t[2]*a,l=t[1]*u,{newShape:p,keptDims:s}=e.util.squeezeShape(t);if(p.length<t.length){const e=["row","col","depth","depth2","depth3"];return`\n      ${c(K(n,p))}\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        return ${o}(${Q(e,s)});\n      }\n    `}if(n.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${u}, ${a}, ${i})) +\n          depth3;\n        ${_(n)}\n      }\n    `;const x=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,d=h[0],v=h[1];return v===l&&null==x?`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${u}, ${a}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${v}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:v===i&&null==x?`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${v}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${u} + depth * ${a} +\n          depth2 * ${i} + depth3 + ${b(r)};\n      vec2 uv = uvFromFlat(${d}, ${v}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}function P(n){const t=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),{newShape:i,keptDims:a}=e.util.squeezeShape(t);if(i.length<t.length){const e=["row","col","depth","depth2","depth3","depth4"];return`\n      ${c(K(n,i))}\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${o}(${Q(e,a)});\n      }\n    `}const u=t[5],l=t[4]*u,p=t[3]*l,s=t[2]*p,x=t[1]*s;if(n.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${x}, ${s}, ${p}, ${l})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${u}, 1)));\n        ${_(n)}\n      }\n    `;const h=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,v=d[0],$=d[1];return $===x&&null==h?`\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${s}, ${p}, ${l}, ${u})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${$}.0, ${v}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:$===u&&null==h?`\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${$}.0, ${v}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${x} + col * ${s} + depth * ${p} +\n          depth2 * ${l} + depth3 * ${u} + depth4 + ${b(r)};\n      vec2 uv = uvFromFlat(${v}, ${$}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}function _(n){const t=n.name,r=e.util.sizeFromShape(n.shapeInfo.logicalShape);return r<2?`return ${t};`:`\n    for (int i = 0; i < ${r}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function G(n,t){const r=n.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",c=n.shapeInfo.logicalShape.length,u=t.logicalShape.length,l=i(n.shapeInfo.logicalShape,t.logicalShape),p=W(u),s=u-c;let x;const h=["x","y","z","w","u","v"];x=0===c?"":u<2&&l.length>=1?"coords = 0;":l.map(e=>`coords.${h[e+s]} = 0;`).join("\n");let d="";d=u<2&&c>0?"coords":n.shapeInfo.logicalShape.map((e,n)=>`coords.${h[n+s]}`).join(", ");let v="return outputValue;";const $=1===e.util.sizeFromShape(n.shapeInfo.logicalShape),f=1===e.util.sizeFromShape(t.logicalShape);if(1!==c||$||f){if($&&!f)v=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){const e=c-2,n=c-1;l.indexOf(e)>-1&&l.indexOf(n)>-1?v="return vec4(outputValue.x);":l.indexOf(e)>-1?v="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(n)>-1&&(v="return vec4(outputValue.xx, outputValue.zz);")}}else v="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${a}() {\n      ${p} coords = getOutputCoords();\n      ${x}\n      vec4 outputValue = get${o}(${d});\n      ${v}\n    }\n  `}function H(n,t){const r=n.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",c=t.texShape,u=n.shapeInfo.texShape,l=n.shapeInfo.logicalShape.length,p=t.logicalShape.length;if(!n.shapeInfo.isUniform&&l===p&&null==n.shapeInfo.flatOffset&&e.util.arraysEqual(u,c))return`\n      float ${a}() {\n        return sampleTexture(${r}, resultUV);\n      }\n    `;const s=W(p),x=i(n.shapeInfo.logicalShape,t.logicalShape),h=p-l;let d;const v=["x","y","z","w","u","v"];let $="";return`\n    float ${a}() {\n      ${s} coords = getOutputCoords();\n      ${d=0===l?"":p<2&&x.length>=1?"coords = 0;":x.map(e=>`coords.${v[e+h]} = 0;`).join("\n")}\n      return get${o}(${$=p<2&&l>0?"coords":n.shapeInfo.logicalShape.map((e,n)=>`coords.${v[n+h]}`).join(", ")});\n    }\n  `}function W(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function J(n,t,r){const{newShape:o,keptDims:i}=e.util.squeezeShape(t),a=t.length,c=n&&3===a&&1===t[0],u=c?t.slice(1):o,l=!n&&a>1&&!e.util.arraysEqual(t,r)&&o.length<a||c;return{useSqueezeShape:l,uniformShape:l?u:t,keptDims:i}}function K(e,n){const t=JSON.parse(JSON.stringify(e));return t.shapeInfo.logicalShape=n,t}function Q(e,n){return n.map(n=>e[n]).join(", ")}
},{"@tensorflow/tfjs-core":"tc6m","./glsl_version":"QbWp","./shader_compiler_util":"vOsJ"}],"hS5V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileProgram=o,exports.makeShaderKey=s,exports.runProgram=i,exports.useShapeUniforms=f;var e=require("@tensorflow/tfjs-core"),t=n(require("./shader_compiler"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(o,i,s):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function o(a,n,o,r){const i=o.map((e,t)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:n.variableNames[t],shapeInfo:a}}),s=i.map(e=>e.shapeInfo),f={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=t.makeShader(i,f,n),u=a.createProgram(l);let c=null;const p=a.getUniformLocation(u,"NAN",!1);1===(0,e.env)().getNumber("WEBGL_VERSION")&&(c=a.getUniformLocation(u,"INFINITY",!1));const h={},m={},g={};for(let e=0;e<n.variableNames.length;e++){const t=n.variableNames[e];h[t]=a.getUniformLocation(u,t,!1),h[`offset${t}`]=a.getUniformLocation(u,`offset${t}`,!1),n.enableShapeUniforms&&(m[`${t}Shape`]=a.getUniformLocation(u,`${t}Shape`,!1),g[`${t}TexShape`]=a.getUniformLocation(u,`${t}TexShape`,!1))}let S,x,d;n.enableShapeUniforms&&(S=a.getUniformLocation(u,"outShape",!1),d=a.getUniformLocation(u,"outShapeStrides",!1),x=a.getUniformLocation(u,"outTexShape",!1));const y=[];return n.customUniforms&&n.customUniforms.forEach((e,t)=>{y[t]=a.getUniformLocation(u,e.name,!1)}),{program:n,source:l,webGLProgram:u,uniformLocations:h,customUniformLocations:y,inShapeInfos:s,outShapeInfo:f,infLoc:c,nanLoc:p,inShapesLocations:m,inTexShapesLocations:g,outShapeLocation:S,outShapeStridesLocation:d,outTexShapeLocation:x}}function r(t,a){if(t.length!==a.length)throw Error(`Binary was compiled with ${t.length} inputs, but `+`was executed with ${a.length} inputs`);t.forEach((t,n)=>{const o=t.logicalShape,r=a[n],i=r.shape;if(!e.util.arraysEqual(o,i))throw Error("Binary was compiled with different shapes than "+`the current args. Shapes ${o} and ${i} must match`);if(t.isUniform&&r.isUniform)return;const s=t.texShape,f=r.isUniform?null:r.texData.texShape;if(!e.util.arraysEqual(s,f))throw Error("Binary was compiled with different texture shapes than the"+` current args. Shape ${s} and ${f} must match`)})}function i(a,n,o,i,s){n.program.enableShapeUniforms||(r(n.inShapeInfos,o),r([n.outShapeInfo],[i]));const f=i.texData.texture,l=i.texData.texShape;i.texData.isPacked?a.setOutputPackedMatrixTexture(f,l[0],l[1]):a.setOutputMatrixTexture(f,l[0],l[1]),a.setProgram(n.webGLProgram),1===(0,e.env)().getNumber("WEBGL_VERSION")&&null!==n.infLoc&&a.gl.uniform1f(n.infLoc,1/0),null!==n.nanLoc&&a.gl.uniform1f(n.nanLoc,NaN),o.forEach((o,r)=>{const i=n.program.variableNames[r],s=n.uniformLocations[i],f=n.uniformLocations[`offset${i}`],l=n.inShapesLocations[`${i}Shape`],u=n.inTexShapesLocations[`${i}TexShape`];if(l){const{uniformShape:e}=t.getUniformInfoFromShape(n.program.packedInputs,o.shape,o.texData.texShape);switch(e.length){case 1:a.gl.uniform1iv(l,new Int32Array(e));break;case 2:a.gl.uniform2iv(l,new Int32Array(e));break;case 3:a.gl.uniform3iv(l,new Int32Array(e));break;case 4:a.gl.uniform4iv(l,new Int32Array(e))}}if(u&&a.gl.uniform2i(u,o.texData.texShape[0],o.texData.texShape[1]),null!=s)if(o.isUniform)if(e.util.sizeFromShape(o.shape)<2)a.gl.uniform1f(s,o.uniformValues[0]);else{let e=o.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),a.gl.uniform1fv(s,e)}else null!=o.texData.slice&&null!=f&&a.gl.uniform1i(f,o.texData.slice.flatOffset),a.setInputMatrixTexture(o.texData.texture,s,r)});const u=n.outShapeLocation;if(u)switch(i.shape.length){case 1:a.gl.uniform1iv(u,new Int32Array(i.shape));break;case 2:a.gl.uniform2iv(u,new Int32Array(i.shape));break;case 3:a.gl.uniform3iv(u,new Int32Array(i.shape));break;case 4:a.gl.uniform4iv(u,new Int32Array(i.shape))}if(n.outShapeStridesLocation){const t=e.util.computeStrides(i.shape);switch(i.shape.length){case 2:a.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(t));break;case 3:a.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(t));break;case 4:a.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(t))}}n.outTexShapeLocation&&a.gl.uniform2i(n.outTexShapeLocation,i.texData.texShape[0],i.texData.texShape[1]),n.program.customUniforms&&s&&n.program.customUniforms.forEach((e,t)=>{const o=n.customUniformLocations[t],r=s[t];if("float"===e.type)a.gl.uniform1fv(o,r);else if("vec2"===e.type)a.gl.uniform2fv(o,r);else if("vec3"===e.type)a.gl.uniform3fv(o,r);else if("vec4"===e.type)a.gl.uniform4fv(o,r);else if("int"===e.type)a.gl.uniform1iv(o,r);else if("ivec2"===e.type)a.gl.uniform2iv(o,r);else if("ivec3"===e.type)a.gl.uniform3iv(o,r);else{if("ivec4"!==e.type)throw Error(`uniform type ${e.type} is not supported yet.`);a.gl.uniform4iv(o,r)}}),a.executeProgram()}function s(a,n,o){let r="";n.concat(o).forEach(n=>{const i=null!=n.texData&&null!=n.texData.slice&&n.texData.slice.flatOffset>0;if(a.enableShapeUniforms&&!n.isUniform){const s=n.texData.texShape,{useSqueezeShape:f,uniformShape:l,keptDims:u}=t.getUniformInfoFromShape(a.packedInputs,n.shape,s);let c="",p="",h="";if(1===l.length&&a.packedInputs){const e=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];c=`${e[0]>1}_${e[1]>1}`}else if(2!==l.length||a.packedInputs){if(l.length>2&&!a.packedInputs){const t=e.util.computeStrides(l);h=`${t[0]===s[1]}_${t[t.length-1]===s[1]}`}}else p=`${l[0]>1}_${l[1]>1}`;const m=n.shape.length,g=2===l.length&&e.util.arraysEqual(n.shape,s),S=1===e.util.sizeFromShape(n.shape),x=e.backend_util.getBroadcastDims(n.shape,o.shape),d=!a.packedInputs&&m===o.shape.length&&e.util.arraysEqual(s,o.texData.texShape),y=a.packedInputs||l.length>2?"":`${s[0]>1}_${s[1]>1}`;r+=`${m}_${d}_${f?u:""}_${l.length}_${S}_${x}_${g}_${c}_${p}_${h}_${y}_${i}`}else{const e=n.isUniform?"uniform":n.texData.texShape;r+=`${n.shape}_${e}_${i}`}});const i=a.userCode;let s=a.constructor.name;return s+="_"+r+"_"+i+`${(0,e.env)().getNumber("WEBGL_VERSION")}`}function f(t){return(0,e.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}
},{"@tensorflow/tfjs-core":"tc6m","./shader_compiler":"DIKY"}],"tZX6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecodeMatrixProgram=void 0;var e=require("./glsl_version"),t=require("./gpgpu_math"),r=o(require("./shader_compiler_util")),n=require("./tex_util");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}class a{constructor(i){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=n.PackingScheme.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=(0,e.getGlslDifferences)();this.outputShape=i,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?r.getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],i):r.getLogicalCoordinatesFromFlatIndex(["r","c","d"],i)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.DecodeMatrixProgram=a;
},{"./glsl_version":"QbWp","./gpgpu_math":"hS5V","./shader_compiler_util":"vOsJ","./tex_util":"hBHG"}],"kOP2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecodeMatrixPackedProgram=void 0;var e=require("./glsl_version"),t=require("./gpgpu_math"),r=o(require("./shader_compiler_util")),n=require("./tex_util");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}class a{constructor(i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=n.PackingScheme.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=(0,e.getGlslDifferences)();this.outputShape=i,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?r.getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],i):r.getLogicalCoordinatesFromFlatIndex(["r","c","d"],i)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.DecodeMatrixPackedProgram=a;
},{"./glsl_version":"QbWp","./gpgpu_math":"hS5V","./shader_compiler_util":"vOsJ","./tex_util":"hBHG"}],"KyTh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeFloatProgram=void 0;var e=require("./glsl_version"),t=require("./shader_compiler_util"),o=require("./tex_util");class r{constructor(r){this.variableNames=["A"],this.outTexUsage=o.TextureUsage.DOWNLOAD;const s=(0,e.getGlslDifferences)();this.outputShape=r,this.userCode=`\n      ${t.ENCODE_FLOAT_SNIPPET}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${s.output} = encode_float(x);\n      }\n    `}}exports.EncodeFloatProgram=r;
},{"./glsl_version":"QbWp","./shader_compiler_util":"vOsJ","./tex_util":"hBHG"}],"zODu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeFloatPackedProgram=void 0;var e=require("./glsl_version"),t=require("./shader_compiler_util"),o=require("./tex_util");class r{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=o.TextureUsage.DOWNLOAD;const s=(0,e.getGlslDifferences)();this.outputShape=r,this.userCode=`\n      ${t.ENCODE_FLOAT_SNIPPET}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${s.output} = encode_float(x);\n      }\n    `}}exports.EncodeFloatPackedProgram=r;
},{"./glsl_version":"QbWp","./shader_compiler_util":"vOsJ","./tex_util":"hBHG"}],"JBcV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeMatrixProgram=void 0;var e=require("./glsl_version"),t=require("./gpgpu_math"),n=o(require("./shader_compiler_util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}class a{constructor(r,o=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=(0,e.getGlslDifferences)();this.outputShape=r,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length);let s="result";o&&(s="floor(result * 255. + 0.5)"),this.userCode=`\n      ${this.enableShapeUniforms?n.getFlatIndexFrom3DOutput():n.getFlatIndexFrom3D(r)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ${a.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${a.output} = vec4(${s}, 0., 0., 0.);\n      }\n    `}}exports.EncodeMatrixProgram=a;
},{"./glsl_version":"QbWp","./gpgpu_math":"hS5V","./shader_compiler_util":"vOsJ"}],"dH5p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeMatrixPackedProgram=void 0;var e=require("./glsl_version"),t=require("./gpgpu_math"),n=o(require("./shader_compiler_util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(o,s,l):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}class a{constructor(r,o=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=(0,e.getGlslDifferences)();this.outputShape=r,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length);let s="",l="result";o&&(l="floor(result * 255. + 0.5)");for(let e=0;e<=1;e++)for(let t=0;t<=1;t++){const n=2*e+t;s+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${this.enableShapeUniforms?"outShape[2]":`${r[2]}`}) {\n          localCoords[2] += ${t};\n          if (localCoords[1] + ${e} < ${this.enableShapeUniforms?"outShape[1]":`${r[1]}`}) {\n            localCoords[1] += ${e};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${a.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${n}] = values[0];\n            } else if (offset == 1) {\n              result[${n}] = values[1];\n            } else if (offset == 2) {\n              result[${n}] = values[2];\n            } else {\n              result[${n}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?n.getFlatIndexFrom3DOutput():n.getFlatIndexFrom3D(r)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${s}\n\n          ${a.output} = ${l};\n        }\n    `}}exports.EncodeMatrixPackedProgram=a;
},{"./glsl_version":"QbWp","./gpgpu_math":"hS5V","./shader_compiler_util":"vOsJ"}],"LB6l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindVertexProgramAttributeStreams=P,exports.createBufferFromOutputTexture=B,exports.createFloat16MatrixTexture=f,exports.createFloat16PackedMatrixTexture=p,exports.createFloat32MatrixTexture=x,exports.createIndexBuffer=i,exports.createPackedMatrixTexture=s,exports.createUnsignedBytesMatrixTexture=F,exports.createVertexBuffer=u,exports.createVertexShader=o,exports.downloadByteEncodedFloatMatrixFromOutputTexture=U,exports.downloadFloat32MatrixFromBuffer=R,exports.downloadMatrixFromPackedOutputTexture=k,exports.downloadPackedMatrixFromBuffer=g,exports.getInternalFormatForFloat16MatrixTexture=d,exports.getInternalFormatForFloat16PackedMatrixTexture=E,exports.getInternalFormatForFloat32MatrixTexture=l,exports.getInternalFormatForPackedMatrixTexture=A,exports.getInternalFormatForUnsignedBytesMatrixTexture=T,exports.uploadDenseMatrixToTexture=_,exports.uploadPixelDataToTexture=h;var e=require("./glsl_version"),t=a(require("./tex_util")),r=a(require("./webgl_util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(a,u,i):a[u]=e[u]}return a.default=e,r&&r.set(e,a),a}function o(t){const n=(0,e.getGlslDifferences)(),a=`${n.version}\n    precision highp float;\n    ${n.attribute} vec3 clipSpacePos;\n    ${n.attribute} vec2 uv;\n    ${n.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return r.createVertexShader(t,a)}function u(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return r.createStaticVertexBuffer(e,t)}function i(e){const t=new Uint16Array([0,1,2,2,1,3]);return r.createStaticIndexBuffer(e,t)}function c(e,t,n,a,o,u){r.validateTextureSize(t,n);const i=r.createTexture(e),c=e.TEXTURE_2D;return r.callAndCheck(e,()=>e.bindTexture(c,i)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)),r.callAndCheck(e,()=>e.texImage2D(c,0,a,t,n,0,o,u,null)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null)),i}function l(e){return e.internalFormatFloat}function x(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,l(a),a.textureFormatFloat,e.FLOAT)}function d(e){return e.internalFormatHalfFloat}function f(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,d(a),a.textureFormatFloat,a.textureTypeHalfFloat)}function T(e){return e.downloadTextureFormat}function F(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,T(a),e.RGBA,e.UNSIGNED_BYTE)}function A(e){return e.internalFormatPackedFloat}function s(e,r,n,a){const[o,u]=t.getPackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,A(a),e.RGBA,e.FLOAT)}function E(e){return e.internalFormatPackedHalfFloat}function p(e,r,n,a){const[o,u]=t.getPackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,E(a),e.RGBA,a.textureTypeHalfFloat)}function P(e,t,n){return r.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),r.bindVertexBufferToProgramAttribute(e,t,"clipSpacePos",n,3,20,0)&&r.bindVertexBufferToProgramAttribute(e,t,"uv",n,2,20,12)}function _(e,t,n,a,o,u){let i,c,l;r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,t)),o instanceof Uint8Array?(i=new Uint8Array(n*a*4),c=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*a*4),c=e.FLOAT,l=u.internalFormatPackedFloat),i.set(o),r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,a,0,e.RGBA,c,i)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function h(e,t,n){r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function B(e,t,n,a){const o=e.createBuffer();r.callAndCheck(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const u=16*t*n;return r.callAndCheck(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,u,e.STREAM_READ)),r.callAndCheck(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),r.callAndCheck(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function R(e,t,r){const n=e,a=new Float32Array(r);return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,a),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),a}function U(e,n,a,o){const[u,i]=t.getUnpackedMatrixTextureShapeWidthHeight(n,a),c=new Uint8Array(t.getUnpackedArraySizeFromMatrixSize(n*a,4));return r.callAndCheck(e,()=>e.readPixels(0,0,u,i,o.downloadTextureFormat,e.UNSIGNED_BYTE,c)),new Float32Array(c.buffer)}function g(e,r,n,a,o,u,i,c){const l=e,x=new Float32Array(t.getPackedRGBAArraySizeFromMatrixShape(u,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,r),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,x),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),x}function k(e,t,n){const a=new Float32Array(t*n*4);return r.callAndCheck(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a)),a}
},{"./glsl_version":"QbWp","./tex_util":"hBHG","./webgl_util":"p3g2"}],"AZP2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GPGPUContext=void 0,exports.linearSearchLastTrue=l;var e=require("@tensorflow/tfjs-core"),t=require("./canvas_util"),r=n(require("./gpgpu_util")),i=n(require("./tex_util")),o=n(require("./webgl_util"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(i,n,u):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}class u{constructor(s){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=(0,e.env)().getNumber("WEBGL_VERSION");null!=s?(this.gl=s,(0,t.setWebGLContext)(n,s)):this.gl=(0,t.getWebGLContext)(n);let u="WEBGL_color_buffer_float";if(1===(0,e.env)().getNumber("WEBGL_VERSION")){const t="OES_texture_float",r="OES_texture_half_float";if(this.textureFloatExtension=o.getExtensionOrThrow(this.gl,t),o.hasExtension(this.gl,r))this.textureHalfFloatExtension=o.getExtensionOrThrow(this.gl,r);else if((0,e.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(u),o.hasExtension(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=o.getExtensionOrThrow(this.gl,"EXT_color_buffer_half_float");else if((0,e.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(u="EXT_color_buffer_float",o.hasExtension(this.gl,u))this.colorBufferFloatExtension=this.gl.getExtension(u);else{if(!o.hasExtension(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=r.createVertexBuffer(this.gl),this.indexBuffer=r.createIndexBuffer(this.gl),this.framebuffer=o.createFramebuffer(this.gl),this.textureConfig=i.getTextureConfig(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,e.env)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;o.callAndCheck(e,()=>e.finish()),o.callAndCheck(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),o.callAndCheck(e,()=>e.deleteFramebuffer(this.framebuffer)),o.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),o.callAndCheck(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),o.callAndCheck(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat32MatrixTexture(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat16MatrixTexture(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),r.createUnsignedBytesMatrixTexture(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),r.uploadPixelDataToTexture(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,i,o){this.throwIfDisposed(),r.uploadDenseMatrixToTexture(this.gl,e,t,i,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat16PackedMatrixTexture(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),r.createPackedMatrixTexture(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),o.callAndCheck(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,i){return this.downloadMatrixDriver(e,()=>r.downloadByteEncodedFloatMatrixFromOutputTexture(this.gl,t,i,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,i,o,s,n){return r.downloadPackedMatrixFromBuffer(this.gl,e,t,i,o,s,n,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return r.downloadFloat32MatrixFromBuffer(this.gl,e,t)}createBufferFromTexture(e,t,i){this.bindTextureToFrameBuffer(e);const o=r.createBufferFromOutputTexture(this.gl,t,i,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(t){let r,i;if((0,e.env)().getBool("WEBGL_FENCE_API_ENABLED")){const e=t,o=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),i=(()=>{const t=e.clientWaitSync(o,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED}),r=o}else(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),i=(()=>this.isQueryAvailable(r,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))):i=(()=>!0);return{query:r,isFencePassed:i}}downloadMatrixFromPackedTexture(e,t,i){return this.downloadMatrixDriver(e,()=>r.downloadMatrixFromPackedOutputTexture(this.gl,t,i))}createProgram(e){this.throwIfDisposed();const t=this.gl,i=o.createFragmentShader(t,e);null==this.vertexShader&&(this.vertexShader=r.createVertexShader(t));const s=o.createProgram(t);return o.callAndCheck(t,()=>t.attachShader(s,this.vertexShader)),o.callAndCheck(t,()=>t.attachShader(s,i)),o.linkProgram(t,s),this.debug&&o.validateProgram(t,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=r.bindVertexProgramAttributeStreams(t,this.program,this.vertexBuffer)),s}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&o.callAndCheck(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&o.validateProgram(this.gl,this.program),o.callAndCheck(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?o.getProgramUniformLocationOrThrow(this.gl,e,t):o.getProgramUniformLocation(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),o.bindTextureToProgramUniformSampler(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[o,s]=i.getPackedMatrixTextureShapeWidthHeight(t,r);this.setOutputMatrixTextureDriver(e,o,s)}setOutputMatrixWriteRegion(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)}setOutputPackedMatrixWriteRegion(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&o.validateProgram(this.gl,this.program),o.validateFramebuffer(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),o.callAndCheck(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=o.getExtensionOrThrow(this.gl,2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),r=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,r),r}endQuery(){if(2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await e.util.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),r=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=l(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(t,r){this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||e.util.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),o.bindColorTextureToFramebuffer(this.gl,e,this.framebuffer),this.debug&&o.validateFramebuffer(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(o.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.debug&&o.validateFramebuffer(this.gl)):o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const i=this.gl;o.bindColorTextureToFramebuffer(i,e,this.framebuffer),this.debug&&o.validateFramebuffer(i),this.outputTexture=e,o.callAndCheck(i,()=>i.viewport(0,0,t,r)),o.callAndCheck(i,()=>i.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,i){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.scissor(e,t,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function l(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}exports.GPGPUContext=u;
},{"@tensorflow/tfjs-core":"tc6m","./canvas_util":"S11S","./gpgpu_util":"LB6l","./tex_util":"hBHG","./webgl_util":"p3g2"}],"y22L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertNotComplex=r;var e=require("@tensorflow/tfjs-core");function r(r,t){Array.isArray(r)||(r=[r]),r.forEach(r=>{null!=r&&e.util.assert("complex64"!==r.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}
},{"@tensorflow/tfjs-core":"tc6m"}],"EOu3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absConfig=exports.abs=void 0,exports.simpleAbsImpl=s;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(e){const t=new Float32Array(e.length);for(let s=0;s<e.length;++s)t[s]=Math.abs(e[s]);return t}const r=r=>{const{x:a}=r.inputs,o=r.backend;(0,t.assertNotComplex)(a,"abs");let n=new Float32Array(e.util.sizeFromShape(a.shape));return n=s(o.data.get(a.dataId).values),o.makeOutput(n,a.shape,a.dtype)};exports.abs=r;const a={kernelName:e.Abs,backendName:"cpu",kernelFunc:r};exports.absConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"iqlH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimpleBinaryKernelImpl=t;var e=require("@tensorflow/tfjs-core");function t(t){return(l,r,o,n,i)=>{const c=e.backend_util.assertAndGetBroadcastShape(l,r),s=c.length,u=e.util.computeStrides(c),a=e.util.sizeFromShape(c),d=e.util.getTypedArrayFromDType(i,a),h=l.length,g=r.length,p=e.util.computeStrides(l),f=e.util.computeStrides(r),m=e.backend_util.getBroadcastDims(l,c),S=e.backend_util.getBroadcastDims(r,c);if(m.length+S.length===0)for(let e=0;e<d.length;++e)d[e]=t(o[e%o.length],n[e%n.length]);else for(let x=0;x<d.length;++x){const l=e.util.indexToLoc(x,s,u),r=l.slice(-h);m.forEach(e=>r[e]=0);const i=e.util.locToIndex(r,h,p),c=l.slice(-g);S.forEach(e=>c[e]=0);const a=e.util.locToIndex(c,g,f);d[x]=t(o[i],n[a])}return[d,c]}}
},{"@tensorflow/tfjs-core":"tc6m"}],"mGbr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=a,exports.complexConfig=void 0;var e=require("@tensorflow/tfjs-core");function a(e){const{inputs:a,backend:o}=e,{real:t,imag:n}=a,r=o.data.get(t.dataId).values,s=o.data.get(n.dataId).values,l=o.makeTensorInfo(t.shape,"complex64");return o.data.get(l.dataId).complexTensorInfos={real:o.makeTensorInfo(t.shape,"float32",r),imag:o.makeTensorInfo(n.shape,"float32",s)},l}const o={kernelName:e.Complex,backendName:"cpu",kernelFunc:a};exports.complexConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"j6Wu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=o;var e=require("@tensorflow/tfjs-core"),r=require("../kernels/Complex");function o(t,s,l="float32"){if("complex64"===l){const e=o(t,s,"float32"),l=o(t,s,"float32");return(0,r.complex)({inputs:{real:e,imag:l},backend:t})}const n=e.util.makeZerosTypedArray(e.util.sizeFromShape(s),l);return t.makeTensorInfo(s,l,n)}
},{"@tensorflow/tfjs-core":"tc6m","../kernels/Complex":"mGbr"}],"Fyri":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:n}=e,{x:d}=t;return n.incRef(d.dataId),{dataId:d.dataId,shape:d.shape,dtype:d.dtype}}const n={kernelName:e.Identity,backendName:"cpu",kernelFunc:t};exports.identityConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"M7V4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=t,exports.realConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:a}=e,{input:r}=t,n=a.data.get(r.dataId).complexTensorInfos.real,o=a.data.get(n.dataId).values;return a.makeTensorInfo(n.shape,n.dtype,o)}const a={kernelName:e.Real,backendName:"cpu",kernelFunc:t};exports.realConfig=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"qg0y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=o,exports.castConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/binary_impl"),r=require("../utils/zeros_impl"),n=require("./Complex"),a=require("./Identity"),s=require("./Real");function o(i){const{inputs:d,backend:p,attrs:u}=i,{x:c}=d,{dtype:l}=u;if("complex64"===l){if("complex64"===c.dtype)return(0,a.identity)({inputs:{x:c},backend:p});const e=(0,r.zeros)(p,c.shape,c.dtype),t=o({inputs:{x:c},backend:p,attrs:{dtype:"float32"}}),s=(0,n.complex)({inputs:{real:t,imag:e},backend:p});return p.disposeIntermediateTensorInfo(e),p.disposeIntermediateTensorInfo(t),s}if("complex64"===c.dtype){const e=(0,s.real)({inputs:{input:c},backend:p}),t=o({inputs:{x:e},backend:p,attrs:{dtype:l}});return p.disposeIntermediateTensorInfo(e),t}if(!e.util.hasEncodingLoss(c.dtype,l)){const e=(0,a.identity)({inputs:{x:c},backend:p});return{dataId:e.dataId,shape:e.shape,dtype:l}}if("int32"===l){const e=p.data.get(c.dataId).values,t=Int32Array.from(e);return p.makeTensorInfo(c.shape,"int32",t)}if("bool"===l){const r=p.data.get(c.dataId).values,n=e.util.toTypedArray([0],c.dtype),[a,s]=(0,t.createSimpleBinaryKernelImpl)((e,t)=>e!==t?1:0)(c.shape,[],r,n,"bool");return p.makeTensorInfo(s,"bool",a)}throw new Error(`Error in Cast: failed to cast ${c.dtype} to ${l}`)}const i={kernelName:e.Cast,backendName:"cpu",kernelFunc:o};exports.castConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/zeros_impl":"j6Wu","./Complex":"mGbr","./Identity":"Fyri","./Real":"M7V4"}],"R0y1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryKernelFunc=r,exports.createComplexBinaryKernelImpl=o;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("../kernels/Cast"),n=require("../kernels/Complex");function r(r,o,s,d){return null==s?({inputs:a,backend:n})=>{const{a:s,b:l}=a,i=n;(0,t.assertNotComplex)([s,l],r);const c=i.data.get(s.dataId).values,u=i.data.get(l.dataId).values,p="string"===s.dtype?e.backend_util.fromUint8ToStringArray(c):c,m="string"===s.dtype?e.backend_util.fromUint8ToStringArray(u):u,g=d||s.dtype,[I,f]=o(s.shape,l.shape,p,m,g);return i.makeTensorInfo(f,g,I)}:({inputs:e,backend:t})=>{const{a:r,b:l}=e,i=t;if("complex64"===r.dtype||"complex64"===l.dtype){const e=(0,a.cast)({inputs:{x:r},backend:i,attrs:{dtype:"complex64"}}),t=i.data.get(e.dataId),o=t.complexTensorInfos.real,d=t.complexTensorInfos.imag,c=i.data.get(o.dataId).values,u=i.data.get(d.dataId).values,p=(0,a.cast)({inputs:{x:l},backend:i,attrs:{dtype:"complex64"}}),m=i.data.get(p.dataId),g=m.complexTensorInfos.real,I=m.complexTensorInfos.imag,f=i.data.get(g.dataId).values,y=i.data.get(I.dataId).values,[T,x,h]=s(r.shape,l.shape,c,u,f,y),k=i.makeTensorInfo(h,"float32",T),b=i.makeTensorInfo(h,"float32",x),v=(0,n.complex)({inputs:{real:k,imag:b},backend:i});return i.disposeIntermediateTensorInfo(e),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(b),v}{const e=i.data.get(r.dataId).values,t=i.data.get(l.dataId).values,a=d||r.dtype,[n,s]=o(r.shape,l.shape,e,t,a);return i.makeTensorInfo(s,a,n)}}}function o(t){return(a,n,r,o,s,d)=>{const l=e.backend_util.assertAndGetBroadcastShape(a,n),i=e.util.sizeFromShape(l),c=l.length,u=e.util.computeStrides(l),p=e.util.getTypedArrayFromDType("float32",i),m=e.util.getTypedArrayFromDType("float32",i),g=e.backend_util.getBroadcastDims(a,l),I=e.backend_util.getBroadcastDims(n,l),f=e.backend_util.mergeRealAndImagArrays(r,o),y=e.backend_util.mergeRealAndImagArrays(s,d),T=a.length,x=e.util.computeStrides(a),h=n.length,k=e.util.computeStrides(n);if(g.length+I.length===0)for(let e=0;e<p.length;e++){const a=e%f.length,n=e%y.length,r=t(f[2*a],f[2*a+1],y[2*n],y[2*n+1]);p[e]=r.real,m[e]=r.imag}else for(let b=0;b<p.length;b++){const a=e.util.indexToLoc(b,c,u),n=a.slice(-T);g.forEach(e=>n[e]=0);const r=e.util.locToIndex(n,T,x),o=a.slice(-h);I.forEach(e=>o[e]=0);const s=e.util.locToIndex(o,h,k),d=t(f[2*r],f[2*r+1],y[2*s],y[2*s+1]);p[b]=d.real,m[b]=d.imag}return[p,m,l]}}
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","../kernels/Cast":"qg0y","../kernels/Complex":"mGbr"}],"aUQi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addImpl=exports.addConfig=exports.addComplexImpl=exports.add=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),d=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e+r);exports.addImpl=o;const t=(0,d.createComplexBinaryKernelImpl)((e,r,d,o)=>({real:e+d,imag:r+o}));exports.addComplexImpl=t;const l=(0,d.binaryKernelFunc)(e.Add,o,t);exports.add=l;const a={kernelName:e.Add,backendName:"cpu",kernelFunc:l};exports.addConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"LNa4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincountImpl=t,exports.bincountReduceImpl=r;var e=require("@tensorflow/tfjs-core");function t(t,r,n,o,s){const u=e.util.sizeFromShape(o),i=e.util.makeZerosTypedArray(s,n);for(let e=0;e<t.length;e++){const n=t[e];if(n<0)throw new Error("Input x must be non-negative!");n>=s||(i[n]+=u>0?r[e]:1)}return i}function r(t,r,n,o=!1){const s=t.shape[0],u=t.shape[1],i=(0,e.buffer)([s,n],r.dtype);for(let e=0;e<s;e++)for(let s=0;s<u;s++){const u=t.get(e,s);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(o?i.set(1,e,u):r.size>0?i.set(i.get(e,u)+r.get(e,s),e,u):i.set(i.get(e,u)+1,e,u))}return i}
},{"@tensorflow/tfjs-core":"tc6m"}],"CDgT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimpleUnaryImpl=r;var e=require("@tensorflow/tfjs-core");function r(r){return(t,o,n)=>{const l=e.util.getTypedArrayFromDType(o,t.length);for(let e=0;e<t.length;++e)l[e]=r(t[e],n);return l}}
},{"@tensorflow/tfjs-core":"tc6m"}],"uG3T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryKernelFunc=r,exports.unaryKernelFuncFromImpl=n;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function r(r,n,o){return({inputs:s,attrs:u,backend:a})=>{const{x:p}=s;if((0,e.assertNotComplex)(p,r),"string"===p.dtype||"string"===o)throw new Error("unaryKernelFunc does not support string input/output");const i=a,c=i.data.get(p.dataId).values,d=t.util.sizeFromShape(p.shape),l=o||p.dtype,y=t.util.getArrayFromDType(l,d);for(let t=0;t<d;++t)y[t]=n(c[t],u);return i.makeTensorInfo(p.shape,l,y)}}function n(t,r,n){return({inputs:o,attrs:s,backend:u})=>{const{x:a}=o;if((0,e.assertNotComplex)(a,t),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const p=u,i=p.data.get(a.dataId).values,c=n||a.dtype,d=r(i,c,s);return p.makeTensorInfo(a.shape,c,d)}}
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"RbeZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilImpl=exports.ceilConfig=exports.ceil=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),l=require("../utils/unary_utils");const i=(0,r.createSimpleUnaryImpl)(e=>Math.ceil(e));exports.ceilImpl=i;const t=(0,l.unaryKernelFuncFromImpl)(e.Ceil,i);exports.ceil=t;const o={kernelName:e.Ceil,backendName:"cpu",kernelFunc:t};exports.ceilConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"m9me":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,s,o){const a=e.util.getArrayFromDType(s,e.util.sizeFromShape(r));if(o&&"string"!==s){let r=0;t.forEach(t=>{const s=e.util.sizeFromShape(t.shape);a.set(t.vals,r),r+=s})}else{let o=0;t.forEach(t=>{const l="string"===s?e.backend_util.fromUint8ToStringArray(t.vals):t.vals;let i=0;for(let e=0;e<t.shape[0];++e){const s=e*r[1]+o;for(let e=0;e<t.shape[1];++e)a[s+e]=l[i++]}o+=t.shape[1]})}return a}
},{"@tensorflow/tfjs-core":"tc6m"}],"dh2X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalImpl=exports.equalConfig=exports.equal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),l=require("../utils/binary_utils");const u=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e===r?1:0);exports.equalImpl=u;const o=(0,l.binaryKernelFunc)(e.Equal,u,null,"bool");exports.equal=o;const t={kernelName:e.Equal,backendName:"cpu",kernelFunc:o};exports.equalConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"RWap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expImpl=exports.expConfig=exports.exp=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),p=require("../utils/unary_utils");const t=(0,r.createSimpleUnaryImpl)(e=>Math.exp(e));exports.expImpl=t;const o=(0,p.unaryKernelFuncFromImpl)(e.Exp,t,"float32");exports.exp=o;const s={kernelName:e.Exp,backendName:"cpu",kernelFunc:o};exports.expConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"KHQU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Impl=exports.expm1Config=exports.expm1=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),p=require("../utils/unary_utils");const t=(0,r.createSimpleUnaryImpl)(e=>Math.expm1(e));exports.expm1Impl=t;const o=(0,p.unaryKernelFuncFromImpl)(e.Expm1,t);exports.expm1=o;const m={kernelName:e.Expm1,backendName:"cpu",kernelFunc:o};exports.expm1Config=m;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"W4sW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorImpl=exports.floorConfig=exports.floor=void 0;var o=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),e=require("../utils/unary_utils");const l=(0,r.createSimpleUnaryImpl)(o=>Math.floor(o));exports.floorImpl=l;const t=(0,e.unaryKernelFuncFromImpl)(o.Floor,l);exports.floor=t;const s={kernelName:o.Floor,backendName:"cpu",kernelFunc:t};exports.floorConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"vwld":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherNdImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,o,r,n,s,i,f,l,c){const u=(0,e.buffer)([n,i],r);for(let e=0;e<n;e++){const r=[];let n=0;for(let o=0;o<s;o++){const i=t[e*s+o];n+=i*f[o],r.push(i)}if(n<0||n>=c/i)throw new Error(`Invalid indices: ${r} does not index into ${l}`);for(let t=0;t<i;t++)u.values[e*i+t]=o.get(...o.indexToLoc(n*i+t))}return u}
},{"@tensorflow/tfjs-core":"tc6m"}],"cCTc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2Impl=o;var e=require("@tensorflow/tfjs-core");function o(o,t,r){const s=(0,e.buffer)(r,o.dtype);for(let e=0;e<s.size;++e){const r=s.indexToLoc(e).slice(),c=r[0],l=r[2],n=t.locToIndex([c,l]);r[2]=t.values[n];const u=o.locToIndex(r);s.values[e]=o.values[u]}return s}
},{"@tensorflow/tfjs-core":"tc6m"}],"dYhv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterImpl=exports.greaterConfig=exports.greater=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),t=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e>r?1:0);exports.greaterImpl=o;const n=(0,t.binaryKernelFunc)(e.Greater,o,null,"bool");exports.greater=n;const a={kernelName:e.Greater,backendName:"cpu",kernelFunc:n};exports.greaterConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"G76X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualImpl=exports.greaterEqualConfig=exports.greaterEqual=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),t=require("../utils/binary_utils");const a=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e>=r?1:0);exports.greaterEqualImpl=a;const l=(0,t.binaryKernelFunc)(e.GreaterEqual,a,null,"bool");exports.greaterEqual=l;const u={kernelName:e.GreaterEqual,backendName:"cpu",kernelFunc:l};exports.greaterEqualConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"ZgLX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessImpl=exports.lessConfig=exports.less=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/binary_impl"),r=require("../utils/binary_utils");const l=(0,s.createSimpleBinaryKernelImpl)((e,s)=>e<s?1:0);exports.lessImpl=l;const o=(0,r.binaryKernelFunc)(e.Less,l,null,"bool");exports.less=o;const t={kernelName:e.Less,backendName:"cpu",kernelFunc:o};exports.lessConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"opLN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqualImpl=exports.lessEqualConfig=exports.lessEqual=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/binary_impl"),l=require("../utils/binary_utils");const r=(0,s.createSimpleBinaryKernelImpl)((e,s)=>e<=s?1:0);exports.lessEqualImpl=r;const u=(0,l.binaryKernelFunc)(e.LessEqual,r,null,"bool");exports.lessEqual=u;const o={kernelName:e.LessEqual,backendName:"cpu",kernelFunc:u};exports.lessEqualConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"bxs4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linSpaceImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,o){const l=(t-r)/(o-1),s=e.util.makeZerosTypedArray(o,"float32");s[0]=r;for(let e=1;e<s.length;e++)s[e]=s[e-1]+l;return s}
},{"@tensorflow/tfjs-core":"tc6m"}],"F40R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logImpl=exports.logConfig=exports.log=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_impl"),r=require("../utils/unary_utils");const l=(0,o.createSimpleUnaryImpl)(e=>Math.log(e));exports.logImpl=l;const t=(0,r.unaryKernelFuncFromImpl)(e.Log,l);exports.log=t;const s={kernelName:e.Log,backendName:"cpu",kernelFunc:t};exports.logConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"tYJo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s){const l=e.util.getTypedArrayFromDType(s,e.util.sizeFromShape(o));for(let e=0;e<l.length;++e){const o=e*r;let s=t[o];for(let e=0;e<r;++e){const r=t[o+e];(Number.isNaN(r)||r>s)&&(s=r)}l[e]=s}return l}
},{"@tensorflow/tfjs-core":"tc6m"}],"g8Wa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumImpl=exports.maximumConfig=exports.maximum=void 0;var e=require("@tensorflow/tfjs-core"),m=require("../utils/binary_impl"),r=require("../utils/binary_utils");const i=(0,m.createSimpleBinaryKernelImpl)((e,m)=>Math.max(e,m));exports.maximumImpl=i;const t=(0,r.binaryKernelFunc)(e.Maximum,i);exports.maximum=t;const a={kernelName:e.Maximum,backendName:"cpu",kernelFunc:t};exports.maximumConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"mPmM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumImpl=exports.minimumConfig=exports.minimum=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/binary_impl"),m=require("../utils/binary_utils");const r=(0,i.createSimpleBinaryKernelImpl)((e,i)=>Math.min(e,i));exports.minimumImpl=r;const n=(0,m.binaryKernelFunc)(e.Minimum,r);exports.minimum=n;const t={kernelName:e.Minimum,backendName:"cpu",kernelFunc:n};exports.minimumConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"SyJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyImpl=exports.multiplyConfig=exports.multiplyComplexImpl=exports.multiply=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/binary_impl"),r=require("../utils/binary_utils");const t=(0,l.createSimpleBinaryKernelImpl)((e,l)=>e*l);exports.multiplyImpl=t;const p=(0,r.createComplexBinaryKernelImpl)((e,l,r,t)=>({real:e*r-l*t,imag:e*t+l*r}));exports.multiplyComplexImpl=p;const i=(0,r.binaryKernelFunc)(e.Multiply,t,p);exports.multiply=i;const o={kernelName:e.Multiply,backendName:"cpu",kernelFunc:i};exports.multiplyConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"NmyW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=o,exports.negConfig=void 0,exports.negImpl=r;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),n=require("./Multiply");function r(t,r,o){const s=e.util.createScalarValue(-1,o);return(0,n.multiplyImpl)([],r,s,t,o)}function o(e){const{inputs:n,backend:o}=e,{x:s}=n;(0,t.assertNotComplex)(s,"neg");const u=o.data.get(s.dataId).values,[a,l]=r(u,s.shape,s.dtype);return o.makeTensorInfo(l,s.dtype,a)}const s={kernelName:e.Neg,backendName:"cpu",kernelFunc:o};exports.negConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Multiply":"SyJk"}],"l8fw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualImpl=exports.notEqualConfig=exports.notEqual=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/binary_impl"),r=require("../utils/binary_utils");const t=(0,o.createSimpleBinaryKernelImpl)((e,o)=>e!==o?1:0);exports.notEqualImpl=t;const l=(0,r.binaryKernelFunc)(e.NotEqual,t,null,"bool");exports.notEqual=l;const n={kernelName:e.NotEqual,backendName:"cpu",kernelFunc:l};exports.notEqualConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"HbWh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,l,i){const s=r.length,u=e.util.sizeFromShape(r),n=e.util.computeStrides(r),p=e.util.computeStrides(i),c=e.util.getTypedArrayFromDType(o,e.util.sizeFromShape(i));for(let a=0;a<u;++a){const r=e.util.indexToLoc(a,s,n),o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[l[e]];c[e.util.locToIndex(o,s,p)]=t[a]}return c}
},{"@tensorflow/tfjs-core":"tc6m"}],"bZg9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=r,exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose_impl");function r(e){const{inputs:r,attrs:a,backend:n}=e,{x:o}=r,{perm:p}=a;(0,t.assertNotComplex)(o,"transpose");const d=o.shape.length,u=new Array(d);for(let t=0;t<u.length;t++)u[t]=o.shape[p[t]];const c=n.data.get(o.dataId).values,i=(0,s.transposeImpl)(c,o.shape,o.dtype,p,u);return{dataId:n.write(i,u,o.dtype),shape:u,dtype:o.dtype}}const a={kernelName:e.Transpose,backendName:"cpu",kernelFunc:r};exports.transposeConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Transpose_impl":"HbWh"}],"jzsq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=s,exports.prodConfig=void 0,exports.prodImpl=r;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("./Transpose");function r(t,o,r,s){const[n,a]=e.backend_util.computeOutAndReduceShapes(t,s),p=(0,e.upcastType)(o,"int32"),u=e.util.makeZerosTypedArray(e.util.sizeFromShape(n),p),i=e.util.sizeFromShape(a);for(let e=0;e<u.length;++e){const t=e*i;let o=1;for(let e=0;e<i;++e)o*=r[t+e];u[e]=o}return{outVals:u,outShape:n,outDtype:p}}function s(s){const{inputs:n,backend:a,attrs:p}=s,{x:u}=n,{axis:i,keepDims:l}=p;(0,t.assertNotComplex)(u,"prod");const c=u.shape.length,d=e.util.parseAxisParam(i,u.shape),m=e.backend_util.getAxesPermutation(d,c);let h=d,x=u;const f=[];null!=m&&(x=(0,o.transpose)({inputs:{x:u},backend:a,attrs:{perm:m}}),f.push(x),h=e.backend_util.getInnerMostAxes(h.length,c));const k=a.data.get(x.dataId).values,{outVals:b,outShape:g,outDtype:y}=r(x.shape,x.dtype,k,h);let _=g;return l&&(_=e.backend_util.expandShapeToKeepDim(g,d)),f.forEach(e=>a.disposeIntermediateTensorInfo(e)),a.makeTensorInfo(_,y,b)}const n={kernelName:e.Prod,backendName:"cpu",kernelFunc:s};exports.prodConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L","./Transpose":"bZg9"}],"N0y5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,o,s){if(r===t||r<t&&o<0||t<r&&o>1)return e.util.makeZerosTypedArray(0,s);const a=Math.abs(Math.ceil((t-r)/o)),l=e.util.makeZerosTypedArray(a,s);t<r&&1===o&&(o=-1),l[0]=r;for(let e=1;e<l.length;e++)l[e]=l[e-1]+o;return l}
},{"@tensorflow/tfjs-core":"tc6m"}],"ftC2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtImpl=exports.rsqrtConfig=exports.rsqrt=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../utils/unary_impl"),t=require("../utils/unary_utils");const s=(0,e.createSimpleUnaryImpl)(r=>1/Math.sqrt(r));exports.rsqrtImpl=s;const o=(0,t.unaryKernelFuncFromImpl)(r.Rsqrt,s);exports.rsqrt=o;const n={kernelName:r.Rsqrt,backendName:"cpu",kernelFunc:o};exports.rsqrtConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"tM8u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidImpl=exports.sigmoidConfig=exports.sigmoid=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/unary_impl"),r=require("../utils/unary_utils");const o=(0,i.createSimpleUnaryImpl)(e=>1/(1+Math.exp(-e)));exports.sigmoidImpl=o;const s=(0,r.unaryKernelFunc)(e.Sigmoid,e=>1/(1+Math.exp(-e)));exports.sigmoid=s;const t={kernelName:e.Sigmoid,backendName:"cpu",kernelFunc:s};exports.sigmoidConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"Pog2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=i,exports.sliceConfig=void 0,exports.sliceImpl=s;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(t,s,i,r,n){const o=e.slice_util.isSliceContinous(r,s,i),c=e.util.sizeFromShape(i),l=e.util.computeStrides(r);if(o){const i=e.slice_util.computeFlatOffset(s,l);return"string"===n?t.slice(i,i+c):t.subarray(i,i+c)}const a="string"===n?e.backend_util.fromUint8ToStringArray(t):t,u=(0,e.buffer)(r,n,a),p=(0,e.buffer)(i,n);for(let e=0;e<p.size;++e){const t=p.indexToLoc(e),i=t.map((e,t)=>e+s[t]);p.set(u.get(...i),...t)}return"string"===n?e.backend_util.fromStringArrayToUint8(p.values):p.values}function i(i){const{inputs:r,backend:n,attrs:o}=i,{x:c}=r,{begin:l,size:a}=o;(0,t.assertNotComplex)(c,"slice");const[u,p]=e.slice_util.parseSliceParams(c,l,a);e.slice_util.assertParamsValid(c,u,p);const f=s(n.data.get(c.dataId).values,u,p,c.shape,c.dtype);return n.makeTensorInfo(p,c.dtype,f)}const r={kernelName:e.Slice,backendName:"cpu",kernelFunc:i};exports.sliceConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../cpu_util":"y22L"}],"hwag":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseFillEmptyRowsImpl=e;var r=require("@tensorflow/tfjs-core");function e(e,t,o,i,n,s,l){const f=t[0],a=s[0],c=new Array(a),y=new Array(f),p=t[1];if(0===a){if(0!==f)throw new Error(`Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = ${f}`);return[r.util.getArrayFromDType(o,0),[0,p],r.util.getArrayFromDType(n,0),c,y]}let u=!0,w=0;const d=new Array(a).fill(0);for(let r=0;r<f;++r){const t=e[r*p];if(t<0)throw new Error(`indices(${r}, 0) is invalid: ${t} < 0`);if(t>=a)throw new Error(`indices(${r}, 0) is invalid: ${t} >= ${a}`);++d[t],u=u&&t>=w,w=t}let A=!0;for(let r=0;r<a;++r){const e=0===d[r];c[r]=e,A=A&&!e,d[r]=Math.max(d[r],1),r>0&&(d[r]+=d[r-1])}if(A&&u){const r=e,t=i;for(let e=0;e<f;++e)y[e]=e;return[r,[f,p],t,c,y]}{const t=d[a-1],s=r.util.getArrayFromDType(o,t*p),u=r.util.getArrayFromDType(n,t),w=new Array(a).fill(0);for(let r=0;r<f;++r){const t=e[r*p],o=w[t],n=(0===t?0:d[t-1])+o;w[t]++;for(let i=0;i<p;++i)s[n*p+i]=e[r*p+i];u[n]=i[r],y[r]=n}for(let r=0;r<a;++r){if(0===w[r]){const e=0===r?0:d[r-1];s[e*p+0]=r;for(let r=1;r<p;++r)s[e*p+r]=0;u[e]=l}}return[s,[t,p],u,c,y]}}
},{"@tensorflow/tfjs-core":"tc6m"}],"DMMm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseReshapeImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s,n){const i=e.util.sizeFromShape(s),u=r[0],p=n.length,a=[];let h=1,l=-1;for(let e=0;e<p;++e){const t=n[e];if(-1===t){if(-1!==l)throw new Error(`only one output dimension may be -1, not both ${l} and ${e}`);l=e,a.push(1)}else{if(t<0)throw new Error(`size ${e} must be non-negative, not ${t}`);h*=t,a.push(t)}}if(-1!==l){if(h<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(i/h);if(h*e!==i)throw new Error(`Input to reshape is a SparseTensor with ${i}\n          dense values, but the requested shape requires a multiple of ${h}. inputShape=${s} outputShape= ${a}`);a[l]=e}const f=e.util.sizeFromShape(a);if(f!==i)throw new Error(`Input to reshape is a tensor with ${i} dense values, but the requested shape has ${f}. inputShape=${s} outputShape=${a}`);const c=s.length,w=[];if(c>0){w[c-1]=1;for(let e=c-2;e>=0;--e)w[e]=w[e+1]*s[e+1]}const $=[];if(p>0){$[p-1]=1;for(let e=p-2;e>=0;--e)$[e]=$[e+1]*a[e+1]}const m=e.util.getArrayFromDType(o,u*p);for(let e=0;e<u;++e){let r=0;for(let o=0;o<c;++o)r+=t[e*c+o]*w[o];for(let t=0;t<p;++t)m[e*p+t]=Math.trunc(r/$[t]),r%=$[t]}return[m,[u,p],a]}
},{"@tensorflow/tfjs-core":"tc6m"}],"QewK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentReductionImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,o,n,s,i=!1,f=0){const l=n.length;if(l!==s.length)throw new Error("segmentIds and indices should have same size.");const u=[t[0],r.length/t[0]],c=u[1],d=l>0?s[l-1]+1:0;if(d<0)throw new Error("segment ids must be >= 0");const a=t.slice();a[0]=d;const g=a.reduce((e,r)=>e*r,1),w=e.util.getArrayFromDType(o,g);if(0===l)return d>0&&w.fill(f),[w,a];if(d<=0)throw new Error("segment ids must be >= 0");let m=0,h=1,p=0,b=s[m];for(;;){let e=0;if(h<l){if(b===(e=s[h])){++h;continue}if(b>=e)throw new Error("segment ids are not increasing")}if(b<0||b>=d)throw new Error(`Segment id ${b} out of range [0, ${d}), possibly because segmentIds input is not sorted.`);b>p&&w.fill(f,p*c,b*c);for(let t=m;t<h;++t){const e=n[t];if(e<0||e>=u[0])throw new Error(`Bad: indices[${t}] == ${n[t]} out of range [0, ${u[0]})`);for(let t=0;t<c;t++)w[b*c+t]+=r[e*c+t]}if(i)for(let r=0;r<c;r++)w[b*c+r]/=h-m;if(m=h,p=b+1,b=e,++h>l)break}return p<d&&w.fill(f,p*c,d*c),[w,a]}
},{"@tensorflow/tfjs-core":"tc6m"}],"fe9g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtImpl=exports.sqrtConfig=exports.sqrt=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../utils/unary_impl"),t=require("../utils/unary_utils");const s=(0,e.createSimpleUnaryImpl)(r=>Math.sqrt(r));exports.sqrtImpl=s;const o=(0,t.unaryKernelFunc)(r.Sqrt,r=>Math.sqrt(r));exports.sqrt=o;const n={kernelName:r.Sqrt,backendName:"cpu",kernelFunc:o};exports.sqrtConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../utils/unary_impl":"CDgT","../utils/unary_utils":"uG3T"}],"c27v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceImpl=exports.squaredDifferenceConfig=exports.squaredDifference=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),n=require("../utils/binary_utils");const i=(0,r.createSimpleBinaryKernelImpl)((e,r)=>{const n=e-r;return n*n});exports.squaredDifferenceImpl=i;const s=(0,n.binaryKernelFunc)(e.SquaredDifference,i);exports.squaredDifference=s;const t={kernelName:e.SquaredDifference,backendName:"cpu",kernelFunc:s};exports.squaredDifferenceConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"t7QJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSliceImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s){const n=(0,e.buffer)(t,r.dtype);for(let e=0;e<n.size;e++){const t=n.indexToLoc(e),l=new Array(t.length);for(let e=0;e<l.length;e++)l[e]=t[e]*o[e]+s[e];n.set(r.get(...l),...t)}return n}
},{"@tensorflow/tfjs-core":"tc6m"}],"VyXC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringNGramsImpl=r;var t=require("@tensorflow/tfjs-core");class e{constructor(e,r,s,i,a,h){this.separator=t.util.encodeString(e),this.nGramWidths=r,this.leftPad=t.util.encodeString(s),this.rightPad=t.util.encodeString(i),this.padWidth=a,this.preserveShort=h}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const r=this.getPadWidth(e);return Math.max(0,t+2*r-e+1)}createNGrams(t,e,r,s,i,a){for(let h=0;h<i;++h){const o=this.getPadWidth(a),n=Math.max(0,o-h),l=Math.max(0,o-(i-(h+1))),c=a-(n+l),d=e+(n>0?0:h-o);let f=0;f+=n*this.leftPad.length;for(let e=0;e<c;++e)f+=t[d+e].length;f+=l*this.rightPad.length,f+=(n+l+c-1)*this.separator.length,r[s+h]=new Uint8Array(f);const u=r[s+h];let g=0;const m=t=>t.forEach(t=>u[g++]=t);for(let t=0;t<n;++t)m(this.leftPad),m(this.separator);for(let e=0;e<c-1;++e)m(t[d+e]),m(this.separator);if(c>0){m(t[d+c-1]);for(let t=0;t<l;++t)m(this.separator),m(this.rightPad)}else{for(let t=0;t<l-1;++t)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,r){const s=e.length,i=r.length;if(i>0){let t=r[0];if(0!==t)throw new Error(`First split value must be 0, got ${t}`);for(let e=1;e<i;++e){let i=r[e]>=t;if(!(i=i&&r[e]<=s))throw new Error(`Invalid split value ${r[e]}, must be in [${t}, ${s}]`);t=r[e]}if(t!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${t}`)}const a=i-1,h=t.util.getArrayFromDType("int32",i);if(0===s||0===i){const t=new Array(s);for(let e=0;e<=a;++e)h[e]=0;return[t,h]}h[0]=0;for(let t=1;t<=a;++t){const e=r[t]-r[t-1];let s=0;this.nGramWidths.forEach(t=>{s+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===s&&(s=1),h[t]=h[t-1]+s}const o=new Array(h[a]);for(let t=0;t<a;++t){const s=r[t];let i=h[t];if(this.nGramWidths.forEach(a=>{const h=r[t+1]-r[t],n=this.getNumNGrams(h,a);this.createNGrams(e,s,o,i,n,a),i+=n}),this.preserveShort&&i===h[t]){const a=r[t+1]-r[t];if(0===a)continue;const h=a+2*this.padWidth,n=1;this.createNGrams(e,s,o,i,n,h)}}return[o,h]}}function r(t,r,s,i,a,h,o,n){return new e(s,i,a,h,o,n).compute(t,r)}
},{"@tensorflow/tfjs-core":"tc6m"}],"aEou":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringSplitImpl=r;var t=require("@tensorflow/tfjs-core");function e(t,e,r,n){if(!t.length)return;if(0===e.length){for(let e=0;e<t.length;++e)n.push(t.subarray(e,e+1));return}if(1===e.length){const l=e[0];let o=t.indexOf(l);for(;-1!==o;){const e=t.subarray(0,o);r&&0===e.length||n.push(e),o=(t=t.subarray(o+1)).indexOf(l)}return void(r&&0===t.length||n.push(t))}let l=0;for(let o=0;o<t.length+1;o++)if(o===t.length||-1!==e.indexOf(t[o])){const e=t.subarray(l,o);r&&0===e.length||n.push(e),l=o+1}}function r(r,n,l){const o=r.length,s=[];let u=0,f=0;const h=new Array(o);for(let t=0;t<o;++t){const o=s.length;e(r[t],n,l,s);const i=s.length-o;h[t]=i,u+=i,f=Math.max(f,i)}const i=t.util.getArrayFromDType("int32",2*u),a=new Array(u),g=[o,f];let c=0;for(let t=0;t<o;++t)for(let e=0;e<h[t];++e)i[2*c]=t,i[2*c+1]=e,a[c]=s[c],++c;return[i,a,g]}
},{"@tensorflow/tfjs-core":"tc6m"}],"KcbL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringToHashBucketFastImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r){const o=e.util.getArrayFromDType("int32",t.length);for(let n=0;n<t.length;++n)o[n]=e.util.fingerPrint64(t[n]).modulo(r).getLowBitsUnsigned();return o}
},{"@tensorflow/tfjs-core":"tc6m"}],"Nkhd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subImpl=exports.subConfig=exports.subComplexImpl=exports.sub=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),s=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e-r);exports.subImpl=o;const t=(0,s.createComplexBinaryKernelImpl)((e,r,s,o)=>({real:e-s,imag:r-o}));exports.subComplexImpl=t;const l=(0,s.binaryKernelFunc)(e.Sub,o,t);exports.sub=l;const p={kernelName:e.Sub,backendName:"cpu",kernelFunc:l};exports.subConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../utils/binary_impl":"iqlH","../utils/binary_utils":"R0y1"}],"r7Er":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tileImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t){const o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=r.shape[e]*t[e];const n=(0,e.buffer)(o,r.dtype);for(let e=0;e<n.values.length;++e){const t=n.indexToLoc(e),o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=t[e]%r.shape[e];const s=r.locToIndex(o);n.values[e]=r.values[s]}return n}
},{"@tensorflow/tfjs-core":"tc6m"}],"QzYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topKImpl=o;var t=require("@tensorflow/tfjs-core");const e=(t,e)=>{const r=e.value-t.value;return 0===r?t.index-e.index:r};function r(o,n,a=0,l=o.length-1){for(;l>a;){if(l-a>600){const t=l-a+1,e=n-a+1,s=Math.log(t),u=.5*Math.exp(2*s/3),i=.5*Math.sqrt(s*u*(t-u)/t)*Math.sign(e-t/2);r(o,n,Math.max(a,Math.floor(n-e*u/t+i)),Math.min(l,Math.floor(n+(t-e)*u/t+i)))}const s=o[n];let u=a,i=l;for(t.util.swap(o,a,n),e(o[l],s)>0&&t.util.swap(o,a,l);u<i;){for(t.util.swap(o,u,i),u++,i--;e(o[u],s)<0;)u+=1;for(;e(o[i],s)>0;)i-=1}0===e(o[a],s)?t.util.swap(o,a,i):(i+=1,t.util.swap(o,i,l)),i<=n&&(a=i+1),n<=i&&(l=i-1)}}function o(o,n,a,l,s){const u=n[n.length-1],[i,f]=[o.length/u,u],c=t.util.getTypedArrayFromDType(a,i*l),h=t.util.getTypedArrayFromDType("int32",i*l);for(let t=0;t<i;t++){const n=t*f,a=o.subarray(n,n+f);let u=new Array(a.length);a.forEach((t,e)=>u[e]={value:t,index:e}),l<u.length&&(r(u,l),u=u.slice(0,l)),s&&u.sort(e);const i=t*l,p=c.subarray(i,i+l),y=h.subarray(i,i+l);for(let t=0;t<l;t++)p[t]=u[t].value,y[t]=u[t].index}const p=n.slice();return p[p.length-1]=l,[(0,t.buffer)(p,a,c),(0,t.buffer)(p,"int32",h)]}
},{"@tensorflow/tfjs-core":"tc6m"}],"IsnU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uniqueImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,o,s,r){const n=e.util.parseAxisParam(o,s)[0],l=[1,s[0],1];for(let e=0;e<n;e++)l[0]*=s[e];l[1]=s[n];for(let e=n+1;e<s.length;e++)l[2]*=s[e];const u={},f=new Int32Array(s[n]),c=new e.TensorBuffer(l,r,t),i=[],a=1===l[0]&&1===l[2];for(let e=0;e<s[n];e++){let o;if(a)o=t[e].toString();else{const t=[];for(let o=0;o<l[0];o++)for(let s=0;s<l[2];s++)t.push(c.get(o,e,s));o=t.join(",")}if(void 0!==u[o])f[e]=u[o];else{const t=Object.keys(u).length;u[o]=t,f[e]=t,i.push(e)}}const p=l.slice();p[1]=Object.keys(u).length;const h=new e.TensorBuffer(p,r);i.forEach((e,t)=>{for(let o=0;o<l[0];o++)for(let s=0;s<l[2];s++)h.set(c.get(o,e,s),o,t,s)});const g=s.slice();return g[n]=p[1],{outputValues:h.values,outputShape:g,indices:f}}
},{"@tensorflow/tfjs-core":"tc6m"}],"X8ov":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"addImpl",{enumerable:!0,get:function(){return r.addImpl}}),Object.defineProperty(exports,"bincountImpl",{enumerable:!0,get:function(){return t.bincountImpl}}),Object.defineProperty(exports,"bincountReduceImpl",{enumerable:!0,get:function(){return t.bincountReduceImpl}}),Object.defineProperty(exports,"ceilImpl",{enumerable:!0,get:function(){return n.ceilImpl}}),Object.defineProperty(exports,"concatImpl",{enumerable:!0,get:function(){return l.concatImpl}}),Object.defineProperty(exports,"equalImpl",{enumerable:!0,get:function(){return p.equalImpl}}),Object.defineProperty(exports,"expImpl",{enumerable:!0,get:function(){return u.expImpl}}),Object.defineProperty(exports,"expm1Impl",{enumerable:!0,get:function(){return i.expm1Impl}}),Object.defineProperty(exports,"floorImpl",{enumerable:!0,get:function(){return m.floorImpl}}),Object.defineProperty(exports,"gatherNdImpl",{enumerable:!0,get:function(){return o.gatherNdImpl}}),Object.defineProperty(exports,"gatherV2Impl",{enumerable:!0,get:function(){return s.gatherV2Impl}}),Object.defineProperty(exports,"greaterEqualImpl",{enumerable:!0,get:function(){return a.greaterEqualImpl}}),Object.defineProperty(exports,"greaterImpl",{enumerable:!0,get:function(){return c.greaterImpl}}),Object.defineProperty(exports,"lessEqualImpl",{enumerable:!0,get:function(){return f.lessEqualImpl}}),Object.defineProperty(exports,"lessImpl",{enumerable:!0,get:function(){return b.lessImpl}}),Object.defineProperty(exports,"linSpaceImpl",{enumerable:!0,get:function(){return I.linSpaceImpl}}),Object.defineProperty(exports,"logImpl",{enumerable:!0,get:function(){return g.logImpl}}),Object.defineProperty(exports,"maxImpl",{enumerable:!0,get:function(){return d.maxImpl}}),Object.defineProperty(exports,"maximumImpl",{enumerable:!0,get:function(){return q.maximumImpl}}),Object.defineProperty(exports,"minimumImpl",{enumerable:!0,get:function(){return x.minimumImpl}}),Object.defineProperty(exports,"multiplyImpl",{enumerable:!0,get:function(){return y.multiplyImpl}}),Object.defineProperty(exports,"negImpl",{enumerable:!0,get:function(){return k.negImpl}}),Object.defineProperty(exports,"notEqualImpl",{enumerable:!0,get:function(){return P.notEqualImpl}}),Object.defineProperty(exports,"prodImpl",{enumerable:!0,get:function(){return j.prodImpl}}),Object.defineProperty(exports,"rangeImpl",{enumerable:!0,get:function(){return O.rangeImpl}}),Object.defineProperty(exports,"rsqrtImpl",{enumerable:!0,get:function(){return S.rsqrtImpl}}),Object.defineProperty(exports,"sigmoidImpl",{enumerable:!0,get:function(){return _.sigmoidImpl}}),Object.defineProperty(exports,"simpleAbsImpl",{enumerable:!0,get:function(){return e.simpleAbsImpl}}),Object.defineProperty(exports,"sliceImpl",{enumerable:!0,get:function(){return E.sliceImpl}}),Object.defineProperty(exports,"sparseFillEmptyRowsImpl",{enumerable:!0,get:function(){return R.sparseFillEmptyRowsImpl}}),Object.defineProperty(exports,"sparseReshapeImpl",{enumerable:!0,get:function(){return h.sparseReshapeImpl}}),Object.defineProperty(exports,"sparseSegmentReductionImpl",{enumerable:!0,get:function(){return N.sparseSegmentReductionImpl}}),Object.defineProperty(exports,"sqrtImpl",{enumerable:!0,get:function(){return F.sqrtImpl}}),Object.defineProperty(exports,"squaredDifferenceImpl",{enumerable:!0,get:function(){return G.squaredDifferenceImpl}}),Object.defineProperty(exports,"stridedSliceImpl",{enumerable:!0,get:function(){return T.stridedSliceImpl}}),Object.defineProperty(exports,"stringNGramsImpl",{enumerable:!0,get:function(){return M.stringNGramsImpl}}),Object.defineProperty(exports,"stringSplitImpl",{enumerable:!0,get:function(){return A.stringSplitImpl}}),Object.defineProperty(exports,"stringToHashBucketFastImpl",{enumerable:!0,get:function(){return B.stringToHashBucketFastImpl}}),Object.defineProperty(exports,"subImpl",{enumerable:!0,get:function(){return L.subImpl}}),Object.defineProperty(exports,"tileImpl",{enumerable:!0,get:function(){return w.tileImpl}}),Object.defineProperty(exports,"topKImpl",{enumerable:!0,get:function(){return D.topKImpl}}),Object.defineProperty(exports,"transposeImpl",{enumerable:!0,get:function(){return H.transposeImpl}}),Object.defineProperty(exports,"uniqueImpl",{enumerable:!0,get:function(){return K.uniqueImpl}});var e=require("./kernels/Abs"),r=require("./kernels/Add"),t=require("./kernels/Bincount_impl"),n=require("./kernels/Ceil"),l=require("./kernels/Concat_impl"),p=require("./kernels/Equal"),u=require("./kernels/Exp"),i=require("./kernels/Expm1"),m=require("./kernels/Floor"),o=require("./kernels/GatherNd_Impl"),s=require("./kernels/GatherV2_impl"),c=require("./kernels/Greater"),a=require("./kernels/GreaterEqual"),b=require("./kernels/Less"),f=require("./kernels/LessEqual"),I=require("./kernels/LinSpace_impl"),g=require("./kernels/Log"),d=require("./kernels/Max_impl"),q=require("./kernels/Maximum"),x=require("./kernels/Minimum"),y=require("./kernels/Multiply"),k=require("./kernels/Neg"),P=require("./kernels/NotEqual"),j=require("./kernels/Prod"),O=require("./kernels/Range_impl"),S=require("./kernels/Rsqrt"),_=require("./kernels/Sigmoid"),E=require("./kernels/Slice"),R=require("./kernels/SparseFillEmptyRows_impl"),h=require("./kernels/SparseReshape_impl"),N=require("./kernels/SparseSegmentReduction_impl"),F=require("./kernels/Sqrt"),G=require("./kernels/SquaredDifference"),T=require("./kernels/StridedSlice_impl"),M=require("./kernels/StringNGrams_impl"),A=require("./kernels/StringSplit_impl"),B=require("./kernels/StringToHashBucketFast_impl"),L=require("./kernels/Sub"),w=require("./kernels/Tile_impl"),D=require("./kernels/TopK_impl"),H=require("./kernels/Transpose_impl"),K=require("./kernels/Unique_impl");
},{"./kernels/Abs":"EOu3","./kernels/Add":"aUQi","./kernels/Bincount_impl":"LNa4","./kernels/Ceil":"RbeZ","./kernels/Concat_impl":"m9me","./kernels/Equal":"dh2X","./kernels/Exp":"RWap","./kernels/Expm1":"KHQU","./kernels/Floor":"W4sW","./kernels/GatherNd_Impl":"vwld","./kernels/GatherV2_impl":"cCTc","./kernels/Greater":"dYhv","./kernels/GreaterEqual":"G76X","./kernels/Less":"ZgLX","./kernels/LessEqual":"opLN","./kernels/LinSpace_impl":"bxs4","./kernels/Log":"F40R","./kernels/Max_impl":"tYJo","./kernels/Maximum":"g8Wa","./kernels/Minimum":"mPmM","./kernels/Multiply":"SyJk","./kernels/Neg":"NmyW","./kernels/NotEqual":"l8fw","./kernels/Prod":"jzsq","./kernels/Range_impl":"N0y5","./kernels/Rsqrt":"ftC2","./kernels/Sigmoid":"tM8u","./kernels/Slice":"Pog2","./kernels/SparseFillEmptyRows_impl":"hwag","./kernels/SparseReshape_impl":"DMMm","./kernels/SparseSegmentReduction_impl":"QewK","./kernels/Sqrt":"fe9g","./kernels/SquaredDifference":"c27v","./kernels/StridedSlice_impl":"t7QJ","./kernels/StringNGrams_impl":"VyXC","./kernels/StringSplit_impl":"aEou","./kernels/StringToHashBucketFast_impl":"KcbL","./kernels/Sub":"Nkhd","./kernels/Tile_impl":"r7Er","./kernels/TopK_impl":"QzYa","./kernels/Transpose_impl":"HbWh","./kernels/Unique_impl":"IsnU"}],"tfp0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uniqueImplCPU=exports.transposeImplCPU=exports.topKImplCPU=exports.tileImplCPU=exports.subImplCPU=exports.stringToHashBucketFastImplCPU=exports.stringSplitImplCPU=exports.stringNGramsImplCPU=exports.stridedSliceImplCPU=exports.sqrtImplCPU=exports.sparseSegmentReductionImplCPU=exports.sparseReshapeImplCPU=exports.sparseFillEmptyRowsImplCPU=exports.sliceImplCPU=exports.simpleAbsImplCPU=exports.sigmoidImplCPU=exports.rsqrtImplCPU=exports.rangeImplCPU=exports.prodImplCPU=exports.notEqualImplCPU=exports.negImplCPU=exports.multiplyImplCPU=exports.minimumImplCPU=exports.maximumImplCPU=exports.maxImplCPU=exports.logImplCPU=exports.linSpaceImplCPU=exports.lessImplCPU=exports.lessEqualImplCPU=exports.greaterImplCPU=exports.greaterEqualImplCPU=exports.gatherV2ImplCPU=exports.gatherNdImplCPU=exports.floorImplCPU=exports.expm1ImplCPU=exports.expImplCPU=exports.equalImplCPU=exports.concatImplCPU=exports.ceilImplCPU=exports.bincountReduceImplCPU=exports.bincountImplCPU=exports.addImplCPU=void 0;var p=t(require("@tensorflow/tfjs-backend-cpu/dist/shared"));function e(p){if("function"!=typeof WeakMap)return null;var t=new WeakMap,l=new WeakMap;return(e=function(p){return p?l:t})(p)}function t(p,t){if(!t&&p&&p.__esModule)return p;if(null===p||"object"!=typeof p&&"function"!=typeof p)return{default:p};var l=e(t);if(l&&l.has(p))return l.get(p);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in p)if("default"!==m&&Object.prototype.hasOwnProperty.call(p,m)){var o=s?Object.getOwnPropertyDescriptor(p,m):null;o&&(o.get||o.set)?Object.defineProperty(r,m,o):r[m]=p[m]}return r.default=p,l&&l.set(p,r),r}const{addImpl:l,bincountImpl:r,bincountReduceImpl:s,ceilImpl:m,concatImpl:o,equalImpl:I,expImpl:x,expm1Impl:P,floorImpl:a,gatherNdImpl:i,gatherV2Impl:C,greaterImpl:U,greaterEqualImpl:n,lessImpl:u,lessEqualImpl:c,linSpaceImpl:g,logImpl:d,maxImpl:f,maximumImpl:q,minimumImpl:b,multiplyImpl:y,negImpl:h,notEqualImpl:E,prodImpl:R,rangeImpl:S,rsqrtImpl:w,sigmoidImpl:O,simpleAbsImpl:j,sliceImpl:v,sparseFillEmptyRowsImpl:k,sparseReshapeImpl:F,sparseSegmentReductionImpl:N,sqrtImpl:M,stridedSliceImpl:_,stringNGramsImpl:A,stringSplitImpl:B,stringToHashBucketFastImpl:G,subImpl:H,tileImpl:K,topKImpl:T,transposeImpl:V,uniqueImpl:W}=p;exports.uniqueImplCPU=W,exports.transposeImplCPU=V,exports.topKImplCPU=T,exports.tileImplCPU=K,exports.subImplCPU=H,exports.stringToHashBucketFastImplCPU=G,exports.stringSplitImplCPU=B,exports.stringNGramsImplCPU=A,exports.stridedSliceImplCPU=_,exports.sqrtImplCPU=M,exports.sparseSegmentReductionImplCPU=N,exports.sparseReshapeImplCPU=F,exports.sparseFillEmptyRowsImplCPU=k,exports.sliceImplCPU=v,exports.simpleAbsImplCPU=j,exports.sigmoidImplCPU=O,exports.rsqrtImplCPU=w,exports.rangeImplCPU=S,exports.prodImplCPU=R,exports.notEqualImplCPU=E,exports.negImplCPU=h,exports.multiplyImplCPU=y,exports.minimumImplCPU=b,exports.maximumImplCPU=q,exports.maxImplCPU=f,exports.logImplCPU=d,exports.linSpaceImplCPU=g,exports.lessEqualImplCPU=c,exports.lessImplCPU=u,exports.greaterEqualImplCPU=n,exports.greaterImplCPU=U,exports.gatherV2ImplCPU=C,exports.gatherNdImplCPU=i,exports.floorImplCPU=a,exports.expm1ImplCPU=P,exports.expImplCPU=x,exports.equalImplCPU=I,exports.concatImplCPU=o,exports.ceilImplCPU=m,exports.bincountReduceImplCPU=s,exports.bincountImplCPU=r,exports.addImplCPU=l;
},{"@tensorflow/tfjs-backend-cpu/dist/shared":"X8ov"}],"Axn8":[function(require,module,exports) {
"use strict";function e(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function t(t,r){return 1===r?[t]:e(t,r)}function r(e,t){if(1===e)return"rc";let r="";for(let n=0;n<e;n++)r+=t[n],n<e-1&&(r+=",");return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChannels=t,exports.getSourceCoords=r,exports.getVecChannels=e;
},{}],"kEpT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PackProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class n{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;const r=n.length;if(0===r)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const u=(0,t.getChannels)("rc",r),i=(0,e.getCoordsDataType)(r),g=c(r,n,u),p=o(r,n[n.length-1],n[n.length-2],u),l=s(n,u);this.userCode=`\n        void main() {\n          ${i} rc = getOutputCoords();\n\n          if(${g}) {\n            setOutput(vec4(0));\n          } else {\n            ${p}\n\n            setOutput(vec4(${l}));\n          }\n        }\n      `}}}function r(t,e){const n=[];for(let r=0;r<=1;r++)for(let c=0;c<=1;c++){let o=`${0===r?"r":"rp1"}, ${0===c?"c":"cp1"}`;for(let n=2;n<t;n++)o=`${e[e.length-1-n]},`+o;n.push(o)}return n}function c(t,e,n){if(1===t)return`rc > ${e[0]}`;let r="";for(let c=t-2;c<t;c++)r+=`${n[c]} >= ${e[c]}`,c<t-1&&(r+="||");return r}function o(t,e,n,r){if(1===t)return"";const c=r.slice(-2);return`\n    int r = ${c[0]};\n    int c = ${c[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${e};\n    bool rEdge = rp1 >= ${n};\n  `}function s(t,e){const n=t.length,c=r(n,e);return 1===n?`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${c[0]}),\n          cEdge ? 0. : getA(${c[1]}),\n          rEdge ? 0. : getA(${c[2]}),\n          rEdge || cEdge ? 0. : getA(${c[3]})`}exports.PackProgram=n;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"K4kf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReshapePackedProgram=void 0;var e=require("./gpgpu_math"),t=r(require("./shader_compiler_util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}class i{constructor(n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=(0,e.useShapeUniforms)(this.outputShape.length);let i="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),i+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}this.userCode=`\n      ${o(r,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?t.getFlatIndexFrom3DOutput():t.getFlatIndexFrom3D(n)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};\n\n        ${i}\n\n        setOutput(result);\n      }\n    `}}function o(e,n){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n?t.getLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],"inputShape"):t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],e)}\n      return ivec3(r, c, d);\n    }\n  `}exports.ReshapePackedProgram=i;
},{"./gpgpu_math":"hS5V","./shader_compiler_util":"vOsJ"}],"herW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextureManager=void 0,exports.computeBytes=i;var e=require("@tensorflow/tfjs-core"),t=require("./gpgpu_util"),r=require("./tex_util");class s{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,s){const u=h(t,s),n=a(e,u,s);n in this.freeTextures||(this.freeTextures[n]=[]),n in this.usedTextures||(this.usedTextures[n]=[]);const T=i(e,u,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[n].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=T,this.log();const e=this.freeTextures[n].shift();return this.usedTextures[n].push(e),e}let x;return u===r.PhysicalTextureType.PACKED_2X2_FLOAT32?x=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.PACKED_2X2_FLOAT16?x=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.UNPACKED_FLOAT32?x=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.UNPACKED_FLOAT16?x=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE&&(x=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[n].push(x),this.numUsedTextures++,this._numBytesAllocated+=T,this.log(),x}releaseTexture(t,r,s,u){if(null==this.freeTextures)return;const n=h(s,u),T=a(r,n,u);T in this.freeTextures||(this.freeTextures[T]=[]);const x=i(r,n,this.gpgpu.gl,this.gpgpu.textureConfig,u),o=(0,e.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=x):(this.freeTextures[T].push(t),this.numFreeTextures++,this._numBytesFree+=x),this.numUsedTextures--;const l=this.usedTextures[T],c=l.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function u(e,t){const r=e;if(t===r.R32F)return 4;if(t===r.R16F)return 2;if(t===r.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===r.RGBA16F)return 8;throw new Error(`Unknown internal format ${t}`)}function i(e,t,s,i,T){const h=n(t,i);let a;if(T){const[t,s]=(0,r.getPackedMatrixTextureShapeWidthHeight)(e[0],e[1]);a=t*s}else{const[t,s]=(0,r.getUnpackedMatrixTextureShapeWidthHeight)(e[0],e[1]);a=t*s}return a*u(s,h)}function n(e,s){switch(e){case r.PhysicalTextureType.PACKED_2X2_FLOAT32:return(0,t.getInternalFormatForPackedMatrixTexture)(s);case r.PhysicalTextureType.PACKED_2X2_FLOAT16:return(0,t.getInternalFormatForFloat16PackedMatrixTexture)(s);case r.PhysicalTextureType.UNPACKED_FLOAT32:return(0,t.getInternalFormatForFloat32MatrixTexture)(s);case r.PhysicalTextureType.UNPACKED_FLOAT16:return(0,t.getInternalFormatForFloat16MatrixTexture)(s);case r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE:return(0,t.getInternalFormatForUnsignedBytesMatrixTexture)(s);default:throw new Error(`Unknown physical texture type ${e}`)}}function T(t){return(0,e.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?r.PhysicalTextureType.PACKED_2X2_FLOAT32:r.PhysicalTextureType.UNPACKED_FLOAT32:t?r.PhysicalTextureType.PACKED_2X2_FLOAT16:r.PhysicalTextureType.UNPACKED_FLOAT16}function h(e,t){if(e===r.TextureUsage.UPLOAD)return r.PhysicalTextureType.PACKED_2X2_FLOAT32;if(e===r.TextureUsage.RENDER||null==e)return T(t);if(e===r.TextureUsage.DOWNLOAD||e===r.TextureUsage.PIXELS)return r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function a(e,t,r){return`${e[0]}_${e[1]}_${t}_${r}`}exports.TextureManager=s;
},{"@tensorflow/tfjs-core":"tc6m","./gpgpu_util":"LB6l","./tex_util":"hBHG"}],"uzBV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SIGMOID=exports.RELU6=exports.RELU=exports.LINEAR=exports.ELU=exports.CLONE=exports.CHECK_NAN_SNIPPET=exports.ABS=void 0,exports.STEP=s,exports.UnaryOpProgram=void 0;var t=require("./gpgpu_math");class r{constructor(r,e){this.variableNames=["A"],this.outputShape=r,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpProgram=r;const e="if (isnan(x)) return x;";exports.CHECK_NAN_SNIPPET=e;const n="return x;";exports.LINEAR=n;const o="return abs(x);";function s(t=0){return e+`\n    return x > 0.0 ? 1.0 : float(${t});\n  `}exports.ABS=o;const x="return (x >= 0.0) ? x : (exp(x) - 1.0);";exports.ELU=x;const p=e+"\n  return (x < 0.0) ? 0.0 : x;\n";exports.RELU=p;const a=e+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";exports.RELU6=a;const u="return x;";exports.CLONE=u;const i="return 1.0 / (1.0 + exp(-1.0 * x));";exports.SIGMOID=i;
},{"./gpgpu_math":"hS5V"}],"yBSN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnaryOpPackedProgram=exports.SIGMOID=exports.RELU6=exports.RELU=exports.LINEAR=exports.ELU=void 0;var e=require("./gpgpu_math");const r="return x;";exports.LINEAR=r;const t="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n";exports.ELU=t;const s="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";exports.RELU=s;const n="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";exports.RELU6=n;const a="return 1.0 / (1.0 + exp(-1.0 * x));";exports.SIGMOID=a;class u{constructor(r,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=(0,e.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpPackedProgram=u;
},{"./gpgpu_math":"hS5V"}],"J76R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnpackProgram=void 0;var e=require("./packing_util"),t=require("./shader_compiler");class r{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r;const s=r.length,n=(0,e.getChannels)("rc",s),o=(0,t.getCoordsDataType)(s),a=(0,e.getSourceCoords)(s,n),c=n.slice(-2),p=s<=1?"rc":`vec2(${c.join(",")})`;this.userCode=`\n      void main() {\n        ${o} rc = getOutputCoords();\n        vec4 packedInput = getA(${a});\n\n        setOutput(getChannel(packedInput, ${p}));\n      }\n    `}}exports.UnpackProgram=r;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"YZpX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MathBackendWebGL=exports.EPSILON_FLOAT32=exports.EPSILON_FLOAT16=void 0,exports.getBinaryCache=L,require("./flags_webgl");var e=require("@tensorflow/tfjs-core"),t=require("./canvas_util"),a=require("./decode_matrix_gpu"),r=require("./decode_matrix_packed_gpu"),s=require("./encode_float_gpu"),n=require("./encode_float_packed_gpu"),i=require("./encode_matrix_gpu"),o=require("./encode_matrix_packed_gpu"),u=require("./gpgpu_context"),d=P(require("./gpgpu_math")),h=require("./kernel_utils/shared"),l=require("./pack_gpu"),p=require("./reshape_packed_gpu"),c=P(require("./tex_util")),g=require("./texture_manager"),m=P(require("./unaryop_gpu")),f=require("./unaryop_packed_gpu"),x=require("./unpack_gpu"),I=P(require("./webgl_util"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}const E=e.kernel_impls.whereImpl,D=1e-7;exports.EPSILON_FLOAT32=D;const T=1e-4;exports.EPSILON_FLOAT16=T;const _={};function L(e){return e in _?_[e]:(_[e]={},_[e])}const w=(0,e.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),v=600;function B(){return null==(0,e.env)().global.screen?1024:(0,e.env)().global.screen.height*(0,e.env)().global.screen.width*window.devicePixelRatio*v/1024/1024}class k extends e.KernelBackend{constructor(a){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!(0,e.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==a){const a=(0,t.getWebGLContext)((0,e.env)().getNumber("WEBGL_VERSION"));this.binaryCache=L((0,e.env)().getNumber("WEBGL_VERSION")),this.gpgpu=new u.GPGPUContext(a),this.canvas=a.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=a,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=a.gl.canvas;this.textureManager=new g.TextureManager(this.gpgpu),this.numMBBeforeWarning=B(),this.texData=new e.DataStorage(this,(0,e.engine)())}nextDataId(){return k.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(t,a,r){if(((0,e.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,e.env)().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===r&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:a,dtype:r,values:t,usage:c.TextureUsage.UPLOAD,refCount:1}),s}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(t,a,r,s,n){if((0,e.env)().getBool("DEBUG")&&this.checkNumericalProblems(a),"complex64"===s)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:s,values:a,usage:c.TextureUsage.UPLOAD,refCount:n})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(t){const a=this.texData.get(t),{values:r,dtype:s,complexTensorInfos:n,slice:i,shape:o,isPacked:u}=a;if(null!=i){let e;e=u?new f.UnaryOpPackedProgram(o,m.CLONE):new m.UnaryOpProgram(o,m.CLONE);const a=this.runWebGLProgram(e,[{dataId:t,shape:o,dtype:s}],s),r=this.readSync(a.dataId);return this.disposeIntermediateTensorInfo(a),r}if(null!=r)return this.convertAndCacheOnCPU(t);if("string"===s)return r;const d=null!=this.activeTimers;let h,l;if(d&&(h=e.util.now()),"complex64"===s){const t=this.readSync(n.real.dataId),a=this.readSync(n.imag.dataId);l=e.backend_util.mergeRealAndImagArrays(t,a)}else l=this.getValuesFromTexture(t);return d&&(this.downloadWaitMs+=e.util.now()-h),this.convertAndCacheOnCPU(t,l)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const a=this.texData.get(t),{values:r,shape:s,slice:n,dtype:i,complexTensorInfos:o,isPacked:u}=a;if(null!=n){let e;e=u?new f.UnaryOpPackedProgram(s,m.CLONE):new m.UnaryOpProgram(s,m.CLONE);const a=this.runWebGLProgram(e,[{dataId:t,shape:s,dtype:i}],i),r=this.read(a.dataId);return this.disposeIntermediateTensorInfo(a),r}if(null!=r)return this.convertAndCacheOnCPU(t);if(!(0,e.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,e.env)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let d,h,l=null;if("complex64"!==i&&(0,e.env)().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(t);const e=this.texData.get(d.dataId);l=this.gpgpu.createBufferFromTexture(e.texture,...c.getDenseTexShape(s))}if(this.pendingRead.set(t,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){const t=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),a=t[0],r=t[1];h=e.backend_util.mergeRealAndImagArrays(a,r)}else if(null==l)h=this.getValuesFromTexture(t);else{const t=e.util.sizeFromShape(s);h=this.gpgpu.downloadFloat32MatrixFromBuffer(l,t)}if(null!=d&&this.disposeIntermediateTensorInfo(d),null!=l){const e=this.gpgpu.gl;I.callAndCheck(e,()=>e.deleteBuffer(l))}const p=this.convertAndCacheOnCPU(t,h),g=this.pendingRead.get(t);return this.pendingRead.delete(t),g.forEach(e=>e(p)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&(0,e.engine)().removeDataId(t,this),this.pendingDeletes--),p}bufferSync(t){const a=this.readSync(t.dataId);let r=a;if("string"===t.dtype)try{r=a.map(t=>e.util.decodeString(t))}catch(s){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,e.buffer)(t.shape,t.dtype,r)}checkNumericalProblems(t){if(null!=t)for(let a=0;a<t.length;a++){const r=t[a];if(!I.canBeRepresented(r)){if((0,e.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${r} cannot be represented with your `+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error(`The value ${r} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:a,dtype:r,isPacked:i}=this.texData.get(t),o=e.util.sizeFromShape(a);if((0,e.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const e=this.decode(t),r=this.texData.get(e.dataId),s=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...c.getDenseTexShape(a)).subarray(0,o);return this.disposeIntermediateTensorInfo(e),s}const u=(0,e.env)().getBool("WEBGL_PACK")&&!0===i,d=u?I.getShapeAs3D(a):a,h=u?new n.EncodeFloatPackedProgram(d):new s.EncodeFloatProgram(d),l=this.runWebGLProgram(h,[{shape:d,dtype:r,dataId:t}],"float32"),p=this.texData.get(l.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(l),g}timerAvailable(){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(t){const a=this.activeTimers,r=[];let s=!1;null==this.programTimersStack?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,t();const n=e.util.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=e.util.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=a,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if((0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(n);o.kernelMs=e.util.sum(t),o.getExtraProfileInfo=(()=>t.map((e,t)=>({name:i[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", "))}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:e.util.now(),endMs:null}}endTimer(t){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=e.util.now(),t)}async getQueryTime(t){if((0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const a=t;return a.endMs-a.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:a}=this.texData.get(e);return null!=a&&(this.disposeData(a.real.dataId,t),this.disposeData(a.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:a,texShape:r,usage:s,isPacked:n,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,u=this.dataRefCount.get(o);u>1?this.dataRefCount.set(o,u-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,a),this.textureManager.releaseTexture(t,r,s,n)));const d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(t,a=w){return(0,e.env)().getBool("WEBGL_CPU_FORWARD")&&t.every(t=>null==this.texData.get(t.dataId).texture&&e.util.sizeFromShape(t.shape)<a)}getGPGPUContext(){return this.gpgpu}where(t){e.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const a=t.dataSync();return E(t.shape,a)}packedUnaryOp(t,a,r){const s=new f.UnaryOpPackedProgram(t.shape,a),n=this.compileAndRun(s,[t],r);return(0,e.engine)().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}abs(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){const e=(0,h.simpleAbsImplCPU)(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,m.ABS,t.dtype);const a=new m.UnaryOpProgram(t.shape,m.ABS),r=this.compileAndRun(a,[t]);return(0,e.engine)().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}makeTensorInfo(t,a,r){let s;if("string"===a&&null!=r&&r.length>0&&e.util.isString(r[0])){const n=r.map(t=>e.util.encodeString(t));s=this.write(n,t,a)}else s=this.write(r,t,a);return this.texData.get(s).usage=null,{dataId:s,shape:t,dtype:a}}makeOutput(t,a,r){const{dataId:s}=this.makeTensorInfo(t,a,r);return(0,e.engine)().makeTensorFromDataId(s,t,a,this)}unpackTensor(e){const t=new x.UnpackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new l.PackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const a=[I.getBatchDim(e.shape),...I.getRowsCols(e.shape)],r={dtype:e.dtype,shape:a,dataId:e.dataId},s=[I.getBatchDim(t),...I.getRowsCols(t)],n=new p.ReshapePackedProgram(s,a),i=[a],o=this.runWebGLProgram(n,[r],e.dtype,i,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}decode(e){const t=this.texData.get(e),{isPacked:s,shape:n,dtype:i}=t,o=I.getShapeAs3D(n);let u;const d=c.getDenseTexShape(o);u=s?new r.DecodeMatrixPackedProgram(o):new a.DecodeMatrixProgram(o);const h=[d];return{dtype:i,shape:n,dataId:this.runWebGLProgram(u,[{shape:o,dtype:i,dataId:e}],i,h,!0).dataId}}runWebGLProgram(t,a,r,s,n=!1){const i=this.makeTensorInfo(t.outputShape,r),o=this.texData.get(i.dataId);if(t.packedOutput&&(o.isPacked=!0),t.outPackingScheme===c.PackingScheme.DENSE){const e=c.getDenseTexShape(t.outputShape);o.texShape=e.map(e=>2*e)}if(null!=t.outTexUsage&&(o.usage=t.outTexUsage),0===e.util.sizeFromShape(i.shape))return o.values=e.util.getTypedArrayFromDType(i.dtype,0),i;const u=[],h=a.map(a=>{if("complex64"===a.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let r=this.texData.get(a.dataId);if(null==r.texture){if(!t.packedInputs&&e.util.sizeFromShape(a.shape)<=(0,e.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:a.shape,texData:null,isUniform:!0,uniformValues:r.values};t.packedInputs&&(r.isPacked=!0,r.shape=a.shape)}else if(!!r.isPacked!=!!t.packedInputs)a=r.isPacked?this.unpackTensor(a):this.packTensor(a),u.push(a),r=this.texData.get(a.dataId);else if(r.isPacked&&!I.isReshapeFree(r.shape,a.shape)){const e=a,t=a.shape;a.shape=r.shape,a=this.packedReshape(a,t),u.push(a),r=this.texData.get(a.dataId),e.shape=t}return this.uploadToGPU(a.dataId),{shape:a.shape,texData:r,isUniform:!1}});this.uploadToGPU(i.dataId);const l={shape:i.shape,texData:o,isUniform:!1},p=d.makeShaderKey(t,h,l),g=this.getAndSaveBinary(p,()=>d.compileProgram(this.gpgpu,t,h,l)),m=null!=this.activeTimers;let f;m&&(f=this.startTimer()),d.runProgram(this.gpgpu,g,h,l,s),u.forEach(e=>this.disposeIntermediateTensorInfo(e)),m&&(f=this.endTimer(f),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(f)}));const x=(0,e.env)().get("WEBGL_FLUSH_THRESHOLD");if(x>0){const t=e.util.now();t-this.lastGlFlushTime>x&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=t)}if(!(0,e.env)().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===n){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,a,r,s=!1){return a=a||t[0].dtype,this.runWebGLProgram(e,t,a,r,s)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,e.env)().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,e.tidy)(()=>{if(!(0,e.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=(0,e.env)().getBool("DEBUG");(0,e.env)().set("DEBUG",!1);const a=this.abs((0,e.scalar)(1e-8)).dataSync()[0];if((0,e.env)().set("DEBUG",t),a>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?D:T}uploadToGPU(t){const a=this.texData.get(t),{shape:r,dtype:s,values:n,texture:u,usage:d,isPacked:h}=a;if(null!=u)return;const l=null!=this.activeTimers;let p;l&&(p=e.util.now());let g=a.texShape;if(null==g&&(g=I.getTextureShapeFromLogicalShape(r,h),a.texShape=g),null!=n){const t=I.getShapeAs3D(r);let u,d=g[1],m=g[0];const f=n instanceof Uint8Array||n instanceof Uint8ClampedArray;h?([d,m]=c.getPackedMatrixTextureShapeWidthHeight(g[0],g[1]),u=new o.EncodeMatrixPackedProgram(t,f)):u=new i.EncodeMatrixProgram(t,f);const x=this.makeTensorInfo([m,d],s);this.texData.get(x.dataId).usage=f?c.TextureUsage.PIXELS:c.TextureUsage.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),d,m,n);const y=[[m,d]],P=!0,E=this.runWebGLProgram(u,[x],s,y,P),D=this.texData.get(E.dataId);a.texture=D.texture,a.texShape=D.texShape,a.isPacked=D.isPacked,a.usage=D.usage,this.disposeIntermediateTensorInfo(x),this.texData.delete(E.dataId),a.values=null,l&&(this.uploadWaitMs+=e.util.now()-p)}else{const e=this.acquireTexture(g,d,s,h);a.texture=e}}convertAndCacheOnCPU(e,t){const a=this.texData.get(e),{dtype:r}=a;return this.releaseGPUData(e),null!=t&&(a.values=O(t,r)),a.values}acquireTexture(e,t,a,r){if(this.numBytesInGPU+=this.computeBytes(e,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, `+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(t,a){return t[0]*t[1]*e.util.bytesPerElement(a)}}function O(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const a="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<a.length;++t)a[t]=Math.round(e[t]);return a}throw new Error(`Unknown dtype ${t}`)}exports.MathBackendWebGL=k,k.nextDataId=0;
},{"./flags_webgl":"YNu6","@tensorflow/tfjs-core":"tc6m","./canvas_util":"S11S","./decode_matrix_gpu":"tZX6","./decode_matrix_packed_gpu":"kOP2","./encode_float_gpu":"KyTh","./encode_float_packed_gpu":"zODu","./encode_matrix_gpu":"JBcV","./encode_matrix_packed_gpu":"dH5p","./gpgpu_context":"AZP2","./gpgpu_math":"hS5V","./kernel_utils/shared":"tfp0","./pack_gpu":"kEpT","./reshape_packed_gpu":"K4kf","./tex_util":"hBHG","./texture_manager":"herW","./unaryop_gpu":"uzBV","./unaryop_packed_gpu":"yBSN","./unpack_gpu":"J76R","./webgl_util":"p3g2"}],"BRLE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GPGPUContext",{enumerable:!0,get:function(){return u.GPGPUContext}}),Object.defineProperty(exports,"MathBackendWebGL",{enumerable:!0,get:function(){return n.MathBackendWebGL}}),exports.forceHalfFloat=a,exports.gpgpu_util=void 0,Object.defineProperty(exports,"setWebGLContext",{enumerable:!0,get:function(){return o.setWebGLContext}}),exports.webgl_util=void 0;var e=require("@tensorflow/tfjs-core"),t=p(require("./gpgpu_util"));exports.gpgpu_util=t;var r=p(require("./webgl_util"));exports.webgl_util=r;var n=require("./backend_webgl"),o=require("./canvas_util"),u=require("./gpgpu_context");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var p=o?Object.getOwnPropertyDescriptor(e,u):null;p&&(p.get||p.set)?Object.defineProperty(n,u,p):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function a(){(0,e.env)().set("WEBGL_FORCE_F16_TEXTURES",!0)}
},{"@tensorflow/tfjs-core":"tc6m","./gpgpu_util":"LB6l","./webgl_util":"p3g2","./backend_webgl":"YZpX","./canvas_util":"S11S","./gpgpu_context":"AZP2"}],"yAt8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={webgl:!0,version_webgl:!0};Object.defineProperty(exports,"version_webgl",{enumerable:!0,get:function(){return o.version}}),exports.webgl=void 0;var r=require("@tensorflow/tfjs-core"),t=require("./backend_webgl"),o=require("./version"),n=require("./webgl");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===n[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))}),r.device_util.isBrowser()&&(0,r.registerBackend)("webgl",()=>new t.MathBackendWebGL,2);const s={forceHalfFloat:n.forceHalfFloat};exports.webgl=s;
},{"@tensorflow/tfjs-core":"tc6m","./backend_webgl":"YZpX","./version":"SdA6","./webgl":"BRLE"}],"r3Zb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SQUARED_DIFFERENCE=exports.CHECK_NAN_SNIPPET=exports.BinaryOpProgram=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./gpgpu_math");const r="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";exports.CHECK_NAN_SNIPPET=r;const a="return (a - b) * (a - b);";exports.SQUARED_DIFFERENCE=a;class n{constructor(r,a,n){this.variableNames=["A","B"],this.outputShape=t.backend_util.assertAndGetBroadcastShape(a,n),this.enableShapeUniforms=(0,e.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${r}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}exports.BinaryOpProgram=n;
},{"@tensorflow/tfjs-core":"tc6m","./gpgpu_math":"hS5V"}],"MEci":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NOT_EQUAL=exports.ELU_DER=exports.CHECK_NAN_SNIPPET=exports.BinaryOpPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./gpgpu_math"),s=require("./packing_util"),n=require("./shader_compiler");const r="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";exports.CHECK_NAN_SNIPPET=r;const u="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n";exports.ELU_DER=u;const o="\n  return vec4(notEqual(a, b));\n";exports.NOT_EQUAL=o;class a{constructor(r,u,o,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.backend_util.assertAndGetBroadcastShape(u,o);const l=this.outputShape.length;this.enableShapeUniforms=(0,t.useShapeUniforms)(l);let i="";if(a)if(0===l||1===e.util.sizeFromShape(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(i=`\n          ${(0,n.getCoordsDataType)(l)} coords = getOutputCoords();\n        `,1===l)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=(0,s.getChannels)("coords",l);this.enableShapeUniforms?i+=`\n            bool nextRowOutOfBounds =\n              (${e[l-2]} + 1) >= outShape[${l} - 2];\n            bool nextColOutOfBounds =\n              (${e[l-1]} + 1) >= outShape[${l} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:i+=`\n            bool nextRowOutOfBounds =\n              (${e[l-2]} + 1) >= ${this.outputShape[l-2]};\n            bool nextColOutOfBounds =\n              (${e[l-1]} + 1) >= ${this.outputShape[l-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${r}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${i}\n\n        setOutput(result);\n      }\n    `}}exports.BinaryOpPackedProgram=a;
},{"@tensorflow/tfjs-core":"tc6m","./gpgpu_math":"hS5V","./packing_util":"Axn8","./shader_compiler":"DIKY"}],"Gwwj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:n}=e,{x:d}=t;return n.incRef(d.dataId),{dataId:d.dataId,shape:d.shape,dtype:d.dtype}}const n={kernelName:e.Identity,backendName:"webgl",kernelFunc:t};exports.identityConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"vWXR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=n,exports.complexConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function n(e){const{inputs:n,backend:o}=e,{real:r,imag:a}=n,i=o.makeTensorInfo(r.shape,"complex64"),s=o.texData.get(i.dataId),c=(0,t.identity)({inputs:{x:r},backend:o}),p=(0,t.identity)({inputs:{x:a},backend:o});return s.complexTensorInfos={real:c,imag:p},i}const o={kernelName:e.Complex,backendName:"webgl",kernelFunc:n};exports.complexConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./Identity":"Gwwj"}],"eiHO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LEAKYRELU_PACKED=exports.LEAKYRELU=void 0,exports.leakyRelu=s,exports.leakyReluConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu");const o="return (a < 0.) ? b * a : a;";exports.LEAKYRELU=o;const n="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function s(s){const{inputs:t,backend:p,attrs:l}=s,{x:u}=t,{alpha:c}=l,i=p.makeTensorInfo([],"float32",e.util.createScalarValue(c,"float32")),L=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new r.BinaryOpPackedProgram(n,u.shape,i.shape):new a.BinaryOpProgram(o,u.shape,i.shape),E=p.runWebGLProgram(L,[u,i],"float32");return p.disposeIntermediateTensorInfo(i),E}exports.LEAKYRELU_PACKED=n;const t={kernelName:e.LeakyRelu,backendName:"webgl",kernelFunc:s};exports.leakyReluConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci"}],"k80A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PRELU_PACKED=exports.PRELU=void 0,exports.prelu=s,exports.preluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),a=require("../binaryop_packed_gpu");const n="return (a < 0.) ? b * a : a;";exports.PRELU=n;const o="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function s(s){const{inputs:p,backend:t}=s,{x:u,alpha:c}=p,i=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new a.BinaryOpPackedProgram(o,u.shape,c.shape):new r.BinaryOpProgram(n,u.shape,c.shape);return t.runWebGLProgram(i,[u,c],"float32")}exports.PRELU_PACKED=o;const p={kernelName:e.Prelu,backendName:"webgl",kernelFunc:s};exports.preluConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci"}],"uLeB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHECK_NAN_SNIPPET_UNARY=exports.CHECK_NAN_SNIPPET_BINARY_PACKED=exports.CHECK_NAN_SNIPPET_BINARY=void 0,exports.binaryKernelFunc=N,exports.mapActivationToShaderProgram=y,exports.unaryKernelFunc=f;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),t=require("../binaryop_packed_gpu"),n=require("../kernels/Complex"),a=require("../kernels/LeakyRelu"),p=require("../kernels/Prelu"),o=i(require("../unaryop_gpu")),u=i(require("../unaryop_packed_gpu"));function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var o=a?Object.getOwnPropertyDescriptor(e,p):null;o&&(o.get||o.set)?Object.defineProperty(n,p,o):n[p]=e[p]}return n.default=e,t&&t.set(e,n),n}const l="if (isnan(x)) return x;";exports.CHECK_NAN_SNIPPET_UNARY=l;const d="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";exports.CHECK_NAN_SNIPPET_BINARY=d;const c="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";function f({opSnippet:r,packedOpSnippet:t,cpuKernelImpl:n,dtype:a}){return({inputs:p,backend:s})=>{const{x:i}=p,l=s,d=a||i.dtype;if(l.shouldExecuteOnCPU([i])&&null!=n){const e=l.texData.get(i.dataId),r=n(e.values,d);return l.makeTensorInfo(i.shape,d,r)}let c;return c=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new u.UnaryOpPackedProgram(i.shape,t):new o.UnaryOpProgram(i.shape,r),l.runWebGLProgram(c,[i],d)}}function N({opSnippet:a,packedOpSnippet:p,checkOutOfBounds:o=!1,supportsComplex:u=!1,cpuKernelImpl:s,dtype:i}){return({inputs:l,backend:d})=>{const{a:c,b:f}=l,N=d;if(u&&"complex64"===c.dtype){const t=N.texData.get(c.dataId),p=N.texData.get(f.dataId),[o,u]=[[t.complexTensorInfos.real,p.complexTensorInfos.real],[t.complexTensorInfos.imag,p.complexTensorInfos.imag]].map(t=>{const[n,p]=t,o={dataId:n.dataId,dtype:n.dtype,shape:c.shape},u={dataId:p.dataId,dtype:p.dtype,shape:f.shape},s=new r.BinaryOpProgram(a,c.shape,f.shape);return N.runWebGLProgram(s,[o,u],(0,e.upcastType)(n.dtype,p.dtype))}),s=(0,n.complex)({inputs:{real:o,imag:u},backend:N});return N.disposeIntermediateTensorInfo(o),N.disposeIntermediateTensorInfo(u),s}const y=i||(0,e.upcastType)(c.dtype,f.dtype);if(("string"===c.dtype||"string"===f.dtype||N.shouldExecuteOnCPU([c,f]))&&null!=s){const r=N.texData.get(c.dataId).values,t=N.texData.get(f.dataId).values,n="string"===c.dtype?e.backend_util.fromUint8ToStringArray(r):r,a="string"===c.dtype?e.backend_util.fromUint8ToStringArray(t):t,[p,o]=s(c.shape,f.shape,n,a,y),u=N.makeTensorInfo(o,y);return N.texData.get(u.dataId).values=p,u}let P;return P=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=p?new t.BinaryOpPackedProgram(p,c.shape,f.shape,o):new r.BinaryOpProgram(a,c.shape,f.shape),N.runWebGLProgram(P,[c,f],y)}}function y(e,r=!1){if("linear"===e)return r?u.LINEAR:o.LINEAR;if("relu"===e)return r?u.RELU:o.RELU;if("elu"===e)return r?u.ELU:o.ELU;if("relu6"===e)return r?u.RELU6:o.RELU6;if("prelu"===e)return r?p.PRELU_PACKED:p.PRELU;if("leakyrelu"===e)return r?a.LEAKYRELU_PACKED:a.LEAKYRELU;if("sigmoid"===e)return r?u.SIGMOID:o.SIGMOID;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}exports.CHECK_NAN_SNIPPET_BINARY_PACKED=c;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci","../kernels/Complex":"vWXR","../kernels/LeakyRelu":"eiHO","../kernels/Prelu":"k80A","../unaryop_gpu":"uzBV","../unaryop_packed_gpu":"yBSN"}],"UauI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatMulPackedProgram=void 0;var t=require("./gpgpu_math");class e{constructor(e,n,a,i=!1,r=!1,s=!1,o=null,c=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length);const l=i?e[1]:e[2],h=Math.ceil(l/2),v=i?"i * 2, rc.y":"rc.y, i * 2",p=r?"rc.z, i * 2":"i * 2, rc.z",d=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",m="";o&&(b=c?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:u?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${o}\n        }`:`vec4 activation(vec4 x) {\n          ${o}\n        }`,m="result = activation(result);");const $=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let g="rc.x",y="rc.x";e[0]<n[0]?g=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(y=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`\n      ${b}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${h}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${h}; i++) {\n          int batchA = ${g};\n          int batchB = ${y};\n          vec4 a = getMatrixA(batchA, ${v});\n          vec4 b = getMatrixB(batchB, ${p});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${d[0]} * ${x[0]});\n          result += (${d[1]} * ${x[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${$}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}}exports.MatMulPackedProgram=e;
},{"./gpgpu_math":"hS5V"}],"eCLc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.COMPLEX_MULTIPLY=exports.BinaryOpComplexProgram=void 0;var a=require("@tensorflow/tfjs-core");const e={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};exports.COMPLEX_MULTIPLY=e;class t{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(t,r),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}exports.BinaryOpComplexProgram=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"dTvy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiply=d,exports.multiplyConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=s(require("../binaryop_complex_gpu")),t=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu"),n=require("../kernel_utils/shared"),o=require("./Complex");function p(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:a})(e)}function s(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(a);if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}const l="return a * b;";function d(p){const{inputs:s,backend:d}=p,{a:u,b:i}=s,c=e.backend_util.upcastType(u.dtype,i.dtype);if("complex64"===u.dtype){const e=d.texData.get(u.dataId),t=d.texData.get(i.dataId),r=new a.BinaryOpComplexProgram(a.COMPLEX_MULTIPLY.REAL,u.shape,i.shape),n=new a.BinaryOpComplexProgram(a.COMPLEX_MULTIPLY.IMAG,u.shape,i.shape),p=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:u.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:u.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],s=d.runWebGLProgram(r,p,"float32"),l=d.runWebGLProgram(n,p,"float32"),c=(0,o.complex)({inputs:{real:s,imag:l},backend:d});return d.disposeIntermediateTensorInfo(s),d.disposeIntermediateTensorInfo(l),c}if(d.shouldExecuteOnCPU([u,i])){const e=d.texData.get(u.dataId),a=d.texData.get(i.dataId),[t,r]=(0,n.multiplyImplCPU)(u.shape,i.shape,e.values,a.values,c),o=d.makeTensorInfo(r,c);return d.texData.get(o.dataId).values=t,o}let f;return f=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new r.BinaryOpPackedProgram(l,u.shape,i.shape):new t.BinaryOpProgram(l,u.shape,i.shape),d.runWebGLProgram(f,[u,i],c)}const u={kernelName:e.Multiply,backendName:"webgl",kernelFunc:d};exports.multiplyConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_complex_gpu":"eCLc","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci","../kernel_utils/shared":"tfp0","./Complex":"vWXR"}],"hfnj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packedReshape=a;var e=require("../reshape_packed_gpu"),t=require("../webgl_util");function a(a,d,p){const r=[(0,t.getBatchDim)(a.shape),...(0,t.getRowsCols)(a.shape)],s={dtype:a.dtype,shape:r,dataId:a.dataId},o=[(0,t.getBatchDim)(d),...(0,t.getRowsCols)(d)],u=new e.ReshapePackedProgram(o,r),c=[r],h=p.runWebGLProgram(u,[s],a.dtype,c,!0);return{dataId:h.dataId,shape:d,dtype:h.dtype}}
},{"../reshape_packed_gpu":"K4kf","../webgl_util":"p3g2"}],"k4TP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=t,exports.reshapeConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../kernel_utils/reshape"),s=require("../webgl_util");function t(t){const{inputs:r,backend:p,attrs:h}=t,{x:n}=r,{shape:i}=h,l=p,o=e.util.sizeFromShape(n.shape),d=e.util.inferFromImplicitShape(i,o),u=e.util.sizeFromShape(d);e.util.assert(o===u,()=>`The new shape (${d}) has ${u} elements and the old `+`shape (${n.shape}) has ${o} elements. The new shape and old `+"shape must have the same number of elements.");const c=l.texData.get(n.dataId);return!c.isPacked||(0,s.isReshapeFree)(n.shape,d)||null!==c.texture&&(0,s.isReshapeFree)(c.shape,d)?(l.incRef(n.dataId),{dataId:n.dataId,shape:d,dtype:n.dtype}):(0,a.packedReshape)(n,d,l)}const r={kernelName:e.Reshape,backendName:"webgl",kernelFunc:t};exports.reshapeConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reshape":"hfnj","../webgl_util":"p3g2"}],"mDOg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeanProgram=void 0;var n=require("@tensorflow/tfjs-core");class e{constructor(e,t){this.variableNames=["x"];const{windowSize:i,batchSize:a,inSize:s,outSize:o}=e;this.outputShape=[a,o];const u=4*Math.floor(i/4),c=i%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${n.util.isInt(e)?e.toPrecision(2):e}, ones);`}let d="";s%i>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}exports.MeanProgram=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"cqVi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReduceProgram=void 0;class n{constructor(n,e){this.variableNames=["x"];const{windowSize:a,batchSize:l,inSize:i,outSize:t}=n;this.outputShape=[l,t];let u="0.0",o="";"prod"===e?u="1.0":"min"===e?(u="1.0 / 1e-20",o="min"):"max"===e&&(u="-1.0 / 1e-20",o="max");let d=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?d="sumValue":"prod"===e?d="prodValue":"all"===e?d="allValue":"any"===e&&(d="anyValue");const s=4*Math.floor(a/4),V=a%4;let c=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n        if (${"min"===e} || ${"max"===e}) {\n          minMaxValue = ${o}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,r="vec4";"all"===e?(u="1.0",c="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",r="bvec4"):"any"===e&&(u="0.0",c="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",r="bvec4");let x="";i%a>0&&(x=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${u};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${x}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${a};\n\n        vec4 minMaxValue = vec4(${u});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${2===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${3===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${c}\n        }\n        setOutput(${d});\n      }\n    `}}exports.ReduceProgram=n;
},{}],"rKxH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reduce=o;var e=require("@tensorflow/tfjs-core"),i=require("../mean_gpu"),t=require("../reduce_gpu");function n(i){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:i[1],o=e.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return t}function o(e,o,r,u){const a=n(e.shape);let z=e;for(let n=0;n<a.length;n++){const{inSize:S,windowSize:s,outSize:c}=a[n];let d,w;d="mean"===r?0===n?new i.MeanProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c},S):new i.MeanProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c}):new t.ReduceProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c},r),w=z,z=u.runWebGLProgram(d,[z],o),w.dataId!==e.dataId&&u.disposeIntermediateTensorInfo(w)}return z}
},{"@tensorflow/tfjs-core":"tc6m","../mean_gpu":"mDOg","../reduce_gpu":"cqVi"}],"JPQj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransposeProgram=void 0;var r=require("./shader_compiler");class e{constructor(e,s){this.variableNames=["A"];const o=new Array(e.length);for(let r=0;r<o.length;r++)o[r]=e[s[r]];this.outputShape=o,this.rank=o.length;const n=(0,r.getCoordsDataType)(this.rank),a=t(s);this.userCode=`\n    void main() {\n      ${n} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}function t(r){const e=r.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let o=0;o<r.length;o++)s[r[o]]=t[o];return s.join()}exports.TransposeProgram=e;
},{"./shader_compiler":"DIKY"}],"TCui":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransposePackedProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class r{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(r.length);for(let t=0;t<s.length;t++)s[t]=r[n[t]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=(0,e.getCoordsDataType)(this.rank),i=(0,t.getVecChannels)("rc",this.rank),o=new Array(this.rank);for(let t=0;t<n.length;t++)o[n[t]]=i[t];const h=`vec2(${o.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${s[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${h})`;this.userCode=`\n    void main() {\n      ${a} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${u}) {\n        result[1] = ${c};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${s[this.rank-2]}) {\n        result[2] = ${c};\n        if(${u}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}exports.TransposePackedProgram=r;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"nCXe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeImpl=o,Object.defineProperty(exports,"transposeImplCPU",{enumerable:!0,get:function(){return r.transposeImplCPU}});var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),s=require("../transpose_gpu"),t=require("../transpose_packed_gpu");function o(r,o,n){const p=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t.TransposePackedProgram(r.shape,o):new s.TransposeProgram(r.shape,o);return n.runWebGLProgram(p,[r],r.dtype)}
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../transpose_gpu":"JPQj","../transpose_packed_gpu":"TCui"}],"mchI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumImpl=n;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),r=require("./Transpose_impl");function n(n,a,p,u){const i=a,o=n.shape.length,l=e.util.parseAxisParam(i,n.shape);let d=l;const c=e.backend_util.getAxesPermutation(d,o),m=null!=c;let h=n;m&&(h=(0,r.transposeImpl)(n,c,u),d=e.backend_util.getInnerMostAxes(d.length,o)),e.backend_util.assertAxesAreInnerMostDims("sum",d,o);const[I,x]=e.backend_util.computeOutAndReduceShapes(h.shape,d);let _=I;p&&(_=e.backend_util.expandShapeToKeepDim(I,l));const b=e.util.sizeFromShape(x),k=e.util.sizeFromShape(n.shape)/b,f=(0,t.reshape)({inputs:{x:h},attrs:{shape:[k,b]},backend:u}),A=(0,e.sumOutType)(n.dtype),T=(0,s.reduce)(f,A,"sum",u),g=(0,t.reshape)({inputs:{x:T},attrs:{shape:_},backend:u});return u.disposeIntermediateTensorInfo(f),u.disposeIntermediateTensorInfo(T),m&&u.disposeIntermediateTensorInfo(h),g}
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","./Reshape":"k4TP","./Transpose_impl":"nCXe"}],"RVri":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=s,exports.sumConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./Sum_impl");function s(e){const{inputs:s,backend:t,attrs:n}=e,{x:o}=s,{axis:u,keepDims:i}=n;return(0,r.sumImpl)(o,u,i,t)}const t={kernelName:e.Sum,backendName:"webgl",kernelFunc:s};exports.sumConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./Sum_impl":"mchI"}],"hS8R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=s,exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Transpose_impl");function s(e){const{inputs:s,backend:r,attrs:a}=e,{x:n}=s,{perm:o}=a,p=r,l=n.shape.length,u=new Array(l);for(let t=0;t<u.length;t++)u[t]=n.shape[o[t]];let d;if(p.shouldExecuteOnCPU([n])){const e=p.texData.get(n.dataId).values,s=(0,t.transposeImplCPU)(e,n.shape,n.dtype,o,u);d=p.makeTensorInfo(u,n.dtype),p.texData.get(d.dataId).values=s}else d=(0,t.transposeImpl)(n,o,p);return d}const r={kernelName:e.Transpose,backendName:"webgl",kernelFunc:s};exports.transposeConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Transpose_impl":"nCXe"}],"mEDx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MATMUL_SHARED_DIM_THRESHOLD=void 0,exports.batchMatMulImpl=i;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils"),t=require("../mulmat_packed_gpu"),a=require("./Multiply"),n=require("./Reshape"),p=require("./Sum"),r=require("./Transpose");const u=1e3;function i({a:i,b:l,transposeA:o,transposeB:h,backend:c,bias:d=null,preluActivationWeights:m=null,leakyreluAlpha:b=0,activation:k=null}){const f=i.shape.length,M=l.shape.length,x=o?i.shape[f-2]:i.shape[f-1],_=h?l.shape[M-1]:l.shape[M-2],T=o?i.shape[f-1]:i.shape[f-2],A=h?l.shape[M-2]:l.shape[M-1],S=i.shape.slice(0,-2),y=l.shape.slice(0,-2),$=e.util.sizeFromShape(S),g=e.util.sizeFromShape(y),q=$===g||1===$||1===g;e.util.assert(f>=2&&M>=2&&q,()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${S}) and (${y}).`);const D=($>g?i.shape.slice(0,-2):l.shape.slice(0,-2)).concat([T,A]);e.util.assert(x===_,()=>`Error in matMul: inner shapes (${x}) and (`+`${_}) of Tensors with shapes ${i.shape} and `+`${l.shape} and transposeA=${o}`+` and transposeB=${h} must match.`);const v=o?[$,x,T]:[$,T,x],E=h?[g,A,_]:[g,_,A],H=(0,n.reshape)({inputs:{x:i},backend:c,attrs:{shape:v}}),I=(0,n.reshape)({inputs:{x:l},backend:c,attrs:{shape:E}}),L=[H,I],P=Math.max($,g),R=o?H.shape[1]:H.shape[2],w=null!=d,O=null!=m,j="leakyrelu"===k,z=null!=k?(0,s.mapActivationToShaderProgram)(k,!0):null;let B;if((1===T||1===A)&&R>u&&!1===(w||O||j||null!=z)){let e=H,s=I;o&&(e=(0,r.transpose)({inputs:{x:H},backend:c,attrs:{perm:[0,2,1]}}),L.push(e)),h&&(s=(0,r.transpose)({inputs:{x:I},backend:c,attrs:{perm:[0,2,1]}}),L.push(s));const t=1===A;let u=e;1!==A&&(u=(0,n.reshape)({inputs:{x:e},backend:c,attrs:{shape:[P,R,1]}}),L.push(u));const i=1===A?2:1;let l=s;t&&(l=(0,n.reshape)({inputs:{x:s},backend:c,attrs:{shape:[P,1,R]}}),L.push(l));const d=(0,a.multiply)({inputs:{a:u,b:l},backend:c});B=(0,p.sum)({inputs:{x:d},backend:c,attrs:{axis:i,keepDims:!0}}),L.push(d)}else{const s=(0,e.upcastType)(i.dtype,l.dtype),a=new t.MatMulPackedProgram(v,E,[P,T,A],o,h,w,z,O,j),n=[H,I];if(null!=d&&n.push(d),O&&n.push(m),j){const s=c.makeTensorInfo([],"float32",e.util.createScalarValue(b,"float32"));n.push(s),L.push(s)}B=c.runWebGLProgram(a,n,s)}const F=(0,n.reshape)({inputs:{x:B},backend:c,attrs:{shape:D}});L.push(B);for(const e of L)c.disposeIntermediateTensorInfo(e);return F}exports.MATMUL_SHARED_DIM_THRESHOLD=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../mulmat_packed_gpu":"UauI","./Multiply":"dTvy","./Reshape":"k4TP","./Sum":"RVri","./Transpose":"hS8R"}],"xSMk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._fusedMatMul=a,exports._fusedMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./BatchMatMul_impl");function a(e){const{inputs:a,backend:s,attrs:r}=e,{a:n,b:o,bias:u,preluActivationWeights:i}=a,{transposeA:l,transposeB:c,activation:p,leakyreluAlpha:M}=r;return(0,t.batchMatMulImpl)({a:n,b:o,transposeA:l,transposeB:c,backend:s,bias:u,preluActivationWeights:i,leakyreluAlpha:M,activation:p})}const s={kernelName:e._FusedMatMul,backendName:"webgl",kernelFunc:a};exports._fusedMatMulConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./BatchMatMul_impl":"mEDx"}],"cuxj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=s,exports.absConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),n=require("../unaryop_gpu"),t=require("../unaryop_packed_gpu");const a="return abs(x);";function s(s){const{inputs:o,backend:p}=s,{x:u}=o;if(p.shouldExecuteOnCPU([u])&&"complex64"!==u.dtype){const e=p.texData.get(u.dataId),n=(0,r.simpleAbsImplCPU)(e.values);return p.makeTensorInfo(u.shape,u.dtype,n)}let c;return c=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new t.UnaryOpPackedProgram(u.shape,a):new n.UnaryOpProgram(u.shape,a),p.runWebGLProgram(c,[u],u.dtype)}const o={kernelName:e.Abs,backendName:"webgl",kernelFunc:s};exports.absConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../unaryop_gpu":"uzBV","../unaryop_packed_gpu":"yBSN"}],"FCN5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosConfig=exports.acos=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const o=n.CHECK_NAN_SNIPPET+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",s=(0,r.unaryKernelFunc)({opSnippet:o});exports.acos=s;const t={kernelName:e.Acos,backendName:"webgl",kernelFunc:s};exports.acosConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"WORC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshConfig=exports.acosh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),o=require("../unaryop_gpu");const n=o.CHECK_NAN_SNIPPET+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",s=(0,r.unaryKernelFunc)({opSnippet:n});exports.acosh=s;const t={kernelName:e.Acosh,backendName:"webgl",kernelFunc:s};exports.acoshConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"qsoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addKernelFunc=exports.addConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../kernel_utils/shared");const t="return a + b;",l=(0,r.binaryKernelFunc)({opSnippet:t,packedOpSnippet:t,supportsComplex:!0,cpuKernelImpl:n.addImplCPU});exports.addKernelFunc=l;const p={kernelName:e.Add,backendName:"webgl",kernelFunc:l};exports.addConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"DioZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddNProgram=void 0;class t{constructor(t,s){this.outputShape=[],this.outputShape=t,this.variableNames=s.map((t,s)=>`T${s}`);const e=[];this.variableNames.forEach(t=>{e.push(`float v${t} = get${t}AtOutCoords();`)});const o=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${e.join("\n        ")}\n\n        float result = ${o};\n        setOutput(result);\n      }\n    `}}exports.AddNProgram=t;
},{}],"BmoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddNPackedProgram=void 0;class t{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>`T${e}`);const s=[];this.variableNames.forEach(t=>{s.push(`vec4 v${t} = get${t}AtOutCoords();`)});const a=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${s.join("\n        ")}\n\n        vec4 result = ${a};\n        setOutput(result);\n      }\n    `}}exports.AddNPackedProgram=t;
},{}],"hFFr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=d,exports.addNConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../addn_gpu"),r=require("../addn_packed_gpu"),t=require("./Identity");function d(a){const{inputs:o,backend:s}=a,i=o;if(1===i.length)return(0,t.identity)({inputs:{x:i[0]},backend:s});if(i.length>(0,e.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(i.length/2),n=d({inputs:i.slice(0,e),backend:s}),r=d({inputs:i.slice(e),backend:s});return d({inputs:[n,r],backend:s})}const u=i.map(e=>e.dtype).reduce((n,r)=>(0,e.upcastType)(n,r)),c=i.map(e=>e.shape),p=(0,e.env)().getBool("WEBGL_PACK")?new r.AddNPackedProgram(i[0].shape,c):new n.AddNProgram(i[0].shape,c);return s.runWebGLProgram(p,i,u)}const a={kernelName:e.AddN,backendName:"webgl",kernelFunc:d};exports.addNConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../addn_gpu":"DioZ","../addn_packed_gpu":"BmoR","./Identity":"Gwwj"}],"n0H3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=a,exports.allConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function a(a){const{inputs:r,backend:i,attrs:l}=a,{x:o}=r,{axis:p,keepDims:u}=l,d=o.shape.length,c=e.util.parseAxisParam(p,o.shape);let h=c;const k=e.backend_util.getAxesPermutation(h,d);let x=o;null!=k&&(x=(0,n.transpose)({inputs:{x:o},backend:i,attrs:{perm:k}}),h=e.backend_util.getInnerMostAxes(h.length,d)),e.backend_util.assertAxesAreInnerMostDims("all",h,d);const[b,m]=e.backend_util.computeOutAndReduceShapes(x.shape,h),f=e.util.sizeFromShape(m),I=(0,t.reshape)({inputs:{x:x},backend:i,attrs:{shape:[-1,f]}}),_=(0,s.reduce)(I,I.dtype,"all",i);let g;if(u){const s=e.backend_util.expandShapeToKeepDim(b,c);g=(0,t.reshape)({inputs:{x:_},backend:i,attrs:{shape:s}})}else g=(0,t.reshape)({inputs:{x:_},backend:i,attrs:{shape:b}});return i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(_),null!=k&&i.disposeIntermediateTensorInfo(x),g}const r={kernelName:e.All,backendName:"webgl",kernelFunc:a};exports.allConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","./Reshape":"k4TP","./Transpose":"hS8R"}],"VDwi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=a,exports.anyConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function a(a){const{inputs:r,backend:i,attrs:o}=a,{x:p}=r,{axis:u,keepDims:d}=o,c=p.shape.length,l=e.util.parseAxisParam(u,p.shape);let h=l;const k=e.backend_util.getAxesPermutation(h,c);let x=p;null!=k&&(x=(0,n.transpose)({inputs:{x:p},backend:i,attrs:{perm:k}}),h=e.backend_util.getInnerMostAxes(h.length,c)),e.backend_util.assertAxesAreInnerMostDims("any",h,c);const[b,m]=e.backend_util.computeOutAndReduceShapes(x.shape,h),f=e.util.sizeFromShape(m),y=(0,t.reshape)({inputs:{x:x},backend:i,attrs:{shape:[-1,f]}}),I=(0,s.reduce)(y,y.dtype,"any",i);let _;if(d){const s=e.backend_util.expandShapeToKeepDim(b,l);_=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:s}})}else _=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:b}});return i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(I),null!=k&&i.disposeIntermediateTensorInfo(x),_}const r={kernelName:e.Any,backendName:"webgl",kernelFunc:a};exports.anyConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","./Reshape":"k4TP","./Transpose":"hS8R"}],"Pm0r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArgMinMaxProgram=void 0;class t{constructor(t,e,n){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=t;n||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o="max"===e?">":"<",d=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${i}; i++) {\n          int inIdx = ${d};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${o} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}exports.ArgMinMaxProgram=t;
},{}],"TNMy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArgMinMaxPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./packing_util"),t=require("./shader_compiler");class c{constructor(c,o,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,e.util.assert(c.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const i=c[c.length-1],r=Math.ceil(i/o);this.outputShape=c.slice(0,-1),r>1&&this.outputShape.push(r),a||this.variableNames.push("bestIndicesA");const d=this.outputShape,l=d.length,$=(0,t.getCoordsDataType)(l),u=(0,n.getChannels)("coords",l);let h,p;if(1===r){p=l+1;const e=(0,t.getCoordsDataType)(p);h=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[l-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[l-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[l-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[l-2]};`}else p=l,h=`\n        ${$} sourceLocR = coords;\n        ++${u[l-1]};\n        ${$} sourceLocG = coords;\n        ++${u[l-2]};\n        ${$} sourceLocA = coords;\n        --${u[l-1]};\n        ${$} sourceLocB = coords;\n        --${u[l-2]};`;const x=["x","y","z","w","u","v"].slice(0,p),g="."+x[p-1],v=x.map(e=>"int "+e),C=(0,n.getChannels)("sourceLocR",p-1).concat("inIdx.r"),I=(0,n.getChannels)("sourceLocG",p-1).concat("inIdx.g"),b=(0,n.getChannels)("sourceLocB",p-1).concat("inIdx.b"),A=(0,n.getChannels)("sourceLocA",p-1).concat("inIdx.a"),j="max"===s?"greaterThan":"lessThan",L=a?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${C.join()}),\n                             getBestIndicesAChannel(${I.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${A.join()})));`,B=`vec4(\n            getAChannel(${C.join()}),\n            hasNextCol ? getAChannel(${I.join()}) : 0.,\n            hasNextRow ? getAChannel(${b.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${A.join()}) : 0.)`,m=a?"":`\n      float getBestIndicesAChannel(${v.join()}) {\n        return getChannel(getBestIndicesA(${x.join()}),\n                                          vec2(${x.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${v.join()}) {\n        return getChannel(getA(${x.join()}),\n                               vec2(${x.slice(-2).join()}));\n      }\n      ${m}\n      void main() {\n        ${$} coords = getOutputCoords();\n        bool hasNextCol = ${u[l-1]} < ${d[l-1]-1};\n        bool hasNextRow = ${u[l-2]} < ${d[l-2]-1};\n        ${h}\n        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},\n          sourceLocB${g}, sourceLocA${g}) * ${o};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${B};\n\n        for (int i = 0; i < ${o}; i++) {\n          inIdx = srcIdx;\n          ${L}\n          vec4 candidate = ${B};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${j}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}exports.ArgMinMaxPackedProgram=c;
},{"@tensorflow/tfjs-core":"tc6m","./packing_util":"Axn8","./shader_compiler":"DIKY"}],"x6ZC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMinMaxReduce=i;var e=require("@tensorflow/tfjs-core"),n=require("../argminmax_gpu"),t=require("../argminmax_packed_gpu"),r=require("../kernels/Reshape");function s(t,r,a,i=null){let u=r.shape[0],o=r.shape[1];null!=i&&(u=i.shape[0],o=i.shape[1]);const p=e.backend_util.computeOptimalWindowSize(o),l={windowSize:p,inSize:o,batchSize:u,outSize:Math.ceil(o/p)},c=new n.ArgMinMaxProgram(l,a,null==i),h=[r];null!=i&&h.push(i);const d=t.runWebGLProgram(c,h,"int32");if(1===d.shape[1])return d;const g=s(t,r,a,d);return t.disposeIntermediateTensorInfo(d),g}function a(n,r,s,i=null){const u=null!=i?i.shape:r.shape,o=u[u.length-1],p=e.backend_util.computeOptimalWindowSize(o),l=new t.ArgMinMaxPackedProgram(u,p,s,null==i),c=null==i?[r]:[r,i],h=n.runWebGLProgram(l,c,"int32");if(h.shape.length===r.shape.length){const e=a(n,r,s,h);return n.disposeIntermediateTensorInfo(h),e}return h}function i(n,t,i,u){const o=[i];if(e.backend_util.assertAxesAreInnerMostDims("arg"+u.charAt(0).toUpperCase()+u.slice(1),o,t.shape.length),!(0,e.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const a=[],i=n.texData.get(t.dataId);let p=t;null!==i&&i.isPacked&&(p=n.unpackTensor(t),a.push(p));const[l,c]=e.backend_util.computeOutAndReduceShapes(p.shape,o),h=e.util.sizeFromShape(c),d=(0,r.reshape)({inputs:{x:p},backend:n,attrs:{shape:[-1,h]}});a.push(d);const g=s(n,d,u);a.push(g);const m=(0,r.reshape)({inputs:{x:g},backend:n,attrs:{shape:l}});return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),m}return a(n,t,u)}
},{"@tensorflow/tfjs-core":"tc6m","../argminmax_gpu":"Pm0r","../argminmax_packed_gpu":"TNMy","../kernels/Reshape":"k4TP"}],"ZL6O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=s,exports.argMaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/arg_min_max"),r=require("./Transpose");function s(s){const{inputs:n,backend:a,attrs:o}=s,{x:i}=n,{axis:l}=o;let u=e.util.parseAxisParam(l,i.shape);const x=e.backend_util.getAxesPermutation(u,i.shape.length);let c=i;const p=[];null!=x&&(c=(0,r.transpose)({inputs:{x:i},backend:a,attrs:{perm:x}}),p.push(c),u=e.backend_util.getInnerMostAxes(u.length,c.shape.length)),e.backend_util.assertAxesAreInnerMostDims("argMax",[u[0]],c.shape.length);const g=(0,t.argMinMaxReduce)(a,c,u[0],"max");return p.forEach(e=>a.disposeIntermediateTensorInfo(e)),g}const n={kernelName:e.ArgMax,backendName:"webgl",kernelFunc:s};exports.argMaxConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/arg_min_max":"x6ZC","./Transpose":"hS8R"}],"cvsE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=r,exports.argMinConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/arg_min_max"),t=require("./Transpose");function r(r){const{inputs:s,backend:a,attrs:i}=r,{x:o}=s,{axis:l}=i;let u=e.util.parseAxisParam(l,o.shape);const c=e.backend_util.getAxesPermutation(u,o.shape.length);let p=o;const g=[];null!=c&&(p=(0,t.transpose)({inputs:{x:o},backend:a,attrs:{perm:c}}),g.push(p),u=e.backend_util.getInnerMostAxes(u.length,p.shape.length)),e.backend_util.assertAxesAreInnerMostDims("argMin",[u[0]],p.shape.length);const x=(0,n.argMinMaxReduce)(a,p,u[0],"min");return g.forEach(e=>a.disposeIntermediateTensorInfo(e)),x}const s={kernelName:e.ArgMin,backendName:"webgl",kernelFunc:r};exports.argMinConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/arg_min_max":"x6ZC","./Transpose":"hS8R"}],"UkOR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinConfig=exports.asin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils"),r=require("../unaryop_gpu");const s=r.CHECK_NAN_SNIPPET+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",i=(0,n.unaryKernelFunc)({opSnippet:s});exports.asin=i;const t={kernelName:e.Asin,backendName:"webgl",kernelFunc:i};exports.asinConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"HHor":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhConfig=exports.asinh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const s=n.CHECK_NAN_SNIPPET+"return log(x + sqrt(x * x + 1.0));",o=(0,r.unaryKernelFunc)({opSnippet:s});exports.asinh=o;const t={kernelName:e.Asinh,backendName:"webgl",kernelFunc:o};exports.asinhConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"zhx4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanConfig=exports.atan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils"),r=require("../unaryop_gpu");const t=r.CHECK_NAN_SNIPPET+"\n  return atan(x);\n",a=(0,n.unaryKernelFunc)({opSnippet:t});exports.atan=a;const o={kernelName:e.Atan,backendName:"webgl",kernelFunc:a};exports.atanConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"kDp7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2Config=exports.atan2=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=n.CHECK_NAN_SNIPPET_BINARY+"\n  return atan(a, b);\n",r="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+n.CHECK_NAN_SNIPPET_BINARY_PACKED+"\n  return result;\n",a=(0,n.binaryKernelFunc)({opSnippet:t,packedOpSnippet:r});exports.atan2=a;const s={kernelName:e.Atan2,backendName:"webgl",kernelFunc:a};exports.atan2Config=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"b0w5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhConfig=exports.atanh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const t=n.CHECK_NAN_SNIPPET+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",o=(0,r.unaryKernelFunc)({opSnippet:t});exports.atanh=o;const a={kernelName:e.Atanh,backendName:"webgl",kernelFunc:o};exports.atanhConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"DAMt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pool3DProgram=exports.Pool2DProgram=void 0;class n{constructor(n,e,t,i=!1,a=!1){if(this.variableNames=["x"],"avg"===e&&t)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,x=n.strideHeight,r=n.strideWidth,c=n.dilationHeight,l=n.dilationWidth,u=n.effectiveFilterHeight,s=n.effectiveFilterWidth,C=n.padInfo.top,d=n.padInfo.left;this.outputShape=n.outShape;const $="avg"===e,h=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,v=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`;let f="0.0";if($||(f="-1.0 / 1e-20"),t){const e=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${x}, ${r});\n        const ivec2 pads = ivec2(${C}, ${d});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${u};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${s};\n                wC += ${l}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${e} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${i?a?h:v:`wR * ${s} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let R=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(R="avgValue / count");const V=4*Math.floor(o/4),g=o%4,m=`\n      if (${$}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${x}, ${r});\n      const ivec2 pads = ivec2(${C}, ${d});\n      const float initializationValue = ${f};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${f});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${u};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${V}; wC += 4) {\n            int xC = xCCorner + wC * ${l};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              getValue(batch, xR, xC + 3 * ${l}, d)\n            );\n\n            ${m}\n          }\n\n          int xC = xCCorner + ${V};\n          if (${1===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${m}\n          } else if (${2===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${m}\n          } else if (${3===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              initializationValue\n            );\n\n            ${m}\n          }\n        }\n        setOutput(${R});\n      }\n    `}}exports.Pool2DProgram=n;class e{constructor(n,e,t,i=!1,a=!1){if(this.variableNames=["x"],"avg"===e&&t)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,x=n.strideDepth,r=n.strideHeight,c=n.strideWidth,l=n.dilationDepth,u=n.dilationHeight,s=n.dilationWidth,C=n.effectiveFilterDepth,d=n.effectiveFilterHeight,$=n.effectiveFilterWidth,h=n.padInfo.front,v=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;const R="avg"===e;let V="0.0";if(R||(V="-1.0 / 1e-20"),t){const e=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${x}, ${r}, ${c});\n        const ivec3 pads = ivec3(${h}, ${v}, ${f});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${C};\n              wD += ${l}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${d};\n                wR += ${u}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${$};\n                  wC += ${s}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${e} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${i?a?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${d} * ${$} +\n                      wR * ${$} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let g=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(g="avgValue / count");const m=4*Math.floor(o/4),w=o%4,p=`\n      if (${R}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${x}, ${r}, ${c});\n      const ivec3 pads = ivec3(${h}, ${v}, ${f});\n      const float initializationValue = ${V};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${V});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${C};\n            wD += ${l}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d};\n            wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${m}; wC += 4) {\n              int xC = xCCorner + wC * ${s};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${s}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${s}, ch)\n              );\n\n              ${p}\n            }\n\n            int xC = xCCorner + ${m};\n            if (${1===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${p}\n            } else if (${2===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${p}\n            } else if (${3===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${s}, ch),\n                initializationValue\n              );\n\n              ${p}\n            }\n          }\n          setOutput(${g});\n        }\n      }\n    `}}exports.Pool3DProgram=e;
},{}],"LyOc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=i,exports.avgPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../pool_gpu"),o=require("../webgl_util"),r=require("./Identity");function i(i){const{inputs:n,backend:s,attrs:a}=i,{x:l}=n;(0,o.assertNotComplex)(l,"avgPool");const{filterSize:u,strides:d,pad:c,dimRoundingMode:g}=a;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const p=e.backend_util.computePool2DInfo(l.shape,u,d,1,c,g);if(1===p.filterWidth&&1===p.filterHeight&&e.util.arraysEqual(p.inShape,p.outShape))return(0,r.identity)({inputs:{x:l},backend:s});const f=new t.Pool2DProgram(p,"avg",!1);return s.runWebGLProgram(f,[l],"float32")}const n={kernelName:e.AvgPool,backendName:"webgl",kernelFunc:i};exports.avgPoolConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../pool_gpu":"DAMt","../webgl_util":"p3g2","./Identity":"Gwwj"}],"ZH0i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3D=r,exports.avgPool3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../pool_gpu");function r(r){const{inputs:t,backend:n,attrs:a}=r,{x:l}=t,{filterSize:s,strides:i,pad:u,dimRoundingMode:d,dataFormat:g}=a,c=e.backend_util.computePool3DInfo(l.shape,s,i,[1,1,1],u,d,g),p=new o.Pool3DProgram(c,"avg",!1);return n.runWebGLProgram(p,[l],"float32")}const t={kernelName:e.AvgPool3D,backendName:"webgl",kernelFunc:r};exports.avgPool3DConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../pool_gpu":"DAMt"}],"vgTo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvgPool3DBackpropProgram=exports.AvgPool2DBackpropProgram=void 0;class t{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,o=t.filterWidth,i=t.strideHeight,d=t.strideWidth,e=t.dilationHeight,r=t.dilationWidth,a=t.effectiveFilterHeight,y=t.effectiveFilterWidth,l=a-1-t.padInfo.top,s=y-1-t.padInfo.left,c=1/(n*o);this.userCode=`\n      const ivec2 pads = ivec2(${l}, ${s});\n      const float avgMultiplier = float(${c});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${a};\n            wR += ${e}) {\n          float dyR = float(dyRCorner + wR) / ${i}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${y};\n            wC+= ${r}) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.AvgPool2DBackpropProgram=t;class n{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,o=t.filterHeight,i=t.filterWidth,d=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.dilationDepth,y=t.dilationHeight,l=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,C=s-1-t.padInfo.front,p=c-1-t.padInfo.top,h=f-1-t.padInfo.left,u=1/(n*o*i);this.userCode=`\n      const ivec3 pads = ivec3(${C}, ${p}, ${h});\n      const float avgMultiplier = float(${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n            wD += ${a}) {\n          float dyD = float(dyDCorner + wD) / ${d}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${y}) {\n            float dyR = float(dyRCorner + wR) / ${e}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${f};\n                wC += ${l}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.AvgPool3DBackpropProgram=n;
},{}],"XJOJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGrad=r,exports.avgPoolGrad3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../avg_pool_backprop_gpu");function r(r){const{inputs:t,backend:a,attrs:n}=r,{dy:d,input:p}=t,i=p,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=n,g=e.backend_util.computePool3DInfo(i.shape,s,l,[1,1,1],u,c),v=new o.AvgPool3DBackpropProgram(g);return a.runWebGLProgram(v,[d],i.dtype)}const t={kernelName:e.AvgPool3DGrad,backendName:"webgl",kernelFunc:r};exports.avgPoolGrad3DConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../avg_pool_backprop_gpu":"vgTo"}],"EkY0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGrad=t,exports.avgPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../avg_pool_backprop_gpu"),r=require("../webgl_util");function t(t){const{inputs:a,backend:n,attrs:l}=t,{dy:s,input:p}=a,i=p;(0,r.assertNotComplex)([s,p],"avgPoolGrad");const{filterSize:u,strides:d,pad:c}=l,g=e.backend_util.computePool2DInfo(i.shape,u,d,1,c),v=new o.AvgPool2DBackpropProgram(g);return n.runWebGLProgram(v,[s],i.dtype)}const a={kernelName:e.AvgPoolGrad,backendName:"webgl",kernelFunc:t};exports.avgPoolGradConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../avg_pool_backprop_gpu":"vgTo","../webgl_util":"p3g2"}],"trp3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMul=a,exports.batchMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./BatchMatMul_impl");function a(e){const{inputs:a,backend:r,attrs:s}=e,{a:n,b:o}=a,{transposeA:c,transposeB:u}=s;return(0,t.batchMatMulImpl)({a:n,b:o,transposeA:c,transposeB:u,backend:r})}const r={kernelName:e.BatchMatMul,backendName:"webgl",kernelFunc:a};exports.batchMatMulConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./BatchMatMul_impl":"mEDx"}],"IgN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BatchNormProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e,a,s,o,r,n){this.outputShape=[],this.variableNames=["x","mean","variance"],t.backend_util.assertAndGetBroadcastShape(e,a),t.backend_util.assertAndGetBroadcastShape(e,s);let l="0.0";null!=o&&(t.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let i="1.0";null!=r&&(t.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${l};\n        float scale = ${i};\n        float inv = scale * inversesqrt(variance + float(${n}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}exports.BatchNormProgram=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"DUWz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BatchNormPackedProgram=void 0;var e=require("@tensorflow/tfjs-core");class t{constructor(t,a,s,r,n,c){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],e.backend_util.assertAndGetBroadcastShape(t,a),e.backend_util.assertAndGetBroadcastShape(t,s);let o="vec4(0.0)";null!=r&&(e.backend_util.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let i="vec4(1.0)";null!=n&&(e.backend_util.assertAndGetBroadcastShape(t,n),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${i};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${c}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}exports.BatchNormPackedProgram=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"f4ut":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNormConfig=exports.batchNorm=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../batchnorm_gpu"),t=require("../batchnorm_packed_gpu");const r=({inputs:r,backend:n,attrs:s})=>{const{x:o,mean:l,variance:h,offset:u,scale:c}=r;e.util.assert(l.shape.length===h.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),e.util.assert(null==u||l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),e.util.assert(null==c||l.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:i}=s;null==i&&(i=.001);const p=[o,l,h];let m=null;null!=u&&(m=u.shape,p.push(u));let g=null;null!=c&&(g=c.shape,p.push(c));const d=(0,e.env)().getBool("WEBGL_PACK_NORMALIZATION")?new t.BatchNormPackedProgram(o.shape,l.shape,h.shape,m,g,i):new a.BatchNormProgram(o.shape,l.shape,h.shape,m,g,i);return n.runWebGLProgram(d,p,p[0].dtype)};exports.batchNorm=r;const n={kernelName:e.FusedBatchNorm,backendName:"webgl",kernelFunc:r};exports.batchNormConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../batchnorm_gpu":"IgN9","../batchnorm_packed_gpu":"DUWz"}],"SBwi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SliceProgram=void 0;var r=require("./shader_compiler");class t{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const s=(0,r.getCoordsDataType)(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=e(this.rank);let i;i=`\n        ${s} sourceLoc;\n        ${s} coords = getOutputCoords();\n        ${t.map((r,t)=>`sourceLoc.${o[t]} = start[${t}] + coords.${o[t]};`).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${i}\n        setOutput(getSource(${n}));\n      }\n    `}}exports.SliceProgram=t;const o=["x","y","z","w","u","v"];function e(r){if(1===r)return"sourceLoc";if(r<=6)return o.slice(0,r).map(r=>"sourceLoc."+r).join(",");throw Error(`Slicing for rank ${r} is not yet supported`)}
},{"./shader_compiler":"DIKY"}],"BaFQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SlicePackedProgram=void 0;var n=require("./packing_util"),t=require("./shader_compiler");class s{constructor(s){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.rank=s.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=(0,t.getCoordsDataType)(this.rank),e=(0,n.getChannels)("coords",this.rank),a=(0,n.getChannels)("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${i})`,c=`\n      result.x = ${o};\n      if (++${e[this.rank-1]} < ${s[this.rank-1]}) {\n        ++${a[this.rank-1]};\n        result.y = ${o};\n        --${a[this.rank-1]};\n      }\n    `,h=1===this.rank?"":`\n      --${e[this.rank-1]};\n      if (++${e[this.rank-2]} < ${s[this.rank-2]}) {\n        ++${a[this.rank-2]};\n        result.z = ${o};\n        if (++${e[this.rank-1]} < ${s[this.rank-1]}) {\n          ++${a[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,u=this.rank<=4?`sourceLoc = coords +\n            ${r}(${s.map((n,t)=>`start[${t}]`).join()});`:s.map((n,t)=>`${a[t]} = ${e[t]} + start[${t}];`).join("\n");this.userCode=`\n      void main() {\n        ${r} coords = getOutputCoords();\n        ${r} sourceLoc;\n        ${u}\n        vec4 result = vec4(0.);\n        ${c}\n        ${h}\n        setOutput(result);\n      }\n    `}}exports.SlicePackedProgram=s;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"uanA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=r,exports.sliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),a=require("../slice_gpu"),s=require("../slice_packed_gpu");function i(t,a,s,i){const r=i.texData.get(t.dataId),o=i.makeTensorInfo(s,t.dtype),l=i.texData.get(o.dataId);Object.assign(l,r),l.refCount=1,l.shape=s,l.dtype=t.dtype;let n=e.slice_util.computeFlatOffset(a,e.util.computeStrides(t.shape));r.slice&&(n+=r.slice.flatOffset),l.slice={flatOffset:n,origDataId:r.slice&&r.slice.origDataId||t.dataId};const c=i.dataRefCount.get(l.slice.origDataId)||1;return i.dataRefCount.set(l.slice.origDataId,c+1),o}function r(r){const{inputs:o,backend:l,attrs:n}=r,{x:c}=o,{begin:d,size:u}=n,[p,f]=e.slice_util.parseSliceParams(c,d,u);if(e.slice_util.assertParamsValid(c,p,f),0===e.util.sizeFromShape(f))return l.makeTensorInfo(f,c.dtype,[]);if(l.shouldExecuteOnCPU([c])||"string"===c.dtype){const e=l.texData.get(c.dataId),a=(0,t.sliceImplCPU)(e.values,p,f,c.shape,c.dtype);return l.makeTensorInfo(f,c.dtype,a)}const{isPacked:g}=l.texData.get(c.dataId),I=e.slice_util.isSliceContinous(c.shape,p,f);if(g||!I){const t=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s.SlicePackedProgram(f):new a.SliceProgram(f),i=[p];return l.runWebGLProgram(t,[c],c.dtype,i)}return l.uploadToGPU(c.dataId),i(c,p,f,l)}const o={kernelName:e.Slice,backendName:"webgl",kernelFunc:r};exports.sliceConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../slice_gpu":"SBwi","../slice_packed_gpu":"BaFQ"}],"CeXw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceNDConfig=exports.batchToSpaceND=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Reshape"),a=require("./Slice"),s=require("./Transpose");const n=n=>{const{inputs:r,backend:c,attrs:p}=n,{x:o}=r,{blockShape:i,crops:h}=p;e.util.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const u=i.reduce((e,t)=>e*t),d=e.backend_util.getReshaped(o.shape,i,u),l=e.backend_util.getPermuted(d.length,i.length),b=e.backend_util.getReshapedPermuted(o.shape,i,u),k=e.backend_util.getSliceBeginCoords(h,i.length),g=e.backend_util.getSliceSize(b,h,i.length),S=[],x=(0,t.reshape)({inputs:{x:o},backend:c,attrs:{shape:d}}),f=(0,s.transpose)({inputs:{x:x},backend:c,attrs:{perm:l}}),m=(0,t.reshape)({inputs:{x:f},backend:c,attrs:{shape:b}}),N=(0,a.slice)({inputs:{x:m},backend:c,attrs:{begin:k,size:g}});return S.push(x),S.push(f),S.push(m),S.forEach(e=>c.disposeIntermediateTensorInfo(e)),N};exports.batchToSpaceND=n;const r={kernelName:e.BatchToSpaceND,backendName:"webgl",kernelFunc:n};exports.batchToSpaceNDConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"k4TP","./Slice":"uanA","./Transpose":"hS8R"}],"gQI3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincount=t,exports.bincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:r,attrs:o}=e,{x:s,weights:i}=t,{size:a}=o,c=r.readSync(s.dataId),u=r.readSync(i.dataId),d=(0,n.bincountImplCPU)(c,u,i.dtype,i.shape,a);return r.makeTensorInfo([a],i.dtype,d)}const r={kernelName:e.Bincount,backendName:"webgl",kernelFunc:t};exports.bincountConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"xWOa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastArgs=e,exports.broadcastArgsConfig=void 0;var r=require("@tensorflow/tfjs-core");function e(e){const{inputs:a,backend:t}=e,{s0:s,s1:o}=a,n=t.readSync(s.dataId),d=t.readSync(o.dataId),c=r.backend_util.assertAndGetBroadcastShape(Array.from(n),Array.from(d));return t.makeTensorInfo([c.length],"int32",Int32Array.from(c))}const a={kernelName:r.BroadcastArgs,backendName:"webgl",kernelFunc:e};exports.broadcastArgsConfig=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"m7Px":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualConfig=exports.notEqual=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const n="return float(a != b);",o=(0,r.binaryKernelFunc)({opSnippet:n,cpuKernelImpl:t.notEqualImplCPU,dtype:"bool"});exports.notEqual=o;const l={kernelName:e.NotEqual,backendName:"webgl",kernelFunc:o};exports.notEqualConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"mH9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=r,exports.realConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function r(e){const{inputs:r,backend:n}=e,{input:o}=r,a=n.texData.get(o.dataId);return(0,t.identity)({inputs:{x:a.complexTensorInfos.real},backend:n})}const n={kernelName:e.Real,backendName:"webgl",kernelFunc:r};exports.realConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Identity":"Gwwj"}],"lwT4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.int=t;var e=require("../unaryop_gpu");const r="return float(int(x));";function t(t,a){const n=new e.UnaryOpProgram(t.shape,r),o=a.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}
},{"../unaryop_gpu":"uzBV"}],"JirG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=p,exports.castConfig=void 0;var e=s(require("@tensorflow/tfjs-core")),t=require("./Complex"),r=require("./Identity"),n=require("./NotEqual"),o=require("./Real"),i=require("../kernel_utils/int");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function p(a){const{inputs:s,backend:u,attrs:c}=a,{x:d}=s,{dtype:f}=c;if("complex64"===f){if("complex64"===d.dtype)return(0,r.identity)({inputs:{x:d},backend:u});const n=e.zeros(d.shape),o=p({inputs:{x:d},backend:u,attrs:{dtype:"float32"}}),i=(0,t.complex)({inputs:{real:o,imag:n},backend:u});return n.dispose(),u.disposeIntermediateTensorInfo(o),i}if("complex64"===d.dtype){const e=(0,o.real)({inputs:{input:d},backend:u}),t=p({inputs:{x:e},backend:u,attrs:{dtype:f}});return u.disposeIntermediateTensorInfo(e),t}if(!e.util.hasEncodingLoss(d.dtype,f)){const e=(0,r.identity)({inputs:{x:d},backend:u});return{dataId:e.dataId,shape:e.shape,dtype:f}}if("int32"===f)return(0,i.int)(d,u);if("bool"===f){const t=u.makeTensorInfo([],"bool",e.util.getTypedArrayFromDType("bool",1)),r={a:d,b:t},o=(0,n.notEqual)({inputs:r,backend:u});return u.disposeIntermediateTensorInfo(t),o}throw new Error(`Error in Cast: failed to cast ${d.dtype} to ${f}`)}const u={kernelName:e.Cast,backendName:"webgl",kernelFunc:p};exports.castConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"vWXR","./Identity":"Gwwj","./NotEqual":"m7Px","./Real":"mH9E","../kernel_utils/int":"lwT4"}],"E0aZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilConfig=exports.ceil=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),l=require("../kernel_utils/shared");const n="return ceil(x);",i=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:n,cpuKernelImpl:l.ceilImplCPU});exports.ceil=i;const t={kernelName:e.Ceil,backendName:"webgl",kernelFunc:i};exports.ceilConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"rjZd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClipProgram=void 0;class t{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}exports.ClipProgram=t;
},{}],"QdXF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClipPackedProgram=void 0;class e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}exports.ClipPackedProgram=e;
},{}],"IbyP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValue=p,exports.clipByValueConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../clip_gpu"),l=require("../clip_packed_gpu");function p(p){const{inputs:a,backend:i,attrs:n}=p,{x:o}=a,{clipValueMin:t,clipValueMax:c}=n;let u;u=(0,e.env)().getBool("WEBGL_PACK_CLIP")?new l.ClipPackedProgram(o.shape):new r.ClipProgram(o.shape);const s=[[t],[c]];return i.runWebGLProgram(u,[o],o.dtype,s)}const a={kernelName:e.ClipByValue,backendName:"webgl",kernelFunc:p};exports.clipByValueConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../clip_gpu":"rjZd","../clip_packed_gpu":"QdXF"}],"w3Ul":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComplexAbsProgram=void 0;class e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}exports.ComplexAbsProgram=e;
},{}],"Kuhq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexAbs=t,exports.complexAbsConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../complex_abs_gpu");function r(e,o){return{dataId:o.dataId,dtype:o.dtype,shape:e.shape}}function t(e){const{inputs:t,backend:s}=e,{x:n}=t,a=s.texData.get(n.dataId),p=new o.ComplexAbsProgram(n.shape),c=[r(n,a.complexTensorInfos.real),r(n,a.complexTensorInfos.imag)];return s.runWebGLProgram(p,c,c[0].dtype)}const s={kernelName:e.ComplexAbs,backendName:"webgl",kernelFunc:t};exports.complexAbsConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../complex_abs_gpu":"w3Ul"}],"loEe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConcatProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e){this.outputShape=[],this.outputShape=t.backend_util.computeOutShape(e,1),this.variableNames=e.map((t,e)=>`T${e}`);const o=new Array(e.length-1);o[0]=e[0][1];for(let t=1;t<o.length;t++)o[t]=o[t-1]+e[t][1];const s=[`if (yC < ${o[0]}) setOutput(getT0(yR, yC));`];for(let t=1;t<o.length;t++){const e=o[t-1];s.push(`else if (yC < ${o[t]}) `+`setOutput(getT${t}(yR, yC-${e}));`)}const n=o.length,r=o[o.length-1];s.push(`else setOutput(getT${n}(yR, yC-${r}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${s.join("\n        ")}\n      }\n    `}}exports.ConcatProgram=e;
},{"@tensorflow/tfjs-core":"tc6m"}],"nB6G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConcatPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./packing_util"),n=require("./shader_compiler");class r{constructor(r,s){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=e.backend_util.computeOutShape(r,s);const u=this.outputShape,a=u.length,$=(0,n.getCoordsDataType)(a),l=(0,t.getChannels)("coords",a),i=["x","y","z","w","u","v"].slice(0,a);this.variableNames=r.map((e,t)=>`T${t}`);const c=new Array(r.length-1);c[0]=r[0][s];for(let e=1;e<c.length;e++)c[e]=c[e-1]+r[e][s];const g=i[s],p=i.slice(-2),h=i.join();let d=`if (${g} < ${c[0]}) {\n        return getChannel(\n            getT0(${h}), vec2(${p.join()}));\n        }`;for(let e=1;e<c.length;e++){const t=c[e-1];d+=`\n        if (${g} < ${c[e]}  && ${g} >= ${c[e-1]}) {\n          return getChannel(\n            getT${e}(${o(i,g,t)}),\n            vec2(${o(p,g,t)}));\n        }`}const f=c.length,v=c[c.length-1];d+=`\n        return getChannel(\n          getT${f}(${o(i,g,v)}),\n          vec2(${o(p,g,v)}));`,this.userCode=`\n      float getValue(${i.map(e=>"int "+e)}) {\n        ${d}\n      }\n\n      void main() {\n        ${$} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${l}), 0., 0., 0.);\n\n        ${l[a-1]} = ${l[a-1]} + 1;\n        if (${l[a-1]} < ${u[a-1]}) {\n          result.g = getValue(${l});\n        }\n\n        ${l[a-2]} = ${l[a-2]} + 1;\n        if (${l[a-2]} < ${u[a-2]}) {\n          result.a = getValue(${l});\n        }\n\n        ${l[a-1]} = ${l[a-1]} - 1;\n        if (${l[a-2]} < ${u[a-2]} &&\n            ${l[a-1]} < ${u[a-1]}) {\n          result.b = getValue(${l});\n        }\n        setOutput(result);\n      }\n    `}}function o(e,t,n){const r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}exports.ConcatPackedProgram=r;
},{"@tensorflow/tfjs-core":"tc6m","./packing_util":"Axn8","./shader_compiler":"DIKY"}],"U9t0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=n,exports.imagConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function n(e){const{inputs:n,backend:r}=e,{input:i}=n,o=r.texData.get(i.dataId);return(0,t.identity)({inputs:{x:o.complexTensorInfos.imag},backend:r})}const r={kernelName:e.Imag,backendName:"webgl",kernelFunc:n};exports.imagConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Identity":"Gwwj"}],"ec9V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatImpl=i;var e=require("@tensorflow/tfjs-core"),t=require("../concat_gpu"),n=require("../concat_packed_gpu"),r=require("../kernel_utils/shared"),a=require("./Complex"),s=require("./Imag"),o=require("./Real"),p=require("./Reshape");function i(u,m,d){const h=u[0].dtype;if("complex64"===h){const e=u.map(e=>(0,o.real)({inputs:{input:e},backend:d})),t=u.map(e=>(0,s.imag)({inputs:{input:e},backend:d})),n=i(e,m,d),r=i(t,m,d),p=(0,a.complex)({inputs:{real:n,imag:r},backend:d});return e.forEach(e=>d.disposeIntermediateTensorInfo(e)),t.forEach(e=>d.disposeIntermediateTensorInfo(e)),d.disposeIntermediateTensorInfo(n),d.disposeIntermediateTensorInfo(r),p}let l=d.shouldExecuteOnCPU(u);if("string"===h&&(l=!0),l){const t=u.map(t=>{const n=[-1,e.util.sizeFromShape(t.shape.slice(m))];return(0,p.reshape)({inputs:{x:t},backend:d,attrs:{shape:n}})}),n=t.map(e=>({vals:d.readSync(e.dataId),shape:e.shape})),a=e.backend_util.computeOutShape(t.map(e=>e.shape),1),s=1===t[0].shape[0],o=(0,r.concatImplCPU)(n,a,h,s),i=e.backend_util.computeOutShape(u.map(e=>e.shape),m),c=d.makeTensorInfo(i,h,o);return t.forEach(e=>d.disposeIntermediateTensorInfo(e)),c}if(u.length>(0,e.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(u.length/2),t=i(u.slice(0,e),m,d),n=i(u.slice(e),m,d),r=i([t,n],m,d);return d.disposeIntermediateTensorInfo(t),d.disposeIntermediateTensorInfo(n),r}if((0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&u[0].shape.length>1){const e=new n.ConcatPackedProgram(u.map(e=>e.shape),m);return d.runWebGLProgram(e,u,h)}const{tensors2D:I,outShape:f}=c(u,m,d),_=new t.ConcatProgram(I.map(e=>e.shape)),g=d.runWebGLProgram(_,I,h);I.forEach(e=>d.disposeIntermediateTensorInfo(e));const b=(0,p.reshape)({inputs:{x:g},attrs:{shape:f},backend:d});return d.disposeIntermediateTensorInfo(g),b}function c(t,n,r){const a=e.backend_util.computeOutShape(t.map(e=>e.shape),n);return{tensors2D:t.map(t=>(0,p.reshape)({inputs:{x:t},attrs:{shape:[-1,e.util.sizeFromShape(t.shape.slice(n))]},backend:r})),outShape:a}}
},{"@tensorflow/tfjs-core":"tc6m","../concat_gpu":"loEe","../concat_packed_gpu":"nB6G","../kernel_utils/shared":"tfp0","./Complex":"vWXR","./Imag":"U9t0","./Real":"mH9E","./Reshape":"k4TP"}],"SH0J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=a,exports.concatConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat_impl"),n=require("./Identity");function a(a){const{inputs:r,backend:s,attrs:o}=a,{axis:i}=o,c=e.util.parseAxisParam(i,r[0].shape)[0],p=e.backend_util.computeOutShape(r.map(e=>e.shape),c);if(0===e.util.sizeFromShape(p))return s.makeTensorInfo(p,r[0].dtype,[]);const u=r.filter(t=>e.util.sizeFromShape(t.shape)>0);if(1===u.length)return(0,n.identity)({inputs:{x:u[0]},backend:s});const l=u.map(e=>e.shape);return e.backend_util.assertParamsConsistent(l,c),(0,t.concatImpl)(u,c,s)}const r={kernelName:e.Concat,backendName:"webgl",kernelFunc:a};exports.concatConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Concat_impl":"ec9V","./Identity":"Gwwj"}],"LHRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Conv3DProgram=exports.Conv2DProgram=void 0;class n{constructor(n,t=!1,e=null,o=!1,a=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;const d=n.padInfo.top,i=n.padInfo.left,s=n.strideHeight,x=n.strideWidth,r=n.dilationHeight,c=n.dilationWidth,C=n.filterHeight,l=n.filterWidth,w=4*Math.floor(n.inChannels/4),h=n.inChannels%4,u="channelsLast"===n.dataFormat,R=u?1:2,$=u?2:3,g=u?3:1;let v="",f="";e&&(v=o?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${e}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${e}\n        }`:`\n          float activation(float x) {\n            ${e}\n          }\n        `,f="result = activation(result);");const b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${s}, ${x});\n      const ivec2 pads = ivec2(${d}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${g}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${R}], coords[${$}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${C}; wR++) {\n          int xR = xRCorner + wR * ${r};\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${l}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${n.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${w}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${u}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===h}) {\n\n              if (${u}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${w}) *\n                    getW(wR, wC, ${w}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${w}, xR, xC) *\n                    getW(wR, wC, ${w}, d2);\n              }\n\n            } else if (${2===h}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${w}, d2),\n                getW(wR, wC, ${w} + 1, d2)\n              );\n\n              if (${u}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${w}),\n                  getX(batch, xR, xC, ${w} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${w}, xR, xC),\n                  getX(batch, ${w} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===h}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${w}, d2),\n                getW(wR, wC, ${w} + 1, d2),\n                getW(wR, wC, ${w} + 2, d2)\n              );\n\n              if (${u}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${w}),\n                  getX(batch, xR, xC, ${w} + 1),\n                  getX(batch, xR, xC, ${w} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${w}, xR, xC),\n                  getX(batch, ${w} + 1, xR, xC),\n                  getX(batch, ${w} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${b}\n        ${f}\n        setOutput(result);\n      }\n    `}}exports.Conv2DProgram=n;class t{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const t=n.padInfo.front,e=n.padInfo.top,o=n.padInfo.left,a=n.strideDepth,d=n.strideHeight,i=n.strideWidth,s=n.dilationDepth,x=n.dilationHeight,r=n.dilationWidth,c=n.filterDepth,C=n.filterHeight,l=n.filterWidth,w=4*Math.floor(n.inChannels/4),h=n.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${a}, ${d}, ${i});\n      const ivec3 pads = ivec3(${t}, ${e}, ${o});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${C}; wR++) {\n            int xR = xRCorner + wR * ${x};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${l}; wC++) {\n              int xC = xCCorner + wC * ${r};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${w}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===h}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${w}) *\n                  getW(wF, wR, wC, ${w}, d2);\n              } else if (${2===h}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${w}),\n                  getX(batch, xF, xR, xC, ${w} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${w}, d2),\n                  getW(wF, wR, wC, ${w} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===h}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${w}),\n                  getX(batch, xF, xR, xC, ${w} + 1),\n                  getX(batch, xF, xR, xC, ${w} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${w}, d2),\n                  getW(wF, wR, wC, ${w} + 1, d2),\n                  getW(wF, wR, wC, ${w} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DProgram=t;
},{}],"j6dQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Im2ColPackedProgram=void 0;var e=require("./glsl_version"),n=require("./gpgpu_math");class t{constructor(t,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=(0,n.useShapeUniforms)(this.outputShape.length);const{dataFormat:s}=i,o=(0,e.getGlslDifferences)(),a="channelsLast"===s,r=a?0:1,d=a?1:2,p=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${t[1]} && pos < ${t[0]}) {`;let c="";for(let e=0;e<=1;e++)for(let n=0;n<=1;n++)c+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${e};\n\n          ${p}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${r}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${d}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${a}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${c}\n\n        ${o.output} = result;\n      }\n    `}}exports.Im2ColPackedProgram=t;
},{"./glsl_version":"QbWp","./gpgpu_math":"hS5V"}],"Ld10":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2dByMatMul=o,exports.conv2dWithIm2Row=h;var e=require("@tensorflow/tfjs-core"),t=require("../im2col_packed_gpu"),a=require("../kernel_utils/kernel_funcs_utils"),n=require("../mulmat_packed_gpu"),s=u(require("../webgl_util")),r=require("./BatchMatMul_impl"),i=require("./Identity"),l=require("./Reshape");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=s?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}function o({x:t,filter:a,convInfo:n,backend:p,bias:u=null,preluActivationWeights:o=null,leakyreluAlpha:h=0,activation:c=null}){const d=t.shape,f=p.texData.get(t.dataId),b=n.inChannels,k=d[0]*d[1]*d[2],g=n.outChannels,y="channelsLast"===n.dataFormat;let m;const v=[];if(!((1===k||1===g)&&b>r.MATMUL_SHARED_DIM_THRESHOLD)&&f.isPacked&&y&&null!=f.texture&&d[2]%2!=0&&e.util.arraysEqual(f.shape.slice(-3),d.slice(-3))){const b=d[0]*d[1]*(d[2]+1),k={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},g=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,e.util.assert(s.isReshapeFree(f.shape,k.shape),()=>`packed reshape ${f.shape} to ${k.shape} isn't free`);const y=(0,l.reshape)({inputs:{x:a},backend:p,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(y);const M=(0,r.batchMatMulImpl)({a:k,b:y,backend:p,transposeA:!1,transposeB:!1,bias:u,activation:c,preluActivationWeights:o,leakyreluAlpha:h}),I=p.texData.get(M.dataId);e.util.assert(I.isPacked,()=>"batchMatMul result is expected to be packed"),f.shape=g,I.shape=n.outShape,(m=(0,i.identity)({inputs:{x:M},backend:p})).shape=n.outShape,v.push(M)}else{const e=y?d[0]*d[1]*d[2]:d[0]*d[2]*d[3],s=(0,l.reshape)({inputs:{x:t},backend:p,attrs:{shape:[1,e,n.inChannels]}}),i=(0,l.reshape)({inputs:{x:a},backend:p,attrs:{shape:[1,n.inChannels,n.outChannels]}}),f=(0,r.batchMatMulImpl)({a:s,b:i,transposeA:!1,transposeB:!1,backend:p,bias:u,activation:c,preluActivationWeights:o,leakyreluAlpha:h});m=(0,l.reshape)({inputs:{x:f},backend:p,attrs:{shape:n.outShape}}),v.push(s),v.push(i),v.push(f)}for(const e of v)p.disposeIntermediateTensorInfo(e);return m}function h({x:s,filter:r,convInfo:i,backend:p,bias:u=null,preluActivationWeights:o=null,leakyreluAlpha:h=0,activation:c=null}){const{filterWidth:d,filterHeight:f,inChannels:b,outWidth:k,outHeight:g,dataFormat:y}=i,m="channelsLast"===y,v=d*f*b,M=g*k,I=[v,M],x=[],W=(0,l.reshape)({inputs:{x:s},backend:p,attrs:{shape:s.shape.slice(1)}}),_=(0,l.reshape)({inputs:{x:r},backend:p,attrs:{shape:[1,v,e.util.sizeFromShape(r.shape)/v]}});x.push(W),x.push(_);const C=new t.Im2ColPackedProgram(I,i),P=[W.shape,[i.padInfo.top,i.padInfo.left],[i.strideHeight,i.strideWidth],[i.dilationHeight,i.dilationWidth],[i.inChannels],[i.filterWidth*i.inChannels],[i.outWidth]],A=p.runWebGLProgram(C,[W],"float32",P),w=(0,l.reshape)({inputs:{x:A},backend:p,attrs:{shape:[1,I[0],I[1]]}});x.push(A),x.push(w);const O=null!=u,q=null!=o,j="leakyrelu"===c,S=c?(0,a.mapActivationToShaderProgram)(c,!0):null,D=new n.MatMulPackedProgram(w.shape,_.shape,[1,M,i.outChannels],!0,!1,O,S,q,j),H=[w,_];if(u&&H.push(u),q&&H.push(o),j){const t=p.makeTensorInfo([],"float32",e.util.createScalarValue(h,"float32"));H.push(t),x.push(t)}const L=p.runWebGLProgram(D,H,"float32"),T=m?[1,g,k,i.outChannels]:[1,i.outChannels,g,k],R=(0,l.reshape)({inputs:{x:L},backend:p,attrs:{shape:T}});x.push(L);for(const e of x)p.disposeIntermediateTensorInfo(e);return R}
},{"@tensorflow/tfjs-core":"tc6m","../im2col_packed_gpu":"j6dQ","../kernel_utils/kernel_funcs_utils":"uLeB","../mulmat_packed_gpu":"UauI","../webgl_util":"p3g2","./BatchMatMul_impl":"mEDx","./Identity":"Gwwj","./Reshape":"k4TP"}],"lE4o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DConfig=void 0,exports.conv2d=r;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu"),o=require("./Conv2D_impl"),n=require("./Reshape");function r(r){const{inputs:i,backend:a,attrs:s}=r,{x:d,filter:c}=i,{strides:l,pad:p,dataFormat:f,dilations:u,dimRoundingMode:v}=s,h=e.backend_util.convertConv2DDataFormat(f),g=e.backend_util.computeConv2DInfo(d.shape,c.shape,l,u,p,v,!1,h);let m;if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if((0,e.env)().getBool("WEBGL_CONV_IM2COL")&&1===d.shape[0])m=(0,o.conv2dWithIm2Row)({x:d,filter:c,convInfo:g,backend:a});else{const e=new t.Conv2DProgram(g);m=a.runWebGLProgram(e,[d,c],"float32")}else m=(0,o.conv2dByMatMul)({x:d,filter:c,convInfo:g,backend:a});const b=(0,n.reshape)({inputs:{x:m},backend:a,attrs:{shape:g.outShape}});return a.disposeIntermediateTensorInfo(m),b}const i={kernelName:e.Conv2D,backendName:"webgl",kernelFunc:r};exports.conv2DConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu":"LHRJ","./Conv2D_impl":"Ld10","./Reshape":"k4TP"}],"y8Ea":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Conv3DDerInputProgram=exports.Conv3DDerFilterProgram=exports.Conv2DDerInputProgram=exports.Conv2DDerFilterProgram=void 0;class n{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideHeight,o=n.strideWidth,e=n.padInfo.top,d=n.padInfo.left,i="channelsLast"===n.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${e};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${o} - ${d};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              if (${i}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DDerFilterProgram=n;class t{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterHeight,o=n.filterWidth,e=n.strideHeight,d=n.strideWidth,i="channelsLast"===n.dataFormat,r=t-1-n.padInfo.top,a=o-1-n.padInfo.left,s=i?1:2,y=i?2:3,C=i?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${C}];\n\n        ivec2 dyCorner = ivec2(coords[${s}], coords[${y}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${o} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n\n              if (${i}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DDerInputProgram=t;class o{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideDepth,o=n.strideHeight,e=n.strideWidth,d=n.padInfo.front,i=n.padInfo.top,r=n.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yF = 0; yF < ${n.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${d};\n\n            if (xF < 0 || xF >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${n.outHeight}; yR++) {\n              int xR = wR + yR * ${o} - ${i};\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${n.outWidth}; yC++) {\n                int xC = wC + yC * ${e} - ${r};\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DDerFilterProgram=o;class e{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterDepth,o=n.filterHeight,e=n.filterWidth,d=n.strideDepth,i=n.strideHeight,r=n.strideWidth,a=t-1-n.padInfo.front,s=o-1-n.padInfo.top,y=e-1-n.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${a}, ${s}, ${y});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${d}.0;\n\n          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${o}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${i}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${o} - 1 - wR;\n\n            for (int wC = 0; wC < ${e}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${e} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DDerInputProgram=e;
},{}],"r9Be":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=o,exports.conv2DBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../conv_backprop_gpu");function o(o){const{inputs:t,backend:n,attrs:a}=o,{x:c,dy:p}=t,{strides:i,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:d}=a,v=e.backend_util.convertConv2DDataFormat(l),k=e.backend_util.computeConv2DInfo(c.shape,d,i,1,s,u,!1,v),f=new r.Conv2DDerFilterProgram(k);return n.runWebGLProgram(f,[c,p],"float32")}const t={kernelName:e.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:o};exports.conv2DBackpropFilterConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu":"y8Ea"}],"cVvr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=n,exports.conv2DBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../conv_backprop_gpu");function n(n){const{inputs:r,backend:t,attrs:p}=n,{dy:a,filter:c}=r,{inputShape:u,strides:i,pad:s,dataFormat:d,dimRoundingMode:v}=p,k=e.backend_util.convertConv2DDataFormat(d),l=e.backend_util.computeConv2DInfo(u,c.shape,i,1,s,v,!1,k),f=new o.Conv2DDerInputProgram(l);return t.runWebGLProgram(f,[a,c],"float32")}const r={kernelName:e.Conv2DBackpropInput,backendName:"webgl",kernelFunc:n};exports.conv2DBackpropInputConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu":"y8Ea"}],"AezV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3D=n,exports.conv3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../conv_gpu");function n(n){const{inputs:r,backend:t,attrs:s}=n,{x:a,filter:c}=r,{strides:i,pad:u,dilations:p}=s,l=e.backend_util.computeConv3DInfo(a.shape,c.shape,i,p,u),v=new o.Conv3DProgram(l);return t.runWebGLProgram(v,[a,c],"float32")}const r={kernelName:e.Conv3D,backendName:"webgl",kernelFunc:n};exports.conv3DConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu":"LHRJ"}],"lhL0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilterV2=o,exports.conv3DBackpropFilterV2Config=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../conv_backprop_gpu");function o(o){const{inputs:t,backend:n,attrs:p}=o,{x:c,dy:a}=t,{strides:i,pad:s,filterShape:l}=p,u=e.backend_util.computeConv3DInfo(c.shape,l,i,1,s),k=new r.Conv3DDerFilterProgram(u);return n.runWebGLProgram(k,[c,a],"float32")}const t={kernelName:e.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:o};exports.conv3DBackpropFilterV2Config=t;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu":"y8Ea"}],"BTZj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInput=o,exports.conv3DBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../conv_backprop_gpu");function o(o){const{inputs:r,backend:t,attrs:p}=o,{dy:c,filter:a}=r,{pad:u,strides:s,inputShape:i}=p,k=e.backend_util.computeConv3DInfo(i,a.shape,s,1,u),v=new n.Conv3DDerInputProgram(k);return t.runWebGLProgram(v,[c,a],"float32")}const r={kernelName:e.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:o};exports.conv3DBackpropInputConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu":"y8Ea"}],"nlDp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosConfig=exports.cos=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o=r.CHECK_NAN_SNIPPET_UNARY+"\n  return cos(x);\n",s=(0,r.unaryKernelFunc)({opSnippet:o});exports.cos=s;const n={kernelName:e.Cos,backendName:"webgl",kernelFunc:s};exports.cosConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"Bb26":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshConfig=exports.cosh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",n=(0,r.unaryKernelFunc)({opSnippet:o});exports.cosh=n;const s={kernelName:e.Cosh,backendName:"webgl",kernelFunc:n};exports.coshConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"nc6W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CropAndResizeProgram=void 0;class e{constructor(e,t,o,n,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,s,c]=e,[l]=t,[u,f]=o;this.outputShape=[l,u,f,c];const d="bilinear"===n?1:0,[x,C]=[`${i-1}.0`,`${s-1}.0`],[g,R,b]=u>1?[`${(i-1)/(u-1)}`,"(y2-y1) * height_ratio",`y1*${x} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${x}`],[h,p,m]=f>1?[`${(s-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${C} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${C}`];this.userCode=`\n      const float height_ratio = float(${g});\n      const float width_ratio = float(${h});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${R};\n        float width_scale = ${p};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${x} ) {\n          setOutput(float(${r}));\n          return;\n        }\n        float in_x = ${m};\n        if( in_x < 0.0 || in_x > ${C} ) {\n          setOutput(float(${r}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}exports.CropAndResizeProgram=e;
},{}],"ECMk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResizeConfig=exports.cropAndResize=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../crop_and_resize_gpu");const o=e=>{const{inputs:o,backend:n,attrs:s}=e,{image:t,boxes:p,boxInd:i}=o,{cropSize:a,method:c,extrapolationValue:d}=s,u=new r.CropAndResizeProgram(t.shape,p.shape,a,c,d);return n.runWebGLProgram(u,[t,p,i],"float32")};exports.cropAndResize=o;const n={kernelName:e.CropAndResize,backendName:"webgl",kernelFunc:o};exports.cropAndResizeConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../crop_and_resize_gpu":"nc6W"}],"h31s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CumSumProgram=void 0;var r=require("./shader_compiler");class t{constructor(t,o,i){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;const u=t.length,s=o?"0.0":`getX(${e(u,"coords")})`,d=t[t.length-1];let $="",a="";o?($=i?`end != ${d-1}`:"end != 0",a=i?"end + 1":"end - 1"):($=i?`end + pow2 < ${d}`:"end >= pow2",a=i?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${(0,r.getCoordsDataType)(u)} coords = getOutputCoords();\n        int end = ${n(u,"coords")};\n        float val = ${s};\n        int pow2 = int(pow(2.0, index));\n        if (${$}) {\n          int idx = ${a};\n          ${n(u,"coords")} = idx;\n          val += getX(${e(u,"coords")});\n        }\n        setOutput(val);\n      }\n    `}}function e(r,t){if(1===r)return`${t}`;if(2===r)return`${t}.x, ${t}.y`;if(3===r)return`${t}.x, ${t}.y, ${t}.z`;if(4===r)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${r} is not yet supported`)}function n(r,t){if(1===r)return`${t}`;if(2===r)return`${t}.y`;if(3===r)return`${t}.z`;if(4===r)return`${t}.w`;throw Error(`Cumulative sum for rank ${r} is not yet supported`)}exports.CumSumProgram=t;
},{"./shader_compiler":"DIKY"}],"elV2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=r,exports.cumsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cumsum_gpu"),n=require("./Identity"),s=require("./Transpose");function r(r){const{inputs:o,backend:u,attrs:a}=r,{x:i}=o,{axis:m,exclusive:c,reverse:p}=a,d=i.shape.length,l=e.backend_util.getAxesPermutation([m],d);let x=i;null!=l&&(x=(0,s.transpose)({inputs:{x:i},backend:u,attrs:{perm:l}}));const g=e.backend_util.getInnerMostAxes(1,d)[0];if(g!==d-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${i.shape.length-1} `+`but got axis=${m}`);const b=x.shape[g];let f=(0,n.identity)({inputs:{x:x},backend:u});for(let e=0;e<=Math.ceil(Math.log2(b))-1;e++){const n=new t.CumSumProgram(x.shape,!1,p),s=[[e]],r=f;f=u.runWebGLProgram(n,[f],f.dtype,s),u.disposeIntermediateTensorInfo(r)}if(c){const e=new t.CumSumProgram(x.shape,c,p),n=f;f=u.runWebGLProgram(e,[f],f.dtype),u.disposeIntermediateTensorInfo(n)}if(null!=l){const t=e.backend_util.getUndoAxesPermutation(l),n=(0,s.transpose)({inputs:{x:f},backend:u,attrs:{perm:t}});return u.disposeIntermediateTensorInfo(f),u.disposeIntermediateTensorInfo(x),n}return f}const o={kernelName:e.Cumsum,backendName:"webgl",kernelFunc:r};exports.cumsumConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../cumsum_gpu":"h31s","./Identity":"Gwwj","./Transpose":"hS8R"}],"MOld":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBincount=t,exports.denseBincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,weights:u}=t,{size:a,binaryOutput:i}=s;if(1===o.shape.length){const e=r.readSync(o.dataId),t=r.readSync(u.dataId),s=(0,n.bincountImplCPU)(e,t,u.dtype,u.shape,a);return r.makeTensorInfo([a],u.dtype,s)}if(2===o.shape.length){const e=r.bufferSync(o),t=r.bufferSync(u),s=(0,n.bincountReduceImplCPU)(e,t,a,i);return r.makeTensorInfo(s.shape,u.dtype,s.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+`${o.shape.length}.`)}const r={kernelName:e.DenseBincount,backendName:"webgl",kernelFunc:t};exports.denseBincountConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"KXiR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthToSpaceProgram=void 0;class t{constructor(t,o,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=o,this.dataFormat=i,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${o};\n      int offset_h = imod(h, ${o});\n      int in_w = w / ${o};\n      int offset_w = imod(w, ${o});\n      int offset_d = (offset_h * ${o} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}exports.DepthToSpaceProgram=t;
},{}],"WKMn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=t,exports.depthToSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core"),p=require("../depth_to_space_gpu");function t(e){const{inputs:t,backend:a,attrs:o}=e,{x:r}=t,{blockSize:s,dataFormat:n}=o,c=r.shape[0],h=("NHWC"===n?r.shape[1]:r.shape[2])*s,d=("NHWC"===n?r.shape[2]:r.shape[3])*s,u=("NHWC"===n?r.shape[3]:r.shape[1])/(s*s),i="NHWC"===n?[c,h,d,u]:[c,u,h,d],l=new p.DepthToSpaceProgram(i,s,n);return a.runWebGLProgram(l,[r],r.dtype)}const a={kernelName:e.DepthToSpace,backendName:"webgl",kernelFunc:t};exports.depthToSpaceConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../depth_to_space_gpu":"KXiR"}],"tZKH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConv2DProgram=void 0;var t=require("./gpgpu_math");class n{constructor(n,e=!1,o=null,i=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length);const s=n.filterHeight,r=n.filterWidth,l=n.outChannels/n.inChannels;let d="",u="";o&&(d=i?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${o}\n        }`:`\n          float activation(float x) {\n            ${o}\n          }\n        `,u="result = activation(result);");const h=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${d}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${l};\n        int q = d2 - d1 * ${l};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${s}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${r}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${h}\n        ${u}\n        setOutput(result);\n      }\n    `}}exports.DepthwiseConv2DProgram=n;
},{"./gpgpu_math":"hS5V"}],"najp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConvPacked2DProgram=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./gpgpu_math");class x{constructor(x,t=!1,i=null,s=!1,C=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=x.outShape,this.enableShapeUniforms=(0,n.useShapeUniforms)(this.outputShape.length);const l=x.outChannels/x.inChannels,a=x.padInfo.left,f=x.strideWidth,r=x.dilationWidth,c=x.filterHeight,d=x.filterWidth,o=d;let $="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<d;e++)$+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;$+=`\n    for (int r = 0; r < ${c}; r++) {\n      `;for(let e=0;e<d;e++)$+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;$+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let n=0;n<(o+1)/2;n++){const x=2*n;if($+=`\n          xC = xCCorner + ${x*r};\n          `,1===f){if(x<d&&(a%2==1?($+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {\n                  xTexelC${x} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${x}.zw = vec2(0.0);\n                  }\n                  xTexelC${x}Ready = 1;\n                }\n              `,$+=1===r&&x>0?`\n                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);\n                  } else {\n                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);\n                  }\n                  `):$+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {\n                  xTexelC${x} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${x}.zw = vec2(0.0);\n                  }\n                  xTexelC${x}Ready = 1;\n                }\n\n                xC${x} = xTexelC${x};\n                `,x+1<d)){const n=a%2==0?e.util.nearestLargerEven(r):r;r%2==0&&a%2==1||r%2!=0&&a%2!=1?($+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${n};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {\n                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${x+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${x+1}Ready = 1;\n                  }\n                  `,r>1&&($+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {\n                      xTexelC${x} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${x}Ready = 1;\n                    }\n                    `),$+=`\n                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);\n                  `):$+=1===n?`\n                    xC${x+1} = xTexelC${x};\n                    `:`\n                    xCOffset = xC + ${n};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {\n                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${x+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${x+1}Ready = 1;\n                    }\n\n                    xC${x+1} = xTexelC${x+1};\n                    `}}else x<d&&(a%2==1?($+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {\n                  xTexelC${x} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${x}.zw = vec2(0.0);\n                  }\n                  xTexelC${x}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {\n                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${x+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${x+1}Ready = 1;\n                }\n\n                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);\n              `,x+1<d&&($+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);\n                `)):($+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {\n                  xTexelC${x} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${x}.zw = vec2(0.0);\n                  }\n                  xTexelC${x}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {\n                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${x+1}.zw = vec2(0.);\n                  }\n                  xTexelC${x+1}Ready = 1;\n                }\n\n                xC${x} = vec4(\n                  xTexelC${x}.xy, xTexelC${x+1}.xy);\n              `,x+1<d&&($+=`\n                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);\n                `)));x<d&&($+=`\n            wTexel = getW(r, ${x}, d1, q);\n            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);\n          `,x+1<d&&($+=`\n              wTexel = getW(r, ${x+1}, d1, q);\n              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}$+="\n    }\n  ",$+="\n      }\n    ";let v="",u="";i&&(v=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:C?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,u="result = activation(result);");const T=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${l};\n        int q = d2 - d1 * ${l};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${$}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${T}\n        ${u}\n        setOutput(result);\n      }\n    `}}exports.DepthwiseConvPacked2DProgram=x;
},{"@tensorflow/tfjs-core":"tc6m","./gpgpu_math":"hS5V"}],"UmRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNative=n,exports.depthwiseConv2dNativeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu_depthwise"),i=require("../conv_packed_gpu_depthwise");function n(n){const{inputs:o,backend:r,attrs:s}=n,{x:d,filter:a}=o,{strides:l,pad:p,dilations:h,dimRoundingMode:u}=s;let c=h;null==c&&(c=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(l,c),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${l} and dilations '${c}'`);const v=e.backend_util.computeConv2DInfo(d.shape,a.shape,l,c,p,u,!0);let C;C=(0,e.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1?new i.DepthwiseConvPacked2DProgram(v):new t.DepthwiseConv2DProgram(v);const g=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]];return r.runWebGLProgram(C,[d,a],"float32",g)}const o={kernelName:e.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:n};exports.depthwiseConv2dNativeConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu_depthwise":"tZKH","../conv_packed_gpu_depthwise":"najp"}],"QU4a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConv2DDerInputProgram=exports.DepthwiseConv2DDerFilterProgram=void 0;class n{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideHeight,o=n.strideWidth,e=n.padInfo.top,d=n.padInfo.left,i=n.outChannels/n.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${i} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${e};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${o} - ${d};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.DepthwiseConv2DDerFilterProgram=n;class t{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterHeight,o=n.filterWidth,e=n.strideHeight,d=n.strideWidth,i=t-1-n.padInfo.top,r=o-1-n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${r});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${o} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.DepthwiseConv2DDerInputProgram=t;
},{}],"pKxb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=r,exports.depthwiseConv2dNativeBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_backprop_gpu_depthwise");function r(r){const{inputs:o,backend:i,attrs:n}=r,{x:p,dy:a}=o,{strides:s,dilations:d,pad:c,dimRoundingMode:l,filterShape:u}=n,v=e.backend_util.computeConv2DInfo(p.shape,u,s,d,c,l,!0),k=new t.DepthwiseConv2DDerFilterProgram(v);return i.runWebGLProgram(k,[p,a],"float32")}const o={kernelName:e.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:r};exports.depthwiseConv2dNativeBackpropFilterConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu_depthwise":"QU4a"}],"RVP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=n,exports.depthwiseConv2dNativeBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_backprop_gpu_depthwise");function n(n){const{inputs:o,backend:p,attrs:r}=n,{dy:i,filter:a}=o,{strides:s,dilations:d,pad:u,dimRoundingMode:c,inputShape:v}=r,k=e.backend_util.computeConv2DInfo(v,a.shape,s,d,u,c,!0),l=new t.DepthwiseConv2DDerInputProgram(k);return p.runWebGLProgram(l,[i,a],"float32")}const o={kernelName:e.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:n};exports.depthwiseConv2dNativeBackpropInputConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../conv_backprop_gpu_depthwise":"QU4a"}],"V8Cn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DiagProgram=void 0;class o{constructor(o){this.variableNames=["X"],this.outputShape=[o,o],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}exports.DiagProgram=o;
},{}],"nCDM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=a,exports.diagConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../diag_gpu"),s=require("./Reshape");function a(a){const{inputs:n,backend:t}=a,{x:i}=n,o=[...i.shape,...i.shape],p=e.util.sizeFromShape(i.shape),d=(0,s.reshape)({inputs:{x:i},backend:t,attrs:{shape:[p]}}),u=new r.DiagProgram(p),g=t.runWebGLProgram(u,[d],d.dtype),c=(0,s.reshape)({inputs:{x:g},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(g),c}const n={kernelName:e.Diag,backendName:"webgl",kernelFunc:a};exports.diagConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../diag_gpu":"V8Cn","./Reshape":"k4TP"}],"zpON":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dilation2DProgram=void 0;class n{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const{inHeight:t,inWidth:i,padInfo:e,strideHeight:o,strideWidth:r,filterHeight:a,filterWidth:s,dilationHeight:l,dilationWidth:d}=n,{top:h,left:c}=e;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${r});\n      const ivec2 pads = ivec2(${h}, ${c});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${d};\n\n              if (wIn >= 0 && wIn < ${i}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}exports.Dilation2DProgram=n;
},{}],"exAg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2D=o,exports.dilation2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../dilation_gpu"),n=require("./Reshape");function o(o){const{inputs:i,backend:r,attrs:a}=o,{x:s,filter:l}=i,{strides:p,pad:d,dilations:u}=a,c=e.backend_util.computeDilation2DInfo(s.shape,l.shape,p,d,"NHWC",u);let f;const D=new t.Dilation2DProgram(c);f=r.runWebGLProgram(D,[s,l],"float32");const b=(0,n.reshape)({inputs:{x:f},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(f),b}const i={kernelName:e.Dilation2D,backendName:"webgl",kernelFunc:o};exports.dilation2DConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../dilation_gpu":"zpON","./Reshape":"k4TP"}],"aNTO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.einsum=u,exports.einsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Multiply"),s=require("./Reshape"),n=require("./Sum"),i=require("./Transpose");function u(u){const{inputs:r,backend:a,attrs:o}=u,{equation:l}=o,p=r,{allDims:c,summedDims:m,idDims:d}=e.backend_util.decodeEinsumEquation(l,p.length);e.backend_util.checkEinsumDimSizes(c.length,d,p);const{path:h,steps:k}=e.backend_util.getEinsumComputePath(m,d),b=k.length;let f=null,g=c.length;const x=[];for(let q=0;q<b;++q){for(const n of k[q]){const{permutationIndices:u,expandDims:r}=e.backend_util.getEinsumPermutation(g,d[n]);let o;e.backend_util.isIdentityPermutation(u)?o=p[n]:(o=(0,i.transpose)({inputs:{x:p[n]},backend:a,attrs:{perm:u}}),x.push(o));const l=o.shape.slice();for(let e=0;e<r.length;++e)l.splice(r[e],0,1);e.util.arraysEqual(o.shape,l)||(o=(0,s.reshape)({inputs:{x:o},backend:a,attrs:{shape:l}}),x.push(o)),null===f?f=o:(f=(0,t.multiply)({inputs:{a:o,b:f},backend:a}),x.push(f))}q<b-1&&(h[q]>=0&&(f=(0,n.sum)({inputs:{x:f},backend:a,attrs:{axis:h[q]-(c.length-g),keepDims:!1}}),x.push(f)),g--)}for(const e of x)e!==f&&a.disposeIntermediateTensorInfo(e);return f}const r={kernelName:e.Einsum,backendName:"webgl",kernelFunc:u};exports.einsumConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Multiply":"dTvy","./Reshape":"k4TP","./Sum":"RVri","./Transpose":"hS8R"}],"Xush":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return (x >= 0.0) ? x : (exp(x) - 1.0);",x="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:x}),u={kernelName:e.Elu,backendName:"webgl",kernelFunc:t};exports.eluConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"O3E0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGradConfig=exports.eluGrad=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),a=require("../binaryop_packed_gpu");const n="return (b >= 1.0) ? a : a * (b + 1.0);",o="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t=t=>{const{inputs:u,backend:p}=t,{dy:s,y:c}=u,b=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new a.BinaryOpPackedProgram(o,s.shape,c.shape):new r.BinaryOpProgram(n,s.shape,c.shape);return p.runWebGLProgram(b,[s,c],s.dtype)};exports.eluGrad=t;const u={kernelName:e.EluGrad,backendName:"webgl",kernelFunc:t};exports.eluGradConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci"}],"btqb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalConfig=exports.equal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),l=require("../kernel_utils/shared");const n="\n  return vec4(equal(a, b));\n",t="return float(a == b);",u=(0,r.binaryKernelFunc)({opSnippet:t,packedOpSnippet:n,dtype:"bool",cpuKernelImpl:l.equalImplCPU});exports.equal=u;const o={kernelName:e.Equal,backendName:"webgl",kernelFunc:u};exports.equalConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"a80B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfConfig=exports.erf=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${e.backend_util.ERF_P};\n  float a1 = ${e.backend_util.ERF_A1};\n  float a2 = ${e.backend_util.ERF_A2};\n  float a3 = ${e.backend_util.ERF_A3};\n  float a4 = ${e.backend_util.ERF_A4};\n  float a5 = ${e.backend_util.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,a=(0,n.unaryKernelFunc)({opSnippet:t});exports.erf=a;const r={kernelName:e.Erf,backendName:"webgl",kernelFunc:a};exports.erfConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"gRCN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expConfig=exports.exp=exports.EXP=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),p=require("../kernel_utils/shared");const t="return exp(x);";exports.EXP=t;const n=(0,r.unaryKernelFunc)({opSnippet:t,packedOpSnippet:t,cpuKernelImpl:p.expImplCPU,dtype:"float32"});exports.exp=n;const o={kernelName:e.Exp,backendName:"webgl",kernelFunc:n};exports.expConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"LRvM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=t,exports.expandDimsConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Reshape");function t(t){const{inputs:n,attrs:r,backend:i}=t,{dim:a}=r,{input:p}=n,o=p.shape.length,u=p.shape.slice();let c=a;return a<0&&(e.util.assert(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+a+1),u.splice(c,0,1),(0,s.reshape)({inputs:{x:p},backend:i,attrs:{shape:u}})}const n={kernelName:e.ExpandDims,backendName:"webgl",kernelFunc:t};exports.expandDimsConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"k4TP"}],"vGDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Config=exports.expm1=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),p=require("../kernel_utils/shared");const n="return exp(x) - 1.0;",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:n,cpuKernelImpl:p.expm1ImplCPU});exports.expm1=t;const s={kernelName:e.Expm1,backendName:"webgl",kernelFunc:t};exports.expm1Config=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"LwKt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FFTProgram=void 0;class e{constructor(e,t,n){this.variableNames=["real","imag"];const o=t[1];this.outputShape=t;const a=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=n?`${o}.0`:"1.0";let l;if("real"===e)l="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);l="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${a};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${l}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${o});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${o}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${i};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}exports.FFTProgram=e;
},{}],"VKcD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fftImpl=t;var e=require("@tensorflow/tfjs-core"),a=require("../fft_gpu"),r=require("./Complex"),s=require("./Reshape");function t(t,o,n){const p=n.texData.get(t.dataId),d=e.util.sizeFromShape(t.shape),i=t.shape[t.shape.length-1],m=d/i,f=(0,s.reshape)({inputs:{x:t},backend:n,attrs:{shape:[m,i]}}),l=f.shape,I=new a.FFTProgram("real",l,o),u=new a.FFTProgram("imag",l,o),c=[{dataId:p.complexTensorInfos.real.dataId,dtype:p.complexTensorInfos.real.dtype,shape:l},{dataId:p.complexTensorInfos.imag.dataId,dtype:p.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(I,c,"float32"),g=n.runWebGLProgram(u,c,"float32"),x=(0,r.complex)({inputs:{real:h,imag:g},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g);const T=(0,s.reshape)({inputs:{x:x},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(x),T}
},{"@tensorflow/tfjs-core":"tc6m","../fft_gpu":"LwKt","./Complex":"vWXR","./Reshape":"k4TP"}],"Bx4q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=r,exports.fftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./FFT_impl");function r(e){const{inputs:r,backend:n}=e,{input:o}=r;return(0,t.fftImpl)(o,!1,n)}const n={kernelName:e.FFT,backendName:"webgl",kernelFunc:r};exports.fftConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./FFT_impl":"VKcD"}],"A8rF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FillProgram=void 0;class t{constructor(t,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}exports.FillProgram=t;
},{}],"vLYI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=t,exports.fillConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../fill_gpu");function t(t){const{backend:l,attrs:n}=t,{shape:o,value:i}=n;let{dtype:s}=n;if("string"===(s=s||e.util.inferDtype(i))){const r=e.util.getArrayFromDType(s,e.util.sizeFromShape(o));return r.fill(i),l.makeTensorInfo(o,s,r)}{const e=new r.FillProgram(o,i),t=[[i]];return l.runWebGLProgram(e,[],s,t)}}const l={kernelName:e.Fill,backendName:"webgl",kernelFunc:t};exports.fillConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../fill_gpu":"A8rF"}],"gwWQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlipLeftRightProgram=void 0;class o{constructor(o){this.variableNames=["Image"],this.outputShape=[];const t=o[2];this.outputShape=o,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}exports.FlipLeftRightProgram=o;
},{}],"gRW5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRightConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../flip_left_right_gpu");const r={kernelName:e.FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:e,backend:r})=>{const{image:i}=e,n=r,o=new t.FlipLeftRightProgram(i.shape);return n.runWebGLProgram(o,[i],i.dtype)}};exports.flipLeftRightConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../flip_left_right_gpu":"gwWQ"}],"Yy57":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorConfig=exports.floor=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),o=require("../kernel_utils/shared");const l="return floor(x);",n=(0,r.unaryKernelFunc)({opSnippet:l,packedOpSnippet:l,cpuKernelImpl:o.floorImplCPU});exports.floor=n;const t={kernelName:e.Floor,backendName:"webgl",kernelFunc:n};exports.floorConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"rAwh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivConfig=exports.floorDiv=void 0;var n=require("@tensorflow/tfjs-core"),i=require("../kernel_utils/kernel_funcs_utils");const e="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",o="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",r=(0,i.binaryKernelFunc)({opSnippet:e,packedOpSnippet:o,dtype:"int32"});exports.floorDiv=r;const t={kernelName:n.FloorDiv,backendName:"webgl",kernelFunc:r};exports.floorDivConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"LnXj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FromPixelsProgram=void 0;var e=require("../../glsl_version");class t{constructor(t){this.variableNames=["A"];const s=(0,e.getGlslDifferences)(),[n,o]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${n}.0);\n\n        vec4 values = ${s.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}exports.FromPixelsProgram=t;
},{"../../glsl_version":"QbWp"}],"ljIp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FromPixelsPackedProgram=void 0;var e=require("../../glsl_version");class t{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const o=(0,e.getGlslDifferences)(),[n,s]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${s}.0, ${n}.0);\n            vec4 values = ${o.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.FromPixelsPackedProgram=t;
},{"../../glsl_version":"QbWp"}],"MRz7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromPixelsConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../tex_util"),n=require("./FromPixels_utils/from_pixels_gpu"),o=require("./FromPixels_utils/from_pixels_packed_gpu");const a={kernelName:e.FromPixels,backendName:"webgl",kernelFunc:i};let r;function i(a){const{inputs:i,backend:s,attrs:l}=a;let{pixels:d}=i;const{numChannels:u}=l,m="undefined"!=typeof HTMLVideoElement&&d instanceof HTMLVideoElement,c="undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement,[g,x]=m?[d.videoWidth,d.videoHeight]:[d.width,d.height],f=[x,g],p=[x,g,u];(c||m)&&(null==r&&(r=document.createElement("canvas").getContext("2d")),r.canvas.width=g,r.canvas.height=x,r.drawImage(d,0,0,g,x),d=r.canvas);const P=s.makeTensorInfo(f,"int32");s.texData.get(P.dataId).usage=t.TextureUsage.PIXELS,s.gpgpu.uploadPixelDataToTexture(s.getTexture(P.dataId),d);const _=(0,e.env)().getBool("WEBGL_PACK")?new o.FromPixelsPackedProgram(p):new n.FromPixelsProgram(p),v=s.runWebGLProgram(_,[P],"int32");return s.disposeData(P.dataId),v}exports.fromPixelsConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../tex_util":"hBHG","./FromPixels_utils/from_pixels_gpu":"LnXj","./FromPixels_utils/from_pixels_packed_gpu":"ljIp"}],"sHbe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedConv2DConfig=void 0,exports.fusedConv2d=i;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu"),n=require("../kernel_utils/kernel_funcs_utils"),o=require("./Conv2D_impl"),a=require("./Reshape");function i(i){const{inputs:r,backend:s,attrs:l}=i,{x:u,filter:c,bias:d,preluActivationWeights:p}=r,{strides:f,pad:h,dataFormat:v,dilations:k,dimRoundingMode:g,activation:m,leakyreluAlpha:b}=l,C=e.backend_util.convertConv2DDataFormat(v),I=e.backend_util.computeConv2DInfo(u.shape,c.shape,f,k,h,g,!1,C);let _;const A=[];if(1!==I.filterHeight||1!==I.filterWidth||1!==I.dilationHeight||1!==I.dilationWidth||1!==I.strideHeight||1!==I.strideWidth||"SAME"!==I.padInfo.type&&"VALID"!==I.padInfo.type)if((0,e.env)().getBool("WEBGL_CONV_IM2COL")&&1===u.shape[0])_=(0,o.conv2dWithIm2Row)({x:u,filter:c,convInfo:I,backend:s,bias:d,activation:m,preluActivationWeights:p,leakyreluAlpha:b});else{const o=null!=d,a=null!=p,i="leakyrelu"===m,r=m?(0,n.mapActivationToShaderProgram)(m,!1):null,l=new t.Conv2DProgram(I,o,r,a,i),f=[u,c];if(d&&f.push(d),p&&f.push(p),i){const t=s.makeTensorInfo([],"float32",e.util.createScalarValue(b,"float32"));f.push(t),A.push(t)}_=s.runWebGLProgram(l,f,"float32")}else _=(0,o.conv2dByMatMul)({x:u,filter:c,convInfo:I,backend:s,bias:d,activation:m,preluActivationWeights:p,leakyreluAlpha:b});const D=(0,a.reshape)({inputs:{x:_},backend:s,attrs:{shape:I.outShape}});return A.push(_),A.forEach(e=>s.disposeIntermediateTensorInfo(e)),D}const r={kernelName:e.FusedConv2D,backendName:"webgl",kernelFunc:i};exports.fusedConv2DConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu":"LHRJ","../kernel_utils/kernel_funcs_utils":"uLeB","./Conv2D_impl":"Ld10","./Reshape":"k4TP"}],"yLUC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedDepthwiseConv2D=o,exports.fusedDepthwiseConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu_depthwise"),i=require("../conv_packed_gpu_depthwise"),n=require("../kernel_utils/kernel_funcs_utils");function o(o){const{inputs:s,backend:r,attrs:a}=o,{x:l,filter:d,bias:u,preluActivationWeights:p}=s,{strides:h,pad:c,dilations:f,dimRoundingMode:v,activation:g,leakyreluAlpha:D}=a,C=[];let _=f;null==_&&(_=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(h,_),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${h} and dilations '${_}'`);const k=e.backend_util.computeConv2DInfo(l.shape,d.shape,h,_,c,v,!0),w=(0,e.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&k.strideWidth<=2&&k.outChannels/k.inChannels==1,m=g?(0,n.mapActivationToShaderProgram)(g,w):null,b=[l,d],P=null!=u,W=null!=p,I="leakyrelu"===g;if(P&&b.push(u),W&&b.push(p),I){const t=r.makeTensorInfo([],"float32",e.util.createScalarValue(D,"float32"));b.push(t),C.push(t)}let E;E=w?new i.DepthwiseConvPacked2DProgram(k,P,m,W,I):new t.DepthwiseConv2DProgram(k,P,m,W,I);const x=[[k.padInfo.top,k.padInfo.left],[k.strideHeight,k.strideWidth],[k.dilationHeight,k.dilationWidth],[k.inHeight,k.inWidth]],A=r.runWebGLProgram(E,b,"float32",x);return C.forEach(e=>r.disposeIntermediateTensorInfo(e)),A}const s={kernelName:e.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:o};exports.fusedDepthwiseConv2DConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../conv_gpu_depthwise":"tZKH","../conv_packed_gpu_depthwise":"najp","../kernel_utils/kernel_funcs_utils":"uLeB"}],"gSio":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GatherNDProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,i){this.sliceDim=t,this.strides=s,this.variableNames=["x","indices"],this.outputShape=i;const r=(0,e.getCoordsDataType)(s.length),n=(0,e.getCoordsDataType)(i.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${n} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${o};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}exports.GatherNDProgram=t;
},{"./shader_compiler":"DIKY"}],"oqms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherNd=a,exports.gatherNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../gather_nd_gpu"),t=require("../kernel_utils/shared"),s=require("./Reshape");function a(a){const{inputs:n,backend:p}=a,{params:d,indices:o}=n,i=o.shape,u=i[i.length-1],h=e.util.sizeFromShape(d.shape),[c,l,f,g]=e.backend_util.prepareAndValidate(d,o),m=(0,s.reshape)({inputs:{x:o},backend:p,attrs:{shape:[l,u]}}),b=(0,s.reshape)({inputs:{x:d},backend:p,attrs:{shape:[e.util.sizeFromShape(d.shape)/f,f]}});if(p.shouldExecuteOnCPU([d,o])||"string"===d.dtype){const e=p.readSync(o.dataId),r=p.bufferSync(d),s=(0,t.gatherNdImplCPU)(e,r,d.dtype,l,u,f,g,d.shape,h);return p.makeTensorInfo(c,d.dtype,s.values)}const k=new r.GatherNDProgram(u,g,[l,f]),I=p.runWebGLProgram(k,[b,m],b.dtype),x=(0,s.reshape)({inputs:{x:I},backend:p,attrs:{shape:c}});return p.disposeIntermediateTensorInfo(m),p.disposeIntermediateTensorInfo(b),p.disposeIntermediateTensorInfo(I),x}const n={kernelName:e.GatherNd,backendName:"webgl",kernelFunc:a};exports.gatherNdConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../gather_nd_gpu":"gSio","../kernel_utils/shared":"tfp0","./Reshape":"k4TP"}],"sYl6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GatherProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s){this.variableNames=["A","indices"],this.outputShape=s,this.rank=s.length;const o=(0,e.getCoordsDataType)(this.rank),n=r(t,2);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        setOutput(getA(${n}));\n      }\n    `}}function r(e,t){const r=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<e.length;o++)2===o?s.push("int(getIndices(resRC.x, resRC.z))"):s.push(`${r[o]}`);return s.join()}exports.GatherProgram=t;
},{"./shader_compiler":"DIKY"}],"ZQ9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2=a,exports.gatherV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../gather_gpu"),r=require("../kernel_utils/shared"),s=require("./Reshape");function a(a){const{inputs:n,backend:i,attrs:o}=a,{x:h,indices:p}=n,{axis:u,batchDims:c}=o,d=e.util.parseAxisParam(u,h.shape)[0],l=i.readSync(p.dataId),f=h.shape[d];for(let t=0;t<l.length;++t){const r=l[t];e.util.assert(r<=f-1&&r>=0,()=>`GatherV2: the index value ${r} is not in [0, ${f-1}]`)}const b=e.backend_util.segment_util.collectGatherOpShapeInfo(h,p,d,c),S=e.util.sizeFromShape(p.shape),g=[],m=(0,s.reshape)({inputs:{x:h},backend:i,attrs:{shape:[b.batchSize,b.outerSize,b.dimSize,b.sliceSize]}}),x=(0,s.reshape)({inputs:{x:p},backend:i,attrs:{shape:[b.batchSize,S/b.batchSize]}});g.push(m),g.push(x);const z=[b.batchSize,b.outerSize,S/b.batchSize,b.sliceSize];if(i.shouldExecuteOnCPU([h,p])||"string"===h.dtype){const e=i.bufferSync(x),t=i.bufferSync(m),s=(0,r.gatherV2ImplCPU)(t,e,z);return g.forEach(e=>i.disposeIntermediateTensorInfo(e)),i.makeTensorInfo(b.outputShape,s.dtype,s.values)}const k=new t.GatherProgram(m.shape,z),I=i.runWebGLProgram(k,[m,x],m.dtype);g.push(I);const y=(0,s.reshape)({inputs:{x:I},backend:i,attrs:{shape:b.outputShape}});return g.forEach(e=>i.disposeIntermediateTensorInfo(e)),y}const n={kernelName:e.GatherV2,backendName:"webgl",kernelFunc:a};exports.gatherV2Config=n;
},{"@tensorflow/tfjs-core":"tc6m","../gather_gpu":"sYl6","../kernel_utils/shared":"tfp0","./Reshape":"k4TP"}],"yKvx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterConfig=exports.greater=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const n="return float(a > b);",a="\n  return vec4(greaterThan(a, b));\n",o=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:a,cpuKernelImpl:t.greaterImplCPU,dtype:"bool"});exports.greater=o;const l={kernelName:e.Greater,backendName:"webgl",kernelFunc:o};exports.greaterConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"AkAn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualConfig=exports.greaterEqual=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const a="return float(a >= b);",l="\n  return vec4(greaterThanEqual(a, b));\n",n=(0,r.binaryKernelFunc)({opSnippet:a,packedOpSnippet:l,dtype:"bool",cpuKernelImpl:t.greaterEqualImplCPU});exports.greaterEqual=n;const u={kernelName:e.GreaterEqual,backendName:"webgl",kernelFunc:n};exports.greaterEqualConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"Z5jD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=r,exports.ifftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./FFT_impl");function r(e){const{inputs:r,backend:n}=e,{input:o}=r;return(0,t.fftImpl)(o,!0,n)}const n={kernelName:e.IFFT,backendName:"webgl",kernelFunc:r};exports.ifftConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./FFT_impl":"VKcD"}],"uPGo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteConfig=exports.isFinite=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../kernel_utils/kernel_funcs_utils");const n="return float(!isnan(x) && !isinf(x));",t=(0,i.unaryKernelFunc)({opSnippet:n,dtype:"bool"});exports.isFinite=t;const r={kernelName:e.IsFinite,backendName:"webgl",kernelFunc:t};exports.isFiniteConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"EVDd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfConfig=exports.isInf=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return float(isinf(x));",s=(0,n.unaryKernelFunc)({opSnippet:r,dtype:"bool"});exports.isInf=s;const o={kernelName:e.IsInf,backendName:"webgl",kernelFunc:s};exports.isInfConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"amu0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNConfig=exports.isNaN=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return float(isnan(x));",s=(0,r.unaryKernelFunc)({opSnippet:n,dtype:"bool"});exports.isNaN=s;const o={kernelName:e.IsNan,backendName:"webgl",kernelFunc:s};exports.isNaNConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"j3SB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessConfig=exports.less=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils"),r=require("../kernel_utils/shared");const n="return float(a < b);",l="\n  return vec4(lessThan(a, b));\n",t=(0,s.binaryKernelFunc)({opSnippet:n,packedOpSnippet:l,cpuKernelImpl:r.lessImplCPU,dtype:"bool"});exports.less=t;const o={kernelName:e.Less,backendName:"webgl",kernelFunc:t};exports.lessConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"PgfX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqualConfig=exports.lessEqual=exports.LESS_EQUAL_PACKED=exports.LESS_EQUAL=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils"),r=require("../kernel_utils/shared");const l="return float(a <= b);";exports.LESS_EQUAL=l;const t="\n  return vec4(lessThanEqual(a, b));\n";exports.LESS_EQUAL_PACKED=t;const n=(0,s.binaryKernelFunc)({opSnippet:l,packedOpSnippet:t,cpuKernelImpl:r.lessEqualImplCPU,dtype:"bool"});exports.lessEqual=n;const o={kernelName:e.LessEqual,backendName:"webgl",kernelFunc:n};exports.lessEqualConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"sU1o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linSpace=r,exports.linSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function r(e){const{backend:r,attrs:t}=e,{start:o,stop:s,num:a}=t,l=(0,n.linSpaceImplCPU)(o,s,a);return r.makeTensorInfo([l.length],"float32",l)}const t={kernelName:e.LinSpace,backendName:"webgl",kernelFunc:r};exports.linSpaceConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"cxva":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logConfig=exports.log=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),l=require("../kernel_utils/shared");const n="if (x < 0.0) return NAN;\n  return log(x);",s="\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:s,cpuKernelImpl:l.logImplCPU});exports.log=t;const u={kernelName:e.Log,backendName:"webgl",kernelFunc:t};exports.logConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"VTAF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pConfig=exports.log1p=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="return log(1.0 + x);",n=(0,r.unaryKernelFunc)({opSnippet:o});exports.log1p=n;const t={kernelName:e.Log1p,backendName:"webgl",kernelFunc:n};exports.log1pConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"QvN7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAndConfig=exports.logicalAnd=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return float(a >= 1.0 && b >= 1.0);",l="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",o=(0,n.binaryKernelFunc)({opSnippet:r,packedOpSnippet:l,dtype:"bool"});exports.logicalAnd=o;const t={kernelName:e.LogicalAnd,backendName:"webgl",kernelFunc:o};exports.logicalAndConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"wovn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNotConfig=exports.logicalNot=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../kernel_utils/kernel_funcs_utils");const r="return float(!(x >= 1.0));",t=(0,o.unaryKernelFunc)({opSnippet:r});exports.logicalNot=t;const l={kernelName:e.LogicalNot,backendName:"webgl",kernelFunc:t};exports.logicalNotConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"M59B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOrConfig=exports.logicalOr=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return float(a >= 1.0 || b >= 1.0);",l="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",o=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:l,dtype:"bool"});exports.logicalOr=o;const t={kernelName:e.LogicalOr,backendName:"webgl",kernelFunc:o};exports.logicalOrConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"DLwU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNProgram=void 0;class t{constructor(t,o,n,s,e){this.variableNames=["x"],this.outputShape=[];const r=o,i=t[3]-1;let a;this.outputShape=t;const d=`float(${n}) + float(${s}) * sum`;a=.5===e?`inversesqrt(${d})`:1===e?`1.0/(${d})`:`exp(log(${d}) * float(-${e}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${r}; j <= ${r}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${a};\n        setOutput(val);\n      }\n    `}}exports.LRNProgram=t;
},{}],"sdWO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNPackedProgram=void 0;class e{constructor(e,n,t,o,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const r=n,c=e[3]-1;let s;this.outputShape=e;const u=`float(${t}) + float(${o}) * sum`;s=.5===a?`inversesqrt(${u})`:1===a?`1.0/(${u})`:`exp(log(${u}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${r};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${r}; j <= ${r}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${c}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}exports.LRNPackedProgram=e;
},{}],"MLAU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lrn=exports.LRNConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../lrn_gpu"),n=require("../lrn_packed_gpu");const t=t=>{const{inputs:o,backend:a,attrs:s}=t,{x:p}=o,{depthRadius:u,bias:l,alpha:c,beta:i}=s,d=(0,e.env)().getBool("WEBGL_PACK_NORMALIZATION")?new n.LRNPackedProgram(p.shape,u,l,c,i):new r.LRNProgram(p.shape,u,l,c,i);return a.runWebGLProgram(d,[p],p.dtype)};exports.lrn=t;const o={kernelName:e.LRN,backendName:"webgl",kernelFunc:t};exports.LRNConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../lrn_gpu":"DLwU","../lrn_packed_gpu":"sdWO"}],"xmP3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNGradProgram=void 0;class n{constructor(n,t,e,i,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=t,this.bias=e,this.alpha=i,this.beta=o,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${i}) * norm + float(${e});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${i})\n                * float(${o})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${o});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}exports.LRNGradProgram=n;
},{}],"z49d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lrnGrad=exports.LRNGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../lrn_grad_gpu");const a=e=>{const{inputs:a,backend:t,attrs:n}=e,{x:o,y:s,dy:d}=a,{depthRadius:p,bias:u,alpha:i,beta:l}=n,c=new r.LRNGradProgram(o.shape,p,u,i,l);return t.runWebGLProgram(c,[o,s,d],o.dtype)};exports.lrnGrad=a;const t={kernelName:e.LRNGrad,backendName:"webgl",kernelFunc:a};exports.LRNGradConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../lrn_grad_gpu":"xmP3"}],"mDKU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxImpl=t;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/reduce"),s=require("../kernels/Reshape");function t(t,a,n,i){const o=e.util.sizeFromShape(a),p=e.util.sizeFromShape(t.shape)/o,u=(0,s.reshape)({inputs:{x:t},attrs:{shape:[p,o]},backend:i}),d=(0,r.reduce)(u,t.dtype,"max",i),c=(0,s.reshape)({inputs:{x:d},attrs:{shape:n},backend:i});return i.disposeIntermediateTensorInfo(u),i.disposeIntermediateTensorInfo(d),c}
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","../kernels/Reshape":"k4TP"}],"SOPS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=n,exports.maxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),a=require("./Max_impl"),s=require("./Transpose_impl");function n(n){const{inputs:r,backend:o,attrs:l}=n,{x:i}=r,{reductionIndices:p,keepDims:d}=l,u=i.shape.length,c=e.util.parseAxisParam(p,i.shape);let m=c;const x=e.backend_util.getAxesPermutation(m,u),I=null!=x,f=o.shouldExecuteOnCPU([i]);let h=i;if(I){if(f){const e=o.texData.get(h.dataId).values,t=new Array(u);for(let s=0;s<t.length;s++)t[s]=i.shape[x[s]];const a=(0,s.transposeImplCPU)(e,i.shape,i.dtype,x,t);h=o.makeTensorInfo(t,i.dtype),o.texData.get(h.dataId).values=a}else h=(0,s.transposeImpl)(i,x,o);m=e.backend_util.getInnerMostAxes(m.length,u)}e.backend_util.assertAxesAreInnerMostDims("max",m,u);const[k,g]=e.backend_util.computeOutAndReduceShapes(h.shape,m);let _,b=k;if(d&&(b=e.backend_util.expandShapeToKeepDim(k,c)),f){const a=o.texData.get(h.dataId).values,s=(0,t.maxImplCPU)(a,e.util.sizeFromShape(g),b,i.dtype);_=o.makeTensorInfo(b,i.dtype),o.texData.get(_.dataId).values=s}else _=(0,a.maxImpl)(h,g,b,o);return I&&o.disposeIntermediateTensorInfo(h),_}const r={kernelName:e.Max,backendName:"webgl",kernelFunc:n};exports.maxConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","./Max_impl":"mDKU","./Transpose_impl":"nCXe"}],"IMhY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumConfig=exports.maximum=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),n=require("../binaryop_packed_gpu"),i=require("../kernel_utils/kernel_funcs_utils"),u=require("../kernel_utils/shared");const a=r.CHECK_NAN_SNIPPET+"\n  return max(a, b);\n",m="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+n.CHECK_NAN_SNIPPET+"\n  return result;\n",s=(0,i.binaryKernelFunc)({opSnippet:a,packedOpSnippet:m,cpuKernelImpl:u.maximumImplCPU});exports.maximum=s;const t={kernelName:e.Maximum,backendName:"webgl",kernelFunc:s};exports.maximumConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"I2MZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=i,exports.maxPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../pool_gpu"),o=require("../webgl_util"),r=require("./Identity");function i(i){const{inputs:n,backend:s,attrs:a}=i,{x:l}=n;(0,o.assertNotComplex)(l,"maxPool");const{filterSize:u,strides:d,pad:c,dimRoundingMode:p}=a;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const m=e.backend_util.computePool2DInfo(l.shape,u,d,1,c,p);if(1===m.filterWidth&&1===m.filterHeight&&e.util.arraysEqual(m.inShape,m.outShape))return(0,r.identity)({inputs:{x:l},backend:s});const x=new t.Pool2DProgram(m,"max",!1);return s.runWebGLProgram(x,[l],l.dtype)}const n={kernelName:e.MaxPool,backendName:"webgl",kernelFunc:i};exports.maxPoolConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../pool_gpu":"DAMt","../webgl_util":"p3g2","./Identity":"Gwwj"}],"fXYl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DConfig=void 0,exports.maxPool3d=r;var e=require("@tensorflow/tfjs-core"),o=require("../pool_gpu");function r(r){const{inputs:t,backend:n,attrs:a}=r,{x:s}=t,{filterSize:i,strides:l,pad:d,dataFormat:u,dimRoundingMode:p}=a,c=e.backend_util.computePool3DInfo(s.shape,i,l,[1,1,1],d,p,u),m=new o.Pool3DProgram(c,"max",!1);return n.runWebGLProgram(m,[s],s.dtype)}const t={kernelName:e.MaxPool3D,backendName:"webgl",kernelFunc:r};exports.maxPool3DConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../pool_gpu":"DAMt"}],"trD0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MaxPool3DBackpropProgram=exports.MaxPool2DBackpropProgram=void 0;class n{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const t=n.strideHeight,o=n.strideWidth,e=n.dilationHeight,i=n.effectiveFilterHeight,d=n.effectiveFilterWidth,r=i-1-n.padInfo.top,a=d-1-n.padInfo.left,s=i*d-1;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${e}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${s} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${d} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.MaxPool2DBackpropProgram=n;class t{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const t=n.strideDepth,o=n.strideHeight,e=n.strideWidth,i=n.dilationDepth,d=n.dilationHeight,r=n.dilationWidth,a=n.effectiveFilterDepth,s=n.effectiveFilterHeight,y=n.effectiveFilterWidth,c=a-1-n.padInfo.front,l=s-1-n.padInfo.top,C=y-1-n.padInfo.left,f=a*s*y-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${l}, ${C});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${a};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${s};\n              wR += ${d}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${y};\n                wC += ${r}) {\n              float dyC = float(dyCCorner + wC) / ${e}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${f} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${s} * ${y} +\n                  wR * ${y} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.MaxPool3DBackpropProgram=t;
},{}],"Vwrr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DGrad=a,exports.maxPoolGrad3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../max_pool_backprop_gpu"),r=require("../pool_gpu");function a(a){const{inputs:n,backend:t,attrs:p}=a,{dy:d,input:i}=n,s=i,{filterSize:u,strides:l,pad:m,dimRoundingMode:c}=p,P=e.backend_util.computePool3DInfo(s.shape,u,l,[1,1,1],m,c),x=new r.Pool3DProgram(P,"max",!0),g=t.runWebGLProgram(x,[s],s.dtype),f=new o.MaxPool3DBackpropProgram(P),b=t.runWebGLProgram(f,[d,g],s.dtype);return t.disposeIntermediateTensorInfo(g),b}const n={kernelName:e.MaxPool3DGrad,backendName:"webgl",kernelFunc:a};exports.maxPoolGrad3DConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../max_pool_backprop_gpu":"trD0","../pool_gpu":"DAMt"}],"iKnw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGrad=a,exports.maxPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../max_pool_backprop_gpu"),r=require("../pool_gpu"),t=require("../webgl_util");function a(a){const{inputs:n,backend:p,attrs:s}=a,{dy:u,input:d,output:i}=n,l=d;(0,t.assertNotComplex)([d,i],"maxPoolGrad");const{filterSize:m,strides:c,pad:x,dimRoundingMode:P}=s,g=e.backend_util.computePool2DInfo(l.shape,m,c,1,x,P),b=new r.Pool2DProgram(g,"max",!0),f=p.runWebGLProgram(b,[l],l.dtype),_=new o.MaxPool2DBackpropProgram(g),k=p.runWebGLProgram(_,[u,f],l.dtype);return p.disposeIntermediateTensorInfo(f),k}const n={kernelName:e.MaxPoolGrad,backendName:"webgl",kernelFunc:a};exports.maxPoolGradConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../max_pool_backprop_gpu":"trD0","../pool_gpu":"DAMt","../webgl_util":"p3g2"}],"ujBb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxImpl=o;var r=require("../pool_gpu");function o(o,e,t,a){let l=new r.Pool2DProgram(t,"max",!1);const m=a.runWebGLProgram(l,[o],"float32");return l=new r.Pool2DProgram(t,"max",!0,!0,e),[m,a.runWebGLProgram(l,[o],"float32")]}
},{"../pool_gpu":"DAMt"}],"yFKv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./MaxPoolWithArgmax_impl");const r={kernelName:e.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:r,attrs:o,backend:i})=>{const{x:a}=r,{filterSize:n,strides:s,pad:l,includeBatchInIndex:u}=o,d=i;e.util.assert(4===a.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${a.shape.length}.`);const m=[1,1];e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(s,m),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '${m}'`);const x=e.backend_util.computePool2DInfo(a.shape,n,s,m,l),[c,h]=(0,t.maxPoolWithArgmaxImpl)(a,u,x,d);return[c,h]}};exports.maxPoolWithArgmaxConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./MaxPoolWithArgmax_impl":"ujBb"}],"Wwo8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanImpl=t;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/reduce"),s=require("../kernels/Reshape");function t(t,n,a,o){const i=e.util.sizeFromShape(n),p=e.util.sizeFromShape(t.shape)/i,u=(0,s.reshape)({inputs:{x:t},attrs:{shape:[p,i]},backend:o}),d=(0,r.reduce)(u,"float32","mean",o),l=(0,s.reshape)({inputs:{x:d},attrs:{shape:a},backend:o});return o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(d),l}
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","../kernels/Reshape":"k4TP"}],"rbfu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Mean_impl"),s=require("./Transpose_impl");const n={kernelName:e.Mean,backendName:"webgl",kernelFunc:({inputs:n,attrs:a,backend:r})=>{const{x:o}=n,{keepDims:l,axis:p}=a,i=r,u=o.shape.length,c=e.util.parseAxisParam(p,o.shape);let d=c;const m=e.backend_util.getAxesPermutation(d,u),x=null!=m,f=i.shouldExecuteOnCPU([o]),h=[];let k=o;if(x){if(f){const e=i.texData.get(k.dataId).values,t=new Array(u);for(let s=0;s<t.length;s++)t[s]=o.shape[m[s]];const n=(0,s.transposeImplCPU)(e,o.shape,o.dtype,m,t);k=i.makeTensorInfo(t,o.dtype),i.texData.get(k.dataId).values=n}else k=(0,s.transposeImpl)(o,m,i);h.push(k),d=e.backend_util.getInnerMostAxes(d.length,u)}e.backend_util.assertAxesAreInnerMostDims("sum",d,u);const[g,I]=e.backend_util.computeOutAndReduceShapes(k.shape,d);let b=g;l&&(b=e.backend_util.expandShapeToKeepDim(g,c));const _=(0,t.meanImpl)(k,I,b,i);for(const e of h)i.disposeIntermediateTensorInfo(e);return _}};exports.meanConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Mean_impl":"Wwo8","./Transpose_impl":"nCXe"}],"xq7h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=r,exports.minConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function r(r){const{inputs:a,backend:i,attrs:p}=r,{x:o}=a,{axis:u,keepDims:d}=p,l=o.shape.length,c=e.util.parseAxisParam(u,o.shape);let m=c;const h=e.backend_util.getAxesPermutation(m,l);let k=o;null!=h&&(k=(0,n.transpose)({inputs:{x:o},backend:i,attrs:{perm:h}}),m=e.backend_util.getInnerMostAxes(m.length,o.shape.length)),e.backend_util.assertAxesAreInnerMostDims("min",m,l);const[x,b]=e.backend_util.computeOutAndReduceShapes(k.shape,m),f=e.util.sizeFromShape(b),g=(0,t.reshape)({inputs:{x:k},backend:i,attrs:{shape:[-1,f]}}),I=(0,s.reduce)(g,g.dtype,"min",i);let _;if(d){const s=e.backend_util.expandShapeToKeepDim(x,c);_=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:s}})}else _=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:x}});return i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(I),null!=h&&i.disposeIntermediateTensorInfo(k),_}const a={kernelName:e.Min,backendName:"webgl",kernelFunc:r};exports.minConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","./Reshape":"k4TP","./Transpose":"hS8R"}],"GafU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumConfig=exports.minimum=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu"),i=require("../kernel_utils/kernel_funcs_utils"),u=require("../kernel_utils/shared");const m=n.CHECK_NAN_SNIPPET+"\n  return min(a, b);\n",s="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+r.CHECK_NAN_SNIPPET+"\n  return result;\n",t=(0,i.binaryKernelFunc)({opSnippet:m,packedOpSnippet:s,cpuKernelImpl:u.minimumImplCPU});exports.minimum=t;const p={kernelName:e.Minimum,backendName:"webgl",kernelFunc:t};exports.minimumConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_gpu":"r3Zb","../binaryop_packed_gpu":"MEci","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"hmnb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirrorPadProgram=void 0;var t=require("./shader_compiler");class o{constructor(o,n,r){this.variableNames=["x"],this.outputShape=n.map((t,n)=>t[0]+o[n]+t[1]);const e=o.length,i=(0,t.getCoordsDataType)(e),s=n.map(t=>t[0]).join(","),u=n.map((t,n)=>t[0]+o[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e),d="reflect"===r?0:1;this.userCode=1!==e?`\n      ${i} start = ${i}(${s});\n      ${i} end = ${i}(${u});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${e}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${d};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${d};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${a}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${u};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${d};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${d};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}exports.MirrorPadProgram=o;
},{"./shader_compiler":"DIKY"}],"wu6r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirrorPadPackedProgram=void 0;var e=require("./packing_util"),n=require("./shader_compiler");class t{constructor(t,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map((e,n)=>e[0]+t[n]+e[1]);const o=t.length,u=(0,n.getCoordsDataType)(o),$=r.map(e=>e[0]).join(","),c=r.map((e,n)=>e[0]+t[n]).join(","),a=(0,e.getChannels)("rc",o),i=(0,e.getChannels)("source",o),l=`${a[o-1]} < ${this.outputShape[o-1]}`,g=1===o?"source":`vec2(${i.slice(-2).join()})`,p="reflect"===s?0:1;let h="";if(1===o){const e=`\n        ${u} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${p};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${p};\n        }\n        source -= start;\n      `;h=`\n        ${u} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${i.join()}), ${g});\n        ${a[o-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${i.join()}), ${g});\n        }\n      `}else{const e=`\n        ${u} source = rc;\n        ${u} lt = ${u}(lessThan(source, start));\n        ${u} gte = ${u}(greaterThanEqual(source, end));\n        ${u} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${p}) +\n                gte * ((end - 1) * 2 - source + ${p});\n        source -= start;\n      `;h=`\n        ${u} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${i.join()}), ${g});\n        ${a[o-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${i.join()}), ${g});\n        }\n        rc = outputLoc;\n        ${a[o-2]} += 1;\n        if(${a[o-2]} < ${this.outputShape[o-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${i.join()}), ${g});\n          ${a[o-1]} += 1;\n          if(${l}) {\n            ${e}\n            result[3] = getChannel(getX(${i.join()}), ${g});\n          }\n        }\n      `}this.userCode=`\n      const ${u} start = ${u}(${$});\n      const ${u} end = ${u}(${c});\n\n      void main() {\n        ${u} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}exports.MirrorPadPackedProgram=t;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"iBor":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPadKernelFunc=exports.mirrorPadConfig=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../mirror_pad_gpu"),o=require("../mirror_pad_packed_gpu");const a=({inputs:a,backend:n,attrs:d})=>{const{x:t}=a,{paddings:i,mode:s}=d,p=(0,r.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new o.MirrorPadPackedProgram(t.shape,i,s):new e.MirrorPadProgram(t.shape,i,s);return n.runWebGLProgram(p,[t],t.dtype)};exports.mirrorPadKernelFunc=a;const n={kernelName:r.MirrorPad,backendName:"webgl",kernelFunc:a};exports.mirrorPadConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../mirror_pad_gpu":"hmnb","../mirror_pad_packed_gpu":"wu6r"}],"B26M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modConfig=exports.mod=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_packed_gpu"),n=require("../kernel_utils/kernel_funcs_utils");const o="if (b == 0.0) return NAN;\n  return mod(a, b);",t="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+r.CHECK_NAN_SNIPPET+"\n  return result;\n",s=(0,n.binaryKernelFunc)({opSnippet:o,packedOpSnippet:t});exports.mod=s;const u={kernelName:e.Mod,backendName:"webgl",kernelFunc:s};exports.modConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_packed_gpu":"MEci","../kernel_utils/kernel_funcs_utils":"uLeB"}],"j5oG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultinomialProgram=void 0;class t{constructor(t,e,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}}exports.MultinomialProgram=t;
},{}],"aUUN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.realDivConfig=exports.realDiv=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",l=(0,n.binaryKernelFunc)({opSnippet:r,packedOpSnippet:t,checkOutOfBounds:!0});exports.realDiv=l;const u={kernelName:e.RealDiv,backendName:"webgl",kernelFunc:l};exports.realDivConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"MkXb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subConfig=exports.sub=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),s=require("../kernel_utils/shared");const n="return a - b;",u=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:n,supportsComplex:!0,cpuKernelImpl:s.subImplCPU});exports.sub=u;const t={kernelName:e.Sub,backendName:"webgl",kernelFunc:u};exports.subConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"YZuw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=o,exports.softmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Exp"),t=require("./Max"),n=require("./RealDiv"),r=require("./Reshape"),a=require("./Sub"),i=require("./Sum");function o(o){const{inputs:p,backend:d,attrs:u}=o,{logits:m}=p,{dim:x}=u,c=e.util.parseAxisParam([x],m.shape),b=(0,t.max)({inputs:{x:m},backend:d,attrs:{reductionIndices:c,keepDims:!1}}),f=e.backend_util.expandShapeToKeepDim(b.shape,c),k=(0,r.reshape)({inputs:{x:b},backend:d,attrs:{shape:f}}),I=(0,a.sub)({inputs:{a:m,b:k},backend:d}),l=(0,s.exp)({inputs:{x:I},backend:d}),h=(0,i.sum)({inputs:{x:l},backend:d,attrs:{axis:c,keepDims:!1}}),q=(0,r.reshape)({inputs:{x:h},backend:d,attrs:{shape:f}}),T=(0,n.realDiv)({inputs:{a:l,b:q},backend:d});return d.disposeIntermediateTensorInfo(b),d.disposeIntermediateTensorInfo(k),d.disposeIntermediateTensorInfo(I),d.disposeIntermediateTensorInfo(l),d.disposeIntermediateTensorInfo(h),d.disposeIntermediateTensorInfo(q),T}const p={kernelName:e.Softmax,backendName:"webgl",kernelFunc:o};exports.softmaxConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./Exp":"gRCN","./Max":"SOPS","./RealDiv":"aUUN","./Reshape":"k4TP","./Sub":"MkXb","./Sum":"RVri"}],"Zmu3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=o,exports.multinomialConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../multinomial_gpu"),n=require("./Softmax");function o(e){const{inputs:o,backend:i,attrs:r}=e,{logits:s}=o,{numSamples:a,seed:l,normalized:m}=r,u=m?s:(0,n.softmax)({inputs:{logits:s},backend:i,attrs:{dim:s.shape.length-1}}),p=u.shape[0],d=u.shape[1],c=new t.MultinomialProgram(p,d,a),f=[[l]],g=i.runWebGLProgram(c,[u],"int32",f);return m||i.disposeIntermediateTensorInfo(u),g}const i={kernelName:e.Multinomial,backendName:"webgl",kernelFunc:o};exports.multinomialConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../multinomial_gpu":"j5oG","./Softmax":"YZuw"}],"Tjo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=a,exports.negConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),n=require("../unaryop_gpu"),t=require("../unaryop_packed_gpu");const o="return -x;";function a(a){const{inputs:s,backend:u}=a,{x:p}=s;if(u.shouldExecuteOnCPU([p])){const e=u.texData.get(p.dataId),[n,t]=(0,r.negImplCPU)(e.values,p.shape,p.dtype);return u.makeTensorInfo(t,p.dtype,n)}let g;return g=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new t.UnaryOpPackedProgram(p.shape,o):new n.UnaryOpProgram(p.shape,o),u.runWebGLProgram(g,[p],p.dtype)}const s={kernelName:e.Neg,backendName:"webgl",kernelFunc:a};exports.negConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../unaryop_gpu":"uzBV","../unaryop_packed_gpu":"yBSN"}],"GVyX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3=s,exports.nonMaxSuppressionV3Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV3Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:c,scoreThreshold:u}=t,d=r.readSync(a.dataId),l=r.readSync(i.dataId),{selectedIndices:x}=n(d,l,p,c,u);return r.makeTensorInfo([x.length],"int32",new Int32Array(x))}const o={kernelName:e.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV3Config=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"DAkH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV4=s,exports.nonMaxSuppressionV4Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV4Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:c}=t,l=r.readSync(a.dataId),x=r.readSync(i.dataId),{selectedIndices:S,validOutputs:f}=n(l,x,p,u,d,c);return[r.makeTensorInfo([S.length],"int32",new Int32Array(S)),r.makeTensorInfo([],"int32",new Int32Array([f]))]}const o={kernelName:e.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV4Config=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"VwrN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV5=s,exports.nonMaxSuppressionV5Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV5Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:l,scoreThreshold:c,softNmsSigma:d}=t,u=r.readSync(a.dataId),x=r.readSync(i.dataId),f=p,S=l,k=c,m=d,{selectedIndices:h,selectedScores:I}=n(u,x,f,S,k,m);return[r.makeTensorInfo([h.length],"int32",new Int32Array(h)),r.makeTensorInfo([I.length],"float32",new Float32Array(I))]}const o={kernelName:e.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV5Config=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"Nv1m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OneHotProgram=void 0;class o{constructor(o,t,e,s){this.variableNames=["indices"],this.outputShape=[o,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${s}), float(${e}),\n                      float(index == coords.y)));\n      }\n    `}}exports.OneHotProgram=o;
},{}],"wBT7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHotConfig=exports.oneHot=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../onehot_gpu"),t=require("./Reshape");const n=n=>{const{inputs:r,backend:s,attrs:a}=n,{indices:p}=r,{depth:i,onValue:u,offValue:d}=a,c=e.util.sizeFromShape(p.shape),h=new o.OneHotProgram(c,i,u,d),f=(0,t.reshape)({inputs:{x:p},backend:s,attrs:{shape:[c]}}),l=s.runWebGLProgram(h,[f],p.dtype);s.disposeIntermediateTensorInfo(f);const b=[...p.shape,i],m=(0,t.reshape)({inputs:{x:l},backend:s,attrs:{shape:b}});return s.disposeIntermediateTensorInfo(l),m};exports.oneHot=n;const r={kernelName:e.OneHot,backendName:"webgl",kernelFunc:n};exports.oneHotConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../onehot_gpu":"Nv1m","./Reshape":"k4TP"}],"PG0L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=i,exports.zerosLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Complex"),r=require("./Fill"),t=require("./Imag"),s=require("./Real");function i(e){const{inputs:o,backend:a}=e,{x:p}=o;if("complex64"===p.dtype){const e=(0,s.real)({inputs:{input:p},backend:a}),r=i({inputs:{x:e},backend:a}),o=(0,t.imag)({inputs:{input:p},backend:a}),d=i({inputs:{x:o},backend:a}),u=(0,n.complex)({inputs:{real:r,imag:d},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(r),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(d),u}return(0,r.fill)({attrs:{shape:p.shape,dtype:p.dtype,value:"string"===p.dtype?"":0},backend:a})}const o={kernelName:e.ZerosLike,backendName:"webgl",kernelFunc:i};exports.zerosLikeConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"vWXR","./Fill":"vLYI","./Imag":"U9t0","./Real":"mH9E"}],"VyEl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=o,exports.onesLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Complex"),r=require("./Fill"),i=require("./Imag"),s=require("./Real"),t=require("./ZerosLike");function o(e){const{inputs:p,backend:a}=e,{x:d}=p;if("string"===d.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===d.dtype){const e=(0,s.real)({inputs:{input:d},backend:a}),r=o({inputs:{x:e},backend:a}),p=(0,i.imag)({inputs:{input:d},backend:a}),u=(0,t.zerosLike)({inputs:{x:p},backend:a}),c=(0,n.complex)({inputs:{real:r,imag:u},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(r),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(u),c}return(0,r.fill)({attrs:{shape:d.shape,dtype:d.dtype,value:1},backend:a})}const p={kernelName:e.OnesLike,backendName:"webgl",kernelFunc:o};exports.onesLikeConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./Complex":"vWXR","./Fill":"vLYI","./Imag":"U9t0","./Real":"mH9E","./ZerosLike":"PG0L"}],"pf3x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pack=a,exports.packConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat"),s=require("./ExpandDims");function a(a){const{inputs:n,backend:r,attrs:c}=a,{axis:i}=c;if(1===n.length)return(0,s.expandDims)({inputs:{input:n[0]},backend:r,attrs:{dim:i}});const o=n[0].shape,p=n[0].dtype;n.forEach(t=>{e.util.assertShapesMatch(o,t.shape,"All tensors passed to stack must have matching shapes"),e.util.assert(p===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],d=n.map(e=>{const t=(0,s.expandDims)({inputs:{input:e},backend:r,attrs:{dim:i}});return u.push(t),t}),h=(0,t.concat)({inputs:d,backend:r,attrs:{axis:i}});return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),h}const n={kernelName:e.Pack,backendName:"webgl",kernelFunc:a};exports.packConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Concat":"SH0J","./ExpandDims":"LRvM"}],"psrI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PadProgram=void 0;var t=require("./shader_compiler");class e{constructor(e,n,o){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((t,n)=>t[0]+e[n]+t[1]);const s=e.length,a=(0,t.getCoordsDataType)(s),r=n.map(t=>t[0]).join(","),u=n.map((t,n)=>t[0]+e[n]).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);this.userCode=1!==s?`\n      ${a} start = ${a}(${r});\n      ${a} end = ${a}(${u});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${a} coords = outC - start;\n          setOutput(getX(${i}));\n        }\n      }\n    `:`\n        int start = ${r};\n        int end = ${u};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}exports.PadProgram=e;
},{"./shader_compiler":"DIKY"}],"oRHP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PadPackedProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class n{constructor(n,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=r.map((t,e)=>t[0]+n[e]+t[1]);const a=n.length,o=(0,e.getCoordsDataType)(a),u=r.map(t=>t[0]).join(","),c=r.map((t,e)=>t[0]+n[e]).join(","),i=(0,t.getChannels)("rc",a),p=(0,t.getChannels)("source",a),$=`${i[a-1]} < ${this.outputShape[a-1]}`,l=1===a?"source":`vec2(${p.slice(-2).join()})`,h=[`${o} rc = outputLoc;`,`${i[a-1]} += 1;\n       if(${$}) {\n      `,1===a?"":`}\n       rc = outputLoc;\n       ${i[a-2]} += 1;\n       if(${i[a-2]} < ${this.outputShape[a-2]}) {`,1===a?"":`  ${i[a-1]} += 1;\n         if(${$}) {`],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let t=0,e=1===a?2:4;t<e;t++)g+=`\n        ${h[t]}\n        if (${d}) {\n          result[${t}] = float(value);\n        } else {\n          ${o} source = rc - start;\n          result[${t}] = getChannel(getX(${p.join()}), ${l});\n        }\n      `;g+=1===a?"} ":"}}",this.userCode=`\n      const ${o} start = ${o}(${u});\n      const ${o} end = ${o}(${c});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${g}\n        setOutput(result);\n      }\n    `}}exports.PadPackedProgram=n;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"pC66":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2Config=exports.padV2=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../pad_gpu"),a=require("../pad_packed_gpu"),t=require("./Fill");const p=p=>{const{inputs:s,backend:n,attrs:o}=p,{x:d}=s,{paddings:u,constantValue:i}=o;if(0===e.util.sizeFromShape(d.shape)){const e=u.map((e,r)=>e[0]+d.shape[r]+e[1]);return(0,t.fill)({backend:n,attrs:{shape:e,value:i,dtype:d.dtype}})}const c=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a.PadPackedProgram(d.shape,u,i):new r.PadProgram(d.shape,u,i),l=[[i]];return n.runWebGLProgram(c,[d],d.dtype,l)};exports.padV2=p;const s={kernelName:e.PadV2,backendName:"webgl",kernelFunc:p};exports.padV2Config=s;
},{"@tensorflow/tfjs-core":"tc6m","../pad_gpu":"psrI","../pad_packed_gpu":"oRHP","./Fill":"vLYI"}],"hHx4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powConfig=exports.pow=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../binaryop_packed_gpu"),r=require("../kernel_utils/kernel_funcs_utils");const o="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",s="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+n.CHECK_NAN_SNIPPET+"\n  return result;\n",t=(0,r.binaryKernelFunc)({opSnippet:o,packedOpSnippet:s});exports.pow=t;const u={kernelName:e.Pow,backendName:"webgl",kernelFunc:t};exports.powConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","../binaryop_packed_gpu":"MEci","../kernel_utils/kernel_funcs_utils":"uLeB"}],"qRnd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=n,exports.prodConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("../kernel_utils/shared"),r=require("./Reshape"),a=require("./Transpose");function n(n){const{inputs:p,backend:o,attrs:u}=n,{x:i}=p,{axis:d,keepDims:c}=u,l=i.shape.length,h=[],k=e.util.parseAxisParam(d,i.shape);let x=k;const m=e.backend_util.getAxesPermutation(x,l);let b,f=i;if(null!=m&&(f=(0,a.transpose)({inputs:{x:i},backend:o,attrs:{perm:m}}),x=e.backend_util.getInnerMostAxes(x.length,l),h.push(f)),e.backend_util.assertAxesAreInnerMostDims("prod",x,l),o.shouldExecuteOnCPU([f])){const e=o.texData.get(f.dataId).values,{outVals:s,outShape:r,outDtype:a}=(0,t.prodImplCPU)(f.shape,f.dtype,e,x);b=o.makeTensorInfo(r,a,s)}else{const[t,a]=e.backend_util.computeOutAndReduceShapes(f.shape,x),n=e.util.sizeFromShape(a),p=(0,r.reshape)({inputs:{x:f},backend:o,attrs:{shape:[-1,n]}}),u=(0,e.sumOutType)(i.dtype),d=(0,s.reduce)(p,u,"prod",o);b=(0,r.reshape)({inputs:{x:d},backend:o,attrs:{shape:t}}),h.push(p),h.push(d)}if(c){h.push(b);const s=e.backend_util.expandShapeToKeepDim(b.shape,k);b=(0,r.reshape)({inputs:{x:b},backend:o,attrs:{shape:s}})}return h.forEach(e=>o.disposeIntermediateTensorInfo(e)),b}const p={kernelName:e.Prod,backendName:"webgl",kernelFunc:n};exports.prodConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/reduce":"rKxH","../kernel_utils/shared":"tfp0","./Reshape":"k4TP","./Transpose":"hS8R"}],"QYnk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeConfig=exports.range=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");const t=e=>{const{backend:t,attrs:n}=e,{start:s,stop:o,step:a,dtype:g}=n,l=(0,r.rangeImplCPU)(s,o,a,g);return t.makeTensorInfo([l.length],g,l)};exports.range=t;const n={kernelName:e.Range,backendName:"webgl",kernelFunc:t};exports.rangeConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"Pc2w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalConfig=exports.reciprocal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="return 1.0 / x;",c=(0,r.unaryKernelFunc)({opSnippet:o});exports.reciprocal=c;const n={kernelName:e.Reciprocal,backendName:"webgl",kernelFunc:c};exports.reciprocalConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"SV6U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluConfig=exports.relu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const u=n.CHECK_NAN_SNIPPET+"\n  return (x < 0.0) ? 0.0 : x;\n",s="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:u,packedOpSnippet:s});exports.relu=t;const l={kernelName:e.Relu,backendName:"webgl",kernelFunc:t};exports.reluConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"JPeF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6Config=exports.relu6=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const u=n.CHECK_NAN_SNIPPET+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",s="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:u,packedOpSnippet:s});exports.relu6=t;const l={kernelName:e.Relu6,backendName:"webgl",kernelFunc:t};exports.relu6Config=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../unaryop_gpu":"uzBV"}],"BAHS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearProgram=void 0;class e{constructor(e,t,o,c,n){this.variableNames=["A"],this.outputShape=[];const[r,i,s,u]=e;this.outputShape=[r,t,o,u];const a=[c&&t>1?i-1:i,c&&o>1?s-1:s],R=[c&&t>1?t-1:t,c&&o>1?o-1:o];let C;C=n?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${a[0]/R[0]},\n          ${a[1]/R[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${C};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeBilinearProgram=e;
},{}],"QNLw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearPackedProgram=void 0;class e{constructor(e,o,t,n,c){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[r,u,s,l]=e;this.outputShape=[r,o,t,l];const C=[n&&o>1?u-1:u,n&&t>1?s-1:s],a=[n&&o>1?o-1:o,n&&t>1?t-1:t];let i;i=c?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${C[0]/a[0]},\n          ${C[1]/a[1]},\n          ${C[1]/a[1]});\n      const vec3 inputShapeRC = vec3(${u}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${i};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${t-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeBilinearPackedProgram=e;
},{}],"u0TF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=n,exports.resizeBilinearConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_bilinear_gpu"),i=require("../resize_bilinear_packed_gpu");function n(n){const{inputs:s,backend:a,attrs:o}=n,{images:t}=s,{alignCorners:l,halfPixelCenters:u,size:c}=o,[g,p]=c,_=(0,e.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new i.ResizeBilinearPackedProgram(t.shape,g,p,l,u):new r.ResizeBilinearProgram(t.shape,g,p,l,u);return a.runWebGLProgram(_,[t],"float32")}const s={kernelName:e.ResizeBilinear,backendName:"webgl",kernelFunc:n};exports.resizeBilinearConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../resize_bilinear_gpu":"BAHS","../resize_bilinear_packed_gpu":"QNLw"}],"bHYm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearBackpropProgram=void 0;class t{constructor(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,i]=n,[,d,r]=t,a=[e&&d>1?o-1:o,e&&r>1?i-1:i],f=[e&&d>1?d-1:d,e&&r>1?r-1:r],l=a[0]/f[0],s=a[1]/f[1],x=1/l,c=1/s,p=2*Math.ceil(x)+2,y=2*Math.ceil(c)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${l});\n        const float widthScale = float(${s});\n\n        const float invHeightScale = float(${x});\n        const float invWidthScale = float(${c});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${y});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${d}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${r}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}exports.ResizeBilinearBackpropProgram=t;
},{}],"bVdd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearGrad=i,exports.resizeBilinearGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_bilinear_backprop_gpu");function i(e){const{inputs:i,backend:a,attrs:n}=e,{images:s,dy:o}=i,{alignCorners:t}=n,p=new r.ResizeBilinearBackpropProgram(o.shape,s.shape,t);return a.runWebGLProgram(p,[o],o.dtype)}const a={kernelName:e.ResizeBilinearGrad,backendName:"webgl",kernelFunc:i};exports.resizeBilinearGradConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../resize_bilinear_backprop_gpu":"bHYm"}],"T9BX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeNearestNeighborProgram=void 0;class e{constructor(e,t,o,n,r){this.variableNames=["A"],this.outputShape=[];const[s,c,i,u]=e;this.outputShape=[s,t,o,u];const a=[n&&t>1?c-1:c,n&&o>1?i-1:i],v=[n&&t>1?t-1:t,n&&o>1?o-1:o],p=n?"0.5":"0.0";let R;R=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${a[0]/v[0]},\n          ${a[1]/v[1]});\n      const vec2 inputShapeRC = vec2(${c}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${R};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeNearestNeighborProgram=e;
},{}],"O3Cm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeNearestNeighborPackedProgram=void 0;class e{constructor(e,t,n,o,c){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,r,a,u]=e;this.outputShape=[s,t,n,u];const i=[o&&t>1?r-1:r,o&&n>1?a-1:a],l=[o&&t>1?t-1:t,o&&n>1?n-1:n],d=o?"0.5":"0.0";let v;v=c?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${i[0]/l[0]},\n          ${i[1]/l[1]},\n          ${i[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${r}.0, ${a}.0,\n                                     ${a}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${v};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${u-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeNearestNeighborPackedProgram=e;
},{}],"UWlN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=i,exports.resizeNearestNeighborConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_nearest_neighbor_gpu"),s=require("../resize_nearest_neighbor_packed_gpu");function i(i){const{inputs:o,backend:t,attrs:n}=i,{images:a}=o,{alignCorners:g,halfPixelCenters:N,size:b}=n,[u,p]=b,_=(0,e.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new s.ResizeNearestNeighborPackedProgram(a.shape,u,p,g,N):new r.ResizeNearestNeighborProgram(a.shape,u,p,g,N);return t.runWebGLProgram(_,[a],a.dtype)}const o={kernelName:e.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:i};exports.resizeNearestNeighborConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../resize_nearest_neighbor_gpu":"T9BX","../resize_nearest_neighbor_packed_gpu":"O3Cm"}],"hkPU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeNearestNeigborBackpropProgram=void 0;class t{constructor(t,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,e,a]=n,[,r,i]=t,s=[o&&r>1?e-1:e,o&&i>1?a-1:a],f=[o&&r>1?r-1:r,o&&i>1?i-1:i],l=s[0]/f[0],c=s[1]/f[1],d=1/l,u=1/c,y=2*Math.ceil(d)+2,h=2*Math.ceil(u)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${l});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${u});\n\n        const int winHeight = int(${y});\n        const int winWidth = int(${h});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${r}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${f[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${f[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${e}) - 1),\n                ${o} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${a}) - 1),\n                ${o} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}exports.ResizeNearestNeigborBackpropProgram=t;
},{}],"V6wq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighborGrad=s,exports.resizeNearestNeighborGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_nearest_neighbor_backprop_gpu");function s(e){const{inputs:s,backend:o,attrs:a}=e,{images:t,dy:i}=s,{alignCorners:n}=a,g=new r.ResizeNearestNeigborBackpropProgram(i.shape,t.shape,n);return o.runWebGLProgram(g,[i],i.dtype)}const o={kernelName:e.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:s};exports.resizeNearestNeighborGradConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../resize_nearest_neighbor_backprop_gpu":"hkPU"}],"dGqg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReverseProgram=void 0;var e=require("./shader_compiler");class o{constructor(o,t){this.variableNames=["x"];const r=o.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=o,1===r)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${o[0]} - coord - 1));\n        }\n      `);const s=o.map((e,r)=>(e=>-1!==t.indexOf(e)&&1!==o[e]?`${o[e]} - coords[${e}] - 1`:`coords[${e}]`)(r)).join(","),n=(0,e.getCoordsDataType)(r);this.userCode=`\n      void main() {\n        ${n} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}exports.ReverseProgram=o;
},{"./shader_compiler":"DIKY"}],"b6t2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReversePackedProgram=void 0;var e=require("./packing_util"),t=require("./shader_compiler");class n{constructor(n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=n.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=n;const u=(0,e.getChannels)("rc",s),i=`${u[s-1]} + 1 < ${this.outputShape[s-1]}`,o=`${u[s-2]} + 1 < ${this.outputShape[s-2]}`,c=(0,t.getCoordsDataType)(s);function a(e){const t=n.map((t,s)=>(function(e,t){return-1!==r.indexOf(e)&&1!==n[e]?`${n[e]} - ${t[e]} - 1`:`${t[e]}`})(s,e));return`getChannel(getX(${t.join(",")}), vec2(${t.slice(-2).join(",")}))`}this.userCode=1===s?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${n[0]} - rc - 1),\n            ${n[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),\n                ${n[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${c} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return a(e)}(u.slice())};\n          if(${i}){\n            result.g = ${function(e){return e[s-1]="("+e[s-1]+" + 1)",a(e)}(u.slice())};\n          }\n          if(${o}) {\n            result.b = ${function(e){return e[s-2]="("+e[s-2]+" + 1)",a(e)}(u.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[s-1]="("+e[s-1]+" + 1)",e[s-2]="("+e[s-2]+" + 1)",a(e)}(u.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}exports.ReversePackedProgram=n;
},{"./packing_util":"Axn8","./shader_compiler":"DIKY"}],"AqaL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=n,exports.reverseConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../reverse_gpu"),s=require("../reverse_packed_gpu"),t=require("./Identity");function n(n){const{inputs:o,backend:a,attrs:i}=n,{x:u}=o,{dims:p}=i,c=u.shape.length,d=e.util.parseAxisParam(p,u.shape);if(0===c)return(0,t.identity)({inputs:{x:u},backend:a});const v=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s.ReversePackedProgram(u.shape,d):new r.ReverseProgram(u.shape,d);return a.runWebGLProgram(v,[u],u.dtype)}const o={kernelName:e.Reverse,backendName:"webgl",kernelFunc:n};exports.reverseConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../reverse_gpu":"dGqg","../reverse_packed_gpu":"b6t2","./Identity":"Gwwj"}],"MkU1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RotateProgram=void 0;class o{constructor(o,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const a=o[1],r=o[2];this.outputShape=o;let e="";e="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${e}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${a}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}exports.RotateProgram=o;
},{}],"RJ8j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffsetConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../rotate_gpu");const r={kernelName:e.RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:r,attrs:a,backend:o})=>{const{image:s}=r,{radians:n,fillValue:i,center:f}=a,u=o,c=new t.RotateProgram(s.shape,i),[l,p]=e.backend_util.getImageCenter(f,s.shape[1],s.shape[2]),g=[[l,p,Math.sin(n),Math.cos(n)]];return u.runWebGLProgram(c,[s],s.dtype,g)}};exports.rotateWithOffsetConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../rotate_gpu":"MkU1"}],"QlOI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundConfig=exports.round=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",o=(0,n.unaryKernelFunc)({opSnippet:r});exports.round=o;const s={kernelName:e.Round,backendName:"webgl",kernelFunc:o};exports.roundConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"y5S8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtConfig=exports.rsqrt=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),s=require("../kernel_utils/shared");const t="return inversesqrt(x);",n=(0,r.unaryKernelFunc)({opSnippet:t,cpuKernelImpl:s.rsqrtImplCPU});exports.rsqrt=n;const l={kernelName:e.Rsqrt,backendName:"webgl",kernelFunc:n};exports.rsqrtConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"ugST":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,n,o,s,r,d,i=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=d;const a=(0,e.getCoordsDataType)(r.length),u=(0,e.getCoordsDataType)(d.length);let l="";1===o?l="i":2===o&&(l="i, j");const c=`getIndices(${l})`;let f="";1===s?f="i":2===s&&(f="i, coords[1]");const p=`getUpdates(${f})`,$=n>1?"strides[j]":"strides";this.userCode=`\n        ${a} strides = ${a}(${r});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${n}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${$};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${p};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}exports.ScatterProgram=t;
},{"./shader_compiler":"DIKY"}],"ibAo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterNd=r,exports.scatterNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../scatter_gpu"),s=require("./Reshape");function r(r){const{inputs:n,backend:a,attrs:o}=r,{indices:i,updates:p}=n,{shape:d}=o,{sliceRank:c,numUpdates:u,sliceSize:l,strides:f,outputSize:h}=e.backend_util.calculateShapes(p,i,d),k=[h/l,l];if(0===h)return a.makeTensorInfo(d,i.dtype);const m=(0,s.reshape)({inputs:{x:i},backend:a,attrs:{shape:[u,c]}}),I=(0,s.reshape)({inputs:{x:p},backend:a,attrs:{shape:[u,l]}}),b=a.makeTensorInfo([],"float32",new Float32Array([0])),g=new t.ScatterProgram(u,c,m.shape.length,I.shape.length,f,k),x=a.runWebGLProgram(g,[I,m,b],I.dtype),N=(0,s.reshape)({inputs:{x:x},backend:a,attrs:{shape:d}});return a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(b),N}const n={kernelName:e.ScatterNd,backendName:"webgl",kernelFunc:r};exports.scatterNdConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../scatter_gpu":"ugST","./Reshape":"k4TP"}],"CDzy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,r,s){let o,n;if(this.variableNames=["c","a","b"],this.outputShape=r,s>4)throw Error(`Where for rank ${s} is not yet supported`);if(1===s)n="resRC",o="resRC";else{const e=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[];for(let o=0;o<r.length;o++)a.push(`${e[o]}`),o<t&&s.push(`${e[o]}`);o=s.join(),n=a.join()}const a=(0,e.getCoordsDataType)(s);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${o});\n        if (cVal >= 1.0) {\n          setOutput(getA(${n}));\n        } else {\n          setOutput(getB(${n}));\n        }\n      }\n    `}}exports.SelectProgram=t;
},{"./shader_compiler":"DIKY"}],"I7xd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=r,exports.selectConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../select_gpu");function r(r){const{inputs:n,backend:s}=r,{condition:o,t:c,e:l}=n,p=new t.SelectProgram(o.shape.length,c.shape,c.shape.length);return s.runWebGLProgram(p,[o,c,l],(0,e.upcastType)(c.dtype,l.dtype))}const n={kernelName:e.Select,backendName:"webgl",kernelFunc:r};exports.selectConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../select_gpu":"CDzy"}],"PKN0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluConfig=exports.selu=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${e.backend_util.SELU_SCALEALPHA};\n  float scale = ${e.backend_util.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`,l=(0,n.unaryKernelFunc)({opSnippet:t});exports.selu=l;const r={kernelName:e.Selu,backendName:"webgl",kernelFunc:l};exports.seluConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"m5AY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidConfig=exports.sigmoid=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),i=require("../kernel_utils/shared");const o="return 1.0 / (1.0 + exp(-1.0 * x));",s=(0,r.unaryKernelFunc)({opSnippet:o,packedOpSnippet:o,cpuKernelImpl:i.sigmoidImplCPU});exports.sigmoid=s;const n={kernelName:e.Sigmoid,backendName:"webgl",kernelFunc:s};exports.sigmoidConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"zXMg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signConfig=exports.sign=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sign=s;const i={kernelName:e.Sign,backendName:"webgl",kernelFunc:s};exports.signConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"mypX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinConfig=exports.sin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r=n.CHECK_NAN_SNIPPET_UNARY+"\n  return sin(x);\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sin=s;const t={kernelName:e.Sin,backendName:"webgl",kernelFunc:s};exports.sinConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"X9PA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhConfig=exports.sinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sinh=s;const t={kernelName:e.Sinh,backendName:"webgl",kernelFunc:s};exports.sinhConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"lUJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusConfig=exports.softplus=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../kernel_utils/kernel_funcs_utils");const l="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",n=(0,o.unaryKernelFunc)({opSnippet:l});exports.softplus=n;const s={kernelName:e.Softplus,backendName:"webgl",kernelFunc:n};exports.softplusConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"zeUh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchNDConfig=exports.spaceToBatchND=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./PadV2"),s=require("./Reshape"),a=require("./Transpose");const n=n=>{const{inputs:r,backend:p,attrs:c}=n,{x:o}=r,{blockShape:h,paddings:d}=c;e.util.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const u=h.reduce((e,t)=>e*t),i=[[0,0]];i.push(...d);for(let e=1+h.length;e<o.shape.length;++e)i.push([0,0]);const l=[],b=(0,t.padV2)({inputs:{x:o},backend:p,attrs:{paddings:i,constantValue:0}}),k=e.backend_util.getReshaped(b.shape,h,u,!1),g=e.backend_util.getPermuted(k.length,h.length,!1),x=e.backend_util.getReshapedPermuted(b.shape,h,u,!1),f=(0,s.reshape)({inputs:{x:b},backend:p,attrs:{shape:k}}),m=(0,a.transpose)({inputs:{x:f},backend:p,attrs:{perm:g}}),N=(0,s.reshape)({inputs:{x:m},backend:p,attrs:{shape:x}});return l.push(b),l.push(f),l.push(m),l.forEach(e=>p.disposeIntermediateTensorInfo(e)),N};exports.spaceToBatchND=n;const r={kernelName:e.SpaceToBatchND,backendName:"webgl",kernelFunc:n};exports.spaceToBatchNDConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./PadV2":"pC66","./Reshape":"k4TP","./Transpose":"hS8R"}],"y85v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseFillEmptyRows=r,exports.sparseFillEmptyRowsConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../kernel_utils/shared");function r(e){const{inputs:r,backend:s}=e,{indices:t,values:n,denseShape:o,defaultValue:p}=r;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${o.shape}`);if(2!==t.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${t.shape}`);if(1!==n.shape.length)throw new Error(`Values must be a vector, saw:\n         ${n.shape}`);if(0!==p.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${p.shape}`);const l=s.readSync(t.dataId),d=s.readSync(n.dataId),i=s.readSync(o.dataId),h=s.readSync(p.dataId)[0],[u,w,c,m,y]=(0,a.sparseFillEmptyRowsImplCPU)(l,t.shape,t.dtype,d,n.dtype,i,h);return[s.makeTensorInfo(w,t.dtype,u),s.makeTensorInfo([w[0]],n.dtype,c),s.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(e=>Number(e)))),s.makeTensorInfo([y.length],t.dtype,new Int32Array(y))]}const s={kernelName:e.SparseFillEmptyRows,backendName:"webgl",kernelFunc:r};exports.sparseFillEmptyRowsConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"qqMY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseReshape=a,exports.sparseReshapeConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");function a(e){const{inputs:a,backend:s}=e,{inputIndices:t,inputShape:n,newShape:p}=a;if(2!==t.shape.length)throw new Error(`Input indices should be a matrix but received shape ${t.shape}`);if(1!==n.shape.length)throw new Error(`Input shape should be a vector but received shape ${n.shape}`);if(1!==p.shape.length)throw new Error(`Target shape should be a vector but received shape ${p.shape}`);const o=Array.from(s.readSync(n.dataId)),h=s.readSync(t.dataId),d=Array.from(s.readSync(p.dataId)),[i,c,u]=(0,r.sparseReshapeImplCPU)(h,t.shape,t.dtype,o,d);return[s.makeTensorInfo(c,t.dtype,i),s.makeTensorInfo([u.length],p.dtype,new Int32Array(u))]}const s={kernelName:e.SparseReshape,backendName:"webgl",kernelFunc:a};exports.sparseReshapeConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"L3Am":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentMean=n,exports.sparseSegmentMeanConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");function n(e){const{inputs:n,backend:a}=e,{data:t,indices:s,segmentIds:o}=n;if(t.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${s.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${o.shape}`);const d=a.readSync(t.dataId),i=a.readSync(s.dataId),c=a.readSync(o.dataId),[p,h]=(0,r.sparseSegmentReductionImplCPU)(d,t.shape,t.dtype,i,c,!0);return a.makeTensorInfo(h,t.dtype,p)}const a={kernelName:e.SparseSegmentMean,backendName:"webgl",kernelFunc:n};exports.sparseSegmentMeanConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"Rv9P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentSum=t,exports.sparseSegmentSumConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:s}=e,{data:n,indices:a,segmentIds:o}=t;if(n.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${a.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${o.shape}`);const d=s.readSync(n.dataId),i=s.readSync(a.dataId),c=s.readSync(o.dataId),[p,u]=(0,r.sparseSegmentReductionImplCPU)(d,n.shape,n.dtype,i,c);return s.makeTensorInfo(u,n.dtype,p)}const s={kernelName:e.SparseSegmentSum,backendName:"webgl",kernelFunc:t};exports.sparseSegmentSumConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"VCsw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=t,exports.sparseToDenseConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../scatter_gpu"),r=require("./Reshape");function t(t){const{inputs:a,backend:n,attrs:o}=t,{sparseIndices:p,sparseValues:u,defaultValue:i}=a,{outputShape:c}=o,{sliceRank:l,numUpdates:d,strides:h,outputSize:f}=e.backend_util.calculateShapes(u,p,c),g=new s.ScatterProgram(d,l,p.shape.length,u.shape.length,h,[f,1],!1),b=n.runWebGLProgram(g,[u,p,i],u.dtype),k=(0,r.reshape)({inputs:{x:b},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(b),k}const a={kernelName:e.SparseToDense,backendName:"webgl",kernelFunc:t};exports.sparseToDenseConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../scatter_gpu":"ugST","./Reshape":"k4TP"}],"Gbq7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitV=s,exports.splitVConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Slice");function s(s){const{inputs:r,backend:i,attrs:n}=s,{x:a}=r,{numOrSizeSplits:l,axis:p}=n,o=e.util.parseAxisParam(p,a.shape)[0],c=e.backend_util.prepareSplitSize(a,l,o),u=a.shape.length,x=new Array(u).fill(0),b=a.shape.slice();return c.map(e=>{const s=[...b];s[o]=e;const r=(0,t.slice)({inputs:{x:a},backend:i,attrs:{begin:x,size:s}});return x[o]+=e,r})}const r={kernelName:e.SplitV,backendName:"webgl",kernelFunc:s};exports.splitVConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Slice":"uanA"}],"G8Yg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtConfig=exports.sqrt=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const s="return sqrt(x);",n=(0,r.unaryKernelFunc)({opSnippet:s,packedOpSnippet:s,cpuKernelImpl:t.sqrtImplCPU});exports.sqrt=n;const l={kernelName:e.Sqrt,backendName:"webgl",kernelFunc:n};exports.sqrtConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB","../kernel_utils/shared":"tfp0"}],"aHQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareConfig=exports.square=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const s="return x * x;",n=(0,r.unaryKernelFunc)({opSnippet:s});exports.square=n;const t={kernelName:e.Square,backendName:"webgl",kernelFunc:n};exports.squareConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"OSij":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceConfig=exports.squaredDifference=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return (a - b) * (a - b);",s=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:n});exports.squaredDifference=s;const t={kernelName:e.SquaredDifference,backendName:"webgl",kernelFunc:s};exports.squaredDifferenceConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"WvS0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.step=t,exports.stepConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../unaryop_gpu");function t({inputs:e,attrs:t,backend:n}){const{x:o}=e,s=r.CHECK_NAN_SNIPPET+`\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,p=new r.UnaryOpProgram(o.shape,s);return n.runWebGLProgram(p,[o],o.dtype)}const n={kernelName:e.Step,backendName:"webgl",kernelFunc:t};exports.stepConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../unaryop_gpu":"uzBV"}],"N1kZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StridedSliceProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,i=(0,e.getCoordsDataType)(r.length),d=(0,e.getCoordsDataType)(r.length);let n="";if(1===o)n="coords * strides + begin";else{let e=0;n=r.map((t,s)=>(e++,1===r.length?`coords * strides[${s}] + begin[${s}]`:`coords[${e-1}] * strides[${s}] + begin[${s}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${s});\n\n      void main() {\n        ${d} coords = getOutputCoords();\n        setOutput(getX(${n}));\n      }\n    `}}exports.StridedSliceProgram=t;
},{"./shader_compiler":"DIKY"}],"s4SJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=n,exports.stridedSliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/shared"),t=require("../strided_slice_gpu"),i=require("./Reshape"),r=require("./Slice");function n(n){const{inputs:a,backend:d,attrs:o}=n,{x:p}=a,{begin:l,end:c,strides:u,beginMask:f,endMask:k,ellipsisMask:b,newAxisMask:h,shrinkAxisMask:x}=o,{nonStrided:S,$begin:g,$strides:m,size:I,newShape:M,outShape:_}=e.slice_util.sliceInfo(p.shape,l,c,u,f,k,b,h,x),q=(0,i.reshape)({inputs:{x:p},backend:d,attrs:{shape:M}});let v;if(S){const e=(0,r.slice)({inputs:{x:q},backend:d,attrs:{begin:g,size:I}});v=(0,i.reshape)({inputs:{x:e},backend:d,attrs:{shape:_}}),d.disposeIntermediateTensorInfo(e)}else if(_.some(e=>0===e))v=d.makeTensorInfo(_,p.dtype,[]);else{if(d.shouldExecuteOnCPU([q])){const t=d.texData.get(q.dataId).values,i=(0,e.buffer)(q.shape,q.dtype,t),r=(0,s.stridedSliceImplCPU)(_,i,m,g);v=d.makeTensorInfo(_,q.dtype,r.values)}else{const e=new t.StridedSliceProgram(g,m,_);v=d.runWebGLProgram(e,[q],q.dtype)}}const w=(0,i.reshape)({inputs:{x:v},backend:d,attrs:{shape:_}});return d.disposeIntermediateTensorInfo(q),d.disposeIntermediateTensorInfo(v),w}const a={kernelName:e.StridedSlice,backendName:"webgl",kernelFunc:n};exports.stridedSliceConfig=a;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../strided_slice_gpu":"N1kZ","./Reshape":"k4TP","./Slice":"uanA"}],"jIbJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringNGrams=t,exports.stringNGramsConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:s,attrs:a}=e,{separator:n,nGramWidths:i,leftPad:o,rightPad:d,padWidth:c,preserveShortSequences:l}=a,{data:p,dataSplits:g}=t,m=s.readSync(p.dataId),u=s.readSync(g.dataId),[f,h]=(0,r.stringNGramsImplCPU)(m,u,n,i,o,d,c,l);return[s.makeTensorInfo([f.length],"string",f),s.makeTensorInfo(g.shape,"int32",h)]}const s={kernelName:e.StringNGrams,backendName:"webgl",kernelFunc:t};exports.stringNGramsConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"aFQ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringSplit=r,exports.stringSplitConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared");function r(e){const{inputs:r,backend:n,attrs:s}=e,{skipEmpty:i}=s,{input:o,delimiter:a}=r;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==a.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const p=n.readSync(o.dataId),l=n.readSync(a.dataId)[0],[g,u,d]=(0,t.stringSplitImplCPU)(p,l,i),c=u.length;return[n.makeTensorInfo([c,2],"int32",g),n.makeTensorInfo([c],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const n={kernelName:e.StringSplit,backendName:"webgl",kernelFunc:r};exports.stringSplitConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"OUVd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringToHashBucketFast=r,exports.stringToHashBucketFastConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../kernel_utils/shared");function r(t){const{inputs:r,backend:s,attrs:n}=t,{numBuckets:o}=n,{input:a}=r;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const u=s.readSync(a.dataId),i=(0,e.stringToHashBucketFastImplCPU)(u,o);return s.makeTensorInfo(a.shape,"int32",i)}const s={kernelName:t.StringToHashBucketFast,backendName:"webgl",kernelFunc:r};exports.stringToHashBucketFastConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0"}],"K2EB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanConfig=exports.tan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return tan(x);",t=(0,n.unaryKernelFunc)({opSnippet:r});exports.tan=t;const o={kernelName:e.Tan,backendName:"webgl",kernelFunc:t};exports.tanConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"nmaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhConfig=exports.tanh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",t=(0,n.unaryKernelFunc)({opSnippet:r});exports.tanh=t;const o={kernelName:e.Tanh,backendName:"webgl",kernelFunc:t};exports.tanhConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/kernel_funcs_utils":"uLeB"}],"lZtF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TileProgram=void 0;var e=require("./shader_compiler");class r{constructor(r,s){this.variableNames=["A"];const o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[e]*s[e];this.outputShape=o,this.rank=o.length;const n=(0,e.getCoordsDataType)(this.rank),i=t(r);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function t(e){const r=e.length;if(r>5)throw Error(`Tile for rank ${r} is not yet supported`);if(1===r)return`imod(resRC, ${e[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${t[o]}, ${e[o]})`);return s.join()}exports.TileProgram=r;
},{"./shader_compiler":"DIKY"}],"IeZJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=n,exports.tileConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),t=require("../tile_gpu");function n(n){const{inputs:s,backend:i,attrs:o}=n,{x:a}=s,{reps:l}=o;if("string"===a.dtype||a.shape.length>5){const t=i.readSync(a.dataId),n="string"===a.dtype?t.map(r=>e.util.decodeString(r)):t,s=(0,e.buffer)(a.shape,a.dtype,n),o=(0,r.tileImplCPU)(s,l);return i.makeTensorInfo(o.shape,o.dtype,o.values)}const p=new t.TileProgram(a.shape,l);return i.runWebGLProgram(p,[a],a.dtype)}const s={kernelName:e.Tile,backendName:"webgl",kernelFunc:n};exports.tileConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../tile_gpu":"lZtF"}],"DGmS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SwapProgram=exports.MergeProgram=void 0;class e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}exports.SwapProgram=e;class n{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}exports.MergeProgram=n;
},{}],"nadS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topK=l,exports.topKConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),n=require("../top_k_gpu"),r=require("./Fill"),s=require("./GatherV2"),a=require("./Reshape"),o=require("./Slice");function u(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function i(e){let t=1;for(;t<e;)t*=2;return t}function l(l){const{inputs:p,backend:c,attrs:d}=l,{x:f}=p,{k:h,sorted:k}=d,b=(0,e.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),m=(0,e.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),g=f.shape,_=g[g.length-1];if(c.shouldExecuteOnCPU([f])||_<b||h>m){const e=c.readSync(f.dataId),[n,r]=(0,t.topKImplCPU)(e,g,f.dtype,h,k);return[c.makeTensorInfo(n.shape,n.dtype,n.values),c.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===h)return g[g.length-1]=0,[c.makeTensorInfo(g,f.dtype,[]),c.makeTensorInfo(g,"int32",[])];if(1===_)return[f,(0,r.fill)({attrs:{shape:g,dtype:"int32",value:0},backend:c})];const I=c.texData.get(f.dataId),T=null!==I&&I.isPacked,x=T?c.unpackTensor(f):f,P=e.util.sizeFromShape(g)/_,N=(0,a.reshape)({inputs:{x:x},attrs:{shape:[P,_]},backend:c});T&&u(c,x);const v=i(h),F=i(_);let K=null;const O=()=>null===K?[N,N]:[N,K],S=(e,t,r)=>{const s=O(),a=new n.SwapProgram(r),o=[[_],[null===K?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],i=K;K=c.runWebGLProgram(a,s,"int32",o),u(c,i)};for(let e=1;e<v;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)S(t,n,[P,F])}for(let e=F;e>v;e/=2){const t=O(),r=new n.MergeProgram([P,e/2]),s=[[_],[null===K?1:0],[v]],a=K;K=c.runWebGLProgram(r,t,"int32",s),u(c,a);const o=v/2,i=2*o;for(let e=o;e>=1;e/=2)S(i,e,K.shape)}let q=K;K=(0,o.slice)({inputs:{x:K},backend:c,attrs:{begin:0,size:[P,h]}}),u(c,q);let y=(0,s.gatherV2)({inputs:{x:N,indices:K},backend:c,attrs:{axis:1,batchDims:1}});u(c,N);const D=g.slice(0,-1);D.push(h),q=K,K=(0,a.reshape)({inputs:{x:K},attrs:{shape:D},backend:c}),u(c,q);const C=y;return y=(0,a.reshape)({inputs:{x:y},attrs:{shape:D},backend:c}),u(c,C),[y,K]}const p={kernelName:e.TopK,backendName:"webgl",kernelFunc:l};exports.topKConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../top_k_gpu":"DGmS","./Fill":"vLYI","./GatherV2":"ZQ9T","./Reshape":"k4TP","./Slice":"uanA"}],"p0dN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransformProgram=void 0;class n{constructor(n,o,t,a,l,e){this.variableNames=["Image","Transforms"],this.outputShape=e;const r="nearest"===t?1:2;let i;switch(a){case"constant":i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4;break;default:i=1}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${i} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${i} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${i} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${o}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${l});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${l});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${o}));\n                float mapY = mapCoord(inY, float(${n}));\n\n                if (${r} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}exports.TransformProgram=n;
},{}],"g3s8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform=o,exports.transformConfig=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../transform_gpu");function o(r){const{inputs:o,backend:n,attrs:t}=r,{image:a,transforms:s}=o,{interpolation:f,fillMode:l,fillValue:u,outputShape:i}=t,[m,p,c,g]=a.shape,[d,b]=null!=i?i:[p,c],k=[m,d,b,g],x=new e.TransformProgram(p,c,f,l,u,k);return n.runWebGLProgram(x,[a,s],"float32")}const n={kernelName:r.Transform,backendName:"webgl",kernelFunc:o};exports.transformConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../transform_gpu":"p0dN"}],"Byf5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=o,exports.uniqueConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared"),t=require("../webgl_util");function o(e){const{inputs:o,attrs:r,backend:u}=e,{axis:s}=r,{x:i}=o;(0,t.assertNotComplex)(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=u.readSync(i.dataId),{outputValues:l,outputShape:d,indices:p}=(0,n.uniqueImplCPU)(a,s,i.shape,i.dtype);return[u.makeTensorInfo(d,i.dtype,l),u.makeTensorInfo([p.length],"int32",p)]}const r={kernelName:e.Unique,backendName:"webgl",kernelFunc:o};exports.uniqueConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"tfp0","../webgl_util":"p3g2"}],"Fia1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpack=t,exports.unpackConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Reshape"),s=require("./Slice");function t(e){const{inputs:t,backend:r,attrs:a}=e,{value:o}=t;let{axis:c}=a;c<0&&(c+=o.shape.length);const p=o,i=p.shape.length,l=o.shape[c],u=new Array(i-1);let h=0;for(let n=0;n<i;n++)n!==c&&(u[h++]=p.shape[n]);const f=[],k=new Array(i).fill(0),d=p.shape.slice();d[c]=1;const b=new Array(l);for(let g=0;g<b.length;g++){k[c]=g;const e=(0,s.slice)({inputs:{x:p},backend:r,attrs:{begin:k,size:d}}),t=(0,n.reshape)({inputs:{x:e},backend:r,attrs:{shape:u}});b[g]=t,f.push(e)}return f.forEach(e=>r.disposeIntermediateTensorInfo(e)),b}const r={kernelName:e.Unpack,backendName:"webgl",kernelFunc:t};exports.unpackConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"k4TP","./Slice":"uanA"}],"x8Mt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SegmentOpProgram=void 0;class n{constructor(n,e){this.variableNames=["x","segmentIds"];const t=n.windowSize,i=n.batchSize,a=n.inSize,d=n.numSegments,g=d*Math.ceil(a/t);this.outputShape=[i,g];const I=4*Math.floor(t/4),l=t%4,u="\n        sumValue += dot(values, segFilter);\n    ";let r="";a%t>0&&(r=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `);let c="";a%t>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${r}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${c}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${d})) * float(${t}));\n        int currentSeg = int(mod(float(outIdx), float(${d})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${I}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${I};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}exports.SegmentOpProgram=n;
},{}],"bWqJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=a,exports.unsortedSegmentSumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../segment_gpu"),n=require("./Range"),s=require("./Reshape"),r=require("./Tile"),u=require("./Transpose");function a(a){const{inputs:p,backend:o,attrs:i}=a,{x:m,segmentIds:c}=p,{numSegments:d}=i,l=m.shape.length,g=[];let h=0;const S=e.backend_util.getAxesPermutation([h],l);let b=m;null!=S&&(b=(0,u.transpose)({inputs:{x:m},backend:o,attrs:{perm:S}}),g.push(b),h=e.backend_util.getInnerMostAxes(1,l)[0]);const k=e.backend_util.segment_util.computeOutShape(b.shape,h,d),x=e.util.sizeFromShape([b.shape[h]]),f=(0,s.reshape)({inputs:{x:b},backend:o,attrs:{shape:[-1,x]}});g.push(f);const _=(0,e.sumOutType)(m.dtype),q=(s,u,a,p,i)=>{const m=s.shape[0],c=s.shape[1],d=e.backend_util.segment_util.segOpComputeOptimalWindowSize(c,i),l={windowSize:d,inSize:c,batchSize:m,numSegments:i},h=new t.SegmentOpProgram(l,u),S=o.compileAndRun(h,[s,a],p);if(g.push(S),S.shape[1]===i)return S;const b=(0,n.range)({backend:o,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),k=(0,r.tile)({inputs:{x:b},backend:o,attrs:{reps:[c/d]}});return g.push(b),g.push(k),q(S,u,k,p,i)},w=q(f,"unsortedSegmentSum",c,_,d),O=(0,s.reshape)({inputs:{x:w},backend:o,attrs:{shape:k}});let z=O;if(null!=S){g.push(O);const t=e.backend_util.getUndoAxesPermutation(S);z=(0,u.transpose)({inputs:{x:z},backend:o,attrs:{perm:t}})}return g.forEach(e=>o.disposeIntermediateTensorInfo(e)),z}const p={kernelName:e.UnsortedSegmentSum,backendName:"webgl",kernelFunc:a};exports.unsortedSegmentSumConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","../segment_gpu":"x8Mt","./Range":"QYnk","./Reshape":"k4TP","./Tile":"IeZJ","./Transpose":"hS8R"}],"FAdT":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),r=require("./kernels/_FusedMatMul"),i=require("./kernels/Abs"),n=require("./kernels/Acos"),o=require("./kernels/Acosh"),s=require("./kernels/Add"),l=require("./kernels/AddN"),u=require("./kernels/All"),g=require("./kernels/Any"),a=require("./kernels/ArgMax"),f=require("./kernels/ArgMin"),C=require("./kernels/Asin"),k=require("./kernels/Asinh"),q=require("./kernels/Atan"),t=require("./kernels/Atan2"),p=require("./kernels/Atanh"),c=require("./kernels/AvgPool"),d=require("./kernels/AvgPool3D"),m=require("./kernels/AvgPool3DGrad"),S=require("./kernels/AvgPoolGrad"),h=require("./kernels/BatchMatMul"),D=require("./kernels/BatchNorm"),v=require("./kernels/BatchToSpaceND"),N=require("./kernels/Bincount"),x=require("./kernels/BroadcastArgs"),M=require("./kernels/Cast"),B=require("./kernels/Ceil"),R=require("./kernels/ClipByValue"),A=require("./kernels/Complex"),P=require("./kernels/ComplexAbs"),F=require("./kernels/Concat"),G=require("./kernels/Conv2D"),L=require("./kernels/Conv2DBackpropFilter"),T=require("./kernels/Conv2DBackpropInput"),V=require("./kernels/Conv3D"),E=require("./kernels/Conv3DBackpropFilterV2"),b=require("./kernels/Conv3DBackpropInputV2"),I=require("./kernels/Cos"),w=require("./kernels/Cosh"),y=require("./kernels/CropAndResize"),z=require("./kernels/Cumsum"),O=require("./kernels/DenseBincount"),H=require("./kernels/DepthToSpace"),W=require("./kernels/DepthwiseConv2dNative"),K=require("./kernels/DepthwiseConv2dNativeBackpropFilter"),U=require("./kernels/DepthwiseConv2dNativeBackpropInput"),_=require("./kernels/Diag"),j=require("./kernels/Dilation2D"),Z=require("./kernels/Einsum"),J=require("./kernels/Elu"),Q=require("./kernels/EluGrad"),X=require("./kernels/Equal"),Y=require("./kernels/Erf"),$=require("./kernels/Exp"),ee=require("./kernels/ExpandDims"),re=require("./kernels/Expm1"),ie=require("./kernels/FFT"),ne=require("./kernels/Fill"),oe=require("./kernels/FlipLeftRight"),se=require("./kernels/Floor"),le=require("./kernels/FloorDiv"),ue=require("./kernels/FromPixels"),ge=require("./kernels/FusedConv2D"),ae=require("./kernels/FusedDepthwiseConv2D"),fe=require("./kernels/GatherNd"),Ce=require("./kernels/GatherV2"),ke=require("./kernels/Greater"),qe=require("./kernels/GreaterEqual"),te=require("./kernels/Identity"),pe=require("./kernels/IFFT"),ce=require("./kernels/Imag"),de=require("./kernels/IsFinite"),me=require("./kernels/IsInf"),Se=require("./kernels/IsNaN"),he=require("./kernels/LeakyRelu"),De=require("./kernels/Less"),ve=require("./kernels/LessEqual"),Ne=require("./kernels/LinSpace"),xe=require("./kernels/Log"),Me=require("./kernels/Log1p"),Be=require("./kernels/LogicalAnd"),Re=require("./kernels/LogicalNot"),Ae=require("./kernels/LogicalOr"),Pe=require("./kernels/LRN"),Fe=require("./kernels/LRNGrad"),Ge=require("./kernels/Max"),Le=require("./kernels/Maximum"),Te=require("./kernels/MaxPool"),Ve=require("./kernels/MaxPool3D"),Ee=require("./kernels/MaxPool3DGrad"),be=require("./kernels/MaxPoolGrad"),Ie=require("./kernels/MaxPoolWithArgmax"),we=require("./kernels/Mean"),ye=require("./kernels/Min"),ze=require("./kernels/Minimum"),Oe=require("./kernels/MirrorPad"),He=require("./kernels/Mod"),We=require("./kernels/Multinomial"),Ke=require("./kernels/Multiply"),Ue=require("./kernels/Neg"),_e=require("./kernels/NonMaxSuppressionV3"),je=require("./kernels/NonMaxSuppressionV4"),Ze=require("./kernels/NonMaxSuppressionV5"),Je=require("./kernels/NotEqual"),Qe=require("./kernels/OneHot"),Xe=require("./kernels/OnesLike"),Ye=require("./kernels/Pack"),$e=require("./kernels/PadV2"),er=require("./kernels/Pow"),rr=require("./kernels/Prelu"),ir=require("./kernels/Prod"),nr=require("./kernels/Range"),or=require("./kernels/Real"),sr=require("./kernels/RealDiv"),lr=require("./kernels/Reciprocal"),ur=require("./kernels/Relu"),gr=require("./kernels/Relu6"),ar=require("./kernels/Reshape"),fr=require("./kernels/ResizeBilinear"),Cr=require("./kernels/ResizeBilinearGrad"),kr=require("./kernels/ResizeNearestNeighbor"),qr=require("./kernels/ResizeNearestNeighborGrad"),tr=require("./kernels/Reverse"),pr=require("./kernels/RotateWithOffset"),cr=require("./kernels/Round"),dr=require("./kernels/Rsqrt"),mr=require("./kernels/ScatterNd"),Sr=require("./kernels/Select"),hr=require("./kernels/Selu"),Dr=require("./kernels/Sigmoid"),vr=require("./kernels/Sign"),Nr=require("./kernels/Sin"),xr=require("./kernels/Sinh"),Mr=require("./kernels/Slice"),Br=require("./kernels/Softmax"),Rr=require("./kernels/Softplus"),Ar=require("./kernels/SpaceToBatchND"),Pr=require("./kernels/SparseFillEmptyRows"),Fr=require("./kernels/SparseReshape"),Gr=require("./kernels/SparseSegmentMean"),Lr=require("./kernels/SparseSegmentSum"),Tr=require("./kernels/SparseToDense"),Vr=require("./kernels/SplitV"),Er=require("./kernels/Sqrt"),br=require("./kernels/Square"),Ir=require("./kernels/SquaredDifference"),wr=require("./kernels/Step"),yr=require("./kernels/StridedSlice"),zr=require("./kernels/StringNGrams"),Or=require("./kernels/StringSplit"),Hr=require("./kernels/StringToHashBucketFast"),Wr=require("./kernels/Sub"),Kr=require("./kernels/Sum"),Ur=require("./kernels/Tan"),_r=require("./kernels/Tanh"),jr=require("./kernels/Tile"),Zr=require("./kernels/TopK"),Jr=require("./kernels/Transform"),Qr=require("./kernels/Transpose"),Xr=require("./kernels/Unique"),Yr=require("./kernels/Unpack"),$r=require("./kernels/UnsortedSegmentSum"),ei=require("./kernels/ZerosLike");const ri=[Pe.LRNConfig,Fe.LRNGradConfig,r._fusedMatMulConfig,i.absConfig,n.acosConfig,o.acoshConfig,s.addConfig,l.addNConfig,u.allConfig,g.anyConfig,a.argMaxConfig,f.argMinConfig,C.asinConfig,k.asinhConfig,t.atan2Config,q.atanConfig,p.atanhConfig,d.avgPool3DConfig,c.avgPoolConfig,m.avgPoolGrad3DConfig,S.avgPoolGradConfig,h.batchMatMulConfig,D.batchNormConfig,v.batchToSpaceNDConfig,N.bincountConfig,x.broadcastArgsConfig,M.castConfig,B.ceilConfig,R.clipByValueConfig,P.complexAbsConfig,A.complexConfig,F.concatConfig,L.conv2DBackpropFilterConfig,T.conv2DBackpropInputConfig,G.conv2DConfig,E.conv3DBackpropFilterV2Config,b.conv3DBackpropInputConfig,V.conv3DConfig,I.cosConfig,w.coshConfig,y.cropAndResizeConfig,z.cumsumConfig,O.denseBincountConfig,H.depthToSpaceConfig,K.depthwiseConv2dNativeBackpropFilterConfig,U.depthwiseConv2dNativeBackpropInputConfig,W.depthwiseConv2dNativeConfig,_.diagConfig,j.dilation2DConfig,Z.einsumConfig,J.eluConfig,Q.eluGradConfig,X.equalConfig,Y.erfConfig,$.expConfig,ee.expandDimsConfig,re.expm1Config,ie.fftConfig,ne.fillConfig,oe.flipLeftRightConfig,se.floorConfig,le.floorDivConfig,ue.fromPixelsConfig,ge.fusedConv2DConfig,ae.fusedDepthwiseConv2DConfig,fe.gatherNdConfig,Ce.gatherV2Config,ke.greaterConfig,qe.greaterEqualConfig,te.identityConfig,pe.ifftConfig,ce.imagConfig,de.isFiniteConfig,me.isInfConfig,Se.isNaNConfig,he.leakyReluConfig,De.lessConfig,ve.lessEqualConfig,Ne.linSpaceConfig,Me.log1pConfig,xe.logConfig,Be.logicalAndConfig,Re.logicalNotConfig,Ae.logicalOrConfig,Ge.maxConfig,Ve.maxPool3DConfig,Te.maxPoolConfig,Ee.maxPoolGrad3DConfig,be.maxPoolGradConfig,Ie.maxPoolWithArgmaxConfig,Le.maximumConfig,we.meanConfig,ye.minConfig,ze.minimumConfig,Oe.mirrorPadConfig,He.modConfig,We.multinomialConfig,Ke.multiplyConfig,Ue.negConfig,_e.nonMaxSuppressionV3Config,je.nonMaxSuppressionV4Config,Ze.nonMaxSuppressionV5Config,Je.notEqualConfig,Qe.oneHotConfig,Xe.onesLikeConfig,Ye.packConfig,$e.padV2Config,er.powConfig,rr.preluConfig,ir.prodConfig,nr.rangeConfig,or.realConfig,sr.realDivConfig,lr.reciprocalConfig,gr.relu6Config,ur.reluConfig,ar.reshapeConfig,fr.resizeBilinearConfig,Cr.resizeBilinearGradConfig,kr.resizeNearestNeighborConfig,qr.resizeNearestNeighborGradConfig,tr.reverseConfig,pr.rotateWithOffsetConfig,cr.roundConfig,dr.rsqrtConfig,mr.scatterNdConfig,Sr.selectConfig,hr.seluConfig,Dr.sigmoidConfig,vr.signConfig,Nr.sinConfig,xr.sinhConfig,Mr.sliceConfig,Br.softmaxConfig,Rr.softplusConfig,Ar.spaceToBatchNDConfig,Pr.sparseFillEmptyRowsConfig,Fr.sparseReshapeConfig,Gr.sparseSegmentMeanConfig,Lr.sparseSegmentSumConfig,Tr.sparseToDenseConfig,Vr.splitVConfig,Er.sqrtConfig,br.squareConfig,Ir.squaredDifferenceConfig,wr.stepConfig,yr.stridedSliceConfig,zr.stringNGramsConfig,Or.stringSplitConfig,Hr.stringToHashBucketFastConfig,Wr.subConfig,Kr.sumConfig,Ur.tanConfig,_r.tanhConfig,jr.tileConfig,Zr.topKConfig,Jr.transformConfig,Qr.transposeConfig,Xr.uniqueConfig,Yr.unpackConfig,$r.unsortedSegmentSumConfig,ei.zerosLikeConfig];for(const ii of ri)(0,e.registerKernel)(ii);
},{"@tensorflow/tfjs-core":"tc6m","./kernels/_FusedMatMul":"xSMk","./kernels/Abs":"cuxj","./kernels/Acos":"FCN5","./kernels/Acosh":"WORC","./kernels/Add":"qsoR","./kernels/AddN":"hFFr","./kernels/All":"n0H3","./kernels/Any":"VDwi","./kernels/ArgMax":"ZL6O","./kernels/ArgMin":"cvsE","./kernels/Asin":"UkOR","./kernels/Asinh":"HHor","./kernels/Atan":"zhx4","./kernels/Atan2":"kDp7","./kernels/Atanh":"b0w5","./kernels/AvgPool":"LyOc","./kernels/AvgPool3D":"ZH0i","./kernels/AvgPool3DGrad":"XJOJ","./kernels/AvgPoolGrad":"EkY0","./kernels/BatchMatMul":"trp3","./kernels/BatchNorm":"f4ut","./kernels/BatchToSpaceND":"CeXw","./kernels/Bincount":"gQI3","./kernels/BroadcastArgs":"xWOa","./kernels/Cast":"JirG","./kernels/Ceil":"E0aZ","./kernels/ClipByValue":"IbyP","./kernels/Complex":"vWXR","./kernels/ComplexAbs":"Kuhq","./kernels/Concat":"SH0J","./kernels/Conv2D":"lE4o","./kernels/Conv2DBackpropFilter":"r9Be","./kernels/Conv2DBackpropInput":"cVvr","./kernels/Conv3D":"AezV","./kernels/Conv3DBackpropFilterV2":"lhL0","./kernels/Conv3DBackpropInputV2":"BTZj","./kernels/Cos":"nlDp","./kernels/Cosh":"Bb26","./kernels/CropAndResize":"ECMk","./kernels/Cumsum":"elV2","./kernels/DenseBincount":"MOld","./kernels/DepthToSpace":"WKMn","./kernels/DepthwiseConv2dNative":"UmRJ","./kernels/DepthwiseConv2dNativeBackpropFilter":"pKxb","./kernels/DepthwiseConv2dNativeBackpropInput":"RVP9","./kernels/Diag":"nCDM","./kernels/Dilation2D":"exAg","./kernels/Einsum":"aNTO","./kernels/Elu":"Xush","./kernels/EluGrad":"O3E0","./kernels/Equal":"btqb","./kernels/Erf":"a80B","./kernels/Exp":"gRCN","./kernels/ExpandDims":"LRvM","./kernels/Expm1":"vGDz","./kernels/FFT":"Bx4q","./kernels/Fill":"vLYI","./kernels/FlipLeftRight":"gRW5","./kernels/Floor":"Yy57","./kernels/FloorDiv":"rAwh","./kernels/FromPixels":"MRz7","./kernels/FusedConv2D":"sHbe","./kernels/FusedDepthwiseConv2D":"yLUC","./kernels/GatherNd":"oqms","./kernels/GatherV2":"ZQ9T","./kernels/Greater":"yKvx","./kernels/GreaterEqual":"AkAn","./kernels/Identity":"Gwwj","./kernels/IFFT":"Z5jD","./kernels/Imag":"U9t0","./kernels/IsFinite":"uPGo","./kernels/IsInf":"EVDd","./kernels/IsNaN":"amu0","./kernels/LeakyRelu":"eiHO","./kernels/Less":"j3SB","./kernels/LessEqual":"PgfX","./kernels/LinSpace":"sU1o","./kernels/Log":"cxva","./kernels/Log1p":"VTAF","./kernels/LogicalAnd":"QvN7","./kernels/LogicalNot":"wovn","./kernels/LogicalOr":"M59B","./kernels/LRN":"MLAU","./kernels/LRNGrad":"z49d","./kernels/Max":"SOPS","./kernels/Maximum":"IMhY","./kernels/MaxPool":"I2MZ","./kernels/MaxPool3D":"fXYl","./kernels/MaxPool3DGrad":"Vwrr","./kernels/MaxPoolGrad":"iKnw","./kernels/MaxPoolWithArgmax":"yFKv","./kernels/Mean":"rbfu","./kernels/Min":"xq7h","./kernels/Minimum":"GafU","./kernels/MirrorPad":"iBor","./kernels/Mod":"B26M","./kernels/Multinomial":"Zmu3","./kernels/Multiply":"dTvy","./kernels/Neg":"Tjo1","./kernels/NonMaxSuppressionV3":"GVyX","./kernels/NonMaxSuppressionV4":"DAkH","./kernels/NonMaxSuppressionV5":"VwrN","./kernels/NotEqual":"m7Px","./kernels/OneHot":"wBT7","./kernels/OnesLike":"VyEl","./kernels/Pack":"pf3x","./kernels/PadV2":"pC66","./kernels/Pow":"hHx4","./kernels/Prelu":"k80A","./kernels/Prod":"qRnd","./kernels/Range":"QYnk","./kernels/Real":"mH9E","./kernels/RealDiv":"aUUN","./kernels/Reciprocal":"Pc2w","./kernels/Relu":"SV6U","./kernels/Relu6":"JPeF","./kernels/Reshape":"k4TP","./kernels/ResizeBilinear":"u0TF","./kernels/ResizeBilinearGrad":"bVdd","./kernels/ResizeNearestNeighbor":"UWlN","./kernels/ResizeNearestNeighborGrad":"V6wq","./kernels/Reverse":"AqaL","./kernels/RotateWithOffset":"RJ8j","./kernels/Round":"QlOI","./kernels/Rsqrt":"y5S8","./kernels/ScatterNd":"ibAo","./kernels/Select":"I7xd","./kernels/Selu":"PKN0","./kernels/Sigmoid":"m5AY","./kernels/Sign":"zXMg","./kernels/Sin":"mypX","./kernels/Sinh":"X9PA","./kernels/Slice":"uanA","./kernels/Softmax":"YZuw","./kernels/Softplus":"lUJN","./kernels/SpaceToBatchND":"zeUh","./kernels/SparseFillEmptyRows":"y85v","./kernels/SparseReshape":"qqMY","./kernels/SparseSegmentMean":"L3Am","./kernels/SparseSegmentSum":"Rv9P","./kernels/SparseToDense":"VCsw","./kernels/SplitV":"Gbq7","./kernels/Sqrt":"G8Yg","./kernels/Square":"aHQY","./kernels/SquaredDifference":"OSij","./kernels/Step":"WvS0","./kernels/StridedSlice":"s4SJ","./kernels/StringNGrams":"jIbJ","./kernels/StringSplit":"aFQ8","./kernels/StringToHashBucketFast":"OUVd","./kernels/Sub":"MkXb","./kernels/Sum":"RVri","./kernels/Tan":"K2EB","./kernels/Tanh":"nmaU","./kernels/Tile":"IeZJ","./kernels/TopK":"nadS","./kernels/Transform":"g3s8","./kernels/Transpose":"hS8R","./kernels/Unique":"Byf5","./kernels/Unpack":"Fia1","./kernels/UnsortedSegmentSum":"bWqJ","./kernels/ZerosLike":"PG0L"}],"kg9U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))}),require("./register_all_kernels");
},{"./base":"yAt8","./register_all_kernels":"FAdT"}],"cAqc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KernelBackend=exports.EPSILON_FLOAT32=exports.EPSILON_FLOAT16=exports.DataStorage=void 0;const e=1e-7;exports.EPSILON_FLOAT32=e;const t=1e-4;exports.EPSILON_FLOAT16=t;class r{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}exports.DataStorage=r;class a{refCount(e){return s("refCount")}incRef(e){return s("incRef")}timerAvailable(){return!0}time(e){return s("time")}read(e){return s("read")}readSync(e){return s("readSync")}readToGPU(e,t){return s("readToGPU")}numDataIds(){return s("numDataIds")}disposeData(e,t){return s("disposeData")}write(e,t,r){return s("write")}move(e,t,r,a,n){return s("move")}memory(){return s("memory")}floatPrecision(){return s("floatPrecision")}epsilon(){return 32===this.floatPrecision()?e:t}dispose(){return s("dispose")}}function s(e){throw new Error(`'${e}' not yet implemented or not found in the registry. `+"This kernel may not be supported by the tfjs backend you have chosen")}exports.KernelBackend=a;
},{}],"uGoP":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.Environment=exports.ENV=void 0,exports.env=i,exports.getQueryParams=r,exports.setEnvironmentGlobal=g;var e=require("./util_base");const s="tfjsflags";class a{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=r,this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&(i().getBool("IS_TEST")||i().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. `+`Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=e}registerFlag(t,e,s){if(this.flagRegistry[t]={evaluationFn:e,setHook:s},null!=this.urlFlags[t]){const e=this.urlFlags[t];i().getBool("IS_TEST")||i().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const s=this.evaluateFlag(t);if((0,e.isPromise)(s))throw new Error(`Flag ${t} cannot be synchronously evaluated. `+"Please use getAsync() instead.");return this.flags[t]=s,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=this.getQueryParams(this.global.location.search);if(s in t){t[s].split(",").forEach(t=>{const[e,s]=t.split(":");this.urlFlags[e]=o(e,s)})}}}function r(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...s)=>(l(e,s[0],s[1]),s.join("="))),e}function l(t,e,s){t[decodeURIComponent(e)]=decodeURIComponent(s||"")}function o(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function i(){return n}exports.Environment=a;let n=null;function g(t){exports.ENV=n=t}exports.ENV=n;
},{"./util_base":"cppa"}],"E7d7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Minimum=exports.Min=exports.Mean=exports.Maximum=exports.MaxPoolWithArgmax=exports.MaxPoolGrad=exports.MaxPool3DGrad=exports.MaxPool3D=exports.MaxPool=exports.Max=exports.LowerBound=exports.LogicalXor=exports.LogicalOr=exports.LogicalNot=exports.LogicalAnd=exports.LogSoftmax=exports.Log1p=exports.Log=exports.LinSpace=exports.LessEqual=exports.Less=exports.LeakyRelu=exports.LRNGrad=exports.LRN=exports.IsNan=exports.IsInf=exports.IsFinite=exports.Imag=exports.Identity=exports.IFFT=exports.GreaterEqual=exports.Greater=exports.GatherV2=exports.GatherNd=exports.FusedDepthwiseConv2D=exports.FusedConv2D=exports.FusedBatchNorm=exports.FromPixels=exports.FloorDiv=exports.Floor=exports.FlipLeftRight=exports.Fill=exports.FFT=exports.Expm1=exports.ExpandDims=exports.Exp=exports.Erf=exports.Equal=exports.EluGrad=exports.Elu=exports.Einsum=exports.Dilation2DBackpropInput=exports.Dilation2DBackpropFilter=exports.Dilation2D=exports.Diag=exports.DepthwiseConv2dNativeBackpropInput=exports.DepthwiseConv2dNativeBackpropFilter=exports.DepthwiseConv2dNative=exports.DepthToSpace=exports.DenseBincount=exports.Cumsum=exports.Cumprod=exports.CropAndResize=exports.Cosh=exports.Cos=exports.Conv3DBackpropInputV2=exports.Conv3DBackpropFilterV2=exports.Conv3D=exports.Conv2DBackpropInput=exports.Conv2DBackpropFilter=exports.Conv2D=exports.Concat=exports.ComplexAbs=exports.Complex=exports.ClipByValue=exports.Ceil=exports.Cast=exports.BroadcastTo=exports.BroadcastArgs=exports.Bincount=exports.BatchToSpaceND=exports.BatchMatMul=exports.AvgPoolGrad=exports.AvgPool3DGrad=exports.AvgPool3D=exports.AvgPool=exports.Atanh=exports.Atan2=exports.Atan=exports.Asinh=exports.Asin=exports.ArgMin=exports.ArgMax=exports.Any=exports.All=exports.AddN=exports.Add=exports.Acosh=exports.Acos=exports.Abs=void 0,exports._FusedMatMul=exports.ZerosLike=exports.UpperBound=exports.UnsortedSegmentSum=exports.Unpack=exports.Unique=exports.Transpose=exports.Transform=exports.TopK=exports.Tile=exports.Tanh=exports.Tan=exports.Sum=exports.Sub=exports.StringToHashBucketFast=exports.StringSplit=exports.StringNGrams=exports.StridedSlice=exports.Step=exports.SquaredDifference=exports.Square=exports.Sqrt=exports.SplitV=exports.SparseToDense=exports.SparseSegmentSum=exports.SparseSegmentMean=exports.SparseReshape=exports.SparseFillEmptyRows=exports.SpaceToBatchND=exports.Softplus=exports.Softmax=exports.Slice=exports.Sinh=exports.Sin=exports.Sign=exports.Sigmoid=exports.Selu=exports.Select=exports.SearchSorted=exports.ScatterNd=exports.Rsqrt=exports.Round=exports.RotateWithOffset=exports.Reverse=exports.ResizeNearestNeighborGrad=exports.ResizeNearestNeighbor=exports.ResizeBilinearGrad=exports.ResizeBilinear=exports.Reshape=exports.Relu6=exports.Relu=exports.Reciprocal=exports.RealDiv=exports.Real=exports.Range=exports.Prod=exports.Prelu=exports.Pow=exports.Pool=exports.PadV2=exports.Pack=exports.OnesLike=exports.OneHot=exports.NotEqual=exports.NonMaxSuppressionV5=exports.NonMaxSuppressionV4=exports.NonMaxSuppressionV3=exports.Neg=exports.Multiply=exports.Multinomial=exports.Mod=exports.MirrorPad=exports.Minimum=exports.Min=exports.Mean=exports.Maximum=exports.MaxPoolWithArgmax=exports.MaxPoolGrad=exports.MaxPool3DGrad=exports.MaxPool3D=exports.MaxPool=exports.Max=exports.LowerBound=exports.LogicalXor=exports.LogicalOr=exports.LogicalNot=exports.LogicalAnd=exports.LogSoftmax=exports.Log1p=exports.Log=exports.LinSpace=exports.LessEqual=exports.Less=exports.LeakyRelu=exports.LRNGrad=exports.LRN=exports.IsNan=exports.IsInf=exports.IsFinite=exports.Imag=exports.Identity=exports.IFFT=exports.GreaterEqual=exports.Greater=exports.GatherV2=exports.GatherNd=exports.FusedDepthwiseConv2D=exports.FusedConv2D=exports.FusedBatchNorm=exports.FromPixels=exports.FloorDiv=exports.Floor=exports.FlipLeftRight=exports.Fill=exports.FFT=exports.Expm1=exports.ExpandDims=exports.Exp=exports.Erf=exports.Equal=exports.EluGrad=exports.Elu=exports.Einsum=exports.Dilation2DBackpropInput=exports.Dilation2DBackpropFilter=exports.Dilation2D=exports.Diag=exports.DepthwiseConv2dNativeBackpropInput=exports.DepthwiseConv2dNativeBackpropFilter=exports.DepthwiseConv2dNative=exports.DepthToSpace=exports.DenseBincount=exports.Cumsum=exports.Cumprod=exports.CropAndResize=exports.Cosh=exports.Cos=exports.Conv3DBackpropInputV2=exports.Conv3DBackpropFilterV2=exports.Conv3D=exports.Conv2DBackpropInput=exports.Conv2DBackpropFilter=exports.Conv2D=exports.Concat=exports.ComplexAbs=exports.Complex=exports.ClipByValue=exports.Ceil=exports.Cast=exports.BroadcastTo=exports.BroadcastArgs=exports.Bincount=exports.BatchToSpaceND=exports.BatchMatMul=exports.AvgPoolGrad=exports.AvgPool3DGrad=exports.AvgPool3D=exports.AvgPool=exports.Atanh=exports.Atan2=exports.Atan=exports.Asinh=exports.Asin=exports.ArgMin=exports.ArgMax=exports.Any=exports.All=exports.AddN=exports.Add=exports.Acosh=exports.Acos=exports.Abs=void 0;const o="Abs";exports.Abs=o;const t="Acos";exports.Acos=t;const e="Acosh";exports.Acosh=e;const s="Add";exports.Add=s;const r="AddN";exports.AddN=r;const p="All";exports.All=p;const x="Any";exports.Any=x;const n="ArgMax";exports.ArgMax=n;const a="ArgMin";exports.ArgMin=a;const c="Asin";exports.Asin=c;const i="Asinh";exports.Asinh=i;const l="Atan";exports.Atan=l;const u="Atanh";exports.Atanh=u;const d="Atan2";exports.Atan2=d;const S="AvgPool";exports.AvgPool=S;const D="AvgPoolGrad";exports.AvgPoolGrad=D;const g="AvgPool3D";exports.AvgPool3D=g;const m="AvgPool3DGrad";exports.AvgPool3DGrad=m;const h="BatchMatMul";exports.BatchMatMul=h;const A="BatchToSpaceND";exports.BatchToSpaceND=A;const C="Bincount";exports.Bincount=C;const M="BroadcastTo";exports.BroadcastTo=M;const v="BroadcastArgs";exports.BroadcastArgs=v;const B="Cast";exports.Cast=B;const N="Ceil";exports.Ceil=N;const F="ClipByValue";exports.ClipByValue=F;const R="Complex";exports.Complex=R;const L="ComplexAbs";exports.ComplexAbs=L;const P="Concat";exports.Concat=P;const k="Conv2D";exports.Conv2D=k;const G="Conv2DBackpropFilter";exports.Conv2DBackpropFilter=G;const T="Conv2DBackpropInput";exports.Conv2DBackpropInput=T;const E="Conv3D";exports.Conv3D=E;const I="Conv3DBackpropFilterV2";exports.Conv3DBackpropFilterV2=I;const f="Conv3DBackpropInputV2";exports.Conv3DBackpropInputV2=f;const V="Cos";exports.Cos=V;const q="Cosh";exports.Cosh=q;const w="Cumprod";exports.Cumprod=w;const y="Cumsum";exports.Cumsum=y;const b="CropAndResize";exports.CropAndResize=b;const z="DenseBincount";exports.DenseBincount=z;const O="DepthToSpace";exports.DepthToSpace=O;const U="DepthwiseConv2dNative";exports.DepthwiseConv2dNative=U;const W="DepthwiseConv2dNativeBackpropFilter";exports.DepthwiseConv2dNativeBackpropFilter=W;const H="DepthwiseConv2dNativeBackpropInput";exports.DepthwiseConv2dNativeBackpropInput=H;const _="Diag";exports.Diag=_;const X="Dilation2D";exports.Dilation2D=X;const K="Dilation2DBackpropInput";exports.Dilation2DBackpropInput=K;const Z="Dilation2DBackpropFilter";exports.Dilation2DBackpropFilter=Z;const j="RealDiv";exports.RealDiv=j;const J="Einsum";exports.Einsum=J;const Q="Elu";exports.Elu=Q;const Y="EluGrad";exports.EluGrad=Y;const $="Erf";exports.Erf=$;const oo="Equal";exports.Equal=oo;const to="Exp";exports.Exp=to;const eo="ExpandDims";exports.ExpandDims=eo;const so="Expm1";exports.Expm1=so;const ro="FFT";exports.FFT=ro;const po="Fill";exports.Fill=po;const xo="FlipLeftRight";exports.FlipLeftRight=xo;const no="Floor";exports.Floor=no;const ao="FloorDiv";exports.FloorDiv=ao;const co="FusedBatchNorm";exports.FusedBatchNorm=co;const io="GatherV2";exports.GatherV2=io;const lo="GatherNd";exports.GatherNd=lo;const uo="Greater";exports.Greater=uo;const So="GreaterEqual";exports.GreaterEqual=So;const Do="Identity";exports.Identity=Do;const go="IFFT";exports.IFFT=go;const mo="Imag";exports.Imag=mo;const ho="IsFinite";exports.IsFinite=ho;const Ao="IsInf";exports.IsInf=Ao;const Co="IsNan";exports.IsNan=Co;const Mo="LeakyRelu";exports.LeakyRelu=Mo;const vo="Less";exports.Less=vo;const Bo="LessEqual";exports.LessEqual=Bo;const No="LinSpace";exports.LinSpace=No;const Fo="Log";exports.Log=Fo;const Ro="Log1p";exports.Log1p=Ro;const Lo="LogicalAnd";exports.LogicalAnd=Lo;const Po="LogicalNot";exports.LogicalNot=Po;const ko="LogicalOr";exports.LogicalOr=ko;const Go="LogicalXor";exports.LogicalXor=Go;const To="LogSoftmax";exports.LogSoftmax=To;const Eo="LowerBound";exports.LowerBound=Eo;const Io="LRN";exports.LRN=Io;const fo="LRNGrad";exports.LRNGrad=fo;const Vo="Max";exports.Max=Vo;const qo="Maximum";exports.Maximum=qo;const wo="MaxPool";exports.MaxPool=wo;const yo="MaxPoolGrad";exports.MaxPoolGrad=yo;const bo="MaxPool3D";exports.MaxPool3D=bo;const zo="MaxPool3DGrad";exports.MaxPool3DGrad=zo;const Oo="MaxPoolWithArgmax";exports.MaxPoolWithArgmax=Oo;const Uo="Mean";exports.Mean=Uo;const Wo="Min";exports.Min=Wo;const Ho="Minimum";exports.Minimum=Ho;const _o="MirrorPad";exports.MirrorPad=_o;const Xo="Mod";exports.Mod=Xo;const Ko="Multinomial";exports.Multinomial=Ko;const Zo="Multiply";exports.Multiply=Zo;const jo="Neg";exports.Neg=jo;const Jo="NotEqual";exports.NotEqual=Jo;const Qo="NonMaxSuppressionV3";exports.NonMaxSuppressionV3=Qo;const Yo="NonMaxSuppressionV4";exports.NonMaxSuppressionV4=Yo;const $o="NonMaxSuppressionV5";exports.NonMaxSuppressionV5=$o;const ot="OnesLike";exports.OnesLike=ot;const tt="OneHot";exports.OneHot=tt;const et="Pack";exports.Pack=et;const st="PadV2";exports.PadV2=st;const rt="Pool";exports.Pool=rt;const pt="Pow";exports.Pow=pt;const xt="Prelu";exports.Prelu=xt;const nt="Prod";exports.Prod=nt;const at="Range";exports.Range=at;const ct="Real";exports.Real=ct;const it="Reciprocal";exports.Reciprocal=it;const lt="Relu";exports.Relu=lt;const ut="Reshape";exports.Reshape=ut;const dt="ResizeNearestNeighbor";exports.ResizeNearestNeighbor=dt;const St="ResizeNearestNeighborGrad";exports.ResizeNearestNeighborGrad=St;const Dt="ResizeBilinear";exports.ResizeBilinear=Dt;const gt="ResizeBilinearGrad";exports.ResizeBilinearGrad=gt;const mt="Relu6";exports.Relu6=mt;const ht="Reverse";exports.Reverse=ht;const At="Round";exports.Round=At;const Ct="Rsqrt";exports.Rsqrt=Ct;const Mt="ScatterNd";exports.ScatterNd=Mt;const vt="SearchSorted";exports.SearchSorted=vt;const Bt="Select";exports.Select=Bt;const Nt="Selu";exports.Selu=Nt;const Ft="Slice";exports.Slice=Ft;const Rt="Sin";exports.Sin=Rt;const Lt="Sinh";exports.Sinh=Lt;const Pt="Sign";exports.Sign=Pt;const kt="Sigmoid";exports.Sigmoid=kt;const Gt="Softplus";exports.Softplus=Gt;const Tt="Sqrt";exports.Sqrt=Tt;const Et="Sum";exports.Sum=Et;const It="SpaceToBatchND";exports.SpaceToBatchND=It;const ft="SplitV";exports.SplitV=ft;const Vt="Softmax";exports.Softmax=Vt;const qt="SparseFillEmptyRows";exports.SparseFillEmptyRows=qt;const wt="SparseReshape";exports.SparseReshape=wt;const yt="SparseSegmentMean";exports.SparseSegmentMean=yt;const bt="SparseSegmentSum";exports.SparseSegmentSum=bt;const zt="SparseToDense";exports.SparseToDense=zt;const Ot="SquaredDifference";exports.SquaredDifference=Ot;const Ut="Square";exports.Square=Ut;const Wt="StridedSlice";exports.StridedSlice=Wt;const Ht="StringNGrams";exports.StringNGrams=Ht;const _t="StringSplit";exports.StringSplit=_t;const Xt="StringToHashBucketFast";exports.StringToHashBucketFast=Xt;const Kt="Sub";exports.Sub=Kt;const Zt="Tan";exports.Tan=Zt;const jt="Tanh";exports.Tanh=jt;const Jt="Tile";exports.Tile=Jt;const Qt="TopK";exports.TopK=Qt;const Yt="Transform";exports.Transform=Yt;const $t="Transpose";exports.Transpose=$t;const oe="Unique";exports.Unique=oe;const te="Unpack";exports.Unpack=te;const ee="UnsortedSegmentSum";exports.UnsortedSegmentSum=ee;const se="UpperBound";exports.UpperBound=se;const re="ZerosLike";exports.ZerosLike=re;const pe="Step";exports.Step=pe;const xe="FromPixels";exports.FromPixels=xe;const ne="RotateWithOffset";exports.RotateWithOffset=ne;const ae="_FusedMatMul";exports._FusedMatMul=ae;const ce="FusedConv2D";exports.FusedConv2D=ce;const ie="FusedDepthwiseConv2D";exports.FusedDepthwiseConv2D=ie;
},{}],"O507":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=n,exports.warn=o;var e=require("./environment");function o(...o){(0,e.env)().getBool("IS_TEST")||(0,e.env)().getBool("PROD")||console.warn(...o)}function n(...o){(0,e.env)().getBool("IS_TEST")||(0,e.env)().getBool("PROD")||console.log(...o)}
},{"./environment":"uGoP"}],"q1HN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyRegisteredKernels=g,exports.getGradient=u,exports.getKernel=a,exports.getKernelsForBackend=c,exports.registerGradient=l,exports.registerKernel=f,exports.unregisterGradient=d,exports.unregisterKernel=p;var e=require("./environment"),r=require("./global_util"),t=o(require("./log"));function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}const i=(0,r.getGlobal)("kernelRegistry",()=>new Map),s=(0,r.getGlobal)("gradRegistry",()=>new Map);function a(e,r){const t=b(e,r);return i.get(t)}function u(e){return s.get(e)}function c(e){const r=i.entries(),t=[];for(;;){const{done:n,value:o}=r.next();if(n)break;const[i,s]=o,[a]=i.split("_");a===e&&t.push(s)}return t}function f(e){const{kernelName:r,backendName:n}=e,o=b(r,n);i.has(o)&&t.warn(`The kernel '${r}' for backend `+`'${n}' is already registered`),i.set(o,e)}function l(r){const{kernelName:n}=r;s.has(n)&&(0,e.env)().getBool("DEBUG")&&t.warn(`Overriding the gradient for '${n}'`),s.set(n,r)}function p(e,r){const t=b(e,r);if(!i.has(t))throw new Error(`The kernel '${e}' for backend `+`'${r}' is not registered`);i.delete(t)}function d(e){if(!s.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);s.delete(e)}function g(e,r){c(e).forEach(e=>{f(Object.assign({},e,{backendName:r}))})}function b(e,r){return`${r}_${e}`}
},{"./environment":"uGoP","./global_util":"QcKL","./log":"O507"}],"uQV1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createScalarValue:!0,toTypedArray:!0,now:!0,fetch:!0,encodeString:!0,decodeString:!0};exports.createScalarValue=u,exports.decodeString=s,exports.encodeString=p,exports.fetch=l,exports.now=c,exports.toTypedArray=i;var r=require("./environment"),t=a(require("./util_base"));Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var n=require("./hash_util");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=a?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(e,r){return"string"===r?p(e):i([e],r)}function f(e,r){return e instanceof Float32Array&&"float32"===r||e instanceof Int32Array&&"int32"===r||e instanceof Uint8Array&&"bool"===r}function i(e,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=t.flatten(e)),(0,r.env)().getBool("DEBUG")&&t.checkConversionForErrors(e,n),f(e,n))return e;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(e);if("int32"===n)return new Int32Array(e);if("bool"===n){const r=new Uint8Array(e.length);for(let t=0;t<r.length;++t)0!==Math.round(e[t])&&(r[t]=1);return r}throw new Error(`Unknown data type ${n}`)}function c(){return(0,r.env)().platform.now()}function l(e,t){return(0,r.env)().platform.fetch(e,t)}function p(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.encode(e,t)}function s(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.decode(e,t)}Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===n[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});
},{"./environment":"uGoP","./util_base":"cppa","./hash_util":"o3Db"}],"S9zH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Profiler=exports.Logger=void 0,exports.checkComputationForErrors=l;var e=require("./environment"),t=o(require("./util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=l?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,o&&o.set(e,n),n}class n{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new i)}profileKernel(r,o,n){let i;const s=()=>{i=n()};let a;const c=t.now();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(const e of i)e.dataSync();a=Promise.resolve({kernelMs:t.now()-c})}if((0,e.env)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let e=0;e<i.length;e++){const t=i[e];t.data().then(e=>{l(e,t.dtype,r)})}return{kernelName:r,outputs:i,inputs:o,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:o,inputs:n,extraInfo:l}=e;r.forEach(e=>{Promise.all([e.data(),o,l]).then(r=>{this.logger.logKernelProfile(t,e,r[0],r[1],n,r[2])})})}}function l(e,t,r){if("float32"!==t)return!1;for(let o=0;o<e.length;o++){const t=e[o];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${r}'`),!0}return!1}exports.Profiler=n;class i{logKernelProfile(e,r,o,n,l,i){const s="number"==typeof n?t.rightPad(`${n}ms`,9):n.error,a=t.rightPad(e,25),c=r.rank,f=r.size,u=t.rightPad(r.shape.toString(),14);let p="";for(const t in l){const e=l[t];if(null!=e){const o=e.shape||r.shape,n=o.length;p+=`${t}: ${n}D ${n>0?o:""} `}}console.log(`%c${a}\t%c${s}\t%c${c}D ${u}\t%c${f}\t%c${p}\t%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}exports.Logger=i;
},{"./environment":"uGoP","./util":"uQV1"}],"bk8u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.backpropagateGradients=o,exports.getFilteredNodesXToY=r;var t=n(require("./util"));function e(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(e=function(t){return t?r:n})(t)}function n(t,n){if(!n&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=e(n);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=i?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=t[s]}return o.default=t,r&&r.set(t,o),o}function r(t,e,n){const r={},o={};for(let a=0;a<e.length;a++)r[e[a].id]=!0;for(let a=0;a<t.length;a++){const n=t[a],i=n.inputs;for(const t in i){const s=i[t];let u=!1;for(let t=0;t<e.length;t++)if(r[s.id]){n.outputs.forEach(t=>r[t.id]=!0),u=!0,o[n.id]=!0;break}if(u)break}}const i={};i[n.id]=!0;const s={};for(let a=t.length-1;a>=0;a--){const e=t[a],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(i[e.outputs[t].id]){for(const t in n)i[n[t].id]=!0,s[e.id]=!0;break}}const u=[];for(let a=0;a<t.length;a++){const e=t[a];if(o[e.id]&&s[e.id]){const t={};for(const o in e.inputs){const n=e.inputs[o];r[n.id]&&(t[o]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,u.push(n)}}return u}function o(e,n,r,o){for(let i=n.length-1;i>=0;i--){const s=n[i],u=[];if(s.outputs.forEach(t=>{const n=e[t.id];null!=n?u.push(n):u.push(null)}),null==s.gradient)throw new Error("Cannot compute gradient: gradient function not found "+`for ${s.kernelName}.`);const a=s.gradient(u);for(const n in s.inputs){if(!(n in a))throw new Error(`Cannot backprop through input ${n}. `+`Available gradients found: ${Object.keys(a)}.`);const i=r(()=>a[n]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`${n} must have 'float32' dtype, but has '${i.dtype}'`);const u=s.inputs[n];if(!t.arraysEqual(i.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`'${n}' has shape '${i.shape}', which does not match `+`the shape of the input '${u.shape}'`);if(null==e[u.id])e[u.id]=i;else{const t=e[u.id];e[u.id]=o(t,i),t.dispose()}}}}
},{"./util":"uQV1"}],"MrfZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensorToString=o;var e=require("./util");const t=20,r=3,n=7;function o(t,r,n,o){const l=(0,e.computeStrides)(r),i=s(t,r,n,l),c=r.length,p=u(t,r,n,l,i),a=["Tensor"];return o&&(a.push(`  dtype: ${n}`),a.push(`  rank: ${c}`),a.push(`  shape: [${r}]`),a.push("  values:")),a.push(p.map(e=>"    "+e).join("\n")),a.join("\n")}function s(t,r,n,o){const s=(0,e.sizeFromShape)(r),i=o[o.length-1],u=new Array(i).fill(0),p=r.length,a="complex64"===n?c(t):t;if(p>1)for(let e=0;e<s/i;e++){const t=e*i;for(let e=0;e<i;e++)u[e]=Math.max(u[e],l(a[t+e],0,n).length)}return u}function l(t,r,o){let s;return s=Array.isArray(t)?`${parseFloat(t[0].toFixed(n))} + `+`${parseFloat(t[1].toFixed(n))}j`:(0,e.isString)(t)?`'${t}'`:"bool"===o?i(t):parseFloat(t.toFixed(n)).toString(),(0,e.rightPad)(s,r)}function i(e){return 0===e?"false":"true"}function u(e,n,o,s,p,a=!0){const f="complex64"===o?2:1,h=n[0],m=n.length;if(0===m){if("complex64"===o){return[l(c(e)[0],0,o)]}return"bool"===o?[i(e[0])]:[e[0].toString()]}if(1===m){if(h>t){const t=r*f;let n=Array.from(e.slice(0,t)),s=Array.from(e.slice((h-r)*f,h*f));return"complex64"===o&&(n=c(n),s=c(s)),["["+n.map((e,t)=>l(e,p[t],o)).join(", ")+", ..., "+s.map((e,t)=>l(e,p[h-r+t],o)).join(", ")+"]"]}return["["+("complex64"===o?c(e):Array.from(e)).map((e,t)=>l(e,p[t],o)).join(", ")+"]"]}const g=n.slice(1),x=s.slice(1),d=s[0]*f,y=[];if(h>t){for(let t=0;t<r;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,!1))}y.push("...");for(let t=h-r;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}}else for(let t=0;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}const j=2===m?",":"";y[0]="["+y[0]+j;for(let t=1;t<y.length-1;t++)y[t]=" "+y[t]+j;let F=",\n";for(let t=2;t<m;t++)F+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":F),y}function c(e){const t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}
},{"./util":"uQV1"}],"olbE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Variable=exports.TensorBuffer=exports.Tensor=void 0,exports.getGlobalTensorClass=c,exports.setDeprecationWarningFn=p,exports.setOpHandler=l,exports.setTensorTracker=d;var t=require("./global_util"),e=require("./tensor_format"),s=i(require("./util"));function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(r=function(t){return t?s:e})(t)}function i(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=r(e);if(s&&s.has(t))return s.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=n?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=t[a]}return i.default=t,s&&s.set(t,i),i}class n{constructor(t,e,r){if(this.dtype=e,this.shape=t.slice(),this.size=s.sizeFromShape(t),null!=r){const t=r.length;s.assert(t===this.size,()=>`Length of values '${t}' does not match the size `+`inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||s.getArrayFromDType(e,this.size),this.strides=(0,s.computeStrides)(t)}set(t,...e){0===e.length&&(e=[0]),s.assert(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must `+`match the rank (${this.rank})`);const r=this.locToIndex(e);this.values[r]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e]){const e=`Requested out of range element at ${t}. `+`  Buffer shape=${this.shape}`;throw new Error(e)}e++}let s=t[t.length-1];for(let r=0;r<t.length-1;++r)s+=this.strides[r]*t[r];return this.values[s]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let s=0;s<t.length-1;++s)e+=this.strides[s]*t[s];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let s=0;s<e.length-1;++s)e[s]=Math.floor(t/this.strides[s]),t-=e[s]*this.strides[s];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return a().makeTensor(this.values,this.shape,this.dtype)}}exports.TensorBuffer=n;let a=null,o=null,h=null;function d(t){a=t}function l(t){o=t}function p(t){h=t}class u{constructor(t,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=s.sizeFromShape(t),this.strides=(0,s.computeStrides)(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return o.buffer(this.shape,this.dtype,t)}bufferSync(){return o.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return(0,s.toNestedArray)(this.shape,t,"complex64"===this.dtype)}arraySync(){return(0,s.toNestedArray)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const t=a().read(this.dataId);if("string"===this.dtype){const r=await t;try{return r.map(t=>s.decodeString(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),a().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=a().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>s.decodeString(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await a().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(a().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return o.print(this,t)}clone(){return this.throwIfDisposed(),o.clone(this)}toString(t=!1){const s=this.dataSync();return(0,e.tensorToString)(s,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),o.cast(this,t)}variable(t=!0,e,s){return this.throwIfDisposed(),a().makeVariable(this,t,e,s)}}function c(){return(0,t.getGlobal)("Tensor",()=>u)}exports.Tensor=u,Object.defineProperty(u,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),c();class f extends u{constructor(t,e,s,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and `+`previous value (${this.dtype}) must match`);if(!s.arraysEqual(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and `+`previous value (${this.shape}) must match`);a().disposeTensor(this),this.dataId=t.dataId,a().incRef(this,null)}dispose(){a().disposeVariable(this),this.isDisposedInternal=!0}}exports.Variable=f,Object.defineProperty(f,Symbol.hasInstance,{value:t=>t instanceof u&&null!=t.assign&&t.assign instanceof Function});
},{"./global_util":"QcKL","./tensor_format":"MrfZ","./util":"uQV1"}],"Wwfk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertTypesMatch=s,exports.getTensorsInContainer=i,exports.isTensorInList=o,exports.makeTypesMatch=n;var t=require("./tensor"),e=require("./types"),r=require("./util");function n(t,r){if(t.dtype===r.dtype)return[t,r];const n=(0,e.upcastType)(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function s(t,e){(0,r.assert)(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and`+` second(${e.dtype}) input must match`)}function o(t,e){return e.some(e=>e.id===t.id)}function i(t){const e=[];return u(t,e,new Set),e}function u(e,r,n){if(null==e)return;if(e instanceof t.Tensor)return void r.push(e);if(!p(e))return;const s=e;for(const t in s){const e=s[t];n.has(e)||(n.add(e),u(e,r,n))}}function p(t){return Array.isArray(t)||"object"==typeof t}
},{"./tensor":"olbE","./types":"Grh1","./util":"uQV1"}],"Wn3f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Engine=exports.ENGINE=void 0,exports.add=b,exports.getOrMakeEngine=g;var e=require("./backends/backend"),t=require("./environment"),s=require("./global_util"),n=require("./kernel_names"),r=require("./kernel_registry"),a=u(require("./log")),i=require("./profiler"),o=require("./tape"),c=require("./tensor"),d=require("./tensor_util"),h=u(require("./util"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(l=function(e){return e?s:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=l(t);if(s&&s.has(e))return s.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,s&&s.set(e,n),n}function p(e){return null!=e.kernelName}class f{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class k{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new f}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t];if(await this.initializeBackend(s).success)return void(await this.setBackend(s))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make `+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been `+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,s=1){return e in this.registryFactory?(a.warn(`${e} backend was already registered. `+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:s},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:s}=this.initializeBackend(e);if(!(s?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new i.Profiler(this.backendInstance),!0}setupRegisteredKernels(){(0,r.getKernelsForBackend)(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){(0,r.getKernelsForBackend)(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(t){const s=this.registryFactory[t];if(null==s)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=s.factory();if(!r||r instanceof e.KernelBackend||"function"!=typeof r.then)return this.registry[t]=r,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,s=r.then(s=>!(e<this.pendingBackendInitId)&&(this.registry[t]=s,this.pendingBackendInit=null,!0)).catch(s=>!(e<this.pendingBackendInitId)&&(this.pendingBackendInit=null,a.warn(`Initialization of backend ${t} failed`),a.warn(s.stack||s.message),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}}catch(n){return a.warn(`Initialization of backend ${t} failed`),a.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t],{success:n,asyncInit:r}=this.initializeBackend(s);if(r||n)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const s=this.state.tensorInfo.get(t),n=s.backend,r=this.readSync(t),a=n.refCount(t);n.disposeData(t,!0),s.backend=e,e.move(t,r,s.shape,s.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let s,n=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}return this.scopedRun(()=>this.startScope(n),()=>this.endScope(s),()=>((s=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,t,s){e();try{const e=s();return t(),e}catch(n){throw t(),n}}nextTensorId(){return k.nextTensorId++}nextVariableId(){return k.nextVariableId++}clone(e){const t=m.runKernel(n.Identity,{x:e}),s={x:e};return this.addTapeNode(this.state.activeScope.name,s,[t],e=>({x:()=>{const t={x:e},s={dtype:"float32"};return m.runKernel(n.Cast,t,s)}}),[],{}),t}runKernel(e,t,s){if(null==this.backendName&&this.backend,!(null!=(0,r.getKernel)(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,s){const n=this.backend.numDataIds();let r=0;s.forEach(e=>{r+="complex64"===e.dtype?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=n-t-r-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak `+`(${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,s=[];const n=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;let o,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const d=p(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(p(e)){const{kernelName:t,inputs:a,attrs:i}=e;null==this.backendName&&this.backend;const d=(0,r.getKernel)(t,this.backendName);h.assert(null!=d,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),o=(()=>{const e=this.backend.numDataIds();c=d.kernelFunc({inputs:a,attrs:i,backend:this.backend});const r=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,r);const o=r.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(n){const e=this.getTensorsForGradient(t,a,o);s=this.saveTensorsForBackwardMode(e)}return o})}else{const{forwardFunc:t}=e,r=e=>{n&&(s=e.map(e=>this.keep(this.clone(e))))};o=(()=>{const e=this.backend.numDataIds();c=this.tidy(()=>t(this.backend,r));const s=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(d,e,s),s})}const{inputs:l,attrs:u}=e,f=p(e)?null:e.backwardsFunc;let k;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(k=this.profiler.profileKernel(d,l,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(k),t=k.outputs):t=o()}),n&&this.addTapeNode(d,l,t,f,s,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:d,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(e=>null!=l[e]?l[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:k.timeMs,extraInfo:k.extraInfo}),Array.isArray(c)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,s){const n=(0,r.getGradient)(e);if(null!=n){const e=n.inputsToSave||[],r=n.outputsToSave||[];let a;n.saveAllInputs?(h.assert(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(t).map(e=>t[e])):a=e.map(e=>t[e]);const i=s.filter((e,t)=>r[t]);return a.concat(i)}return[]}makeTensor(e,t,s,n){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",n=n||this.backend;let r=e;"string"===s&&h.isString(e[0])&&(r=e.map(e=>h.encodeString(e)));const a=n.write(r,t,s),i=new c.Tensor(t,s,a,this.nextTensorId());if(this.trackTensor(i,n),"string"===s){const e=this.state.tensorInfo.get(a),t=(0,h.bytesFromStringArray)(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,s,n){const r={dataId:e,shape:t,dtype:s=s||"float32"};return this.makeTensorFromTensorInfo(r,n)}makeTensorFromTensorInfo(e,t){const{dataId:s,shape:n,dtype:r}=e,a=new c.Tensor(n,r,s,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e,t=!0,s,n){s=s||this.nextVariableId().toString(),null!=n&&n!==e.dtype&&(e=e.cast(n));const r=new c.Variable(e,t,s,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let s=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(s=e.size*h.bytesPerElement(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof c.Variable||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*h.bytesPerElement(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const n of this.state.activeProfile.kernels)n.kernelTimeMs=await n.kernelTimeMs,n.extraInfo=await n.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,s,n,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:s,saved:a},c=(0,r.getGradient)(e);null!=c&&(n=c.gradFunc),null!=n&&(o.gradient=(e=>(e=e.map((e,t)=>{if(null==e){const e=s[t],n=h.makeZerosTypedArray(e.size,e.dtype);return this.makeTensor(n,e.shape,e.dtype)}return e}),n(e.length>1?e:e[0],a,i)))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,d.getTensorsInContainer)(e),s=new Set(t.map(e=>e.id));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||s.has(e.id)||e.dispose()}const n=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==n.id||this.track(e)})}gradients(e,t,s,n=!1){if(h.assert(t.length>0,()=>"gradients() received an empty list of xs."),null!=s&&"float32"!==s.dtype)throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));h.assert(r instanceof c.Tensor,()=>"The result y returned by f() must be a tensor.");const a=(0,o.getFilteredNodesXToY)(this.state.activeTape,t,r);if(!n&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[r.id]=null==s?y(r.shape):s,(0,o.backpropagateGradients)(e,a,e=>this.tidy(e),b);const n=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:r,grads:n}})}customGrad(e){return h.assert(h.isFunction(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let s;h.assert(t.every(e=>e instanceof c.Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const n={};t.forEach((e,t)=>{n[t]=e});return this.runKernelFunc({forwardFunc:(n,r)=>(s=e(...t,r),h.assert(s.value instanceof c.Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),h.assert(h.isFunction(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),backwardsFunc:(e,n)=>{const r=s.gradFunc(e,n),a=Array.isArray(r)?r:[r];h.assert(a.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),h.assert(a.every(e=>e instanceof c.Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const i={};return a.forEach((e,t)=>{i[t]=(()=>e)}),i},inputs:n})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=(0,h.now)(),s=await this.backend.time(e);return s.wallMs=(0,h.now)()-t,s}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new f;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function y(e){const t=(0,h.makeOnesTypedArray)((0,h.sizeFromShape)(e),"float32");return m.makeTensor(t,e,"float32")}function g(){const e=(0,s.getGlobalNamespace)();if(null==e._tfengine){const s=new t.Environment(e);e._tfengine=new k(s)}return(0,t.setEnvironmentGlobal)(e._tfengine.ENV),(0,c.setTensorTracker)(()=>e._tfengine),e._tfengine}exports.Engine=k,k.nextTensorId=0,k.nextVariableId=0;const m=g();function b(e,t){const s={a:e,b:t};return m.runKernel(n.Add,s)}exports.ENGINE=m;
},{"./backends/backend":"cAqc","./environment":"uGoP","./global_util":"QcKL","./kernel_names":"E7d7","./kernel_registry":"q1HN","./log":"O507","./profiler":"S9zH","./tape":"bk8u","./tensor":"olbE","./tensor_util":"Wwfk","./util":"uQV1"}],"ih56":[function(require,module,exports) {
var process = require("process");
var e=require("process");require("./engine");var r=i(require("./device_util")),t=require("./environment");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var g=o?Object.getOwnPropertyDescriptor(e,a):null;g&&(g.get||g.set)?Object.defineProperty(i,a,g):i[a]=e[a]}return i.default=e,t&&t.set(e,i),i}const o=(0,t.env)();o.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),o.registerFlag("IS_BROWSER",()=>r.isBrowser()),o.registerFlag("IS_NODE",()=>void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node),o.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),o.registerFlag("PROD",()=>!1),o.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>o.getBool("DEBUG")),o.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),o.registerFlag("IS_TEST",()=>!1),o.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),o.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),o.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);
},{"./engine":"Wn3f","./device_util":"GUPw","./environment":"uGoP","process":"g5IB"}],"qMTF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertToTensor=a,exports.convertToTensorArray=u,exports.inferShape=o;var r=require("./engine"),e=require("./environment"),n=require("./tensor"),t=require("./util");function o(r,n){let o=r;if((0,t.isTypedArray)(r))return"string"===n?[]:[r.length];if(!Array.isArray(r))return[];const i=[];for(;Array.isArray(o)||(0,t.isTypedArray)(o)&&"string"!==n;)i.push(o.length),o=o[0];return Array.isArray(r)&&(0,e.env)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&s(r,i,[]),i}function s(r,e,n){if(n=n||[],!Array.isArray(r)&&!(0,t.isTypedArray)(r))return void(0,t.assert)(0===e.length,()=>`Element arr[${n.join("][")}] is a primitive, `+`but should be an array/TypedArray of ${e[0]} elements`);(0,t.assert)(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, `+`but is an array of ${r.length} elements`),(0,t.assert)(r.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} `+`elements, but has ${r.length} elements`);const o=e.slice(1);for(let t=0;t<r.length;++t)s(r[t],o,n.concat(t))}function i(r,e,n,t){if("string_or_numeric"!==r){if(null==r)throw new Error("Expected dtype cannot be null.");if("numeric"!==r&&r!==e||"numeric"===r&&"string"===e)throw new Error(`Argument '${n}' passed to '${t}' must `+`be ${r} tensor, but got ${e} tensor`)}}function a(e,s,a,u="numeric"){if(e instanceof n.Tensor)return i(u,e.dtype,s,a),e;let l=(0,t.inferDtype)(e);if("string"!==l&&["bool","int32","float32"].indexOf(u)>=0&&(l=u),i(u,l,s,a),null==e||!(0,t.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${s}' passed to '${a}' must be a `+`Tensor or TensorLike, but got '${r}'`)}const y=o(e,l);(0,t.isTypedArray)(e)||Array.isArray(e)||(e=[e]);const f="string"!==l?(0,t.toTypedArray)(e,l):(0,t.flatten)(e,[],!0);return r.ENGINE.makeTensor(f,y,l)}function u(r,e,n,t="numeric"){if(!Array.isArray(r))throw new Error(`Argument ${e} passed to ${n} must be a `+"`Tensor[]` or `TensorLike[]`");return r.map((r,o)=>a(r,`${e}[${o}]`,n,t))}
},{"./engine":"Wn3f","./environment":"uGoP","./tensor":"olbE","./util":"uQV1"}],"pYCl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OP_SCOPE_SUFFIX=void 0,exports.op=n;var e=require("../engine"),t=require("../util");const o="__op";function n(n){const r=Object.keys(n);if(1!==r.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+`${r.length} keys.`);let i=r[0];const s=n[i];i.endsWith("_")&&(i=i.substring(0,i.length-1)),i+=o;const c=(...o)=>{e.ENGINE.startScope(i);try{const r=s(...o);return(0,t.isPromise)(r)&&console.error("Cannot return a Promise inside of tidy."),e.ENGINE.endScope(r),r}catch(n){throw e.ENGINE.endScope(null),n}};return Object.defineProperty(c,"name",{value:i,configurable:!0}),c}exports.OP_SCOPE_SUFFIX=o;
},{"../engine":"Wn3f","../util":"uQV1"}],"EUHH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=p(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var u=o?Object.getOwnPropertyDescriptor(e,p):null;u&&(u.get||u.set)?Object.defineProperty(n,p,u):n[p]=e[p]}return n.default=e,t&&t.set(e,n),n}function u(o,a){const p=(0,t.convertToTensor)(o,"real","complex"),u=(0,t.convertToTensor)(a,"imag","complex");n.assertShapesMatch(p.shape,u.shape,`real and imag shapes, ${p.shape} and ${u.shape}, `+"must match in call to tf.complex().");const i={real:p,imag:u};return e.ENGINE.runKernel(r.Complex,i)}const i=(0,o.op)({complex_:u});exports.complex=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"S7VZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTensor=s;var e=require("../engine"),r=require("../util");function s(s,o,t,a){if(null==a&&(a=(0,r.inferDtype)(s)),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,r.isTypedArray)(s)&&!Array.isArray(s)&&"number"!=typeof s&&"boolean"!=typeof s&&"string"!=typeof s)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=o){(0,r.assertNonNegativeIntegerDimensions)(o);const e=(0,r.sizeFromShape)(o),s=(0,r.sizeFromShape)(t);(0,r.assert)(e===s,()=>`Based on the provided shape, [${o}], the tensor should have `+`${e} values but has ${s}`);for(let a=0;a<t.length;++a){const e=t[a],s=a!==t.length-1||e!==(0,r.sizeFromShape)(o.slice(a));(0,r.assert)(t[a]===o[a]||!s,()=>"Error creating a new Tensor. Inferred shape "+`(${t}) does not match the provided `+`shape (${o}). `)}}return(0,r.isTypedArray)(s)||Array.isArray(s)||(s=[s]),o=o||t,s="string"!==a?(0,r.toTypedArray)(s,a):(0,r.flatten)(s,[],!0),e.ENGINE.makeTensor(s,o,a)}
},{"../engine":"Wn3f","../util":"uQV1"}],"EMF1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor=t;var e=require("../tensor_util_env"),r=require("./tensor_ops_util");function t(t,n,o){const s=(0,e.inferShape)(t,o);return(0,r.makeTensor)(t,n,s,o)}
},{"../tensor_util_env":"qMTF","./tensor_ops_util":"S7VZ"}],"eY3W":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayBufferToBase64String=u,exports.base64StringToArrayBuffer=p,exports.basename=c,exports.concatenateArrayBuffers=d,exports.concatenateTypedArrays=l,exports.decodeWeights=s,exports.encodeWeights=a,exports.getFloat16Decoder=U,exports.getModelArtifactsForJSON=h,exports.getModelArtifactsInfoForJSON=w,exports.getModelJSONForModelArtifacts=g,exports.stringByteLength=y;var t=require("../ops/complex"),n=require("../ops/tensor"),r=require("../util"),o=require("./types");const i=4;async function a(e,t){const n=[],r=[],o=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let a=0;a<o.length;++a){const s=o[a],l=Array.isArray(e)?e[a].tensor:e[s];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype&&"complex64"!==l.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const f={name:s,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){const e=new Promise(async e=>{const t=await l.bytes(),n=t.reduce((e,t)=>e+t.length,0)+i*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=i,r.set(e,o),o+=e.length}e(r)});r.push(e)}else r.push(l.data());null!=t&&(f.group=t),n.push(f)}return{data:l(await Promise.all(r)),specs:n}}function s(e,a){const s={};let l,f=0;for(const y of a){const a=y.name,u=y.dtype,p=y.shape,d=(0,r.sizeFromShape)(p);let c;if("quantization"in y){const t=y.quantization;if("uint8"===t.dtype||"uint16"===t.dtype){if(!("min"in t&&"scale"in t))throw new Error(`Weight ${y.name} with quantization ${t.dtype} `+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==t.dtype)throw new Error(`Weight ${y.name} has unknown `+`quantization dtype ${t.dtype}. `+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==u)throw new Error(`Weight ${y.name} is quantized with ${t.dtype} `+`which only supports weights of type float32 not ${u}.`)}const n=o.DTYPE_VALUE_SIZE_MAP[t.dtype],r=e.slice(f,f+d*n),i="uint8"===t.dtype?new Uint8Array(r):new Uint16Array(r);if("float32"===u)if("uint8"===t.dtype||"uint16"===t.dtype){c=new Float32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];c[e]=n*t.scale+t.min}}else{if("float16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type float32.");void 0===l&&(l=U()),c=l(i)}else{if("int32"!==u)throw new Error(`Unsupported dtype in weight '${a}': ${u}`);if("uint8"!==t.dtype&&"uint16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type int32.");c=new Int32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];c[e]=Math.round(n*t.scale+t.min)}}f+=d*n}else if("string"===u){const t=(0,r.sizeFromShape)(y.shape);c=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(f,f+i))[0];f+=i;const n=new Uint8Array(e.slice(f,f+t));c.push(n),f+=t}}else{const r=o.DTYPE_VALUE_SIZE_MAP[u],i=e.slice(f,f+d*r);if("float32"===u)c=new Float32Array(i);else if("int32"===u)c=new Int32Array(i);else if("bool"===u)c=new Uint8Array(i);else{if("complex64"!==u)throw new Error(`Unsupported dtype in weight '${a}': ${u}`);{c=new Float32Array(i);const e=new Float32Array(c.length/2),r=new Float32Array(c.length/2);for(let t=0;t<e.length;t++)e[t]=c[2*t],r[t]=c[2*t+1];const o=(0,n.tensor)(e,p,"float32"),l=(0,n.tensor)(r,p,"float32");s[a]=(0,t.complex)(o,l),o.dispose(),l.dispose()}}f+=d*r}"complex64"!==u&&(s[a]=(0,n.tensor)(c,p,u))}return s}function l(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});const r=new Uint8Array(t);let o=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength}),r.buffer}const f=void 0!==e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function y(t){return f?e.byteLength(t):new Blob([t]).size}function u(t){if(f)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,o=n.length;e<o;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function p(t){if(f){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function d(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function c(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function g(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function h(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){const[r,o]=await t(e.weightsManifest);n.weightSpecs=r,n.weightData=o}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),n}function w(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:y(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:y(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function A(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function m(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function b(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function U(){const e=A(),t=m(),n=b();return r=>{const o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let a=0;a<r.length;a++){const o=r[a],s=e[n[o>>10]+(1023&o)]+t[o>>10];i[a]=s}return new Float32Array(o)}}
},{"../ops/complex":"EUHH","../ops/tensor":"EMF1","../util":"uQV1","./types":"annF","buffer":"aMB2"}],"TkNB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserIndexedDBManager=exports.BrowserIndexedDB=void 0,exports.browserIndexedDB=h,exports.deleteDatabase=d,exports.indexedDBRouter=void 0,require("../flags");var e=require("../environment"),o=require("./io_utils"),r=require("./router_registry");const t="tensorflowjs",n=1,s="models_store",c="model_info_store";async function d(){const e=l();return new Promise((o,r)=>{const n=e.deleteDatabase(t);n.onsuccess=(()=>o()),n.onerror=(e=>r(e))})}function l(){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const o="undefined"==typeof window?self:window,r=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB||o.shimIndexedDB;if(null==r)throw new Error("The current browser does not appear to support IndexedDB.");return r}function i(e){const o=e.result;o.createObjectStore(s,{keyPath:"modelPath"}),o.createObjectStore(c,{keyPath:"modelPath"})}class a{constructor(e){if(this.indexedDB=l(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,r){return new Promise((e,d)=>{const l=this.indexedDB.open(t,n);l.onupgradeneeded=(()=>i(l)),l.onsuccess=(()=>{const t=l.result;if(null==r){const o=t.transaction(s,"readonly"),r=o.objectStore(s).get(this.modelPath);r.onsuccess=(()=>{if(null==r.result)return t.close(),d(new Error(`Cannot find model with path '${this.modelPath}' `+"in IndexedDB."));e(r.result.modelArtifacts)}),r.onerror=(e=>(t.close(),d(r.error))),o.oncomplete=(()=>t.close())}else{const n=(0,o.getModelArtifactsInfoForJSON)(r),l=t.transaction(c,"readwrite");let i=l.objectStore(c);const a=i.put({modelPath:this.modelPath,modelArtifactsInfo:n});let u;a.onsuccess=(()=>{const o=(u=t.transaction(s,"readwrite")).objectStore(s).put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:n});o.onsuccess=(()=>e({modelArtifactsInfo:n})),o.onerror=(e=>{const r=(i=l.objectStore(c)).delete(this.modelPath);r.onsuccess=(()=>(t.close(),d(o.error))),r.onerror=(e=>(t.close(),d(o.error)))})}),a.onerror=(e=>(t.close(),d(a.error))),l.oncomplete=(()=>{null==u?t.close():u.oncomplete=(()=>t.close())})}}),l.onerror=(e=>d(l.error))})}}exports.BrowserIndexedDB=a,a.URL_SCHEME="indexeddb://";const u=o=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(o)&&o.startsWith(a.URL_SCHEME)?h(o.slice(a.URL_SCHEME.length)):null;function h(e){return new a(e)}function m(e){return e.startsWith(a.URL_SCHEME)?e.slice(a.URL_SCHEME.length):e}exports.indexedDBRouter=u,r.IORouterRegistry.registerSaveRouter(u),r.IORouterRegistry.registerLoadRouter(u);class f{constructor(){this.indexedDB=l()}async listModels(){return new Promise((e,o)=>{const r=this.indexedDB.open(t,n);r.onupgradeneeded=(()=>i(r)),r.onsuccess=(()=>{const t=r.result,n=t.transaction(c,"readonly"),s=n.objectStore(c).getAll();s.onsuccess=(()=>{const o={};for(const e of s.result)o[e.modelPath]=e.modelArtifactsInfo;e(o)}),s.onerror=(e=>(t.close(),o(s.error))),n.oncomplete=(()=>t.close())}),r.onerror=(e=>o(r.error))})}async removeModel(e){return e=m(e),new Promise((o,r)=>{const d=this.indexedDB.open(t,n);d.onupgradeneeded=(()=>i(d)),d.onsuccess=(()=>{const t=d.result,n=t.transaction(c,"readwrite"),l=n.objectStore(c),i=l.get(e);let a;i.onsuccess=(()=>{if(null==i.result)return t.close(),r(new Error(`Cannot find model with path '${e}' `+"in IndexedDB."));{const n=l.delete(e),c=()=>{const n=(a=t.transaction(s,"readwrite")).objectStore(s).delete(e);n.onsuccess=(()=>o(i.result.modelArtifactsInfo)),n.onerror=(e=>r(i.error))};n.onsuccess=c,n.onerror=(e=>(c(),t.close(),r(i.error)))}}),i.onerror=(e=>(t.close(),r(i.error))),n.oncomplete=(()=>{null==a?t.close():a.oncomplete=(()=>t.close())})}),d.onerror=(e=>r(d.error))})}}exports.BrowserIndexedDBManager=f;
},{"../flags":"ih56","../environment":"uGoP","./io_utils":"eY3W","./router_registry":"y7n6"}],"sEJx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserLocalStorageManager=exports.BrowserLocalStorage=void 0,exports.browserLocalStorage=y,exports.localStorageRouter=void 0,exports.purgeLocalStorageArtifacts=h,require("../flags");var e=require("../environment"),t=require("../util"),o=require("./io_utils"),r=require("./router_registry");const i="/",n="tensorflowjs_models",s="info",a="model_topology",l="weight_specs",g="weight_data",d="model_metadata";function h(){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("purgeLocalStorageModels() cannot proceed because local storage is unavailable in the current environment.");const t=window.localStorage,o=[];for(let e=0;e<t.length;++e){const r=t.key(e),s=n+i;if(r.startsWith(s)&&r.length>s.length){t.removeItem(r);const e=f(r);-1===o.indexOf(e)&&o.push(e)}}return o}function c(e){return{info:[n,e,s].join(i),topology:[n,e,a].join(i),weightSpecs:[n,e,l].join(i),weightData:[n,e,g].join(i),modelMetadata:[n,e,d].join(i)}}function u(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function f(e){const t=e.split(i);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(i)}function w(e){return e.startsWith(S.URL_SCHEME)?e.slice(S.URL_SCHEME.length):e}class S{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=c(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const r=JSON.stringify(e.modelTopology),i=JSON.stringify(e.weightSpecs),n=(0,o.getModelArtifactsInfoForJSON)(e);try{this.LS.setItem(this.keys.info,JSON.stringify(n)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,(0,o.arrayBufferToBase64String)(e.weightData));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:n}}catch(t){throw u(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: `+"size quota being exceeded is a possible cause of this failure: "+`modelTopologyBytes=${n.modelTopologyBytes}, `+`weightSpecsBytes=${n.weightSpecsBytes}, `+`weightDataBytes=${n.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${this.modelPath}' `+"is missing.");t.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==i)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' `+"are missing.");t.weightSpecs=i;const n=this.LS.getItem(this.keys.modelMetadata);if(null!=n){const e=JSON.parse(n);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error("In local storage, the binary weight values of model "+`'${this.modelPath}' are missing.`);return t.weightData=(0,o.base64StringToArrayBuffer)(s),t}}exports.BrowserLocalStorage=S,S.URL_SCHEME="localstorage://";const m=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(S.URL_SCHEME)?y(t.slice(S.URL_SCHEME.length)):null;function y(e){return new S(e)}exports.localStorageRouter=m,r.IORouterRegistry.registerSaveRouter(m),r.IORouterRegistry.registerLoadRouter(m);class p{constructor(){(0,t.assert)((0,e.env)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,t.assert)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=n+i,o=i+s;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(o)){e[f(i)]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){const t=c(e=w(e));if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);const o=JSON.parse(this.LS.getItem(t.info));return u(t),o}}exports.BrowserLocalStorageManager=p;
},{"../flags":"ih56","../environment":"uGoP","../util":"uQV1","./io_utils":"eY3W","./router_registry":"y7n6"}],"liwv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModelStoreManagerRegistry=void 0,exports.copyModel=c,exports.listModels=o,exports.moveModel=l,exports.removeModel=i;var e=require("../util"),t=require("./router_registry");const n="://";class s{constructor(){this.managers={}}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}static registerManager(t,r){(0,e.assert)(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(n)&&(t=t.slice(0,t.indexOf(n))),(0,e.assert)(t.length>0,()=>"scheme must not be an empty string.");const a=s.getInstance();(0,e.assert)(null==a.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),a.managers[t]=r}static getManager(e){const t=s.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(s.getInstance().managers)}}function r(e){if(-1===e.indexOf(n))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+`${s.getSchemes().join(",")}`);return{scheme:e.split(n)[0],path:e.split(n)[1]}}async function a(n,a,o=!1){(0,e.assert)(n!==a,()=>`Old path and new path are the same: '${n}'`);const i=t.IORouterRegistry.getLoadHandlers(n);(0,e.assert)(i.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),(0,e.assert)(i.length<2,()=>`Copying failed because more than one (${i.length}) `+`load handlers for source URL ${n}.`);const c=i[0],l=t.IORouterRegistry.getSaveHandlers(a);(0,e.assert)(l.length>0,()=>"Copying failed because no save handler is found for destination "+`URL ${a}.`),(0,e.assert)(l.length<2,()=>`Copying failed because more than one (${i.length}) `+`save handlers for destination URL ${a}.`);const g=l[0],d=r(n).scheme,u=r(n).path,h=d===r(n).scheme,m=await c.load();o&&h&&await s.getManager(d).removeModel(u);const f=await g.save(m);return o&&!h&&await s.getManager(d).removeModel(u),f.modelArtifactsInfo}async function o(){const e=s.getSchemes(),t={};for(const r of e){const e=await s.getManager(r).listModels();for(const s in e){t[r+n+s]=e[s]}}return t}async function i(e){const t=r(e);return s.getManager(t.scheme).removeModel(t.path)}async function c(e,t){return a(e,t,!1)}async function l(e,t){return a(e,t,!0)}exports.ModelStoreManagerRegistry=s;
},{"../util":"uQV1","./router_registry":"y7n6"}],"fSuA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlatformBrowser=void 0,require("../flags");var e=require("../environment"),r=require("../io/indexed_db"),t=require("../io/local_storage"),o=require("../io/model_management");class n{fetch(e,r){return fetch(e,r)}now(){return performance.now()}encode(e,r){if("utf-8"!==r&&"utf8"!==r)throw new Error(`Browser's encoder only supports utf-8, but got ${r}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,r){return new TextDecoder(r).decode(e)}}if(exports.PlatformBrowser=n,(0,e.env)().get("IS_BROWSER")){(0,e.env)().setPlatform("browser",new n);try{o.ModelStoreManagerRegistry.registerManager(t.BrowserLocalStorage.URL_SCHEME,new t.BrowserLocalStorageManager)}catch(a){}try{o.ModelStoreManagerRegistry.registerManager(r.BrowserIndexedDB.URL_SCHEME,new r.BrowserIndexedDBManager)}catch(a){}}
},{"../flags":"ih56","../environment":"uGoP","../io/indexed_db":"TkNB","../io/local_storage":"sEJx","../io/model_management":"liwv"}],"SYlu":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNodeFetch=exports.PlatformNode=void 0,exports.getSystemFetch=s,exports.resetSystemFetch=n,exports.setSystemFetch=c;var t=require("../environment");const r={importFetch:()=>require("node-fetch")};let o;function n(){o=null}function c(e){o=e}function s(){return o}exports.getNodeFetch=r;class u{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=(0,t.env)().global.fetch?(0,t.env)().global.fetch(e,n):(null==o&&(o=r.importFetch()),o(e,n))}now(){const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}exports.PlatformNode=u,(0,t.env)().get("IS_NODE")&&!(0,t.env)().get("IS_BROWSER")&&(0,t.env)().setPlatform("node",new u);
},{"../environment":"uGoP","node-fetch":"sC8V","util":"sC8V","process":"g5IB"}],"Ajeg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=o;var e=require("../tensor"),t=n(require("../util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&Object.prototype.hasOwnProperty.call(e,f)){var i=u?Object.getOwnPropertyDescriptor(e,f):null;i&&(i.get||i.set)?Object.defineProperty(o,f,i):o[f]=e[f]}return o.default=e,n&&n.set(e,o),o}function o(r,n="float32",o){return n=n||"float32",t.assertNonNegativeIntegerDimensions(r),new e.TensorBuffer(r,n,o)}
},{"../tensor":"olbE","../util":"uQV1"}],"OenY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function u(o,i){const s=(0,r.convertToTensor)(o,"x","cast");if(!n.isValidDtype(i))throw new Error(`Failed to cast to unknown dtype ${i}`);if("string"===i&&"string"!==s.dtype||"string"!==i&&"string"===s.dtype)throw new Error("Only strings can be casted to strings");const u={x:s},a={dtype:i};return e.ENGINE.runKernel(t.Cast,u,a)}const a=(0,o.op)({cast_:u});exports.cast=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"cQJm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","clone","string_or_numeric")};return e.ENGINE.runKernel(r.Identity,t)}const i=(0,o.op)({clone_:t});exports.clone=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"eFiU":[function(require,module,exports) {
"use strict";var r=require("./engine");require("./flags"),require("./platforms/platform_browser"),require("./platforms/platform_node");var e=require("./ops/buffer"),s=require("./ops/cast"),t=require("./ops/clone"),i=require("./ops/print"),o=require("./tensor");(0,r.getOrMakeEngine)();const n={buffer:e.buffer,cast:s.cast,clone:t.clone,print:i.print};(0,o.setOpHandler)(n);
},{"./engine":"Wn3f","./flags":"ih56","./platforms/platform_browser":"fSuA","./platforms/platform_node":"SYlu","./ops/buffer":"Ajeg","./ops/cast":"OenY","./ops/clone":"cQJm","./ops/print":"xBTU","./tensor":"olbE"}],"CFBp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserDownloads=void 0,exports.browserDownloads=d,exports.browserDownloadsRouter=void 0,exports.browserFiles=w,require("../flags");var e=require("../environment"),t=require("./io_utils"),o=require("./router_registry");const s="model",r=".json",i=".weights.bin";function n(e){return new Promise(e=>setTimeout(e)).then(e)}class a{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(a.URL_SCHEME)&&(t=t.slice(a.URL_SCHEME.length)),null!=t&&0!==t.length||(t=s),this.modelJsonFileName=t+r,this.weightDataFileName=t+i}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const o=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r=(0,t.getModelJSONForModelArtifacts)(e,s),i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=i,await n(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=o,await n(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:(0,t.getModelArtifactsInfoForJSON)(e)}}}}exports.BrowserDownloads=a,a.URL_SCHEME="downloads://";class l{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+`but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,o)=>{const s=new FileReader;s.onload=(s=>{const r=JSON.parse(s.target.result),i=r.modelTopology;if(null==i)return void o(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void o(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:i});const n=(0,t.getModelArtifactsForJSON)(r,e=>this.loadWeights(e));e(n)}),s.onerror=(e=>o("Failed to read model topology and weights manifest JSON "+`from file '${this.jsonFile.name}'. BrowserFiles supports loading `+"Keras-style tf.Model artifacts only.")),s.readAsText(this.jsonFile)})}loadWeights(e){const o=[],s=[];for(const t of e)o.push(...t.weights),s.push(...t.paths);const r=this.checkManifestAndWeightFiles(e),i=s.map(e=>this.loadWeightsFile(e,r[e]));return Promise.all(i).then(e=>[o,(0,t.concatenateArrayBuffers)(e)])}loadWeightsFile(e,t){return new Promise((o,s)=>{const r=new FileReader;r.onload=(e=>{const t=e.target.result;o(t)}),r.onerror=(t=>s(`Failed to weights data from file of path '${e}'.`)),r.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const o=[],s=this.weightsFiles.map(e=>(0,t.basename)(e.name)),r={};for(const i of e)i.paths.forEach(e=>{const i=(0,t.basename)(e);if(-1!==o.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: "+`'${i}'`);if(o.push(i),-1===s.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);r[e]=this.weightsFiles[s.indexOf(i)]});if(o.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+`(${o.length}) and the number of weight files provided `+`(${this.weightsFiles.length}).`);return r}}const h=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(a.URL_SCHEME)?d(t.slice(a.URL_SCHEME.length)):null;function d(e="model"){return new a(e)}function w(e){return new l(e)}exports.browserDownloadsRouter=h,o.IORouterRegistry.registerSaveRouter(h);
},{"../flags":"ih56","../environment":"uGoP","./io_utils":"eY3W","./router_registry":"y7n6"}],"qF0V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.monitorPromisesProgress=r;var t=require("../util");function r(r,e,n,s){!function(r){(0,t.assert)(null!=r&&Array.isArray(r)&&r.length>0,()=>"promises must be a none empty array")}(r),function(r,e){(0,t.assert)(r>=0&&r<=1,()=>"Progress fraction must be in range [0, 1], but "+`got startFraction ${r}`),(0,t.assert)(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+`got endFraction ${e}`),(0,t.assert)(e>=r,()=>"startFraction must be no more than endFraction, but "+`got startFraction ${r} and endFraction `+`${e}`)}(n=null==n?0:n,s=null==s?1:s);let o=0;return Promise.all(r.map(t=>(t.then(t=>{const a=n+ ++o/r.length*(s-n);return e(a),t}),t)))}
},{"../util":"uQV1"}],"QBgi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadWeights=u,exports.loadWeightsAsArrayBuffer=a,exports.weightsLoaderFactory=f;var e=require("../environment"),t=i(require("../util")),r=require("./io_utils"),n=require("./progress"),o=require("./types");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}async function a(t,r){null==r&&(r={});const o=null==r.fetchFunc?(0,e.env)().platform.fetch:r.fetchFunc,s=t.map(e=>o(e,r.requestInit,{isBinary:!0})),i=(null==r.onProgress?await Promise.all(s):await(0,n.monitorPromisesProgress)(s,r.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==r.onProgress?await Promise.all(i):await(0,n.monitorPromisesProgress)(i,r.onProgress,.5,1)}async function u(e,t="",r,n){return f(e=>a(e,{requestInit:n}))(e,t,r)}function f(e){return async(n,s="",i)=>{const a=n.map(()=>!1),u={},f=null!=i?i.map(()=>!1):[],c=[];if(n.forEach((e,r)=>{let n=0;e.weights.forEach(e=>{const s="quantization"in e?e.quantization.dtype:e.dtype,l=o.DTYPE_VALUE_SIZE_MAP[s]*t.sizeFromShape(e.shape),p=()=>{a[r]=!0,null==u[r]&&(u[r]=[]),u[r].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=i?i.forEach((t,r)=>{t===e.name&&(p(),f[r]=!0)}):p(),c.push(e.name),n+=l})}),!f.every(e=>e)){const e=i.filter((e,t)=>!f[t]);throw new Error("Could not find weights in manifest with names: "+`${e.join(", ")}. \n`+"Manifest JSON has weights with names: "+`${c.join(", ")}.`)}const l=a.reduce((e,t,r)=>(t&&e.push(r),e),[]),p=[];l.forEach(e=>{n[e].paths.forEach(e=>{const t=s+(s.endsWith("/")?"":"/")+e;p.push(t)})});const h=await e(p),y={};let g=0;return l.forEach(e=>{const t=n[e].paths.length;let o=0;for(let r=0;r<t;r++)o+=h[g+r].byteLength;const s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let r=0;r<t;r++){const e=new Uint8Array(h[g+r]);i.set(e,a),a+=e.byteLength}u[e].forEach(e=>{const t=s.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=(0,r.decodeWeights)(t,[e.manifestEntry]);for(const r in n)y[r]=n[r]}),g+=t}),y}}
},{"../environment":"uGoP","../util":"uQV1","./io_utils":"eY3W","./progress":"qF0V","./types":"annF"}],"YW6l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HTTPRequest=void 0,exports.browserHTTPRequest=c,exports.http=f,exports.httpRouter=void 0,exports.isHTTPScheme=l,exports.parseUrl=a;var t=require("../environment"),e=require("../util"),r=require("./io_utils"),s=require("./router_registry"),o=require("./weights_loader");const n="application/octet-stream",i="application/json";class h{constructor(r,s){if(this.DEFAULT_METHOD="POST",null==s&&(s={}),this.weightPathPrefix=s.weightPathPrefix,this.onProgress=s.onProgress,this.weightUrlConverter=s.weightUrlConverter,null!=s.fetchFunc?((0,e.assert)("function"==typeof s.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=s.fetchFunc):this.fetch=(0,t.env)().platform.fetch,(0,e.assert)(null!=r&&r.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(r)&&(0,e.assert)(2===r.length,()=>"URL paths for http must have a length of 2, "+`(actual length is ${r.length}).`),this.path=r,null!=s.requestInit&&null!=s.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=s.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o=(0,r.getModelJSONForModelArtifacts)(t,s);e.body.append("model.json",new Blob([JSON.stringify(o)],{type:i}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:n}),"model.weights.bin");const h=await this.fetch(this.path,e);if(h.ok)return{modelArtifactsInfo:(0,r.getModelArtifactsInfoForJSON)(t),responses:[h]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+`${h.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code `+`${t.status}. Please verify this URL points to `+"the model JSON of the model to load.");let e;try{e=await t.json()}catch(n){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const s=e.modelTopology,o=e.weightsManifest;if(null==s&&null==o)throw new Error(`The JSON from HTTP path ${this.path} contains neither model `+"topology or manifest for weights.");return(0,r.getModelArtifactsForJSON)(e,t=>this.loadWeights(t))}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[s,n]=a(e),i=this.weightPathPrefix||s,h=[];for(const r of t)h.push(...r.weights);const l=[],u=[];for(const r of t)for(const t of r.paths)null!=this.weightUrlConverter?u.push(this.weightUrlConverter(t)):l.push(i+t+n);this.weightUrlConverter&&l.push(...await Promise.all(u));const f=await(0,o.loadWeightsAsArrayBuffer)(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[h,(0,r.concatenateArrayBuffers)(f)]}}function a(t){const e=t.lastIndexOf("/"),r=t.lastIndexOf("?");return[t.substring(0,e)+"/",r>e?t.substring(r):""]}function l(t){return null!=t.match(h.URL_SCHEME_REGEX)}exports.HTTPRequest=h,h.URL_SCHEME_REGEX=/^https?:\/\//;const u=(t,e)=>{if("undefined"==typeof fetch&&(null==e||null==e.fetchFunc))return null;{let r=!0;if(r=Array.isArray(t)?t.every(t=>l(t)):l(t))return f(t,e)}return null};function f(t,e){return new h(t,e)}function c(t,e){return f(t,e)}exports.httpRouter=u,s.IORouterRegistry.registerSaveRouter(u),s.IORouterRegistry.registerLoadRouter(u);
},{"../environment":"uGoP","../util":"uQV1","./io_utils":"eY3W","./router_registry":"y7n6","./weights_loader":"QBgi"}],"aVWB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromMemory=t,exports.fromMemorySync=n,exports.withSaveHandler=a,exports.withSaveHandlerSync=s;class e{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class o{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class r{constructor(e){e.load&&(this.load=(()=>Promise.resolve(e.load()))),e.save&&(this.save=(o=>Promise.resolve(e.save(o))))}}function t(e,o,t,a){return new r(n(...arguments))}function n(o,r,t,n){if(1===arguments.length){return null!=o.modelTopology||null!=o.weightSpecs?new e(o):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o,weightSpecs:r,weightData:t,trainingConfig:n})}function a(e){return new o(e)}function s(e){return new o(e)}
},{}],"dstj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"browserFiles",{enumerable:!0,get:function(){return e.browserFiles}}),Object.defineProperty(exports,"browserHTTPRequest",{enumerable:!0,get:function(){return r.browserHTTPRequest}}),Object.defineProperty(exports,"concatenateArrayBuffers",{enumerable:!0,get:function(){return t.concatenateArrayBuffers}}),Object.defineProperty(exports,"copyModel",{enumerable:!0,get:function(){return i.copyModel}}),Object.defineProperty(exports,"decodeWeights",{enumerable:!0,get:function(){return t.decodeWeights}}),Object.defineProperty(exports,"encodeWeights",{enumerable:!0,get:function(){return t.encodeWeights}}),Object.defineProperty(exports,"fromMemory",{enumerable:!0,get:function(){return n.fromMemory}}),Object.defineProperty(exports,"fromMemorySync",{enumerable:!0,get:function(){return n.fromMemorySync}}),Object.defineProperty(exports,"getLoadHandlers",{enumerable:!0,get:function(){return o.getLoadHandlers}}),Object.defineProperty(exports,"getModelArtifactsForJSON",{enumerable:!0,get:function(){return t.getModelArtifactsForJSON}}),Object.defineProperty(exports,"getModelArtifactsInfoForJSON",{enumerable:!0,get:function(){return t.getModelArtifactsInfoForJSON}}),Object.defineProperty(exports,"getSaveHandlers",{enumerable:!0,get:function(){return o.getSaveHandlers}}),Object.defineProperty(exports,"http",{enumerable:!0,get:function(){return r.http}}),Object.defineProperty(exports,"isHTTPScheme",{enumerable:!0,get:function(){return r.isHTTPScheme}}),Object.defineProperty(exports,"listModels",{enumerable:!0,get:function(){return i.listModels}}),Object.defineProperty(exports,"loadWeights",{enumerable:!0,get:function(){return u.loadWeights}}),Object.defineProperty(exports,"moveModel",{enumerable:!0,get:function(){return i.moveModel}}),Object.defineProperty(exports,"registerLoadRouter",{enumerable:!0,get:function(){return o.registerLoadRouter}}),Object.defineProperty(exports,"registerSaveRouter",{enumerable:!0,get:function(){return o.registerSaveRouter}}),Object.defineProperty(exports,"removeModel",{enumerable:!0,get:function(){return i.removeModel}}),Object.defineProperty(exports,"weightsLoaderFactory",{enumerable:!0,get:function(){return u.weightsLoaderFactory}}),Object.defineProperty(exports,"withSaveHandler",{enumerable:!0,get:function(){return n.withSaveHandler}}),Object.defineProperty(exports,"withSaveHandlerSync",{enumerable:!0,get:function(){return n.withSaveHandlerSync}}),require("./indexed_db"),require("./local_storage");var e=require("./browser_files"),r=require("./http"),t=require("./io_utils"),n=require("./passthrough"),o=require("./router_registry"),u=require("./weights_loader"),i=require("./model_management");
},{"./indexed_db":"TkNB","./local_storage":"sEJx","./browser_files":"CFBp","./http":"YW6l","./io_utils":"eY3W","./passthrough":"aVWB","./router_registry":"y7n6","./weights_loader":"QBgi","./model_management":"liwv"}],"cPiM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u,s=!1,a=!1){let i=(0,n.convertToTensor)(o,"a","matMul"),l=(0,n.convertToTensor)(u,"b","matMul");[i,l]=(0,t.makeTypesMatch)(i,l);const c={a:i,b:l},p={transposeA:s,transposeB:a};return e.ENGINE.runKernel(r.BatchMatMul,c,p)}const s=(0,o.op)({matMul_:u});exports.matMul=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./operation":"pYCl"}],"vztq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHot=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation");function t(n,t,i=1,s=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const u={indices:(0,r.convertToTensor)(n,"indices","oneHot","int32")},c={depth:t,onValue:i,offValue:s};return e.ENGINE.runKernel(o.OneHot,u,c)}const i=(0,n.op)({oneHot_:t});exports.oneHot=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"yD8k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.backend=m,exports.deprecationWarn=a,exports.disableDeprecationWarnings=s,exports.dispose=p,exports.disposeVariables=c,exports.enableDebugMode=i,exports.enableProdMode=o,exports.engine=u,exports.findBackend=B,exports.findBackendFactory=b,exports.getBackend=G,exports.keep=f,exports.memory=E,exports.profile=d,exports.ready=l,exports.registerBackend=g,exports.removeBackend=k,exports.setBackend=I,exports.setPlatform=v,exports.tidy=N,exports.time=x;var e=require("./engine"),n=require("./environment"),r=require("./tensor"),t=require("./tensor_util");function o(){(0,n.env)().set("PROD",!0)}function i(){(0,n.env)().set("DEBUG",!0)}function s(){(0,n.env)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function a(e){(0,n.env)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function c(){e.ENGINE.disposeVariables()}function u(){return e.ENGINE}function E(){return e.ENGINE.memory()}function d(n){return e.ENGINE.profile(n)}function N(n,r){return e.ENGINE.tidy(n,r)}function p(e){(0,t.getTensorsInContainer)(e).forEach(e=>e.dispose())}function f(n){return e.ENGINE.keep(n)}function x(n){return e.ENGINE.time(n)}function I(n){return e.ENGINE.setBackend(n)}function l(){return e.ENGINE.ready()}function G(){return e.ENGINE.backendName}function k(n){e.ENGINE.removeBackend(n)}function B(n){return e.ENGINE.findBackend(n)}function b(n){return e.ENGINE.findBackendFactory(n)}function g(n,r,t=1){return e.ENGINE.registerBackend(n,r,t)}function m(){return e.ENGINE.backend}function v(e,r){(0,n.env)().setPlatform(e,r)}(0,r.setDeprecationWarningFn)(a);
},{"./engine":"Wn3f","./environment":"uGoP","./tensor":"olbE","./tensor_util":"Wwfk"}],"MbCQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function t(i){const t={input:(0,n.convertToTensor)(i,"input","imag")};return e.ENGINE.runKernel(r.Imag,t)}const o=(0,i.op)({imag_:t});exports.imag=o;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"OZKu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","neg")};return e.ENGINE.runKernel(r.Neg,t)}const i=(0,o.op)({neg_:t});exports.neg=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"H6Zd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={input:(0,n.convertToTensor)(t,"input","real")};return e.ENGINE.runKernel(r.Real,o)}const i=(0,t.op)({real_:o});exports.real=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"gequ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=void 0;var e=require("../engine"),r=require("../globals"),n=require("../kernel_names"),t=require("../tensor_util_env"),o=c(require("../util")),a=require("./complex"),u=require("./imag"),s=require("./neg"),i=require("./operation"),p=require("./real");function l(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:r})(e)}function c(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(r);if(n&&n.has(e))return n.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(t,a,u):t[a]=e[a]}return t.default=e,n&&n.set(e,t),t}function f(i,l,c){const f=(0,t.convertToTensor)(i,"x","transpose");if(null==l&&(l=f.shape.map((e,r)=>r).reverse()),o.assert(f.rank===l.length,()=>`Error in transpose: rank of input ${f.rank} `+`must match length of perm ${l}.`),l.forEach(e=>{o.assert(e>=0&&e<f.rank,()=>`All entries in 'perm' must be between 0 and ${f.rank-1}`+` but got ${l}`)}),f.rank<=1)return f.clone();const g={x:f},m={perm:l};return"complex64"===f.dtype?(0,r.tidy)(()=>{let r=(0,p.real)(f),t=(0,u.imag)(f);return r=e.ENGINE.runKernel(n.Transpose,{x:r},m),t=e.ENGINE.runKernel(n.Transpose,{x:t},m),c&&(t=(0,s.neg)(t)),(0,a.complex)(r,t)}):e.ENGINE.runKernel(n.Transpose,g,m)}const g=(0,i.op)({transpose_:f});exports.transpose=g;
},{"../engine":"Wn3f","../globals":"yD8k","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./complex":"EUHH","./imag":"MbCQ","./neg":"OZKu","./operation":"pYCl","./real":"H6Zd"}],"SFSx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.confusionMatrix=void 0,exports.confusionMatrix_=c;var e=require("../tensor_util_env"),t=u(require("../util")),r=require("./cast"),n=require("./mat_mul"),o=require("./one_hot"),s=require("./operation"),i=require("./transpose");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function c(s,a,u){const c=(0,e.convertToTensor)(s,"labels","confusionMatrix"),p=(0,e.convertToTensor)(a,"predictions","confusionMatrix");t.assert(null==u||u>0&&Number.isInteger(u),()=>"If provided, numClasses must be a positive integer, "+`but got ${u}`),t.assert(1===c.rank,()=>`Expected the rank of labels to be 1, but got ${c.rank}`),t.assert(1===p.rank,()=>"Expected the rank of predictions to be 1, "+`but got ${p.rank}`),t.assert(c.shape[0]===p.shape[0],()=>"Mismatch in the number of examples: "+`${c.shape[0]} vs. ${p.shape[0]}. `+"Labels and predictions should have the same number of elements."),t.assert(u>0&&Number.isInteger(u),()=>"numClasses is required to be a positive integer, but got "+`${u}`);const f=(0,o.oneHot)((0,r.cast)(c,"int32"),u),l=(0,o.oneHot)((0,r.cast)(p,"int32"),u),b=(0,i.transpose)(f),d=(0,n.matMul)(b,l);return(0,r.cast)(d,"int32")}const p=(0,s.op)({confusionMatrix_:c});exports.confusionMatrix=p;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./cast":"OenY","./mat_mul":"cPiM","./one_hot":"vztq","./operation":"pYCl","./transpose":"gequ"}],"PL5y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"confusionMatrix",{enumerable:!0,get:function(){return e.confusionMatrix}});var e=require("./ops/confusion_matrix");
},{"./ops/confusion_matrix":"SFSx"}],"exf7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor3d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&3!==o.length)throw new Error("tensor3d() requires shape to have three numbers");const u=(0,e.inferShape)(n,s);if(3!==u.length&&1!==u.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"qMTF","../util":"uQV1","./tensor_ops_util":"S7VZ"}],"iY7q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromPixels=void 0,exports.fromPixelsAsync=h,exports.toPixels=w;var e=require("../engine"),t=require("../environment"),n=require("../kernel_names"),r=require("../kernel_registry"),o=require("../tensor"),a=require("../tensor_util_env"),i=require("./cast"),s=require("./operation"),l=require("./tensor3d");let f;function d(t,o=3){if(o>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let a=!1,i=!1,s=!1,d=!1,u=!1,c=!1;if(t.data instanceof Uint8Array)a=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)i=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)s=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)d=!0;else if(null!=t.getContext)u=!0;else{if(!("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+`but was ${t.constructor.name}`);c=!0}if(s){const e=2;if(s&&t.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=(0,r.getKernel)(n.FromPixels,e.ENGINE.backendName)){const r={pixels:t},a={numChannels:o};return e.ENGINE.runKernel(n.FromPixels,r,a)}const[m,p]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let h,w;if(u)h=t.getContext("2d").getImageData(0,0,m,p).data;else if(i||a)h=t.data;else if(d||s||c){if(null==f)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");f=new OffscreenCanvas(1,1).getContext("2d")}else f=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});f.canvas.width=m,f.canvas.height=p,f.drawImage(t,0,0,m,p),h=f.getImageData(0,0,m,p).data}if(4===o)w=new Int32Array(h);else{const e=m*p;w=new Int32Array(e*o);for(let t=0;t<e;t++)for(let e=0;e<o;++e)w[t*o+e]=h[4*t+e]}const g=[p,m,o];return(0,l.tensor3d)(w,g,"int32")}function u(e){return null!=e&&e.data instanceof Uint8Array}function c(){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")}function m(e){return null!=e&&0!==e.width&&0!==e.height}function p(e){return c()&&!(e instanceof ImageBitmap)&&m(e)&&!u(e)}async function h(e,n=3){let r=null;if((0,t.env)().getBool("WRAP_TO_IMAGEBITMAP")&&p(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(o){t=null}r=null!=t&&t.width===e.width&&t.height===e.height?t:e}else r=e;return d(r,n)}async function w(e,t){let n=(0,a.convertToTensor)(e,"img","toPixels");if(!(e instanceof o.Tensor)){const e=n;n=(0,i.cast)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,s]=n.shape.slice(0,2),l=2===n.rank?1:n.shape[2];if(l>4||2===l)throw new Error("toPixels only supports depth of size "+`1, 3 or 4 but got ${l}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}.`+" Please use float32 or int32 tensors.");const f=await n.data(),d="float32"===n.dtype?255:1,u=new Uint8ClampedArray(s*r*4);for(let o=0;o<r*s;++o){const e=[0,0,0,255];for(let r=0;r<l;r++){const t=f[o*l+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+`range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+`range [0 - 255] but encountered ${t}.`);1===l?(e[0]=t*d,e[1]=t*d,e[2]=t*d):e[r]=t*d}const t=4*o;u[t+0]=Math.round(e[0]),u[t+1]=Math.round(e[1]),u[t+2]=Math.round(e[2]),u[t+3]=Math.round(e[3])}if(null!=t){t.width=s,t.height=r;const e=t.getContext("2d"),n=new ImageData(u,s,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),u}const g=(0,s.op)({fromPixels_:d});exports.fromPixels=g;
},{"../engine":"Wn3f","../environment":"uGoP","../kernel_names":"E7d7","../kernel_registry":"q1HN","../tensor":"olbE","../tensor_util_env":"qMTF","./cast":"OenY","./operation":"pYCl","./tensor3d":"exf7"}],"PsDq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareAndValidate=t;var e=require("../util");function t(t,r){const s=t.shape.length,n=r.shape.length;if(s<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+` but the rank was ${s}.`);if(n<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+` but the rank was ${n}.`);if("int32"!==r.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+` but the dtype was ${r.dtype}.`);if(r.shape[n-1]>s)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+`${r.shape[n-1]} vs. ${s}`);if(0===(0,e.sizeFromShape)(t.shape))throw new Error("Requested more than 0 entries, but input is empty."+` Input shape: ${t.shape}.`);const h=r.shape,o=h[h.length-1];let p=1;for(let e=0;e<h.length-1;++e)p*=h[e];const i=t.shape,a=h.slice();a.pop();let u=1;for(let e=o;e<s;++e)u*=i[e],a.push(i[e]);const c=[...(0,e.computeStrides)(t.shape).map(e=>e/u),1].slice(0,o);return[a,p,u,c]}
},{"../util":"uQV1"}],"nGOS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateShapes=a,exports.validateInput=r,exports.validateUpdateShape=t;var e=require("../util");function t(e,t,r){const a=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,p="Must have updates.shape = indices.shape[:batchDim] + "+`shape[sliceDim:], got updates.shape: ${r.shape}`+`, indices.shape: ${t.shape}, shape: ${e}`+`, sliceDim: ${a}, and batchDim: ${s}.`;if(r.rank<s)throw new Error(p+` update.rank < ${s}. `);if(e.length<a+(r.rank-s))throw new Error(p+` Output shape length < ${a+(r.rank-s)}`);if(r.rank!==s+e.length-a)throw new Error(p+` update.rank != ${s+e.length-a}`);for(let h=0;h<s;++h)if(r.shape[h]!==t.shape[h])throw new Error(p+` updates.shape[${h}] (${r.shape[h]}) != indices.shape[${h}] (${t.shape[h]}).`);for(let h=0;h<r.rank-s;++h)if(r.shape[h+s]!==e[h+a])throw new Error(p+` updates.shape[${h+s}] (${r.shape[h+s]}) != shape[${h+s}] (${e[h+s]})`)}function r(e,r,a){if(r.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+` but the rank was ${r.rank}.`);if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if("int32"!==r.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(a.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${a}`);if(0===a.length){if(0===r.size)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}t(a,r,e)}function a(t,r,a){const s=r.shape.length,p=s>1?r.shape[s-1]:1,h=a.length;let n=1;for(let e=p;e<h;++e)n*=a[e];const i=p<1?1:p;return{sliceRank:p,numUpdates:(0,e.sizeFromShape)(r.shape)/i,sliceSize:n,strides:[...(0,e.computeStrides)(a.slice(0,p)),1],outputSize:(0,e.sizeFromShape)(a)}}
},{"../util":"uQV1"}],"zBsU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsValid=r,exports.computeFlatOffset=A,exports.computeOutShape=a,exports.getNormalizedAxes=h,exports.isSliceContinous=m,exports.maskToAxes=l,exports.parseSliceParams=M,exports.sliceInfo=k,exports.startForAxis=g,exports.startIndicesWithElidedDims=c,exports.stopForAxis=b,exports.stopIndicesWithElidedDims=f,exports.stridesForAxis=p,exports.stridesWithElidedDims=o;var e=t(require("../util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(n=function(e){return e?s:t})(e)}function t(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=n(t);if(s&&s.has(e))return s.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}return i.default=e,s&&s.set(e,i),i}const s=-2,i=-1;function r(n,t,s){const i=n.shape.length;e.assert(i===t.length,()=>`Error in slice${i}D: Length of begin ${t} must `+`match the rank of the array (${i}).`),e.assert(i===s.length,()=>`Error in slice${i}D: Length of size ${s} must `+`match the rank of the array (${i}).`);for(let r=0;r<i;++r)e.assert(t[r]+s[r]<=n.shape[r],()=>`Error in slice${i}D: begin[${r}] + size[${r}] `+`(${t[r]+s[r]}) would overflow input.shape[${r}] (${n.shape[r]})`)}function l(e){const n=[];let t=0;for(;e>0;)1&e&&n.push(t),e/=2,t++;return n}function a(e,n,t){const s=[];for(let i=0;i<e.length;i++)s[i]=Math.ceil((n[i]-e[i])/t[i]);return s}function o(e,n,t,s){const i=[...e];for(let r=i.length;r<s.length;r++)i.push(1);for(let r=0;r<t;r++)0===r?i[n]=1:(i.splice(n,0,1),i.pop());return i}function d(e,n,t){return t<=e?t:t-(n-1)}function u(e,n){const t=[];for(let s=0;s<e;s++)t.push(n+s);return t}function h(e,n,t,s,i,r,l,a,d){const u=e.length;let h=new Array(u),m=new Array(u),A=new Array(u);if(n.length&&t>0){const d=n[0],u=t+1;h=c(l,d,u,s,e),m=f(a,d,u,i,e),A=o(r,d,u,e)}else for(let o=0;o<u;o++)h[o]=g(l,s,r,e,o,d),m[o]=b(a,i,r,e,o,d),A[o]=p(r,o,d);return{begin:h,end:m,strides:A}}function c(e,n,t,s,i){const r=[...i],l=u(t,n);for(let a=0;a<r.length;a++)if(l.indexOf(a)>-1)r[a]=0;else{const i=d(n,t,a);let l=s[i];e&1<<i&&(l=0),r[a]=l}return r}function f(n,t,s,i,r){const l=[...r],a=u(s,t);for(let e=0;e<l.length;e++)if(a.indexOf(e)>-1)l[e]=Number.MAX_SAFE_INTEGER;else{const r=d(t,s,e);let a=i[r];n&1<<r&&(a=Number.MAX_SAFE_INTEGER),l[e]=a}for(let o=0;o<l.length;o++){const n=r[o];l[o]<0&&(l[o]+=n),l[o]=e.clamp(0,l[o],r[o])}return l}function p(e,n,t){let s=e[n];return(t&1<<n||null==s)&&(s=1),s}function g(n,t,s,i,r,l){let a=t[r];const o=s[r]||1;(n&1<<r||l&1<<r||null==a)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const d=i[r];return a<0&&(a+=d),a=e.clamp(0,a,d-1)}function b(n,t,s,i,r,l){let a=t[r];const o=s[r]||1;(n&1<<r||l&1<<r||null==a)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const d=i[r];return a<0&&(a+=d),a=o>0?e.clamp(0,a,d):e.clamp(-1,a,d-1)}function m(e,n,t){let s=t.length;for(let i=0;i<t.length;i++)if(t[i]>1){s=i;break}for(let i=s+1;i<t.length;i++)if(n[i]>0||t[i]!==e[i])return!1;return!0}function A(e,n){let t=e.length>0?e[e.length-1]:1;for(let s=0;s<e.length-1;s++)t+=e[s]*n[s];return t}function M(n,t,s){let i;const r=n.shape.length;let l;return(i="number"==typeof t?[t,...new Array(r-1).fill(0)]:t.length<r?t.concat(new Array(r-t.length).fill(0)):t.slice()).forEach(n=>{e.assert(-1!==n,()=>"slice() does not support negative begin indexing.")}),l=(l=null==s?new Array(r).fill(-1):"number"==typeof s?[s,...new Array(r-1).fill(-1)]:s.length<r?s.concat(new Array(r-s.length).fill(-1)):s).map((t,s)=>t>=0?t:(e.assert(-1===t,()=>"Negative size values should be exactly -1 but got "+`${t} for the slice() size at index ${s}.`),n.shape[s]-i[s])),[i,l]}function k(e,n,t,i,r,l,a,o,d){let u;if(null==i?(u=new Array(n.length)).fill(1):u=i,null!=a&&0!=(a&a-1))throw new Error("Multiple ellipses in slice is not allowed.");let h=!1;const c={dims:u.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:t.slice(),strides:u.slice(),beginMask:r,endMask:l,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:d};for(let s=0;s<c.dims;s++)h&&0!=(1<<s&o)&&c.numAddAxisAfterEllipsis++,1<<s&a&&(h=!0);h||(c.ellipsisMask|=1<<c.dims,c.dims++);const f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};x(c,f);let p=!0,g=!0,b=!0;const m=[],A=[];for(let s=0;s<e.length;++s){if(0===f.strides[s])throw Error(`strides[${s}] must be non-zero`);const n=!!(f.shrinkAxisMask&1<<s),t=e[s];if(-1===t){m.push(n?1:-1);continue}const i=[f.beginMask&1<<s,f.endMask&1<<s],r=[f.strides[s]>0?0:-1,f.strides[s]>0?t:t-1];if(n&&f.strides[s]<=0)throw Error("only stride 1 allowed on non-range indexing.");b=b&&1===f.strides[s];const l=!!(f.beginMask&1<<s&&f.endMask&1<<s);if(f.beginValid&&f.endValid){if(n){const e=f.begin[s]<0?t+f.begin[s]:f.begin[s];if(f.begin[s]=e,f.end[s]=f.begin[s]+1,e<0||e>=t)throw Error(`slice index ${f.begin[s]} of dimension ${s} out of bounds.`)}else f.begin[s]=S(f.begin[s],0,f.strides[s],t,i,r),f.end[s]=S(f.end[s],1,f.strides[s],t,i,r);const e=1===f.strides[s]&&0===f.begin[s]&&f.end[s]===t;p=p&&e,g=g&&(0===s&&1===f.strides[s]||e)}else p=p&&1===f.strides[s]&&l,g=g&&(0===s&&1===f.strides[s]||l);let a,o=!1;if(f.beginValid&&f.endValid?(a=f.end[s]-f.begin[s],o=!0):n?(a=1,o=!0):l&&t>=0&&(a=f.strides[s]<0?-t:t,o=!0),o){let e;e=0===a||a<0!=f.strides[s]<0?0:Math.trunc(a/f.strides[s])+(a%f.strides[s]!=0?1:0),m.push(e)}else m.push(-1)}for(let M=0;M<f.finalShapeGatherIndices.length;++M){const e=f.finalShapeGatherIndices[M];e>=0?A.push(m[e]):e===s&&A.push(1)}return{finalShapeSparse:A.filter((e,n)=>f.finalShapeGatherIndices[n]!==s),finalShape:A,isIdentity:p,sliceDim0:g,isSimpleSlice:b,begin:f.begin,end:f.end,strides:f.strides}}function x(e,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let t=0;n.beginValid=null!=e.begin,n.endValid=null!=e.end,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const s=Math.min(n.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,n.dims);for(;t<s;t++)n.begin[t]=0,n.end[t]=0,n.strides[t]=1,n.beginMask|=1<<t,n.endMask|=1<<t,n.finalShapeGatherIndices.push(t),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&e.newAxisMask)n.finalShapeGatherIndices.push(s),n.finalShapeGatherIndicesSparse.push(-1);else{if(t===n.begin.length)throw Error(`Index out of range using input dim ${t}; input `+`has only ${n.dims} dims, ${n.begin.length}.`);null!=e.begin&&(n.begin[t]=e.begin[r]),null!=e.end&&(n.end[t]=e.end[r]),n.strides[t]=e.strides[r],e.beginMask&1<<r&&(n.beginMask|=1<<t),e.endMask&1<<r&&(n.endMask|=1<<t),e.shrinkAxisMask&1<<r?(n.finalShapeGatherIndices.push(i),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<t):(n.finalShapeGatherIndices.push(t),n.finalShapeGatherIndicesSparse.push(r)),n.inputShapeGatherIndicesSparse[t]=r,t++}}function S(e,n,t,s,i,r){if(i[n])return t>0?r[n]:r[n+1&1];{const n=e<0?s+e:e;return n<r[0]?r[0]:n>r[1]?r[1]:n}}
},{"../util":"uQV1"}],"bXJl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerializationMap=exports.Serializable=void 0,exports.registerClass=t;var e=require("./util");class s{getClassName(){return this.constructor.className}static fromConfig(e,s){return new e(s)}}exports.Serializable=s;class a{constructor(){this.classNameMap={}}static getMap(){return null==a.instance&&(a.instance=new a),a.instance}static register(e){a.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function t(s){(0,e.assert)(null!=s.className,()=>"Class being registered does not have the static className property defined."),(0,e.assert)("string"==typeof s.className,()=>"className is required to be a string, but got type "+typeof s.className),(0,e.assert)(s.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),a.register(s)}exports.SerializationMap=a;
},{"./util":"uQV1"}],"ZMg1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TEST_EPSILON_FLOAT16=void 0,exports.encodeStrings=h,exports.expectArrayBuffersEqual=y,exports.expectArraysClose=i,exports.expectArraysEqual=l,exports.expectNumbersClose=c,exports.expectPromiseToFail=f,exports.expectValuesInRange=p,exports.testEpsilon=a;var e=require("./engine"),r=require("./tensor_util_env"),t=require("./util");const n=.001,o=.1;function i(e,r,t){return null==t&&(t=a()),s(e,r,(e,r)=>u(e,r,t))}function a(){return 32===e.ENGINE.backend.floatPrecision()?n:o}function s(e,n,o){let i=!0;if(((0,t.isTypedArray)(e)||(0,t.isTypedArray)(n))&&(i=!1),(0,t.isTypedArray)(e)&&(0,t.isTypedArray)(n)&&(i=!0),i){const r=e.constructor.name,t=n.constructor.name;if(r!==t)throw new Error(`Arrays are of different type. Actual: ${r}. `+`Expected: ${t}`)}if(Array.isArray(e)&&Array.isArray(n)){const o=(0,r.inferShape)(e),i=(0,r.inferShape)(n);if(!(0,t.arraysEqual)(o,i))throw new Error("Arrays have different shapes. "+`Actual: [${o}]. Expected: [${i}]`)}const a=(0,t.isTypedArray)(e)?e:(0,t.flatten)(e),s=(0,t.isTypedArray)(n)?n:(0,t.flatten)(n);if(a.length!==s.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs `+`expected: ${s.length}.\n`+`Actual:   ${a}.\n`+`Expected: ${s}.`);for(let r=0;r<s.length;++r){const e=a[r],t=s[r];if(!o(e,t))throw new Error(`Arrays differ: actual[${r}] = ${e}, expected[${r}] = ${t}.\n`+`Actual:   ${a}.\n`+`Expected: ${s}.`)}}function f(e,r){e().then(()=>r.fail(),()=>r())}function l(e,r){const n="string"==typeof r||"number"==typeof r||"boolean"==typeof r?[r]:r;return(0,t.isString)(e)||(0,t.isString)(e[0])||(0,t.isString)(r)||(0,t.isString)(r[0])?s(e,n,(e,r)=>e==r):s(e,r,(e,r)=>u(e,r,0))}function c(e,r,t){if(null==t&&(t=a()),!u(e,r,t))throw new Error(`Numbers differ: actual === ${e}, expected === ${r}`)}function u(e,r,t){return!isFinite(e)&&!isFinite(r)||!(isNaN(e)||isNaN(r)||Math.abs(e-r)>t)}function p(e,r,t){for(let n=0;n<e.length;n++)if(e[n]<r||e[n]>t)throw new Error(`Value out of range:${e[n]} low: ${r}, high: ${t}`)}function y(e,r){const t=new Float32Array(e),n=new Float32Array(r);if(t.length!==n.length)throw new Error("Expected ArrayBuffer to be of length "+`${n.length}, but it was ${t.length}`);for(let o=0;o<n.length;o++)if(t[o]!==n[o])throw new Error(`Expected ArrayBuffer value at ${o} to be `+`${n[o]} but got ${t[o]} instead`)}function h(e){for(let r=0;r<e.length;r++){const n=e[r];Array.isArray(n)?h(n):e[r]=(0,t.encodeString)(n)}return e}exports.TEST_EPSILON_FLOAT16=o;
},{"./engine":"Wn3f","./tensor_util_env":"qMTF","./util":"uQV1"}],"tO0n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="3.19.0";exports.version=e;
},{}],"RKQn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),o=require("../tensor_util_env"),t=require("./operation");function d(t,d){let s=(0,o.convertToTensor)(t,"a","add"),a=(0,o.convertToTensor)(d,"b","add");[s,a]=(0,n.makeTypesMatch)(s,a);const i={a:s,b:a};return e.ENGINE.runKernel(r.Add,i)}const s=(0,t.op)({add_:d});exports.add=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./operation":"pYCl"}],"qn4k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDiv=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function i(t,i){let s=(0,n.convertToTensor)(t,"a","floorDiv"),l=(0,n.convertToTensor)(i,"b","floorDiv");[s,l]=(0,o.makeTypesMatch)(s,l);const u={a:s,b:l};return e.ENGINE.runKernel(r.FloorDiv,u)}const s=(0,t.op)({floorDiv_:i});exports.floorDiv=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./operation":"pYCl"}],"M4To":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.div=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./floorDiv"),n=require("./operation");function u(n,u){let s=(0,t.convertToTensor)(n,"a","div"),v=(0,t.convertToTensor)(u,"b","div");if([s,v]=(0,i.makeTypesMatch)(s,v),"int32"===s.dtype&&"int32"===v.dtype)return(0,o.floorDiv)(s,v);const d={a:s,b:v};return e.ENGINE.runKernel(r.RealDiv,d,{})}const s=(0,n.op)({div_:u});exports.div=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./floorDiv":"qn4k","./operation":"pYCl"}],"Nt3M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mul=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u){let i=(0,n.convertToTensor)(o,"a","mul"),l=(0,n.convertToTensor)(u,"b","mul");[i,l]=(0,t.makeTypesMatch)(i,l);const s={a:i,b:l};return e.ENGINE.runKernel(r.Multiply,s)}const i=(0,o.op)({mul_:u});exports.mul=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./operation":"pYCl"}],"ic15":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s=(0,n.convertToTensor)(o,"x","abs");if("complex64"===s.dtype){const n={x:s};return e.ENGINE.runKernel(r.ComplexAbs,n)}{const n={x:s};return e.ENGINE.runKernel(r.Abs,n)}}const t=(0,o.op)({abs_:s});exports.abs=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"fZC3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","acos")};return e.ENGINE.runKernel(r.Acos,s)}const t=(0,n.op)({acos_:s});exports.acos=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"bQXr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","acosh")};return e.ENGINE.runKernel(r.Acosh,s)}const t=(0,n.op)({acosh_:s});exports.acosh=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"qyob":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function u(o){n.assert(Array.isArray(o),()=>"The argument passed to tf.addN() must be a list of tensors"),n.assert(o.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+`${o.length}`);const a=o.map((e,t)=>(0,r.convertToTensor)(e,`tensors${t}`,"addN")),s=a[0];a.forEach(e=>{if(e.dtype!==s.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),a.forEach(e=>{if(!n.arraysEqual(e.shape,s.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const u=a;return e.ENGINE.runKernel(t.AddN,u)}const d=(0,o.op)({addN_:u});exports.addN=d;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"YXcM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=void 0;var e=require("../engine"),r=require("../kernel_names"),l=require("../tensor_util_env"),n=require("./operation");function o(n,o=null,t=!1){const i={x:(0,l.convertToTensor)(n,"x","all","bool")},s={axis:o,keepDims:t};return e.ENGINE.runKernel(r.All,i,s)}const t=(0,n.op)({all_:o});exports.all=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"yyJR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","any","bool")},u={axis:t,keepDims:i};return e.ENGINE.runKernel(r.Any,s,u)}const i=(0,o.op)({any_:t});exports.any=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"do4a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=0){const a={x:(0,n.convertToTensor)(o,"x","argMax")},i={axis:t};return e.ENGINE.runKernel(r.ArgMax,a,i)}const a=(0,o.op)({argMax_:t});exports.argMax=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"kbXM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i,o=0){const t={x:(0,n.convertToTensor)(i,"x","argMin")},s={axis:o};return e.ENGINE.runKernel(r.ArgMin,t,s)}const t=(0,i.op)({argMin_:o});exports.argMin=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"UbeX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","asin")};return e.ENGINE.runKernel(r.Asin,o)}const s=(0,i.op)({asin_:o});exports.asin=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"GNF6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","asinh")};return e.ENGINE.runKernel(r.Asinh,o)}const s=(0,i.op)({asinh_:o});exports.asinh=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"Bpr8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","atan")};return e.ENGINE.runKernel(r.Atan,o)}const a=(0,t.op)({atan_:o});exports.atan=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"Yz4Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./operation");function a(o,a){let s=(0,t.convertToTensor)(o,"a","atan2"),i=(0,t.convertToTensor)(a,"b","atan2");[s,i]=(0,n.makeTypesMatch)(s,i);const u={a:s,b:i};return e.ENGINE.runKernel(r.Atan2,u)}const s=(0,o.op)({atan2_:a});exports.atan2=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./operation":"pYCl"}],"NEWN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","atanh")};return e.ENGINE.runKernel(r.Atanh,o)}const a=(0,t.op)({atanh_:o});exports.atanh=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"tcmi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkPadOnDimRoundingMode=D,exports.computeConv2DInfo=a,exports.computeConv3DInfo=h,exports.computeDefaultPad=f,exports.computeDilation2DInfo=r,exports.computePool2DInfo=o,exports.computePool3DInfo=i,exports.convertConv2DDataFormat=b,exports.eitherStridesOrDilationsAreOne=w,exports.tupleValuesAreOne=M;var t=n(require("../util"));function e(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(e=function(t){return t?r:n})(t)}function n(t,n){if(!n&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=e(n);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var h=i?Object.getOwnPropertyDescriptor(t,a):null;h&&(h.get||h.set)?Object.defineProperty(o,a,h):o[a]=t[a]}return o.default=t,r&&r.set(t,o),o}function r(t,e,n,r,o="NHWC",i){return a(t,[...e,t[3]],n,i,r,null,null,b(o))}function o(t,e,n,r,o,i,h="channelsLast"){const[l,u]=s(e);let f;if("channelsLast"===h)f=[l,u,t[3],t[3]];else{if("channelsFirst"!==h)throw new Error(`Unknown dataFormat ${h}`);f=[l,u,t[1],t[1]]}return a(t,f,n,r,o,i,!1,h)}function i(t,e,n,r,o,i,a="NDHWC"){const[l,u,f]=c(e);let s,p;if("NDHWC"===a)p="channelsLast",s=[l,u,f,t[4],t[4]];else{if("NCDHW"!==a)throw new Error(`Unknown dataFormat ${a}`);p="channelsFirst",s=[l,u,f,t[1],t[1]]}return h(t,s,n,r,o,!1,p,i)}function a(t,e,n,r,o,i,a=!1,h="channelsLast"){let[l,u,f,c]=[-1,-1,-1,-1];if("channelsLast"===h)[l,u,f,c]=t;else{if("channelsFirst"!==h)throw new Error(`Unknown dataFormat ${h}`);[l,c,u,f]=t}const[g,m,,M]=e,[w,b]=s(n),[D,y]=s(r),W=p(g,D),H=p(m,y),{padInfo:E,outHeight:F,outWidth:I}=d(o,u,f,w,b,W,H,i,h),L=a?M*c:M;let $;return"channelsFirst"===h?$=[l,L,F,I]:"channelsLast"===h&&($=[l,F,I,L]),{batchSize:l,dataFormat:h,inHeight:u,inWidth:f,inChannels:c,outHeight:F,outWidth:I,outChannels:L,padInfo:E,strideHeight:w,strideWidth:b,filterHeight:g,filterWidth:m,effectiveFilterHeight:W,effectiveFilterWidth:H,dilationHeight:D,dilationWidth:y,inShape:t,outShape:$,filterShape:e}}function h(t,e,n,r,o,i=!1,a="channelsLast",h){let[l,u,f,s,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,u,f,s,d]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,d,u,f,s]=t}const[m,M,w,,b]=e,[D,y,W]=c(n),[H,E,F]=c(r),I=p(m,H),L=p(M,E),$=p(w,F),{padInfo:v,outDepth:k,outHeight:C,outWidth:x}=g(o,u,f,s,D,y,W,I,L,$,h),O=i?b*d:b;let P;return"channelsFirst"===a?P=[l,O,k,C,x]:"channelsLast"===a&&(P=[l,k,C,x,O]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:f,inWidth:s,inChannels:d,outDepth:k,outHeight:C,outWidth:x,outChannels:O,padInfo:v,strideDepth:D,strideHeight:y,strideWidth:W,filterDepth:m,filterHeight:M,filterWidth:w,effectiveFilterDepth:I,effectiveFilterHeight:L,effectiveFilterWidth:$,dilationDepth:H,dilationHeight:E,dilationWidth:F,inShape:t,outShape:P,filterShape:e}}function l(t,e,n,r,o){null==r&&(r=f(t,e,n));const i=t[0],a=t[1];return[m((i-e+2*r)/n+1,o),m((a-e+2*r)/n+1,o)]}function u(t,e,n,r,o,i){null==o&&(o=f(t,e,r));const a=t[0],h=t[1],l=t[2];return[m((a-e+2*o)/r+1,i),m((h-e+2*o)/r+1,i),m((l-e+2*o)/r+1,i),n]}function f(t,e,n,r=1){const o=p(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function s(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function c(t){return"number"==typeof t?[t,t,t]:t}function p(t,e){return e<=1?t:t+(t-1)*(e-1)}function d(t,e,n,r,o,i,a,h,u){let f,s,c;if("number"==typeof t){f={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const o=l([e,n],i,r,t,h);s=o[0],c=o[1]}else if("same"===t){s=Math.ceil(e/r),c=Math.ceil(n/o);const t=Math.max(0,(s-1)*r+i-e),h=Math.max(0,(c-1)*o+a-n),l=Math.floor(t/2),u=t-l,p=Math.floor(h/2);f={top:l,bottom:u,left:p,right:h-p,type:"SAME"}}else if("valid"===t)f={top:0,bottom:0,left:0,right:0,type:"VALID"},s=Math.ceil((e-i+1)/r),c=Math.ceil((n-a+1)/o);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const l="channelsLast"===u?t[1][0]:t[2][0],p="channelsLast"===u?t[1][1]:t[2][1],d="channelsLast"===u?t[2][0]:t[3][0],g="channelsLast"===u?t[2][1]:t[3][1];f={top:l,bottom:p,left:d,right:g,type:0===l&&0===p&&0===d&&0===g?"VALID":"EXPLICIT"},s=m((e-i+l+p)/r+1,h),c=m((n-a+d+g)/o+1,h)}}return{padInfo:f,outHeight:s,outWidth:c}}function g(t,e,n,r,o,i,a,h,l,f,s){let c,p,d,g;if("number"==typeof t){c={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const i=u([e,n,r,1],h,1,o,t,s);p=i[0],d=i[1],g=i[2]}else if("same"===t){const t=((p=Math.ceil(e/o))-1)*o+h-e,u=((d=Math.ceil(n/i))-1)*i+l-n,s=((g=Math.ceil(r/a))-1)*a+f-r,m=Math.floor(t/2),M=t-m,w=Math.floor(u/2),b=u-w,D=Math.floor(s/2);c={top:w,bottom:b,left:D,right:s-D,front:m,back:M,type:"SAME"}}else{if("valid"!==t)throw Error(`Unknown padding parameter: ${t}`);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-h+1)/o),d=Math.ceil((n-l+1)/i),g=Math.ceil((r-f+1)/a)}return{padInfo:c,outDepth:p,outHeight:d,outWidth:g}}function m(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function M(t){const[e,n,r]=s(t);return 1===e&&1===n&&1===r}function w(t,e){return M(t)||M(e)}function b(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function D(e,n,r){if(null!=r){if("string"==typeof n)throw Error(`Error in ${e}: pad must be an integer when using `+`dimRoundingMode ${r} but got pad ${n}.`);if("number"==typeof n)t.assert(t.isInt(n),()=>`Error in ${e}: pad must be an integer when using `+`dimRoundingMode ${r} but got pad ${n}.`);else{if("object"!=typeof n)throw Error(`Error in ${e}: Unknown padding parameter: ${n}`);n.forEach(n=>{n.forEach(n=>{t.assert(t.isInt(n),()=>`Error in ${e}: pad must be an integer when using `+`dimRoundingMode ${r} but got pad ${n}.`)})})}}}
},{"../util":"uQV1"}],"IoLG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function o(s,o){const t={x:(0,n.convertToTensor)(s,"x","reshape","string_or_numeric")},i={shape:o};return e.ENGINE.runKernel(r.Reshape,t,i)}const t=(0,s.op)({reshape_:o});exports.reshape=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"YRN0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=l(require("../util")),n=require("./cast"),a=l(require("./conv_util")),i=require("./operation"),s=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function p(i,u,l,p,c){const d=(0,t.convertToTensor)(i,"x","avgPool","float32");o.assert(a.eitherStridesOrDilationsAreOne(l,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${l} and dilations '1'`);let f=d,v=!1;3===d.rank&&(v=!0,f=(0,s.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.assert(4===f.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${f.rank}.`),a.checkPadOnDimRoundingMode("avgPool",p,c);const g={x:f},P={filterSize:u,strides:l,pad:p,dimRoundingMode:c};let h=e.ENGINE.runKernel(r.AvgPool,g,P);return h=(0,n.cast)(h,d.dtype),v?(0,s.reshape)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const c=(0,i.op)({avgPool_:p});exports.avgPool=c;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./cast":"OenY","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"IxM0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=p(require("../util")),n=require("./conv_util"),a=require("./cast"),u=require("./operation"),i=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function l(u,s,p,l,d,c="NDHWC"){const f=(0,t.convertToTensor)(u,"x","avgPool3d","float32");let v=f,g=!1;4===f.rank&&(g=!0,v=(0,i.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),o.assert(5===v.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${v.rank}.`),o.assert("NDHWC"===c,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${c}`),(0,n.checkPadOnDimRoundingMode)("avgPool3d",l,d);const P={x:v},h={filterSize:s,strides:p,pad:l,dimRoundingMode:d,dataFormat:c};let y=e.ENGINE.runKernel(r.AvgPool3D,P,h);return y=(0,a.cast)(y,v.dtype),g?(0,i.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const d=(0,u.op)({avgPool3d_:l});exports.avgPool3d=d;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./cast":"OenY","./operation":"pYCl","./reshape":"IoLG"}],"E9ft":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),o=require("./clone"),c=require("./operation");function s(c,s=0){(0,n.assert)(c.length>=1,()=>"Pass at least one tensor to concat");const a=(0,t.convertToTensorArray)(c,"tensors","concat","string_or_numeric");if("complex64"===a[0].dtype&&a.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===a.length)return(0,o.clone)(a[0]);const i=a,u={axis:s};return e.ENGINE.runKernel(r.Concat,i,u)}const a=(0,c.op)({concat_:s});exports.concat=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./clone":"cQJm","./operation":"pYCl"}],"JWCK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoid=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),i=require("./operation");function n(i){const n={x:(0,o.convertToTensor)(i,"x","sigmoid","float32")};return e.ENGINE.runKernel(r.Sigmoid,n)}const t=(0,i.op)({sigmoid_:n});exports.sigmoid=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"tUXw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),n=require("./operation");function o(n,o,s){const t=(0,i.convertToTensor)(n,"x","slice","string_or_numeric");if(0===t.rank)throw new Error("Slicing scalar is not possible");const c={x:t},l={begin:o,size:s};return e.ENGINE.runKernel(r.Slice,c,l)}const s=(0,n.op)({slice_:o});exports.slice=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"TO7P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","tanh","float32")};return e.ENGINE.runKernel(r.Tanh,o)}const i=(0,t.op)({tanh_:o});exports.tanh=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"W00p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.basicLSTMCell=void 0;var e=require("../tensor_util_env"),r=require("./add"),i=require("./concat"),s=require("./mat_mul"),o=require("./mul"),l=require("./operation"),t=require("./sigmoid"),c=require("./slice"),a=require("./tanh");function n(l,n,u,T,d,m){const M=(0,e.convertToTensor)(l,"forgetBias","basicLSTMCell"),b=(0,e.convertToTensor)(n,"lstmKernel","basicLSTMCell"),v=(0,e.convertToTensor)(u,"lstmBias","basicLSTMCell"),q=(0,e.convertToTensor)(T,"data","basicLSTMCell"),C=(0,e.convertToTensor)(d,"c","basicLSTMCell"),L=(0,e.convertToTensor)(m,"h","basicLSTMCell"),S=(0,i.concat)([q,L],1),p=(0,s.matMul)(S,b),h=(0,r.add)(p,v),_=h.shape[0],g=h.shape[1]/4,f=[_,g],x=(0,c.slice)(h,[0,0],f),B=(0,c.slice)(h,[0,g],f),j=(0,c.slice)(h,[0,2*g],f),y=(0,c.slice)(h,[0,3*g],f),K=(0,r.add)((0,o.mul)((0,t.sigmoid)(x),(0,a.tanh)(B)),(0,o.mul)(C,(0,t.sigmoid)((0,r.add)(M,j))));return[K,(0,o.mul)((0,a.tanh)(K),(0,t.sigmoid)(y))]}const u=(0,l.op)({basicLSTMCell_:n});exports.basicLSTMCell=u;
},{"../tensor_util_env":"qMTF","./add":"RKQn","./concat":"E9ft","./mat_mul":"cPiM","./mul":"Nt3M","./operation":"pYCl","./sigmoid":"JWCK","./slice":"tUXw","./tanh":"TO7P"}],"cbr1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=o?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function c(o,a,u){const c=(0,r.convertToTensor)(o,"x","batchToSpaceND"),i=a.reduce((e,t)=>e*t);n.assert(c.rank>=1+a.length,()=>`input rank is ${c.rank} but should be > than blockShape.length ${a.length}`),n.assert(u.length===a.length,()=>`crops.length is ${u.length} but should be equal to blockShape.length  ${a.length}`),n.assert(c.shape[0]%i==0,()=>`input tensor batch is ${c.shape[0]} but is not divisible by the product of `+`the elements of blockShape ${a.join(" * ")} === ${i}`);const s={x:c},p={blockShape:a,crops:u};return e.ENGINE.runKernel(t.BatchToSpaceND,s,p)}const i=(0,o.op)({batchToSpaceND_:c});exports.batchToSpaceND=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"mQ5y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xAs4D=r;var e=require("./reshape");function r(r){let s;return s=0===r.rank||1===r.rank?(0,e.reshape)(r,[1,1,1,r.size]):2===r.rank?(0,e.reshape)(r,[1,1,r.shape[0],r.shape[1]]):3===r.rank?(0,e.reshape)(r,[1,r.shape[0],r.shape[1],r.shape[2]]):r}
},{"./reshape":"IoLG"}],"tSVR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=u(require("../util")),a=require("./batchnorm_util"),o=require("./operation"),i=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(r);if(n&&n.has(e))return n.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}function c(o,s,u,c,l,f){null==f&&(f=.001);const p=(0,n.convertToTensor)(o,"x","batchNorm"),h=(0,n.convertToTensor)(s,"mean","batchNorm"),v=(0,n.convertToTensor)(u,"variance","batchNorm");let m,b;null!=l&&(m=(0,n.convertToTensor)(l,"scale","batchNorm")),null!=c&&(b=(0,n.convertToTensor)(c,"offset","batchNorm")),t.assert(h.rank===v.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),t.assert(null==b||h.rank===b.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),t.assert(null==m||h.rank===m.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:(0,a.xAs4D)(p),scale:m,offset:b,mean:h,variance:v},k={varianceEpsilon:f},q=e.ENGINE.runKernel(r.FusedBatchNorm,d,k);return(0,i.reshape)(q,p.shape)}const l=(0,o.op)({batchNorm_:c});exports.batchNorm=l;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./batchnorm_util":"mQ5y","./operation":"pYCl","./reshape":"IoLG"}],"Isat":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm2d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(2===i.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+`${i.rank}.`),t.assert(2===b.rank||1===b.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+`got rank ${b.rank}.`),t.assert(2===k.rank||1===k.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(2===f.rank||1===f.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm2d_:u});exports.batchNorm2d=c;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./batchnorm":"tSVR","./operation":"pYCl"}],"n7pb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm3d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(3===i.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+`${i.rank}.`),t.assert(3===b.rank||1===b.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+`got rank ${b.rank}.`),t.assert(3===k.rank||1===k.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(3===f.rank||1===f.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm3d_:u});exports.batchNorm3d=c;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./batchnorm":"tSVR","./operation":"pYCl"}],"CN5i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm4d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(r){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(o=function(r){return r?e:t})(r)}function a(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o(t);if(e&&e.has(r))return e.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var c=a?Object.getOwnPropertyDescriptor(r,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function u(n,o,a,u,c,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=c&&(l=(0,r.convertToTensor)(c,"scale","batchNorm")),null!=u&&(f=(0,r.convertToTensor)(u,"offset","batchNorm")),t.assert(4===i.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+`${i.rank}.`),t.assert(4===b.rank||1===b.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+`got rank ${b.rank}.`),t.assert(4===k.rank||1===k.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(4===f.rank||1===f.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const c=(0,n.op)({batchNorm4d_:u});exports.batchNorm4d=c;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./batchnorm":"tSVR","./operation":"pYCl"}],"diAx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincount=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../tensor_util_env"),r=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function s(o,i,u){const s=(0,n.convertToTensor)(o,"x","bincount"),a=(0,n.convertToTensor)(i,"weights","bincount");r.assert("int32"===s.dtype,()=>"Error in bincount: input "+`dtype must be int32, but got ${s.dtype}`),r.assert(u>=0,()=>`size must be non-negative, but got ${u}.`),r.assert(a.size===s.size||0===a.size,()=>"Error in bincount: weights must have the same size as input or"+`0-length, but got input shape: ${s.shape}, weights shape: `+`${a.shape}.`);const p={x:s,weights:a},c={size:u};return e.ENGINE.runKernel(t.Bincount,p,c)}const a=(0,o.op)({bincount_:s});exports.bincount=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"crfr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastArgs=void 0;var r=require("../engine"),e=require("../kernel_names"),s=require("../tensor_util_env"),t=require("./operation");function n(t,n){const o=(0,s.convertToTensor)(t,"s0","broadcastArgs","int32"),a=(0,s.convertToTensor)(n,"s1","broadcastArgs","int32");if(1!==o.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+`Has rank ${o.rank}`);if(1!==a.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+`Has rank ${a.rank}`);const c={s0:o,s1:a};return r.ENGINE.runKernel(e.BroadcastArgs,c)}const o=(0,t.op)({broadcastArgs_:n});exports.broadcastArgs=o;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"l9pe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastTo=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./clone"),n=require("./operation"),a=require("./reshape");function s(n,s){let i=(0,o.convertToTensor)(n,"broadcastTo","x");const c=i.shape;if(s.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${s}].`);if(s.length<i.rank)throw new Error(`broadcastTo(): shape.length=${s.length} < input.rank=${i.rank}.`);if(s.length>i.rank){const e=i.shape.slice();for(;e.length<s.length;)e.unshift(1);i=(0,a.reshape)(i,e)}const l=i.shape,h=Array.from(s);for(let e=s.length-1;e>=0;e--)if(l[e]===s[e])h[e]=1;else if(1!==i.shape[e])throw new Error(`broadcastTo(): [${c}] cannot be broadcast to [${s}].`);if(0===h.map((e,r)=>e>1?r:-1).filter(e=>e>=0).length)return(0,t.clone)(i);const p={x:i},u={reps:h};return e.ENGINE.runKernel(r.Tile,p,u)}const i=(0,n.op)({broadcastTo_:s});exports.broadcastTo=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./clone":"cQJm","./operation":"pYCl","./reshape":"IoLG"}],"PU1N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceil=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function i(o){const i={x:(0,n.convertToTensor)(o,"x","ceil","float32")};return e.ENGINE.runKernel(r.Ceil,i)}const t=(0,o.op)({ceil_:i});exports.ceil=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"u014":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValue=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),u=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function l(u,o,i){const l=(0,t.convertToTensor)(u,"x","clipByValue");n.assert(o<=i,()=>`Error in clip: min (${o}) must be `+`less than or equal to max (${i}).`);const a={x:l},p={clipValueMin:o,clipValueMax:i};return e.ENGINE.runKernel(r.ClipByValue,a,p)}const a=(0,u.op)({clipByValue_:l});exports.clipByValue=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"HEuN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat1d=void 0;var e=require("./concat"),o=require("./operation");function t(o){return(0,e.concat)(o,0)}const c=(0,o.op)({concat1d_:t});exports.concat1d=c;
},{"./concat":"E9ft","./operation":"pYCl"}],"M8xG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat2d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat2d_:t});exports.concat2d=c;
},{"./concat":"E9ft","./operation":"pYCl"}],"mXth":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat3d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat3d_:t});exports.concat3d=c;
},{"./concat":"E9ft","./operation":"pYCl"}],"zuIn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat4d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat4d_:t});exports.concat4d=c;
},{"./concat":"E9ft","./operation":"pYCl"}],"rCpA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),a=require("./operation"),i=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(a,s,u,p,c="NHWC",d=[1,1],l){const f=(0,t.convertToTensor)(a,"x","conv2d","float32"),v=(0,t.convertToTensor)(s,"filter","conv2d","float32");let h=f,k=!1;3===f.rank&&(k=!0,h=(0,i.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),n.assert(4===h.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${h.rank}.`),n.assert(4===v.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+`${v.rank}.`),o.checkPadOnDimRoundingMode("conv2d",p,l);const b="NHWC"===c?h.shape[3]:h.shape[1];n.assert(b===v.shape[2],()=>`Error in conv2d: depth of input (${b}) must match `+`input depth for filter ${v.shape[2]}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,d),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${d}'`);const O={x:h,filter:v},y={strides:u,pad:p,dataFormat:c,dilations:d,dimRoundingMode:l},g=e.ENGINE.runKernel(r.Conv2D,O,y);return k?(0,i.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const c=(0,a.op)({conv2d_:p});exports.conv2d=c;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"djzz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=i(require("./conv_util")),o=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(o,s,i,p,u="NWC",c=1,d){const h=(0,e.convertToTensor)(o,"x","conv1d"),f=(0,e.convertToTensor)(s,"filter","conv1d");let l=h,v=!1;2===h.rank&&(v=!0,l=(0,a.reshape)(h,[1,h.shape[0],h.shape[1]])),r.assert(3===l.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),r.assert(3===f.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+`${f.rank}.`),n.checkPadOnDimRoundingMode("conv1d",p,d),r.assert(l.shape[2]===f.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match `+`input depth for filter ${f.shape[1]}.`),r.assert(n.eitherStridesOrDilationsAreOne(i,c),()=>"Error in conv1D: Either stride or dilation must be 1. "+`Got stride ${i} and dilation '${c}'`),r.assert("NWC"===u,()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`);const b=(0,a.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2]]),k=(0,a.reshape)(l,[l.shape[0],1,l.shape[1],l.shape[2]]),y=[1,i],O=[1,c],g=(0,t.conv2d)(k,b,y,p,"NHWC",O,d);return v?(0,a.reshape)(g,[g.shape[2],g.shape[3]]):(0,a.reshape)(g,[g.shape[0],g.shape[2],g.shape[3]])}const u=(0,o.op)({conv1d_:p});exports.conv1d=u;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./conv2d":"rCpA","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"mHXf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=u(require("../util")),n=u(require("./conv_util")),a=require("./operation"),o=require("./reshape");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function s(a,p,u,s,i,c="NHWC",h){t.assert(a.length===p.rank,()=>"Length of inShape "+`(${a.length}) and rank of dy (${p.rank}) must match`);let d=a,f=p,l=!1;3===p.rank&&(l=!0,f=(0,o.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]),d=[1,a[0],a[1],a[2]]),t.assert(4===d.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+`${d.length}.`),t.assert(4===f.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${f.rank}`),t.assert(4===u.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${u.rank}`);const k="NHWC"===c?d[3]:d[1],v="NHWC"===c?f.shape[3]:f.shape[1];t.assert(k===u.shape[2],()=>`Error in conv2dDerInput: depth of input (${k}) must `+`match input depth for filter ${u.shape[2]}.`),t.assert(v===u.shape[3],()=>`Error in conv2dDerInput: depth of output (${v}) must `+`match output depth for filter ${u.shape[3]}.`),n.checkPadOnDimRoundingMode("conv2dDerInput",i,h);const g={dy:f,filter:u},b={strides:s,pad:i,dataFormat:c,dimRoundingMode:h,inputShape:d},m=e.ENGINE.runKernel(r.Conv2DBackpropInput,g,b);return l?(0,o.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const i=(0,a.op)({conv2DBackpropInput_:s});exports.conv2DBackpropInput=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"VZ9k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv2d_backprop_input"),r=require("./operation");function n(r,n,s,t,p,c){const v=(0,o.convertToTensor)(r,"x","conv2dTranspose"),i=(0,o.convertToTensor)(n,"filter","conv2dTranspose");return(0,e.conv2DBackpropInput)(s,v,i,t,p,"NHWC",c)}const s=(0,r.op)({conv2dTranspose_:n});exports.conv2dTranspose=s;
},{"../tensor_util_env":"qMTF","./conv2d_backprop_input":"mHXf","./operation":"pYCl"}],"WX7G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./conv_util"),a=require("./operation"),s=require("./reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(a,i,u,p,c="NDHWC",d=[1,1,1]){const l=(0,t.convertToTensor)(a,"x","conv3d"),f=(0,t.convertToTensor)(i,"filter","conv3d");let v=l,h=!1;4===l.rank&&(h=!0,v=(0,s.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),n.assert(5===v.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${v.rank}.`),n.assert(5===f.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+`${f.rank}.`),n.assert(v.shape[4]===f.shape[3],()=>`Error in conv3d: depth of input (${v.shape[4]}) must match `+`input depth for filter ${f.shape[3]}.`),n.assert((0,o.eitherStridesOrDilationsAreOne)(u,d),()=>"Error in conv3D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${d}'`),n.assert("NDHWC"===c,()=>`Error in conv3d: got dataFormat of ${c} but only NDHWC is currently supported.`);const b={x:v,filter:f},k={strides:u,pad:p,dataFormat:c,dilations:d},y=e.ENGINE.runKernel(r.Conv3D,b,k);return h?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const c=(0,a.op)({conv3d_:p});exports.conv3d=c;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"guKQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=o(require("../util")),n=require("./operation"),a=require("./reshape");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function u(n,p,o,u,s){t.assert(n.length===p.rank,()=>"Length of inShape "+`(${n.length}) and rank of dy (${p.rank}) must match`);let i=n,c=p,h=!1;4===p.rank&&(h=!0,c=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]]),i=[1,n[0],n[1],n[2],n[3]]);const f=i[4],l=c.shape[4];t.assert(5===i.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+`${i.length}.`),t.assert(5===c.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+`rank ${c.rank}`),t.assert(5===o.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+`rank ${o.rank}`),t.assert(f===o.shape[3],()=>`Error in conv3dDerInput: depth of input (${f}) must `+`match input depth for filter ${o.shape[3]}.`),t.assert(l===o.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must `+`match output depth for filter ${o.shape[4]}.`);const d={dy:c,filter:o},k={pad:s,strides:u,inputShape:i},v=e.ENGINE.runKernel(r.Conv3DBackpropInputV2,d,k);return h?(0,a.reshape)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const s=(0,n.op)({conv3DBackpropInput_:u});exports.conv3DBackpropInput=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../util":"uQV1","./operation":"pYCl","./reshape":"IoLG"}],"Jt7Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv3d_backprop_input"),r=require("./operation");function n(r,n,s,t,p){const c=(0,o.convertToTensor)(r,"x","conv3dTranspose"),v=(0,o.convertToTensor)(n,"filter","conv3dTranspose");return(0,e.conv3DBackpropInput)(s,c,v,t,p)}const s=(0,r.op)({conv3dTranspose_:n});exports.conv3dTranspose=s;
},{"../tensor_util_env":"qMTF","./conv3d_backprop_input":"guKQ","./operation":"pYCl"}],"YFO2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","cos","float32")};return e.ENGINE.runKernel(r.Cos,s)}const t=(0,n.op)({cos_:s});exports.cos=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"fgKb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s={x:(0,o.convertToTensor)(n,"x","cosh","float32")};return e.ENGINE.runKernel(r.Cosh,s)}const t=(0,n.op)({cosh_:s});exports.cosh=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"VPUf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumprod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function u(n,u=0,t=!1,s=!1){const i={x:(0,o.convertToTensor)(n,"x","cumprod")},c={axis:u,exclusive:t,reverse:s};return e.ENGINE.runKernel(r.Cumprod,i,c)}const t=(0,n.op)({cumprod_:u});exports.cumprod=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"BWsp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=void 0;var e=require("../engine"),r=require("../kernel_names"),u=require("../tensor_util_env"),s=require("./operation");function n(s,n=0,o=!1,t=!1){const i={x:(0,u.convertToTensor)(s,"x","cumsum")},c={axis:n,exclusive:o,reverse:t};return e.ENGINE.runKernel(r.Cumsum,i,c)}const o=(0,s.op)({cumsum_:n});exports.cumsum=o;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"IrIH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBincount=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../tensor_util_env"),r=i(require("../util")),o=require("./operation");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function u(o,s,i,u=!1){const a=(0,n.convertToTensor)(o,"x","denseBincount"),p=(0,n.convertToTensor)(s,"weights","denseBincount");r.assert("int32"===a.dtype,()=>"Error in denseBincount: input "+`dtype must be int32, but got ${a.dtype}`),r.assert(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+`rank ${a.rank}.`),r.assert(i>=0,()=>`size must be non-negative, but got ${i}.`),r.assert(p.size===a.size||0===p.size,()=>"Error in denseBincount: weights must have the same shape as x or "+`0-length, but got x shape: ${a.shape}, weights shape: `+`${p.shape}.`);const c={x:a,weights:p},f={size:i,binaryOutput:u};return e.ENGINE.runKernel(t.DenseBincount,c,f)}const a=(0,o.op)({denseBincount_:u});exports.denseBincount=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"Vh4l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=p(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var i=o?Object.getOwnPropertyDescriptor(e,p):null;i&&(i.get||i.set)?Object.defineProperty(n,p,i):n[p]=e[p]}return n.default=e,r&&r.set(e,n),n}function i(o,a,p="NHWC"){const i=(0,r.convertToTensor)(o,"x","depthToSpace","float32"),s="NHWC"===p?i.shape[1]:i.shape[2],u="NHWC"===p?i.shape[2]:i.shape[3],c="NHWC"===p?i.shape[3]:i.shape[1];n.assert(a>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${a}`),n.assert(s*a>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${a}  for depthToSpace with input shape\n    ${i.shape}`),n.assert(u*a>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${a} for depthToSpace with input shape\n        ${i.shape}`),n.assert(c%(a*a)==0,()=>`Dimension size must be evenly divisible by ${a*a} but is ${c} for depthToSpace with input shape ${i.shape}`);const l={x:i},h={blockSize:a,dataFormat:p};return e.ENGINE.runKernel(t.DepthToSpace,l,h)}const s=(0,o.op)({depthToSpace_:i});exports.depthToSpace=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"WWch":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=p(require("../util")),o=p(require("./conv_util")),i=require("./operation"),s=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function u(i,a,p,u,d="NHWC",h=[1,1],l){const c=(0,t.convertToTensor)(i,"x","depthwiseConv2d","float32"),f=(0,t.convertToTensor)(a,"filter","depthwiseConv2d","float32");let v=c,w=!1;3===c.rank&&(w=!0,v=(0,s.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),n.assert(4===v.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+`rank ${v.rank}.`),n.assert(4===f.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+`${f.rank}.`);const k="NHWC"===d?v.shape[3]:v.shape[1];n.assert(k===f.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+`(${k}) must match the inChannels dimension in `+`filter ${f.shape[2]}.`),o.checkPadOnDimRoundingMode("depthwiseConv2d",u,l);const C={x:v,filter:f},b={strides:p,pad:u,dataFormat:d,dilations:h,dimRoundingMode:l},m=e.ENGINE.runKernel(r.DepthwiseConv2dNative,C,b);return w?(0,s.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const d=(0,i.op)({depthwiseConv2d_:u});exports.depthwiseConv2d=d;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"puKH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","diag")};return e.ENGINE.runKernel(r.Diag,o)}const t=(0,i.op)({diag_:o});exports.diag=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"vqF1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation"),i=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function u(o,a,s,u,l=[1,1],p="NHWC"){const d=(0,t.convertToTensor)(o,"x","dilation2d"),f=(0,t.convertToTensor)(a,"filter","dilation2d");n.assert(3===d.rank||4===d.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+`${d.rank}.`),n.assert(3===f.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+`${f.rank}.`),n.assert("NHWC"===p,()=>"Error in dilation2d: Only NHWC is currently supported, "+`but got dataFormat of ${p}`);let c=d,k=!1;3===d.rank&&(c=(0,i.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),k=!0);const b={x:c,filter:f},y={strides:s,pad:u,dilations:l},h=e.ENGINE.runKernel(r.Dilation2D,b,y);return k?(0,i.reshape)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const l=(0,o.op)({dilation2d_:u});exports.dilation2d=l;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./reshape":"IoLG"}],"LJLN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equal=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./broadcast_util"),u=require("./operation");function a(u,a){let s=(0,n.convertToTensor)(u,"a","equal","string_or_numeric"),i=(0,n.convertToTensor)(a,"b","equal","string_or_numeric");[s,i]=(0,t.makeTypesMatch)(s,i),(0,o.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.Equal,l)}const s=(0,u.op)({equal_:a});exports.equal=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"ALar":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.where=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./broadcast_to"),n=require("./broadcast_util"),s=require("./operation");function a(s,a,c){const i=(0,o.convertToTensor)(a,"a","where"),d=(0,o.convertToTensor)(c,"b","where"),u=(0,o.convertToTensor)(s,"condition","where","bool"),h=(0,n.assertAndGetBroadcastShape)((0,n.assertAndGetBroadcastShape)(u.shape,i.shape),d.shape),p={condition:(0,t.broadcastTo)(u,h),t:(0,t.broadcastTo)(i,h),e:(0,t.broadcastTo)(d,h)};return e.ENGINE.runKernel(r.Select,p)}const c=(0,s.op)({where_:a});exports.where=c;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./broadcast_to":"l9pe","./broadcast_util":"Xh9J","./operation":"pYCl"}],"HQup":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function i(n){const i={x:(0,o.convertToTensor)(n,"x","zerosLike")};return e.ENGINE.runKernel(r.ZerosLike,i)}const s=(0,n.op)({zerosLike_:i});exports.zerosLike=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"htQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divNoNan=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),o=require("./div"),i=require("./equal"),t=require("./operation"),n=require("./where"),u=require("./zeros_like");function s(t,s){let v=(0,r.convertToTensor)(t,"a","div"),a=(0,r.convertToTensor)(s,"b","div");[v,a]=(0,e.makeTypesMatch)(v,a);const d=(0,o.div)(v,a),q=(0,u.zerosLike)(d),c=(0,i.equal)(a,q);return(0,n.where)(c,q,d)}const v=(0,t.op)({divNoNan_:s});exports.divNoNan=v;
},{"../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./div":"M4To","./equal":"LJLN","./operation":"pYCl","./where":"ALar","./zeros_like":"HQup"}],"uwXW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dot=void 0;var e=require("../tensor_util_env"),r=s(require("../util")),t=require("./mat_mul"),n=require("./operation"),a=require("./reshape");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function u(n,o){const s=(0,e.convertToTensor)(n,"t1","dot"),u=(0,e.convertToTensor)(o,"t2","dot");r.assert(!(1!==s.rank&&2!==s.rank||1!==u.rank&&2!==u.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+`${s.rank} and ${u.rank}.`);const i=1===s.rank?s.size:s.shape[1],p=1===u.rank?u.size:u.shape[0];if(r.assert(i===p,()=>"Error in dot: inner dimensions of inputs must match, but got "+`${i} and ${p}.`),1===s.rank&&1===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[-1,1]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[])}if(1===s.rank&&2===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[u.shape[0],u.shape[1]]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[n.size])}if(2===s.rank&&1===u.rank){const e=(0,a.reshape)(u,[-1,1]),r=(0,t.matMul)(s,e);return(0,a.reshape)(r,[r.size])}{const e=(0,a.reshape)(u,[u.shape[0],u.shape[1]]);return(0,t.matMul)(s,e)}}const i=(0,n.op)({dot_:u});exports.dot=i;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./mat_mul":"cPiM","./operation":"pYCl","./reshape":"IoLG"}],"bOpy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.einsum=void 0,exports.einsum_=o;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function o(s,...o){const i=o.map((e,r)=>(0,n.convertToTensor)(e,`tensors${r}`,"einsum")),t={equation:s};return e.ENGINE.runKernel(r.Einsum,i,t)}const i=(0,s.op)({einsum_:o});exports.einsum=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"qaoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","elu","float32")};return e.ENGINE.runKernel(r.Elu,t)}const u=(0,o.op)({elu_:t});exports.elu=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"Uuut":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erf=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=f(require("../util")),o=require("./cast"),u=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function a(u){let i=(0,r.convertToTensor)(u,"x","erf");n.assert("int32"===i.dtype||"float32"===i.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===i.dtype&&(i=(0,o.cast)(i,"float32"));const f={x:i};return e.ENGINE.runKernel(t.Erf,f)}const p=(0,u.op)({erf_:a});exports.erf=p;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./cast":"OenY","./operation":"pYCl"}],"KXhP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertAxesAreInnerMostDims=p,exports.axesAreInnerMostDims=n,exports.combineLocations=o,exports.computeOutAndReduceShapes=u,exports.expandShapeToKeepDim=s,exports.getAxesPermutation=i,exports.getInnerMostAxes=a,exports.getUndoAxesPermutation=f;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var p=u?Object.getOwnPropertyDescriptor(e,s):null;p&&(p.get||p.set)?Object.defineProperty(o,s,p):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}function n(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function o(e,t,r){const n=e.length+t.length,o=[];let u=0,s=0;for(let p=0;p<n;p++)-1===r.indexOf(p)?o.push(e[u++]):o.push(t[s++]);return o}function u(e,t){const r=[],n=e.length;for(let o=0;o<n;o++)-1===t.indexOf(o)&&r.push(e[o]);return[r,t.map(t=>e[t])]}function s(e,t){return o(e,t.map(e=>1),t)}function p(t,r,o){e.assert(n(r,o),()=>`${t} supports only inner-most axes for now. `+`Got axes ${r} and rank-${o} input.`)}function i(e,t){if(n(e,t))return null;const r=[];for(let n=0;n<t;++n)-1===e.indexOf(n)&&r.push(n);return e.forEach(e=>r.push(e)),r}function f(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function a(e,t){const r=[];for(let n=t-e;n<t;++n)r.push(n);return r}
},{"../util":"uQV1"}],"lGXH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","max")},u={reductionIndices:t,keepDims:i};return e.ENGINE.runKernel(r.Max,s,u)}const i=(0,o.op)({max_:t});exports.max=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"MWg7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i,o=null,t=!1){const s={x:(0,n.convertToTensor)(i,"x","min")},u={axis:o,keepDims:t};return e.ENGINE.runKernel(r.Min,s,u)}const t=(0,i.op)({min_:o});exports.min=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"WjtV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pow=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function s(t,s){let i=(0,n.convertToTensor)(t,"base","pow"),p=(0,n.convertToTensor)(s,"exp","pow");[i,p]=(0,o.makeTypesMatch)(i,p);const u={a:i,b:p};return e.ENGINE.runKernel(r.Pow,u)}const i=(0,t.op)({pow_:s});exports.pow=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./operation":"pYCl"}],"oY2j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scalar=t;var r=require("../util"),e=require("./tensor_ops_util");function t(t,a){if(((0,r.isTypedArray)(t)&&"string"!==a||Array.isArray(t))&&"complex64"!==a)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===a&&(0,r.isTypedArray)(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,e.makeTensor)(t,[],[],a)}
},{"../util":"uQV1","./tensor_ops_util":"S7VZ"}],"y3Gt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrt=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n){const o={x:(0,t.convertToTensor)(n,"x","sqrt","float32")};return e.ENGINE.runKernel(r.Sqrt,o)}const s=(0,n.op)({sqrt_:o});exports.sqrt=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"wngC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.square=void 0;var e=require("../engine"),r=require("../tensor_util_env"),o=require("./operation");function n(o){const n=(0,r.convertToTensor)(o,"x","square");return e.ENGINE.runKernel("Square",{x:n},{})}const t=(0,o.op)({square_:n});exports.square=t;
},{"../engine":"Wn3f","../tensor_util_env":"qMTF","./operation":"pYCl"}],"WgrX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./cast"),s=require("./operation");function o(s,o=null,u=!1){let i=(0,t.convertToTensor)(s,"x","sum");"bool"===i.dtype&&(i=(0,n.cast)(i,"int32"));const l={x:i},c={axis:o,keepDims:u};return e.ENGINE.runKernel(r.Sum,l,c)}const u=(0,s.op)({sum_:o});exports.sum=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./cast":"OenY","./operation":"pYCl"}],"W4Ys":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.norm=void 0;var r=require("../tensor_util_env"),e=require("../util"),n=require("./abs"),t=d(require("./axis_util")),i=require("./max"),u=require("./min"),a=require("./operation"),o=require("./pow"),s=require("./reshape"),f=require("./scalar"),l=require("./sqrt"),p=require("./square"),c=require("./sum");function m(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(m=function(r){return r?n:e})(r)}function d(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var n=m(e);if(n&&n.has(r))return n.get(r);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var a=i?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=r[u]}return t.default=r,n&&n.set(r,t),t}function q(n,i="euclidean",u=null,a=!1){const o=b(n=(0,r.convertToTensor)(n,"x","norm"),i,u);let f=o.shape;if(a){const r=(0,e.parseAxisParam)(u,n.shape);f=t.expandShapeToKeepDim(o.shape,r)}return(0,s.reshape)(o,f)}function b(r,e,t=null){if(0===r.rank)return(0,n.abs)(r);if(1!==r.rank&&null===t)return b((0,s.reshape)(r,[-1]),e,t);if(1===r.rank||"number"==typeof t||Array.isArray(t)&&1===t.length){if(1===e)return(0,c.sum)((0,n.abs)(r),t);if(e===1/0)return(0,i.max)((0,n.abs)(r),t);if(e===-1/0)return(0,u.min)((0,n.abs)(r),t);if("euclidean"===e||2===e)return(0,l.sqrt)((0,c.sum)((0,o.pow)((0,n.abs)(r),(0,f.scalar)(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&2===t.length){if(1===e)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[0]),t[1]-1);if(e===1/0)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if(e===-1/0)return(0,u.min)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if("fro"===e||"euclidean"===e)return(0,l.sqrt)((0,c.sum)((0,p.square)(r),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const v=(0,a.op)({norm_:q});exports.norm=v;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./abs":"ic15","./axis_util":"KXhP","./max":"lGXH","./min":"MWg7","./operation":"pYCl","./pow":"WjtV","./reshape":"IoLG","./scalar":"oY2j","./sqrt":"y3Gt","./square":"wngC","./sum":"WgrX"}],"qIXk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.euclideanNorm=void 0;var e=require("./norm"),r=require("./operation");function o(r,o=null,n=!1){return(0,e.norm)(r,"euclidean",o,n)}const n=(0,r.op)({euclideanNorm_:o});exports.euclideanNorm=n;
},{"./norm":"W4Ys","./operation":"pYCl"}],"lPHG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.exp=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","exp")};return e.ENGINE.runKernel(r.Exp,t)}const i=(0,o.op)({exp_:t});exports.exp=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"wPBp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function s(o,i=0){const u=(0,t.convertToTensor)(o,"x","expandDims","string_or_numeric");n.assert(i<=u.rank,()=>"Axis must be <= rank of the tensor");const s={input:u},a={dim:i};return e.ENGINE.runKernel(r.ExpandDims,s,a)}const a=(0,o.op)({expandDims_:s});exports.expandDims=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"RyT8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t={x:(0,n.convertToTensor)(o,"x","expm1")};return e.ENGINE.runKernel(r.Expm1,t)}const i=(0,o.op)({expm1_:t});exports.expm1=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"YKMi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function a(o,i){const u=(0,t.convertToTensor)(o,"x","tile","string_or_numeric");n.assert(u.rank===i.length,()=>`Error in transpose: rank of input ${u.rank} `+`must match length of reps ${i}.`);const a={x:u},s={reps:i};return e.ENGINE.runKernel(r.Tile,a,s)}const s=(0,o.op)({tile_:a});exports.tile=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"KL83":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eye=void 0;var e=require("./buffer"),r=require("./expand_dims"),t=require("./operation"),n=require("./reshape"),i=require("./tile");function s(t,s,o,u="float32"){null==s&&(s=t);const l=(0,e.buffer)([t,s],u),p=t<=s?t:s;for(let e=0;e<p;++e)l.set(1,e,e);const a=(0,n.reshape)(l.toTensor(),[t,s]);if(null==o)return a;if(1===o.length)return(0,i.tile)((0,r.expandDims)(a,0),[o[0],1,1]);if(2===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)(a,0),0),[o[0],o[1],1,1]);if(3===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)((0,r.expandDims)(a,0),0),0),[o[0],o[1],o[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+`batchShapes, but received ${o.length}D.`)}const o=(0,t.op)({eye_:s});exports.eye=o;
},{"./buffer":"Ajeg","./expand_dims":"wPBp","./operation":"pYCl","./reshape":"IoLG","./tile":"YKMi"}],"uRSA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=n;var e=require("../engine"),r=require("../kernel_names");function n(n,t,l){const u={shape:n,value:t,dtype:l};return e.ENGINE.runKernel(r.Fill,{},u)}
},{"../engine":"Wn3f","../kernel_names":"E7d7"}],"Tt6T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floor=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","floor","float32")};return e.ENGINE.runKernel(r.Floor,t)}const i=(0,n.op)({floor_:t});exports.floor=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"qpmj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gather=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o,i=0,s=0){const a={x:(0,t.convertToTensor)(n,"x","gather"),indices:(0,t.convertToTensor)(o,"indices","gather","int32")},u={axis:i,batchDims:s};return e.ENGINE.runKernel(r.GatherV2,a,u)}const i=(0,n.op)({gather_:o});exports.gather=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"xzex":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greater=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./broadcast_util"),a=require("./operation");function s(a,s){let i=(0,n.convertToTensor)(a,"a","greater","string_or_numeric"),u=(0,n.convertToTensor)(s,"b","greater","string_or_numeric");[i,u]=(0,t.makeTypesMatch)(i,u),(0,o.assertAndGetBroadcastShape)(i.shape,u.shape);const c={a:i,b:u};return e.ENGINE.runKernel(r.Greater,c)}const i=(0,a.op)({greater_:s});exports.greater=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"nMa8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function u(o,u){let s=(0,a.convertToTensor)(o,"a","greaterEqual","string_or_numeric"),i=(0,a.convertToTensor)(u,"b","greaterEqual","string_or_numeric");[s,i]=(0,t.makeTypesMatch)(s,i),(0,n.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.GreaterEqual,l)}const s=(0,o.op)({greaterEqual_:u});exports.greaterEqual=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"Zi9b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFinite=void 0;var e=require("../engine"),i=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,r.convertToTensor)(n,"x","isFinite")};return e.ENGINE.runKernel(i.IsFinite,t)}const o=(0,n.op)({isFinite_:t});exports.isFinite=o;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"cVf4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInf=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s={x:(0,n.convertToTensor)(o,"x","isInf")};return e.ENGINE.runKernel(r.IsInf,s)}const i=(0,o.op)({isInf_:s});exports.isInf=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"W1RT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaN=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s={x:(0,n.convertToTensor)(o,"x","isNaN")};return e.ENGINE.runKernel(r.IsNan,s)}const i=(0,o.op)({isNaN_:s});exports.isNaN=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"TUfJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u=.2){const l={x:(0,n.convertToTensor)(o,"x","leakyRelu")},t={alpha:u};return e.ENGINE.runKernel(r.LeakyRelu,l,t)}const l=(0,o.op)({leakyRelu_:u});exports.leakyRelu=l;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"pOeu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.less=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function i(o,i){let u=(0,t.convertToTensor)(o,"a","less","string_or_numeric"),a=(0,t.convertToTensor)(i,"b","less","string_or_numeric");[u,a]=(0,s.makeTypesMatch)(u,a),(0,n.assertAndGetBroadcastShape)(u.shape,a.shape);const l={a:u,b:a};return e.ENGINE.runKernel(r.Less,l)}const u=(0,o.op)({less_:i});exports.less=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"BA1Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function u(o,u){let a=(0,t.convertToTensor)(o,"a","lessEqual","string_or_numeric"),i=(0,t.convertToTensor)(u,"b","lessEqual","string_or_numeric");[a,i]=(0,s.makeTypesMatch)(a,i),(0,n.assertAndGetBroadcastShape)(a.shape,i.shape);const l={a:a,b:i};return e.ENGINE.runKernel(r.LessEqual,l)}const a=(0,o.op)({lessEqual_:u});exports.lessEqual=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"calK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linspace=n;var e=require("../engine"),r=require("../kernel_names");function n(n,t,s){if(s<=0)throw new Error("The number of values should be positive.");const o={start:n,stop:t,num:s};return e.ENGINE.runKernel(r.LinSpace,{},o)}
},{"../engine":"Wn3f","../kernel_names":"E7d7"}],"duxs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localResponseNormalization=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(o,s=5,i=1,p=1,u=.5){const l=(0,t.convertToTensor)(o,"x","localResponseNormalization");n.assert(4===l.rank||3===l.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`),n.assert(n.isInt(s),()=>"Error in localResponseNormalization: depthRadius must be an "+`integer but got depthRadius ${s}.`);let c=l,f=!1;3===l.rank&&(f=!0,c=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const d={x:c},h={depthRadius:s,bias:i,alpha:p,beta:u},b=e.ENGINE.runKernel(r.LRN,d,h);return f?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const u=(0,o.op)({localResponseNormalization_:p});exports.localResponseNormalization=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./reshape":"IoLG"}],"dxsf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","log","float32")};return e.ENGINE.runKernel(r.Log,t)}const i=(0,n.op)({log_:t});exports.log=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"bjbd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1p=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t={x:(0,o.convertToTensor)(n,"x","log1p")};return e.ENGINE.runKernel(r.Log1p,t)}const i=(0,n.op)({log1p_:t});exports.log1p=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"lNg9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.customGrad=f,exports.grad=o,exports.grads=u,exports.valueAndGrad=i,exports.valueAndGrads=l,exports.variableGrads=d;var e=require("./engine"),r=require("./tensor"),a=require("./tensor_util_env"),s=n(require("./util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=e[o]}return s.default=e,a&&a.set(e,s),s}function o(r){return s.assert(s.isFunction(r),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const o=(0,a.convertToTensor)(t,"x","tf.grad","string_or_numeric"),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grad"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(o),[o],u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),c(t),t[0]})}}function u(r){return s.assert(s.isFunction(r),()=>"The f passed in grads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const o=(0,a.convertToTensorArray)(t,"args","tf.grads","string_or_numeric"),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grads"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(...o),o,u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(t),t})}}function i(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{s.assert(t instanceof r.Tensor,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:o,value:u}=e.ENGINE.gradients(()=>a(t),[t],n);return c(o),{grad:o[0],value:u}}}function l(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t)&&t.every(e=>e instanceof r.Tensor),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const o=e.ENGINE.gradients(()=>a(...t),t,n);return null!=n&&s.assertShapesMatch(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(o.grads),o}}function d(a,t){s.assert(s.isFunction(a),()=>"The f passed in variableGrads(f) must be a function"),s.assert(null==t||Array.isArray(t)&&t.every(e=>e instanceof r.Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const r in e.ENGINE.registeredVariables)t.push(e.ENGINE.registeredVariables[r])}const o=n?t.filter(e=>!e.trainable):null,u=t.length;t=t.filter(e=>e.trainable),s.assert(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+`be trainable, but none of the ${u} variables is `+"trainable.");const{value:i,grads:l}=e.ENGINE.gradients(a,t,null,!0);s.assert(l.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),s.assert(0===i.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+`returned a rank-${i.rank} tensor`);const d={};return t.forEach((e,r)=>{null!=l[r]&&(d[e.name]=l[r])}),null!=o&&o.forEach(e=>d[e.name]=null),{value:i,grads:d}}function f(r){return e.ENGINE.customGrad(r)}function c(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}
},{"./engine":"Wn3f","./tensor":"olbE","./tensor_util_env":"qMTF","./util":"uQV1"}],"dYA7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplus=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),s=require("./operation");function t(s){const t={x:(0,o.convertToTensor)(s,"x","softplus")};return e.ENGINE.runKernel(r.Softplus,t)}const n=(0,s.op)({softplus_:t});exports.softplus=n;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"rzXd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSigmoid=void 0;var e=require("../gradients"),r=require("../tensor_util_env"),o=require("./mul"),i=require("./neg"),u=require("./operation"),t=require("./sigmoid"),n=require("./softplus");function s(u){const s=(0,r.convertToTensor)(u,"x","logSigmoid");return(0,e.customGrad)(e=>{return{value:(0,i.neg)((0,n.softplus)((0,i.neg)(e))),gradFunc:r=>{return(0,o.mul)(r,(0,t.sigmoid)((0,i.neg)(e)))}}})(s)}const g=(0,u.op)({logSigmoid_:s});exports.logSigmoid=g;
},{"../gradients":"lNg9","../tensor_util_env":"qMTF","./mul":"Nt3M","./neg":"OZKu","./operation":"pYCl","./sigmoid":"JWCK","./softplus":"dYA7"}],"w3Uc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sub=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),o=require("../tensor_util_env"),t=require("./operation");function s(t,s){let u=(0,o.convertToTensor)(t,"a","sub"),i=(0,o.convertToTensor)(s,"b","sub");[u,i]=(0,n.makeTypesMatch)(u,i);const b={a:u,b:i};return e.ENGINE.runKernel(r.Sub,b)}const u=(0,t.op)({sub_:s});exports.sub=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./operation":"pYCl"}],"Rnpm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSoftmax=void 0;var r=require("../gradients"),e=require("../tensor_util_env"),o=require("./cast"),t=require("./exp"),s=require("./log"),u=require("./max"),a=require("./mul"),n=require("./operation"),i=require("./sub"),l=require("./sum");function m(n,m=-1){const x=(0,e.convertToTensor)(n,"logits","logSoftmax");if(-1===m&&(m=x.rank-1),m!==x.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${x.rank} and axis was ${m}`);return(0,r.customGrad)((r,e)=>{const n=(0,u.max)(r,m,!0),x=(0,i.sub)(r,n),c=(0,i.sub)((0,o.cast)(x,"float32"),(0,s.log)((0,l.sum)((0,t.exp)(x),m,!0)));e([c]);return{value:c,gradFunc:(r,e)=>{const[o]=e,s=(0,t.exp)(o);return(0,i.sub)(r,(0,a.mul)((0,l.sum)(r,m,!0),s))}}})(x)}const x=(0,n.op)({logSoftmax_:m});exports.logSoftmax=x;
},{"../gradients":"lNg9","../tensor_util_env":"qMTF","./cast":"OenY","./exp":"lPHG","./log":"dxsf","./max":"lGXH","./mul":"Nt3M","./operation":"pYCl","./sub":"w3Uc","./sum":"WgrX"}],"heyF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSumExp=void 0;var e=require("../tensor_util_env"),r=require("../util"),u=require("./add"),o=require("./axis_util"),s=require("./exp"),i=require("./log"),p=require("./max"),a=require("./operation"),t=require("./reshape"),n=require("./sub"),x=require("./sum");function l(a,l=null,q=!1){const m=(0,e.convertToTensor)(a,"x","logSumExp"),d=(0,r.parseAxisParam)(l,m.shape),c=(0,p.max)(m,d,!0),h=(0,n.sub)(m,c),g=(0,s.exp)(h),_=(0,x.sum)(g,d),v=(0,i.log)(_),S=(0,u.add)((0,t.reshape)(c,v.shape),v);if(q){const e=(0,o.expandShapeToKeepDim)(S.shape,d);return(0,t.reshape)(S,e)}return S}const q=(0,a.op)({logSumExp_:l});exports.logSumExp=q;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./add":"RKQn","./axis_util":"KXhP","./exp":"lPHG","./log":"dxsf","./max":"lGXH","./operation":"pYCl","./reshape":"IoLG","./sub":"w3Uc","./sum":"WgrX"}],"Uxvi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAnd=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./broadcast_util"),t=require("./operation");function a(t,a){const i=(0,r.convertToTensor)(t,"a","logicalAnd","bool"),l=(0,r.convertToTensor)(a,"b","logicalAnd","bool");(0,n.assertAndGetBroadcastShape)(i.shape,l.shape);const s={a:i,b:l};return e.ENGINE.runKernel(o.LogicalAnd,s)}const i=(0,t.op)({logicalAnd_:a});exports.logicalAnd=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"NW6f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNot=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function n(t){const n={x:(0,r.convertToTensor)(t,"x","logicalNot","bool")};return e.ENGINE.runKernel(o.LogicalNot,n)}const i=(0,t.op)({logicalNot_:n});exports.logicalNot=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"SNyQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOr=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./broadcast_util"),n=require("./operation");function a(n,a){const i=(0,o.convertToTensor)(n,"a","logicalOr","bool"),l=(0,o.convertToTensor)(a,"b","logicalOr","bool");(0,t.assertAndGetBroadcastShape)(i.shape,l.shape);const s={a:i,b:l};return e.ENGINE.runKernel(r.LogicalOr,s)}const i=(0,n.op)({logicalOr_:a});exports.logicalOr=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"TWtt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalXor=void 0;var o=require("../tensor_util_env"),r=require("./broadcast_util"),e=require("./logical_and"),l=require("./logical_not"),a=require("./logical_or"),i=require("./operation");function t(i,t){const c=(0,o.convertToTensor)(i,"a","logicalXor","bool"),n=(0,o.convertToTensor)(t,"b","logicalXor","bool");return(0,r.assertAndGetBroadcastShape)(c.shape,n.shape),(0,e.logicalAnd)((0,a.logicalOr)(i,t),(0,l.logicalNot)((0,e.logicalAnd)(i,t)))}const c=(0,i.op)({logicalXor_:t});exports.logicalXor=c;
},{"../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./logical_and":"Uxvi","./logical_not":"NW6f","./logical_or":"SNyQ","./operation":"pYCl"}],"XX4U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchSorted=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util_env"),t=require("../util_base"),o=require("./operation"),n=require("./reshape");const a=2147483648;function i(o,i,u="left"){const h=(0,s.convertToTensor)(o,"sortedSequence","searchSorted"),p=(0,s.convertToTensor)(i,"values","searchSorted"),c=h.shape[h.shape.length-1],d=p.shape[p.shape.length-1],l=(0,n.reshape)(h,[-1,c]),S=(0,n.reshape)(p,[-1,d]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==S.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,t.sizeFromShape)(S.shape)>=a)throw new Error(`values tensor size must less than ${a}`);if(l.shape[1]>=a)throw new Error(`trailing dim_size must less than ${a} for int32 output type, was ${l.shape[1]}`);const m={sortedSequence:l,values:S},v={side:u};return e.ENGINE.runKernel(r.SearchSorted,m,v)}const u=(0,o.op)({searchSorted_:i});exports.searchSorted=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util_base":"cppa","./operation":"pYCl","./reshape":"IoLG"}],"HlrH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lowerBound=r;var e=require("./search_sorted");function r(r,t){return(0,e.searchSorted)(r,t,"left")}
},{"./search_sorted":"XX4U"}],"KHqM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=u(require("../util")),n=u(require("./conv_util")),i=require("./operation"),a=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function l(i,s,u,l,p){const c=(0,t.convertToTensor)(i,"x","maxPool");let d=c,f=!1;3===c.rank&&(f=!0,d=(0,a.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),o.assert(4===d.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${d.rank}.`),o.assert(n.eitherStridesOrDilationsAreOne(u,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '1'`),n.checkPadOnDimRoundingMode("maxPool",l,p);const P={x:d},h={filterSize:s,strides:u,pad:l,dimRoundingMode:p},x=e.ENGINE.runKernel(r.MaxPool,P,h);return f?(0,a.reshape)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const p=(0,i.op)({maxPool_:l});exports.maxPool=p;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"a6pO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=s(require("../util")),n=require("./conv_util"),a=require("./operation"),u=require("./reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function s(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function p(a,i=[1,1,1],s,p,l,d="NDHWC"){const c=(0,t.convertToTensor)(a,"x","maxPool3d");let f=c,P=!1;4===c.rank&&(P=!0,f=(0,u.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),o.assert(5===f.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${f.rank}.`),o.assert("NDHWC"===d,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${d}`),(0,n.checkPadOnDimRoundingMode)("maxPool3d",p,l);const h={x:f},x={filterSize:i,strides:s,pad:p,dimRoundingMode:l,dataFormat:d},m=e.ENGINE.runKernel(r.MaxPool3D,h,x);return P?(0,u.reshape)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const l=(0,a.op)({maxPool3d_:p});exports.maxPool3d=l;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"r4xZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmax=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./operation");function i(t,i,n,x,a=!1){const s={x:(0,o.convertToTensor)(t,"x","maxPoolWithArgmax")},l={filterSize:i,strides:n,pad:x,includeBatchInIndex:a},u=e.ENGINE.runKernel(r.MaxPoolWithArgmax,s,l);return{result:u[0],indexes:u[1]}}const n=(0,t.op)({maxPoolWithArgmax_:i});exports.maxPoolWithArgmax=n;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"QvEy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),i=require("./broadcast_util"),o=require("./cast"),n=require("./operation");function s(n,s){let u=(0,a.convertToTensor)(n,"a","maximum"),m=(0,a.convertToTensor)(s,"b","maximum");[u,m]=(0,t.makeTypesMatch)(u,m),"bool"===u.dtype&&(u=(0,o.cast)(u,"int32"),m=(0,o.cast)(m,"int32")),(0,i.assertAndGetBroadcastShape)(u.shape,m.shape);const c={a:u,b:m};return e.ENGINE.runKernel(r.Maximum,c)}const u=(0,n.op)({maximum_:s});exports.maximum=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./cast":"OenY","./operation":"pYCl"}],"I8Ls":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mean=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t=null,i=!1){const s={x:(0,n.convertToTensor)(o,"x","mean")},u={axis:t,keepDims:i};return e.ENGINE.runKernel(r.Mean,s,u)}const i=(0,o.op)({mean_:t});exports.mean=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"f1QP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=t;var e=require("../engine"),r=require("../util"),o=require("./complex");function t(s,i="float32"){if("complex64"===i){const e=t(s,"float32"),r=t(s,"float32");return(0,o.complex)(e,r)}const n=(0,r.makeZerosTypedArray)((0,r.sizeFromShape)(s),i);return e.ENGINE.makeTensor(n,s,i)}
},{"../engine":"Wn3f","../util":"uQV1","./complex":"EUHH"}],"dZ45":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ones=s;var e=require("../engine"),r=require("../util"),o=require("./complex"),t=require("./zeros");function s(n,i="float32"){if("complex64"===i){const e=s(n,"float32"),r=(0,t.zeros)(n,"float32");return(0,o.complex)(e,r)}const u=(0,r.makeOnesTypedArray)((0,r.sizeFromShape)(n),i);return e.ENGINE.makeTensor(u,n,i)}
},{"../engine":"Wn3f","../util":"uQV1","./complex":"EUHH","./zeros":"f1QP"}],"RlVT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meshgrid=n;var e=require("./mat_mul"),r=require("./ones"),t=require("./reshape"),s=require("../tensor"),o=require("../tensor_util_env"),i=require("../util_base");function n(n,a,{indexing:u="xy"}={}){if("xy"!==u&&"ij"!==u)throw new TypeError(`${u} is not a valid third argument to meshgrid`);if(void 0===n)return[];let p=(0,o.convertToTensor)(n,"x","meshgrid",n instanceof s.Tensor?n.dtype:"float32");if(void 0===a)return[p];let d=(0,o.convertToTensor)(a,"y","meshgrid",a instanceof s.Tensor?a.dtype:"float32");const h=(0,i.sizeFromShape)(p.shape),l=(0,i.sizeFromShape)(d.shape);return"xy"===u?(p=(0,t.reshape)(p,[1,-1]),d=(0,t.reshape)(d,[-1,1]),[(0,e.matMul)((0,r.ones)([l,1],p.dtype),p),(0,e.matMul)(d,(0,r.ones)([1,h],d.dtype))]):(p=(0,t.reshape)(p,[-1,1]),d=(0,t.reshape)(d,[1,-1]),[(0,e.matMul)(p,(0,r.ones)([1,l],p.dtype)),(0,e.matMul)((0,r.ones)([h,1],d.dtype),d)])}
},{"./mat_mul":"cPiM","./ones":"dZ45","./reshape":"IoLG","../tensor":"olbE","../tensor_util_env":"qMTF","../util_base":"cppa"}],"AUvU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),i=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./cast"),s=require("./operation");function u(s,u){let a=(0,i.convertToTensor)(s,"a","minimum"),m=(0,i.convertToTensor)(u,"b","minimum");[a,m]=(0,t.makeTypesMatch)(a,m),"bool"===a.dtype&&(a=(0,o.cast)(a,"int32"),m=(0,o.cast)(m,"int32")),(0,n.assertAndGetBroadcastShape)(a.shape,m.shape);const c={a:a,b:m};return e.ENGINE.runKernel(r.Minimum,c)}const a=(0,s.op)({minimum_:u});exports.minimum=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./cast":"OenY","./operation":"pYCl"}],"Cl4A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function s(o,a,i){n.assert("reflect"===i||"symmetric"===i,()=>"Invalid mode. Mode must be either reflect or symmetric. "+`Got ${i}.`);const s=(0,t.convertToTensor)(o,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");n.assert(a.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. `+`Got ${a.length}.`);const u="reflect"===i?1:0;for(let e=0;e<s.rank;e++)n.assert(2===a[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),n.assert(a[e][0]>=0&&a[e][0]<=s.shape[e]-u&&a[e][1]>=0&&a[e][1]<=s.shape[e]-u,()=>`Padding in dimension ${e} cannot be greater than or equal `+`to ${s.shape[e]-u} or less than 0 for input of `+`shape ${s.shape}`);const d={paddings:a,mode:i},c={x:s};return e.ENGINE.runKernel(r.MirrorPad,c,d)}const u=(0,o.op)({mirrorPad_:s});exports.mirrorPad=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"ffDY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function s(t,s){let i=(0,n.convertToTensor)(t,"a","mod"),u=(0,n.convertToTensor)(s,"b","mod");[i,u]=(0,o.makeTypesMatch)(i,u);const d={a:i,b:u};return e.ENGINE.runKernel(r.Mod,d)}const i=(0,t.op)({mod_:s});exports.mod=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./operation":"pYCl"}],"v7lB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moments=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./axis_util"),t=require("./cast"),a=require("./mean"),n=require("./operation"),o=require("./reshape"),u=require("./square"),i=require("./sub");function p(n,p=null,m=!1){n=(0,e.convertToTensor)(n,"x","moments");const q=(0,r.parseAxisParam)(p,n.shape),c=(0,a.mean)(n,q,m);let l=c.shape;m||(l=(0,s.expandShapeToKeepDim)(c.shape,q));const x=(0,u.square)((0,i.sub)((0,t.cast)(n,"float32"),(0,o.reshape)(c,l)));return{mean:c,variance:(0,a.mean)(x,q,m)}}const m=(0,n.op)({moments_:p});exports.moments=m;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./axis_util":"KXhP","./cast":"OenY","./mean":"I8Ls","./operation":"pYCl","./reshape":"IoLG","./square":"wngC","./sub":"w3Uc"}],"VOxu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiRNNCell=void 0;var e=require("../tensor_util_env"),t=require("./operation");function o(t,o,r,l){const n=(0,e.convertToTensor)(o,"data","multiRNNCell"),s=(0,e.convertToTensorArray)(r,"c","multiRNNCell"),u=(0,e.convertToTensorArray)(l,"h","multiRNNCell");let i=n;const c=[];for(let e=0;e<t.length;e++){const o=t[e](i,s[e],u[e]);c.push(o[0]),c.push(o[1]),i=o[1]}const N=[],p=[];for(let e=0;e<c.length;e+=2)N.push(c[e]),p.push(c[e+1]);return[N,p]}const r=(0,t.op)({multiRNNCell_:o});exports.multiRNNCell=r;
},{"../tensor_util_env":"qMTF","./operation":"pYCl"}],"iNRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),i=require("./operation"),t=require("./reshape");function n(i,n,s,u=!1){const l=(0,o.convertToTensor)(i,"logits","multinomial"),a=l.size,m=l.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${a}.`);if(m>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${m}`);s=s||Math.random();const p={logits:1===m?(0,t.reshape)(l,[1,-1]):l},c={numSamples:n,seed:s,normalized:u},d=e.ENGINE.runKernel(r.Multinomial,p,c);return 1===m?(0,t.reshape)(d,[d.size]):d}const s=(0,i.op)({multinomial_:n});exports.multinomial=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl","./reshape":"IoLG"}],"c6DU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./broadcast_util"),u=require("./operation");function a(u,a){let s=(0,n.convertToTensor)(u,"a","notEqual","string_or_numeric"),i=(0,n.convertToTensor)(a,"b","notEqual","string_or_numeric");[s,i]=(0,t.makeTypesMatch)(s,i),(0,o.assertAndGetBroadcastShape)(s.shape,i.shape);const l={a:s,b:i};return e.ENGINE.runKernel(r.NotEqual,l)}const s=(0,u.op)({notEqual_:a});exports.notEqual=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"mtgi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function i(o){const i={x:(0,n.convertToTensor)(o,"x","onesLike")};return e.ENGINE.runKernel(r.OnesLike,i)}const s=(0,o.op)({onesLike_:i});exports.onesLike=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"VUtK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outerProduct=void 0;var e=require("../tensor_util_env"),r=a(require("../util")),t=require("./mat_mul"),o=require("./operation"),n=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function i(o,u){const a=(0,e.convertToTensor)(o,"v1","outerProduct"),i=(0,e.convertToTensor)(u,"v2","outerProduct");r.assert(1===a.rank&&1===i.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+`${a.rank} and ${i.rank}.`);const c=(0,n.reshape)(a,[-1,1]),s=(0,n.reshape)(i,[1,-1]);return(0,t.matMul)(c,s)}const c=(0,o.op)({outerProduct_:i});exports.outerProduct=c;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./mat_mul":"cPiM","./operation":"pYCl","./reshape":"IoLG"}],"H66W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o,t,a=0){const s=(0,n.convertToTensor)(o,"x","pad");if(0===s.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:a},d={x:s};return e.ENGINE.runKernel(r.PadV2,d,i)}const a=(0,o.op)({pad_:t});exports.pad=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"PcsV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad1d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,o=0){return(0,e.assert)(2===d.length,()=>"Invalid number of paddings. Must be length of 2."),(0,t.pad)(r,[d],o)}const o=(0,r.op)({pad1d_:d});exports.pad1d=o;
},{"../util":"uQV1","./operation":"pYCl","./pad":"H66W"}],"l527":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad2d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,n=0){return(0,e.assert)(2===d.length&&2===d[0].length&&2===d[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,t.pad)(r,d,n)}const n=(0,r.op)({pad2d_:d});exports.pad2d=n;
},{"../util":"uQV1","./operation":"pYCl","./pad":"H66W"}],"Lf8A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad3d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function d(t,d,n=0){return(0,e.assert)(3===d.length&&2===d[0].length&&2===d[1].length&&2===d[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,d,n)}const n=(0,t.op)({pad3d_:d});exports.pad3d=n;
},{"../util":"uQV1","./operation":"pYCl","./pad":"H66W"}],"xvMA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad4d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function n(t,n,d=0){return(0,e.assert)(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,n,d)}const d=(0,t.op)({pad4d_:n});exports.pad4d=d;
},{"../util":"uQV1","./operation":"pYCl","./pad":"H66W"}],"pe9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),a=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function i(a,o,s){const i=(0,r.convertToTensor)(a,"x","spaceToBatchND");n.assert(i.rank>=1+o.length,()=>`input rank ${i.rank} should be > than [blockShape] ${o.length}`),n.assert(s.length===o.length,()=>`paddings.shape[0] ${s.length} must be equal to [blockShape] ${o.length}`),n.assert(i.shape.reduce((e,t,r)=>r>0&&r<=o.length?e&&(t+s[r-1][0]+s[r-1][1])%o[r-1]==0:e,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${s.toString()} must be divisible by blockShapes ${o.toString()}`);const p={x:i},u={blockShape:o,paddings:s};return e.ENGINE.runKernel(t.SpaceToBatchND,p,u)}const p=(0,a.op)({spaceToBatchND_:i});exports.spaceToBatchND=p;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"FVPb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool=void 0;var e=require("../tensor_util_env"),t=l(require("../util")),r=require("./avg_pool"),o=require("./batch_to_space_nd"),a=l(require("./conv_util")),n=require("./max_pool"),i=require("./operation"),p=require("./reshape"),s=require("./space_to_batch_nd");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=a?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}function c(i,u,l,c,d,m,v){null==d&&(d=[1,1]),null==m&&(m=1),0===c&&(c="valid");const _=(0,e.convertToTensor)(i,"x","maxPool");let b=_,O=!1;3===_.rank&&(O=!0,b=(0,p.reshape)(_,[1,_.shape[0],_.shape[1],_.shape[2]])),t.assert(a.eitherStridesOrDilationsAreOne(m,d),()=>"Error in pool: Either strides or dilations must be 1. "+`Got strides ${m} and dilations '${d}'`);const g=a.computePool2DInfo(b.shape,u,m,d,c),y=[g.dilationHeight,g.dilationWidth];let P;P="same"===c?h([g.filterHeight,g.filterWidth],y):[[0,0],[0,0]];const q=1===y[0]&&1===y[1],[j,x]=f([g.inHeight,g.inWidth],y,P),D=q?c:"valid",M=q?b:(0,s.spaceToBatchND)(b,y,j),W=("avg"===l?()=>(0,r.avgPool)(M,u,m,D,v):()=>(0,n.maxPool)(M,u,m,D,v))(),w=q?W:(0,o.batchToSpaceND)(W,y,x);return O?(0,p.reshape)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function f(e,t,r){const o=r.map(e=>e[0]),a=r.map(e=>e[1]),n=e.concat(o,a),i=t.map((e,t)=>(e-n[t]%e)%e),p=a.map((e,t)=>e+i[t]);return[t.map((e,t)=>[o[t],p[t]]),t.map((e,t)=>[0,i[t]])]}function h(e,t){const r=e.map((e,r)=>e+(e-1)*(t[r]-1)).map(e=>e-1),o=r.map(e=>Math.floor(e/2)),a=r.map((e,t)=>e-o[t]);return r.map((e,t)=>[o[t],a[t]])}const d=(0,i.op)({pool_:c});exports.pool=d;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./avg_pool":"YRN0","./batch_to_space_nd":"cbr1","./conv_util":"tcmi","./max_pool":"KHqM","./operation":"pYCl","./reshape":"IoLG","./space_to_batch_nd":"pe9T"}],"dn3A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o,u){const t={x:(0,n.convertToTensor)(o,"x","prelu"),alpha:(0,n.convertToTensor)(u,"alpha","prelu")};return e.ENGINE.runKernel(r.Prelu,t)}const t=(0,o.op)({prelu_:u});exports.prelu=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"zUPs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./cast"),n=require("./operation");function i(n,i=null,s=!1){let u=(0,o.convertToTensor)(n,"x","prod");"bool"===u.dtype&&(u=(0,t.cast)(u,"int32"));const p={x:u},d={axis:i,keepDims:s};return e.ENGINE.runKernel(r.Prod,p,d)}const s=(0,n.op)({prod_:i});exports.prod=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./cast":"OenY","./operation":"pYCl"}],"uVeA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rand=void 0;var e=require("../engine"),r=require("../util"),n=require("./operation");function t(n,t,o){const i=(0,r.sizeFromShape)(n);let a=null;if(null==o||"float32"===o)a=new Float32Array(i);else if("int32"===o)a=new Int32Array(i);else{if("bool"!==o)throw new Error(`Unknown data type ${o}`);a=new Uint8Array(i)}for(let e=0;e<i;e++)a[e]=t();return e.ENGINE.makeTensor(a,n,o)}const o=(0,n.op)({rand_:t});exports.rand=o;
},{"../engine":"Wn3f","../util":"uQV1","./operation":"pYCl"}],"r3wS":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function s(t){var n,e=this,s=(n=4022871197,function(t){t=String(t);for(var e=0;e<t.length;e++){var s=.02519603282416938*(n+=t.charCodeAt(e));s-=n=s>>>0,n=(s*=n)>>>0,n+=4294967296*(s-=n)}return 2.3283064365386963e-10*(n>>>0)});e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=s(" "),e.s1=s(" "),e.s2=s(" "),e.s0-=s(t),e.s0<0&&(e.s0+=1),e.s1-=s(t),e.s1<0&&(e.s1+=1),e.s2-=s(t),e.s2<0&&(e.s2+=1),s=null}function r(t,n){return n.c=t.c,n.s0=t.s0,n.s1=t.s1,n.s2=t.s2,n}function u(t,n){var e=new s(t),u=n&&n.state,o=e.next;return o.int32=function(){return 4294967296*e.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,u&&("object"==typeof u&&r(u,e),o.state=function(){return r(e,{})}),o}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.alea=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"BFM4":[function(require,module,exports) {
var global = arguments[3];
var define;
var n,r=arguments[3];!function(r,t,e){var o,u=256,i=6,a="random",f=e.pow(u,i),c=e.pow(2,52),s=2*c,l=u-1;function p(n,l,p){var m=[],v=d(function n(r,t){var e,o=[],u=typeof r;if(t&&"object"==u)for(e in r)try{o.push(n(r[e],t-1))}catch(i){}return o.length?o:"string"==u?r:r+"\0"}((l=1==l?{entropy:!0}:l||{}).entropy?[n,h(t)]:null==n?function(){try{var n;return o&&(n=o.randomBytes)?n=n(u):(n=new Uint8Array(u),(r.crypto||r.msCrypto).getRandomValues(n)),h(n)}catch(a){var e=r.navigator,i=e&&e.plugins;return[+new Date,r,i,r.screen,h(t)]}}():n,3),m),j=new g(m),S=function(){for(var n=j.g(i),r=f,t=0;n<c;)n=(n+t)*u,r*=u,t=j.g(1);for(;n>=s;)n/=2,r/=2,t>>>=1;return(n+t)/r};return S.int32=function(){return 0|j.g(4)},S.quick=function(){return j.g(4)/4294967296},S.double=S,d(h(j.S),t),(l.pass||p||function(n,r,t,o){return o&&(o.S&&y(o,j),n.state=function(){return y(j,{})}),t?(e[a]=n,r):n})(S,v,"global"in l?l.global:this==e,l.state)}function g(n){var r,t=n.length,e=this,o=0,i=e.i=e.j=0,a=e.S=[];for(t||(n=[t++]);o<u;)a[o]=o++;for(o=0;o<u;o++)a[o]=a[i=l&i+n[o%t]+(r=a[o])],a[i]=r;(e.g=function(n){for(var r,t=0,o=e.i,i=e.j,a=e.S;n--;)r=a[o=l&o+1],t=t*u+a[l&(a[o]=a[i=l&i+r])+(a[i]=r)];return e.i=o,e.j=i,t})(u)}function y(n,r){return r.i=n.i,r.j=n.j,r.S=n.S.slice(),r}function d(n,r){for(var t,e=n+"",o=0;o<e.length;)r[l&o]=l&(t^=19*r[l&o])+e.charCodeAt(o++);return h(r)}function h(n){return String.fromCharCode.apply(0,n)}if(d(e.random(),t),"object"==typeof module&&module.exports){module.exports=p;try{o=require("crypto")}catch(m){}}else"function"==typeof n&&n.amd?n(function(){return p}):e["seed"+a]=p}("undefined"!=typeof self?self:this,[],Math);
},{"crypto":"sC8V"}],"Q4CF":[function(require,module,exports) {
var r=require("./lib/alea"),e=require("./lib/xor128"),i=require("./lib/xorwow"),o=require("./lib/xorshift7"),l=require("./lib/xor4096"),x=require("./lib/tychei"),u=require("./seedrandom");u.alea=r,u.xor128=e,u.xorwow=i,u.xorshift7=o,u.xor4096=l,u.tychei=x,module.exports=u;
},{"./lib/alea":"r3wS","./lib/xor128":"w3Ll","./lib/xorwow":"OwKO","./lib/xorshift7":"OrVu","./lib/xor4096":"DrnH","./lib/tychei":"yIlK","./seedrandom":"BFM4"}],"AHKa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UniformRandom=exports.RandGamma=exports.MPRandGauss=void 0,exports.expectArrayInMeanStdRange=h,exports.jarqueBeraNormalityTest=i;var t=r(require("seedrandom")),e=require("../test_util");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var i=s?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=t[o]}return a.default=t,r&&r.set(t,a),a}class a{constructor(e,n,r,a,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=s||Math.random();this.random=t.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,a,s;do{s=(r=2*this.random()-1)*r+(a=2*this.random()-1)*a}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}exports.MPRandGauss=a;class s{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const o=s||Math.random();this.randu=t.alea(o.toString()),this.randn=new a(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-s+Math.log(s)),(a=this.randu())<e||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}exports.RandGamma=s;class o{constructor(e=0,n=1,r,a){if(this.canReturnFloat=(()=>null==this.dtype||"float32"===this.dtype),this.min=e,this.range=n-e,this.dtype=r,null==a&&(a=Math.random()),"number"==typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=t.alea(a)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}function i(t){const e=t.length,n=c(t),r=d(t),a=e/6*(Math.pow(n,2)+.25*Math.pow(r-3,2));if(a>5.991)throw new Error(`Invalid p-value for JB: ${a}`)}function h(t,n,r,a){null==a&&(a=(0,e.testEpsilon)());const s=l(t);(0,e.expectNumbersClose)(s,n,a),(0,e.expectNumbersClose)(u(t,s),r,a)}function l(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}function u(t,e){let n=0;for(let r=0;r<t.length;r++){const a=t[r]-e;n+=a*a}return Math.sqrt(n/t.length)}function d(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,4)}return 1/n*a/Math.pow(1/n*r,2)}function c(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,3)}return 1/n*a/Math.pow(1/(n-1)*r,1.5)}exports.UniformRandom=o;
},{"seedrandom":"Q4CF","../test_util":"ZMg1"}],"ftBH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomGamma=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function a(r,a,o=1,n="float32",u){if(null==o&&(o=1),null==n&&(n="float32"),"float32"!==n&&"int32"!==n)throw new Error(`Unsupported data type ${n}`);const l=new t.RandGamma(a,o,n,u),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const o=(0,r.op)({randomGamma_:a});exports.randomGamma=o;
},{"./buffer":"Ajeg","./operation":"pYCl","./rand_util":"AHKa"}],"mhaO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomNormal=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function t(r,t=0,n=1,a,u){if(null!=a&&"bool"===a)throw new Error(`Unsupported data type ${a}`);const l=new o.MPRandGauss(t,n,a,!1,u),s=(0,e.buffer)(r,a);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const n=(0,r.op)({randomNormal_:t});exports.randomNormal=n;
},{"./buffer":"Ajeg","./operation":"pYCl","./rand_util":"AHKa"}],"zeIm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomStandardNormal=void 0;var r=require("./operation"),o=require("./random_normal");function a(r,a,e){if(null!=a&&"bool"===a)throw new Error(`Unsupported data type ${a}`);return(0,o.randomNormal)(r,0,1,a,e)}const e=(0,r.op)({randomStandardNormal_:a});exports.randomStandardNormal=e;
},{"./operation":"pYCl","./random_normal":"mhaO"}],"Gd9g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomUniform=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function n(r,n=0,t=1,u="float32",i){const a=(0,e.buffer)(r,u),f=new o.UniformRandom(n,t,null,i);for(let e=0;e<a.values.length;e++)a.values[e]=f.nextValue();return a.toTensor()}const t=(0,r.op)({randomUniform_:n});exports.randomUniform=t;
},{"./buffer":"Ajeg","./operation":"pYCl","./rand_util":"AHKa"}],"DrQM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=t;var e=require("../engine"),r=require("../kernel_names");function t(t,n,o=1,s="float32"){if(0===o)throw new Error("Cannot have a step of zero");const a={start:t,stop:n,step:o,dtype:s};return e.ENGINE.runKernel(r.Range,{},a)}
},{"../engine":"Wn3f","../kernel_names":"E7d7"}],"mFtu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocal=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function c(n){const c={x:(0,o.convertToTensor)(n,"x","reciprocal")};return e.ENGINE.runKernel(r.Reciprocal,c)}const i=(0,n.op)({reciprocal_:c});exports.reciprocal=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"f1ks":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","relu")};return e.ENGINE.runKernel(r.Relu,u)}const t=(0,o.op)({relu_:u});exports.relu=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"ljlp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","relu6")};return e.ENGINE.runKernel(r.Relu6,u)}const t=(0,o.op)({relu6_:u});exports.relu6=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"lVoL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function o(s,o){const t={x:(0,n.convertToTensor)(s,"x","reverse")},i={dims:o};return e.ENGINE.runKernel(r.Reverse,t,i)}const t=(0,s.op)({reverse_:o});exports.reverse=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"kRkv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse1d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t){const o=(0,e.convertToTensor)(t,"x","reverse");return r.assert(1===o.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${o.rank}.`),(0,n.reverse)(o,0)}const s=(0,t.op)({reverse1d_:i});exports.reverse1d=s;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./reverse":"lVoL"}],"q7yu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse2d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(2===u.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse2d_:i});exports.reverse2d=s;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./reverse":"lVoL"}],"EU6M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse3d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(3===u.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse3d_:i});exports.reverse3d=s;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./reverse":"lVoL"}],"utDB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse4d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(4===u.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse4d_:i});exports.reverse4d=s;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./reverse":"lVoL"}],"TZxD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.round=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","round")};return e.ENGINE.runKernel(r.Round,u)}const t=(0,o.op)({round_:u});exports.round=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"JxB0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrt=void 0;var r=require("../engine"),e=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n){const o={x:(0,t.convertToTensor)(n,"x","rsqrt","float32")};return r.ENGINE.runKernel(e.Rsqrt,o)}const s=(0,n.op)({rsqrt_:o});exports.rsqrt=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"SPBE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u={x:(0,n.convertToTensor)(o,"x","selu")};return e.ENGINE.runKernel(r.Selu,u)}const s=(0,o.op)({selu_:u});exports.selu=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"rIZG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.separableConv2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=require("./depthwise_conv2d"),o=require("./operation"),s=require("./reshape");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function p(o,a,i,p,u,l=[1,1],d="NHWC"){const b=(0,e.convertToTensor)(o,"x","separableConv2d"),f=(0,e.convertToTensor)(a,"depthwiseFilter","separableConv2d"),v=(0,e.convertToTensor)(i,"pointwiseFilter","separableConv2d");let c=b,h=!1;if(3===b.rank&&(h=!0,c=(0,s.reshape)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),"NCHW"===d)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");r.assert(4===c.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),r.assert(4===f.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(4===v.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(1===v.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+` must be 1, but got ${v.shape[0]}.`),r.assert(1===v.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+`filter must be 1, but got ${v.shape[1]}.`);const C=f.shape[2],k=f.shape[3];r.assert(v.shape[2]===C*k,()=>"Error in separableConv2d: the third dimension of pointwise filter "+`must be ${C*k}, `+`but got ${v.shape[2]}.`);const w=(0,n.depthwiseConv2d)(c,f,p,u,d,l),y=(0,t.conv2d)(w,v,1,"valid",d);return h?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const u=(0,o.op)({separableConv2d_:p});exports.separableConv2d=u;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./conv2d":"rCpA","./depthwise_conv2d":"WWch","./operation":"pYCl","./reshape":"IoLG"}],"zunO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setdiff1dAsync=void 0;var e=require("../tensor"),t=require("../tensor_util_env"),r=o(require("../util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=s?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}async function s(n,o){const s=(0,t.convertToTensor)(n,"x","setdiff1d"),a=(0,t.convertToTensor)(o,"y","setdiff1d");r.assert(s.dtype===a.dtype,()=>`x and y should have the same dtype, but got x (${s.dtype}) and y (${a.dtype}).`),r.assert(1===s.rank,()=>`x should be 1D tensor, but got x (${s.shape}).`),r.assert(1===a.rank,()=>`y should be 1D tensor, but got y (${a.shape}).`);const u=await s.data(),f=await a.data(),i=new Set(f);let d=0;for(let e=0;e<u.length;e++)i.has(u[e])||d++;const p=new e.TensorBuffer([d],s.dtype),c=new e.TensorBuffer([d],"int32");for(let e=0,t=0;e<u.length;e++)i.has(u[e])||(p.values[t]=u[e],c.values[t]=e,t++);return[p.toTensor(),c.toTensor()]}const a=s;exports.setdiff1dAsync=a;
},{"../tensor":"olbE","../tensor_util_env":"qMTF","../util":"uQV1"}],"rP8E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sign=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","sign")};return e.ENGINE.runKernel(r.Sign,o)}const s=(0,i.op)({sign_:o});exports.sign=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"UjHb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sin=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function i(o){const i={x:(0,n.convertToTensor)(o,"x","sin","float32")};return e.ENGINE.runKernel(r.Sin,i)}const t=(0,o.op)({sin_:i});exports.sin=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"Etv0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinh=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o={x:(0,n.convertToTensor)(i,"x","sinh")};return e.ENGINE.runKernel(r.Sinh,o)}const s=(0,i.op)({sinh_:o});exports.sinh=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"vAU7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice1d");return r.assert(1===u.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,[o],[i])}const s=(0,t.op)({slice1d_:u});exports.slice1d=s;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./slice":"tUXw"}],"GtCB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice2d");return r.assert(2===u.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice2d_:u});exports.slice2d=s;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./slice":"tUXw"}],"gf0Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice3d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice3d");return r.assert(3===u.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice3d_:u});exports.slice3d=s;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./slice":"tUXw"}],"aIQk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice4d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice4d");return r.assert(4===u.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice4d_:u});exports.slice4d=s;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./slice":"tUXw"}],"g4GY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function n(t,n=-1){const s=(0,r.convertToTensor)(t,"logits","softmax","float32");if(-1===n&&(n=s.rank-1),n!==s.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${s.rank} and dim was ${n}`);const a={logits:s},i={dim:n};return e.ENGINE.runKernel(o.Softmax,a,i)}const s=(0,t.op)({softmax_:n});exports.softmax=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"IyPR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../util"),o=require("../operation");function n(o){(0,r.assert)("complex64"===o.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+`but got ${o.dtype}.`);const n={input:o};return e.ENGINE.runKernel(t.FFT,n)}const u=(0,o.op)({fft_:n});exports.fft=u;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../util":"uQV1","../operation":"pYCl"}],"VJnp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../util"),i=require("../operation");function o(i){(0,r.assert)("complex64"===i.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+`but got ${i.dtype}.`);const o={input:i};return e.ENGINE.runKernel(t.IFFT,o)}const n=(0,i.op)({ifft_:o});exports.ifft=n;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../util":"uQV1","../operation":"pYCl"}],"xVRC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.irfft=void 0;var e=require("../complex"),r=require("../concat"),s=require("../imag"),i=require("../mul"),a=require("../operation"),t=require("../real"),c=require("../reshape"),o=require("../reverse"),p=require("../scalar"),u=require("../slice"),l=require("./ifft");function f(a){const f=a.shape[a.shape.length-1],n=a.size/f;let h;if(f<=2){const e=(0,c.reshape)(a,[n,f]);h=(0,l.ifft)(e)}else{const q=[n,2*(f-1)],m=(0,c.reshape)((0,t.real)(a),[n,f]),v=(0,c.reshape)((0,s.imag)(a),[n,f]),x=(0,o.reverse)((0,u.slice)(m,[0,1],[n,f-2]),1),d=(0,i.mul)((0,o.reverse)((0,u.slice)(v,[0,1],[n,f-2]),1),(0,p.scalar)(-1)),g=(0,r.concat)([m,x],1),_=(0,r.concat)([v,d],1),b=(0,c.reshape)((0,e.complex)(g,_),[q[0],q[1]]);h=(0,l.ifft)(b)}if(h=(0,t.real)(h),3===a.rank&&0!==a.shape[0]){const e=h,r=a.shape[0];h=(0,c.reshape)(h,[r,h.shape[0]/r,h.shape[1]]),e.dispose()}return h}const n=(0,a.op)({irfft_:f});exports.irfft=n;
},{"../complex":"EUHH","../concat":"E9ft","../imag":"MbCQ","../mul":"Nt3M","../operation":"pYCl","../real":"H6Zd","../reshape":"IoLG","../reverse":"lVoL","../scalar":"oY2j","../slice":"tUXw","./ifft":"VJnp"}],"zRhz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.split=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),i=require("./operation");function n(i,n,s=0){const o={x:(0,t.convertToTensor)(i,"x","split")},p={numOrSizeSplits:n,axis:s};return e.ENGINE.runKernel(r.SplitV,o,p)}const s=(0,i.op)({split_:n});exports.split=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"RlzF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rfft=void 0;var e=require("../../util"),r=require("../complex"),t=require("../concat"),s=require("../imag"),l=require("../operation"),p=require("../real"),a=require("../reshape"),i=require("../slice"),o=require("../split"),h=require("../zeros"),u=require("../zeros_like"),n=require("./fft");function f(l,f){(0,e.assert)("float32"===l.dtype,()=>`The dtype for rfft() must be real value but got ${l.dtype}`);let c=l.shape[l.shape.length-1];const q=l.size/c;let g;if(null!=f&&f<c){const e=l.shape.map(e=>0),r=l.shape.map(e=>e);r[l.shape.length-1]=f,g=(0,i.slice)(l,e,r),c=f}else if(null!=f&&f>c){const e=l.shape.map(e=>e);e[l.shape.length-1]=f-c,g=(0,t.concat)([l,(0,h.zeros)(e)],l.shape.length-1),c=f}else g=l;const m=(0,u.zerosLike)(g),d=(0,a.reshape)((0,r.complex)(g,m),[q,c]),x=(0,n.fft)(d),z=Math.floor(c/2)+1,v=(0,p.real)(x),y=(0,s.imag)(x),_=(0,o.split)(v,[z,c-z],v.shape.length-1),b=(0,o.split)(y,[z,c-z],y.shape.length-1),k=g.shape.slice();return k[g.shape.length-1]=z,(0,a.reshape)((0,r.complex)(_[0],b[0]),k)}const c=(0,l.op)({rfft_:f});exports.rfft=c;
},{"../../util":"uQV1","../complex":"EUHH","../concat":"E9ft","../imag":"MbCQ","../operation":"pYCl","../real":"H6Zd","../reshape":"IoLG","../slice":"tUXw","../split":"zRhz","../zeros":"f1QP","../zeros_like":"HQup","./fft":"IyPR"}],"cPro":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifference=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),s=require("../tensor_util_env"),t=require("./broadcast_util"),a=require("./operation");function o(a,o){let i=(0,s.convertToTensor)(a,"a","squaredDifference"),u=(0,s.convertToTensor)(o,"b","squaredDifference");[i,u]=(0,n.makeTypesMatch)(i,u),(0,t.assertAndGetBroadcastShape)(i.shape,u.shape);const c={a:i,b:u};return e.ENGINE.runKernel(r.SquaredDifference,c,{})}const i=(0,a.op)({squaredDifference_:o});exports.squaredDifference=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util":"Wwfk","../tensor_util_env":"qMTF","./broadcast_util":"Xh9J","./operation":"pYCl"}],"w9nu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squeeze=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./operation"),o=require("./reshape");function t(s,t){const u=(0,e.convertToTensor)(s,"x","squeeze","string_or_numeric");return(0,o.reshape)(u,(0,r.squeezeShape)(u.shape,t).newShape)}const u=(0,s.op)({squeeze_:t});exports.squeeze=u;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./reshape":"IoLG"}],"naC9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stack=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=a(require("../util")),o=require("./operation");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function u(o,s=0){const a=(0,r.convertToTensorArray)(o,"tensors","stack","string_or_numeric");n.assert(a.length>=1,()=>"Pass at least one tensor to tf.stack"),a.length>0&&n.assert(s<=a[0].rank,()=>"Axis must be <= rank of the tensor");const u=a,i={axis:s};return e.ENGINE.runKernel(t.Pack,u,i)}const i=(0,o.op)({stack_:u});exports.stack=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"jRSP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.step=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o=0){const s={x:(0,t.convertToTensor)(n,"x","step")},p={alpha:o};return e.ENGINE.runKernel(r.Step,s,p)}const s=(0,n.op)({step_:o});exports.step=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"vG8m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),s=require("./operation");function n(s,n,t,o,d=0,c=0,l=0,u=0,a=0){const _={x:(0,i.convertToTensor)(s,"x","stridedSlice","string_or_numeric")},k={begin:n,end:t,strides:o,beginMask:d,endMask:c,ellipsisMask:l,newAxisMask:u,shrinkAxisMask:a};return e.ENGINE.runKernel(r.StridedSlice,_,k)}const t=(0,s.op)({stridedSlice_:n});exports.stridedSlice=t;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"Zn1E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tan=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o={x:(0,n.convertToTensor)(t,"x","tan","float32")};return e.ENGINE.runKernel(r.Tan,o)}const i=(0,t.op)({tan_:o});exports.tan=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"hmhd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor1d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o){(0,r.assertNonNull)(n);const s=(0,e.inferShape)(n,o);if(1!==s.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,t.makeTensor)(n,null,s,o)}
},{"../tensor_util_env":"qMTF","../util":"uQV1","./tensor_ops_util":"S7VZ"}],"Z1m8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor2d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&2!==o.length)throw new Error("tensor2d() requires shape to have two numbers");const u=(0,e.inferShape)(n,s);if(2!==u.length&&1!==u.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"qMTF","../util":"uQV1","./tensor_ops_util":"S7VZ"}],"A2ic":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor4d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&4!==o.length)throw new Error("tensor4d() requires shape to have four numbers");const u=(0,e.inferShape)(n,s);if(4!==u.length&&1!==u.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"qMTF","../util":"uQV1","./tensor_ops_util":"S7VZ"}],"yG08":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor5d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&5!==o.length)throw new Error("tensor5d() requires shape to have five numbers");const u=(0,e.inferShape)(n,s);if(5!==u.length&&1!==u.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"qMTF","../util":"uQV1","./tensor_ops_util":"S7VZ"}],"rWRz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor6d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&6!==o.length)throw new Error("tensor6d() requires shape to have six numbers");const u=(0,e.inferShape)(n,s);if(6!==u.length&&1!==u.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return o=o||u,(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"qMTF","../util":"uQV1","./tensor_ops_util":"S7VZ"}],"iC1w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topk=void 0;var e=require("../engine"),t=require("../kernel_names"),o=require("../tensor_util_env"),r=require("./operation");function n(r,n=1,s=!0){const i=(0,o.convertToTensor)(r,"x","topk");if(0===i.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const p=i.shape[i.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>p)throw new Error(`'k' passed to topk() must be <= the last dimension (${p}) `+`but got ${n}`);const u={x:i},k={k:n,sorted:s},[a,c]=e.ENGINE.runKernel(t.TopK,u,k);return{values:a,indices:c}}const s=(0,r.op)({topk_:n});exports.topk=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"bnZE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.truncatedNormal=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function o(r,o=0,u=1,n,a){if(null!=n&&"bool"===n)throw new Error("Unsupported data type $ { dtype }");const l=new t.MPRandGauss(o,u,n,!0,a),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const u=(0,r.op)({truncatedNormal_:o});exports.truncatedNormal=u;
},{"./buffer":"Ajeg","./operation":"pYCl","./rand_util":"AHKa"}],"WLYA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("../util"),i=require("./operation");function t(i,t=0){const s=(0,n.convertToTensor)(i,"x","unique","string_or_numeric");(0,u.assert)(s.rank>0,()=>"The input tensor must be at least 1D");const o={x:s},a={axis:t},[q,c]=e.ENGINE.runKernel(r.Unique,o,a);return{values:q,indices:c}}const s=(0,i.op)({unique_:t});exports.unique=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"gOKP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=void 0;var e=require("../engine"),n=require("../kernel_names"),t=require("../tensor_util_env"),r=require("../util"),s=require("./operation");function o(s,o,u){const m=(0,t.convertToTensor)(s,"x","unsortedSegmentSum"),i=(0,t.convertToTensor)(o,"segmentIds","unsortedSegmentSum","int32");(0,r.assert)((0,r.isInt)(u),()=>"numSegments must be of dtype int");const S={x:m,segmentIds:i},d={numSegments:u};return e.ENGINE.runKernel(n.UnsortedSegmentSum,S,d)}const u=(0,s.op)({unsortedSegmentSum_:o});exports.unsortedSegmentSum=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"Vfy7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unstack=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function a(o,u=0){const i=(0,r.convertToTensor)(o,"x","unstack","string_or_numeric");n.assert(u>=-i.shape.length&&u<i.shape.length,()=>`Axis = ${u} is not in [-${i.shape.length}, ${i.shape.length})`);const a={value:i},s={axis:u};return e.ENGINE.runKernel(t.Unpack,a,s)}const s=(0,o.op)({unstack_:a});exports.unstack=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl"}],"jZA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.upperBound=r;var e=require("./search_sorted");function r(r,t){return(0,e.searchSorted)(r,t,"right")}
},{"./search_sorted":"XX4U"}],"Yyo4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.variable=r;var e=require("../engine");function r(r,t=!0,a,i){return e.ENGINE.makeVariable(r,t,a,i)}
},{"../engine":"Wn3f"}],"tI3d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereImpl=t;var e=require("../ops/buffer");function t(t,r){const n=[];for(let e=0;e<r.length;e++)r[e]&&n.push(e);const o=(0,e.buffer)(t,"int32"),s=(0,e.buffer)([n.length,t.length],"int32");for(let e=0;e<n.length;e++){const r=o.indexToLoc(n[e]),l=e*t.length;s.values.set(r,l)}return s.toTensor()}
},{"../ops/buffer":"Ajeg"}],"VGKk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereAsync=void 0;var e=require("../backends/where_impl"),r=require("../tensor_util_env");async function o(o){const s=(0,r.convertToTensor)(o,"condition","whereAsync","bool"),n=await s.data(),t=(0,e.whereImpl)(s.shape,n);return o!==s&&s.dispose(),t}const s=o;exports.whereAsync=s;
},{"../backends/where_impl":"tI3d","../tensor_util_env":"qMTF"}],"v93D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.booleanMaskAsync=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./gather"),s=require("./reshape"),o=require("./squeeze"),n=require("./where_async");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(s,n,i):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}async function c(a,i,c){const u=(0,e.convertToTensor)(a,"tensor","boolMask"),p=(0,e.convertToTensor)(i,"mask","boolMask","bool"),l=null==c?0:c,f=p.rank,h=u.shape;r.assert(f>0,()=>"mask cannot be scalar"),r.assertShapesMatch(h.slice(l,l+f),p.shape,"mask's shape must match the first K dimensions of tensor's shape,");let d=1;for(let e=l;e<l+f;e++)d*=h[e];const y=h.slice(0,l).concat([d],h.slice(l+f)),b=(0,s.reshape)(u,y),k=(0,s.reshape)(p,[-1]),v=await(0,n.whereAsync)(k),M=(0,o.squeeze)(v,[1]),O=(0,t.gather)(b,M,l);return a!==u&&u.dispose(),i!==p&&p.dispose(),M.dispose(),b.dispose(),k.dispose(),v.dispose(),O}const u=c;exports.booleanMaskAsync=u;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./gather":"qpmj","./reshape":"IoLG","./squeeze":"w9nu","./where_async":"VGKk"}],"sYtj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.movingAverage=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),t=p(require("../util")),n=require("./add"),o=require("./div"),i=require("./mul"),u=require("./operation"),a=require("./pow"),s=require("./scalar"),v=require("./sub");function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function l(u,c,p,l,f=!0){const g=(0,r.convertToTensor)(u,"v","movingAverage"),d=(0,r.convertToTensor)(c,"x","movingAverage"),y=(0,r.convertToTensor)(p,"decay","movingAverage");(0,e.assertTypesMatch)(g,d),t.assert(t.arraysEqual(g.shape,d.shape),()=>"Shape mismatch in v and x");const b=(0,s.scalar)(1),q=(0,v.sub)(b,y);let m=(0,i.mul)((0,v.sub)(d,g),q);if(f){t.assert(null!=l,()=>"When using zeroDebias: true, step is required.");const e=(0,r.convertToTensor)(l,"step","movingAverage");m=(0,o.div)(m,(0,v.sub)(b,(0,a.pow)(y,e)))}return(0,n.add)(g,m)}const f=(0,u.op)({movingAverage_:l});exports.movingAverage=f;
},{"../tensor_util":"Wwfk","../tensor_util_env":"qMTF","../util":"uQV1","./add":"RKQn","./div":"M4To","./mul":"Nt3M","./operation":"pYCl","./pow":"WjtV","./scalar":"oY2j","./sub":"w3Uc"}],"vjBN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation"),o=i(require("./scatter_nd_util"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function a(n,u,i){const a=(0,r.convertToTensor)(n,"indices","scatterND","int32"),c=(0,r.convertToTensor)(u,"updates","scatterND");o.validateInput(c,a,i);const s={indices:a,updates:c},p={shape:i};return e.ENGINE.runKernel(t.ScatterNd,s,p)}const c=(0,n.op)({scatterND_:a});exports.scatterND=c;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl","./scatter_nd_util":"nGOS"}],"VOvT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=void 0;var e=require("../engine"),r=require("../kernel_names"),t=a(require("../ops/sparse_to_dense_util")),n=require("../tensor_util_env"),s=require("./operation");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=s?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function u(s,o,a,u=0){const p=(0,n.convertToTensor)(s,"sparseIndices","sparseToDense","int32"),i=(0,n.convertToTensor)(o,"sparseValues","sparseToDense","string_or_numeric"),c=(0,n.convertToTensor)(u,"defaultValue","sparseToDense",i.dtype);t.validateInput(p,i,a,c);const l={sparseIndices:p,sparseValues:i,defaultValue:c},f={outputShape:a};return e.ENGINE.runKernel(r.SparseToDense,l,f)}const p=(0,s.op)({sparseToDense_:u});exports.sparseToDense=p;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../ops/sparse_to_dense_util":"wfit","../tensor_util_env":"qMTF","./operation":"pYCl"}],"CAEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherND=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t,o){const i=(0,n.convertToTensor)(o,"indices","gatherND","int32"),s={params:(0,n.convertToTensor)(t,"x","gatherND","string_or_numeric"),indices:i};return e.ENGINE.runKernel(r.GatherNd,s)}const i=(0,t.op)({gatherND_:o});exports.gatherND=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","./operation":"pYCl"}],"RK6L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNoiseShape=n;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var u={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(u,o,l):u[o]=e[o]}return u.default=e,n&&n.set(e,u),u}function n(t,r){if(null==r)return t.shape.slice();if(e.arraysEqual(t.shape,r))return r;if(t.shape.length===r.length){const e=[];for(let n=0;n<t.shape.length;n++)null==r[n]&&null!=t.shape[n]?e.push(t.shape[n]):e.push(r[n]);return e}return r}
},{"../util":"uQV1"}],"Jj09":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dropout=void 0;var e=require("../tensor"),r=require("../tensor_util_env"),t=l(require("../util")),o=require("./add"),n=require("./div"),u=require("./dropout_util"),i=require("./floor"),a=require("./mul"),s=require("./operation"),f=require("./random_uniform");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function d(s,p,l,d){const c=(0,r.convertToTensor)(s,"x","dropout");if(t.assert("float32"===c.dtype,()=>"x has to be a floating point tensor since it's going to be "+`scaled, but got a ${c.dtype} tensor instead.`),t.assert(p>=0&&p<1,()=>`rate must be a float in the range [0, 1), but got ${p}.`),0===p)return s instanceof e.Tensor?c.clone():c;const b=(0,u.getNoiseShape)(c,l),v=1-p,y=(0,n.div)((0,i.floor)((0,o.add)((0,f.randomUniform)(b,0,1,"float32",d),v)),v);return(0,a.mul)(c,y)}const c=(0,s.op)({dropout_:d});exports.dropout=c;
},{"../tensor":"olbE","../tensor_util_env":"qMTF","../util":"uQV1","./add":"RKQn","./div":"M4To","./dropout_util":"RK6L","./floor":"Tt6T","./mul":"Nt3M","./operation":"pYCl","./random_uniform":"Gd9g"}],"EVmg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosineWindow=e,exports.enclosingPowerOfTwo=t;var o=require("./tensor1d");function t(o){return Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2))))}function e(t,e,r){const n=1-t%2,s=new Float32Array(t);for(let o=0;o<t;++o){const a=2*Math.PI*o/(t+n-1);s[o]=e-r*Math.cos(a)}return(0,o.tensor1d)(s,"float32")}
},{"./tensor1d":"hmhd"}],"A7yI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inTopKAsync=void 0;var e=require("../tensor_util_env"),t=require("../util"),s=require("./tensor");async function r(r,n,o=1){const a=(0,e.convertToTensor)(r,"predictions","inTopK"),i=(0,e.convertToTensor)(n,"targets","inTopK");(0,t.assert)(a.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+`but got ${a.rank}`),(0,t.assert)(a.rank-1===i.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+`${a.rank} and targets rank ${i.rank}`),(0,t.assertShapesMatch)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const p=a.shape[a.shape.length-1];(0,t.assert)(o>0&&o<=p,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+`dimension (${p}), but got ${o}`);const h=await a.data(),c=await i.data(),[l,d]=[h.length/p,p],u=(0,t.getTypedArrayFromDType)("bool",l);for(let e=0;e<l;e++){const t=e*d,s=h.subarray(t,t+d),r=[];for(let e=0;e<s.length;e++)r.push({value:s[e],index:e});r.sort((e,t)=>t.value-e.value),u[e]=0;for(let n=0;n<o;n++)if(r[n].index===c[e]){u[e]=1;break}}return r!==a&&a.dispose(),n!==i&&i.dispose(),(0,s.tensor)(u,i.shape,"bool")}const n=r;exports.inTopKAsync=n;
},{"../tensor_util_env":"qMTF","../util":"uQV1","./tensor":"EMF1"}],"jjXS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=p(require("../util")),n=p(require("./conv_util")),o=require("./operation"),a=require("./reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var p=o?Object.getOwnPropertyDescriptor(e,a):null;p&&(p.get||p.set)?Object.defineProperty(n,a,p):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function s(o,i,p,s,u,c="NHWC",l){let d=o;3===o.rank&&(d=(0,a.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let h=i;3===h.rank&&(h=(0,a.reshape)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),t.assert(4===d.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${d.shape}.`),t.assert(4===h.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${h.shape}.`),t.assert(4===p.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${p}.`);const f="NHWC"===c?d.shape[3]:d.shape[1],v="NHWC"===c?h.shape[3]:h.shape[1];t.assert(f===p[2],()=>`Error in conv2dDerFilter: depth of input ${f}) must `+`match input depth in filter (${p[2]}.`),t.assert(v===p[3],()=>`Error in conv2dDerFilter: depth of dy (${v}) must `+`match output depth for filter (${p[3]}).`),n.checkPadOnDimRoundingMode("conv2dDerFilter",u,l);const k={x:d,dy:h},b={strides:s,pad:u,dataFormat:c,dimRoundingMode:l,filterShape:p};return e.ENGINE.runKernel(r.Conv2DBackpropFilter,k,b)}const u=(0,o.op)({conv2DBackpropFilter_:s});exports.conv2DBackpropFilter=u;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"hW7e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyActivation=g,exports.getFusedBiasGradient=y,exports.getFusedDyActivation=d,exports.shouldFuse=void 0;var e=c(require("./broadcast_util")),r=require("./elu"),t=require("./leaky_relu"),u=require("./mul"),n=require("./prelu"),i=require("./relu"),o=require("./relu6"),l=require("./reshape"),a=require("./sigmoid"),s=require("./step"),f=require("./sum");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function c(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(u,i,o):u[i]=e[i]}return u.default=e,t&&t.set(e,u),u}function d(e,r,t){if(null==t||"linear"===t)return e;if("relu"===t)return(0,u.mul)(e,(0,s.step)(r));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function y(r,t){let u=t;const n=e.getReductionAxes(r.shape,t.shape);return n.length>0&&(u=(0,f.sum)(u,n)),(0,l.reshape)(u,r.shape)}function g(e,u,l,s){if("linear"===u)return e;if("relu"===u)return(0,i.relu)(e);if("elu"===u)return(0,r.elu)(e);if("relu6"===u)return(0,o.relu6)(e);if("prelu"===u)return(0,n.prelu)(e,l);if("leakyrelu"===u)return(0,t.leakyRelu)(e,s);if("sigmoid"===u)return(0,a.sigmoid)(e);throw new Error(`Unknown fused activation ${u}.`)}const h=(e,r)=>{return!(e>0)||"linear"===r};exports.shouldFuse=h;
},{"./broadcast_util":"Xh9J","./elu":"qaoR","./leaky_relu":"TUfJ","./mul":"Nt3M","./prelu":"dn3A","./relu":"f1ks","./relu6":"ljlp","./reshape":"IoLG","./sigmoid":"JWCK","./step":"jRSP","./sum":"WgrX"}],"SelK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../../engine"),t=require("../../gradients"),r=require("../../kernel_names"),n=require("../../tensor_util"),o=require("../../tensor_util_env"),a=g(require("../../util")),s=require("../add"),i=g(require("../broadcast_util")),u=require("../conv2d"),d=require("../conv2d_backprop_filter"),p=require("../conv2d_backprop_input"),l=g(require("../conv_util")),c=require("../fused_util"),h=require("../operation"),f=require("../reshape");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function b({x:h,filter:v,strides:g,pad:b,dataFormat:k="NHWC",dilations:m=[1,1],dimRoundingMode:y,bias:E,activation:D="linear",preluActivationWeights:$,leakyreluAlpha:C}){if(D=D||"linear",!1===(0,c.shouldFuse)(e.ENGINE.state.gradientDepth,D)){a.assert("NHWC"===k,()=>`Error in fused conv2d: got dataFormat of ${k} but `+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.");let e=(0,u.conv2d)(h,v,g,b,k,m,y);return null!=E&&(e=(0,s.add)(e,E)),(0,c.applyActivation)(e,D,$,C)}const _=(0,o.convertToTensor)(h,"x","conv2d","float32"),q=(0,o.convertToTensor)(v,"filter","conv2d","float32");let N=_,w=!1;3===_.rank&&(w=!0,N=(0,f.reshape)(_,[1,_.shape[0],_.shape[1],_.shape[2]])),a.assert(4===N.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+`${N.rank}.`),a.assert(4===q.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+`${q.rank}.`),l.checkPadOnDimRoundingMode("fused conv2d",b,y);const O="NHWC"===k?N.shape[3]:N.shape[1];a.assert(q.shape[2]===O,()=>`Error in conv2d: depth of input (${O}) must match `+`input depth for filter ${q.shape[2]}.`),a.assert(l.eitherStridesOrDilationsAreOne(g,m),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${g} and dilations '${m}'`);const W=l.computeConv2DInfo(N.shape,q.shape,g,m,b,y);let F,T;if(null!=E&&(F=(0,o.convertToTensor)(E,"bias","fused conv2d"),[F]=(0,n.makeTypesMatch)(F,_),"NHWC"===k?i.assertAndGetBroadcastShape(W.outShape,F.shape):(a.assert(F.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+`rank-${F.shape.length}.`),a.assert(0===F.shape.length||F.shape[0]===W.outChannels||1===F.shape[0],()=>`Error in fused conv2d: bias shape (${F.shape}) is not `+"compatible with the number of output channels "+`(${W.outChannels})`))),null!=$){const e=$.shape;if(a.assert(e.length<=1||3===e.length,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+`rank-${e.length}.`),1===e.length)a.assert(1===e[0]||e[0]===W.outChannels,()=>"Error in fused conv2d: PReLU activation weights "+`(${e}) is not compatible with the number of output `+`channels (${W.outChannels}).`);else if(3===e.length)try{i.assertAndGetBroadcastShape(e,W.outShape)}catch(M){const t=`Error in fused conv2d: PReLU activation weights (${e}) `+"is not compatible with the output shape of the conv2d "+`(${W.outShape}).`;throw Error(t)}T=(0,o.convertToTensor)($,"prelu weights","fused conv2d")}const A=(e,t)=>{a.assert("NHWC"===k,()=>`Error in gradient of fused conv2D: got dataFormat of ${k} but only NHWC is currently supported.`);const[r,n,o,s]=t,i=(0,c.getFusedDyActivation)(e,o,D);a.assert(l.tupleValuesAreOne(m),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${m}'`);const u=[(0,p.conv2DBackpropInput)(n.shape,i,r,g,b),(0,d.conv2DBackpropFilter)(n,i,r.shape,g,b)];if(null!=s){const e=(0,c.getFusedBiasGradient)(s,i);u.push(e)}return u},G={x:N,filter:q,bias:F,preluActivationWeights:T},P={strides:g,pad:b,dataFormat:k,dilations:m,dimRoundingMode:y,activation:D,leakyreluAlpha:C};if(null==E){return(0,t.customGrad)((t,n,o)=>{let a=e.ENGINE.runKernel(r.FusedConv2D,G,P);return o([n,t,a]),w&&(a=(0,f.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:A}})(N,q)}return(0,t.customGrad)((t,n,o,a)=>{let s=e.ENGINE.runKernel(r.FusedConv2D,G,P);return a([n,t,s,o]),w&&(s=(0,f.reshape)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:A}})(N,q,F)}const k=(0,h.op)({fusedConv2d_:b});exports.conv2d=k;
},{"../../engine":"Wn3f","../../gradients":"lNg9","../../kernel_names":"E7d7","../../tensor_util":"Wwfk","../../tensor_util_env":"qMTF","../../util":"uQV1","../add":"RKQn","../broadcast_util":"Xh9J","../conv2d":"rCpA","../conv2d_backprop_filter":"jjXS","../conv2d_backprop_input":"mHXf","../conv_util":"tcmi","../fused_util":"hW7e","../operation":"pYCl","../reshape":"IoLG"}],"I8N1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),p=require("./operation"),t=require("./reshape");function i(p,i,a,s,o,n=[1,1],d){let h=p;3===p.rank&&(h=(0,t.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]));let l=i;3===l.rank&&(l=(0,t.reshape)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const u={x:h,dy:l},v={strides:s,pad:o,dimRoundingMode:d,dilations:n,filterShape:a};return e.ENGINE.runKernel(r.DepthwiseConv2dNativeBackpropFilter,u,v)}const a=(0,p.op)({depthwiseConv2dNativeBackpropFilter_:i});exports.depthwiseConv2dNativeBackpropFilter=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","./operation":"pYCl","./reshape":"IoLG"}],"NtEK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=void 0;var e=require("../engine"),p=require("../kernel_names"),r=require("./operation"),t=require("./reshape");function n(r,n,a,i,s,o=[1,1],d){let u=n,h=!1;3===n.rank&&(h=!0,u=(0,t.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2]]));const v={dy:u,filter:a},c={strides:i,pad:s,dimRoundingMode:d,dilations:o,inputShape:r},l=e.ENGINE.runKernel(p.DepthwiseConv2dNativeBackpropInput,v,c);return h?(0,t.reshape)(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const a=(0,r.op)({depthwiseConv2dNativeBackpropInput_:n});exports.depthwiseConv2dNativeBackpropInput=a;
},{"../engine":"Wn3f","../kernel_names":"E7d7","./operation":"pYCl","./reshape":"IoLG"}],"myLX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../../engine"),t=require("../../gradients"),r=require("../../kernel_names"),n=require("../../tensor_util"),i=require("../../tensor_util_env"),s=w(require("../../util")),a=require("../add"),o=w(require("../broadcast_util")),u=w(require("../conv_util")),d=require("../depthwise_conv2d"),p=require("../depthwise_conv2d_native_backprop_filter"),l=require("../depthwise_conv2d_native_backprop_input"),h=require("../fused_util"),c=require("../operation"),v=require("../reshape");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function g({x:c,filter:f,strides:w,pad:g,dataFormat:k="NHWC",dilations:_=[1,1],dimRoundingMode:C,bias:b,activation:m="linear",preluActivationWeights:y,leakyreluAlpha:q}){if(!1===(0,h.shouldFuse)(e.ENGINE.state.gradientDepth,m)){let e=(0,d.depthwiseConv2d)(c,f,w,g,k,_,C);return null!=b&&(e=(0,a.add)(e,b)),(0,h.applyActivation)(e,m,y,q)}const O=(0,i.convertToTensor)(c,"x","depthwiseConv2d","float32"),D=(0,i.convertToTensor)(f,"filter","depthwiseConv2d","float32");let E=O,F=!1;3===O.rank&&(F=!0,E=(0,v.reshape)(O,[1,O.shape[0],O.shape[1],O.shape[2]])),s.assert(4===E.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+`rank ${E.rank}.`),s.assert(4===D.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+`but got rank ${D.rank}.`),s.assert(E.shape[3]===D.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+`(${E.shape[3]}) must match the inChannels dimension in `+`filter ${D.shape[2]}.`),null==_&&(_=[1,1]),s.assert(u.eitherStridesOrDilationsAreOne(w,_),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+`be 1. Got strides ${w} and dilations '${_}'`),u.checkPadOnDimRoundingMode("fused depthwiseConv2d",g,C);const A=u.computeConv2DInfo(E.shape,D.shape,w,_,g,C,!0);let G,M;null!=b&&(G=(0,i.convertToTensor)(b,"bias","fused conv2d"),[G]=(0,n.makeTypesMatch)(G,O),o.assertAndGetBroadcastShape(A.outShape,G.shape)),null!=y&&(M=(0,i.convertToTensor)(y,"prelu weights","fused depthwiseConv2d"));const N=(e,t)=>{s.assert(u.tupleValuesAreOne(_),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+`'${_}'`);const[r,n,i,a]=t,o=(0,h.getFusedDyActivation)(e,i,m),d=(0,l.depthwiseConv2dNativeBackpropInput)(n.shape,o,r,w,g,_,C),c=(0,p.depthwiseConv2dNativeBackpropFilter)(n,o,r.shape,w,g,_,C);if(null!=a){return[d,c,(0,h.getFusedBiasGradient)(G,o)]}return[d,c]},T={x:E,filter:D,bias:G,preluActivationWeights:M},j={strides:w,pad:g,dataFormat:k,dilations:_,dimRoundingMode:C,activation:m,leakyreluAlpha:q};if(null==b){return(0,t.customGrad)((t,n,i)=>{let s=e.ENGINE.runKernel(r.FusedDepthwiseConv2D,T,j);return i([n,t,s]),F&&(s=(0,v.reshape)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:N}})(E,D)}return(0,t.customGrad)((t,n,i,s)=>{let a=e.ENGINE.runKernel(r.FusedDepthwiseConv2D,T,j);return s([n,t,a,i]),F&&(a=(0,v.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}})(E,D,G)}const k=(0,c.op)({fusedDepthwiseConv2d_:g});exports.depthwiseConv2d=k;
},{"../../engine":"Wn3f","../../gradients":"lNg9","../../kernel_names":"E7d7","../../tensor_util":"Wwfk","../../tensor_util_env":"qMTF","../../util":"uQV1","../add":"RKQn","../broadcast_util":"Xh9J","../conv_util":"tcmi","../depthwise_conv2d":"WWch","../depthwise_conv2d_native_backprop_filter":"I8N1","../depthwise_conv2d_native_backprop_input":"NtEK","../fused_util":"hW7e","../operation":"pYCl","../reshape":"IoLG"}],"OJuI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../../engine"),r=require("../../gradients"),t=require("../../kernel_names"),a=require("../../tensor_util"),s=require("../../tensor_util_env"),n=d(require("../../util")),u=require("../add"),o=d(require("../broadcast_util")),l=require("../fused_util"),i=require("../mat_mul"),p=require("../operation"),c=require("../reshape");function h(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(h=function(e){return e?t:r})(e)}function d(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h(r);if(t&&t.has(e))return t.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=s?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}function f({a:p,b:h,transposeA:d=!1,transposeB:f=!1,bias:M,activation:m="linear",preluActivationWeights:v,leakyreluAlpha:k=.2}){if(!1===(0,l.shouldFuse)(e.ENGINE.state.gradientDepth,m)){let e=(0,i.matMul)(p,h,d,f);return null!=M&&(e=(0,u.add)(e,M)),(0,l.applyActivation)(e,m,v,k)}let y=(0,s.convertToTensor)(p,"a","fused matMul"),b=(0,s.convertToTensor)(h,"b","fused matMul");[y,b]=(0,a.makeTypesMatch)(y,b);const g=d?y.shape[y.rank-2]:y.shape[y.rank-1],_=f?b.shape[b.rank-1]:b.shape[b.rank-2],q=d?y.shape[y.rank-1]:y.shape[y.rank-2],A=f?b.shape[b.rank-2]:b.shape[b.rank-1],T=y.shape.slice(0,-2),F=b.shape.slice(0,-2),O=n.sizeFromShape(T),G=n.sizeFromShape(F);n.assert(g===_,()=>`Error in fused matMul: inner shapes (${g}) and (`+`${_}) of Tensors with shapes ${y.shape} and `+`${b.shape} and transposeA=${d}`+` and transposeB=${f} must match.`);const j=o.assertAndGetBroadcastShape(y.shape.slice(0,-2),b.shape.slice(0,-2)).concat([q,A]),w=d?(0,c.reshape)(y,[O,g,q]):(0,c.reshape)(y,[O,q,g]),E=f?(0,c.reshape)(b,[G,A,_]):(0,c.reshape)(b,[G,_,A]);let B,N;null!=M&&(B=(0,s.convertToTensor)(M,"bias","fused matMul"),[B]=(0,a.makeTypesMatch)(B,y),o.assertAndGetBroadcastShape(j,B.shape)),null!=v&&(N=(0,s.convertToTensor)(v,"prelu weights","fused matMul"));const P=(e,r)=>{const[t,a,s,n]=r,u=(0,l.getFusedDyActivation)((0,c.reshape)(e,s.shape),s,m);let o,p;if(d||f?!d&&f?(o=(0,i.matMul)(u,a,!1,!1),p=(0,i.matMul)(u,t,!0,!1)):d&&!f?(o=(0,i.matMul)(a,u,!1,!0),p=(0,i.matMul)(t,u,!1,!1)):(o=(0,i.matMul)(a,u,!0,!0),p=(0,i.matMul)(u,t,!0,!0)):(o=(0,i.matMul)(u,a,!1,!0),p=(0,i.matMul)(t,u,!0,!1)),null!=M){return[o,p,(0,l.getFusedBiasGradient)(n,u)]}return[o,p]},$={a:w,b:E,bias:B,preluActivationWeights:N},W={transposeA:d,transposeB:f,activation:m,leakyreluAlpha:k};if(null==M){return(0,r.customGrad)((r,a,s)=>{const n=e.ENGINE.runKernel(t._FusedMatMul,$,W);return s([r,a,n]),{value:(0,c.reshape)(n,j),gradFunc:P}})(w,E)}return(0,r.customGrad)((r,a,s,n)=>{const u=e.ENGINE.runKernel(t._FusedMatMul,$,W);return n([r,a,u,s]),{value:(0,c.reshape)(u,j),gradFunc:P}})(w,E,B)}const M=(0,p.op)({fusedMatMul_:f});exports.matMul=M;
},{"../../engine":"Wn3f","../../gradients":"lNg9","../../kernel_names":"E7d7","../../tensor_util":"Wwfk","../../tensor_util_env":"qMTF","../../util":"uQV1","../add":"RKQn","../broadcast_util":"Xh9J","../fused_util":"hW7e","../mat_mul":"cPiM","../operation":"pYCl","../reshape":"IoLG"}],"yrgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return e.conv2d}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return r.depthwiseConv2d}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return t.matMul}});var e=require("./fused/conv2d"),r=require("./fused/depthwise_conv2d"),t=require("./fused/mat_mul");
},{"./fused/conv2d":"SelK","./fused/depthwise_conv2d":"myLX","./fused/mat_mul":"OJuI"}],"fT78":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hammingWindow=void 0;var e=require("../operation"),i=require("../signal_ops_util");function o(e){return(0,i.cosineWindow)(e,.54,.46)}const n=(0,e.op)({hammingWindow_:o});exports.hammingWindow=n;
},{"../operation":"pYCl","../signal_ops_util":"EVmg"}],"CZx9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hannWindow=void 0;var e=require("../operation"),n=require("../signal_ops_util");function o(e){return(0,n.cosineWindow)(e,.5,.5)}const i=(0,e.op)({hannWindow_:o});exports.hannWindow=i;
},{"../operation":"pYCl","../signal_ops_util":"EVmg"}],"lmae":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.frame=void 0;var e=require("../concat"),r=require("../fill"),s=require("../operation"),t=require("../reshape"),i=require("../slice"),o=require("../tensor2d");function c(s,c,n,u=!1,l=0){let a=0;const f=[];for(;a+c<=s.size;)f.push((0,i.slice)(s,a,c)),a+=n;if(u)for(;a<s.size;){const t=a+c-s.size,o=(0,e.concat)([(0,i.slice)(s,a,c-t),(0,r.fill)([t],l)]);f.push(o),a+=n}return 0===f.length?(0,o.tensor2d)([],[0,c]):(0,t.reshape)((0,e.concat)(f),[f.length,c])}const n=(0,s.op)({frame_:c});exports.frame=n;
},{"../concat":"E9ft","../fill":"uRSA","../operation":"pYCl","../reshape":"IoLG","../slice":"tUXw","../tensor2d":"Z1m8"}],"nP9F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stft=void 0;var e=require("../mul"),r=require("../operation"),t=require("../signal_ops_util"),o=require("../spectral/rfft"),n=require("./frame"),i=require("./hann_window");function s(r,s,u,f,l=i.hannWindow){null==f&&(f=(0,t.enclosingPowerOfTwo)(s));const a=(0,n.frame)(r,s,u),p=(0,e.mul)(a,l(s));return(0,o.rfft)(p,f)}const u=(0,r.op)({stft_:s});exports.stft=u;
},{"../mul":"Nt3M","../operation":"pYCl","../signal_ops_util":"EVmg","../spectral/rfft":"RlzF","./frame":"lmae","./hann_window":"CZx9"}],"Dpmd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResize=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),n=a(require("../../util")),o=require("../operation");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function i(o,s,a,i,u="bilinear",p=0){const c=(0,t.convertToTensor)(o,"image","cropAndResize"),l=(0,t.convertToTensor)(s,"boxes","cropAndResize","float32"),b=(0,t.convertToTensor)(a,"boxInd","cropAndResize","int32"),d=l.shape[0];n.assert(4===c.rank,()=>"Error in cropAndResize: image must be rank 4,"+`but got rank ${c.rank}.`),n.assert(2===l.rank&&4===l.shape[1],()=>`Error in cropAndResize: boxes must be have size [${d},4] `+`but had shape ${l.shape}.`),n.assert(1===b.rank&&b.shape[0]===d,()=>`Error in cropAndResize: boxInd must be have size [${d}] `+`but had shape ${l.shape}.`),n.assert(2===i.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+`length ${i.length}.`),n.assert(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),n.assert("bilinear"===u||"nearest"===u,()=>`method must be bilinear or nearest, but was ${u}`);const f={image:c,boxes:l,boxInd:b},h={method:u,extrapolationValue:p,cropSize:i};return e.ENGINE.runKernel(r.CropAndResize,f,h)}const u=(0,o.op)({cropAndResize_:i});exports.cropAndResize=u;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../../util":"uQV1","../operation":"pYCl"}],"xHvL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRight=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=u(require("../../util")),i=require("../operation");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=i?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function f(i){const o=(0,r.convertToTensor)(i,"image","flipLeftRight","float32");n.assert(4===o.rank,()=>"Error in flipLeftRight: image must be rank 4,"+`but got rank ${o.rank}.`);const u={image:o};return e.ENGINE.runKernel(t.FlipLeftRight,u,{})}const a=(0,i.op)({flipLeftRight_:f});exports.flipLeftRight=a;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../../util":"uQV1","../operation":"pYCl"}],"qZvL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.grayscaleToRGB=void 0;var e=require("../../tensor_util_env"),r=o(require("../../util")),t=require("../operation"),a=require("../tile");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,t&&t.set(e,a),a}function i(t){const n=(0,e.convertToTensor)(t,"image","grayscaleToRGB"),o=n.rank-1,i=n.shape[o];r.assert(n.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, "+`but got rank ${n.rank}.`),r.assert(1===i,()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+`should be size 1, but got size ${i}.`);const s=new Array(n.rank);return s.fill(1,0,o),s[o]=3,(0,a.tile)(n,s)}const s=(0,t.op)({grayscaleToRGB_:i});exports.grayscaleToRGB=s;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../operation":"pYCl","../tile":"YKMi"}],"bAMQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffset=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=a(require("../../util")),o=require("../operation");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var f=o?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(n,a,f):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function f(o,i,a=0,f=.5){const u=(0,r.convertToTensor)(o,"image","rotateWithOffset","float32");n.assert(4===u.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+`but got rank ${u.rank}.`);const s={image:u},c={radians:i,fillValue:a,center:f};return e.ENGINE.runKernel(t.RotateWithOffset,s,c)}const u=(0,o.op)({rotateWithOffset_:f});exports.rotateWithOffset=u;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../../util":"uQV1","../operation":"pYCl"}],"CstK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppSanityCheck=s;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(t=function(e){return e?s:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=t(r);if(s&&s.has(e))return s.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,s&&s.set(e,n),n}function s(t,r,s,n,a,o){null==n&&(n=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);const u=t.shape[0];return s=Math.min(s,u),e.assert(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),e.assert(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),e.assert(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),e.assert(1===r.rank,()=>"scores must be a 1D tensor"),e.assert(r.shape[0]===u,()=>`scores has incompatible shape with boxes. Expected ${u}, `+`but was ${r.shape[0]}`),e.assert(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:s,iouThreshold:n,scoreThreshold:a,softNmsSigma:o}}
},{"../util":"uQV1"}],"TEFg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppression=void 0;var e=require("../../engine"),o=require("../../kernel_names"),r=require("../../tensor_util_env"),n=require("../nonmax_util"),s=require("../operation");function u(s,u,i,t=.5,p=Number.NEGATIVE_INFINITY){const a=(0,r.convertToTensor)(s,"boxes","nonMaxSuppression","float32"),x=(0,r.convertToTensor)(u,"scores","nonMaxSuppression","float32"),c=(0,n.nonMaxSuppSanityCheck)(a,x,i,t,p),l={maxOutputSize:i=c.maxOutputSize,iouThreshold:t=c.iouThreshold,scoreThreshold:p=c.scoreThreshold};return e.ENGINE.runKernel(o.NonMaxSuppressionV3,{boxes:a,scores:x},l)}const i=(0,s.op)({nonMaxSuppression_:u});exports.nonMaxSuppression=i;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../nonmax_util":"CstK","../operation":"pYCl"}],"VgKC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3Impl=n,exports.nonMaxSuppressionV4Impl=r,exports.nonMaxSuppressionV5Impl=t;var e=require("./non_max_suppression_util");function n(e,n,r,t,o){return s(e,n,r,t,o,0)}function r(e,n,r,t,o,a){return s(e,n,r,t,o,0,!1,a,!0)}function t(e,n,r,t,o,a){return s(e,n,r,t,o,a,!0)}function s(n,r,t,s,c,i,p=!1,x=!1,h=!1){const l=[];for(let e=0;e<r.length;e++)r[e]>c&&l.push({score:r[e],boxIndex:e,suppressBeginIndex:0});l.sort(u);const M=i>0?-.5/i:0,m=[],f=[];for(;m.length<t&&l.length>0;){const r=l.pop(),{score:t,boxIndex:i,suppressBeginIndex:p}=r;if(t<c)break;let x=!1;for(let e=m.length-1;e>=p;--e){const t=o(n,i,m[e]);if(t>=s){x=!0;break}if(r.score=r.score*a(s,M,t),r.score<=c)break}r.suppressBeginIndex=m.length,x||(r.score===t?(m.push(i),f.push(r.score)):r.score>c&&(0,e.binaryInsert)(l,r,u))}const d=m.length,I=t-d;x&&I>0&&(m.push(...new Array(I).fill(0)),f.push(...new Array(I).fill(0)));const b={selectedIndices:m};return p&&(b.selectedScores=f),h&&(b.validOutputs=d),b}function o(e,n,r){const t=e.subarray(4*n,4*n+4),s=e.subarray(4*r,4*r+4),o=Math.min(t[0],t[2]),a=Math.min(t[1],t[3]),u=Math.max(t[0],t[2]),c=Math.max(t[1],t[3]),i=Math.min(s[0],s[2]),p=Math.min(s[1],s[3]),x=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),l=(u-o)*(c-a),M=(x-i)*(h-p);if(l<=0||M<=0)return 0;const m=Math.max(o,i),f=Math.max(a,p),d=Math.min(u,x),I=Math.min(c,h),b=Math.max(d-m,0)*Math.max(I-f,0);return b/(l+M-b)}function a(e,n,r){const t=Math.exp(n*r*r);return r<=e?t:0}function u(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}
},{"./non_max_suppression_util":"vvmL"}],"KzRV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),n=require("../../tensor_util_env"),s=require("../nonmax_util"),o=require("../tensor1d");async function r(r,t,i,p=.5,u=Number.NEGATIVE_INFINITY){const a=(0,n.convertToTensor)(r,"boxes","nonMaxSuppressionAsync"),c=(0,n.convertToTensor)(t,"scores","nonMaxSuppressionAsync"),d=(0,s.nonMaxSuppSanityCheck)(a,c,i,p,u);i=d.maxOutputSize,p=d.iouThreshold,u=d.scoreThreshold;const x=await Promise.all([a.data(),c.data()]),l=x[0],_=x[1],{selectedIndices:S}=(0,e.nonMaxSuppressionV3Impl)(l,_,i,p,u);return a!==r&&a.dispose(),c!==t&&c.dispose(),(0,o.tensor1d)(S,"int32")}const t=r;exports.nonMaxSuppressionAsync=t;
},{"../../backends/non_max_suppression_impl":"VgKC","../../tensor_util_env":"qMTF","../nonmax_util":"CstK","../tensor1d":"hmhd"}],"Trfv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScore=void 0;var e=require("../../engine"),o=require("../../kernel_names"),r=require("../../tensor_util_env"),s=require("../nonmax_util"),n=require("../operation");function i(n,i,t,u=.5,p=Number.NEGATIVE_INFINITY,c=0){const a=(0,r.convertToTensor)(n,"boxes","nonMaxSuppression"),S=(0,r.convertToTensor)(i,"scores","nonMaxSuppression"),x=(0,s.nonMaxSuppSanityCheck)(a,S,t,u,p,c),h={boxes:a,scores:S},l={maxOutputSize:t=x.maxOutputSize,iouThreshold:u=x.iouThreshold,scoreThreshold:p=x.scoreThreshold,softNmsSigma:c=x.softNmsSigma},d=e.ENGINE.runKernel(o.NonMaxSuppressionV5,h,l);return{selectedIndices:d[0],selectedScores:d[1]}}const t=(0,n.op)({nonMaxSuppressionWithScore_:i});exports.nonMaxSuppressionWithScore=t;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../nonmax_util":"CstK","../operation":"pYCl"}],"CwpC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScoreAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),s=require("../../tensor_util_env"),n=require("../nonmax_util"),o=require("../tensor1d");async function r(r,t,i,c=.5,p=Number.NEGATIVE_INFINITY,a=0){const u=(0,s.convertToTensor)(r,"boxes","nonMaxSuppressionAsync"),d=(0,s.convertToTensor)(t,"scores","nonMaxSuppressionAsync"),l=(0,n.nonMaxSuppSanityCheck)(u,d,i,c,p,a);i=l.maxOutputSize,c=l.iouThreshold,p=l.scoreThreshold,a=l.softNmsSigma;const x=await Promise.all([u.data(),d.data()]),S=x[0],m=x[1],{selectedIndices:_,selectedScores:T}=(0,e.nonMaxSuppressionV5Impl)(S,m,i,c,p,a);return u!==r&&u.dispose(),d!==t&&d.dispose(),{selectedIndices:(0,o.tensor1d)(_,"int32"),selectedScores:(0,o.tensor1d)(T)}}const t=r;exports.nonMaxSuppressionWithScoreAsync=t;
},{"../../backends/non_max_suppression_impl":"VgKC","../../tensor_util_env":"qMTF","../nonmax_util":"CstK","../tensor1d":"hmhd"}],"fxoF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPadded=void 0;var e=require("../../engine"),o=require("../../kernel_names"),n=require("../../tensor_util_env"),r=require("../nonmax_util"),s=require("../operation");function u(s,u,i,t=.5,p=Number.NEGATIVE_INFINITY,a=!1){const d=(0,n.convertToTensor)(s,"boxes","nonMaxSuppression"),x=(0,n.convertToTensor)(u,"scores","nonMaxSuppression"),c=(0,r.nonMaxSuppSanityCheck)(d,x,i,t,p,null),l={boxes:d,scores:x},S={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:a},T=e.ENGINE.runKernel(o.NonMaxSuppressionV4,l,S);return{selectedIndices:T[0],validOutputs:T[1]}}const i=(0,s.op)({nonMaxSuppressionPadded_:u});exports.nonMaxSuppressionPadded=i;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../nonmax_util":"CstK","../operation":"pYCl"}],"kvEQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPaddedAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),s=require("../../tensor_util_env"),n=require("../nonmax_util"),o=require("../scalar"),r=require("../tensor1d");async function t(t,i,a,u=.5,p=Number.NEGATIVE_INFINITY,d=!1){const c=(0,s.convertToTensor)(t,"boxes","nonMaxSuppressionAsync"),l=(0,s.convertToTensor)(i,"scores","nonMaxSuppressionAsync"),x=(0,n.nonMaxSuppSanityCheck)(c,l,a,u,p,null),_=x.maxOutputSize,v=x.iouThreshold,S=x.scoreThreshold,[T,m]=await Promise.all([c.data(),l.data()]),{selectedIndices:y,validOutputs:I}=(0,e.nonMaxSuppressionV4Impl)(T,m,_,v,S,d);return c!==t&&c.dispose(),l!==i&&l.dispose(),{selectedIndices:(0,r.tensor1d)(y,"int32"),validOutputs:(0,o.scalar)(I,"int32")}}const i=t;exports.nonMaxSuppressionPaddedAsync=i;
},{"../../backends/non_max_suppression_impl":"VgKC","../../tensor_util_env":"qMTF","../nonmax_util":"CstK","../scalar":"oY2j","../tensor1d":"hmhd"}],"GuWx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=void 0;var e=require("../../engine"),r=require("../../kernel_names"),n=require("../../tensor_util_env"),t=o(require("../../util")),i=require("../operation"),a=require("../reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(r);if(n&&n.has(e))return n.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(t,a,o):t[a]=e[a]}return t.default=e,n&&n.set(e,t),t}function u(i,s,o=!1,u=!1){const l=(0,n.convertToTensor)(i,"images","resizeBilinear");t.assert(3===l.rank||4===l.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+`rank ${l.rank}.`),t.assert(2===s.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+`${s}.`),t.assert(!1===u||!1===o,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let p=l,f=!1;3===l.rank&&(f=!0,p=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const[]=s,c={images:p},h={alignCorners:o,halfPixelCenters:u,size:s},g=e.ENGINE.runKernel(r.ResizeBilinear,c,h);return f?(0,a.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const l=(0,i.op)({resizeBilinear_:u});exports.resizeBilinear=l;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../../util":"uQV1","../operation":"pYCl","../reshape":"IoLG"}],"tok5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),s=o(require("../../util")),n=require("../operation"),a=require("../reshape");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,t&&t.set(e,s),s}function u(n,i,o=!1,u=!1){const p=(0,t.convertToTensor)(n,"images","resizeNearestNeighbor");s.assert(3===p.rank||4===p.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+`rank ${p.rank}.`),s.assert(2===i.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+`${i}.`),s.assert("float32"===p.dtype||"int32"===p.dtype,()=>"`images` must have `int32` or `float32` as dtype"),s.assert(!1===u||!1===o,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let l=p,f=!1;3===p.rank&&(f=!0,l=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]));const[]=i,h={images:l},c={alignCorners:o,halfPixelCenters:u,size:i},g=e.ENGINE.runKernel(r.ResizeNearestNeighbor,h,c);return f?(0,a.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const p=(0,n.op)({resizeNearestNeighbor_:u});exports.resizeNearestNeighbor=p;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../../util":"uQV1","../operation":"pYCl","../reshape":"IoLG"}],"pThE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.threshold=void 0;var e=require("../tensor1d"),r=require("../operation"),t=require("../cast"),s=require("../split"),u=require("../bincount"),n=require("../less_equal"),o=require("../greater"),i=require("../sum"),a=require("../add"),l=require("../mul"),d=require("../div"),c=require("../sub"),p=require("../round"),f=require("../where"),h=require("../fill"),m=require("../slice"),b=require("../range"),q=require("../tensor"),y=w(require("../../util")),g=require("../../tensor_util_env");function v(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(v=function(e){return e?t:r})(e)}function w(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v(r);if(t&&t.has(e))return t.get(e);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=u?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}function O(r,i="binary",d=!1,c=.5){const f=(0,g.convertToTensor)(r,"image","threshold"),h=f.shape[0]*f.shape[1];let m,b,v,w,O=(0,l.mul)((0,e.tensor1d)([c]),255);if(y.assert(3===f.rank,()=>"Error in threshold: image must be rank 3,"+`but got rank ${f.rank}.`),y.assert(3===f.shape[2]||1===f.shape[2],()=>"Error in threshold: image color channel must be equal to 3 or 1"+`but got ${f.shape[2]}.`),y.assert("int32"===f.dtype||"float32"===f.dtype,()=>"Error in dtype: image dtype must be int32 or float32,"+`but got dtype ${f.dtype}.`),y.assert("otsu"===i||"binary"===i,()=>`Method must be binary or otsu, but was ${i}`),3===f.shape[2]){[m,b,v]=(0,s.split)(f,[1,1,1],-1);const e=(0,l.mul)(m,.2989),r=(0,l.mul)(b,.587),t=(0,l.mul)(v,.114);w=(0,a.add)((0,a.add)(e,r),t)}else w=r;if("otsu"===i){O=_((0,u.bincount)((0,t.cast)((0,p.round)(w),"int32"),(0,q.tensor)([]),256),h)}const j=d?(0,n.lessEqual)(w,O):(0,o.greater)(w,O);return(0,t.cast)((0,l.mul)(j,255),"int32")}function _(r,t){let s,u,n,p,q,y,g=(0,e.tensor1d)([-1]),v=(0,e.tensor1d)([0]),w=(0,e.tensor1d)([0]);for(let O=0;O<r.size-1;O++){s=(0,m.slice)(r,0,O+1),u=(0,m.slice)(r,O+1),q=(0,d.div)((0,i.sum)(s),t),y=(0,d.div)((0,i.sum)(u),t);const _=(0,i.sum)((0,l.mul)(s,(0,b.range)(0,s.size)));n=(0,d.div)(_,(0,i.sum)(s));const j=(0,h.fill)(u.shape,s.size),k=(0,a.add)((0,b.range)(0,u.size),j),M=(0,l.mul)(u,k);p=(0,d.div)((0,i.sum)(M),(0,i.sum)(u));const P=(0,c.sub)(n,p),z=(0,c.sub)(n,p),E=(0,l.mul)(q,y);w=(0,l.mul)((0,l.mul)(E,P),z);const $=(0,o.greater)(w,v);v=(0,f.where)($,w,v),g=(0,f.where)($,(0,e.tensor1d)([O]),g)}return g}const j=(0,r.op)({threshold_:O});exports.threshold=j;
},{"../tensor1d":"hmhd","../operation":"pYCl","../cast":"OenY","../split":"zRhz","../bincount":"diAx","../less_equal":"BA1Q","../greater":"xzex","../sum":"WgrX","../add":"RKQn","../mul":"Nt3M","../div":"M4To","../sub":"w3Uc","../round":"TZxD","../where":"ALar","../fill":"uRSA","../slice":"tUXw","../range":"DrQM","../tensor":"EMF1","../../util":"uQV1","../../tensor_util_env":"qMTF"}],"IKom":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform=void 0;var r=require("../../engine"),e=require("../../kernel_names"),t=require("../../tensor_util_env"),n=s(require("../../util")),o=require("../operation");function a(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(a=function(r){return r?t:e})(r)}function s(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=a(e);if(t&&t.has(r))return t.get(r);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if("default"!==s&&Object.prototype.hasOwnProperty.call(r,s)){var u=o?Object.getOwnPropertyDescriptor(r,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=r[s]}return n.default=r,t&&t.set(r,n),n}function u(o,a,s="nearest",u="constant",i=0,f){const l=(0,t.convertToTensor)(o,"image","transform","float32"),p=(0,t.convertToTensor)(a,"transforms","transform","float32");n.assert(4===l.rank,()=>"Error in transform: image must be rank 4,"+`but got rank ${l.rank}.`),n.assert(2===p.rank&&(p.shape[0]===l.shape[0]||1===p.shape[0])&&8===p.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),n.assert(null==f||2===f.length,()=>"Error in transform: outputShape must be [height, width] or null, "+`but got ${f}.`);const c={image:l,transforms:p},m={interpolation:s,fillMode:u,fillValue:i,outputShape:f};return r.ENGINE.runKernel(e.Transform,c,m)}const i=(0,o.op)({transform_:u});exports.transform=i;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../../util":"uQV1","../operation":"pYCl"}],"ZWBL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bandPart=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),a=require("../greater_equal"),t=require("../less_equal"),n=require("../logical_and"),s=require("../operation"),u=require("../range"),o=require("../reshape"),i=require("../scalar"),l=require("../stack"),b=require("../sub"),c=require("../unstack"),p=require("../where"),q=require("../zeros");function d(s,d,g){(0,r.assert)(d%1==0,()=>`bandPart(): numLower must be an integer, got ${d}.`),(0,r.assert)(g%1==0,()=>`bandPart(): numUpper must be an integer, got ${g}.`);const h=(0,e.convertToTensor)(s,"a","bandPart");(0,r.assert)(h.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${h.rank}.`);const m=h.shape,[P,w]=h.shape.slice(-2);if(!(d<=P))throw new Error(`bandPart(): numLower (${d})`+` must not be greater than the number of rows (${P}).`);if(!(g<=w))throw new Error(`bandPart(): numUpper (${g})`+` must not be greater than the number of columns (${w}).`);d<0&&(d=P),g<0&&(g=w);const _=(0,o.reshape)((0,u.range)(0,P,1,"int32"),[-1,1]),k=(0,u.range)(0,w,1,"int32"),$=(0,b.sub)(_,k),f=(0,n.logicalAnd)((0,t.lessEqual)($,(0,i.scalar)(+d,"int32")),(0,a.greaterEqual)($,(0,i.scalar)(-g,"int32"))),v=(0,q.zeros)([P,w],h.dtype);return(0,o.reshape)((0,l.stack)((0,c.unstack)((0,o.reshape)(h,[-1,P,w])).map(e=>(0,p.where)(f,e,v))),m)}const g=(0,s.op)({bandPart_:d});exports.bandPart=g;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../greater_equal":"nMa8","../less_equal":"BA1Q","../logical_and":"Uxvi","../operation":"pYCl","../range":"DrQM","../reshape":"IoLG","../scalar":"oY2j","../stack":"naC9","../sub":"w3Uc","../unstack":"Vfy7","../where":"ALar","../zeros":"f1QP"}],"UCeG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gramSchmidt=void 0;var e=require("../../engine"),r=require("../../util"),t=require("../div"),s=require("../mul"),i=require("../norm"),u=require("../operation"),n=require("../split"),o=require("../squeeze"),l=require("../stack"),m=require("../sub"),a=require("../sum");function c(u){let c;if(Array.isArray(u)){c=!1,(0,r.assert)(null!=u&&u.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const e=u[0].shape[0];for(let t=1;t<u.length;++t)(0,r.assert)(u[t].shape[0]===e,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+`(${u[t].shape[0]} vs. ${e})`)}else c=!0,u=(0,n.split)(u,u.shape[0],0).map(e=>(0,o.squeeze)(e,[0]));(0,r.assert)(u.length<=u[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${u.length}) exceeds `+`number of dimensions (${u[0].shape[0]}).`);const h=[],p=u;for(let r=0;r<u.length;++r)h.push(e.ENGINE.tidy(()=>{let e=p[r];if(r>0)for(let t=0;t<r;++t){const r=(0,s.mul)((0,a.sum)((0,s.mul)(h[t],e)),h[t]);e=(0,m.sub)(e,r)}return(0,t.div)(e,(0,i.norm)(e,"euclidean"))}));return c?(0,l.stack)(h,0):h}const h=(0,u.op)({gramSchmidt_:c});exports.gramSchmidt=h;
},{"../../engine":"Wn3f","../../util":"uQV1","../div":"M4To","../mul":"Nt3M","../norm":"W4Ys","../operation":"pYCl","../split":"zRhz","../squeeze":"w9nu","../stack":"naC9","../sub":"w3Uc","../sum":"WgrX"}],"fvzc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qr=void 0;var e=require("../../engine"),r=require("../../globals"),s=require("../../util"),t=require("../clone"),u=require("../concat"),a=require("../div"),n=require("../eye"),i=require("../greater"),o=require("../mat_mul"),c=require("../mul"),l=require("../neg"),p=require("../norm"),h=require("../operation"),q=require("../reshape"),m=require("../slice"),d=require("../stack"),g=require("../sub"),b=require("../tensor2d"),k=require("../transpose"),M=require("../unstack"),f=require("../where");function v(e,r=!1){if((0,s.assert)(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return y(e,r);{const s=e.shape.slice(0,e.shape.length-2).reduce((e,r)=>e*r),t=(0,M.unstack)((0,q.reshape)(e,[s,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),u=[],a=[];return t.forEach(e=>{const[s,t]=y(e,r);u.push(s),a.push(t)}),[(0,q.reshape)((0,d.stack)(u,0),e.shape),(0,q.reshape)((0,d.stack)(a,0),e.shape)]}}function y(h,q=!1){return e.ENGINE.tidy(()=>{(0,s.assert)(2===h.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${h.shape.length}D Tensor.`);const d=h.shape[0],M=h.shape[1];let v=(0,n.eye)(d),y=(0,t.clone)(h);const E=(0,b.tensor2d)([[1]],[1,1]);let N=(0,t.clone)(E);const _=d>=M?M:d;for(let s=0;s<_;++s){const n=y,h=N,q=v;[N,y,v]=e.ENGINE.tidy(()=>{const e=(0,m.slice)(y,[s,s],[d-s,1]),r=(0,p.norm)(e),n=(0,m.slice)(y,[s,s],[1,1]),h=(0,f.where)((0,i.greater)(n,0),(0,b.tensor2d)([[-1]]),(0,b.tensor2d)([[1]])),q=(0,g.sub)(n,(0,c.mul)(h,r)),_=(0,a.div)(e,q);N=1===_.shape[0]?(0,t.clone)(E):(0,u.concat)([E,(0,m.slice)(_,[1,0],[_.shape[0]-1,_.shape[1]])],0);const x=(0,l.neg)((0,a.div)((0,o.matMul)(h,q),r)),w=(0,m.slice)(y,[s,0],[d-s,M]),D=(0,c.mul)(x,N),G=(0,k.transpose)(N);if(0===s)y=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));else{const e=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));y=(0,u.concat)([(0,m.slice)(y,[0,0],[s,M]),e],0)}const I=(0,k.transpose)(D),T=(0,m.slice)(v,[0,s],[d,v.shape[1]-s]);if(0===s)v=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));else{const e=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));v=(0,u.concat)([(0,m.slice)(v,[0,0],[d,s]),e],1)}return[N,y,v]}),(0,r.dispose)([n,h,q])}return!q&&d>M&&(v=(0,m.slice)(v,[0,0],[d,M]),y=(0,m.slice)(y,[0,0],[M,M])),[v,y]})}const E=(0,h.op)({qr_:v});exports.qr=E;
},{"../../engine":"Wn3f","../../globals":"yD8k","../../util":"uQV1","../clone":"cQJm","../concat":"E9ft","../div":"M4To","../eye":"KL83","../greater":"xzex","../mat_mul":"cPiM","../mul":"Nt3M","../neg":"OZKu","../norm":"W4Ys","../operation":"pYCl","../reshape":"IoLG","../slice":"tUXw","../stack":"naC9","../sub":"w3Uc","../tensor2d":"Z1m8","../transpose":"gequ","../unstack":"Vfy7","../where":"ALar"}],"bX5b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeWeightedLoss=void 0;var e=require("../../tensor_util_env"),r=require("../cast"),s=require("../div"),u=require("../loss_ops_utils"),o=require("../mean"),t=require("../mul"),i=require("../not_equal"),n=require("../ones"),c=require("../operation"),l=require("../scalar"),a=require("../sum");function d(c,d,m=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const _=(0,e.convertToTensor)(c,"losses","computeWeightedLoss");let p=null;null!=d&&(p=(0,e.convertToTensor)(d,"weights","computeWeightedLoss"));const q=null==p?_:(0,t.mul)(_,p);if(m===u.Reduction.NONE)return q;if(m===u.Reduction.SUM)return(0,a.sum)(q);if(m===u.Reduction.MEAN){if(null==p)return(0,o.mean)(q);{const e=_.size/p.size,r=(0,s.div)((0,a.sum)(q),(0,a.sum)(p));return e>1?(0,s.div)(r,(0,l.scalar)(e)):r}}if(m===u.Reduction.SUM_BY_NONZERO_WEIGHTS){if(null==p)return(0,s.div)((0,a.sum)(q),(0,l.scalar)(_.size));{const e=(0,t.mul)(p,(0,n.ones)(_.shape)),u=(0,r.cast)((0,a.sum)((0,i.notEqual)(e,(0,l.scalar)(0))),"float32");return(0,s.div)((0,a.sum)(q),u)}}throw Error(`Unknown reduction: ${m}`)}const m=(0,c.op)({computeWeightedLoss_:d});exports.computeWeightedLoss=m;
},{"../../tensor_util_env":"qMTF","../cast":"OenY","../div":"M4To","../loss_ops_utils":"LIoB","../mean":"I8Ls","../mul":"Nt3M","../not_equal":"c6DU","../ones":"dZ45","../operation":"pYCl","../scalar":"oY2j","../sum":"WgrX"}],"S6Eb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absoluteDifference=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),o=require("../loss_ops_utils"),t=require("../operation"),i=require("../sub"),u=require("./compute_weighted_loss");function n(t,n,c,l=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const a=(0,e.convertToTensor)(t,"labels","absoluteDifference"),f=(0,e.convertToTensor)(n,"predictions","absoluteDifference");let b=null;null!=c&&(b=(0,e.convertToTensor)(c,"weights","absoluteDifference")),(0,r.assertShapesMatch)(a.shape,f.shape,"Error in absoluteDifference: ");const p=(0,s.abs)((0,i.sub)(a,f));return(0,u.computeWeightedLoss)(p,b,l)}const c=(0,t.op)({absoluteDifference_:n});exports.absoluteDifference=c;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../abs":"ic15","../loss_ops_utils":"LIoB","../operation":"pYCl","../sub":"w3Uc","./compute_weighted_loss":"bX5b"}],"UFPo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosineDistance=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),i=require("../operation"),t=require("../scalar"),n=require("../sub"),c=require("../sum"),u=require("./compute_weighted_loss");function a(i,a,l,p,_=r.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","cosineDistance"),d=(0,e.convertToTensor)(a,"predictions","cosineDistance");let h=null;null!=p&&(h=(0,e.convertToTensor)(p,"weights","cosineDistance")),(0,s.assertShapesMatch)(q.shape,d.shape,"Error in cosineDistance: ");const v=(0,t.scalar)(1),D=(0,n.sub)(v,(0,c.sum)((0,o.mul)(q,d),l,!0));return(0,u.computeWeightedLoss)(D,h,_)}const l=(0,i.op)({cosineDistance_:a});exports.cosineDistance=l;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../loss_ops_utils":"LIoB","../mul":"Nt3M","../operation":"pYCl","../scalar":"oY2j","../sub":"w3Uc","../sum":"WgrX","./compute_weighted_loss":"bX5b"}],"VJNt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hingeLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),t=require("../operation"),i=require("../relu"),u=require("../scalar"),n=require("../sub"),l=require("./compute_weighted_loss");function c(t,c,a,h=r.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,e.convertToTensor)(t,"labels","hingeLoss");const _=(0,e.convertToTensor)(c,"predictions","hingeLoss");let g=null;null!=a&&(g=(0,e.convertToTensor)(a,"weights","hingeLoss")),(0,s.assertShapesMatch)(p.shape,_.shape,"Error in hingeLoss: ");const q=(0,u.scalar)(1);p=(0,n.sub)((0,o.mul)((0,u.scalar)(2),p),q);const L=(0,i.relu)((0,n.sub)(q,(0,o.mul)(p,_)));return(0,l.computeWeightedLoss)(L,g,h)}const a=(0,t.op)({hingeLoss_:c});exports.hingeLoss=a;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../loss_ops_utils":"LIoB","../mul":"Nt3M","../operation":"pYCl","../relu":"f1ks","../scalar":"oY2j","../sub":"w3Uc","./compute_weighted_loss":"bX5b"}],"qm01":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.huberLoss=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),u=require("../add"),o=require("../loss_ops_utils"),i=require("../minimum"),t=require("../mul"),n=require("../operation"),a=require("../scalar"),l=require("../square"),c=require("../sub"),b=require("./compute_weighted_loss");function h(n,h,q,p=1,_=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(n,"labels","huberLoss"),m=(0,e.convertToTensor)(h,"predictions","huberLoss");let L=null;null!=q&&(L=(0,e.convertToTensor)(q,"weights","huberLoss")),(0,r.assertShapesMatch)(d.shape,m.shape,"Error in huberLoss: ");const v=(0,a.scalar)(p),T=(0,s.abs)((0,c.sub)(m,d)),g=(0,i.minimum)(T,v),x=(0,c.sub)(T,g),E=(0,u.add)((0,t.mul)((0,a.scalar)(.5),(0,l.square)(g)),(0,t.mul)(v,x));return(0,b.computeWeightedLoss)(E,L,_)}const q=(0,n.op)({huberLoss_:h});exports.huberLoss=q;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../abs":"ic15","../add":"RKQn","../loss_ops_utils":"LIoB","../minimum":"AUvU","../mul":"Nt3M","../operation":"pYCl","../scalar":"oY2j","../square":"wngC","../sub":"w3Uc","./compute_weighted_loss":"bX5b"}],"zj0q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),r=require("../log"),u=require("../loss_ops_utils"),l=require("../mul"),t=require("../neg"),i=require("../operation"),n=require("../scalar"),a=require("../sub"),c=require("./compute_weighted_loss");function g(i,g,d,p=1e-7,_=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","logLoss"),L=(0,e.convertToTensor)(g,"predictions","logLoss");let h=null;null!=d&&(h=(0,e.convertToTensor)(d,"weights","logLoss")),(0,s.assertShapesMatch)(q.shape,L.shape,"Error in logLoss: ");const v=(0,n.scalar)(1),T=(0,n.scalar)(p),b=(0,t.neg)((0,l.mul)(q,(0,r.log)((0,o.add)(L,T)))),m=(0,l.mul)((0,a.sub)(v,q),(0,r.log)((0,o.add)((0,a.sub)(v,L),T))),x=(0,a.sub)(b,m);return(0,c.computeWeightedLoss)(x,h,_)}const d=(0,i.op)({logLoss_:g});exports.logLoss=d;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../add":"RKQn","../log":"dxsf","../loss_ops_utils":"LIoB","../mul":"Nt3M","../neg":"OZKu","../operation":"pYCl","../scalar":"oY2j","../sub":"w3Uc","./compute_weighted_loss":"bX5b"}],"mNDn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanSquaredError=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),o=require("../loss_ops_utils"),s=require("../operation"),n=require("../squared_difference"),t=require("./compute_weighted_loss");function u(s,u,a,i=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(s,"labels","meanSquaredError"),c=(0,e.convertToTensor)(u,"predictions","meanSquaredError");let q=null;null!=a&&(q=(0,e.convertToTensor)(a,"weights","meanSquaredError")),(0,r.assertShapesMatch)(d.shape,c.shape,"Error in meanSquaredError: ");const l=(0,n.squaredDifference)(d,c);return(0,t.computeWeightedLoss)(l,q,i)}const a=(0,s.op)({meanSquaredError_:u});exports.meanSquaredError=a;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../loss_ops_utils":"LIoB","../operation":"pYCl","../squared_difference":"cPro","./compute_weighted_loss":"bX5b"}],"QK8A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidCrossEntropy=void 0;var r=require("../../tensor_util_env"),s=require("../../util"),e=require("../abs"),o=require("../add"),i=require("../exp"),t=require("../log1p"),n=require("../loss_ops_utils"),u=require("../mul"),l=require("../neg"),a=require("../operation"),p=require("../relu"),c=require("../scalar"),d=require("../sub"),g=require("./compute_weighted_loss");function m(n,a){const c=(0,r.convertToTensor)(n,"labels","sigmoidCrossEntropyWithLogits"),g=(0,r.convertToTensor)(a,"logits","sigmoidCrossEntropyWithLogits");(0,s.assertShapesMatch)(c.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");const m=(0,p.relu)(g),h=(0,u.mul)(g,c),q=(0,t.log1p)((0,i.exp)((0,l.neg)((0,e.abs)(g))));return(0,o.add)((0,d.sub)(m,h),q)}function h(e,i,t,l=0,a=n.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,r.convertToTensor)(e,"multiClassLabels","sigmoidCrossEntropy");const h=(0,r.convertToTensor)(i,"logits","sigmoidCrossEntropy");let q=null;if(null!=t&&(q=(0,r.convertToTensor)(t,"weights","sigmoidCrossEntropy")),(0,s.assertShapesMatch)(p.shape,h.shape,"Error in sigmoidCrossEntropy: "),l>0){const r=(0,c.scalar)(l),s=(0,c.scalar)(1),e=(0,c.scalar)(.5);p=(0,o.add)((0,u.mul)(p,(0,d.sub)(s,r)),(0,u.mul)(e,r))}const E=m(p,h);return(0,g.computeWeightedLoss)(E,q,a)}const q=(0,a.op)({sigmoidCrossEntropy_:h});exports.sigmoidCrossEntropy=q;
},{"../../tensor_util_env":"qMTF","../../util":"uQV1","../abs":"ic15","../add":"RKQn","../exp":"lPHG","../log1p":"bjbd","../loss_ops_utils":"LIoB","../mul":"Nt3M","../neg":"OZKu","../operation":"pYCl","../relu":"f1ks","../scalar":"oY2j","../sub":"w3Uc","./compute_weighted_loss":"bX5b"}],"a5QH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxCrossEntropy=void 0;var e=require("../../gradients"),r=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),t=require("../axis_util"),a=require("../cast"),n=require("../div"),u=require("../exp"),i=require("../log_sum_exp"),l=require("../loss_ops_utils"),p=require("../mul"),c=require("../neg"),m=require("../operation"),d=require("../reshape"),q=require("../scalar"),x=require("../sub"),f=require("../sum"),h=require("./compute_weighted_loss");function _(r,s,o=-1){if(-1===o&&(o=s.rank-1),o!==s.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${s.rank} `+`and dim was ${o}`);return(0,e.customGrad)((e,r,s)=>{const n=(0,i.logSumExp)(r,[o],!0),l=(0,x.sub)((0,a.cast)(r,"float32"),n);s([e,l]);const m=(0,c.neg)((0,p.mul)(l,e));return{value:(0,f.sum)(m,[o]),gradFunc:(e,r)=>{const[s,n]=r,i=(0,t.expandShapeToKeepDim)(e.shape,[o]);return[(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,a.cast)(s,"float32"),(0,u.exp)(n))),(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,u.exp)(n),(0,a.cast)(s,"float32")))]}}})(r,s)}function g(e,t,a,u=0,i=l.Reduction.SUM_BY_NONZERO_WEIGHTS){let c=(0,r.convertToTensor)(e,"onehotLabels","softmaxCrossEntropy");const m=(0,r.convertToTensor)(t,"logits","softmaxCrossEntropy");let d=null;if(null!=a&&(d=(0,r.convertToTensor)(a,"weights","softmaxCrossEntropy")),(0,s.assertShapesMatch)(c.shape,m.shape,"Error in softmaxCrossEntropy: "),u>0){const e=(0,q.scalar)(u),r=(0,q.scalar)(1),s=(0,q.scalar)(c.shape[1]);c=(0,o.add)((0,p.mul)(c,(0,x.sub)(r,e)),(0,n.div)(e,s))}const f=_(c,m);return(0,h.computeWeightedLoss)(f,d,i)}const E=(0,m.op)({softmaxCrossEntropy_:g});exports.softmaxCrossEntropy=E;
},{"../../gradients":"lNg9","../../tensor_util_env":"qMTF","../../util":"uQV1","../add":"RKQn","../axis_util":"KXhP","../cast":"OenY","../div":"M4To","../exp":"lPHG","../log_sum_exp":"heyF","../loss_ops_utils":"LIoB","../mul":"Nt3M","../neg":"OZKu","../operation":"pYCl","../reshape":"IoLG","../scalar":"oY2j","../sub":"w3Uc","../sum":"WgrX","./compute_weighted_loss":"bX5b"}],"Cmu7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseFillEmptyRows=void 0;var e=require("../../engine"),r=require("../../kernel_names"),s=require("../../tensor_util_env"),o=require("../operation");function n(o,n,t,a){const p=(0,s.convertToTensor)(o,"indices","sparseFillEmptyRows","int32"),i=(0,s.convertToTensor)(n,"values","sparseFillEmptyRows"),l=(0,s.convertToTensor)(t,"denseShape","sparseFillEmptyRows","int32"),u=(0,s.convertToTensor)(a,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==p.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${p.shape}`);if(1!==i.rank)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(1!==l.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${l.shape}`);if(0!==u.rank)throw new Error(`Default value should be a scalar but received shape ${u.shape}`);const d={indices:p,values:i,denseShape:l,defaultValue:u},c=e.ENGINE.runKernel(r.SparseFillEmptyRows,d);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const t=(0,o.op)({sparseFillEmptyRows_:n});exports.sparseFillEmptyRows=t;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../operation":"pYCl"}],"EEUp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseReshape=void 0;var e=require("../../engine"),r=require("../../kernel_names"),s=require("../../tensor_util_env"),n=require("../operation");function p(n,p,o){const t=(0,s.convertToTensor)(n,"inputIndices","sparseReshape","int32"),a=(0,s.convertToTensor)(p,"inputShape","sparseReshape","int32"),i=(0,s.convertToTensor)(o,"newShape","sparseReshape","int32");if(2!==t.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${t.shape}`);if(1!==a.rank)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(1!==i.rank)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const u={inputIndices:t,inputShape:a,newShape:i},h=e.ENGINE.runKernel(r.SparseReshape,u);return{outputIndices:h[0],outputShape:h[1]}}const o=(0,n.op)({sparseReshape_:p});exports.sparseReshape=o;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../operation":"pYCl"}],"cPjP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentMean=void 0;var e=require("../../engine"),n=require("../../kernel_names"),r=require("../../tensor_util_env"),s=require("../operation");function t(s,t,a){const o=(0,r.convertToTensor)(s,"data","sparseSegmentMean"),i=(0,r.convertToTensor)(t,"indices","sparseSegmentMean","int32"),d=(0,r.convertToTensor)(a,"segmentIds","sparseSegmentMean","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${i.shape}`);if(1!==d.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${d.shape}`);const p={data:o,indices:i,segmentIds:d};return e.ENGINE.runKernel(n.SparseSegmentMean,p)}const a=(0,s.op)({sparseSegmentMean_:t});exports.sparseSegmentMean=a;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../operation":"pYCl"}],"yZ4I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentSum=void 0;var e=require("../../engine"),r=require("../../kernel_names"),n=require("../../tensor_util_env"),s=require("../operation");function t(s,t,o){const a=(0,n.convertToTensor)(s,"data","sparseSegmentSum"),i=(0,n.convertToTensor)(t,"indices","sparseSegmentSum","int32"),u=(0,n.convertToTensor)(o,"segmentIds","sparseSegmentSum","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${i.shape}`);if(1!==u.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${u.shape}`);const m={data:a,indices:i,segmentIds:u};return e.ENGINE.runKernel(r.SparseSegmentSum,m)}const o=(0,s.op)({sparseSegmentSum_:t});exports.sparseSegmentSum=o;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../operation":"pYCl"}],"Q63F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringNGrams=void 0;var r=require("../../engine"),t=require("../../kernel_names"),e=require("../../tensor_util_env"),s=require("../operation");function a(s,a,n,i,o,p,d,u){const m=(0,e.convertToTensor)(s,"data","stringNGrams","string");if("string"!==m.dtype)throw new Error("Data must be of datatype string");if(1!==m.shape.length)throw new Error(`Data must be a vector, saw: ${m.shape}`);const g=(0,e.convertToTensor)(a,"dataSplits","stringNGrams");if("int32"!==g.dtype)throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:i,leftPad:o,rightPad:p,padWidth:d,preserveShortSequences:u},l={data:m,dataSplits:g},h=r.ENGINE.runKernel(t.StringNGrams,l,c);return{nGrams:h[0],nGramsSplits:h[1]}}const n=(0,s.op)({stringNGrams_:a});exports.stringNGrams=n;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../operation":"pYCl"}],"YUwG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringSplit=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),i=require("../operation");function n(i,n,s=!0){const o=(0,t.convertToTensor)(i,"input","stringSplit","string"),p=(0,t.convertToTensor)(n,"delimiter","stringSplit","string");if(1!==o.rank)throw new Error(`Input should be Tensor1D but received shape ${o.shape}`);if(0!==p.rank)throw new Error(`Delimiter should be a scalar but received shape ${p.shape}`);const u={skipEmpty:s},l={input:o,delimiter:p},a=e.ENGINE.runKernel(r.StringSplit,l,u);return{indices:a[0],values:a[1],shape:a[2]}}const s=(0,i.op)({stringSplit_:n});exports.stringSplit=s;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../operation":"pYCl"}],"ju1d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringToHashBucketFast=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),s=require("../operation");function n(s,n){const o=(0,r.convertToTensor)(s,"input","stringToHashBucketFast","string"),u={numBuckets:n};if(n<=0)throw new Error("Number of buckets must be at least 1");const i={input:o};return e.ENGINE.runKernel(t.StringToHashBucketFast,i,u)}const o=(0,s.op)({stringToHashBucketFast_:n});exports.stringToHashBucketFast=o;
},{"../../engine":"Wn3f","../../kernel_names":"E7d7","../../tensor_util_env":"qMTF","../operation":"pYCl"}],"OgAK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={image:!0,linalg:!0,losses:!0,spectral:!0,signal:!0,sparse:!0,string:!0,abs:!0,acos:!0,acosh:!0,add:!0,addN:!0,all:!0,any:!0,argMax:!0,argMin:!0,asin:!0,asinh:!0,atan:!0,atan2:!0,atanh:!0,avgPool:!0,avgPool3d:!0,basicLSTMCell:!0,batchToSpaceND:!0,batchNorm:!0,batchNorm2d:!0,batchNorm3d:!0,batchNorm4d:!0,bincount:!0,broadcastArgs:!0,broadcastTo:!0,buffer:!0,cast:!0,ceil:!0,clipByValue:!0,clone:!0,complex:!0,concat:!0,concat1d:!0,concat2d:!0,concat3d:!0,concat4d:!0,conv1d:!0,conv2d:!0,conv2dTranspose:!0,conv3d:!0,conv3dTranspose:!0,cos:!0,cosh:!0,cumprod:!0,cumsum:!0,denseBincount:!0,depthToSpace:!0,depthwiseConv2d:!0,diag:!0,dilation2d:!0,div:!0,divNoNan:!0,dot:!0,einsum:!0,elu:!0,equal:!0,erf:!0,euclideanNorm:!0,exp:!0,expandDims:!0,expm1:!0,eye:!0,fill:!0,floor:!0,floorDiv:!0,gather:!0,greater:!0,greaterEqual:!0,imag:!0,isFinite:!0,isInf:!0,isNaN:!0,leakyRelu:!0,less:!0,lessEqual:!0,linspace:!0,localResponseNormalization:!0,log:!0,log1p:!0,logSigmoid:!0,logSoftmax:!0,logSumExp:!0,logicalAnd:!0,logicalNot:!0,logicalOr:!0,logicalXor:!0,lowerBound:!0,matMul:!0,max:!0,maxPool:!0,maxPool3d:!0,maxPoolWithArgmax:!0,maximum:!0,mean:!0,meshgrid:!0,min:!0,minimum:!0,mirrorPad:!0,mod:!0,moments:!0,mul:!0,multiRNNCell:!0,multinomial:!0,neg:!0,notEqual:!0,oneHot:!0,ones:!0,onesLike:!0,outerProduct:!0,pad:!0,pad1d:!0,pad2d:!0,pad3d:!0,pad4d:!0,pool:!0,pow:!0,prelu:!0,print:!0,prod:!0,rand:!0,randomGamma:!0,randomNormal:!0,randomStandardNormal:!0,randomUniform:!0,range:!0,real:!0,reciprocal:!0,relu:!0,relu6:!0,reshape:!0,reverse:!0,reverse1d:!0,reverse2d:!0,reverse3d:!0,reverse4d:!0,round:!0,rsqrt:!0,scalar:!0,selu:!0,separableConv2d:!0,setdiff1dAsync:!0,sigmoid:!0,sign:!0,sin:!0,sinh:!0,slice:!0,slice1d:!0,slice2d:!0,slice3d:!0,slice4d:!0,softmax:!0,softplus:!0,spaceToBatchND:!0,fft:!0,ifft:!0,irfft:!0,rfft:!0,split:!0,sqrt:!0,square:!0,squaredDifference:!0,squeeze:!0,stack:!0,step:!0,stridedSlice:!0,sub:!0,sum:!0,tan:!0,tanh:!0,tensor:!0,tensor1d:!0,tensor2d:!0,tensor3d:!0,tensor4d:!0,tensor5d:!0,tensor6d:!0,tile:!0,topk:!0,truncatedNormal:!0,unique:!0,unsortedSegmentSum:!0,unstack:!0,upperBound:!0,variable:!0,where:!0,whereAsync:!0,zeros:!0,zerosLike:!0,op:!0,OP_SCOPE_SUFFIX:!0,fused:!0};Object.defineProperty(exports,"OP_SCOPE_SUFFIX",{enumerable:!0,get:function(){return Lt.OP_SCOPE_SUFFIX}}),Object.defineProperty(exports,"abs",{enumerable:!0,get:function(){return r.abs}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return t.acos}}),Object.defineProperty(exports,"acosh",{enumerable:!0,get:function(){return n.acosh}}),Object.defineProperty(exports,"add",{enumerable:!0,get:function(){return o.add}}),Object.defineProperty(exports,"addN",{enumerable:!0,get:function(){return u.addN}}),Object.defineProperty(exports,"all",{enumerable:!0,get:function(){return i.all}}),Object.defineProperty(exports,"any",{enumerable:!0,get:function(){return s.any}}),Object.defineProperty(exports,"argMax",{enumerable:!0,get:function(){return a.argMax}}),Object.defineProperty(exports,"argMin",{enumerable:!0,get:function(){return c.argMin}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return p.asin}}),Object.defineProperty(exports,"asinh",{enumerable:!0,get:function(){return l.asinh}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return d.atan}}),Object.defineProperty(exports,"atan2",{enumerable:!0,get:function(){return f.atan2}}),Object.defineProperty(exports,"atanh",{enumerable:!0,get:function(){return b.atanh}}),Object.defineProperty(exports,"avgPool",{enumerable:!0,get:function(){return m.avgPool}}),Object.defineProperty(exports,"avgPool3d",{enumerable:!0,get:function(){return g.avgPool3d}}),Object.defineProperty(exports,"basicLSTMCell",{enumerable:!0,get:function(){return x.basicLSTMCell}}),Object.defineProperty(exports,"batchNorm",{enumerable:!0,get:function(){return q.batchNorm}}),Object.defineProperty(exports,"batchNorm2d",{enumerable:!0,get:function(){return O.batchNorm2d}}),Object.defineProperty(exports,"batchNorm3d",{enumerable:!0,get:function(){return P.batchNorm3d}}),Object.defineProperty(exports,"batchNorm4d",{enumerable:!0,get:function(){return j.batchNorm4d}}),Object.defineProperty(exports,"batchToSpaceND",{enumerable:!0,get:function(){return y.batchToSpaceND}}),Object.defineProperty(exports,"bincount",{enumerable:!0,get:function(){return _.bincount}}),Object.defineProperty(exports,"broadcastArgs",{enumerable:!0,get:function(){return h.broadcastArgs}}),Object.defineProperty(exports,"broadcastTo",{enumerable:!0,get:function(){return v.broadcastTo}}),Object.defineProperty(exports,"buffer",{enumerable:!0,get:function(){return S.buffer}}),Object.defineProperty(exports,"cast",{enumerable:!0,get:function(){return N.cast}}),Object.defineProperty(exports,"ceil",{enumerable:!0,get:function(){return w.ceil}}),Object.defineProperty(exports,"clipByValue",{enumerable:!0,get:function(){return k.clipByValue}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return M.clone}}),Object.defineProperty(exports,"complex",{enumerable:!0,get:function(){return E.complex}}),Object.defineProperty(exports,"concat",{enumerable:!0,get:function(){return z.concat}}),Object.defineProperty(exports,"concat1d",{enumerable:!0,get:function(){return T.concat1d}}),Object.defineProperty(exports,"concat2d",{enumerable:!0,get:function(){return A.concat2d}}),Object.defineProperty(exports,"concat3d",{enumerable:!0,get:function(){return D.concat3d}}),Object.defineProperty(exports,"concat4d",{enumerable:!0,get:function(){return B.concat4d}}),Object.defineProperty(exports,"conv1d",{enumerable:!0,get:function(){return C.conv1d}}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return L.conv2d}}),Object.defineProperty(exports,"conv2dTranspose",{enumerable:!0,get:function(){return R.conv2dTranspose}}),Object.defineProperty(exports,"conv3d",{enumerable:!0,get:function(){return W.conv3d}}),Object.defineProperty(exports,"conv3dTranspose",{enumerable:!0,get:function(){return F.conv3dTranspose}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return G.cos}}),Object.defineProperty(exports,"cosh",{enumerable:!0,get:function(){return I.cosh}}),Object.defineProperty(exports,"cumprod",{enumerable:!0,get:function(){return U.cumprod}}),Object.defineProperty(exports,"cumsum",{enumerable:!0,get:function(){return X.cumsum}}),Object.defineProperty(exports,"denseBincount",{enumerable:!0,get:function(){return H.denseBincount}}),Object.defineProperty(exports,"depthToSpace",{enumerable:!0,get:function(){return V.depthToSpace}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return J.depthwiseConv2d}}),Object.defineProperty(exports,"diag",{enumerable:!0,get:function(){return K.diag}}),Object.defineProperty(exports,"dilation2d",{enumerable:!0,get:function(){return Q.dilation2d}}),Object.defineProperty(exports,"div",{enumerable:!0,get:function(){return Y.div}}),Object.defineProperty(exports,"divNoNan",{enumerable:!0,get:function(){return Z.divNoNan}}),Object.defineProperty(exports,"dot",{enumerable:!0,get:function(){return $.dot}}),Object.defineProperty(exports,"einsum",{enumerable:!0,get:function(){return ee.einsum}}),Object.defineProperty(exports,"elu",{enumerable:!0,get:function(){return re.elu}}),Object.defineProperty(exports,"equal",{enumerable:!0,get:function(){return te.equal}}),Object.defineProperty(exports,"erf",{enumerable:!0,get:function(){return ne.erf}}),Object.defineProperty(exports,"euclideanNorm",{enumerable:!0,get:function(){return oe.euclideanNorm}}),Object.defineProperty(exports,"exp",{enumerable:!0,get:function(){return ue.exp}}),Object.defineProperty(exports,"expandDims",{enumerable:!0,get:function(){return ie.expandDims}}),Object.defineProperty(exports,"expm1",{enumerable:!0,get:function(){return se.expm1}}),Object.defineProperty(exports,"eye",{enumerable:!0,get:function(){return ae.eye}}),Object.defineProperty(exports,"fft",{enumerable:!0,get:function(){return Hr.fft}}),Object.defineProperty(exports,"fill",{enumerable:!0,get:function(){return ce.fill}}),Object.defineProperty(exports,"floor",{enumerable:!0,get:function(){return pe.floor}}),Object.defineProperty(exports,"floorDiv",{enumerable:!0,get:function(){return le.floorDiv}}),exports.fused=void 0,Object.defineProperty(exports,"gather",{enumerable:!0,get:function(){return de.gather}}),Object.defineProperty(exports,"greater",{enumerable:!0,get:function(){return fe.greater}}),Object.defineProperty(exports,"greaterEqual",{enumerable:!0,get:function(){return be.greaterEqual}}),Object.defineProperty(exports,"ifft",{enumerable:!0,get:function(){return Vr.ifft}}),Object.defineProperty(exports,"imag",{enumerable:!0,get:function(){return me.imag}}),exports.image=void 0,Object.defineProperty(exports,"irfft",{enumerable:!0,get:function(){return Jr.irfft}}),Object.defineProperty(exports,"isFinite",{enumerable:!0,get:function(){return ge.isFinite}}),Object.defineProperty(exports,"isInf",{enumerable:!0,get:function(){return xe.isInf}}),Object.defineProperty(exports,"isNaN",{enumerable:!0,get:function(){return ye.isNaN}}),Object.defineProperty(exports,"leakyRelu",{enumerable:!0,get:function(){return qe.leakyRelu}}),Object.defineProperty(exports,"less",{enumerable:!0,get:function(){return Oe.less}}),Object.defineProperty(exports,"lessEqual",{enumerable:!0,get:function(){return Pe.lessEqual}}),exports.linalg=void 0,Object.defineProperty(exports,"linspace",{enumerable:!0,get:function(){return je.linspace}}),Object.defineProperty(exports,"localResponseNormalization",{enumerable:!0,get:function(){return _e.localResponseNormalization}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return he.log}}),Object.defineProperty(exports,"log1p",{enumerable:!0,get:function(){return ve.log1p}}),Object.defineProperty(exports,"logSigmoid",{enumerable:!0,get:function(){return Se.logSigmoid}}),Object.defineProperty(exports,"logSoftmax",{enumerable:!0,get:function(){return Ne.logSoftmax}}),Object.defineProperty(exports,"logSumExp",{enumerable:!0,get:function(){return we.logSumExp}}),Object.defineProperty(exports,"logicalAnd",{enumerable:!0,get:function(){return ke.logicalAnd}}),Object.defineProperty(exports,"logicalNot",{enumerable:!0,get:function(){return Me.logicalNot}}),Object.defineProperty(exports,"logicalOr",{enumerable:!0,get:function(){return Ee.logicalOr}}),Object.defineProperty(exports,"logicalXor",{enumerable:!0,get:function(){return ze.logicalXor}}),exports.losses=void 0,Object.defineProperty(exports,"lowerBound",{enumerable:!0,get:function(){return Te.lowerBound}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return Ae.matMul}}),Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return De.max}}),Object.defineProperty(exports,"maxPool",{enumerable:!0,get:function(){return Be.maxPool}}),Object.defineProperty(exports,"maxPool3d",{enumerable:!0,get:function(){return Ce.maxPool3d}}),Object.defineProperty(exports,"maxPoolWithArgmax",{enumerable:!0,get:function(){return Le.maxPoolWithArgmax}}),Object.defineProperty(exports,"maximum",{enumerable:!0,get:function(){return Re.maximum}}),Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return We.mean}}),Object.defineProperty(exports,"meshgrid",{enumerable:!0,get:function(){return Fe.meshgrid}}),Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return Ge.min}}),Object.defineProperty(exports,"minimum",{enumerable:!0,get:function(){return Ie.minimum}}),Object.defineProperty(exports,"mirrorPad",{enumerable:!0,get:function(){return Ue.mirrorPad}}),Object.defineProperty(exports,"mod",{enumerable:!0,get:function(){return Xe.mod}}),Object.defineProperty(exports,"moments",{enumerable:!0,get:function(){return He.moments}}),Object.defineProperty(exports,"mul",{enumerable:!0,get:function(){return Ve.mul}}),Object.defineProperty(exports,"multiRNNCell",{enumerable:!0,get:function(){return Je.multiRNNCell}}),Object.defineProperty(exports,"multinomial",{enumerable:!0,get:function(){return Ke.multinomial}}),Object.defineProperty(exports,"neg",{enumerable:!0,get:function(){return Qe.neg}}),Object.defineProperty(exports,"notEqual",{enumerable:!0,get:function(){return Ye.notEqual}}),Object.defineProperty(exports,"oneHot",{enumerable:!0,get:function(){return Ze.oneHot}}),Object.defineProperty(exports,"ones",{enumerable:!0,get:function(){return $e.ones}}),Object.defineProperty(exports,"onesLike",{enumerable:!0,get:function(){return er.onesLike}}),Object.defineProperty(exports,"op",{enumerable:!0,get:function(){return Lt.op}}),Object.defineProperty(exports,"outerProduct",{enumerable:!0,get:function(){return rr.outerProduct}}),Object.defineProperty(exports,"pad",{enumerable:!0,get:function(){return tr.pad}}),Object.defineProperty(exports,"pad1d",{enumerable:!0,get:function(){return nr.pad1d}}),Object.defineProperty(exports,"pad2d",{enumerable:!0,get:function(){return or.pad2d}}),Object.defineProperty(exports,"pad3d",{enumerable:!0,get:function(){return ur.pad3d}}),Object.defineProperty(exports,"pad4d",{enumerable:!0,get:function(){return ir.pad4d}}),Object.defineProperty(exports,"pool",{enumerable:!0,get:function(){return sr.pool}}),Object.defineProperty(exports,"pow",{enumerable:!0,get:function(){return ar.pow}}),Object.defineProperty(exports,"prelu",{enumerable:!0,get:function(){return cr.prelu}}),Object.defineProperty(exports,"print",{enumerable:!0,get:function(){return pr.print}}),Object.defineProperty(exports,"prod",{enumerable:!0,get:function(){return lr.prod}}),Object.defineProperty(exports,"rand",{enumerable:!0,get:function(){return dr.rand}}),Object.defineProperty(exports,"randomGamma",{enumerable:!0,get:function(){return fr.randomGamma}}),Object.defineProperty(exports,"randomNormal",{enumerable:!0,get:function(){return br.randomNormal}}),Object.defineProperty(exports,"randomStandardNormal",{enumerable:!0,get:function(){return mr.randomStandardNormal}}),Object.defineProperty(exports,"randomUniform",{enumerable:!0,get:function(){return gr.randomUniform}}),Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return xr.range}}),Object.defineProperty(exports,"real",{enumerable:!0,get:function(){return yr.real}}),Object.defineProperty(exports,"reciprocal",{enumerable:!0,get:function(){return qr.reciprocal}}),Object.defineProperty(exports,"relu",{enumerable:!0,get:function(){return Or.relu}}),Object.defineProperty(exports,"relu6",{enumerable:!0,get:function(){return Pr.relu6}}),Object.defineProperty(exports,"reshape",{enumerable:!0,get:function(){return jr.reshape}}),Object.defineProperty(exports,"reverse",{enumerable:!0,get:function(){return _r.reverse}}),Object.defineProperty(exports,"reverse1d",{enumerable:!0,get:function(){return hr.reverse1d}}),Object.defineProperty(exports,"reverse2d",{enumerable:!0,get:function(){return vr.reverse2d}}),Object.defineProperty(exports,"reverse3d",{enumerable:!0,get:function(){return Sr.reverse3d}}),Object.defineProperty(exports,"reverse4d",{enumerable:!0,get:function(){return Nr.reverse4d}}),Object.defineProperty(exports,"rfft",{enumerable:!0,get:function(){return Kr.rfft}}),Object.defineProperty(exports,"round",{enumerable:!0,get:function(){return wr.round}}),Object.defineProperty(exports,"rsqrt",{enumerable:!0,get:function(){return kr.rsqrt}}),Object.defineProperty(exports,"scalar",{enumerable:!0,get:function(){return Mr.scalar}}),Object.defineProperty(exports,"selu",{enumerable:!0,get:function(){return Er.selu}}),Object.defineProperty(exports,"separableConv2d",{enumerable:!0,get:function(){return zr.separableConv2d}}),Object.defineProperty(exports,"setdiff1dAsync",{enumerable:!0,get:function(){return Tr.setdiff1dAsync}}),Object.defineProperty(exports,"sigmoid",{enumerable:!0,get:function(){return Ar.sigmoid}}),Object.defineProperty(exports,"sign",{enumerable:!0,get:function(){return Dr.sign}}),exports.signal=void 0,Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return Br.sin}}),Object.defineProperty(exports,"sinh",{enumerable:!0,get:function(){return Cr.sinh}}),Object.defineProperty(exports,"slice",{enumerable:!0,get:function(){return Lr.slice}}),Object.defineProperty(exports,"slice1d",{enumerable:!0,get:function(){return Rr.slice1d}}),Object.defineProperty(exports,"slice2d",{enumerable:!0,get:function(){return Wr.slice2d}}),Object.defineProperty(exports,"slice3d",{enumerable:!0,get:function(){return Fr.slice3d}}),Object.defineProperty(exports,"slice4d",{enumerable:!0,get:function(){return Gr.slice4d}}),Object.defineProperty(exports,"softmax",{enumerable:!0,get:function(){return Ir.softmax}}),Object.defineProperty(exports,"softplus",{enumerable:!0,get:function(){return Ur.softplus}}),Object.defineProperty(exports,"spaceToBatchND",{enumerable:!0,get:function(){return Xr.spaceToBatchND}}),exports.spectral=exports.sparse=void 0,Object.defineProperty(exports,"split",{enumerable:!0,get:function(){return Qr.split}}),Object.defineProperty(exports,"sqrt",{enumerable:!0,get:function(){return Yr.sqrt}}),Object.defineProperty(exports,"square",{enumerable:!0,get:function(){return Zr.square}}),Object.defineProperty(exports,"squaredDifference",{enumerable:!0,get:function(){return $r.squaredDifference}}),Object.defineProperty(exports,"squeeze",{enumerable:!0,get:function(){return et.squeeze}}),Object.defineProperty(exports,"stack",{enumerable:!0,get:function(){return rt.stack}}),Object.defineProperty(exports,"step",{enumerable:!0,get:function(){return tt.step}}),Object.defineProperty(exports,"stridedSlice",{enumerable:!0,get:function(){return nt.stridedSlice}}),exports.string=void 0,Object.defineProperty(exports,"sub",{enumerable:!0,get:function(){return ot.sub}}),Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return ut.sum}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return it.tan}}),Object.defineProperty(exports,"tanh",{enumerable:!0,get:function(){return st.tanh}}),Object.defineProperty(exports,"tensor",{enumerable:!0,get:function(){return at.tensor}}),Object.defineProperty(exports,"tensor1d",{enumerable:!0,get:function(){return ct.tensor1d}}),Object.defineProperty(exports,"tensor2d",{enumerable:!0,get:function(){return pt.tensor2d}}),Object.defineProperty(exports,"tensor3d",{enumerable:!0,get:function(){return lt.tensor3d}}),Object.defineProperty(exports,"tensor4d",{enumerable:!0,get:function(){return dt.tensor4d}}),Object.defineProperty(exports,"tensor5d",{enumerable:!0,get:function(){return ft.tensor5d}}),Object.defineProperty(exports,"tensor6d",{enumerable:!0,get:function(){return bt.tensor6d}}),Object.defineProperty(exports,"tile",{enumerable:!0,get:function(){return mt.tile}}),Object.defineProperty(exports,"topk",{enumerable:!0,get:function(){return gt.topk}}),Object.defineProperty(exports,"truncatedNormal",{enumerable:!0,get:function(){return xt.truncatedNormal}}),Object.defineProperty(exports,"unique",{enumerable:!0,get:function(){return yt.unique}}),Object.defineProperty(exports,"unsortedSegmentSum",{enumerable:!0,get:function(){return qt.unsortedSegmentSum}}),Object.defineProperty(exports,"unstack",{enumerable:!0,get:function(){return Ot.unstack}}),Object.defineProperty(exports,"upperBound",{enumerable:!0,get:function(){return Pt.upperBound}}),Object.defineProperty(exports,"variable",{enumerable:!0,get:function(){return jt.variable}}),Object.defineProperty(exports,"where",{enumerable:!0,get:function(){return _t.where}}),Object.defineProperty(exports,"whereAsync",{enumerable:!0,get:function(){return ht.whereAsync}}),Object.defineProperty(exports,"zeros",{enumerable:!0,get:function(){return vt.zeros}}),Object.defineProperty(exports,"zerosLike",{enumerable:!0,get:function(){return St.zerosLike}});var r=require("./abs"),t=require("./acos"),n=require("./acosh"),o=require("./add"),u=require("./add_n"),i=require("./all"),s=require("./any"),a=require("./arg_max"),c=require("./arg_min"),p=require("./asin"),l=require("./asinh"),d=require("./atan"),f=require("./atan2"),b=require("./atanh"),m=require("./avg_pool"),g=require("./avg_pool_3d"),x=require("./basic_lstm_cell"),y=require("./batch_to_space_nd"),q=require("./batchnorm"),O=require("./batchnorm2d"),P=require("./batchnorm3d"),j=require("./batchnorm4d"),_=require("./bincount"),h=require("./broadcast_args"),v=require("./broadcast_to"),S=require("./buffer"),N=require("./cast"),w=require("./ceil"),k=require("./clip_by_value"),M=require("./clone"),E=require("./complex"),z=require("./concat"),T=require("./concat_1d"),A=require("./concat_2d"),D=require("./concat_3d"),B=require("./concat_4d"),C=require("./conv1d"),L=require("./conv2d"),R=require("./conv2d_transpose"),W=require("./conv3d"),F=require("./conv3d_transpose"),G=require("./cos"),I=require("./cosh"),U=require("./cumprod"),X=require("./cumsum"),H=require("./dense_bincount"),V=require("./depth_to_space"),J=require("./depthwise_conv2d"),K=require("./diag"),Q=require("./dilation2d"),Y=require("./div"),Z=require("./div_no_nan"),$=require("./dot"),ee=require("./einsum"),re=require("./elu"),te=require("./equal"),ne=require("./erf"),oe=require("./euclidean_norm"),ue=require("./exp"),ie=require("./expand_dims"),se=require("./expm1"),ae=require("./eye"),ce=require("./fill"),pe=require("./floor"),le=require("./floorDiv"),de=require("./gather"),fe=require("./greater"),be=require("./greater_equal"),me=require("./imag"),ge=require("./is_finite"),xe=require("./is_inf"),ye=require("./is_nan"),qe=require("./leaky_relu"),Oe=require("./less"),Pe=require("./less_equal"),je=require("./linspace"),_e=require("./local_response_normalization"),he=require("./log"),ve=require("./log1p"),Se=require("./log_sigmoid"),Ne=require("./log_softmax"),we=require("./log_sum_exp"),ke=require("./logical_and"),Me=require("./logical_not"),Ee=require("./logical_or"),ze=require("./logical_xor"),Te=require("./lower_bound"),Ae=require("./mat_mul"),De=require("./max"),Be=require("./max_pool"),Ce=require("./max_pool_3d"),Le=require("./max_pool_with_argmax"),Re=require("./maximum"),We=require("./mean"),Fe=require("./meshgrid"),Ge=require("./min"),Ie=require("./minimum"),Ue=require("./mirror_pad"),Xe=require("./mod"),He=require("./moments"),Ve=require("./mul"),Je=require("./multi_rnn_cell"),Ke=require("./multinomial"),Qe=require("./neg"),Ye=require("./not_equal"),Ze=require("./one_hot"),$e=require("./ones"),er=require("./ones_like"),rr=require("./outer_product"),tr=require("./pad"),nr=require("./pad1d"),or=require("./pad2d"),ur=require("./pad3d"),ir=require("./pad4d"),sr=require("./pool"),ar=require("./pow"),cr=require("./prelu"),pr=require("./print"),lr=require("./prod"),dr=require("./rand"),fr=require("./random_gamma"),br=require("./random_normal"),mr=require("./random_standard_normal"),gr=require("./random_uniform"),xr=require("./range"),yr=require("./real"),qr=require("./reciprocal"),Or=require("./relu"),Pr=require("./relu6"),jr=require("./reshape"),_r=require("./reverse"),hr=require("./reverse_1d"),vr=require("./reverse_2d"),Sr=require("./reverse_3d"),Nr=require("./reverse_4d"),wr=require("./round"),kr=require("./rsqrt"),Mr=require("./scalar"),Er=require("./selu"),zr=require("./separable_conv2d"),Tr=require("./setdiff1d_async"),Ar=require("./sigmoid"),Dr=require("./sign"),Br=require("./sin"),Cr=require("./sinh"),Lr=require("./slice"),Rr=require("./slice1d"),Wr=require("./slice2d"),Fr=require("./slice3d"),Gr=require("./slice4d"),Ir=require("./softmax"),Ur=require("./softplus"),Xr=require("./space_to_batch_nd"),Hr=require("./spectral/fft"),Vr=require("./spectral/ifft"),Jr=require("./spectral/irfft"),Kr=require("./spectral/rfft"),Qr=require("./split"),Yr=require("./sqrt"),Zr=require("./square"),$r=require("./squared_difference"),et=require("./squeeze"),rt=require("./stack"),tt=require("./step"),nt=require("./strided_slice"),ot=require("./sub"),ut=require("./sum"),it=require("./tan"),st=require("./tanh"),at=require("./tensor"),ct=require("./tensor1d"),pt=require("./tensor2d"),lt=require("./tensor3d"),dt=require("./tensor4d"),ft=require("./tensor5d"),bt=require("./tensor6d"),mt=require("./tile"),gt=require("./topk"),xt=require("./truncated_normal"),yt=require("./unique"),qt=require("./unsorted_segment_sum"),Ot=require("./unstack"),Pt=require("./upper_bound"),jt=require("./variable"),_t=require("./where"),ht=require("./where_async"),vt=require("./zeros"),St=require("./zeros_like"),Nt=require("./boolean_mask");Object.keys(Nt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Nt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Nt[r]}}))});var wt=require("./transpose");Object.keys(wt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===wt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return wt[r]}}))});var kt=require("./norm");Object.keys(kt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===kt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return kt[r]}}))});var Mt=require("./moving_average");Object.keys(Mt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Mt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Mt[r]}}))});var Et=require("./scatter_nd");Object.keys(Et).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Et[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Et[r]}}))});var zt=require("./search_sorted");Object.keys(zt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===zt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return zt[r]}}))});var Tt=require("./sparse_to_dense");Object.keys(Tt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Tt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Tt[r]}}))});var At=require("./gather_nd");Object.keys(At).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===At[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return At[r]}}))});var Dt=require("./dropout");Object.keys(Dt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Dt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Dt[r]}}))});var Bt=require("./signal_ops_util");Object.keys(Bt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Bt[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Bt[r]}}))});var Ct=require("./in_top_k");Object.keys(Ct).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===Ct[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Ct[r]}}))});var Lt=require("./operation"),Rt=vn(require("./fused_ops"));exports.fused=Rt;var Wt=require("./signal/hamming_window"),Ft=require("./signal/hann_window"),Gt=require("./signal/frame"),It=require("./signal/stft"),Ut=require("./image/crop_and_resize"),Xt=require("./image/flip_left_right"),Ht=require("./image/grayscale_to_rgb"),Vt=require("./image/rotate_with_offset"),Jt=require("./image/non_max_suppression"),Kt=require("./image/non_max_suppression_async"),Qt=require("./image/non_max_suppression_with_score"),Yt=require("./image/non_max_suppression_with_score_async"),Zt=require("./image/non_max_suppression_padded"),$t=require("./image/non_max_suppression_padded_async"),en=require("./image/resize_bilinear"),rn=require("./image/resize_nearest_neighbor"),tn=require("./image/threshold"),nn=require("./image/transform"),on=require("./linalg/band_part"),un=require("./linalg/gram_schmidt"),sn=require("./linalg/qr"),an=require("./losses/absolute_difference"),cn=require("./losses/compute_weighted_loss"),pn=require("./losses/cosine_distance"),ln=require("./losses/hinge_loss"),dn=require("./losses/huber_loss"),fn=require("./losses/log_loss"),bn=require("./losses/mean_squared_error"),mn=require("./losses/sigmoid_cross_entropy"),gn=require("./losses/softmax_cross_entropy"),xn=require("./sparse/sparse_fill_empty_rows"),yn=require("./sparse/sparse_reshape"),qn=require("./sparse/sparse_segment_mean"),On=require("./sparse/sparse_segment_sum"),Pn=require("./string/string_n_grams"),jn=require("./string/string_split"),_n=require("./string/string_to_hash_bucket_fast");function hn(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(hn=function(e){return e?t:r})(e)}function vn(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=hn(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}const Sn={fft:Hr.fft,ifft:Vr.ifft,rfft:Kr.rfft,irfft:Jr.irfft};exports.spectral=Sn;const Nn={hammingWindow:Wt.hammingWindow,hannWindow:Ft.hannWindow,frame:Gt.frame,stft:It.stft};exports.signal=Nn;const wn={flipLeftRight:Xt.flipLeftRight,grayscaleToRGB:Ht.grayscaleToRGB,resizeNearestNeighbor:rn.resizeNearestNeighbor,resizeBilinear:en.resizeBilinear,rotateWithOffset:Vt.rotateWithOffset,cropAndResize:Ut.cropAndResize,nonMaxSuppression:Jt.nonMaxSuppression,nonMaxSuppressionAsync:Kt.nonMaxSuppressionAsync,nonMaxSuppressionWithScore:Qt.nonMaxSuppressionWithScore,nonMaxSuppressionWithScoreAsync:Yt.nonMaxSuppressionWithScoreAsync,nonMaxSuppressionPadded:Zt.nonMaxSuppressionPadded,nonMaxSuppressionPaddedAsync:$t.nonMaxSuppressionPaddedAsync,threshold:tn.threshold,transform:nn.transform};exports.image=wn;const kn={bandPart:on.bandPart,gramSchmidt:un.gramSchmidt,qr:sn.qr};exports.linalg=kn;const Mn={absoluteDifference:an.absoluteDifference,computeWeightedLoss:cn.computeWeightedLoss,cosineDistance:pn.cosineDistance,hingeLoss:ln.hingeLoss,huberLoss:dn.huberLoss,logLoss:fn.logLoss,meanSquaredError:bn.meanSquaredError,sigmoidCrossEntropy:mn.sigmoidCrossEntropy,softmaxCrossEntropy:gn.softmaxCrossEntropy};exports.losses=Mn;const En={sparseFillEmptyRows:xn.sparseFillEmptyRows,sparseReshape:yn.sparseReshape,sparseSegmentMean:qn.sparseSegmentMean,sparseSegmentSum:On.sparseSegmentSum};exports.sparse=En;const zn={stringNGrams:Pn.stringNGrams,stringSplit:jn.stringSplit,stringToHashBucketFast:_n.stringToHashBucketFast};exports.string=zn;
},{"./abs":"ic15","./acos":"fZC3","./acosh":"bQXr","./add":"RKQn","./add_n":"qyob","./all":"YXcM","./any":"yyJR","./arg_max":"do4a","./arg_min":"kbXM","./asin":"UbeX","./asinh":"GNF6","./atan":"Bpr8","./atan2":"Yz4Z","./atanh":"NEWN","./avg_pool":"YRN0","./avg_pool_3d":"IxM0","./basic_lstm_cell":"W00p","./batch_to_space_nd":"cbr1","./batchnorm":"tSVR","./batchnorm2d":"Isat","./batchnorm3d":"n7pb","./batchnorm4d":"CN5i","./bincount":"diAx","./broadcast_args":"crfr","./broadcast_to":"l9pe","./buffer":"Ajeg","./cast":"OenY","./ceil":"PU1N","./clip_by_value":"u014","./clone":"cQJm","./complex":"EUHH","./concat":"E9ft","./concat_1d":"HEuN","./concat_2d":"M8xG","./concat_3d":"mXth","./concat_4d":"zuIn","./conv1d":"djzz","./conv2d":"rCpA","./conv2d_transpose":"VZ9k","./conv3d":"WX7G","./conv3d_transpose":"Jt7Y","./cos":"YFO2","./cosh":"fgKb","./cumprod":"VPUf","./cumsum":"BWsp","./dense_bincount":"IrIH","./depth_to_space":"Vh4l","./depthwise_conv2d":"WWch","./diag":"puKH","./dilation2d":"vqF1","./div":"M4To","./div_no_nan":"htQY","./dot":"uwXW","./einsum":"bOpy","./elu":"qaoR","./equal":"LJLN","./erf":"Uuut","./euclidean_norm":"qIXk","./exp":"lPHG","./expand_dims":"wPBp","./expm1":"RyT8","./eye":"KL83","./fill":"uRSA","./floor":"Tt6T","./floorDiv":"qn4k","./gather":"qpmj","./greater":"xzex","./greater_equal":"nMa8","./imag":"MbCQ","./is_finite":"Zi9b","./is_inf":"cVf4","./is_nan":"W1RT","./leaky_relu":"TUfJ","./less":"pOeu","./less_equal":"BA1Q","./linspace":"calK","./local_response_normalization":"duxs","./log":"dxsf","./log1p":"bjbd","./log_sigmoid":"rzXd","./log_softmax":"Rnpm","./log_sum_exp":"heyF","./logical_and":"Uxvi","./logical_not":"NW6f","./logical_or":"SNyQ","./logical_xor":"TWtt","./lower_bound":"HlrH","./mat_mul":"cPiM","./max":"lGXH","./max_pool":"KHqM","./max_pool_3d":"a6pO","./max_pool_with_argmax":"r4xZ","./maximum":"QvEy","./mean":"I8Ls","./meshgrid":"RlVT","./min":"MWg7","./minimum":"AUvU","./mirror_pad":"Cl4A","./mod":"ffDY","./moments":"v7lB","./mul":"Nt3M","./multi_rnn_cell":"VOxu","./multinomial":"iNRY","./neg":"OZKu","./not_equal":"c6DU","./one_hot":"vztq","./ones":"dZ45","./ones_like":"mtgi","./outer_product":"VUtK","./pad":"H66W","./pad1d":"PcsV","./pad2d":"l527","./pad3d":"Lf8A","./pad4d":"xvMA","./pool":"FVPb","./pow":"WjtV","./prelu":"dn3A","./print":"xBTU","./prod":"zUPs","./rand":"uVeA","./random_gamma":"ftBH","./random_normal":"mhaO","./random_standard_normal":"zeIm","./random_uniform":"Gd9g","./range":"DrQM","./real":"H6Zd","./reciprocal":"mFtu","./relu":"f1ks","./relu6":"ljlp","./reshape":"IoLG","./reverse":"lVoL","./reverse_1d":"kRkv","./reverse_2d":"q7yu","./reverse_3d":"EU6M","./reverse_4d":"utDB","./round":"TZxD","./rsqrt":"JxB0","./scalar":"oY2j","./selu":"SPBE","./separable_conv2d":"rIZG","./setdiff1d_async":"zunO","./sigmoid":"JWCK","./sign":"rP8E","./sin":"UjHb","./sinh":"Etv0","./slice":"tUXw","./slice1d":"vAU7","./slice2d":"GtCB","./slice3d":"gf0Z","./slice4d":"aIQk","./softmax":"g4GY","./softplus":"dYA7","./space_to_batch_nd":"pe9T","./spectral/fft":"IyPR","./spectral/ifft":"VJnp","./spectral/irfft":"xVRC","./spectral/rfft":"RlzF","./split":"zRhz","./sqrt":"y3Gt","./square":"wngC","./squared_difference":"cPro","./squeeze":"w9nu","./stack":"naC9","./step":"jRSP","./strided_slice":"vG8m","./sub":"w3Uc","./sum":"WgrX","./tan":"Zn1E","./tanh":"TO7P","./tensor":"EMF1","./tensor1d":"hmhd","./tensor2d":"Z1m8","./tensor3d":"exf7","./tensor4d":"A2ic","./tensor5d":"yG08","./tensor6d":"rWRz","./tile":"YKMi","./topk":"iC1w","./truncated_normal":"bnZE","./unique":"WLYA","./unsorted_segment_sum":"gOKP","./unstack":"Vfy7","./upper_bound":"jZA2","./variable":"Yyo4","./where":"ALar","./where_async":"VGKk","./zeros":"f1QP","./zeros_like":"HQup","./boolean_mask":"v93D","./transpose":"gequ","./norm":"W4Ys","./moving_average":"sYtj","./scatter_nd":"vjBN","./search_sorted":"XX4U","./sparse_to_dense":"VOvT","./gather_nd":"CAEj","./dropout":"Jj09","./signal_ops_util":"EVmg","./in_top_k":"A7yI","./operation":"pYCl","./fused_ops":"yrgB","./signal/hamming_window":"fT78","./signal/hann_window":"CZx9","./signal/frame":"lmae","./signal/stft":"nP9F","./image/crop_and_resize":"Dpmd","./image/flip_left_right":"xHvL","./image/grayscale_to_rgb":"qZvL","./image/rotate_with_offset":"bAMQ","./image/non_max_suppression":"TEFg","./image/non_max_suppression_async":"KzRV","./image/non_max_suppression_with_score":"Trfv","./image/non_max_suppression_with_score_async":"CwpC","./image/non_max_suppression_padded":"fxoF","./image/non_max_suppression_padded_async":"kvEQ","./image/resize_bilinear":"GuWx","./image/resize_nearest_neighbor":"tok5","./image/threshold":"pThE","./image/transform":"IKom","./linalg/band_part":"ZWBL","./linalg/gram_schmidt":"UCeG","./linalg/qr":"fvzc","./losses/absolute_difference":"S6Eb","./losses/compute_weighted_loss":"bX5b","./losses/cosine_distance":"UFPo","./losses/hinge_loss":"VJNt","./losses/huber_loss":"qm01","./losses/log_loss":"zj0q","./losses/mean_squared_error":"mNDn","./losses/sigmoid_cross_entropy":"QK8A","./losses/softmax_cross_entropy":"a5QH","./sparse/sparse_fill_empty_rows":"Cmu7","./sparse/sparse_reshape":"EEUp","./sparse/sparse_segment_mean":"cPjP","./sparse/sparse_segment_sum":"yZ4I","./string/string_n_grams":"Q63F","./string/string_split":"YUwG","./string/string_to_hash_bucket_fast":"ju1d"}],"bdv0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Optimizer=void 0;var e=require("../globals"),t=require("../gradients"),i=require("../ops/ops"),s=require("../serialization");class r extends s.Serializable{minimize(t,i=!1,s){const{value:r,grads:n}=this.computeGradients(t,s);if(null!=s){const e=s.map(e=>({name:e.name,tensor:n[e.name]}));this.applyGradients(e)}else this.applyGradients(n);return(0,e.dispose)(n),i?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,i){return(0,t.variableGrads)(e,i)}dispose(){null!=this.iterations_&&(0,e.dispose)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,i.scalar)(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+`${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}exports.Optimizer=r,Object.defineProperty(r,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});
},{"../globals":"yD8k","../gradients":"lNg9","../ops/ops":"OgAK","../serialization":"bXJl"}],"htPX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdadeltaOptimizer=void 0;var a=require("../engine"),e=require("../globals"),s=require("../ops/add"),i=require("../ops/div"),t=require("../ops/mul"),r=require("../ops/ops"),l=require("../ops/square"),n=require("../ops/zeros_like"),u=require("../serialization"),d=require("./optimizer");class o extends d.Optimizer{constructor(e,s,i=null){super(),this.learningRate=e,this.rho=s,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==i&&(this.epsilon=a.ENGINE.backend.epsilon())}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((d,o)=>{const c=a.ENGINE.registeredVariables[d];null==this.accumulatedGrads[o]&&(this.accumulatedGrads[o]={originalName:`${d}/accum_grad`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))}),null==this.accumulatedUpdates[o]&&(this.accumulatedUpdates[o]={originalName:`${d}/accum_var`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))});const m=Array.isArray(u)?u[o].tensor:u[d];if(null==m)return;const h=this.accumulatedGrads[o].variable,p=this.accumulatedUpdates[o].variable;(0,e.tidy)(()=>{const a=(0,s.add)((0,t.mul)(h,this.rho),(0,t.mul)((0,l.square)(m),1-this.rho)),e=(0,t.mul)((0,i.div)((0,r.sqrt)((0,s.add)(p,this.epsilon)),(0,r.sqrt)((0,s.add)(h,this.epsilon))),m),n=(0,s.add)((0,t.mul)(p,this.rho),(0,t.mul)((0,l.square)(e),1-this.rho));h.assign(a),p.assign(n);const u=(0,s.add)((0,t.mul)(e,-this.learningRate),c);c.assign(u)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,e.dispose)(this.accumulatedGrads.map(a=>a.variable)),(0,e.dispose)(this.accumulatedUpdates.map(a=>a.variable)))}async getWeights(){const a=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(a.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){const e=(a=await this.extractIterations(a)).length/2;this.accumulatedGrads=a.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)})),this.accumulatedUpdates=a.slice(e,2*e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(a,e){return new a(e.learningRate,e.rho,e.epsilon)}}exports.AdadeltaOptimizer=o,o.className="Adadelta",(0,u.registerClass)(o);
},{"../engine":"Wn3f","../globals":"yD8k","../ops/add":"RKQn","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/ops":"OgAK","../ops/square":"wngC","../ops/zeros_like":"HQup","../serialization":"bXJl","./optimizer":"bdv0"}],"ZNS9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdagradOptimizer=void 0;var a=require("../engine"),e=require("../globals"),i=require("../ops/add"),r=require("../ops/div"),t=require("../ops/fill"),s=require("../ops/mul"),l=require("../ops/sqrt"),n=require("../ops/square"),u=require("../serialization"),c=require("./optimizer");class o extends c.Optimizer{constructor(a,e=.1){super(),this.learningRate=a,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((c,o)=>{const d=a.ENGINE.registeredVariables[c];if(null==this.accumulatedGrads[o]){const a=!1;this.accumulatedGrads[o]={originalName:`${c}/accumulator`,variable:(0,e.tidy)(()=>(0,t.fill)(d.shape,this.initialAccumulatorValue).variable(a))}}const m=Array.isArray(u)?u[o].tensor:u[c];if(null==m)return;const p=this.accumulatedGrads[o].variable;(0,e.tidy)(()=>{const e=(0,i.add)(p,(0,n.square)(m));p.assign(e);const t=(0,i.add)((0,s.mul)((0,r.div)(m,(0,l.sqrt)((0,i.add)(e,a.ENGINE.backend.epsilon()))),-this.learningRate),d);d.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,e.dispose)(this.accumulatedGrads.map(a=>a.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){a=await this.extractIterations(a);this.accumulatedGrads=a.map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(a,e){return new a(e.learningRate,e.initialAccumulatorValue)}}exports.AdagradOptimizer=o,o.className="Adagrad",(0,u.registerClass)(o);
},{"../engine":"Wn3f","../globals":"yD8k","../ops/add":"RKQn","../ops/div":"M4To","../ops/fill":"uRSA","../ops/mul":"Nt3M","../ops/sqrt":"y3Gt","../ops/square":"wngC","../serialization":"bXJl","./optimizer":"bdv0"}],"xITJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamOptimizer=void 0;var e=require("../engine"),t=require("../globals"),a=require("../ops/add"),i=require("../ops/div"),s=require("../ops/mul"),r=require("../ops/pow"),n=require("../ops/scalar"),c=require("../ops/sqrt"),o=require("../ops/square"),l=require("../ops/sub"),u=require("../ops/zeros_like"),m=require("../serialization"),d=require("./optimizer");class h extends d.Optimizer{constructor(a,i,s,r=null){super(),this.learningRate=a,this.beta1=i,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,t.tidy)(()=>{this.accBeta1=(0,n.scalar)(i).variable(),this.accBeta2=(0,n.scalar)(s).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(r){const n=Array.isArray(r)?r.map(e=>e.name):Object.keys(r);(0,t.tidy)(()=>{const m=(0,l.sub)(1,this.accBeta1),d=(0,l.sub)(1,this.accBeta2);n.forEach((n,l)=>{const h=e.ENGINE.registeredVariables[n];null==this.accumulatedFirstMoment[l]&&(this.accumulatedFirstMoment[l]={originalName:`${n}/m`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))}),null==this.accumulatedSecondMoment[l]&&(this.accumulatedSecondMoment[l]={originalName:`${n}/v`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))});const p=Array.isArray(r)?r[l].tensor:r[n];if(null==p)return;const b=this.accumulatedFirstMoment[l].variable,g=this.accumulatedSecondMoment[l].variable,v=(0,a.add)((0,s.mul)(b,this.beta1),(0,s.mul)(p,1-this.beta1)),q=(0,a.add)((0,s.mul)(g,this.beta2),(0,s.mul)((0,o.square)(p),1-this.beta2)),M=(0,i.div)(v,m),y=(0,i.div)(q,d);b.assign(v),g.assign(q);const B=(0,a.add)((0,s.mul)((0,i.div)(M,(0,a.add)((0,c.sqrt)(y),this.epsilon)),-this.learningRate),h);h.assign(B)}),this.accBeta1.assign((0,s.mul)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,s.mul)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,t.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&(0,t.dispose)(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),(0,t.tidy)(()=>{this.accBeta1.assign((0,r.pow)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,r.pow)(this.beta2,this.iterations_+1))});const a=e.length/2;this.accumulatedFirstMoment=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}exports.AdamOptimizer=h,h.className="Adam",(0,m.registerClass)(h);
},{"../engine":"Wn3f","../globals":"yD8k","../ops/add":"RKQn","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/pow":"WjtV","../ops/scalar":"oY2j","../ops/sqrt":"y3Gt","../ops/square":"wngC","../ops/sub":"w3Uc","../ops/zeros_like":"HQup","../serialization":"bXJl","./optimizer":"bdv0"}],"jnml":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamaxOptimizer=void 0;var e=require("../engine"),i=require("../globals"),t=require("../ops/abs"),a=require("../ops/add"),s=require("../ops/div"),r=require("../ops/maximum"),n=require("../ops/mul"),l=require("../ops/scalar"),o=require("../ops/sub"),u=require("../ops/zeros_like"),c=require("../serialization"),d=require("./optimizer");class m extends d.Optimizer{constructor(t,a,s,r=null,n=0){super(),this.learningRate=t,this.beta1=a,this.beta2=s,this.epsilon=r,this.decay=n,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,i.tidy)(()=>{this.iteration=(0,l.scalar)(0).variable(),this.accBeta1=(0,l.scalar)(a).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(l){const c=Array.isArray(l)?l.map(e=>e.name):Object.keys(l);(0,i.tidy)(()=>{const i=(0,o.sub)(1,this.accBeta1),d=(0,s.div)(-this.learningRate,(0,a.add)((0,n.mul)(this.iteration,this.decay),1));c.forEach((o,c)=>{const m=e.ENGINE.registeredVariables[o];null==this.accumulatedFirstMoment[c]&&(this.accumulatedFirstMoment[c]={originalName:`${o}/m`,variable:(0,u.zerosLike)(m).variable(!1)}),null==this.accumulatedWeightedInfNorm[c]&&(this.accumulatedWeightedInfNorm[c]={originalName:`${o}/v`,variable:(0,u.zerosLike)(m).variable(!1)});const h=Array.isArray(l)?l[c].tensor:l[o];if(null==h)return;const p=this.accumulatedFirstMoment[c].variable,b=this.accumulatedWeightedInfNorm[c].variable,g=(0,a.add)((0,n.mul)(p,this.beta1),(0,n.mul)(h,1-this.beta1)),v=(0,n.mul)(b,this.beta2),y=(0,t.abs)(h),f=(0,r.maximum)(v,y);p.assign(g),b.assign(f);const N=(0,a.add)((0,n.mul)((0,s.div)(d,i),(0,s.div)(g,(0,a.add)(f,this.epsilon))),m);m.assign(N)}),this.iteration.assign((0,a.add)(this.iteration,1)),this.accBeta1.assign((0,n.mul)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,i.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&(0,i.dispose)(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,i){return new e(i.learningRate,i.beta1,i.beta2,i.epsilon,i.decay)}}exports.AdamaxOptimizer=m,m.className="Adamax",(0,c.registerClass)(m);
},{"../engine":"Wn3f","../globals":"yD8k","../ops/abs":"ic15","../ops/add":"RKQn","../ops/div":"M4To","../ops/maximum":"QvEy","../ops/mul":"Nt3M","../ops/scalar":"oY2j","../ops/sub":"w3Uc","../ops/zeros_like":"HQup","../serialization":"bXJl","./optimizer":"bdv0"}],"V404":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SGDOptimizer=void 0;var e=require("../engine"),t=require("../globals"),r=require("../ops/add"),i=require("../ops/mul"),s=require("../ops/scalar"),a=require("../serialization"),n=require("./optimizer");class o extends n.Optimizer{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(s){(Array.isArray(s)?s.map(e=>e.name):Object.keys(s)).forEach((a,n)=>{const o=Array.isArray(s)?s[n].tensor:s[a];if(null==o)return;const l=e.ENGINE.registeredVariables[a];(0,t.tidy)(()=>{const e=(0,r.add)((0,i.mul)(this.c,o),l);l.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,t.keep)((0,s.scalar)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}exports.SGDOptimizer=o,o.className="SGD",(0,a.registerClass)(o);
},{"../engine":"Wn3f","../globals":"yD8k","../ops/add":"RKQn","../ops/mul":"Nt3M","../ops/scalar":"oY2j","../serialization":"bXJl","./optimizer":"bdv0"}],"uuAC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MomentumOptimizer=void 0;var e=require("../engine"),t=require("../globals"),s=require("../ops/add"),i=require("../ops/mul"),a=require("../ops/scalar"),r=require("../ops/zeros_like"),n=require("../serialization"),m=require("./sgd_optimizer");class o extends m.SGDOptimizer{constructor(e,t,s=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=s,this.accumulations=[],this.m=(0,a.scalar)(this.momentum)}applyGradients(a){(Array.isArray(a)?a.map(e=>e.name):Object.keys(a)).forEach((n,m)=>{const o=e.ENGINE.registeredVariables[n];if(null==this.accumulations[m]){const e=!1;this.accumulations[m]={originalName:`${n}/momentum`,variable:(0,t.tidy)(()=>(0,r.zerosLike)(o).variable(e))}}const u=this.accumulations[m].variable,l=Array.isArray(a)?a[m].tensor:a[n];null!=l&&(0,t.tidy)(()=>{let e;const t=(0,s.add)((0,i.mul)(this.m,u),l);e=this.useNesterov?(0,s.add)((0,i.mul)(this.c,(0,s.add)(l,(0,i.mul)(t,this.m))),o):(0,s.add)((0,i.mul)(this.c,t),o),u.assign(t),o.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,t.dispose)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}exports.MomentumOptimizer=o,o.className="Momentum",(0,n.registerClass)(o);
},{"../engine":"Wn3f","../globals":"yD8k","../ops/add":"RKQn","../ops/mul":"Nt3M","../ops/scalar":"oY2j","../ops/zeros_like":"HQup","../serialization":"bXJl","./sgd_optimizer":"V404"}],"tdtX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RMSPropOptimizer=void 0;var e=require("../engine"),a=require("../globals"),s=require("../ops/add"),t=require("../ops/div"),i=require("../ops/mul"),r=require("../ops/sqrt"),n=require("../ops/square"),u=require("../ops/sub"),l=require("../ops/zeros_like"),c=require("../serialization"),m=require("./optimizer");class d extends m.Optimizer{constructor(a,s=.9,t=0,i=null,r=!1){if(super(),this.learningRate=a,this.decay=s,this.momentum=t,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==i&&(this.epsilon=e.ENGINE.backend.epsilon()),null==a)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(c){(Array.isArray(c)?c.map(e=>e.name):Object.keys(c)).forEach((m,d)=>{const o=e.ENGINE.registeredVariables[m];null==this.accumulatedMeanSquares[d]&&(this.accumulatedMeanSquares[d]={originalName:`${m}/rms`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMoments[d]&&(this.accumulatedMoments[d]={originalName:`${m}/momentum`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMeanGrads[d]&&this.centered&&(this.accumulatedMeanGrads[d]={originalName:`${m}/mg`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))});const h=Array.isArray(c)?c[d].tensor:c[m];if(null==h)return;const p=this.accumulatedMeanSquares[d].variable,g=this.accumulatedMoments[d].variable;(0,a.tidy)(()=>{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay));if(this.centered){const a=this.accumulatedMeanGrads[d].variable,l=(0,s.add)((0,i.mul)(a,this.decay),(0,i.mul)(h,1-this.decay)),c=(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,u.sub)(e,(0,s.add)((0,n.square)(l),this.epsilon)))),m=(0,s.add)((0,i.mul)(g,this.momentum),c);p.assign(e),a.assign(l),g.assign(m);const b=(0,u.sub)(o,m);o.assign(b)}else{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay)),a=(0,s.add)((0,i.mul)(g,this.momentum),(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,s.add)(e,this.epsilon))));p.assign(e),g.assign(a);const l=(0,u.sub)(o,a);o.assign(l)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,a.dispose)(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,a.dispose)(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&(0,a.dispose)(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const a=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*a,3*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,a){return new e(a.learningRate,a.decay,a.momentum,a.epsilon,a.centered)}}exports.RMSPropOptimizer=d,d.className="RMSProp",(0,c.registerClass)(d);
},{"../engine":"Wn3f","../globals":"yD8k","../ops/add":"RKQn","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/sqrt":"y3Gt","../ops/square":"wngC","../ops/sub":"w3Uc","../ops/zeros_like":"HQup","../serialization":"bXJl","./optimizer":"bdv0"}],"VvpK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptimizerConstructors=void 0;var r=require("./adadelta_optimizer"),e=require("./adagrad_optimizer"),t=require("./adam_optimizer"),i=require("./adamax_optimizer"),a=require("./momentum_optimizer"),m=require("./rmsprop_optimizer"),u=require("./sgd_optimizer");class p{static sgd(r){return new u.SGDOptimizer(r)}static momentum(r,e,t=!1){return new a.MomentumOptimizer(r,e,t)}static rmsprop(r,e=.9,t=0,i=null,a=!1){return new m.RMSPropOptimizer(r,e,t,i,a)}static adam(r=.001,e=.9,i=.999,a=null){return new t.AdamOptimizer(r,e,i,a)}static adadelta(e=.001,t=.95,i=null){return new r.AdadeltaOptimizer(e,t,i)}static adamax(r=.002,e=.9,t=.999,a=null,m=0){return new i.AdamaxOptimizer(r,e,t,a,m)}static adagrad(r,t=.1){return new e.AdagradOptimizer(r,t)}}exports.OptimizerConstructors=p;
},{"./adadelta_optimizer":"htPX","./adagrad_optimizer":"ZNS9","./adam_optimizer":"xITJ","./adamax_optimizer":"jnml","./momentum_optimizer":"uuAC","./rmsprop_optimizer":"tdtX","./sgd_optimizer":"V404"}],"zMFJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.train=void 0;var r=require("./optimizers/adadelta_optimizer"),i=require("./optimizers/adagrad_optimizer"),e=require("./optimizers/adam_optimizer"),t=require("./optimizers/adamax_optimizer"),m=require("./optimizers/momentum_optimizer"),o=require("./optimizers/optimizer_constructors"),a=require("./optimizers/rmsprop_optimizer"),p=require("./optimizers/sgd_optimizer");m.MomentumOptimizer,p.SGDOptimizer,r.AdadeltaOptimizer,i.AdagradOptimizer,a.RMSPropOptimizer,t.AdamaxOptimizer,e.AdamOptimizer;const s={sgd:o.OptimizerConstructors.sgd,momentum:o.OptimizerConstructors.momentum,adadelta:o.OptimizerConstructors.adadelta,adagrad:o.OptimizerConstructors.adagrad,rmsprop:o.OptimizerConstructors.rmsprop,adamax:o.OptimizerConstructors.adamax,adam:o.OptimizerConstructors.adam};exports.train=s;
},{"./optimizers/adadelta_optimizer":"htPX","./optimizers/adagrad_optimizer":"ZNS9","./optimizers/adam_optimizer":"xITJ","./optimizers/adamax_optimizer":"jnml","./optimizers/momentum_optimizer":"uuAC","./optimizers/optimizer_constructors":"VvpK","./optimizers/rmsprop_optimizer":"tdtX","./optimizers/sgd_optimizer":"V404"}],"BUTu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsConsistent=n,exports.computeOutShape=o;var e=r(require("../util"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}function n(t,r){const n=t[0].length;t.forEach((t,r)=>{e.assert(t.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same `+`as the rank of the rest (${n})`)}),e.assert(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const o=t[0];t.forEach((t,a)=>{for(let s=0;s<n;s++)e.assert(s===r||t[s]===o[s],()=>`Error in concat${n}D: Shape of tensors[${a}] (${t}) `+`does not match the shape of the rest (${o}) `+`along the non-concatenated axis ${a}.`)})}function o(e,t){const r=e[0].slice();for(let n=1;n<e.length;n++)r[t]+=e[n][t];return r}
},{"../util":"uQV1"}],"OoVF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PARALLELIZE_THRESHOLD=void 0,exports.computeOptimalWindowSize=r;var e=require("../util");const t=30;function r(r){return r<=t?r:(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)))}exports.PARALLELIZE_THRESHOLD=t;
},{"../util":"uQV1"}],"LVEr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkEinsumDimSizes=u,exports.decodeEinsumEquation=s,exports.getEinsumComputePath=l,exports.getEinsumPermutation=i,exports.isIdentityPermutation=p;var t=require("../util_base");const e="->",n=/->/g,o=",",r="...";function s(s,i){const u=((s=s.replace(/\s/g,"")).length-s.replace(n,"").length)/e.length;if(u<1)throw new Error("Equations without an arrow are not supported.");if(u>1)throw new Error(`Equation must contain exactly one arrow ("${e}").`);const[l,p]=s.split(e);(0,t.assert)(-1===l.indexOf(r),()=>`The ellipsis notation ("${r}") is not supported yet.`);const h=l.split(o),c=h.length;if(i!==c)throw new Error(`Expected ${c} input tensors, received ${i}`);if(c>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const f=[];for(let t=0;t<p.length;++t){const e=p[t];if(!h.some(t=>-1!==t.indexOf(e)))throw new Error(`Output subscripts contain the label ${e} `+"not present in the input subscripts.");-1===f.indexOf(e)&&f.push(e)}for(let t=0;t<l.length;++t){const e=l[t];-1===f.indexOf(e)&&e!==o&&f.push(e)}const a=new Array(h.length);for(let t=0;t<c;++t){if(new Set(h[t].split("")).size!==h[t].length)throw new Error(`Found duplicate axes in input component ${h[t]}. `+"Support for duplicate axes in input is not implemented yet.");a[t]=[];for(let e=0;e<h[t].length;++e)a[t].push(f.indexOf(h[t][e]))}const d=f.length,g=[];for(let t=p.length;t<d;++t)g.push(t);return{allDims:f,summedDims:g,idDims:a}}function i(t,e){let n=new Array(t);n.fill(-1);for(let r=0;r<e.length;++r)n[e[r]]=r;const o=[];for(let r=0;r<t;++r)-1===n[r]&&o.push(r);return{permutationIndices:n=n.filter(t=>-1!==t),expandDims:o}}function u(e,n,o){const r=new Array(e);for(let s=0;s<o.length;++s){const e=o[s].shape;for(let o=0;o<n[s].length;++o)void 0===r[n[s][o]]?r[n[s][o]]=e[o]:(0,t.assert)(r[n[s][o]]===e[o],()=>`Expected dimension ${r[n[s][o]]} at axis ${o} `+`of input shaped ${JSON.stringify(e)}, `+`but got dimension ${e[o]}`)}}function l(t,e){const n=t,o=[];let r=0;0===t.length&&n.push(-1),r=t.length+1;for(let i=0;i<r;++i)o.push([]);const s=[];for(let i=0;i<n.length;++i){const t=h(e,n[i]);for(const e of t)-1===s.indexOf(e)&&(o[i].push(e),s.push(e))}return{path:n,steps:o}}function p(t){return t.every((t,e)=>t===e)}function h(t,e){const n=[];for(let o=0;o<t.length;++o)0!==t[o].length&&-1===t[o].indexOf(e)&&-1!==e||n.push(o);return n}
},{"../util_base":"cppa"}],"NWqv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareSplitSize=s;var e=require("../util");function s(s,t,r=0){let i=[];if("number"==typeof t)(0,e.assert)(s.shape[r]%t==0,()=>"Number of splits must evenly divide the axis."),i=new Array(t).fill(s.shape[r]/t);else{const a=t.reduce((e,s)=>(-1===s&&(e+=1),e),0);(0,e.assert)(a<=1,()=>"There should be only one negative value in split array.");const n=t.indexOf(-1);if(-1!==n){const e=t.reduce((e,s)=>s>0?e+s:e);t[n]=s.shape[r]-e}(0,e.assert)(s.shape[r]===t.reduce((e,s)=>e+s),()=>"The sum of sizes must match the size of the axis dimension."),i=t}return i}
},{"../util":"uQV1"}],"kxdZ":[function(require,module,exports) {
"use strict";function e(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function s(e,s){return`indices(${e}, 0) is invalid: ${s} < 0`}function i(e,s,i){return`indices(${e}, 0) is invalid: ${s} >= ${i}`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSparseFillEmptyRowsIndicesDenseShapeMismatch=e,exports.getSparseFillEmptyRowsNegativeIndexErrorMessage=s,exports.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage=i;
},{}],"oFlX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage=r,exports.getSparseReshapeInputOutputMismatchErrorMessage=u,exports.getSparseReshapeInputOutputMultipleErrorMessage=p,exports.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage=t,exports.getSparseReshapeNegativeOutputDimErrorMessage=s;var e=require("../../util");function t(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function s(e,t){return`size ${e} must be non-negative, not ${t}`}function r(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function p(t,s){return`Input to reshape is a SparseTensor with ${(0,e.sizeFromShape)(t)}\n  dense values, but the requested shape requires a multiple of ${(0,e.sizeFromShape)(s)}. inputShape=${t} outputShape= ${s}`}function u(t,s){return`Input to reshape is a tensor with ${(0,e.sizeFromShape)(t)} dense values, but the requested shape has ${(0,e.sizeFromShape)(s)}. inputShape=${t} outputShape=${s}`}
},{"../../util":"uQV1"}],"Tp60":[function(require,module,exports) {
"use strict";function e(){return"segment ids must be >= 0"}function t(){return"segment ids are not increasing"}function n(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function r(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSparseSegmentReductionIndicesOutOfRangeErrorMessage=r,exports.getSparseSegmentReductionNegativeSegmentIdsErrorMessage=e,exports.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage=t,exports.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage=n;
},{}],"soSM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.collectGatherOpShapeInfo=o,exports.computeOutShape=s,exports.segOpComputeOptimalWindowSize=r;var e=require("../util"),t=require("./reduce_util");function r(r,s){let o,h=!1;for(r<=t.PARALLELIZE_THRESHOLD?(o=r,h=!0):o=(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)));!h;)o>s||o===r?h=!0:o=(0,e.nearestDivisor)(r,o+1);return o}function s(e,t,r){const s=[],o=e.length;for(let h=0;h<o;h++)h!==t?s.push(e[h]):s.push(r);return s}function o(e,t,r,s){const o=t.shape.length,h=e.shape.length;if(0!==s&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>h)throw new Error(`batchDims (${s}) must be less than rank(x) (\n    ${h}).`);if(r<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${r}).`);for(let l=0;l<s;++l)if(e.shape[l]!==t.shape[l])throw new Error(`x.shape[${l}]: ${e.shape[l]} should be equal to indices.shape[${l}]: ${t.shape[l]}.`);const a=e.shape[r],p=[];let i=1,u=1,n=1;for(let l=0;l<s;++l)p.push(e.shape[l]),i*=e.shape[l];for(let l=s;l<r;l++)p.push(e.shape[l]),u*=e.shape[l];for(let l=s;l<o;l++)p.push(t.shape[l]);for(let l=r+1;l<h;l++)p.push(e.shape[l]),n*=e.shape[l];return{batchSize:i,sliceSize:n,outerSize:u,dimSize:a,outputShape:p}}
},{"../util":"uQV1","./reduce_util":"OoVF"}],"k4vL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={fromUint8ToStringArray:!0,fromStringArrayToUint8:!0,slice_util:!0,upcastType:!0,segment_util:!0};exports.fromStringArrayToUint8=M,exports.fromUint8ToStringArray=k,exports.slice_util=exports.segment_util=void 0,Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return i.upcastType}});var t=require("../util"),r=require("../ops/axis_util");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var o=require("../ops/broadcast_util");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===o[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))});var n=require("../ops/concat_util");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===n[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))});var u=require("../ops/conv_util");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===u[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return u[t]}}))});var p=require("../ops/fused_util");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===p[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return p[t]}}))});var s=require("../ops/reduce_util");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===s[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return s[t]}}))});var c=w(require("../ops/slice_util"));exports.slice_util=c;var i=require("../types"),a=require("../ops/rotate_util");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===a[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var l=require("../ops/array_ops_util");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===l[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return l[t]}}))});var f=require("../ops/gather_nd_util");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===f[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return f[t]}}))});var y=require("../ops/scatter_nd_util");Object.keys(y).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===y[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return y[t]}}))});var b=require("../ops/selu_util");Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===b[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))});var O=require("../ops/erf_util");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===O[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return O[t]}}))});var d=require("../log");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===d[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return d[t]}}))});var _=require("../backends/complex_util");Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===_[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return _[t]}}))});var x=require("../backends/einsum_util");Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===x[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return x[t]}}))});var j=require("../ops/split_util");Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===j[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return j[t]}}))});var P=require("../ops/sparse/sparse_fill_empty_rows_util");Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===P[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return P[t]}}))});var h=require("../ops/sparse/sparse_reshape_util");Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===h[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return h[t]}}))});var g=require("../ops/sparse/sparse_segment_reduction_util");Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===g[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return g[t]}}))});var m=w(require("../ops/segment_util"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var p=n?Object.getOwnPropertyDescriptor(e,u):null;p&&(p.get||p.set)?Object.defineProperty(o,u,p):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}function k(e){try{return e.map(e=>(0,t.decodeString)(e))}catch(r){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${r}`)}}function M(e){return e.map(e=>(0,t.encodeString)(e))}exports.segment_util=m;
},{"../util":"uQV1","../ops/axis_util":"KXhP","../ops/broadcast_util":"Xh9J","../ops/concat_util":"BUTu","../ops/conv_util":"tcmi","../ops/fused_util":"hW7e","../ops/reduce_util":"OoVF","../ops/slice_util":"zBsU","../types":"Grh1","../ops/rotate_util":"eAkN","../ops/array_ops_util":"bsd6","../ops/gather_nd_util":"PsDq","../ops/scatter_nd_util":"nGOS","../ops/selu_util":"ssng","../ops/erf_util":"iVXL","../log":"O507","../backends/complex_util":"F59n","../backends/einsum_util":"LVEr","../ops/split_util":"NWqv","../ops/sparse/sparse_fill_empty_rows_util":"kxdZ","../ops/sparse/sparse_reshape_util":"oFlX","../ops/sparse/sparse_segment_reduction_util":"Tp60","../ops/segment_util":"soSM"}],"OznL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"nonMaxSuppressionV3Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV3Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV4Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV4Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV5Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV5Impl}}),Object.defineProperty(exports,"whereImpl",{enumerable:!0,get:function(){return r.whereImpl}});var e=require("./non_max_suppression_impl"),r=require("./where_impl");
},{"./non_max_suppression_impl":"VgKC","./where_impl":"tI3d"}],"t8q5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={io:!0,math:!0,broadcast_util:!0,browser:!0,gather_util:!0,scatter_util:!0,slice_util:!0,serialization:!0,tensor_util:!0,test_util:!0,util:!0,version_core:!0,AdadeltaOptimizer:!0,AdagradOptimizer:!0,AdamOptimizer:!0,AdamaxOptimizer:!0,MomentumOptimizer:!0,Optimizer:!0,OptimizerConstructors:!0,RMSPropOptimizer:!0,SGDOptimizer:!0,Tensor:!0,TensorBuffer:!0,Variable:!0,Rank:!0,sumOutType:!0,upcastType:!0,Reduction:!0,customGrad:!0,grad:!0,grads:!0,valueAndGrad:!0,valueAndGrads:!0,variableGrads:!0,Environment:!0,env:!0,ENV:!0,nextFrame:!0,backend_util:!0,device_util:!0,kernel_impls:!0,KernelBackend:!0,DataStorage:!0};Object.defineProperty(exports,"AdadeltaOptimizer",{enumerable:!0,get:function(){return m.AdadeltaOptimizer}}),Object.defineProperty(exports,"AdagradOptimizer",{enumerable:!0,get:function(){return b.AdagradOptimizer}}),Object.defineProperty(exports,"AdamOptimizer",{enumerable:!0,get:function(){return f.AdamOptimizer}}),Object.defineProperty(exports,"AdamaxOptimizer",{enumerable:!0,get:function(){return O.AdamaxOptimizer}}),Object.defineProperty(exports,"DataStorage",{enumerable:!0,get:function(){return S.DataStorage}}),Object.defineProperty(exports,"ENV",{enumerable:!0,get:function(){return w.ENV}}),Object.defineProperty(exports,"Environment",{enumerable:!0,get:function(){return w.Environment}}),Object.defineProperty(exports,"KernelBackend",{enumerable:!0,get:function(){return S.KernelBackend}}),Object.defineProperty(exports,"MomentumOptimizer",{enumerable:!0,get:function(){return x.MomentumOptimizer}}),Object.defineProperty(exports,"Optimizer",{enumerable:!0,get:function(){return y.Optimizer}}),Object.defineProperty(exports,"OptimizerConstructors",{enumerable:!0,get:function(){return _.OptimizerConstructors}}),Object.defineProperty(exports,"RMSPropOptimizer",{enumerable:!0,get:function(){return g.RMSPropOptimizer}}),Object.defineProperty(exports,"Rank",{enumerable:!0,get:function(){return z.Rank}}),Object.defineProperty(exports,"Reduction",{enumerable:!0,get:function(){return q.Reduction}}),Object.defineProperty(exports,"SGDOptimizer",{enumerable:!0,get:function(){return v.SGDOptimizer}}),Object.defineProperty(exports,"Tensor",{enumerable:!0,get:function(){return j.Tensor}}),Object.defineProperty(exports,"TensorBuffer",{enumerable:!0,get:function(){return j.TensorBuffer}}),Object.defineProperty(exports,"Variable",{enumerable:!0,get:function(){return j.Variable}}),exports.browser=exports.broadcast_util=exports.backend_util=void 0,Object.defineProperty(exports,"customGrad",{enumerable:!0,get:function(){return M.customGrad}}),exports.device_util=void 0,Object.defineProperty(exports,"env",{enumerable:!0,get:function(){return w.env}}),exports.gather_util=void 0,Object.defineProperty(exports,"grad",{enumerable:!0,get:function(){return M.grad}}),Object.defineProperty(exports,"grads",{enumerable:!0,get:function(){return M.grads}}),exports.math=exports.kernel_impls=exports.io=void 0,Object.defineProperty(exports,"nextFrame",{enumerable:!0,get:function(){return G.nextFrame}}),exports.slice_util=exports.serialization=exports.scatter_util=void 0,Object.defineProperty(exports,"sumOutType",{enumerable:!0,get:function(){return z.sumOutType}}),exports.test_util=exports.tensor_util=void 0,Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return z.upcastType}}),exports.util=void 0,Object.defineProperty(exports,"valueAndGrad",{enumerable:!0,get:function(){return M.valueAndGrad}}),Object.defineProperty(exports,"valueAndGrads",{enumerable:!0,get:function(){return M.valueAndGrads}}),Object.defineProperty(exports,"variableGrads",{enumerable:!0,get:function(){return M.variableGrads}}),Object.defineProperty(exports,"version_core",{enumerable:!0,get:function(){return d.version}});var r=V(require("./io/io"));exports.io=r;var t=V(require("./math"));exports.math=t;var i=V(require("./ops/broadcast_util"));exports.broadcast_util=i;var n=V(require("./ops/browser"));exports.browser=n;var o=V(require("./ops/gather_nd_util"));exports.gather_util=o;var u=V(require("./ops/scatter_nd_util"));exports.scatter_util=u;var a=V(require("./ops/slice_util"));exports.slice_util=a;var p=V(require("./serialization"));exports.serialization=p;var s=V(require("./tensor_util"));exports.tensor_util=s;var c=V(require("./test_util"));exports.test_util=c;var l=V(require("./util"));exports.util=l;var d=require("./version"),m=require("./optimizers/adadelta_optimizer"),b=require("./optimizers/adagrad_optimizer"),f=require("./optimizers/adam_optimizer"),O=require("./optimizers/adamax_optimizer"),x=require("./optimizers/momentum_optimizer"),y=require("./optimizers/optimizer"),_=require("./optimizers/optimizer_constructors"),g=require("./optimizers/rmsprop_optimizer"),v=require("./optimizers/sgd_optimizer"),j=require("./tensor"),z=require("./types"),P=require("./ops/ops");Object.keys(P).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===P[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return P[r]}}))});var q=require("./ops/loss_ops_utils"),k=require("./train");Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===k[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return k[r]}}))});var h=require("./globals");Object.keys(h).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===h[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return h[r]}}))});var A=require("./kernel_registry");Object.keys(A).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===A[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return A[r]}}))});var M=require("./gradients"),w=require("./environment"),G=require("./browser_util"),T=V(require("./backends/backend_util"));exports.backend_util=T;var E=V(require("./device_util"));exports.device_util=E;var R=V(require("./backends/kernel_impls"));exports.kernel_impls=R;var S=require("./backends/backend"),D=require("./kernel_names");function B(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(B=function(e){return e?t:r})(e)}function V(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=B(r);if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(i,o,u):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}Object.keys(D).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===D[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return D[r]}}))});
},{"./io/io":"dstj","./math":"PL5y","./ops/broadcast_util":"Xh9J","./ops/browser":"iY7q","./ops/gather_nd_util":"PsDq","./ops/scatter_nd_util":"nGOS","./ops/slice_util":"zBsU","./serialization":"bXJl","./tensor_util":"Wwfk","./test_util":"ZMg1","./util":"uQV1","./version":"tO0n","./optimizers/adadelta_optimizer":"htPX","./optimizers/adagrad_optimizer":"ZNS9","./optimizers/adam_optimizer":"xITJ","./optimizers/adamax_optimizer":"jnml","./optimizers/momentum_optimizer":"uuAC","./optimizers/optimizer":"bdv0","./optimizers/optimizer_constructors":"VvpK","./optimizers/rmsprop_optimizer":"tdtX","./optimizers/sgd_optimizer":"V404","./tensor":"olbE","./types":"Grh1","./ops/ops":"OgAK","./ops/loss_ops_utils":"LIoB","./train":"zMFJ","./globals":"yD8k","./kernel_registry":"q1HN","./gradients":"lNg9","./environment":"uGoP","./browser_util":"mxOd","./backends/backend_util":"k4vL","./device_util":"GUPw","./backends/kernel_impls":"OznL","./backends/backend":"cAqc","./kernel_names":"E7d7"}],"nPFy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./base_side_effects");var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"./base_side_effects":"eFiU","./base":"t8q5"}],"QJPj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),t=require("../ops/step");const o={kernelName:e.Abs,inputsToSave:["x"],gradFunc:(e,o)=>{const[a]=o;return{x:()=>(0,s.mul)(e,(0,t.step)((0,r.cast)(a,"float32"),-1))}}};exports.absGradConfig=o;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/mul":"Nt3M","../ops/step":"jRSP"}],"t1zU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),o=require("../ops/neg"),a=require("../ops/scalar"),u=require("../ops/sqrt"),t=require("../ops/square"),i=require("../ops/sub");const n={kernelName:e.Acos,inputsToSave:["x"],gradFunc:(e,n)=>{const[c]=n;return{x:()=>{const n=(0,t.square)((0,r.cast)(c,"float32")),p=(0,u.sqrt)((0,i.sub)((0,a.scalar)(1),n));return(0,o.neg)((0,s.div)(e,p))}}}};exports.acosGradConfig=n;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/div":"M4To","../ops/neg":"OZKu","../ops/scalar":"oY2j","../ops/sqrt":"y3Gt","../ops/square":"wngC","../ops/sub":"w3Uc"}],"gOid":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),o=require("../ops/sqrt"),t=require("../ops/square"),u=require("../ops/sub");const a={kernelName:e.Acosh,inputsToSave:["x"],gradFunc:(e,a)=>{const[i]=a;return{x:()=>{const a=(0,o.sqrt)((0,u.sub)((0,t.square)((0,r.cast)(i,"float32")),1));return(0,s.div)(e,a)}}}};exports.acoshGradConfig=a;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/div":"M4To","../ops/sqrt":"y3Gt","../ops/square":"wngC","../ops/sub":"w3Uc"}],"slrq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/broadcast_util")),t=require("../ops/reshape"),n=require("../ops/sum");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}const s={kernelName:e.Add,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,s]=a,u=r.assertAndGetBroadcastShape(o.shape,s.shape);return{a:()=>{let a=e;const s=r.getReductionAxes(o.shape,u);return s.length>0&&(a=(0,n.sum)(a,s)),(0,t.reshape)(a,o.shape)},b:()=>{let a=e;const o=r.getReductionAxes(s.shape,u);return o.length>0&&(a=(0,n.sum)(a,o)),(0,t.reshape)(a,s.shape)}}}};exports.addGradConfig=s;
},{"../kernel_names":"E7d7","../ops/broadcast_util":"Xh9J","../ops/reshape":"IoLG","../ops/sum":"WgrX"}],"doQd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addNGradConfig=void 0;var e=require("../kernel_names");const r={kernelName:e.AddN,saveAllInputs:!0,gradFunc:(e,r)=>{const d={};return r.forEach((r,n)=>{d[n]=(()=>e.clone())}),d}};exports.addNGradConfig=r;
},{"../kernel_names":"E7d7"}],"AyTt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.ArgMax,inputsToSave:["x"],gradFunc:(e,o)=>{const[a]=o;return{x:()=>(0,r.zerosLike)(a)}}};exports.argMaxGradConfig=o;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"rHnd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const n={kernelName:e.ArgMin,inputsToSave:["x"],gradFunc:(e,n)=>{const[o]=n;return{x:()=>(0,r.zerosLike)(o)}}};exports.argMinGradConfig=n;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"yQRL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),a=require("../ops/scalar"),i=require("../ops/sqrt"),o=require("../ops/square"),u=require("../ops/sub");const t={kernelName:e.Asin,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,s.div)(e,(0,i.sqrt)((0,u.sub)((0,a.scalar)(1),(0,o.square)((0,r.cast)(n,"float32")))))}}};exports.asinGradConfig=t;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/div":"M4To","../ops/scalar":"oY2j","../ops/sqrt":"y3Gt","../ops/square":"wngC","../ops/sub":"w3Uc"}],"VrrX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/cast"),a=require("../ops/div"),o=require("../ops/scalar"),i=require("../ops/sqrt"),t=require("../ops/square");const n={kernelName:e.Asinh,inputsToSave:["x"],gradFunc:(e,n)=>{const[u]=n;return{x:()=>{const n=(0,i.sqrt)((0,r.add)((0,o.scalar)(1),(0,t.square)((0,s.cast)(u,"float32"))));return(0,a.div)(e,n)}}}};exports.asinhGradConfig=n;
},{"../kernel_names":"E7d7","../ops/add":"RKQn","../ops/cast":"OenY","../ops/div":"M4To","../ops/scalar":"oY2j","../ops/sqrt":"y3Gt","../ops/square":"wngC"}],"dfYp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/broadcast_util"),a=require("../ops/div"),t=require("../ops/mul"),u=require("../ops/neg"),n=require("../ops/reshape"),o=require("../ops/square"),p=require("../ops/sum");const i={kernelName:e.Atan2,inputsToSave:["a","b"],gradFunc:(e,i)=>{const[d,q]=i,c=(0,s.assertAndGetBroadcastShape)(d.shape,q.shape);return{a:()=>{const u=(0,r.add)((0,o.square)(d),(0,o.square)(q));let i=(0,t.mul)(e,(0,a.div)(q,u));const h=(0,s.getReductionAxes)(d.shape,c);return h.length>0&&(i=(0,p.sum)(i,h)),(0,n.reshape)(i,d.shape)},b:()=>{const i=(0,r.add)((0,o.square)(d),(0,o.square)(q));let h=(0,u.neg)((0,t.mul)(e,(0,a.div)(d,i)));const l=(0,s.getReductionAxes)(q.shape,c);return l.length>0&&(h=(0,p.sum)(h,l)),(0,n.reshape)(h,q.shape)}}}};exports.atan2GradConfig=i;
},{"../kernel_names":"E7d7","../ops/add":"RKQn","../ops/broadcast_util":"Xh9J","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/neg":"OZKu","../ops/reshape":"IoLG","../ops/square":"wngC","../ops/sum":"WgrX"}],"WSUa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),a=require("../ops/cast"),s=require("../ops/div"),t=require("../ops/square");const o={kernelName:e.Atan,inputsToSave:["x"],gradFunc:(e,o)=>{const[n]=o;return{x:()=>(0,s.div)(e,(0,r.add)((0,t.square)((0,a.cast)(n,"float32")),1))}}};exports.atanGradConfig=o;
},{"../kernel_names":"E7d7","../ops/add":"RKQn","../ops/cast":"OenY","../ops/div":"M4To","../ops/square":"wngC"}],"FVBN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),a=require("../ops/square"),o=require("../ops/sub"),t=require("../ops/scalar");const u={kernelName:e.Atanh,inputsToSave:["x"],gradFunc:(e,u)=>{const[i]=u;return{x:()=>(0,s.div)(e,(0,o.sub)((0,t.scalar)(1),(0,a.square)((0,r.cast)(i,"float32"))))}}};exports.atanhGradConfig=u;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/div":"M4To","../ops/square":"wngC","../ops/sub":"w3Uc","../ops/scalar":"oY2j"}],"ip3K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3dGrad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),a=require("./conv_util"),o=require("./operation"),s=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function p(o,u,i,p,d,l){const c=(0,t.convertToTensor)(o,"dy","avgPool3dGrad"),f=(0,t.convertToTensor)(u,"input","avgPool3dGrad");let v=c,h=f,g=!1;4===f.rank&&(g=!0,v=(0,s.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),h=(0,s.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),n.assert(5===v.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+`${v.rank}.`),n.assert(5===h.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+`${h.rank}.`),(0,a.checkPadOnDimRoundingMode)("avgPool3dGrad",d,l);const P={dy:v,input:h},k={filterSize:i,strides:p,pad:d,dimRoundingMode:l},y=e.ENGINE.runKernel(r.AvgPool3DGrad,P,k);return g?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const d=(0,o.op)({avgPool3dGrad_:p});exports.avgPool3dGrad=d;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"QoPl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/avg_pool_3d_grad");const r={kernelName:e.AvgPool3D,inputsToSave:["x"],gradFunc:(e,r,a)=>{const[d]=r,{filterSize:i,strides:n,pad:s,dimRoundingMode:t}=a;return{x:()=>(0,o.avgPool3dGrad)(e,d,i,n,s,t)}}};exports.avgPool3DGradConfig=r;
},{"../kernel_names":"E7d7","../ops/avg_pool_3d_grad":"ip3K"}],"YUNg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGrad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),a=require("./operation"),o=require("./reshape");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function p(a,s,u,p,i){const l=(0,t.convertToTensor)(a,"dy","avgPoolGrad"),d=(0,t.convertToTensor)(s,"input","avgPoolGrad");n.assert(d.rank===l.rank,()=>`Rank of input (${d.rank}) does not match rank of dy (${l.rank})`);let f=d,c=l,k=!1;3===d.rank&&(k=!0,f=(0,o.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),c=(0,o.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),n.assert(4===c.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+`${c.rank}.`),n.assert(4===f.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+`${f.rank}.`);const v={dy:c,input:f},h={filterSize:u,strides:p,pad:i},g=e.ENGINE.runKernel(r.AvgPoolGrad,v,h);return k?(0,o.reshape)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const i=(0,a.op)({avgPoolGrad_:p});exports.avgPoolGrad=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./operation":"pYCl","./reshape":"IoLG"}],"Bp8q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/avg_pool_grad");const r={kernelName:e.AvgPool,inputsToSave:["x"],gradFunc:(e,r,a)=>{const[s]=r,{filterSize:t,strides:i,pad:n}=a;return{x:()=>(0,o.avgPoolGrad)(e,s,t,i,n)}}};exports.avgPoolGradConfig=r;
},{"../kernel_names":"E7d7","../ops/avg_pool_grad":"YUNg"}],"K7XD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMulGradConfig=void 0;var a=require("../kernel_names"),t=require("../ops/mat_mul");const e={kernelName:a.BatchMatMul,inputsToSave:["a","b"],gradFunc:(a,e,r)=>{const[u,l]=e,{transposeA:s,transposeB:M}=r;return s||M?!s&&M?{a:()=>(0,t.matMul)(a,l,!1,!1),b:()=>(0,t.matMul)(a,u,!0,!1)}:s&&!M?{a:()=>(0,t.matMul)(l,a,!1,!0),b:()=>(0,t.matMul)(u,a,!1,!1)}:{a:()=>(0,t.matMul)(l,a,!0,!0),b:()=>(0,t.matMul)(a,u,!0,!0)}:{a:()=>(0,t.matMul)(a,l,!1,!0),b:()=>(0,t.matMul)(u,a,!0,!1)}}};exports.batchMatMulGradConfig=e;
},{"../kernel_names":"E7d7","../ops/mat_mul":"cPiM"}],"mO6X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceNDGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/space_to_batch_nd");const a={kernelName:e.BatchToSpaceND,gradFunc:(e,a,o)=>{const{blockShape:c,crops:t}=o;return{x:()=>(0,r.spaceToBatchND)(e,c,t)}}};exports.batchToSpaceNDGradConfig=a;
},{"../kernel_names":"E7d7","../ops/space_to_batch_nd":"pe9T"}],"vCUL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastToGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/sum");const o={kernelName:e.BroadcastTo,gradFunc:(e,o,t)=>{const a=t,s=a.inputShape,n=a.shape,c=Array.from(n);for(let r=s.length-1;r>=0;r--)if(s[r]===n[r])c[r]=1;else if(1!==s[r])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${n}].`);const d=[];for(let r=0;r<c.length;r++)c[r]>1&&d.push(r);return{x:()=>(0,r.sum)(e,d,!0)}}};exports.broadcastToGradConfig=o;
},{"../kernel_names":"E7d7","../ops/sum":"WgrX"}],"a4OS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.castGradConfig=void 0;var e=require("../kernel_names");const r={kernelName:e.Cast,gradFunc:e=>({x:()=>e.clone()})};exports.castGradConfig=r;
},{"../kernel_names":"E7d7"}],"SqIA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const i={kernelName:e.Ceil,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.ceilGradConfig=i;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"KNy2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValueGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/greater_equal"),l=require("../ops/less_equal"),a=require("../ops/logical_and"),i=require("../ops/where"),s=require("../ops/zeros_like");const u={kernelName:e.ClipByValue,inputsToSave:["x"],gradFunc:(e,u,o)=>{const[p]=u,{clipValueMin:n,clipValueMax:t}=o;return{x:()=>(0,i.where)((0,a.logicalAnd)((0,r.greaterEqual)(p,n),(0,l.lessEqual)(p,t)),e,(0,s.zerosLike)(e))}}};exports.clipByValueGradConfig=u;
},{"../kernel_names":"E7d7","../ops/greater_equal":"nMa8","../ops/less_equal":"BA1Q","../ops/logical_and":"Uxvi","../ops/where":"ALar","../ops/zeros_like":"HQup"}],"iy2i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexAbsGradConfig=void 0;var e=require("../kernel_names"),r=require("./Abs_grad");const o={kernelName:e.ComplexAbs,inputsToSave:["x"],gradFunc:r.absGradConfig.gradFunc};exports.complexAbsGradConfig=o;
},{"../kernel_names":"E7d7","./Abs_grad":"QJPj"}],"LngV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/split"),a=require("../util");const s={kernelName:e.Concat,saveAllInputs:!0,gradFunc:(e,s,t)=>{const n=s.map(e=>e.shape),{axis:o}=t,p=(0,a.parseAxisParam)(o,s[0].shape)[0],i=n.map(e=>e[p]);return(0,r.split)(e,i,p).map(e=>()=>e)}};exports.concatGradConfig=s;
},{"../kernel_names":"E7d7","../ops/split":"zRhz","../util":"uQV1"}],"ZFsf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv2d_backprop_filter"),t=require("../ops/conv2d_backprop_input"),n=i(require("../ops/conv_util")),o=i(require("../util"));function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var p=o?Object.getOwnPropertyDescriptor(e,i):null;p&&(p.get||p.set)?Object.defineProperty(n,i,p):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}const p={kernelName:e.Conv2D,inputsToSave:["x","filter"],gradFunc:(e,a,i)=>{const[p,u]=a,{dilations:s,strides:c,pad:l,dataFormat:f}=i;return o.assert(n.tupleValuesAreOne(s),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${s}'`),{x:()=>(0,t.conv2DBackpropInput)(p.shape,e,u,c,l,f),filter:()=>(0,r.conv2DBackpropFilter)(p,e,u.shape,c,l,f)}}};exports.conv2DGradConfig=p;
},{"../kernel_names":"E7d7","../ops/conv2d_backprop_filter":"jjXS","../ops/conv2d_backprop_input":"mHXf","../ops/conv_util":"tcmi","../util":"uQV1"}],"ocam":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInputGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv2d"),o=require("../ops/conv2d_backprop_filter");const n={kernelName:e.Conv2DBackpropInput,inputsToSave:["dy","filter"],gradFunc:(e,n,p)=>{const[t,a]=n,{strides:d,pad:c,dataFormat:i,dimRoundingMode:s}=p;return{dy:()=>(0,r.conv2d)(e,a,d,c,i,1,s),filter:()=>(0,o.conv2DBackpropFilter)(e,t,a.shape,d,c,i,s)}}};exports.conv2DBackpropInputGradConfig=n;
},{"../kernel_names":"E7d7","../ops/conv2d":"rCpA","../ops/conv2d_backprop_filter":"jjXS"}],"L8ra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=o(require("../util")),n=require("./operation"),a=require("./reshape");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function s(n,p,o,s,i){let u=n;4===n.rank&&(u=(0,a.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let l=p;4===l.rank&&(l=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),t.assert(5===u.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+`${u.shape}.`),t.assert(5===l.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+`${l.shape}.`),t.assert(5===o.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+`${o}.`),t.assert(u.shape[4]===o[3],()=>`Error in conv3dDerFilter: depth of input ${u.shape[4]}) must `+`match input depth in filter (${o[3]}.`),t.assert(l.shape[4]===o[4],()=>`Error in conv3dDerFilter: depth of dy (${l.shape[4]}) must `+`match output depth for filter (${o[4]}).`);const c={x:u,dy:l},h={strides:s,pad:i,filterShape:o};return e.ENGINE.runKernel(r.Conv3DBackpropFilterV2,c,h)}const i=(0,n.op)({conv3DBackpropFilter_:s});exports.conv3DBackpropFilter=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../util":"uQV1","./operation":"pYCl","./reshape":"IoLG"}],"XvyX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv3d_backprop_filter"),t=require("../ops/conv3d_backprop_input"),n=require("../ops/conv_util"),o=a(require("../util"));function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var p=o?Object.getOwnPropertyDescriptor(e,a):null;p&&(p.get||p.set)?Object.defineProperty(n,a,p):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}const p={kernelName:e.Conv3D,inputsToSave:["x","filter"],gradFunc:(e,i,a)=>{const{dilations:p,strides:u,pad:s}=a;o.assert((0,n.tupleValuesAreOne)(p),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+`not yet supported in gradients. Got dilations '${p}'`);const[c,l]=i;return{x:()=>(0,t.conv3DBackpropInput)(c.shape,e,l,u,s),filter:()=>(0,r.conv3DBackpropFilter)(c,e,l.shape,u,s)}}};exports.conv3DGradConfig=p;
},{"../kernel_names":"E7d7","../ops/conv3d_backprop_filter":"L8ra","../ops/conv3d_backprop_input":"guKQ","../ops/conv_util":"tcmi","../util":"uQV1"}],"Zu5C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),o=require("../ops/neg"),n=require("../ops/sin");const t={kernelName:e.Cos,inputsToSave:["x"],gradFunc:(e,t)=>{const[i]=t;return{x:()=>(0,s.mul)((0,o.neg)((0,n.sin)((0,r.cast)(i,"float32"))),e)}}};exports.cosGradConfig=t;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/mul":"Nt3M","../ops/neg":"OZKu","../ops/sin":"UjHb"}],"VK2i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),o=require("../ops/sinh");const t={kernelName:e.Cosh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,s.mul)((0,o.sinh)((0,r.cast)(n,"float32")),e)}}};exports.coshGradConfig=t;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/mul":"Nt3M","../ops/sinh":"Etv0"}],"Jf0f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),s=require("../ops/cumsum"),u=require("../ops/transpose");const t={kernelName:e.Cumsum,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[o]=t,{axis:i,exclusive:a,reverse:m}=n;return{x:()=>{const t=(0,r.getAxesPermutation)([i],o.rank);let n=(0,s.cumsum)(e,i,a,!m);return null!=t&&(n=(0,u.transpose)(n,t)),n}}}};exports.cumsumGradConfig=t;
},{"../kernel_names":"E7d7","../ops/axis_util":"KXhP","../ops/cumsum":"BWsp","../ops/transpose":"gequ"}],"NjB0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeGradConfig=void 0;var e=require("../kernel_names"),t=a(require("../ops/conv_util")),r=require("../ops/depthwise_conv2d_native_backprop_filter"),n=require("../ops/depthwise_conv2d_native_backprop_input"),i=a(require("../util"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}const s={kernelName:e.DepthwiseConv2dNative,inputsToSave:["x","filter"],gradFunc:(e,o,a)=>{const{dilations:s,strides:d,pad:p,dimRoundingMode:u}=a,l=null==s?[1,1]:s;i.assert(t.tupleValuesAreOne(l),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+`'${l}'`);const[f,v]=o;return i.assert(4===f.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+`rank 4, but got rank ${f.rank}.`),i.assert(4===v.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+`rank 4, but got rank ${v.rank}.`),i.assert(f.shape[3]===v.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+`channels (${f.shape[3]}) must match the inChannels dimension `+`in filter ${v.shape[2]}.`),i.assert(t.eitherStridesOrDilationsAreOne(d,l),()=>"Error in gradient of depthwiseConv2d: Either strides or "+`dilations must be  1. Got strides ${d} and dilations `+`'${l}'.`),t.checkPadOnDimRoundingMode("depthwiseConv2d",p,u),{x:()=>(0,n.depthwiseConv2dNativeBackpropInput)(f.shape,e,v,d,p,l,u),filter:()=>(0,r.depthwiseConv2dNativeBackpropFilter)(f,e,v.shape,d,p,l,u)}}};exports.depthwiseConv2dNativeGradConfig=s;
},{"../kernel_names":"E7d7","../ops/conv_util":"tcmi","../ops/depthwise_conv2d_native_backprop_filter":"I8N1","../ops/depthwise_conv2d_native_backprop_input":"NtEK","../util":"uQV1"}],"JOjS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const i={kernelName:r.Dilation2D,inputsToSave:["x","filter"],gradFunc:(i,n,t)=>{const[o,l]=n,a={x:o,filter:l,dy:i},d={x:o,filter:l,dy:i};return{x:()=>e.ENGINE.runKernel(r.Dilation2DBackpropInput,a,t),filter:()=>e.ENGINE.runKernel(r.Dilation2DBackpropFilter,d,t)}}};exports.dilation2dGradConfig=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7"}],"v8EE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const n={kernelName:r.Elu,outputsToSave:[!0],gradFunc:(n,u)=>{const[o]=u,t={dy:n,y:o};return{x:()=>e.ENGINE.runKernel(r.EluGrad,t)}}};exports.eluGradConfig=n;
},{"../engine":"Wn3f","../kernel_names":"E7d7"}],"XQ3w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),s=require("../ops/mul"),u=require("../ops/neg"),o=require("../ops/square");const t={kernelName:e.Erf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=(0,s.mul)((0,r.exp)((0,u.neg)((0,o.square)(n))),2/Math.sqrt(Math.PI));return{x:()=>(0,s.mul)(e,a)}}};exports.erfGradConfig=t;
},{"../kernel_names":"E7d7","../ops/exp":"lPHG","../ops/mul":"Nt3M","../ops/neg":"OZKu","../ops/square":"wngC"}],"Y2fe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul");const o={kernelName:e.Exp,outputsToSave:[!0],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)(e,t)}}};exports.expGradConfig=o;
},{"../kernel_names":"E7d7","../ops/mul":"Nt3M"}],"t4wg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDimsGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/reshape");const s={kernelName:e.ExpandDims,inputsToSave:["input"],gradFunc:(e,s)=>{const[n]=s;return{input:()=>(0,r.reshape)(e,n.shape)}}};exports.expandDimsGradConfig=s;
},{"../kernel_names":"E7d7","../ops/reshape":"IoLG"}],"QB44":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),o=require("../ops/mul");const p={kernelName:e.Expm1,inputsToSave:["x"],gradFunc:(e,p)=>{const[s]=p;return{x:()=>(0,o.mul)(e,(0,r.exp)(s))}}};exports.expm1GradConfig=p;
},{"../kernel_names":"E7d7","../ops/exp":"lPHG","../ops/mul":"Nt3M"}],"eBSU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.Floor,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.floorGradConfig=o;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"Jmks":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/cast"),o=require("../ops/div"),t=require("../ops/mul"),a=require("../ops/neg"),u=require("../ops/reshape"),i=require("../ops/square"),n=require("../ops/sum");const p={kernelName:e.FloorDiv,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[c,l]=p,d=(0,r.assertAndGetBroadcastShape)(c.shape,l.shape);return{a:()=>{const t=(0,o.div)(e,(0,s.cast)(l,"float32")),a=(0,r.getReductionAxes)(c.shape,d);return a.length>0?(0,u.reshape)((0,n.sum)(t,a),c.shape):t},b:()=>{let p=(0,t.mul)(e,(0,s.cast)(c,"float32"));const h=(0,r.getReductionAxes)(l.shape,d);h.length>0&&(p=(0,u.reshape)((0,n.sum)(p,h),l.shape));const q=(0,i.square)(l);return(0,a.neg)((0,o.div)(p,(0,s.cast)(q,"float32")))}}}};exports.floorDivGradConfig=p;
},{"../kernel_names":"E7d7","../ops/broadcast_util":"Xh9J","../ops/cast":"OenY","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/neg":"OZKu","../ops/reshape":"IoLG","../ops/square":"wngC","../ops/sum":"WgrX"}],"Q2M0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedBatchNormGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/broadcast_util"),a=require("../ops/mul"),u=require("../ops/reshape"),l=require("../ops/rsqrt"),p=require("../ops/scalar"),t=require("../ops/sub"),n=require("../ops/sum"),o=require("../ops/tile");const m={kernelName:e.FusedBatchNorm,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,m,h)=>{const{varianceEpsilon:i}=h,[c,d,q,f]=m,k=null==f?(0,p.scalar)(1):f,v=(0,s.getReductionAxes)(d.shape,c.shape),x=[];if(1===d.rank){for(let e=0;e<c.shape.length-1;++e)x.push(c.shape[e]);x.push(1)}const g=(0,t.sub)(c,d),b=(0,a.mul)(e,k),N=(0,l.rsqrt)((0,r.add)(q,(0,p.scalar)(i))),_=(0,a.mul)((0,a.mul)((0,a.mul)(N,N),N),(0,p.scalar)(-.5));return{x:()=>1===d.rank?(0,u.reshape)((0,a.mul)((0,a.mul)(e,(0,o.tile)((0,u.reshape)(N,[1,1,1,d.shape[0]]),x)),k),c.shape):(0,u.reshape)((0,a.mul)((0,a.mul)(e,N),k),c.shape),mean:()=>{let e=(0,a.mul)((0,a.mul)(N,(0,p.scalar)(-1)),b);return 1===d.rank&&(e=(0,n.sum)(e,v)),(0,u.reshape)(e,d.shape)},variance:()=>{let e=(0,a.mul)((0,a.mul)(_,g),b);return 1===d.rank&&(e=(0,n.sum)(e,v)),(0,u.reshape)(e,d.shape)},scale:()=>{const r=(0,a.mul)(g,N);let s=(0,a.mul)(e,r);return 1===d.rank&&(s=(0,n.sum)(s,v)),(0,u.reshape)(s,d.shape)},offset:()=>{let r=e;return 1===d.rank&&(r=(0,n.sum)(r,v)),(0,u.reshape)(r,d.shape)}}}};exports.fusedBatchNormGradConfig=m;
},{"../kernel_names":"E7d7","../ops/add":"RKQn","../ops/broadcast_util":"Xh9J","../ops/mul":"Nt3M","../ops/reshape":"IoLG","../ops/rsqrt":"JxB0","../ops/scalar":"oY2j","../ops/sub":"w3Uc","../ops/sum":"WgrX","../ops/tile":"YKMi"}],"RY5b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),s=require("../ops/reshape"),t=require("../ops/transpose"),n=require("../ops/unsorted_segment_sum"),o=require("../util");const i={kernelName:e.GatherV2,inputsToSave:["x","indices"],gradFunc:(e,i,p)=>{const[l,c]=i,{axis:h}=p,g=(0,o.parseAxisParam)(h,l.shape)[0];return{x:()=>{const o=l.shape,i=c.size,p=o.slice(0,g),d=p.length,x=o.slice(h,o.length).slice(1),f=x.length,m=a(0,d),q=a(d+1,d+1+f),_=u([p,[i],x]),v=(0,s.reshape)(e,_),G=(0,s.reshape)(c,[i]),P=u([[d],m,q]),S=(0,t.transpose)(v,P);let k=(0,n.unsortedSegmentSum)(S,G,l.shape[g]);const A=(0,r.getUndoAxesPermutation)(P);return k=(0,t.transpose)(k,A)},indices:()=>c}}};function a(e,r){const s=[];for(let t=e;t<r;++t)s.push(t);return s}function u(e){const r=[];for(let s=0;s<e.length;++s)for(let t=0;t<e[s].length;++t)r.push(e[s][t]);return r}exports.gatherGradConfig=i;
},{"../kernel_names":"E7d7","../ops/axis_util":"KXhP","../ops/reshape":"IoLG","../ops/transpose":"gequ","../ops/unsorted_segment_sum":"gOKP","../util":"uQV1"}],"YImo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const a={kernelName:e.GreaterEqual,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,s]=a;return{a:()=>(0,r.zerosLike)(o),b:()=>(0,r.zerosLike)(s)}}};exports.greaterEqualGradConfig=a;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"cjbj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identityGradConfig=void 0;var e=require("../kernel_names"),t=require("../ops/cast");const r={kernelName:e.Identity,gradFunc:e=>({x:()=>(0,t.cast)(e,"float32")})};exports.identityGradConfig=r;
},{"../kernel_names":"E7d7","../ops/cast":"OenY"}],"wMvp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const i={kernelName:e.IsFinite,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isFiniteGradConfig=i;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"Ouk7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.IsInf,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isInfGradConfig=s;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"QV9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.IsNan,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isNanGradConfig=s;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"QD5T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyReluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/greater"),a=require("../ops/mul"),u=require("../ops/where");const o={kernelName:e.LeakyRelu,inputsToSave:["x"],gradFunc:(e,o,s)=>{const[t]=o,{alpha:l}=s,n=(0,r.greater)(t,0);return{x:()=>(0,u.where)(n,e,(0,a.mul)(e,l))}}};exports.leakyReluGradConfig=o;
},{"../kernel_names":"E7d7","../ops/greater":"xzex","../ops/mul":"Nt3M","../ops/where":"ALar"}],"q3uS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),o=require("../ops/div");const d={kernelName:e.Log1p,inputsToSave:["x"],gradFunc:(e,d)=>{const[s]=d;return{x:()=>(0,o.div)(e,(0,r.add)(s,1))}}};exports.log1pGradConfig=d;
},{"../kernel_names":"E7d7","../ops/add":"RKQn","../ops/div":"M4To"}],"EiVi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),o=require("../ops/div");const s={kernelName:e.Log,inputsToSave:["x"],gradFunc:(e,s)=>{const[t]=s;return{x:()=>(0,o.div)(e,(0,r.cast)(t,"float32"))}}};exports.logGradConfig=s;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/div":"M4To"}],"dI3i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSoftmaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),o=require("../ops/mul"),s=require("../ops/sub"),u=require("../ops/sum");const t={kernelName:e.LogSoftmax,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,a)=>{const[i]=t,{axis:n}=a;return{logits:()=>{const t=(0,r.exp)(i);return(0,s.sub)(e,(0,o.mul)((0,u.sum)(e,n,!0),t))}}}};exports.logSoftmaxGradConfig=t;
},{"../kernel_names":"E7d7","../ops/exp":"lPHG","../ops/mul":"Nt3M","../ops/sub":"w3Uc","../ops/sum":"WgrX"}],"hWg4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localResponseNormalizationBackprop=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("./operation");function a(r,a,n,i=5,p=1,s=1,t=.5){const l={x:r,y:a,dy:n},c={depthRadius:i,bias:p,alpha:s,beta:t};return e.ENGINE.runKernel(o.LRNGrad,l,c)}const n=(0,r.op)({localResponseNormalizationBackprop_:a});exports.localResponseNormalizationBackprop=n;
},{"../engine":"Wn3f","../kernel_names":"E7d7","./operation":"pYCl"}],"PYXA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lrnGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/local_response_normalization_backprop");const o={kernelName:e.LRN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,o,a)=>{const[n,s]=o,{depthRadius:t,bias:p,alpha:i,beta:l}=a;return{x:()=>(0,r.localResponseNormalizationBackprop)(n,s,e,t,p,i,l)}}};exports.lrnGradConfig=o;
},{"../kernel_names":"E7d7","../ops/local_response_normalization_backprop":"hWg4"}],"Bxt4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gradForMinAndMax=o;var e=u(require("../ops/axis_util")),r=require("../ops/cast"),t=require("../ops/equal"),n=require("../ops/mul"),a=require("../ops/reshape");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function o(p,u,o,i){return u.rank<o.rank&&(u=(0,a.reshape)(u,e.expandShapeToKeepDim(u.shape,i))),p.rank<o.rank&&(p=(0,a.reshape)(p,e.expandShapeToKeepDim(p.shape,i))),{x:()=>{return(0,n.mul)(p,(0,r.cast)((0,t.equal)(o,u),p.dtype))}}}
},{"../ops/axis_util":"KXhP","../ops/cast":"OenY","../ops/equal":"LJLN","../ops/mul":"Nt3M","../ops/reshape":"IoLG"}],"u63X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxGradConfig=void 0;var e=require("../kernel_names"),r=a(require("../util")),t=require("./min_max_grad_util");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(a,u,i):a[u]=e[u]}return a.default=e,t&&t.set(e,a),a}const o={kernelName:e.Max,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,a)=>{const o=a,{reductionIndices:u}=o,i=n[0],p=n[1],f=r.parseAxisParam(u,i.shape),s=(0,t.gradForMinAndMax)(e,p,i,f);return{x:()=>s.x()}}};exports.maxGradConfig=o;
},{"../kernel_names":"E7d7","../util":"uQV1","./min_max_grad_util":"Bxt4"}],"rCc4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),a=require("../ops/greater_equal"),s=require("../ops/less"),u=require("../ops/mul");const t={kernelName:e.Maximum,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[o,i]=t;return{a:()=>(0,u.mul)(e,(0,r.cast)((0,a.greaterEqual)(o,i),"float32")),b:()=>(0,u.mul)(e,(0,r.cast)((0,s.less)(o,i),"float32"))}}};exports.maximumGradConfig=t;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/greater_equal":"nMa8","../ops/less":"pOeu","../ops/mul":"Nt3M"}],"u7fE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3dGrad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),a=p(require("../util")),o=require("./conv_util"),n=require("./operation"),s=require("./reshape");function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=o?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(a,n,s):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}function i(n,u,p,i,d,l,c){const h=(0,t.convertToTensor)(n,"dy","maxPool3dGrad"),f=(0,t.convertToTensor)(u,"input","maxPool3dGrad"),k=(0,t.convertToTensor)(p,"output","maxPool3dGrad");let P=h,m=f,x=k,b=!1;4===f.rank&&(b=!0,P=(0,s.reshape)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]]),m=(0,s.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]]),x=(0,s.reshape)(k,[1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]])),a.assert(5===P.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+`${P.rank}.`),a.assert(5===m.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+`${m.rank}.`),a.assert(5===x.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+`${x.rank}.`),(0,o.checkPadOnDimRoundingMode)("maxPool3dGrad",l,c);const v={dy:P,input:m,output:x},y={filterSize:i,strides:d,pad:l,dimRoundingMode:c},G=e.ENGINE.runKernel(r.MaxPool3DGrad,v,y);return b?(0,s.reshape)(G,[G.shape[1],G.shape[2],G.shape[3],G.shape[4]]):G}const d=(0,n.op)({maxPool3dGrad_:i});exports.maxPool3dGrad=d;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl","./reshape":"IoLG"}],"GuyY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/max_pool_3d_grad");const r={kernelName:e.MaxPool3D,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,r,a)=>{const[d,t]=r,{filterSize:s,strides:i,pad:n,dimRoundingMode:u}=a;return{x:()=>(0,o.maxPool3dGrad)(e,d,t,s,i,n,u)}}};exports.maxPool3DGradConfig=r;
},{"../kernel_names":"E7d7","../ops/max_pool_3d_grad":"u7fE"}],"XisP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGrad=void 0;var r=require("../engine"),e=require("../kernel_names"),t=require("../tensor_util_env"),o=i(require("../util")),n=i(require("./conv_util")),a=require("./operation");function u(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(u=function(r){return r?t:e})(r)}function i(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=u(e);if(t&&t.has(r))return t.get(r);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if("default"!==a&&Object.prototype.hasOwnProperty.call(r,a)){var i=n?Object.getOwnPropertyDescriptor(r,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=r[a]}return o.default=r,t&&t.set(r,o),o}function d(a,u,i,d,s,l,p){const c=(0,t.convertToTensor)(a,"dy","maxPoolGrad"),f=(0,t.convertToTensor)(u,"input","maxPoolGrad"),k=(0,t.convertToTensor)(i,"output","maxPoolGrad");o.assert(f.rank===c.rank,()=>`Rank of input (${f.rank}) does not match rank of dy `+`(${c.rank})`),o.assert(4===c.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+`${c.rank}.`),o.assert(4===f.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+`${f.rank}.`),n.checkPadOnDimRoundingMode("maxPoolGrad",l,p);const P={dy:c,input:f,output:k},m={filterSize:d,strides:s,pad:l,dimRoundingMode:p};return r.ENGINE.runKernel(e.MaxPoolGrad,P,m)}const s=(0,a.op)({maxPoolGrad_:d});exports.maxPoolGrad=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7","../tensor_util_env":"qMTF","../util":"uQV1","./conv_util":"tcmi","./operation":"pYCl"}],"RMOB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/max_pool_grad");const r={kernelName:e.MaxPool,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,r,a)=>{const[t,s]=r,{filterSize:i,strides:n,pad:d}=a;return{x:()=>(0,o.maxPoolGrad)(e,t,s,i,n,d)}}};exports.maxPoolGradConfig=r;
},{"../kernel_names":"E7d7","../ops/max_pool_grad":"XisP"}],"DgSD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),t=require("../ops/div"),n=require("../ops/mul"),o=require("../ops/ones"),a=require("../ops/reshape"),u=i(require("../util"));function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}const p={kernelName:e.Mean,inputsToSave:["x"],gradFunc:(e,s,i)=>{const[p]=s,{axis:c}=i,f=u.parseAxisParam(c,p.shape),l=(0,r.computeOutAndReduceShapes)(p.shape,f)[1],d=u.sizeFromShape(l);return{x:()=>{const r=p.shape.slice();f.forEach(e=>{r[e]=1});const u=(0,a.reshape)(e,r);return(0,t.div)((0,n.mul)(u,(0,o.ones)(p.shape,"float32")),d)}}}};exports.meanGradConfig=p;
},{"../kernel_names":"E7d7","../ops/axis_util":"KXhP","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/ones":"dZ45","../ops/reshape":"IoLG","../util":"uQV1"}],"zI64":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minGradConfig=void 0;var e=require("../kernel_names"),r=a(require("../util")),t=require("./min_max_grad_util");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=e[i]}return a.default=e,t&&t.set(e,a),a}const o={kernelName:e.Min,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,a)=>{const o=a,{axis:i}=o,[u,p]=n,f=r.parseAxisParam(i,u.shape),s=(0,t.gradForMinAndMax)(e,p,u,f);return{x:()=>s.x()}}};exports.minGradConfig=o;
},{"../kernel_names":"E7d7","../util":"uQV1","./min_max_grad_util":"Bxt4"}],"Av3a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/greater"),a=require("../ops/less_equal"),u=require("../ops/mul");const t={kernelName:e.Minimum,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[i,o]=t;return{a:()=>(0,u.mul)(e,(0,r.cast)((0,a.lessEqual)(i,o),"float32")),b:()=>(0,u.mul)(e,(0,r.cast)((0,s.greater)(i,o),"float32"))}}};exports.minimumGradConfig=t;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/greater":"xzex","../ops/less_equal":"BA1Q","../ops/mul":"Nt3M"}],"dL9u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPadGradConfig=void 0;var r=require("../kernel_names"),e=require("../ops/slice");const o={kernelName:r.MirrorPad,inputsToSave:["x"],gradFunc:(r,o,s)=>{const a=o[0],{paddings:i}=s,n=i.map(r=>r[0]);return{x:()=>(0,e.slice)(r,n,a.shape)}}};exports.mirrorPadGradConfig=o;
},{"../kernel_names":"E7d7","../ops/slice":"tUXw"}],"X7wI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/div"),o=require("../ops/floor"),t=require("../ops/mul"),a=require("../ops/neg"),u=require("../ops/reshape"),n=require("../ops/sum");const p={kernelName:e.Mod,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[i,d]=p,h=(0,r.assertAndGetBroadcastShape)(i.shape,d.shape);return{a:()=>{const s=(0,r.getReductionAxes)(i.shape,h);return s.length>0?(0,u.reshape)((0,n.sum)(e,s),i.shape):e},b:()=>{const p=(0,t.mul)(e,(0,a.neg)((0,o.floor)((0,s.div)(i,d)))),c=(0,r.getReductionAxes)(d.shape,h);return c.length>0?(0,u.reshape)((0,n.sum)(p,c),d.shape):p}}}};exports.modGradConfig=p;
},{"../kernel_names":"E7d7","../ops/broadcast_util":"Xh9J","../ops/div":"M4To","../ops/floor":"Tt6T","../ops/mul":"Nt3M","../ops/neg":"OZKu","../ops/reshape":"IoLG","../ops/sum":"WgrX"}],"P5Nc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyGradConfig=void 0;var e=require("../kernel_names"),s=require("../ops/broadcast_util"),r=require("../ops/cast"),t=require("../ops/mul"),a=require("../ops/reshape"),u=require("../ops/sum");const o={kernelName:e.Multiply,inputsToSave:["a","b"],gradFunc:(e,o)=>{const[p,n]=o,i=(0,s.assertAndGetBroadcastShape)(p.shape,n.shape);return{a:()=>{const o=(0,t.mul)(e,(0,r.cast)(n,"float32")),l=(0,s.getReductionAxes)(p.shape,i);return l.length>0?(0,a.reshape)((0,u.sum)(o,l),p.shape):o},b:()=>{const o=(0,t.mul)(e,(0,r.cast)(p,"float32")),l=(0,s.getReductionAxes)(n.shape,i);return l.length>0?(0,a.reshape)((0,u.sum)(o,l),n.shape):o}}}};exports.multiplyGradConfig=o;
},{"../kernel_names":"E7d7","../ops/broadcast_util":"Xh9J","../ops/cast":"OenY","../ops/mul":"Nt3M","../ops/reshape":"IoLG","../ops/sum":"WgrX"}],"eAMw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.negGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/neg");const n={kernelName:e.Neg,gradFunc:e=>({x:()=>(0,r.neg)(e)})};exports.negGradConfig=n;
},{"../kernel_names":"E7d7","../ops/neg":"OZKu"}],"IL1H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHotGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/zeros");const r={kernelName:e.OneHot,inputsToSave:["indices"],gradFunc:(e,r)=>{const n=r[0];return{indices:()=>(0,o.zeros)(n.shape,"float32")}}};exports.oneHotGradConfig=r;
},{"../kernel_names":"E7d7","../ops/zeros":"f1QP"}],"wq3A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLikeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.OnesLike,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.onesLikeGradConfig=o;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"kRIf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/unstack");const a={kernelName:e.Pack,saveAllInputs:!0,gradFunc:(e,a,s)=>{const{axis:n}=s;return(0,r.unstack)(e,n).map(e=>()=>e)}};exports.packGradConfig=a;
},{"../kernel_names":"E7d7","../ops/unstack":"Vfy7"}],"Dav9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/slice");const s={kernelName:e.PadV2,inputsToSave:["x"],gradFunc:(e,s,a)=>{const n=s[0],{paddings:o}=a,d=o.map(e=>e[0]);return{x:()=>(0,r.slice)(e,d,n.shape)}}};exports.padV2GradConfig=s;
},{"../kernel_names":"E7d7","../ops/slice":"tUXw"}],"yEXo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powGradConfig=void 0;var e=require("../kernel_names"),r=h(require("../ops/broadcast_util")),t=require("../ops/cast"),o=require("../ops/greater"),s=require("../ops/log"),u=require("../ops/mul"),a=require("../ops/pow"),n=require("../ops/reshape"),p=require("../ops/scalar"),i=require("../ops/sub"),l=require("../ops/sum"),c=require("../ops/where"),f=require("../ops/zeros_like");function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:r})(e)}function h(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d(r);if(t&&t.has(e))return t.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=s?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}const g={kernelName:e.Pow,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,d)=>{const[h,g,q]=d,b=h,w=g,m=r.assertAndGetBroadcastShape(b.shape,w.shape);return{a:()=>{const o=(0,t.cast)(w,"float32");let s=(0,u.mul)(e,(0,u.mul)(o,(0,a.pow)(b,(0,i.sub)(o,(0,p.scalar)(1)))));const c=r.getReductionAxes(b.shape,m);return c.length>0&&(s=(0,l.sum)(s,c)),(0,n.reshape)(s,b.shape)},b:()=>{const t=(0,o.greater)(b,0),a=(0,c.where)(t,(0,s.log)(b),(0,f.zerosLike)(b));let p=(0,u.mul)(e,(0,u.mul)(q,a));const i=r.getReductionAxes(w.shape,m);return i.length>0&&(p=(0,l.sum)(p,i)),(0,n.reshape)(p,w.shape)}}}};exports.powGradConfig=g;
},{"../kernel_names":"E7d7","../ops/broadcast_util":"Xh9J","../ops/cast":"OenY","../ops/greater":"xzex","../ops/log":"dxsf","../ops/mul":"Nt3M","../ops/pow":"WjtV","../ops/reshape":"IoLG","../ops/scalar":"oY2j","../ops/sub":"w3Uc","../ops/sum":"WgrX","../ops/where":"ALar","../ops/zeros_like":"HQup"}],"oIJA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/greater"),u=require("../ops/mul"),o=require("../ops/reshape"),a=require("../ops/sum"),p=require("../ops/where"),t=require("../ops/zeros_like");const i={kernelName:e.Prelu,inputsToSave:["x","alpha"],gradFunc:(e,i)=>{const[l,n]=i,h=(0,s.greater)(l,0);return{x:()=>(0,p.where)(h,e,(0,u.mul)(e,n)),alpha:()=>{let s=(0,p.where)(h,(0,t.zerosLike)(e),(0,u.mul)(e,l));const i=(0,r.getReductionAxes)(n.shape,e.shape);return i.length>0&&(s=(0,a.sum)(s,i)),(0,o.reshape)(s,n.shape)}}}};exports.preluGradConfig=i;
},{"../kernel_names":"E7d7","../ops/broadcast_util":"Xh9J","../ops/greater":"xzex","../ops/mul":"Nt3M","../ops/reshape":"IoLG","../ops/sum":"WgrX","../ops/where":"ALar","../ops/zeros_like":"HQup"}],"visn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prodGradConfig=void 0;var e=require("../base"),r=require("../kernel_names"),s=require("../ops/cumprod"),t=require("../ops/mul"),n=require("../ops/reshape"),o=require("../ops/transpose");function u(e,r,o){const u=e.shape.slice();u[o]=1;const p=(0,n.reshape)(r,u),a=(0,s.cumprod)(e,o,!0,!1),l=(0,s.cumprod)(e,o,!0,!0),i=(0,t.mul)(a,l);return(0,t.mul)(p,i)}function p(r,s,t){const n=r.shape.length,p=n-t.length,a=e.backend_util.getAxesPermutation(t,n);let l=r;null!=a&&(l=(0,o.transpose)(r,a));const i=l.shape.slice(),c=i.splice(n-t.length,t.length).reduce((e,r)=>e*r,1);i.push(c);let d=u(l.reshape(i),s,p);if(d=d.reshape(l.shape),null!=a){const r=e.backend_util.getUndoAxesPermutation(a);d=(0,o.transpose)(d,r)}return d}const a={kernelName:r.Prod,inputsToSave:["x"],gradFunc:(e,r,s)=>{const[t]=r,{axis:n}=s;let o=[];return o=null==n?t.shape.map((e,r)=>r):"number"==typeof n?[n]:n,{x:()=>p(t,e,o)}}};exports.prodGradConfig=a;
},{"../base":"t8q5","../kernel_names":"E7d7","../ops/cumprod":"VPUf","../ops/mul":"Nt3M","../ops/reshape":"IoLG","../ops/transpose":"gequ"}],"YEnp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divGradConfig=void 0;var e=require("../kernel_names"),r=c(require("../ops/broadcast_util")),t=require("../ops/cast"),a=require("../ops/div"),s=require("../ops/mul"),n=require("../ops/neg"),o=require("../ops/reshape"),u=require("../ops/square"),i=require("../ops/sum");function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function c(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(r);if(t&&t.has(e))return t.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}const l={kernelName:e.RealDiv,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[c,l]=p,f=r.assertAndGetBroadcastShape(c.shape,l.shape);return{a:()=>{const s=(0,a.div)(e,(0,t.cast)(l,"float32")),n=r.getReductionAxes(c.shape,f);return n.length>0?(0,o.reshape)((0,i.sum)(s,n),c.shape):s},b:()=>{let p=(0,s.mul)(e,(0,t.cast)(c,"float32"));const d=r.getReductionAxes(l.shape,f);d.length>0&&(p=(0,o.reshape)((0,i.sum)(p,d),l.shape));const v=(0,u.square)(l);return(0,n.neg)((0,a.div)(p,(0,t.cast)(v,"float32")))}}}};exports.divGradConfig=l;
},{"../kernel_names":"E7d7","../ops/broadcast_util":"Xh9J","../ops/cast":"OenY","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/neg":"OZKu","../ops/reshape":"IoLG","../ops/square":"wngC","../ops/sum":"WgrX"}],"kXgd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/div"),o=require("../ops/neg"),i=require("../ops/square");const s={kernelName:e.Reciprocal,inputsToSave:["x"],gradFunc:(e,s)=>{const[a]=s;return{x:()=>(0,r.div)(e,(0,o.neg)((0,i.square)(a)))}}};exports.reciprocalGradConfig=s;
},{"../kernel_names":"E7d7","../ops/div":"M4To","../ops/neg":"OZKu","../ops/square":"wngC"}],"rUEW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/less_equal"),u=require("../ops/mul"),o=require("../ops/step");const t={kernelName:e.Relu6,inputsToSave:["x"],gradFunc:(e,t)=>{const[l]=t,a=(0,u.mul)((0,s.lessEqual)(l,6),(0,o.step)(l));return{x:()=>(0,u.mul)(e,(0,r.cast)(a,"float32"))}}};exports.relu6GradConfig=t;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/less_equal":"BA1Q","../ops/mul":"Nt3M","../ops/step":"jRSP"}],"QPut":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),t=require("../ops/step");const o={kernelName:e.Relu,inputsToSave:["x"],gradFunc:(e,o)=>{const[u]=o;return{x:()=>(0,s.mul)(e,(0,r.cast)((0,t.step)(u),"float32"))}}};exports.reluGradConfig=o;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/mul":"Nt3M","../ops/step":"jRSP"}],"dcGz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshapeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/reshape");const s={kernelName:e.Reshape,inputsToSave:["x"],gradFunc:(e,s)=>{const[a]=s;return{x:()=>(0,r.reshape)(e,a.shape)}}};exports.reshapeGradConfig=s;
},{"../kernel_names":"E7d7","../ops/reshape":"IoLG"}],"SKnx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const i={kernelName:r.ResizeBilinear,inputsToSave:["images"],gradFunc:(i,n,s)=>{const[a]=n,o={dy:i,images:a};return{images:()=>e.ENGINE.runKernel(r.ResizeBilinearGrad,o,s)}}};exports.resizeBilinearGradConfig=i;
},{"../engine":"Wn3f","../kernel_names":"E7d7"}],"Ufhs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighborGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const s={kernelName:r.ResizeNearestNeighbor,inputsToSave:["images"],gradFunc:(s,i,a)=>{const[n]=i,o={dy:s,images:n};return{images:()=>e.ENGINE.runKernel(r.ResizeNearestNeighborGrad,o,a)}}};exports.resizeNearestNeighborGradConfig=s;
},{"../engine":"Wn3f","../kernel_names":"E7d7"}],"WmOB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverseGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/reverse"),s=require("../util");const a={kernelName:e.Reverse,gradFunc:(e,a,i)=>{const{dims:o}=i,t=(0,s.parseAxisParam)(o,e.shape);return{x:()=>(0,r.reverse)(e,t)}}};exports.reverseGradConfig=a;
},{"../kernel_names":"E7d7","../ops/reverse":"lVoL","../util":"uQV1"}],"lFZh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.Round,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.roundGradConfig=o;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"VVoK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/div"),o=require("../ops/mul"),s=require("../ops/neg"),t=require("../ops/pow");const i={kernelName:e.Rsqrt,inputsToSave:["x"],gradFunc:(e,i)=>{const[n]=i;return{x:()=>(0,s.neg)((0,r.div)(e,(0,o.mul)((0,t.pow)(n,1.5),2)))}}};exports.rsqrtGradConfig=i;
},{"../kernel_names":"E7d7","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/neg":"OZKu","../ops/pow":"WjtV"}],"zRXj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/cast"),r=require("../ops/logical_not"),t=require("../ops/mul"),s=require("../ops/zeros_like");const i={kernelName:e.Select,inputsToSave:["condition"],gradFunc:(e,i)=>{const[c]=i;return{condition:()=>(0,o.cast)((0,s.zerosLike)(c),"float32"),t:()=>(0,t.mul)(e,(0,o.cast)(c,e.dtype)),e:()=>(0,t.mul)(e,(0,o.cast)((0,r.logicalNot)(c),e.dtype))}}};exports.selectGradConfig=i;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/logical_not":"NW6f","../ops/mul":"Nt3M","../ops/zeros_like":"HQup"}],"eMlo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/exp"),u=require("../ops/greater"),a=require("../ops/mul"),o=require("../ops/scalar"),t=require("../ops/selu_util"),l=require("../ops/where");const i={kernelName:e.Selu,inputsToSave:["x"],gradFunc:(e,i)=>{const[p]=i;return{x:()=>{const i=(0,u.greater)(p,(0,o.scalar)(0)),n=(0,o.scalar)(t.SELU_SCALEALPHA),c=(0,o.scalar)(t.SELU_SCALE),q=(0,a.mul)(e,c),x=(0,a.mul)((0,a.mul)(e,n),(0,s.exp)((0,r.cast)(p,"float32")));return(0,l.where)(i,q,x)}}}};exports.seluGradConfig=i;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/exp":"lPHG","../ops/greater":"xzex","../ops/mul":"Nt3M","../ops/scalar":"oY2j","../ops/selu_util":"ssng","../ops/where":"ALar"}],"Itr9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/scalar"),o=require("../ops/sub");const u={kernelName:e.Sigmoid,outputsToSave:[!0],gradFunc:(e,u)=>{const[i]=u;return{x:()=>(0,r.mul)(e,(0,r.mul)(i,(0,o.sub)((0,s.scalar)(1),i)))}}};exports.sigmoidGradConfig=u;
},{"../kernel_names":"E7d7","../ops/mul":"Nt3M","../ops/scalar":"oY2j","../ops/sub":"w3Uc"}],"w1UY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.Sign,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.signGradConfig=s;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"Nh3c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/cos"),o=require("../ops/mul");const n={kernelName:e.Sin,inputsToSave:["x"],gradFunc:(e,n)=>{const[t]=n;return{x:()=>(0,o.mul)((0,s.cos)((0,r.cast)(t,"float32")),e)}}};exports.sinGradConfig=n;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/cos":"YFO2","../ops/mul":"Nt3M"}],"VxxV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/cosh"),o=require("../ops/mul");const n={kernelName:e.Sinh,inputsToSave:["x"],gradFunc:(e,n)=>{const[t]=n;return{x:()=>(0,o.mul)((0,s.cosh)((0,r.cast)(t,"float32")),e)}}};exports.sinhGradConfig=n;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/cosh":"fgKb","../ops/mul":"Nt3M"}],"bzG0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sliceGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/pad"),s=require("../ops/slice_util");const i={kernelName:e.Slice,inputsToSave:["x"],gradFunc:(e,i,a)=>{const[o]=i,{begin:n,size:t}=a,p=o.shape,[l,u]=(0,s.parseSliceParams)(o,n,t),c=[];for(let r=0;r<e.rank;r++)c.push([l[r],p[r]-l[r]-u[r]]);return{x:()=>(0,r.pad)(e,c)}}};exports.sliceGradConfig=i;
},{"../kernel_names":"E7d7","../ops/pad":"H66W","../ops/slice_util":"zBsU"}],"ViYN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/sub"),o=require("../ops/sum");const u={kernelName:e.Softmax,outputsToSave:[!0],gradFunc:(e,u,t)=>{const[a]=u,{dim:i}=t,m=(0,r.mul)(e,a);return{logits:()=>(0,s.sub)(m,(0,r.mul)((0,o.sum)(m,[i],!0),a))}}};exports.softmaxGradConfig=u;
},{"../kernel_names":"E7d7","../ops/mul":"Nt3M","../ops/sub":"w3Uc","../ops/sum":"WgrX"}],"Shd2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/sigmoid");const o={kernelName:e.Softplus,inputsToSave:["x"],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)(e,(0,s.sigmoid)(t))}}};exports.softplusGradConfig=o;
},{"../kernel_names":"E7d7","../ops/mul":"Nt3M","../ops/sigmoid":"JWCK"}],"LNxg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchNDGradConfig=void 0;var e=require("../kernel_names"),a=require("../ops/batch_to_space_nd");const r={kernelName:e.SpaceToBatchND,gradFunc:(e,r,o)=>{const{blockShape:c,paddings:t}=o;return{x:()=>(0,a.batchToSpaceND)(e,c,t)}}};exports.spaceToBatchNDGradConfig=r;
},{"../kernel_names":"E7d7","../ops/batch_to_space_nd":"cbr1"}],"Umv7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitVGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/concat");const t={kernelName:e.SplitV,gradFunc:(e,t,o)=>{const{axis:s}=o;return{x:()=>(0,r.concat)(e,s)}}};exports.splitVGradConfig=t;
},{"../kernel_names":"E7d7","../ops/concat":"E9ft"}],"OogM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),t=require("../ops/mul"),o=require("../ops/sqrt");const i={kernelName:e.Sqrt,inputsToSave:["x"],gradFunc:(e,i)=>{const[u]=i;return{x:()=>(0,s.div)(e,(0,t.mul)((0,o.sqrt)((0,r.cast)(u,"float32")),2))}}};exports.sqrtGradConfig=i;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/div":"M4To","../ops/mul":"Nt3M","../ops/sqrt":"y3Gt"}],"hFDy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul");const u={kernelName:e.Square,inputsToSave:["x"],gradFunc:(e,u)=>{const[a]=u;return{x:()=>(0,s.mul)(e,(0,s.mul)((0,r.cast)(a,"float32"),2))}}};exports.squareGradConfig=u;
},{"../kernel_names":"E7d7","../ops/cast":"OenY","../ops/mul":"Nt3M"}],"rOTn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),u=require("../ops/scalar"),s=require("../ops/sub");const a={kernelName:e.SquaredDifference,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[n,o]=a,i=(0,u.scalar)(2);return{a:()=>(0,r.mul)(e,(0,r.mul)(i,(0,s.sub)(n,o))),b:()=>(0,r.mul)(e,(0,r.mul)(i,(0,s.sub)(o,n)))}}};exports.squaredDifferenceGradConfig=a;
},{"../kernel_names":"E7d7","../ops/mul":"Nt3M","../ops/scalar":"oY2j","../ops/sub":"w3Uc"}],"X4vY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stepGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.Step,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.stepGradConfig=s;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"rkWc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/broadcast_util")),t=require("../ops/neg"),n=require("../ops/reshape"),s=require("../ops/sum");function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=s?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}const u={kernelName:e.Sub,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,u]=a,p=r.assertAndGetBroadcastShape(o.shape,u.shape);return{a:()=>{let t=e;const a=r.getReductionAxes(o.shape,p);return a.length>0&&(t=(0,s.sum)(t,a)),(0,n.reshape)(t,o.shape)},b:()=>{let a=e;const o=r.getReductionAxes(u.shape,p);return o.length>0&&(a=(0,s.sum)(a,o)),(0,n.reshape)((0,t.neg)(a),u.shape)}}}};exports.subGradConfig=u;
},{"../kernel_names":"E7d7","../ops/broadcast_util":"Xh9J","../ops/neg":"OZKu","../ops/reshape":"IoLG","../ops/sum":"WgrX"}],"qJ4a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/ones"),a=require("../ops/reshape"),o=require("../util");const u={kernelName:e.Sum,inputsToSave:["x"],gradFunc:(e,u,i)=>{const[n]=u,p=n.shape.slice(),{axis:t}=i;(0,o.parseAxisParam)(t,n.shape).forEach(e=>{p[e]=1});const l=(0,a.reshape)(e,p),c=(0,r.mul)(l,(0,s.ones)(n.shape,"float32"));return{x:()=>c}}};exports.sumGradConfig=u;
},{"../kernel_names":"E7d7","../ops/mul":"Nt3M","../ops/ones":"dZ45","../ops/reshape":"IoLG","../util":"uQV1"}],"V9EF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cos"),s=require("../ops/div"),o=require("../ops/square");const n={kernelName:e.Tan,inputsToSave:["x"],gradFunc:(e,n)=>{const[a]=n;return{x:()=>(0,s.div)(e,(0,o.square)((0,r.cos)(a)))}}};exports.tanGradConfig=n;
},{"../kernel_names":"E7d7","../ops/cos":"YFO2","../ops/div":"M4To","../ops/square":"wngC"}],"cLS7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/scalar"),u=require("../ops/square"),a=require("../ops/sub");const o={kernelName:e.Tanh,outputsToSave:[!0],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)((0,a.sub)((0,s.scalar)(1),(0,u.square)(t)),e)}}};exports.tanhGradConfig=o;
},{"../kernel_names":"E7d7","../ops/mul":"Nt3M","../ops/scalar":"oY2j","../ops/square":"wngC","../ops/sub":"w3Uc"}],"gO1g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tileGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/slice"),a=require("../ops/zeros_like");const o={kernelName:e.Tile,inputsToSave:["x"],gradFunc:(e,o,t)=>{const[p]=o,{reps:i}=t;return{x:()=>{let o=(0,a.zerosLike)(p);if(1===p.rank)for(let a=0;a<i[0];++a)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0]],[p.shape[0]]));else if(2===p.rank)for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1]],[p.shape[0],p.shape[1]]));else if(3===p.rank)for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)for(let l=0;l<i[2];++l)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1],l*p.shape[2]],[p.shape[0],p.shape[1],p.shape[2]]));else{if(4!==p.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+`${p.rank} tensors yet.`);for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)for(let l=0;l<i[2];++l)for(let n=0;n<i[3];++n)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1],l*p.shape[2],n*p.shape[3]],[p.shape[0],p.shape[1],p.shape[2],p.shape[3]]))}return o}}}};exports.tileGradConfig=o;
},{"../kernel_names":"E7d7","../ops/add":"RKQn","../ops/slice":"tUXw","../ops/zeros_like":"HQup"}],"xAYw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/axis_util")),t=require("../ops/transpose");function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}const a={kernelName:e.Transpose,gradFunc:(e,n,o)=>{const a=o,{perm:s}=a,u=r.getUndoAxesPermutation(s);return{x:()=>(0,t.transpose)(e,u)}}};exports.transposeGradConfig=a;
},{"../kernel_names":"E7d7","../ops/axis_util":"KXhP","../ops/transpose":"gequ"}],"TqOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpackGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/stack");const a={kernelName:e.Unpack,gradFunc:(e,a,n)=>{const s=n,{axis:t}=s;return{value:()=>(0,r.stack)(e,t)}}};exports.unpackGradConfig=a;
},{"../kernel_names":"E7d7","../ops/stack":"naC9"}],"axJO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/expand_dims"),o=require("../ops/gather"),s=require("../ops/greater_equal"),n=require("../ops/logical_and"),t=require("../ops/maximum"),a=require("../ops/ones"),i=require("../ops/scalar"),u=require("../ops/where"),m=require("../ops/zeros_like");const p={kernelName:e.UnsortedSegmentSum,inputsToSave:["segmentIds"],gradFunc:(e,r)=>{const[o]=r;return{x:()=>l(e,o)}}};function l(e,p){const l=(0,t.maximum)(p,(0,m.zerosLike)(p)),d=(0,o.gather)(e,l);let c=(0,s.greaterEqual)(p,(0,i.scalar)(0,"int32"));const g=d.rank-c.rank;for(let o=0;o<g;++o)c=(0,r.expandDims)(c,o+1);c=(0,n.logicalAnd)(c,(0,a.ones)(d.shape,"bool"));const q=(0,m.zerosLike)(d);return(0,u.where)(c,d,q)}exports.unsortedSegmentSumGradConfig=p;
},{"../kernel_names":"E7d7","../ops/expand_dims":"wPBp","../ops/gather":"qpmj","../ops/greater_equal":"nMa8","../ops/logical_and":"Uxvi","../ops/maximum":"QvEy","../ops/ones":"dZ45","../ops/scalar":"oY2j","../ops/where":"ALar","../ops/zeros_like":"HQup"}],"fdUK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLikeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.ZerosLike,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.zerosLikeGradConfig=o;
},{"../kernel_names":"E7d7","../ops/zeros_like":"HQup"}],"M8rT":[function(require,module,exports) {
"use strict";var r=require("./gradients/Abs_grad"),e=require("./gradients/Acos_grad"),a=require("./gradients/Acosh_grad"),i=require("./gradients/Add_grad"),d=require("./gradients/AddN_grad"),g=require("./gradients/ArgMax_grad"),n=require("./gradients/ArgMin_grad"),o=require("./gradients/Asin_grad"),s=require("./gradients/Asinh_grad"),t=require("./gradients/Atan2_grad"),u=require("./gradients/Atan_grad"),f=require("./gradients/Atanh_grad"),C=require("./gradients/AvgPool3D_grad"),q=require("./gradients/AvgPool_grad"),G=require("./gradients/BatchMatMul_grad"),_=require("./gradients/BatchToSpaceND_grad"),l=require("./gradients/BroadcastTo_grad"),c=require("./gradients/Cast_grad"),p=require("./gradients/Ceil_grad"),m=require("./gradients/ClipByValue_grad"),h=require("./gradients/ComplexAbs_grad"),D=require("./gradients/Concat_grad"),S=require("./gradients/Conv2D_grad"),x=require("./gradients/Conv2DBackpropInput_grad"),v=require("./gradients/Conv3D_grad"),N=require("./gradients/Cos_grad"),M=require("./gradients/Cosh_grad"),A=require("./gradients/Cumsum_grad"),P=require("./gradients/DepthwiseConv2dNative_grad"),B=require("./gradients/Dilation2D_grad"),k=require("./gradients/Elu_grad"),R=require("./gradients/Erf_grad"),b=require("./gradients/Exp_grad"),T=require("./gradients/ExpandDims_grad"),y=require("./gradients/Expm1_grad"),L=require("./gradients/Floor_grad"),V=require("./gradients/FloorDiv_grad"),I=require("./gradients/FusedBatchNorm_grad"),E=require("./gradients/GatherV2_grad"),z=require("./gradients/GreaterEqual_grad"),F=require("./gradients/Identity_grad"),w=require("./gradients/IsFinite_grad"),H=require("./gradients/IsInf_grad"),O=require("./gradients/IsNan_grad"),U=require("./gradients/LeakyRelu_grad"),Z=require("./gradients/Log1p_grad"),j=require("./gradients/Log_grad"),J=require("./gradients/LogSoftmax_grad"),K=require("./gradients/LRN_grad"),Q=require("./gradients/Max_grad"),W=require("./gradients/Maximum_grad"),X=require("./gradients/MaxPool3D_grad"),Y=require("./gradients/MaxPool_grad"),$=require("./gradients/Mean_grad"),rr=require("./gradients/Min_grad"),er=require("./gradients/Minimum_grad"),ar=require("./gradients/MirrorPad_grad"),ir=require("./gradients/Mod_grad"),dr=require("./gradients/Multiply_grad"),gr=require("./gradients/Neg_grad"),nr=require("./gradients/OneHot_grad"),or=require("./gradients/OnesLike_grad"),sr=require("./gradients/Pack_grad"),tr=require("./gradients/PadV2_grad"),ur=require("./gradients/Pow_grad"),fr=require("./gradients/Prelu_grad"),Cr=require("./gradients/Prod_grad"),qr=require("./gradients/RealDiv_grad"),Gr=require("./gradients/Reciprocal_grad"),_r=require("./gradients/Relu6_grad"),lr=require("./gradients/Relu_grad"),cr=require("./gradients/Reshape_grad"),pr=require("./gradients/ResizeBilinear_grad"),mr=require("./gradients/ResizeNearestNeighbor_grad"),hr=require("./gradients/Reverse_grad"),Dr=require("./gradients/Round_grad"),Sr=require("./gradients/Rsqrt_grad"),xr=require("./gradients/Select_grad"),vr=require("./gradients/Selu_grad"),Nr=require("./gradients/Sigmoid_grad"),Mr=require("./gradients/Sign_grad"),Ar=require("./gradients/Sin_grad"),Pr=require("./gradients/Sinh_grad"),Br=require("./gradients/Slice_grad"),kr=require("./gradients/Softmax_grad"),Rr=require("./gradients/Softplus_grad"),br=require("./gradients/SpaceToBatchND_grad"),Tr=require("./gradients/SplitV_grad"),yr=require("./gradients/Sqrt_grad"),Lr=require("./gradients/Square_grad"),Vr=require("./gradients/SquaredDifference_grad"),Ir=require("./gradients/Step_grad"),Er=require("./gradients/Sub_grad"),zr=require("./gradients/Sum_grad"),Fr=require("./gradients/Tan_grad"),wr=require("./gradients/Tanh_grad"),Hr=require("./gradients/Tile_grad"),Or=require("./gradients/Transpose_grad"),Ur=require("./gradients/Unpack_grad"),Zr=require("./gradients/UnsortedSegmentSum_grad"),jr=require("./gradients/ZerosLike_grad"),Jr=require("./kernel_registry");const Kr=[r.absGradConfig,e.acosGradConfig,a.acoshGradConfig,i.addGradConfig,d.addNGradConfig,g.argMaxGradConfig,n.argMinGradConfig,o.asinGradConfig,s.asinhGradConfig,t.atan2GradConfig,u.atanGradConfig,f.atanhGradConfig,C.avgPool3DGradConfig,q.avgPoolGradConfig,G.batchMatMulGradConfig,_.batchToSpaceNDGradConfig,l.broadcastToGradConfig,c.castGradConfig,p.ceilGradConfig,m.clipByValueGradConfig,h.complexAbsGradConfig,D.concatGradConfig,x.conv2DBackpropInputGradConfig,S.conv2DGradConfig,v.conv3DGradConfig,N.cosGradConfig,M.coshGradConfig,A.cumsumGradConfig,P.depthwiseConv2dNativeGradConfig,B.dilation2dGradConfig,qr.divGradConfig,k.eluGradConfig,R.erfGradConfig,b.expGradConfig,T.expandDimsGradConfig,y.expm1GradConfig,V.floorDivGradConfig,L.floorGradConfig,I.fusedBatchNormGradConfig,E.gatherGradConfig,z.greaterEqualGradConfig,F.identityGradConfig,w.isFiniteGradConfig,H.isInfGradConfig,O.isNanGradConfig,U.leakyReluGradConfig,Z.log1pGradConfig,j.logGradConfig,J.logSoftmaxGradConfig,K.lrnGradConfig,Q.maxGradConfig,Q.maxGradConfig,W.maximumGradConfig,X.maxPool3DGradConfig,Y.maxPoolGradConfig,$.meanGradConfig,rr.minGradConfig,er.minimumGradConfig,ar.mirrorPadGradConfig,ir.modGradConfig,dr.multiplyGradConfig,gr.negGradConfig,nr.oneHotGradConfig,or.onesLikeGradConfig,sr.packGradConfig,tr.padV2GradConfig,tr.padV2GradConfig,ur.powGradConfig,fr.preluGradConfig,Cr.prodGradConfig,Gr.reciprocalGradConfig,_r.relu6GradConfig,lr.reluGradConfig,cr.reshapeGradConfig,pr.resizeBilinearGradConfig,mr.resizeNearestNeighborGradConfig,hr.reverseGradConfig,Dr.roundGradConfig,Sr.rsqrtGradConfig,xr.selectGradConfig,vr.seluGradConfig,Nr.sigmoidGradConfig,Mr.signGradConfig,Ar.sinGradConfig,Pr.sinhGradConfig,Br.sliceGradConfig,kr.softmaxGradConfig,Rr.softplusGradConfig,br.spaceToBatchNDGradConfig,br.spaceToBatchNDGradConfig,Tr.splitVGradConfig,Tr.splitVGradConfig,yr.sqrtGradConfig,Vr.squaredDifferenceGradConfig,Lr.squareGradConfig,Ir.stepGradConfig,Er.subGradConfig,zr.sumGradConfig,Fr.tanGradConfig,wr.tanhGradConfig,Hr.tileGradConfig,Or.transposeGradConfig,Ur.unpackGradConfig,Zr.unsortedSegmentSumGradConfig,jr.zerosLikeGradConfig];for(const Qr of Kr)(0,Jr.registerGradient)(Qr);
},{"./gradients/Abs_grad":"QJPj","./gradients/Acos_grad":"t1zU","./gradients/Acosh_grad":"gOid","./gradients/Add_grad":"slrq","./gradients/AddN_grad":"doQd","./gradients/ArgMax_grad":"AyTt","./gradients/ArgMin_grad":"rHnd","./gradients/Asin_grad":"yQRL","./gradients/Asinh_grad":"VrrX","./gradients/Atan2_grad":"dfYp","./gradients/Atan_grad":"WSUa","./gradients/Atanh_grad":"FVBN","./gradients/AvgPool3D_grad":"QoPl","./gradients/AvgPool_grad":"Bp8q","./gradients/BatchMatMul_grad":"K7XD","./gradients/BatchToSpaceND_grad":"mO6X","./gradients/BroadcastTo_grad":"vCUL","./gradients/Cast_grad":"a4OS","./gradients/Ceil_grad":"SqIA","./gradients/ClipByValue_grad":"KNy2","./gradients/ComplexAbs_grad":"iy2i","./gradients/Concat_grad":"LngV","./gradients/Conv2D_grad":"ZFsf","./gradients/Conv2DBackpropInput_grad":"ocam","./gradients/Conv3D_grad":"XvyX","./gradients/Cos_grad":"Zu5C","./gradients/Cosh_grad":"VK2i","./gradients/Cumsum_grad":"Jf0f","./gradients/DepthwiseConv2dNative_grad":"NjB0","./gradients/Dilation2D_grad":"JOjS","./gradients/Elu_grad":"v8EE","./gradients/Erf_grad":"XQ3w","./gradients/Exp_grad":"Y2fe","./gradients/ExpandDims_grad":"t4wg","./gradients/Expm1_grad":"QB44","./gradients/Floor_grad":"eBSU","./gradients/FloorDiv_grad":"Jmks","./gradients/FusedBatchNorm_grad":"Q2M0","./gradients/GatherV2_grad":"RY5b","./gradients/GreaterEqual_grad":"YImo","./gradients/Identity_grad":"cjbj","./gradients/IsFinite_grad":"wMvp","./gradients/IsInf_grad":"Ouk7","./gradients/IsNan_grad":"QV9T","./gradients/LeakyRelu_grad":"QD5T","./gradients/Log1p_grad":"q3uS","./gradients/Log_grad":"EiVi","./gradients/LogSoftmax_grad":"dI3i","./gradients/LRN_grad":"PYXA","./gradients/Max_grad":"u63X","./gradients/Maximum_grad":"rCc4","./gradients/MaxPool3D_grad":"GuyY","./gradients/MaxPool_grad":"RMOB","./gradients/Mean_grad":"DgSD","./gradients/Min_grad":"zI64","./gradients/Minimum_grad":"Av3a","./gradients/MirrorPad_grad":"dL9u","./gradients/Mod_grad":"X7wI","./gradients/Multiply_grad":"P5Nc","./gradients/Neg_grad":"eAMw","./gradients/OneHot_grad":"IL1H","./gradients/OnesLike_grad":"wq3A","./gradients/Pack_grad":"kRIf","./gradients/PadV2_grad":"Dav9","./gradients/Pow_grad":"yEXo","./gradients/Prelu_grad":"oIJA","./gradients/Prod_grad":"visn","./gradients/RealDiv_grad":"YEnp","./gradients/Reciprocal_grad":"kXgd","./gradients/Relu6_grad":"rUEW","./gradients/Relu_grad":"QPut","./gradients/Reshape_grad":"dcGz","./gradients/ResizeBilinear_grad":"SKnx","./gradients/ResizeNearestNeighbor_grad":"Ufhs","./gradients/Reverse_grad":"WmOB","./gradients/Round_grad":"lFZh","./gradients/Rsqrt_grad":"VVoK","./gradients/Select_grad":"zRXj","./gradients/Selu_grad":"eMlo","./gradients/Sigmoid_grad":"Itr9","./gradients/Sign_grad":"w1UY","./gradients/Sin_grad":"Nh3c","./gradients/Sinh_grad":"VxxV","./gradients/Slice_grad":"bzG0","./gradients/Softmax_grad":"ViYN","./gradients/Softplus_grad":"Shd2","./gradients/SpaceToBatchND_grad":"LNxg","./gradients/SplitV_grad":"Umv7","./gradients/Sqrt_grad":"OogM","./gradients/Square_grad":"hFDy","./gradients/SquaredDifference_grad":"rOTn","./gradients/Step_grad":"X4vY","./gradients/Sub_grad":"rkWc","./gradients/Sum_grad":"qJ4a","./gradients/Tan_grad":"V9EF","./gradients/Tanh_grad":"cLS7","./gradients/Tile_grad":"gO1g","./gradients/Transpose_grad":"xAYw","./gradients/Unpack_grad":"TqOd","./gradients/UnsortedSegmentSum_grad":"axJO","./gradients/ZerosLike_grad":"fdUK","./kernel_registry":"q1HN"}],"C1Zj":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.abs=function(){return this.throwIfDisposed(),(0,s.abs)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"z8kB":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.acos=function(){return this.throwIfDisposed(),(0,s.acos)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"vbY1":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.acosh=function(){return this.throwIfDisposed(),(0,s.acosh)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"bHQk":[function(require,module,exports) {
"use strict";var r=require("../../ops/add"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.add=function(e){return this.throwIfDisposed(),(0,r.add)(this,e)};
},{"../../ops/add":"RKQn","../../tensor":"olbE"}],"hzXW":[function(require,module,exports) {
"use strict";var r=require("../../ops/all"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.all=function(e,s){return this.throwIfDisposed(),(0,r.all)(this,e,s)};
},{"../../ops/all":"YXcM","../../tensor":"olbE"}],"ewEE":[function(require,module,exports) {
"use strict";var r=require("../../ops/any"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.any=function(e,s){return this.throwIfDisposed(),(0,r.any)(this,e,s)};
},{"../../ops/any":"yyJR","../../tensor":"olbE"}],"HWCt":[function(require,module,exports) {
"use strict";var r=require("../../ops/arg_max"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.argMax=function(e){return this.throwIfDisposed(),(0,r.argMax)(this,e)};
},{"../../ops/arg_max":"do4a","../../tensor":"olbE"}],"TaWN":[function(require,module,exports) {
"use strict";var r=require("../../ops/arg_min"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.argMin=function(e){return this.throwIfDisposed(),(0,r.argMin)(this,e)};
},{"../../ops/arg_min":"kbXM","../../tensor":"olbE"}],"LY9P":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor"),s=require("../../util");(0,r.getGlobalTensorClass)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,s.assert)(1===this.size,()=>"The array must have only 1 element."),(0,e.reshape)(this,[])};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE","../../util":"uQV1"}],"rL3t":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.asType=function(e){return this.throwIfDisposed(),(0,s.cast)(this,e)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"V3rs":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.as1D=function(){return this.throwIfDisposed(),(0,e.reshape)(this,[this.size])};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE"}],"KcwE":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.as2D=function(r,s){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s])};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE"}],"FzBh":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.as3D=function(r,s,t){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t])};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE"}],"hfT4":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.as4D=function(r,s,t,o){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t,o])};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE"}],"drNr":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.as5D=function(r,s,t,o,i){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t,o,i])};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE"}],"oTE3":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.asin=function(){return this.throwIfDisposed(),(0,s.asin)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"Hzsi":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.asinh=function(){return this.throwIfDisposed(),(0,s.asinh)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"Qkqd":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.atan=function(){return this.throwIfDisposed(),(0,t.atan)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"EWAD":[function(require,module,exports) {
"use strict";var t=require("../../ops/atan2"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.atan2=function(r){return this.throwIfDisposed(),(0,t.atan2)(this,r)};
},{"../../ops/atan2":"Yz4Z","../../tensor":"olbE"}],"NXhq":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.atanh=function(){return this.throwIfDisposed(),(0,t.atanh)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"BCFe":[function(require,module,exports) {
"use strict";var o=require("../../ops/avg_pool"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.avgPool=function(r,e,s,t){return this.throwIfDisposed(),(0,o.avgPool)(this,r,e,s,t)};
},{"../../ops/avg_pool":"YRN0","../../tensor":"olbE"}],"uC4Y":[function(require,module,exports) {
"use strict";var t=require("../../ops/batch_to_space_nd"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.batchToSpaceND=function(e,o){return this.throwIfDisposed(),(0,t.batchToSpaceND)(this,e,o)};
},{"../../ops/batch_to_space_nd":"cbr1","../../tensor":"olbE"}],"rx8P":[function(require,module,exports) {
"use strict";var r=require("../../ops/batchnorm"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.batchNorm=function(t,o,e,s,i){return this.throwIfDisposed(),(0,r.batchNorm)(this,t,o,e,s,i)};
},{"../../ops/batchnorm":"tSVR","../../tensor":"olbE"}],"L434":[function(require,module,exports) {
"use strict";var o=require("../../ops/broadcast_to"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.broadcastTo=function(r){return this.throwIfDisposed(),(0,o.broadcastTo)(this,r)};
},{"../../ops/broadcast_to":"l9pe","../../tensor":"olbE"}],"GUHp":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.cast=function(t){return this.throwIfDisposed(),(0,s.cast)(this,t)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"mogJ":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.ceil=function(){return this.throwIfDisposed(),(0,e.ceil)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"NPmo":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.clipByValue=function(r,s){return this.throwIfDisposed(),(0,e.clipByValue)(this,r,s)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"qvnn":[function(require,module,exports) {
"use strict";var t=require("../../ops/concat"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.concat=function(e,r){return this.throwIfDisposed(),e instanceof o.Tensor&&(e=[e]),(0,t.concat)([this,...e],r)};
},{"../../ops/concat":"E9ft","../../tensor":"olbE"}],"Jfki":[function(require,module,exports) {
"use strict";var o=require("../../ops/conv1d"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.conv1d=function(r,e,s,t,n,i){return this.throwIfDisposed(),(0,o.conv1d)(this,r,e,s,t,n,i)};
},{"../../ops/conv1d":"djzz","../../tensor":"olbE"}],"ZdjY":[function(require,module,exports) {
"use strict";var s=require("../../ops/conv2d_transpose"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.conv2dTranspose=function(o,r,e,t,n){return this.throwIfDisposed(),(0,s.conv2dTranspose)(this,o,r,e,t,n)};
},{"../../ops/conv2d_transpose":"VZ9k","../../tensor":"olbE"}],"wcHX":[function(require,module,exports) {
"use strict";var o=require("../../ops/conv2d"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.conv2d=function(r,e,s,t,n,i){return this.throwIfDisposed(),(0,o.conv2d)(this,r,e,s,t,n,i)};
},{"../../ops/conv2d":"rCpA","../../tensor":"olbE"}],"Pcpu":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.cos=function(){return this.throwIfDisposed(),(0,s.cos)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"sKET":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.cosh=function(){return this.throwIfDisposed(),(0,s.cosh)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"gLrq":[function(require,module,exports) {
"use strict";var r=require("../../ops/cumprod"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.cumprod=function(o,e,s){return this.throwIfDisposed(),(0,r.cumprod)(this,o,e,s)};
},{"../../ops/cumprod":"VPUf","../../tensor":"olbE"}],"JBig":[function(require,module,exports) {
"use strict";var s=require("../../ops/cumsum"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.cumsum=function(r,e,t){return this.throwIfDisposed(),(0,s.cumsum)(this,r,e,t)};
},{"../../ops/cumsum":"BWsp","../../tensor":"olbE"}],"fTS8":[function(require,module,exports) {
"use strict";var e=require("../../ops/depth_to_space"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.depthToSpace=function(t,o){return this.throwIfDisposed(),(0,e.depthToSpace)(this,t,o)};
},{"../../ops/depth_to_space":"Vh4l","../../tensor":"olbE"}],"ppbU":[function(require,module,exports) {
"use strict";var e=require("../../ops/depthwise_conv2d"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.depthwiseConv2d=function(s,t,o,r,i,n){return this.throwIfDisposed(),(0,e.depthwiseConv2d)(this,s,t,o,r,i,n)};
},{"../../ops/depthwise_conv2d":"WWch","../../tensor":"olbE"}],"S2YS":[function(require,module,exports) {
"use strict";var t=require("../../ops/dilation2d"),i=require("../../tensor");(0,i.getGlobalTensorClass)().prototype.dilation2d=function(i,o,r,e,s){return this.throwIfDisposed(),(0,t.dilation2d)(this,i,o,r,e,s)};
},{"../../ops/dilation2d":"vqF1","../../tensor":"olbE"}],"XvVF":[function(require,module,exports) {
"use strict";var o=require("../../ops/div_no_nan"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.divNoNan=function(r){return this.throwIfDisposed(),(0,o.divNoNan)(this,r)};
},{"../../ops/div_no_nan":"htQY","../../tensor":"olbE"}],"wacG":[function(require,module,exports) {
"use strict";var r=require("../../ops/div"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.div=function(e){return this.throwIfDisposed(),(0,r.div)(this,e)};
},{"../../ops/div":"M4To","../../tensor":"olbE"}],"oo4m":[function(require,module,exports) {
"use strict";var t=require("../../ops/dot"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.dot=function(o){return this.throwIfDisposed(),(0,t.dot)(this,o)};
},{"../../ops/dot":"uwXW","../../tensor":"olbE"}],"qCkW":[function(require,module,exports) {
"use strict";var e=require("../../ops/elu"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.elu=function(){return this.throwIfDisposed(),(0,e.elu)(this)};
},{"../../ops/elu":"qaoR","../../tensor":"olbE"}],"W6r1":[function(require,module,exports) {
"use strict";var e=require("../../ops/equal"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.equal=function(r){return this.throwIfDisposed(),(0,e.equal)(this,r)};
},{"../../ops/equal":"LJLN","../../tensor":"olbE"}],"bofv":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.erf=function(){return this.throwIfDisposed(),(0,r.erf)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"nA9s":[function(require,module,exports) {
"use strict";var e=require("../../ops/euclidean_norm"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.euclideanNorm=function(r,o){return this.throwIfDisposed(),(0,e.euclideanNorm)(this,r,o)};
},{"../../ops/euclidean_norm":"qIXk","../../tensor":"olbE"}],"itDg":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.exp=function(){return this.throwIfDisposed(),(0,e.exp)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"JrdR":[function(require,module,exports) {
"use strict";var e=require("../../ops/expand_dims"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.expandDims=function(s){return this.throwIfDisposed(),(0,e.expandDims)(this,s)};
},{"../../ops/expand_dims":"wPBp","../../tensor":"olbE"}],"IXfY":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.expm1=function(){return this.throwIfDisposed(),(0,e.expm1)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"BWNV":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.fft=function(){return this.throwIfDisposed(),(0,t.fft)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"ceo1":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.flatten=function(){return this.throwIfDisposed(),(0,e.reshape)(this,[this.size])};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE"}],"eNuf":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.floor=function(){return this.throwIfDisposed(),(0,o.floor)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"WLLE":[function(require,module,exports) {
"use strict";var o=require("../../ops/floorDiv"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.floorDiv=function(r){return this.throwIfDisposed(),(0,o.floorDiv)(this,r)};
},{"../../ops/floorDiv":"qn4k","../../tensor":"olbE"}],"nBEo":[function(require,module,exports) {
"use strict";var r=require("../../ops/gather"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.gather=function(e,t){return this.throwIfDisposed(),(0,r.gather)(this,e,t)};
},{"../../ops/gather":"qpmj","../../tensor":"olbE"}],"yogO":[function(require,module,exports) {
"use strict";var e=require("../../ops/greater_equal"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.greaterEqual=function(r){return this.throwIfDisposed(),(0,e.greaterEqual)(this,r)};
},{"../../ops/greater_equal":"nMa8","../../tensor":"olbE"}],"V47r":[function(require,module,exports) {
"use strict";var r=require("../../ops/greater"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.greater=function(e){return this.throwIfDisposed(),(0,r.greater)(this,e)};
},{"../../ops/greater":"xzex","../../tensor":"olbE"}],"T0A4":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.ifft=function(){return this.throwIfDisposed(),(0,t.ifft)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"FE3V":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.irfft=function(){return this.throwIfDisposed(),(0,r.irfft)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"YM3O":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.isFinite=function(){return this.throwIfDisposed(),(0,s.isFinite)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"OSD8":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.isInf=function(){return this.throwIfDisposed(),(0,s.isInf)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"OMGh":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.isNaN=function(){return this.throwIfDisposed(),(0,s.isNaN)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"rBIb":[function(require,module,exports) {
"use strict";var e=require("../../ops/leaky_relu"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.leakyRelu=function(r){return this.throwIfDisposed(),(0,e.leakyRelu)(this,r)};
},{"../../ops/leaky_relu":"TUfJ","../../tensor":"olbE"}],"xPH3":[function(require,module,exports) {
"use strict";var s=require("../../ops/less_equal"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,s.lessEqual)(this,e)};
},{"../../ops/less_equal":"BA1Q","../../tensor":"olbE"}],"jp5R":[function(require,module,exports) {
"use strict";var s=require("../../ops/less"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.less=function(e){return this.throwIfDisposed(),(0,s.less)(this,e)};
},{"../../ops/less":"pOeu","../../tensor":"olbE"}],"xHYW":[function(require,module,exports) {
"use strict";var o=require("../../ops/local_response_normalization"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.localResponseNormalization=function(e,s,r,t){return this.throwIfDisposed(),(0,o.localResponseNormalization)(this,e,s,r,t)};
},{"../../ops/local_response_normalization":"duxs","../../tensor":"olbE"}],"NHSD":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,o.logSigmoid)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"A5SX":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.logSoftmax=function(t){return this.throwIfDisposed(),(0,o.logSoftmax)(this,t)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"IwyF":[function(require,module,exports) {
"use strict";var e=require("../../ops/log_sum_exp"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.logSumExp=function(o,r){return this.throwIfDisposed(),(0,e.logSumExp)(this,o,r)};
},{"../../ops/log_sum_exp":"heyF","../../tensor":"olbE"}],"YciT":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.log=function(){return this.throwIfDisposed(),(0,o.log)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"yFck":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.log1p=function(){return this.throwIfDisposed(),(0,o.log1p)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"rKeU":[function(require,module,exports) {
"use strict";var o=require("../../ops/logical_and"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.logicalAnd=function(r){return this.throwIfDisposed(),(0,o.logicalAnd)(this,r)};
},{"../../ops/logical_and":"Uxvi","../../tensor":"olbE"}],"OT7h":[function(require,module,exports) {
"use strict";var o=require("../../ops/logical_not"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.logicalNot=function(){return this.throwIfDisposed(),(0,o.logicalNot)(this)};
},{"../../ops/logical_not":"NW6f","../../tensor":"olbE"}],"tRnY":[function(require,module,exports) {
"use strict";var r=require("../../ops/logical_or"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.logicalOr=function(o){return this.throwIfDisposed(),(0,r.logicalOr)(this,o)};
},{"../../ops/logical_or":"SNyQ","../../tensor":"olbE"}],"lNUj":[function(require,module,exports) {
"use strict";var o=require("../../ops/logical_xor"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.logicalXor=function(r){return this.throwIfDisposed(),(0,o.logicalXor)(this,r)};
},{"../../ops/logical_xor":"TWtt","../../tensor":"olbE"}],"z4Qd":[function(require,module,exports) {
"use strict";var t=require("../../ops/mat_mul"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.matMul=function(r,e,s){return this.throwIfDisposed(),(0,t.matMul)(this,r,e,s)};
},{"../../ops/mat_mul":"cPiM","../../tensor":"olbE"}],"MF3X":[function(require,module,exports) {
"use strict";var o=require("../../ops/max_pool"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.maxPool=function(r,e,s,t){return this.throwIfDisposed(),(0,o.maxPool)(this,r,e,s,t)};
},{"../../ops/max_pool":"KHqM","../../tensor":"olbE"}],"ih5h":[function(require,module,exports) {
"use strict";var r=require("../../ops/max"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.max=function(e,s){return this.throwIfDisposed(),(0,r.max)(this,e,s)};
},{"../../ops/max":"lGXH","../../tensor":"olbE"}],"ViEi":[function(require,module,exports) {
"use strict";var r=require("../../ops/maximum"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.maximum=function(e){return this.throwIfDisposed(),(0,r.maximum)(this,e)};
},{"../../ops/maximum":"QvEy","../../tensor":"olbE"}],"gpwY":[function(require,module,exports) {
"use strict";var e=require("../../ops/mean"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.mean=function(r,s){return this.throwIfDisposed(),(0,e.mean)(this,r,s)};
},{"../../ops/mean":"I8Ls","../../tensor":"olbE"}],"NGVO":[function(require,module,exports) {
"use strict";var r=require("../../ops/min"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.min=function(e,s){return this.throwIfDisposed(),(0,r.min)(this,e,s)};
},{"../../ops/min":"MWg7","../../tensor":"olbE"}],"cuDB":[function(require,module,exports) {
"use strict";var i=require("../../ops/minimum"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.minimum=function(r){return this.throwIfDisposed(),(0,i.minimum)(this,r)};
},{"../../ops/minimum":"AUvU","../../tensor":"olbE"}],"M6H2":[function(require,module,exports) {
"use strict";var r=require("../../ops/mirror_pad"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.mirrorPad=function(o,e){return this.throwIfDisposed(),(0,r.mirrorPad)(this,o,e)};
},{"../../ops/mirror_pad":"Cl4A","../../tensor":"olbE"}],"EAUc":[function(require,module,exports) {
"use strict";var o=require("../../ops/mod"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.mod=function(r){return this.throwIfDisposed(),(0,o.mod)(this,r)};
},{"../../ops/mod":"ffDY","../../tensor":"olbE"}],"AOws":[function(require,module,exports) {
"use strict";var r=require("../../ops/mul"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.mul=function(e){return this.throwIfDisposed(),(0,r.mul)(this,e)};
},{"../../ops/mul":"Nt3M","../../tensor":"olbE"}],"nErZ":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.neg=function(){return this.throwIfDisposed(),(0,e.neg)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"cVuG":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.norm=function(o,s,e){return this.throwIfDisposed(),(0,r.norm)(this,o,s,e)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"qZmu":[function(require,module,exports) {
"use strict";var t=require("../../ops/not_equal"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.notEqual=function(e){return this.throwIfDisposed(),(0,t.notEqual)(this,e)};
},{"../../ops/not_equal":"c6DU","../../tensor":"olbE"}],"jDMn":[function(require,module,exports) {
"use strict";var o=require("../../ops/one_hot"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.oneHot=function(e,t=1,r=0){return this.throwIfDisposed(),(0,o.oneHot)(this,e,t,r)};
},{"../../ops/one_hot":"vztq","../../tensor":"olbE"}],"V09C":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,e.onesLike)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"M5fD":[function(require,module,exports) {
"use strict";var r=require("../../ops/pad"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.pad=function(e,s){return this.throwIfDisposed(),(0,r.pad)(this,e,s)};
},{"../../ops/pad":"H66W","../../tensor":"olbE"}],"jNut":[function(require,module,exports) {
"use strict";var o=require("../../ops/pool"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.pool=function(r,e,s,t,i,p){return this.throwIfDisposed(),(0,o.pool)(this,r,e,s,t,i,p)};
},{"../../ops/pool":"FVPb","../../tensor":"olbE"}],"hdUZ":[function(require,module,exports) {
"use strict";var o=require("../../ops/pow"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.pow=function(r){return this.throwIfDisposed(),(0,o.pow)(this,r)};
},{"../../ops/pow":"WjtV","../../tensor":"olbE"}],"gFVh":[function(require,module,exports) {
"use strict";var r=require("../../ops/prelu"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.prelu=function(e){return this.throwIfDisposed(),(0,r.prelu)(this,e)};
},{"../../ops/prelu":"dn3A","../../tensor":"olbE"}],"qrwQ":[function(require,module,exports) {
"use strict";var r=require("../../ops/prod"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.prod=function(o,e){return this.throwIfDisposed(),(0,r.prod)(this,o,e)};
},{"../../ops/prod":"zUPs","../../tensor":"olbE"}],"VAEa":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.reciprocal=function(){return this.throwIfDisposed(),(0,r.reciprocal)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"LpvH":[function(require,module,exports) {
"use strict";var r=require("../../ops/relu"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.relu=function(){return this.throwIfDisposed(),(0,r.relu)(this)};
},{"../../ops/relu":"f1ks","../../tensor":"olbE"}],"gfqF":[function(require,module,exports) {
"use strict";var r=require("../../ops/relu6"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.relu6=function(){return this.throwIfDisposed(),(0,r.relu6)(this)};
},{"../../ops/relu6":"ljlp","../../tensor":"olbE"}],"p3ch":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.reshapeAs=function(s){return this.throwIfDisposed(),(0,e.reshape)(this,s.shape)};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE"}],"lkCI":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.reshape=function(r){return this.throwIfDisposed(),(0,e.reshape)(this,r)};
},{"../../ops/reshape":"IoLG","../../tensor":"olbE"}],"cYmM":[function(require,module,exports) {
"use strict";var e=require("../../ops/image/resize_bilinear"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.resizeBilinear=function(r,i,s){return this.throwIfDisposed(),(0,e.resizeBilinear)(this,r,i,s)};
},{"../../ops/image/resize_bilinear":"GuWx","../../tensor":"olbE"}],"RhMM":[function(require,module,exports) {
"use strict";var e=require("../../ops/image/resize_nearest_neighbor"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.resizeNearestNeighbor=function(r,s,i){return this.throwIfDisposed(),(0,e.resizeNearestNeighbor)(this,r,s,i)};
},{"../../ops/image/resize_nearest_neighbor":"tok5","../../tensor":"olbE"}],"o76i":[function(require,module,exports) {
"use strict";var e=require("../../ops/reverse"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.reverse=function(r){return this.throwIfDisposed(),(0,e.reverse)(this,r)};
},{"../../ops/reverse":"lVoL","../../tensor":"olbE"}],"HeD2":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.rfft=function(){return this.throwIfDisposed(),(0,r.rfft)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"VgBk":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.round=function(){return this.throwIfDisposed(),(0,r.round)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"Hyd6":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.rsqrt=function(){return this.throwIfDisposed(),(0,r.rsqrt)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"YhyM":[function(require,module,exports) {
"use strict";var e=require("../../ops/selu"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.selu=function(){return this.throwIfDisposed(),(0,e.selu)(this)};
},{"../../ops/selu":"SPBE","../../tensor":"olbE"}],"Z5v1":[function(require,module,exports) {
"use strict";var e=require("../../ops/separable_conv2d"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.separableConv2d=function(r,s,o,t,a,n){return this.throwIfDisposed(),(0,e.separableConv2d)(this,r,s,o,t,a,n)};
},{"../../ops/separable_conv2d":"rIZG","../../tensor":"olbE"}],"o5bP":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,s.sigmoid)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"MojR":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.sign=function(){return this.throwIfDisposed(),(0,s.sign)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"HpQp":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.sin=function(){return this.throwIfDisposed(),(0,s.sin)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"gzF4":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.sinh=function(){return this.throwIfDisposed(),(0,s.sinh)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"g61M":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.slice=function(e,r){return this.throwIfDisposed(),(0,s.slice)(this,e,r)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"CLZy":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.softmax=function(t){return this.throwIfDisposed(),(0,s.softmax)(this,t)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"c0Sv":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.softplus=function(){return this.throwIfDisposed(),(0,s.softplus)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"hWWz":[function(require,module,exports) {
"use strict";var t=require("../../ops/space_to_batch_nd"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.spaceToBatchND=function(e,s){return this.throwIfDisposed(),(0,t.spaceToBatchND)(this,e,s)};
},{"../../ops/space_to_batch_nd":"pe9T","../../tensor":"olbE"}],"nv7q":[function(require,module,exports) {
"use strict";var s=require("../../ops/split"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.split=function(t,r){return this.throwIfDisposed(),(0,s.split)(this,t,r)};
},{"../../ops/split":"zRhz","../../tensor":"olbE"}],"dYyL":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,r.sqrt)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"uSZZ":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.square=function(){return this.throwIfDisposed(),(0,r.square)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"rzxR":[function(require,module,exports) {
"use strict";var e=require("../../ops/squared_difference"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.squaredDifference=function(r){return this.throwIfDisposed(),(0,e.squaredDifference)(this,r)};
},{"../../ops/squared_difference":"cPro","../../tensor":"olbE"}],"gF5D":[function(require,module,exports) {
"use strict";var e=require("../../ops/squeeze"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.squeeze=function(s){return this.throwIfDisposed(),(0,e.squeeze)(this,s)};
},{"../../ops/squeeze":"w9nu","../../tensor":"olbE"}],"btQ6":[function(require,module,exports) {
"use strict";var s=require("../../ops/stack"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.stack=function(e,r){this.throwIfDisposed();const o=e instanceof t.Tensor?[this,e]:[this,...e];return(0,s.stack)(o,r)};
},{"../../ops/stack":"naC9","../../tensor":"olbE"}],"YrT5":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),e=require("../../tensor");(0,e.getGlobalTensorClass)().prototype.step=function(e){return this.throwIfDisposed(),(0,s.step)(this,e)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"Q7Ws":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.stridedSlice=function(r,s,t,i,o,d,l,n){return this.throwIfDisposed(),(0,e.stridedSlice)(this,r,s,t,i,o,d,l,n)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"lFhY":[function(require,module,exports) {
"use strict";var s=require("../../ops/sub"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.sub=function(r){return this.throwIfDisposed(),(0,s.sub)(this,r)};
},{"../../ops/sub":"w3Uc","../../tensor":"olbE"}],"dbXJ":[function(require,module,exports) {
"use strict";var s=require("../../ops/sum"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.sum=function(r,e){return this.throwIfDisposed(),(0,s.sum)(this,r,e)};
},{"../../ops/sum":"WgrX","../../tensor":"olbE"}],"JTW0":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.tan=function(){return this.throwIfDisposed(),(0,t.tan)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"W91t":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.tanh=function(){return this.throwIfDisposed(),(0,t.tanh)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"jRyU":[function(require,module,exports) {
"use strict";var e=require("../../ops/tile"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.tile=function(t){return this.throwIfDisposed(),(0,e.tile)(this,t)};
},{"../../ops/tile":"YKMi","../../tensor":"olbE"}],"lMBr":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.toBool=function(){return this.throwIfDisposed(),(0,o.cast)(this,"bool")};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"nMvm":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,t.cast)(this,"float32")};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"dOfG":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),s=require("../../tensor");(0,s.getGlobalTensorClass)().prototype.toInt=function(){return this.throwIfDisposed(),(0,t.cast)(this,"int32")};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"c6yT":[function(require,module,exports) {
"use strict";var t=require("../../ops/topk"),o=require("../../tensor");(0,o.getGlobalTensorClass)().prototype.topk=function(o,r){return this.throwIfDisposed(),(0,t.topk)(this,o,r)};
},{"../../ops/topk":"iC1w","../../tensor":"olbE"}],"NKef":[function(require,module,exports) {
"use strict";var s=require("../../ops/transpose"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.transpose=function(r){return this.throwIfDisposed(),(0,s.transpose)(this,r)};
},{"../../ops/transpose":"gequ","../../tensor":"olbE"}],"inkw":[function(require,module,exports) {
"use strict";var e=require("../../ops/unique"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.unique=function(r){return this.throwIfDisposed(),(0,e.unique)(this,r)};
},{"../../ops/unique":"WLYA","../../tensor":"olbE"}],"BNHY":[function(require,module,exports) {
"use strict";var e=require("../../ops/unsorted_segment_sum"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.unsortedSegmentSum=function(t,s){return this.throwIfDisposed(),(0,e.unsortedSegmentSum)(this,t,s)};
},{"../../ops/unsorted_segment_sum":"gOKP","../../tensor":"olbE"}],"JfY2":[function(require,module,exports) {
"use strict";var s=require("../../ops/unstack"),t=require("../../tensor");(0,t.getGlobalTensorClass)().prototype.unstack=function(t){return this.throwIfDisposed(),(0,s.unstack)(this,t)};
},{"../../ops/unstack":"Vfy7","../../tensor":"olbE"}],"EBed":[function(require,module,exports) {
"use strict";var e=require("../../ops/where"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.where=function(r,s){return this.throwIfDisposed(),(0,e.where)(r,this,s)};
},{"../../ops/where":"ALar","../../tensor":"olbE"}],"T4J6":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");(0,r.getGlobalTensorClass)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,e.zerosLike)(this)};
},{"../../ops/ops":"OgAK","../../tensor":"olbE"}],"uq8x":[function(require,module,exports) {
"use strict";require("./abs"),require("./acos"),require("./acosh"),require("./add"),require("./all"),require("./any"),require("./arg_max"),require("./arg_min"),require("./as_scalar"),require("./as_type"),require("./as1d"),require("./as2d"),require("./as3d"),require("./as4d"),require("./as5d"),require("./asin"),require("./asinh"),require("./atan"),require("./atan2"),require("./atanh"),require("./avg_pool"),require("./batch_to_space_nd"),require("./batchnorm"),require("./broadcast_to"),require("./cast"),require("./ceil"),require("./clip_by_value"),require("./concat"),require("./conv1d"),require("./conv2d_transpose"),require("./conv2d"),require("./cos"),require("./cosh"),require("./cumprod"),require("./cumsum"),require("./depth_to_space"),require("./depthwise_conv2d"),require("./dilation2d"),require("./div_no_nan"),require("./div"),require("./dot"),require("./elu"),require("./equal"),require("./erf"),require("./euclidean_norm"),require("./exp"),require("./expand_dims"),require("./expm1"),require("./fft"),require("./flatten"),require("./floor"),require("./floorDiv"),require("./gather"),require("./greater_equal"),require("./greater"),require("./ifft"),require("./irfft"),require("./is_finite"),require("./is_inf"),require("./is_nan"),require("./leaky_relu"),require("./less_equal"),require("./less"),require("./local_response_normalization"),require("./log_sigmoid"),require("./log_softmax"),require("./log_sum_exp"),require("./log"),require("./log1p"),require("./logical_and"),require("./logical_not"),require("./logical_or"),require("./logical_xor"),require("./mat_mul"),require("./max_pool"),require("./max"),require("./maximum"),require("./mean"),require("./min"),require("./minimum"),require("./mirror_pad"),require("./mod"),require("./mul"),require("./neg"),require("./norm"),require("./not_equal"),require("./one_hot"),require("./ones_like"),require("./pad"),require("./pool"),require("./pow"),require("./prelu"),require("./prod"),require("./reciprocal"),require("./relu"),require("./relu6"),require("./reshape_as"),require("./reshape"),require("./resize_bilinear"),require("./resize_nearest_neighbor"),require("./reverse"),require("./rfft"),require("./round"),require("./rsqrt"),require("./selu"),require("./separable_conv2d"),require("./sigmoid"),require("./sign"),require("./sin"),require("./sinh"),require("./slice"),require("./softmax"),require("./softplus"),require("./space_to_batch_nd"),require("./split"),require("./sqrt"),require("./square"),require("./squared_difference"),require("./squeeze"),require("./stack"),require("./step"),require("./strided_slice"),require("./sub"),require("./sum"),require("./tan"),require("./tanh"),require("./tile"),require("./to_bool"),require("./to_float"),require("./to_int"),require("./topk"),require("./transpose"),require("./unique"),require("./unsorted_segment_sum"),require("./unstack"),require("./where"),require("./zeros_like");
},{"./abs":"C1Zj","./acos":"z8kB","./acosh":"vbY1","./add":"bHQk","./all":"hzXW","./any":"ewEE","./arg_max":"HWCt","./arg_min":"TaWN","./as_scalar":"LY9P","./as_type":"rL3t","./as1d":"V3rs","./as2d":"KcwE","./as3d":"FzBh","./as4d":"hfT4","./as5d":"drNr","./asin":"oTE3","./asinh":"Hzsi","./atan":"Qkqd","./atan2":"EWAD","./atanh":"NXhq","./avg_pool":"BCFe","./batch_to_space_nd":"uC4Y","./batchnorm":"rx8P","./broadcast_to":"L434","./cast":"GUHp","./ceil":"mogJ","./clip_by_value":"NPmo","./concat":"qvnn","./conv1d":"Jfki","./conv2d_transpose":"ZdjY","./conv2d":"wcHX","./cos":"Pcpu","./cosh":"sKET","./cumprod":"gLrq","./cumsum":"JBig","./depth_to_space":"fTS8","./depthwise_conv2d":"ppbU","./dilation2d":"S2YS","./div_no_nan":"XvVF","./div":"wacG","./dot":"oo4m","./elu":"qCkW","./equal":"W6r1","./erf":"bofv","./euclidean_norm":"nA9s","./exp":"itDg","./expand_dims":"JrdR","./expm1":"IXfY","./fft":"BWNV","./flatten":"ceo1","./floor":"eNuf","./floorDiv":"WLLE","./gather":"nBEo","./greater_equal":"yogO","./greater":"V47r","./ifft":"T0A4","./irfft":"FE3V","./is_finite":"YM3O","./is_inf":"OSD8","./is_nan":"OMGh","./leaky_relu":"rBIb","./less_equal":"xPH3","./less":"jp5R","./local_response_normalization":"xHYW","./log_sigmoid":"NHSD","./log_softmax":"A5SX","./log_sum_exp":"IwyF","./log":"YciT","./log1p":"yFck","./logical_and":"rKeU","./logical_not":"OT7h","./logical_or":"tRnY","./logical_xor":"lNUj","./mat_mul":"z4Qd","./max_pool":"MF3X","./max":"ih5h","./maximum":"ViEi","./mean":"gpwY","./min":"NGVO","./minimum":"cuDB","./mirror_pad":"M6H2","./mod":"EAUc","./mul":"AOws","./neg":"nErZ","./norm":"cVuG","./not_equal":"qZmu","./one_hot":"jDMn","./ones_like":"V09C","./pad":"M5fD","./pool":"jNut","./pow":"hdUZ","./prelu":"gFVh","./prod":"qrwQ","./reciprocal":"VAEa","./relu":"LpvH","./relu6":"gfqF","./reshape_as":"p3ch","./reshape":"lkCI","./resize_bilinear":"cYmM","./resize_nearest_neighbor":"RhMM","./reverse":"o76i","./rfft":"HeD2","./round":"VgBk","./rsqrt":"Hyd6","./selu":"YhyM","./separable_conv2d":"Z5v1","./sigmoid":"o5bP","./sign":"MojR","./sin":"HpQp","./sinh":"gzF4","./slice":"g61M","./softmax":"CLZy","./softplus":"c0Sv","./space_to_batch_nd":"hWWz","./split":"nv7q","./sqrt":"dYyL","./square":"uSZZ","./squared_difference":"rzxR","./squeeze":"gF5D","./stack":"btQ6","./step":"YrT5","./strided_slice":"Q7Ws","./sub":"lFhY","./sum":"dbXJ","./tan":"JTW0","./tanh":"W91t","./tile":"jRyU","./to_bool":"lMBr","./to_float":"nMvm","./to_int":"dOfG","./topk":"c6yT","./transpose":"NKef","./unique":"inkw","./unsorted_segment_sum":"BNHY","./unstack":"JfY2","./where":"EBed","./zeros_like":"T4J6"}],"T5Wn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValueError=exports.RuntimeError=exports.NotImplementedError=exports.IndexError=exports.AttributeError=exports.AssertionError=void 0;class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}exports.AttributeError=r;class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}}exports.RuntimeError=t;class e extends Error{constructor(r){super(r),Object.setPrototypeOf(this,e.prototype)}}exports.ValueError=e;class o extends Error{constructor(r){super(r),Object.setPrototypeOf(this,o.prototype)}}exports.NotImplementedError=o;class s extends Error{constructor(r){super(r),Object.setPrototypeOf(this,s.prototype)}}exports.AssertionError=s;class p extends Error{constructor(r){super(r),Object.setPrototypeOf(this,p.prototype)}}exports.IndexError=p;
},{}],"PY6q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LruCache=void 0;class e{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}exports.LruCache=e;
},{}],"jSJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=n,exports.assertPositiveInteger=j,exports.checkArrayTypeAndLength=x,exports.checkStringTypeUnionValue=$,exports.count=o,exports.debounce=O,exports.deserializeKerasObject=y,exports.formatAsFriendlyString=A,exports.getCartesianProductOfValues=E,exports.isObjectEmpty=m,exports.mapActivationToFusedKernel=v,exports.numberCompare=g,exports.objectListUid=a,exports.pyListRepeat=r,exports.reverseNumberCompare=d,exports.serializeKerasObject=f,exports.singletonOrArray=s,exports.stringToDType=h,exports.stringsEqual=w,exports.toCamelCase=u,exports.toList=i,exports.toSnakeCase=l,exports.unique=b;var e=require("@tensorflow/tfjs-core"),t=require("../errors");function r(e,t){if(Array.isArray(e)){let r=[];for(let n=0;n<t;n++)r=r.concat(e);return r}{const r=new Array(t);return r.fill(e),r}}function n(e,r){if(!e)throw new t.AssertionError(r)}function o(e,t){let r=0;for(const n of e)n===t&&r++;return r}function s(e){return 1===e.length?e[0]:e}function i(e){return Array.isArray(e)?e:[e]}function a(e){const r=i(e);let n="";for(const o of r){if(null==o.id)throw new t.ValueError(`Object ${o} passed to objectListUid without an id`);""!==n&&(n+=", "),n=`${n}${Math.abs(o.id)}`}return n}function l(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function u(e){return e.length<=1?e:-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let c={};function f(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function p(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(e=>p(e));else{const t=Object.keys(e);for(const r of t){const t=e[r];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?p(t):e[r]=t.value)}}}function y(e,r={},n={},o="object",s=!1){if("string"==typeof e){const s=e;let i;if(s in n)i=n[s];else if(s in c)i=c[s];else if(null==(i=r[s]))throw new t.ValueError(`Unknown ${o}: ${e}. `+"This may be due to one of the following reasons:\n"+`1. The ${o} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${o} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");return i}{const i=e;if(null==i.className||null==i.config)throw new t.ValueError(`${o}: Improper config format: `+`${JSON.stringify(i)}.\n`+"'className' and 'config' must set.");const a=i.className;let l,u;if(a in n?[l,u]=n[a]:a in c?[l,u]=c.className:a in r&&([l,u]=r[a]),null==l)throw new t.ValueError(`Unknown ${o}: ${a}. `+"This may be due to one of the following reasons:\n"+`1. The ${o} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${o} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");if(null!=u){const e={};for(const n of Object.keys(c))e[n]=c[n];for(const o of Object.keys(n))e[o]=n[o];i.config.customObjects=e;const t=Object.assign({},c);for(const o of Object.keys(n))c[o]=n[o];p(i.config);const r=u(l,i.config,n,s);return c=Object.assign({},t),r}{const e=Object.assign({},c);for(const r of Object.keys(n))c[r]=n[r];const t=new l(i.config);return c=Object.assign({},e),t}}}function g(e,t){return e<t?-1:e>t?1:0}function d(e,t){return-1*g(e,t)}function h(e){switch(e){case"float32":return"float32";default:throw new t.ValueError(`Invalid dtype: ${e}`)}}function w(e,t){if(null==e||null==t)return e===t;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function b(e){if(null==e)return e;const t=[];for(const r of e)-1===t.indexOf(r)&&t.push(r);return t}function m(e){if(null==e)throw new t.ValueError(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function $(e,r,n){if(null!=n&&e.indexOf(n)<0)throw new t.ValueError(`${n} is not a valid ${r}.  Valid values are ${e} or null/undefined.`)}function x(e,t,r=0,o=1/0){return n(r>=0),n(o>=r),Array.isArray(e)&&e.length>=r&&e.length<=o&&e.every(e=>typeof e===t)}function j(t,r){Array.isArray(t)?(e.util.assert(t.length>0,()=>`${r} is unexpectedly an empty array.`),t.forEach((e,t)=>j(e,`element ${t+1} of ${r}`))):e.util.assert(Number.isInteger(t)&&t>0,()=>`Expected ${r} to be a positive integer, but got `+`${A(t)}.`)}function A(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>A(e)).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}function O(t,r,n){let o,s=null!=n?n():e.util.now();return(...i)=>{const a=null!=n?n():e.util.now();return a-s<r?o:(s=a,o=t(...i))}}function v(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function E(...e){n(e.length>0,"arrayOfValues is empty");for(const t of e)n(Array.isArray(t),"one of the values is not an array"),n(t.length>0,"one of the values is empty");return e.reduce((e,t)=>0===e.length?t.map(e=>[e]):t.map(t=>e.map(e=>[...e,t])).reduce((e,t)=>e.concat(t),[]),[])}
},{"@tensorflow/tfjs-core":"nPFy","../errors":"T5Wn"}],"LdP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNextUniqueTensorId=t,exports.getUid=r;let e=0;function t(){return e++}const n={};function r(e=""){return e in n||(n[e]=0),n[e]+=1,e+n[e].toString()}
},{}],"g7Ql":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VALID_SAMPLE_WEIGHT_MODES=exports.VALID_POOL_MODE_VALUES=exports.VALID_PADDING_MODE_VALUES=exports.VALID_INTERPOLATION_FORMAT_VALUES=exports.VALID_DATA_FORMAT_VALUES=exports.VALID_BIDIRECTIONAL_MERGE_MODES=void 0;const _=["channelsFirst","channelsLast"];exports.VALID_DATA_FORMAT_VALUES=_;const A=["nearest","bilinear"];exports.VALID_INTERPOLATION_FORMAT_VALUES=A;const s=["valid","same","causal"];exports.VALID_PADDING_MODE_VALUES=s;const e=["max","avg"];exports.VALID_POOL_MODE_VALUES=e;const L=["sum","mul","concat","ave"];exports.VALID_BIDIRECTIONAL_MERGE_MODES=L;const t=["temporal"];exports.VALID_SAMPLE_WEIGHT_MODES=t;
},{}],"NirA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkDataFormat=o,exports.checkInterpolationFormat=r,exports.checkPaddingMode=c,exports.checkPoolMode=a,exports.getScopedTensorName=_,exports.getUniqueTensorName=h,exports.isValidTensorName=A,exports.nameScope=u;var e=require("./keras_format/common"),t=require("./utils/generic_utils");const n=new Map;function o(n){(0,t.checkStringTypeUnionValue)(e.VALID_DATA_FORMAT_VALUES,"DataFormat",n)}function r(n){(0,t.checkStringTypeUnionValue)(e.VALID_INTERPOLATION_FORMAT_VALUES,"InterpolationFormat",n)}function c(n){(0,t.checkStringTypeUnionValue)(e.VALID_PADDING_MODE_VALUES,"PaddingMode",n)}function a(n){(0,t.checkStringTypeUnionValue)(e.VALID_POOL_MODE_VALUES,"PoolMode",n)}const i=[],s="/";function u(e,t){i.push(e);try{const e=t();return i.pop(),e}catch(n){throw i.pop(),n}}function p(){return 0===i.length?"":i.join(s)+s}function _(e){if(!A(e))throw new Error("Not a valid tensor name: '"+e+"'");return p()+e}function h(e){if(!A(e))throw new Error("Not a valid tensor name: '"+e+"'");n.has(e)||n.set(e,0);const t=n.get(e);if(n.set(e,n.get(e)+1),t>0){const o=`${e}_${t}`;return n.set(o,1),o}return e}const l=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function A(e){return!!e.match(l)}
},{"./keras_format/common":"g7Ql","./utils/generic_utils":"jSJk"}],"oh9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayProd=r,exports.isInteger=t,exports.max=o,exports.mean=l,exports.median=i,exports.min=n,exports.range=f,exports.sum=u,exports.variance=s;var e=require("../errors");function t(e){return e===parseInt(e.toString(),10)}function r(e,t,r){null==t&&(t=0),null==r&&(r=e.length);let n=1;for(let o=t;o<r;++o)n*=e[o];return n}function n(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let r=0;r<e.length;r++){const n=e[r];n<t&&(t=n)}return t}function o(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let r=0;r<e.length;r++){const n=e[r];n>t&&(t=n)}return t}function u(e){let t=0;for(let r=0;r<e.length;r++){t+=e[r]}return t}function l(e){return u(e)/e.length}function s(e){const t=l(e),r=e.map(e=>e-t);let n=0;for(let o=0;o<r.length;o++){const e=r[o];n+=e*e}return n/e.length}function i(e){const t=e.slice().sort((e,t)=>e-t),r=Math.floor((t.length-1)/2),n=Math.ceil((t.length-1)/2);return r===n?t[r]:(t[r]+t[n])/2}function f(t,r){if(r<t)throw new e.ValueError(`end (${r}) < begin (${t}) is forbidden.`);const n=[];for(let e=t;e<r;++e)n.push(e);return n}
},{"../errors":"T5Wn"}],"OElF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.epsilon=n,exports.imageDataFormat=o,exports.setEpsilon=r;var e=require("@tensorflow/tfjs-core");let t;function n(){return null==t&&(t=(0,e.backend)().epsilon()),t}function r(e){t=e}function o(){return"channelsLast"}
},{"@tensorflow/tfjs-core":"nPFy"}],"sLMb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchFlatten=w,exports.biasAdd=L,exports.cast=l,exports.concatAlongFirstAxis=b,exports.concatenate=g,exports.countParams=h,exports.dot=E,exports.dropout=M,exports.elu=j,exports.expandDims=d,exports.flatten=k,exports.gather=V,exports.getBackend=c,exports.hardSigmoid=B,exports.inTrainPhase=N,exports.isBackendSymbolic=p,exports.oneHot=F,exports.pow=O,exports.randomNormal=$,exports.repeat=f,exports.setBackend=u,exports.sign=v,exports.sliceAlongAxis=y,exports.sliceAlongFirstAxis=x,exports.sliceAlongLastAxis=m,exports.softsign=D,exports.square=q,exports.tile=A;var e=o(require("@tensorflow/tfjs-core")),r=require("../common"),t=require("../errors"),n=o(require("../utils/math_utils")),a=require("./common");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}let i="webgl";function u(r){e.setBackend(r),i=r}function c(){return i}function p(){return!1}function h(e){const r=e.shape;return r.length>0?r.reduce((e,r)=>e*r):1}function l(r,t){return e.cast(r,t)}function d(r,t=-1){const n=r.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(r,n)}function f(r,n){return(0,e.tidy)(()=>{if(2!==r.shape.length)throw new t.ValueError("repeat() expects a rank-2 tensor, but received a "+`rank-${r.shape.length} tensor.`);return A(d(r,1),[1,n,1])})}function k(r){const t=[n.arrayProd(r.shape)];return e.reshape(r,t)}function w(r){if(r.rank<=1)throw new t.ValueError(`batchFlatten requires a minimum rank of 2. Got rank: ${r.rank}.`);const a=[r.shape[0],n.arrayProd(r.shape,1)];return e.reshape(r,a)}function x(r,n,a){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:return e.slice2d(r,[n,0],[a,r.shape[1]]);case 3:return e.slice3d(r,[n,0,0],[a,r.shape[1],r.shape[2]]);case 4:return e.slice4d(r,[n,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3]]);case 5:return e.slice(r,[n,0,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3],r.shape[4]]);case 6:return e.slice(r,[n,0,0,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3],r.shape[4],r.shape[5]]);default:throw new t.ValueError("sliceAlongFirstAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function m(r,n,a){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:return e.slice2d(r,[0,n],[r.shape[0],a]);case 3:return e.slice3d(r,[0,0,n],[r.shape[0],r.shape[1],a]);case 4:return e.slice4d(r,[0,0,0,n],[r.shape[0],r.shape[1],r.shape[2],a]);default:throw new t.ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function y(r,n,a,s){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:switch(s){case 1:return x(r,n,a);case 2:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}case 3:switch(s){case 1:return x(r,n,a);case 2:return e.slice3d(r,[0,n,0],[r.shape[0],a,r.shape[2]]);case 3:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}case 4:switch(s){case 1:return x(r,n,a);case 2:return e.slice4d(r,[0,n,0,0],[r.shape[0],a,r.shape[2],r.shape[3]]);case 3:return e.slice4d(r,[0,0,n,0],[r.shape[0],r.shape[1],a,r.shape[3]]);case 4:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}default:throw new t.ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function g(r,t=-1){let n;return t<0&&(t=0!==(n=r[0].rank)?n:0),t===r[0].rank&&(t=-1),e.concat(r,t)}function b(r,n){switch(r.rank){case 1:return e.concat1d([r,n]);case 2:return e.concat2d([r,n],0);case 3:return e.concat3d([r,n],0);case 4:return e.concat4d([r,n],0);default:throw new t.ValueError("concatAlongFirstAxis() received an unsupported "+`tensor rank: ${r.rank}`)}}function A(r,n){if(Array.isArray(n)||(n=[n]),r.rank!==n.length)throw new t.ValueError(`The length of input n (${n.length}) does not match `+`the number of dimensions in input x (${r.rank})`);return e.tile(r,n)}function $(r,t=0,n=1,a,s){return e.randomNormal(r,t,n,a,s)}function E(r,n,s,o){if(r.rank<2||n.rank<2)throw new t.NotImplementedError("dot requires both inputs to be rank >= 2"+` but got x shape = ${r.shape} and y shape = ${n.shape}`);if(n.rank>=3){if(r.shape.slice(-1)[0]!==n.shape.slice(-2)[0])throw new t.NotImplementedError("If rank y >= 3, then the second last dim"+` of y must equal the last dim of x but got x shape = ${r.shape} and `+` y shape = ${n.shape}`)}if(2===r.rank&&2===n.rank){const t=!1,i=!1;return e.fused.matMul({a:r,b:n,transposeA:t,transposeB:i,bias:o?P(r.rank,o,(0,a.imageDataFormat)()):null,activation:s})}{const t=r.shape.slice(),i=t.pop();r=e.reshape(r,[-1,i]);const u=n.shape.slice(),c=u.pop(),p=u.pop(),h=[...u,c],l=Array.from({length:n.rank},(e,r)=>0===r?n.rank-2:r<=n.rank-2?r-1:r);n=e.reshape(e.transpose(n,l),[p,-1]);const d=[...t,...h],f=!1,k=!1;return e.reshape(e.fused.matMul({a:r,b:n,transposeA:f,transposeB:k,bias:o?P(r.rank,o,(0,a.imageDataFormat)()):null,activation:s}),d)}}function v(r){return(0,e.tidy)(()=>{const t=(0,e.zerosLike)(r),n=(0,e.onesLike)(r);return(0,e.where)(e.equal(r,t),t,(0,e.where)(e.greater(r,(0,e.zerosLike)(r)),n,e.mul(-1,n)))})}function F(r,t){return(0,e.tidy)(()=>{if(1!==r.rank)throw new Error("Only 1D one-hot tensors are supported in the deeplearn backend, at present.");return r=e.cast(r,"int32"),e.cast(e.oneHot(r,t),"float32")})}function V(r,t,n){return(0,e.tidy)(()=>(t=Array.isArray(t)?(0,e.tensor1d)(t,"int32"):e.cast(t,"int32"),e.gather(r,t,n)))}function q(r){return e.mul(r,r)}function O(r,n){return(0,e.tidy)(()=>{if("number"==typeof n&&(n=(0,e.scalar)(Math.round(n),"int32")),"int32"!==n.dtype)throw new t.NotImplementedError(`Non-int32 dtype (${n.dtype}) is not supported by pow() yet`);return e.pow(r,n)})}function P(r,n,a){const s=n.shape;if(1!==n.rank&&n.rank!==r)throw new t.ValueError(`Unexpected bias dimensions: ${n.rank}`+`; expected it to be 1 or ${r}`);if(5===r){if("channelsFirst"===a)return 1===s.length?e.reshape(n,[1,s[0],1,1,1]):e.reshape(n,[1,s[3],s[0],s[1],s[2]]);if("channelsLast"===a)return 1===s.length?e.reshape(n,[1,1,1,1,s[0]]):e.reshape(n,[1].concat(s))}else if(4===r){if("channelsFirst"===a)return 1===s.length?e.reshape(n,[1,s[0],1,1]):e.reshape(n,[1,s[2],s[0],s[1]]);if("channelsLast"===a)return 1===s.length?e.reshape(n,[1,1,1,s[0]]):e.reshape(n,[1].concat(s))}else if(3===r){if("channelsFirst"===a)return 1===s.length?e.reshape(n,[1,s[0],1]):e.reshape(n,[1,s[1],s[0]]);if("channelsLast"===a)return 1===s.length?e.reshape(n,[1,1,s[0]]):e.reshape(n,[1].concat(s))}else if(r<3)return n;throw new t.ValueError(`Unsupported input rank by biasAdd: ${n.rank}`)}function L(t,n,s){return(0,e.tidy)(()=>(null==s&&(s=(0,a.imageDataFormat)()),(0,r.checkDataFormat)(s),e.add(t,P(t.rank,n,s))))}function j(r,n=1){if(1!==n)throw new t.NotImplementedError(`Support for alpha values other than 1 (${n}) is not implemented `+"yet.");return e.elu(r)}function D(r){return(0,e.tidy)(()=>e.div(r,e.add(e.abs(r),1)))}function M(r,t,n,a){return(0,e.tidy)(()=>e.dropout(r,t,n,a))}function B(r){return(0,e.tidy)(()=>{const t=e.add(.5,e.mul(.2,r));return e.clipByValue(t,0,1)})}function N(e,r,t=!1){return t?e():r()}
},{"@tensorflow/tfjs-core":"nPFy","../common":"NirA","../errors":"T5Wn","../utils/math_utils":"oh9E","./common":"OElF"}],"bXvq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializerClassNames=exports.VALID_FAN_MODE_VALUES=exports.VALID_DISTRIBUTION_VALUES=void 0;const e=["fanIn","fanOut","fanAvg"];exports.VALID_FAN_MODE_VALUES=e;const o=["normal","uniform","truncatedNormal"];exports.VALID_DISTRIBUTION_VALUES=o;const t=["Zeros","Ones","Constant","RandomNormal","RandomUniform","TruncatedNormal","VarianceScaling","Orthogonal","Identity"];exports.initializerClassNames=t;
},{}],"QmHc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Zeros=exports.VarianceScaling=exports.TruncatedNormal=exports.RandomUniform=exports.RandomNormal=exports.Orthogonal=exports.Ones=exports.LeCunUniform=exports.LeCunNormal=exports.Initializer=exports.Identity=exports.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=exports.HeUniform=exports.HeNormal=exports.GlorotUniform=exports.GlorotNormal=exports.Constant=void 0,exports.checkDistribution=m,exports.checkFanMode=u,exports.getInitializer=w,exports.serializeInitializer=T;var e=require("@tensorflow/tfjs-core"),t=l(require("./backend/tfjs_backend")),s=require("./common"),r=require("./errors"),n=require("./keras_format/initializer_config"),a=require("./utils/generic_utils"),i=require("./utils/math_utils");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(o=function(e){return e?s:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=o(t);if(s&&s.has(e))return s.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,s&&s.set(e,r),r}function u(e){(0,a.checkStringTypeUnionValue)(n.VALID_FAN_MODE_VALUES,"FanMode",e)}function m(e){(0,a.checkStringTypeUnionValue)(n.VALID_DISTRIBUTION_VALUES,"Distribution",e)}class d extends e.serialization.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}exports.Initializer=d;class c extends d{apply(t,s){return(0,e.zeros)(t,s)}}exports.Zeros=c,c.className="Zeros",e.serialization.registerClass(c);class f extends d{apply(t,s){return(0,e.ones)(t,s)}}exports.Ones=f,f.className="Ones",e.serialization.registerClass(f);class h extends d{constructor(e){if(super(),"object"!=typeof e)throw new r.ValueError(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new r.ValueError(`config must have value set but got ${e}`);this.value=e.value}apply(t,s){return(0,e.tidy)(()=>(0,e.mul)((0,e.scalar)(this.value),(0,e.ones)(t,s)))}getConfig(){return{value:this.value}}}exports.Constant=h,h.className="Constant",e.serialization.registerClass(h);class p extends d{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(t,s){return(0,e.randomUniform)(t,this.minval,this.maxval,s)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}exports.RandomUniform=p,p.className="RandomUniform",e.serialization.registerClass(p);class g extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,s){if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`randomNormal does not support dType ${s}.`);return t.randomNormal(e,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}exports.RandomNormal=g,g.className="RandomNormal",e.serialization.registerClass(g);class N extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(t,s){if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`truncatedNormal does not support dType ${s}.`);return(0,e.truncatedNormal)(t,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}exports.TruncatedNormal=N,N.className="TruncatedNormal",e.serialization.registerClass(N);class x extends d{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(t,s){return(0,e.tidy)(()=>{if(2!==t.length||t[0]!==t[1])throw new r.ValueError("Identity matrix initializer can only be used for 2D square matrices.");return(0,e.mul)(this.gain,(0,e.eye)(t[0]))})}getConfig(){return{gain:this.gain}}}function C(e,t="channelsLast"){let r,n;if((0,s.checkDataFormat)(t),2===e.length)r=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=(0,i.arrayProd)(e,2);r=e[1]*t,n=e[0]*t}else if("channelsLast"===t){const t=(0,i.arrayProd)(e,0,e.length-2);r=e[e.length-2]*t,n=e[e.length-1]*t}}else{const t=(0,i.arrayProd)(e);r=Math.sqrt(t),n=Math.sqrt(t)}return[r,n]}exports.Identity=x,x.className="Identity",e.serialization.registerClass(x);class I extends d{constructor(e){if(super(),e.scale<0)throw new r.ValueError(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,u(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,m(this.distribution),this.seed=e.seed}apply(t,s){const n=C(t),a=n[0],i=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,a):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(a+i)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`${this.getClassName()} does not support dType ${s}.`);return(0,e.truncatedNormal)(t,0,n,s,this.seed)}{const r=Math.sqrt(3*o);return(0,e.randomUniform)(t,-r,r,s)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}exports.VarianceScaling=I,I.className="VarianceScaling",e.serialization.registerClass(I);class U extends I{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.GlorotUniform=U,U.className="GlorotUniform",e.serialization.registerClass(U);class y extends I{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.GlorotNormal=y,y.className="GlorotNormal",e.serialization.registerClass(y);class E extends I{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.HeNormal=E,E.className="HeNormal",e.serialization.registerClass(E);class v extends I{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.HeUniform=v,v.className="HeUniform",e.serialization.registerClass(v);class L extends I{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.LeCunNormal=L,L.className="LeCunNormal",e.serialization.registerClass(L);class A extends I{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.LeCunUniform=A,A.className="LeCunNormal",e.serialization.registerClass(A);class _ extends d{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new r.NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.")}apply(s,n){return(0,e.tidy)(()=>{if(s.length<2)throw new r.NotImplementedError("Shape must be at least 2D.");s[0]*s[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+`than 2000 (${s[0]*s[1]}) elements: `+"Slowness may result.");const n=s[0]>s[1]?[s[1],s[0]]:s,a=t.randomNormal(n,0,1,"float32");let i=e.linalg.gramSchmidt(a);return s[0]>s[1]&&(i=(0,e.transpose)(i)),(0,e.mul)(this.gain,i)})}getConfig(){return{gain:this.gain,seed:this.seed}}}exports.Orthogonal=_,_.className="Orthogonal",e.serialization.registerClass(_);const b={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function D(t,s={}){return(0,a.deserializeKerasObject)(t,e.serialization.SerializationMap.getMap().classNameMap,s,"initializer")}function T(e){return(0,a.serializeKerasObject)(e)}function w(e){if("string"==typeof e){const t=e in b?b[e]:e;if("GlorotNormal"===t)return new y;if("GlorotUniform"===t)return new U;if("HeNormal"===t)return new E;if("HeUniform"===t)return new v;if("LeCunNormal"===t)return new L;if("LeCunUniform"===t)return new A;{const e={};return e.className=t,e.config={},D(e)}}return e instanceof d?e:D(e)}exports.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=b;
},{"@tensorflow/tfjs-core":"nPFy","./backend/tfjs_backend":"sLMb","./common":"NirA","./errors":"T5Wn","./keras_format/initializer_config":"bXvq","./utils/generic_utils":"jSJk","./utils/math_utils":"oh9E"}],"CBHN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExactlyOneShape=a,exports.getExactlyOneTensor=n,exports.isArrayOfShapes=e,exports.normalizeShapeList=t;var r=require("../errors");function e(r){return Array.isArray(r)&&Array.isArray(r[0])}function t(r){return 0===r.length?[]:Array.isArray(r[0])?r:[r]}function n(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new r.ValueError(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function a(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new r.ValueError(`Expected exactly 1 Shape; got ${e.length}`)}return e}
},{"../errors":"T5Wn"}],"xUir":[function(require,module,exports) {
"use strict";function e(e){let t=0;for(const r of e)0===r.shape.length?t+=1:t+=r.shape.reduce((e,t)=>e*t);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.countParamsInWeights=e;
},{}],"pUPC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayerVariable=void 0,exports.batchGetValue=x,exports.batchSetValue=g,exports.eyeVariable=h,exports.gradients=V,exports.onesLike=c,exports.onesVariable=f,exports.randomNormalVariable=w,exports.randomUniformVariable=m,exports.truncatedNormalVariable=b,exports.update=y,exports.updateAdd=v,exports.updateSub=N,exports.variable=l,exports.zerosLike=d,exports.zerosVariable=p;var e=o(require("@tensorflow/tfjs-core")),t=require("./backend/state"),r=require("./common"),n=require("./errors");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}const i="Variable";class s{constructor(n,a="float32",o=i,s=!0,u=null){this.dtype=null==a?"float32":a,this.shape=n.shape,this.id=(0,t.getNextUniqueTensorId)(),o=null==o?i:o,this.originalName=(0,r.getScopedTensorName)(o),this.name=(0,r.getUniqueTensorName)(this.originalName),this.trainable_=s,this.constraint=u,this.val=e.variable(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),u(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function u(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function l(e,t,r,n){return new s(e,t,r,!0,n)}function p(t,r,n){return new s(e.zeros(t),r,n)}function d(t,r,n){return new s(e.zerosLike(t),r,n)}function f(t,r,n){const a=e.ones(t);return new s(a,r,n)}function c(t,r,n){const a=e.onesLike(t);return new s(a,r,n)}function h(t,r,n){return new s(e.eye(t),r,n)}function m(t,r,n,a,o,i="randomUniform"){return new s(e.randomUniform(t,r,n,a),a,i)}function b(t,r=0,a=1,o,i,u="truncatedNormal"){if("float32"!==(o=o||"float32")&&"int32"!==o)throw new n.NotImplementedError(`randomNormal does not support dType ${o}.`);return new s(e.truncatedNormal(t,r,a,o,i),o,u)}function w(t,r=0,a=1,o,i,u="randomNormal"){if("float32"!==(o=o||"float32")&&"int32"!==o)throw new n.NotImplementedError(`randomNormalVariable does not support dType ${o}.`);return new s(e.randomNormal(t,r,a,o,i),o,u)}function y(e,t){return e.write(t)}function v(t,r){return t.write(e.add(t.read(),r))}function N(t,r){return t.write(e.sub(t.read(),r))}function x(e){return e.map(e=>e.read())}function g(e){e.forEach(e=>{e[0].write(e[1])})}function V(t,r){const n=r.map(e=>e.read()),a=(0,e.variableGrads)(t,n);return r.map(e=>a.grads[e.name])}exports.LayerVariable=s;
},{"@tensorflow/tfjs-core":"nPFy","./backend/state":"LdP9","./common":"NirA","./errors":"T5Wn"}],"ofZj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SymbolicTensor=exports.Node=exports.Layer=exports.InputSpec=void 0,exports.getSourceInputs=w;var t=require("@tensorflow/tfjs-core"),e=require("../backend/state"),n=require("../common"),i=require("../errors"),s=require("../initializers"),r=l(require("../utils/generic_utils")),o=l(require("../utils/types_utils")),a=l(require("../utils/variable_utils")),h=require("../variables");function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var o=s?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,n&&n.set(t,i),i}class p{constructor(t){this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}exports.InputSpec=p;class d{constructor(t,i,s,r,o,a,h){this.dtype=t,this.shape=i,this.sourceLayer=s,this.inputs=r,this.callArgs=o,this.outputTensorIndex=h,this.id=(0,e.getNextUniqueTensorId)(),null!=a&&(this.originalName=(0,n.getScopedTensorName)(a),this.name=(0,n.getUniqueTensorName)(this.originalName)),this.rank=i.length}}exports.SymbolicTensor=d;let c=0;class f{constructor(t,e){this.callArgs=e,this.id=c++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)null!=e?t.push(e.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}exports.Node=f;let b=0;class g extends t.serialization.Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=b++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const t=this.getClassName();n=r.toSnakeCase(t)+"_"+(0,e.getUid)(t)}if(this.name=n,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}null!=t.weights?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new i.RuntimeError("The layer has never been called "+`and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new i.ValueError(`Asked to get ${e} at node ${t}, `+`but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return r.singletonOrArray(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return r.singletonOrArray(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new i.AttributeError(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new i.AttributeError(`Layer ${this.name}`+" is not connected, no input to return.");return r.singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new i.AttributeError(`Layer ${this.name}`+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new i.AttributeError(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return r.singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=r.toList(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=r.toList(this.inputSpec);if(t.length!==e.length)throw new i.ValueError(`Layer ${this.name} expects ${e.length} inputs, `+`but it received ${t.length} input tensors. `+`Input received: ${t}`);for(let n=0;n<t.length;n++){const s=t[n],r=e[n];if(null==r)continue;const o=s.rank;if(null!=r.ndim&&o!==r.ndim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}: `+`expected ndim=${r.ndim}, found ndim=${o}`);if(null!=r.maxNDim&&o>r.maxNDim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}`+`: expected max_ndim=${r.maxNDim}, found ndim=${o}`);if(null!=r.minNDim&&o<r.minNDim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}`+`: expected min_ndim=${r.minNDim}, found ndim=${o}.`);if(null!=r.dtype&&s.dtype!==r.dtype)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name} `+`: expected dtype=${r.dtype}, found dtype=${s.dtype}.`);if(r.axes){const t=s.shape;for(const e in r.axes){const s=Number(e),o=r.axes[e],a=s>=0?t[s]:t[t.length+s];if(null!=o&&-1===[o,null].indexOf(a))throw new i.ValueError(`Input ${n} is incompatible with layer `+`${this.name}: expected axis ${s} of input shape to `+`have value ${o} but got shape ${t}.`)}}if(null!=r.shape)for(let t=0;t<r.shape.length;++t){const e=r.shape[t],o=s.shape[t];if(null!=e&&null!=o&&e!==o)throw new i.ValueError(`Input ${n} is incompatible with layer `+`${this.name}: expected shape=${r.shape}, `+`found shape=${s.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const s=r.toList(t);let o=!0;for(const n of s)if(!(n instanceof d)){o=!1;break}let a=!0;for(const n of s)if(n instanceof d){a=!1;break}if(o===a)throw new i.ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return(0,n.nameScope)(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of r.toList(t))e.push(n.shape);this.build(r.singletonOrArray(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(t),a){let n=this.call(t,e);const o=r.toList(n),a=[];for(let t of o)-1!==s.indexOf(t)&&(t=t.clone()),a.push(t);if(n=r.singletonOrArray(a),null!=this.activityRegularizer)throw new i.NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}{const n=y(t),s=this.computeOutputShape(n);let o;const a=m(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),o=null!=s&&s.length>0&&Array.isArray(s[0])?s.map((n,i)=>new d(a,n,this,r.toList(t),e,this.name,i)):new d(a,s,this,r.toList(t),e,this.name),this.addInboundNode(t,o,null,null,n,s,e),this._refCount++,null!=this.activityRegularizer)throw new i.NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+`${JSON.stringify(t)}) does not match that of the `+`batchInputShape (${JSON.stringify(this.batchInputShape)}) `+`of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((n,i)=>{null!=n&&null!=t[i]&&t[i]!==n&&(e=!0)}),e&&console.warn("The shape of the input tensor "+`(${JSON.stringify(t)}) does not `+`match the expectation of layer ${this.name}: `+`${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new i.AttributeError(`The layer ${this.name} has never been called and thus has no `+"defined output shape.");const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new i.AttributeError(`The layer ${this.name} has multiple inbound nodes with different `+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new i.RuntimeError(`You tried to call countParams() on ${this.name}, `+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return a.countParamsInWeights(this.weights)}build(t){this.built=!0}getWeights(t=!1){return(0,h.batchGetValue)(t?this.trainableWeights:this.weights)}setWeights(e){(0,t.tidy)(()=>{const n=this.weights;if(n.length!==e.length)throw new i.ValueError(`You called setWeights(weights) on layer "${this.name}" `+`with a weight list of length ${e.length}, `+`but the layer was expecting ${n.length} weights. `+`Provided weights: ${e}...`);if(0===n.length)return;const s=[],r=(0,h.batchGetValue)(n);for(let o=0;o<r.length;++o){const a=r[o],h=n[o],u=e[o];if(!t.util.arraysEqual(a.shape,u.shape))throw new i.ValueError(`Layer weight shape ${a.shape} `+`not compatible with provided weight shape ${u.shape}`);s.push([h,u])}(0,h.batchSetValue)(s)})}addWeight(t,e,n,r,o,a,u,l){if(-1!==this._addedWeightNames.indexOf(t))throw new i.ValueError(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=l?l():(0,s.getInitializer)("zeros"));const p=r.apply(e,n),d=new h.LayerVariable(p,n,t,a,u);return p.dispose(),null!=o&&this.addLoss(()=>o.apply(d.read())),null==a&&(a=!0),a?this._trainableWeights.push(d):this._nonTrainableWeights.push(d),d}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=r.toList(t),void 0!==this._losses&&null!==this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.");e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.")})}return null}return e}addInboundNode(t,e,n,i,s,a,h=null){const u=r.toList(t);e=r.toList(e),n=r.toList(n),i=r.toList(i),s=o.normalizeShapeList(s),a=o.normalizeShapeList(a);const l=[],p=[],d=[];for(const r of u)l.push(r.sourceLayer),p.push(r.nodeIndex),d.push(r.tensorIndex);new f({outboundLayer:this,inboundLayers:l,nodeIndices:p,tensorIndices:d,inputTensors:u,outputTensors:e,inputMasks:n,outputMasks:i,inputShapes:s,outputShapes:a},h);for(let r=0;r<e.length;r++)e[r].sourceLayer=this,e[r].nodeIndex=this.inboundNodes.length-1,e[r].tensorIndex=r}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been `+"built yet.");if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used `+"yet.");this.assertNotDisposed();let t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function y(t){t=r.toList(t);const e=[];for(const n of t)e.push(n.shape);return r.singletonOrArray(e)}function m(t){return"float32"}function w(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];{const t=e.inboundNodes[n];if(0===t.inboundLayers.length)return t.inputTensors;{const e=[];for(let n=0;n<t.inboundLayers.length;n++){const i=w(t.inputTensors[n],t.inboundLayers[n],t.nodeIndices[n]);for(const t of i)-1===e.indexOf(t)&&e.push(t)}return e}}}exports.Layer=g;
},{"@tensorflow/tfjs-core":"nPFy","../backend/state":"LdP9","../common":"NirA","../errors":"T5Wn","../initializers":"QmHc","../utils/generic_utils":"jSJk","../utils/types_utils":"CBHN","../utils/variable_utils":"xUir","../variables":"pUPC"}],"dbAF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Input=p,exports.InputLayer=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../backend/state"),n=require("../errors"),a=require("./topology");class s extends a.Layer{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:(0,t.getUid)("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new n.ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let s=e.batchInputShape;if(null==s){if(null==e.inputShape)throw new n.ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");s=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new n.ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const p=e.dtype||"float32";this.batchInputShape=s,this.dtype=p,this.inputSpec=[{shape:s}];const r=new a.SymbolicTensor(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new a.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[s],outputShapes:[s]})}apply(e,t){throw new n.ValueError("Cannot pass any input to an "+`InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function p(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new n.ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let a=e.dtype;return null==a&&(a="float32"),new s({batchInputShape:t,name:e.name,dtype:a,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}exports.InputLayer=s,s.className="InputLayer",e.serialization.registerClass(s);
},{"@tensorflow/tfjs-core":"nPFy","../backend/state":"LdP9","../errors":"T5Wn","./topology":"ofZj"}],"bfGC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cachedSorted=exports.cachedRecipientCounts=exports.FeedDict=void 0,exports.execute=c,exports.getTopologicalSortAndRecipientCountsForOneFetch=f,exports.updateCacheMaxEntries=d;var e=require("@tensorflow/tfjs-core"),t=require("../errors"),n=require("../utils/executor_utils"),s=require("../utils/generic_utils"),o=require("./input_layer"),r=require("./topology");function i(n,s){if(null==n.dtype||n.dtype===s.dtype)return s;try{return(0,e.cast)(s,n.dtype)}catch(o){throw new t.ValueError(`The dtype of the feed (${s.dtype}) can not be cast to the dtype `+`of the key '${n.name}' (${n.dtype}).`)}}class a{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof a)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,n,s){if(null!=this.id2Value[e.id])throw new t.ValueError(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=i(e,n),this.name2Id[e.name]=e.id,null!=s&&(this.id2Mask[e.id]=s),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof r.SymbolicTensor){if(null==this.id2Value[e.id])throw new t.ValueError(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const n=this.name2Id[e];if(null==n)throw new t.ValueError(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof r.SymbolicTensor){if(null==this.id2Value[e.id])throw new t.ValueError(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const n=this.name2Id[e];if(null==n)throw new t.ValueError(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){null!=this.id2Mask&&(0,e.dispose)(this.id2Mask)}}exports.FeedDict=a;const u=new n.LruCache;exports.cachedSorted=u;const l=new n.LruCache;function d(e){null!=u&&u.setMaxEntries(e),null!=l&&l.setMaxEntries(e)}function c(t,n,r,i){const d=null!=r&&r.training,c=Array.isArray(t),p=c?t:[t],f=p.map(e=>e.name),y=[],g=n.names();for(const e of f)-1!==g.indexOf(e)?y.push(n.getValue(e)):y.push(null);null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);const k=f.join(",")+"|"+n.names().sort().join(",");let x,M=u.get(k);if(null==M){const e=h(p,n);M=e.sorted,x=e.recipientCounts,u.put(k,M),l.put(k,x)}x={},d||Object.assign(x,l.get(k));const w=new a(n);for(let a=0;a<M.length;++a){if(null!=i){const t=(0,e.memory)().numTensors;t>i.maxNumTensors&&(i.maxNumTensors=t),t<i.minNumTensors&&(i.minNumTensors=t)}const t=M[a],u=t.sourceLayer;if(u instanceof o.InputLayer)continue;const l=[],c=[],h=[];let p=!1;for(const e of t.inputs){const t=w.getValue(e),s=w.getMask(e);l.push(t),c.push(s),null!=s&&(p=!0),d||(x[e.name]--,0!==x[e.name]||n.hasKey(e)||-1!==f.indexOf(e.name)||t.isDisposed||!0===e.sourceLayer.stateful||h.push(t))}p&&((r=r||{}).mask=c[0]);const g=(0,s.toList)(u.apply(l,r));let k=null;u.supportsMasking&&(k=u.computeMask(l,c));const V=m(t),T=Array.isArray(V)?V:[V];for(let e=0;e<T.length;++e){w.hasKey(T[e])||w.add(T[e],g[e],Array.isArray(k)?k[0]:k);const t=f.indexOf(T[e].name);-1!==t&&(y[t]=g[e])}d||(0,e.dispose)(h)}return w.disposeMasks(),c?y:y[0]}function h(t,n){e.util.assert(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let s=[],o={};if(1===t.length){const e=f(t[0],n);s=e.sorted,o=e.recipientMap}else{const e=new Set;for(const r of t){const{sorted:t,recipientMap:i}=f(r,n);for(const n of t)e.has(n.name)||(s.push(n),e.add(n.name));for(const e in i)null==o[e]&&(o[e]=new Set),i[e].forEach(t=>o[e].add(t))}}return{sorted:s,recipientCounts:p(o)}}function p(e){const t={};for(const n in e)t[n]=e[n].size;return t}function f(e,t){const n=new Set,s=[],o={};for(const a of t.names())n.add(a);const r=[],i=[];for(r.push(e);r.length>0;){const e=r[r.length-1];if(n.has(e.name)){r.pop();continue}const t=i[i.length-1]===r.length-1;if(0===e.inputs.length||t)r.pop(),s.push(e),n.add(e.name),t&&i.pop();else{i.push(r.length-1);for(const t of e.inputs)null==o[t.name]&&(o[t.name]=new Set),o[t.name].add(e.name),n.has(t.name)||r.push(t)}}return{sorted:s,recipientMap:o}}function m(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const s of e.sourceLayer.inboundNodes[t].outputTensors)if(s.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}exports.cachedRecipientCounts=l;
},{"@tensorflow/tfjs-core":"nPFy","../errors":"T5Wn","../utils/executor_utils":"PY6q","../utils/generic_utils":"jSJk","./input_layer":"dbAF","./topology":"ofZj"}],"RQsV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENV=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./engine/executor");const t=(0,e.env)();exports.ENV=t,t.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,r.updateCacheMaxEntries);
},{"@tensorflow/tfjs-core":"nPFy","./engine/executor":"bfGC"}],"RabT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnitNorm=exports.NonNeg=exports.MinMaxNorm=exports.MaxNorm=exports.Constraint=exports.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP=void 0,exports.deserializeConstraint=f,exports.getConstraint=m,exports.serializeConstraint=c;var e=s(require("@tensorflow/tfjs-core")),t=require("./backend/common"),a=require("./utils/generic_utils");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=r?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(s,n,l):s[n]=e[n]}return s.default=e,a&&a.set(e,s),s}function r(t,a){return(0,e.tidy)(()=>e.sqrt(e.sum(e.mul(t,t),a,!0)))}class n extends e.serialization.Serializable{getConfig(){return{}}}exports.Constraint=n;class l extends n{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>{const i=r(a,this.axis),s=e.clipByValue(i,0,this.maxValue);return e.mul(a,e.div(s,e.add((0,t.epsilon)(),i)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}exports.MaxNorm=l,l.className="MaxNorm",e.serialization.registerClass(l);class u extends n{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>e.div(a,e.add((0,t.epsilon)(),r(a,this.axis))))}getConfig(){return{axis:this.axis}}}exports.UnitNorm=u,u.className="UnitNorm",e.serialization.registerClass(u);class o extends n{apply(t){return e.relu(t)}}exports.NonNeg=o,o.className="NonNeg",e.serialization.registerClass(o);class x extends n{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>{const i=r(a,this.axis),s=e.add(e.mul(this.rate,e.clipByValue(i,this.minValue,this.maxValue)),e.mul(1-this.rate,i));return e.mul(a,e.div(s,e.add((0,t.epsilon)(),i)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}exports.MinMaxNorm=x,x.className="MinMaxNorm",e.serialization.registerClass(x);const p={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function c(e){return(0,a.serializeKerasObject)(e)}function f(t,i={}){return(0,a.deserializeKerasObject)(t,e.serialization.SerializationMap.getMap().classNameMap,i,"constraint")}function m(e){if(null==e)return null;if("string"==typeof e){return f({className:e in p?p[e]:e,config:{}})}return e instanceof n?e:f(e)}exports.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP=p;
},{"@tensorflow/tfjs-core":"nPFy","./backend/common":"OElF","./utils/generic_utils":"jSJk"}],"uKIo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxNorm=r,exports.minMaxNorm=o,exports.nonNeg=t,exports.unitNorm=e;var n=require("./constraints");function r(r){return new n.MaxNorm(r)}function e(r){return new n.UnitNorm(r)}function t(){return new n.NonNeg}function o(r){return new n.MinMaxNorm(r)}
},{"./constraints":"RabT"}],"AQnF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.constant=o,exports.glorotNormal=f,exports.glorotUniform=c,exports.heNormal=l,exports.heUniform=m,exports.identity=a,exports.leCunNormal=p,exports.leCunUniform=x,exports.ones=e,exports.orthogonal=w,exports.randomNormal=u,exports.randomUniform=t,exports.truncatedNormal=i,exports.varianceScaling=s,exports.zeros=r;var n=require("./initializers");function r(){return new n.Zeros}function e(){return new n.Ones}function o(r){return new n.Constant(r)}function t(r){return new n.RandomUniform(r)}function u(r){return new n.RandomNormal(r)}function i(r){return new n.TruncatedNormal(r)}function a(r){return new n.Identity(r)}function s(r){return new n.VarianceScaling(r)}function c(r){return new n.GlorotUniform(r)}function f(r){return new n.GlorotNormal(r)}function l(r){return new n.HeNormal(r)}function m(r){return new n.HeUniform(r)}function p(r){return new n.LeCunNormal(r)}function x(r){return new n.LeCunUniform(r)}function w(r){return new n.Orthogonal(r)}
},{"./initializers":"QmHc"}],"FvYp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disposeTensorsInLogs=o,exports.resolveScalarsInLogs=e;var s=require("@tensorflow/tfjs-core");async function e(e){if(null==e)return;const o=[],n=[],t=[];for(const s in e){const r=e[s];if("number"!=typeof r){const e=r;o.push(e.data()),n.push(s),t.push(e)}}if(o.length>0){const r=await Promise.all(o);for(let s=0;s<r.length;++s)e[n[s]]=r[s][0];(0,s.dispose)(t)}}function o(s){if(null!=s)for(const e in s){const o=s[e];"number"!=typeof o&&o.dispose()}}
},{"@tensorflow/tfjs-core":"nPFy"}],"wyxt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModelLoggingVerbosity=exports.History=exports.DEFAULT_YIELD_EVERY_MS=exports.CustomCallback=exports.CallbackList=exports.CallbackConstructorRegistry=exports.BaseLogger=exports.BaseCallback=void 0,exports.configureCallbacks=E,exports.standardizeCallbacks=y;var t,s=require("@tensorflow/tfjs-core"),n=require("./errors"),e=require("./logs"),o=i(require("./utils/generic_utils"));function a(t){if("function"!=typeof WeakMap)return null;var s=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:s})(t)}function i(t,s){if(!s&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=a(s);if(n&&n.has(t))return n.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var r=o?Object.getOwnPropertyDescriptor(t,i):null;r&&(r.get||r.set)?Object.defineProperty(e,i,r):e[i]=t[i]}return e.default=t,n&&n.set(t,e),e}exports.ModelLoggingVerbosity=t,function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(t||(exports.ModelLoggingVerbosity=t={}));const r=125;exports.DEFAULT_YIELD_EVERY_MS=r;class c{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,s){}async onEpochEnd(t,s){}async onBatchBegin(t,s){}async onBatchEnd(t,s){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}exports.BaseCallback=c;class l{constructor(t,s=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=s}append(t){this.callbacks.push(t)}setParams(t){for(const s of this.callbacks)s.setParams(t)}setModel(t){for(const s of this.callbacks)s.setModel(t)}async onEpochBegin(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onEpochBegin(t,s)}async onEpochEnd(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onEpochEnd(t,s)}async onBatchBegin(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onBatchBegin(t,s)}async onBatchEnd(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onBatchEnd(t,s)}async onTrainBegin(t){null==t&&(t={});for(const s of this.callbacks)await s.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const s of this.callbacks)await s.onTrainEnd(t)}}exports.CallbackList=l;class h extends c{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){null==n&&(n={});const e=null==n.size?0:n.size;this.seen+=e;for(const o in n){const t=n[o];if("number"==typeof t)this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+t*e;else{let n;o in this.totals?n=this.totals[o]:this.totals[o]=0;const a=(0,s.tidy)(()=>(0,s.add)(this.totals[o],(0,s.mul)(t,e)));this.totals[o]=a,null!=n&&n.dispose()}}}async onEpochEnd(t,n){if(null!=n)for(const e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?n[e]=this.totals[e]/this.seen:(0,s.tidy)(()=>{const t=(0,s.mul)((0,s.div)(1,this.seen),this.totals[e]);n[e]=t,this.totals[e].dispose(),(0,s.keep)(n[e])}))}}exports.BaseLogger=h;class u extends c{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,s){null==s&&(s={}),this.epoch.push(t);for(const n in s)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(s[n])}async syncData(){const t=[],s=[],n=[];for(const o in this.history){const e=this.history[o];for(let a=0;a<e.length;++a)if("number"!=typeof e[a]){const i=e[a];t.push(i.data()),s.push(o),n.push(a)}}const e=await Promise.all(t);for(let o=0;o<e.length;++o){this.history[s[o]][n[o]].dispose(),this.history[s[o]][n[o]]=e[o][0]}}}exports.History=u;class p extends c{constructor(t,n){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||s.nextFrame,this.yieldEvery=n||"auto","auto"===this.yieldEvery&&(this.yieldEvery=r),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");s.util.isNumber(this.yieldEvery)&&(this.maybeWait=o.debounce(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,s,n){const o=[];null!=this.yield&&(await(0,e.resolveScalarsInLogs)(n),o.push(this.yield(t,s,n))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(t,s){this.currentEpoch=t,null!=this.epochBegin&&(await(0,e.resolveScalarsInLogs)(s),await this.epochBegin(t,s))}async onEpochEnd(t,s){const n=[];null!=this.epochEnd&&(await(0,e.resolveScalarsInLogs)(s),n.push(this.epochEnd(t,s))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(t,s){null!=this.batchBegin&&(await(0,e.resolveScalarsInLogs)(s),await this.batchBegin(t,s))}async onBatchEnd(t,n){const o=[];null!=this.batchEnd&&(await(0,e.resolveScalarsInLogs)(n),o.push(this.batchEnd(t,n))),"batch"===this.yieldEvery?o.push(this.nextFrameFunc()):s.util.isNumber(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(o)}async onTrainBegin(t){null!=this.trainBegin&&(await(0,e.resolveScalarsInLogs)(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await(0,e.resolveScalarsInLogs)(t),await this.trainEnd(t))}}function y(t,s){if(null==t&&(t={}),t instanceof c)return[t];if(Array.isArray(t)&&t[0]instanceof c)return t;return o.toList(t).map(t=>new p(t,s))}exports.CustomCallback=p;class d{constructor(){}static registerCallbackConstructor(t,n){s.util.assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, "+`but got ${t}`),d.checkForDuplicate(n),null==d.constructors[t]&&(d.constructors[t]=[]),d.constructors[t].push(n)}static checkForDuplicate(t){for(const s in d.constructors){d.constructors[+s].forEach(s=>{if(s===t)throw new n.ValueError("Duplicate callback constructor.")})}}static clear(){d.constructors={}}static createCallbacks(t){const s=[];for(const n in d.constructors){const e=+n;t>=e&&s.push(...d.constructors[e])}return s.map(t=>new t)}}function E(t,s,n,e,o,a,i,r,c){const p=new u,y=[new h,...d.createCallbacks(s)];null!=t&&y.push(...t),y.push(p);const E=new l(y);return E.setParams({epochs:n,initialEpoch:e,samples:o,steps:a,batchSize:i,verbose:s,doValidation:r,metrics:c}),{callbackList:E,history:p}}exports.CallbackConstructorRegistry=d,d.constructors={};
},{"@tensorflow/tfjs-core":"nPFy","./errors":"T5Wn","./logs":"FvYp","./utils/generic_utils":"jSJk"}],"QRzD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserialize=i;var e=require("@tensorflow/tfjs-core"),r=require("../utils/generic_utils");function i(i,t={},a=!1){return(0,r.deserializeKerasObject)(i,e.serialization.SerializationMap.getMap().classNameMap,t,"layer",a)}
},{"@tensorflow/tfjs-core":"nPFy","../utils/generic_utils":"jSJk"}],"M7No":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MSLE=exports.MSE=exports.MAPE=exports.MAE=exports.KLD=void 0,exports.binaryCrossentropy=b,exports.categoricalCrossentropy=x,exports.categoricalHinge=d,exports.cosine=void 0,exports.cosineProximity=v,exports.get=B,exports.hinge=m,exports.kld=void 0,exports.kullbackLeiblerDivergence=h,exports.l2Normalize=u,exports.logcosh=f,exports.mape=exports.mae=exports.lossesMap=void 0,exports.meanAbsoluteError=a,exports.meanAbsolutePercentageError=l,exports.meanSquaredError=i,exports.meanSquaredLogarithmicError=p,exports.msle=exports.mse=void 0,exports.poisson=E,exports.sigmoidCrossEntropyWithLogits=g,exports.sparseCategoricalCrossentropy=y,exports.squaredHinge=c;var e=n(require("@tensorflow/tfjs-core")),r=require("./backend/common"),t=n(require("./backend/tfjs_backend")),o=require("./errors");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function u(o,s){return(0,e.tidy)(()=>{"float32"!==o.dtype&&(o=e.cast(o,"float32"));const n=e.sum(t.square(o),s,!0),u=e.fill(n.shape,(0,r.epsilon)()),i=e.sqrt(e.maximum(n,u));return e.div(o,i)})}function i(r,o){return(0,e.tidy)(()=>e.mean(t.square(e.sub(o,r)),-1))}function a(r,t){return(0,e.tidy)(()=>e.mean(e.abs(e.sub(t,r)),-1))}function l(t,o){return(0,e.tidy)(()=>{const s=e.sub(t,o),n=e.clipByValue(e.abs(t),(0,r.epsilon)(),Number.MAX_VALUE),u=e.abs(e.div(s,n));return e.mul(100,e.mean(u,-1))})}function p(o,s){return(0,e.tidy)(()=>{const n=e.clipByValue(s,(0,r.epsilon)(),Number.MAX_VALUE),u=e.log(e.add(1,n)),i=e.clipByValue(o,(0,r.epsilon)(),Number.MAX_VALUE),a=e.log(e.add(1,i));return e.mean(t.square(e.sub(u,a)),-1)})}function c(r,o){return(0,e.tidy)(()=>{const s=e.maximum(0,e.sub(1,e.mul(r,o)));return e.mean(t.square(s),-1)})}function m(r,t){return(0,e.tidy)(()=>{const o=e.maximum(0,e.sub(1,e.mul(r,t)));return e.mean(o,-1)})}function d(r,t){return(0,e.tidy)(()=>{const o=e.sum(e.mul(r,t),-1),s=e.max(e.mul(e.sub(1,r),t),-1);return e.maximum(0,e.add(1,e.sub(s,o)))})}function f(r,t){return(0,e.tidy)(()=>{const o=Math.log(2),s=e.sub(t,r),n=e.sub(e.add(s,e.softplus(e.mul(-2,s))),o);return e.mean(n,-1)})}function x(t,o,s=!1){return(0,e.tidy)(()=>{if(s)o=e.softmax(o);else{const r=e.sum(o,o.shape.length-1,!0);o=e.div(o,r)}return o=e.clipByValue(o,(0,r.epsilon)(),1-(0,r.epsilon)()),e.neg(e.sum(e.mul(e.cast(t,"float32"),e.log(o)),o.shape.length-1))})}function y(o,s,n=!1){return(0,e.tidy)(()=>{const u=e.cast(e.floor(t.flatten(o)),"int32"),i=(s=e.clipByValue(s,(0,r.epsilon)(),1-(0,r.epsilon)())).shape;return x(e.reshape(e.oneHot(u,i[i.length-1]),i),s,n)})}function g(r,t){if(!e.util.arraysEqual(r.shape,t.shape))throw new o.ValueError("logits and labels must have the same shape, but got shapes "+`${JSON.stringify(r.shape)} and ${JSON.stringify(t.shape)}`);return(0,e.tidy)(()=>{const o=e.relu(t),s=e.neg(e.abs(t));return e.add(e.sub(o,e.mul(t,r)),e.log1p(e.exp(s)))})}function b(t,o){return(0,e.tidy)(()=>{let s;return s=e.clipByValue(o,(0,r.epsilon)(),1-(0,r.epsilon)()),s=e.log(e.div(s,e.sub(1,s))),e.mean(g(t,s),-1)})}function h(t,o){return(0,e.tidy)(()=>{const s=e.clipByValue(t,(0,r.epsilon)(),1),n=e.clipByValue(o,(0,r.epsilon)(),1);return e.sum(e.mul(t,e.log(e.div(s,n))),-1)})}function E(t,o){return(0,e.tidy)(()=>{const s=e.log(e.add((0,r.epsilon)(),o));return e.mean(e.sub(o,e.mul(t,s)),-1)})}function v(r,t){return(0,e.tidy)(()=>{const o=u(r,-1),s=u(t,-1),n=e.mul(o,s);return e.neg(e.sum(n,-1))})}const M=i;exports.mse=M;const q=i;exports.MSE=q;const k=a;exports.mae=k;const A=a;exports.MAE=A;const w=l;exports.mape=w;const L=l;exports.MAPE=L;const V=p;exports.msle=V;const C=p;exports.MSLE=C;const P=h;exports.kld=P;const O=h;exports.KLD=O;const S=v;exports.cosine=S;const j={meanSquaredError:i,meanAbsoluteError:a,meanAbsolutePercentageError:l,meanSquaredLogarithmicError:p,squaredHinge:c,hinge:m,categoricalHinge:d,logcosh:f,categoricalCrossentropy:x,sparseCategoricalCrossentropy:y,binaryCrossentropy:b,kullbackLeiblerDivergence:h,poisson:E,cosineProximity:v};function B(e){if("string"==typeof e){if(e in j)return j[e];let r=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(r=`Unknown loss ${e}. `+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new o.ValueError(r)}return e}exports.lossesMap=j;
},{"@tensorflow/tfjs-core":"nPFy","./backend/common":"OElF","./backend/tfjs_backend":"sLMb","./errors":"T5Wn"}],"R0qT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MSE=exports.MAPE=exports.MAE=void 0,exports.binaryAccuracy=c,exports.binaryCrossentropy=d,exports.categoricalAccuracy=i,exports.cosine=exports.categoricalCrossentropy=void 0,exports.get=P,exports.getLossOrMetricName=j,exports.mse=exports.metricsMap=exports.mape=exports.mae=void 0,exports.precision=f,exports.recall=y,exports.sparseCategoricalAccuracy=x,exports.sparseCategoricalCrossentropy=void 0,exports.sparseTopKCategoricalAccuracy=m,exports.topKCategoricalAccuracy=g;var e=a(require("@tensorflow/tfjs-core")),r=a(require("./backend/tfjs_backend")),t=require("./errors"),o=require("./losses"),n=a(require("./utils/generic_utils"));function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=n?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(o,a,c):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function c(t,o){return(0,e.tidy)(()=>{const n=e.mul(.5,e.onesLike(o)),s=r.cast(e.greater(o,n),t.dtype);return e.mean(e.equal(t,s),-1)})}function i(t,o){return(0,e.tidy)(()=>r.cast(e.equal(e.argMax(t,-1),e.argMax(o,-1)),"float32"))}function u(r,t){return(0,e.tidy)(()=>e.cast(e.sum(e.logicalAnd(e.equal(r,1),e.equal(t,1))),"float32"))}function p(r,t){return(0,e.tidy)(()=>e.cast(e.sum(e.logicalAnd(e.equal(r,1),e.equal(t,0))),"float32"))}function l(r,t){return(0,e.tidy)(()=>e.cast(e.sum(e.logicalAnd(e.equal(r,0),e.equal(t,1))),"float32"))}function f(r,t){return(0,e.tidy)(()=>{const o=u(r,t),n=l(r,t),s=e.add(o,n);return e.cast(e.where(e.greater(s,0),e.div(o,s),0),"float32")})}function y(r,t){return(0,e.tidy)(()=>{const o=u(r,t),n=p(r,t),s=e.add(o,n);return e.cast(e.where(e.greater(s,0),e.div(o,s),0),"float32")})}function d(e,r){return(0,o.binaryCrossentropy)(e,r)}function x(r,t){return r.rank===t.rank&&(r=e.squeeze(r,[r.rank-1])),(t=e.argMax(t,-1)).dtype!==r.dtype&&(t=e.cast(t,r.dtype)),e.cast(e.equal(r,t),"float32")}function g(e,r){throw new t.NotImplementedError}function m(e,r){throw new t.NotImplementedError}const M=o.meanSquaredError;exports.mse=M;const b=o.meanSquaredError;exports.MSE=b;const A=o.meanAbsoluteError;exports.mae=A;const E=o.meanAbsoluteError;exports.MAE=E;const q=o.meanAbsolutePercentageError;exports.mape=q;const C=o.meanAbsolutePercentageError;exports.MAPE=C;const w=o.categoricalCrossentropy;exports.categoricalCrossentropy=w;const k=o.cosineProximity;exports.cosine=k;const v=o.sparseCategoricalCrossentropy;exports.sparseCategoricalCrossentropy=v;const O={binaryAccuracy:c,categoricalAccuracy:i,precision:f,categoricalCrossentropy:w,sparseCategoricalCrossentropy:v,mse:M,MSE:b,mae:A,MAE:E,mape:q,MAPE:C,cosine:k};function P(e){if("string"==typeof e&&e in O)return O[e];if("string"!=typeof e&&null!=e)return e;throw new t.ValueError(`Unknown metric ${e}`)}function j(e){if(n.assert(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let r;for(const t of Object.keys(o.lossesMap))if(o.lossesMap[t]===e){r=t;break}if(void 0!==r)return r;for(const t of Object.keys(O))if(O[t]===e){r=t;break}return void 0!==r?r:e.name}}exports.metricsMap=O;
},{"@tensorflow/tfjs-core":"nPFy","./backend/tfjs_backend":"sLMb","./errors":"T5Wn","./losses":"M7No","./utils/generic_utils":"jSJk"}],"bJtV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOptimizer=d;var a=require("@tensorflow/tfjs-core"),r=require("./backend/common"),e=require("./errors");function d(d){const t={Adagrad:()=>a.train.adagrad(.01),Adadelta:()=>a.train.adadelta(1,.95,(0,r.epsilon)()),Adam:()=>a.train.adam(.001,.9,.999,(0,r.epsilon)()),Adamax:()=>a.train.adamax(.002,.9,.999,(0,r.epsilon)(),0),RMSProp:()=>a.train.rmsprop(.001,.9,0,(0,r.epsilon)()),SGD:()=>a.train.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,d in t)return t[d]();throw new e.ValueError(`Unknown Optimizer ${d}`)}
},{"@tensorflow/tfjs-core":"nPFy","./backend/common":"OElF","./errors":"T5Wn"}],"SQCu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=void 0,exports.checkUserDefinedMetadata=t,exports.plainObjectCheck=r;const e=1048576;function t(t,o,n=!1){if(null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!r(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>e&&console.warn(`User-defined metadata of model "${o}" is too large in `+`size (length=${r.length} when serialized). It is not `+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+`${e}.`)}}function r(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const o of t){if("string"!=typeof o)return!1;if(!r(e[o]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!r(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}exports.MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=e;
},{}],"BgAQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.printSummary=t;var e=require("./variable_utils");function t(t,r,l,c=console.log){const u=o(t),h=["Layer (type)","Input Shape","Output shape","Param #"];let p;if(u?(r=r||90,l=l||[.32,.61,.89,1]):(r=r||115,l=l||[.24,.48,.7,.8,1]),l[l.length-1]<=1&&(l=l.map(e=>Math.floor(r*e))),!u){h.push("Receives inputs"),p=[];for(const e in t.nodesByDepth)p.push(...t.nodesByDepth[e])}c("_".repeat(r)),s(h,l,c),c("=".repeat(r));const f=t.layers;for(let e=0;e<f.length;++e)u?a(f[e],l,c):i(f[e],l,p,c),c((e===f.length-1?"=":"_").repeat(r));t.checkTrainableWeightsConsistency();const g=n(t),d=(0,e.countParamsInWeights)(t.nonTrainableWeights);c(`Total params: ${g+d}`),c(`Trainable params: ${g}`),c(`Non-trainable params: ${d}`),c("_".repeat(r))}function n(t){let n;return n=null!=t.collectedTrainableWeights?(0,e.countParamsInWeights)(t.collectedTrainableWeights):(0,e.countParamsInWeights)(t.trainableWeights)}function o(e){let t=!0;const n=[],o=[];for(const s in e.nodesByDepth)n.push(e.nodesByDepth[s]);for(const s of n){if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}o.push(...s)}if(t)for(const s of e.layers){let e=!1;for(const n of s.inboundNodes)if(-1!==o.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}function s(e,t,n=console.log){let o="";for(let s=0;s<e.length;++s)s>0&&(o=o.slice(0,o.length-1)+" "),o=(o+=e[s]).slice(0,t[s]),o+=" ".repeat(t[s]-o.length);n(o)}function a(e,t,n){let o,a;try{a=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(i){a="multiple"}try{o=JSON.stringify(e.outputShape)}catch(i){o="multiple"}s([`${e.name} (${e.getClassName()})`,a,o,e.countParams().toString()],t,n)}function i(e,t,n,o){let a,i;try{i=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(h){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(h){a="multiple"}const r=[];for(const s of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(s)))for(let e=0;e<s.inboundLayers.length;++e){const t=s.inboundLayers[e].name,n=s.nodeIndices[e],o=s.tensorIndices[e];r.push(`${t}[${n}][${o}]`)}const l=e.name,c=e.getClassName(),u=0===r.length?"":r[0];s([`${l} (${c})`,i,a,e.countParams().toString(),u],t,o);for(let p=1;p<r.length;++p)s(["","","","",r[p]],t,o)}
},{"./variable_utils":"xUir"}],"ZUQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertPythonicToTs=o,exports.convertTsToPythonic=u;var e=n(require("../utils/generic_utils"));function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}function n(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var f=u?Object.getOwnPropertyDescriptor(e,s):null;f&&(f.get||f.set)?Object.defineProperty(o,s,f):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}function r(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function o(t,n){if(null===t)return null;if("string"==typeof t)return e.toCamelCase(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],u=t.length;for(let s=0;s<u;++s){const u=t[s];r(n,s,u)?e.push(u):e.push(o(u,n))}return e}{const n={};for(const r of Object.keys(t)){const u=t[r];if("name"===r&&"string"==typeof u)n[r]=u;else{const t=e.toCamelCase(r);n[t]=o(u,t)}}return n}}function u(t,n){if(null==t)return null;if("string"==typeof t)return e.toSnakeCase(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],o=t.length;for(let s=0;s<o;++s){const o=t[s];r(n,s,o)?e.push(o):e.push(u(o,n))}return e}{const n={};for(const r of Object.keys(t)){const o=t[r],s=e.toSnakeCase(r);n[s]="name"!==r&&"className"!==r||"string"!=typeof o?u(o,r):o}return n}}
},{"../utils/generic_utils":"jSJk"}],"ZNov":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Container=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../backend/state"),s=require("../errors"),n=require("../layers/serialization"),o=d(require("../utils/generic_utils")),i=require("../utils/serialization_utils"),r=d(require("../utils/types_utils")),a=require("../variables"),u=require("../version"),l=require("./executor"),h=require("./input_layer"),p=require("./topology");function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(c=function(t){return t?s:e})(t)}function d(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=c(e);if(s&&s.has(t))return s.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var r=o?Object.getOwnPropertyDescriptor(t,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=t[i]}return n.default=t,s&&s.set(t,n),n}class f extends p.Layer{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=(0,e.getUid)(t)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],o.unique(this.inputs).length!==this.inputs.length)throw new s.ValueError("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+`${this.inputs.map(t=>t.name)}`);o.unique(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+`${this.outputs.map(t=>t.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const e of this.outputs){const t=e.sourceLayer,s=e.nodeIndex,n=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(s),this.outputLayersTensorIndices.push(n)}for(const e of this.inputs){const t=e.sourceLayer,s=e.nodeIndex,n=e.tensorIndex;o.assert(0===s,"input layer has >1 nodes"),o.assert(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(s),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let e=0;e<this.inputLayers.length;e++){const s=this.inputLayers[e];if(!(s instanceof h.InputLayer))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+`Received inputs: ${t.inputs}. `+`Input ${e} (0-based) originates `+`from layer type ${s.getClassName()}.`);this.inputNames.push(s.name),this.feedInputShapes.push(s.batchInputShape),this.feedInputNames.push(s.name)}for(const e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const n={},i={},r={},a={},u={},l=[],c=(t,e,n,o,i,r)=>{null!=o&&null!=i&&null!=r||(o=t.sourceLayer,i=t.nodeIndex,r=t.tensorIndex);const a=o.inboundNodes[i];if(-1!==n.indexOf(a))throw new s.RuntimeError(`The tensor ${t.name} at layer "${o.name}" `+"is part of a cycle.");if(-1!==e.indexOf(a))return;this.containerNodes.add(f.nodeKey(o,i)),o.id in u||(u[o.id]=Object.keys(u).length),-1===n.indexOf(a)&&n.push(a);const h=a.inboundLayers.length;for(let s=0;s<h;s++){const t=a.inputTensors[s],o=a.inboundLayers[s],i=a.nodeIndices[s],r=a.tensorIndices[s];c(t,e,n,o,i,r)}for(e.push(a);n.indexOf(a)>=0;)n.splice(n.indexOf(a),1);l.push(a)},d=[],y=[];for(const e of this.outputs)c(e,d,y);const m=l.slice().reverse();for(const e of m){i[e.id]=e,e.id in n||(n[e.id]=0);let t=n[e.id];const s=null==r[e.outboundLayer.id]?0:r[e.outboundLayer.id];t=Math.max(t,s),r[e.outboundLayer.id]=t,a[e.outboundLayer.id]=e.outboundLayer,n[e.id]=t;for(let o=0;o<e.inboundLayers.length;o++){const s=e.inboundLayers[o],r=e.nodeIndices[o],a=s.inboundNodes[r],u=null==n[a.id]?0:n[a.id];n[a.id]=Math.max(t+1,u),i[a.id]=a}}const g={};for(const e in n){const t=n[e];t in g||(g[t]=[]),g[t].push(i[e])}const b={};for(const e in r){const t=r[e];t in b||(b[t]=[]),b[t].push(a[e])}let L=Object.keys(b).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);this.layers=[];for(const e of L){const t=b[e];t.sort((t,e)=>{const s=u[t.id],n=u[e.id];return s<n?-1:s>n?1:0});for(const e of t)e instanceof f&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=b,L=Object.keys(g).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);const w=this.inputs.slice(),N=[];for(const e of L)for(const t of g[e]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===w.indexOf(n))throw new s.RuntimeError(`Graph disconnected: cannot obtain value for tensor ${n}`+` at layer "${e.name}". `+"The following previous layers were accessed without "+`issue: ${N}`);for(const e of t.outputTensors)w.push(e);N.push(e.name)}}this.nodesByDepth=g;const I=this.layers.map(t=>t.name);for(const e of I){const t=I.filter(t=>t===e).length;if(1!==t)throw new s.RuntimeError(`The name "${e}" is used ${t} times `+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(I))}this.outboundNodes=[],this.inboundNodes=[],new p.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new s.ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let o=0;for(const r of this.layers)for(const t of r.weights){if(null!=n[t.originalName])throw new s.ValueError(`Duplicate weight name: ${t.originalName}`);n[t.originalName]=t,o++}const i=[];for(const r in t){let o=r;if(null==n[r]){const t=r.split("/");o=t.slice(0,-2).concat([t[t.length-1]]).join("/")}if(null!=n[o])i.push([n[o],t[r]]);else if(e)throw new s.ValueError(`Provided weight data has no target variable: ${r}`);delete n[o]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new s.ValueError(`${t.length} of ${o} weights are not set: `+`${t}`)}(0,a.batchSetValue)(i)}updatedConfig(){const t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion=`tfjs-layers ${u.version}`,e.backend="TensorFlow.js",e}toJSON(t,e=!0){const s=(0,i.convertTsToPythonic)(this.updatedConfig());return e?JSON.stringify(s):s}call(e,s){return(0,t.tidy)(()=>{e=o.toList(e);const t=new l.FeedDict;for(let s=0;s<this.inputs.length;++s)t.add(this.inputs[s],e[s]);return(0,l.execute)(this.outputs,t,s)})}computeMask(e,s){return(0,t.tidy)(()=>{let t;return e=o.toList(e),t=null==s?o.pyListRepeat(null,e.length):o.toList(s),this.runInternalGraph(e,t)[1]})}computeOutputShape(t){const e=r.normalizeShapeList(t);if(e.length!==this.inputLayers.length)throw new s.ValueError(`Invalid inputShape argument ${t}: `+`model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let s=0;s<e.length;s++){const t=this.inputLayers[s],o=e[s];n[t.name+"_0_0"]=o}const i=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);if(i.length>1)for(const s of i){const t=this.nodesByDepth[s];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const s=[];for(let o=0;o<e.inboundLayers.length;o++){const t=e.inboundLayers[o],i=e.nodeIndices[o],r=e.tensorIndices[o],a=n[`${t.name}_${i}_${r}`];s.push(a)}const i=t.computeOutputShape(o.singletonOrArray(s)),a=r.normalizeShapeList(i),u=t.inboundNodes.indexOf(e);for(let e=0;e<a.length;e++){n[`${t.name}_${u}_${e}`]=a[e]}}}const a=[],u=[];for(let s=0;s<this.outputLayers.length;s++){const t=this.outputLayers[s],e=this.outputLayersNodeIndices[s],n=this.outputLayersTensorIndices[s],o=`${t.name}_${e}_${n}`;u.push(o)}for(let s=0;s<u.length;s++){const t=u[s];o.assert(t in n),a.push(n[t])}return o.singletonOrArray(a)}runInternalGraph(t,e){null==e&&(e=o.pyListRepeat(null,t.length));const n={};for(let s=0;s<this.inputs.length;++s){const o=this.inputs[s],i=t[s],r=e[s];n[o.id]=[i,r]}const i=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);for(const l of i){const t=this.nodesByDepth[l];for(const e of t){const t=e.outboundLayer,i=e.inputTensors,r=e.outputTensors,a=new Array;for(const e of i)e.id in n&&a.push(n[e.id]);if(a.length===i.length){let i,u,l,h,p={};if(null!=e.callArgs&&(p=e.callArgs),1===a.length){const[e,s]=a[0];null==p.mask&&(p.mask=s),l=o.toList(t.call(e,p)),h=o.toList(t.computeMask(e,s)),i=[e],u=[s]}else i=a.map(t=>t[0]),u=a.map(t=>t[1]),null==p.mask&&(p.mask=u),l=o.toList(t.call(i,p)),h=o.toList(t.computeMask(i,u));if(t.activityRegularizer)throw new s.NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<r.length;++t){const e=r[t],s=l[t],o=h[t];n[e.id]=[s,o]}}}}const r=[],a=[],u=[];for(const s of this.outputs){o.assert(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[t,e]=n[s.id];u.push(t.shape),r.push(t),a.push(e)}return[r,a,u]}buildNodeConversionMap(t){const e={};let s;for(const n of this.layers){s=n instanceof f?1:0;for(let t=0;t<n.inboundNodes.length;t++){const o=f.nodeKey(n,t);this.containerNodes.has(o)&&(e[o]=s,s+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new s.ValueError(`Was asked to retrieve layer at index ${e}, but model only `+`has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new s.ValueError("Provide either a layer name or layer index");for(const s of this.layers)if(s.name===t)return s;throw new s.ValueError(`No such layer: ${t}`)}calculateLosses(){return(0,t.tidy)(()=>{const t=[];for(const e of this.layers)for(let s=0;s<e.inboundNodes.length;++s){const n=f.nodeKey(e,s);this.containerNodes.has(n)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),s=[];for(const r of this.layers){const t=r.getClassName(),n=r.getConfig(),o=[];for(let s=0;s<r.inboundNodes.length;s++){const t=r.inboundNodes[s],n=f.nodeKey(r,s);let a={};if(this.containerNodes.has(n)){if(t.callArgs)try{JSON.stringify(t.callArgs),a=t.callArgs}catch(i){console.warn(`Layer ${r.name} was passed `+"non-serializable keyword arguments: "+`${t.callArgs}. They will not be included `+"in the serialized model (and thus will be missing at deserialization time)."),a={}}if(t.inboundLayers.length>0){const s=[];for(let n=0;n<t.inboundLayers.length;n++){const o=t.inboundLayers[n],i=t.nodeIndices[n],r=t.tensorIndices[n];let u=e[f.nodeKey(o,i)];null==u&&(u=0),s.push([o.name,u,r,a])}o.push(s)}}}const a={};a.name=r.name,a.className=t,a.config=n,a.inboundNodes=o,s.push(a)}t.layers=s;const n=[];for(let r=0;r<this.inputLayers.length;r++){const t=this.inputLayers[r],s=this.inputLayersNodeIndices[r],o=f.nodeKey(t,s);if(!this.containerNodes.has(o))continue;let i=e[o];null==i&&(i=0);const a=this.inputLayersTensorIndices[r];n.push([t.name,i,a])}t.inputLayers=n;const o=[];for(let r=0;r<this.outputLayers.length;r++){const t=this.outputLayers[r],s=this.outputLayersNodeIndices[r],n=f.nodeKey(t,s);if(!this.containerNodes.has(n))continue;let i=e[n];null==i&&(i=0);const a=this.outputLayersTensorIndices[r];o.push([t.name,i,a])}return t.outputLayers=o,t}static fromConfig(t,e,i={},r=!1){const a={},u={};function l(t,e){t.name in u?u[t.name].push(e):u[t.name]=[e]}function h(t,e){const s=[];let n;for(const o of e){const i=o[0],r=o[1],u=o[2];if(n=null==o[3]?{}:o[3],!(i in a))return void l(t,e);const h=a[i];if(h.inboundNodes.length<=r)return void l(t,e);const p=h.inboundNodes[r];s.push(p.outputTensors[u])}s.length>0&&t.apply(o.singletonOrArray(s),n)}function p(t){const o=t.name,i=(0,n.deserialize)(t,null!=e.customObjects?e.customObjects:{});i.setFastWeightInitDuringBuild(r),a[o]=i,t.inboundNodes.forEach(t=>{if(!(t instanceof Array))throw new s.ValueError(`Corrupted configuration, expected array for nodeData: ${t}`);l(i,t)})}const c=e.name,d=e.layers;for(const s of d)p(s);for(;!o.isObjectEmpty(u);)for(const t of d){const e=a[t.name];if(e.name in u){const t=u[e.name];delete u[e.name];for(const s of t)h(e,s)}}const f=[],y=[],m=e.inputLayers;for(const s of m){const t=s[0],e=s[1],n=s[2];o.assert(t in a);const i=a[t].inboundNodes[e].outputTensors;f.push(i[n])}const g=e.outputLayers;for(const s of g){const t=s[0],e=s[1],n=s[2];o.assert(t in a);const i=a[t].inboundNodes[e].outputTensors;y.push(i[n])}return new t({inputs:f,outputs:y,name:c})}get stateful(){if(this._stateful)throw new s.ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){(0,t.tidy)(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}exports.Container=f;
},{"@tensorflow/tfjs-core":"nPFy","../backend/state":"LdP9","../errors":"T5Wn","../layers/serialization":"QRzD","../utils/generic_utils":"jSJk","../utils/serialization_utils":"ZUQf","../utils/types_utils":"CBHN","../variables":"pUPC","../version":"tO0n","./executor":"bfGC","./input_layer":"dbAF","./topology":"ofZj"}],"sFsM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeWeightedLoss=o,exports.standardizeClassWeights=r,exports.standardizeSampleWeights=n,exports.standardizeWeights=s;var e=require("@tensorflow/tfjs-core");function t(e,t,r){const n=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===n)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==n)throw new Error(`Provided ${r} is an array of ${e.length} `+`element(s), but the model has ${n} outputs. `+"Make sure a set of weights is provided for each model output.");return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const r=[];return t.forEach(t=>{t in e?r.push(e[t]):r.push(null)}),r}throw new Error(`The model has multiple (${n}) outputs, `+`so ${r} must be either an array with `+`${n} elements or an object with ${t} keys. `+`Provided ${r} not understood: ${JSON.stringify(e)}`)}function r(e,r){return t(e,r,"classWeight")}function n(e,r){return t(e,r,"sampleWeight")}async function s(t,r,n,s){if(null!=r||null!=s)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const r=(0,e.tidy)(()=>{if(1===t.shape.length)return(0,e.clone)(t);if(2===t.shape.length){if(t.shape[1]>1){const r=1;return(0,e.argMax)(t,r)}if(1===t.shape[1])return(0,e.reshape)(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) `+"during handling of class weights. The size is expected to be >= 1.")}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during `+"handling of class weights. The rank is expected to be 1 or 2.")}),s=Array.from(await r.data());(0,e.dispose)(r);const o=[];return s.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+`The class ${e} exists in the data but not in `+"classWeight");o.push(n[e])}),(0,e.tensor1d)(o,"float32")}return null}function o(t,r){return(0,e.mul)(t,r)}
},{"@tensorflow/tfjs-core":"nPFy"}],"HfBx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.evaluateDataset=b,exports.fitDataset=p;var t=r(require("@tensorflow/tfjs-core")),e=require("../base_callbacks"),a=require("../errors"),s=require("../logs"),i=require("../utils/generic_utils"),n=require("./training_utils");function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,a=new WeakMap;return(o=function(t){return t?a:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var a=o(e);if(a&&a.has(t))return a.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var r=i?Object.getOwnPropertyDescriptor(t,n):null;r&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]}return s.default=t,a&&a.set(t,s),s}const l=32;function u(e,a){let s,i;const n=a;s=n.xs,i=n.ys,t.util.assert(null!=s&&null!=i,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+`${a}`);const o=c("input",e.inputNames,s),r=c("output",e.outputNames,i),l=o[0].shape[0];t.util.assert(o.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset `+`provides ${o.length} inputs.  (Expected input keys: `+`${JSON.stringify(e.inputNames)})`),t.util.assert(r.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset `+`provides ${r.length} outputs.  (Expected output keys: `+`${JSON.stringify(e.outputNames)})`);for(let u=0;u<o.length;u++)t.util.assert(o[u].shape[0]===l,()=>"Batch size mismatch: input "+`${e.inputNames[u]} has ${o[u].shape[0]}; `+`expected  ${l} based on input ${e.inputNames[0]}.`);for(let u=0;u<r.length;u++)t.util.assert(r[u].shape[0]===l,()=>"Batch size mismatch: output "+`${e.outputNames[u]} has ${r[u].shape[0]}; `+`expected  ${l} based on input ${e.inputNames[0]}.`);return{xs:o,ys:r}}function c(e,s,i){if(i instanceof t.Tensor)return[i];if(Array.isArray(i))return t.util.assert(i.length===s.length,()=>`Received an array of ${i.length} Tensors, but expected ${s.length} to match the ${e} keys ${s}.`),i;{const t=[];for(const n of s){if(null==i[n])throw new a.ValueError("The feature data generated by the dataset lacks the required "+`${e} key '${n}'.`);t.push(i[n])}return t}}function h(t){if(3===t.length)throw new a.NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function p(a,o,r){const c=null!=r.batchesPerEpoch;if(t.util.assert(null!=a.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),t.util.assert(null!=r,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),t.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+`integer, but got ${r.epochs}`),t.util.assert(!c||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+`positive integer if specified, but got ${r.batchesPerEpoch}`),t.util.assert(null==r.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),a.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");a.isTraining=!0;try{const p=null!=r.validationData;let g,b;if(p)if(f(r.validationData))t.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+`but got ${r.validationBatches}`);else{const t=h(r.validationData);g=t.xs,b=t.ys}const y=a.makeTrainFunction(),v=a.getDedupedMetricsNames();let m;m=p?v.slice().concat(v.map(t=>"val_"+t)):v.slice();const w=(0,e.standardizeCallbacks)(r.callbacks,r.yieldEvery),$=null==r.verbose?1:r.verbose,{callbackList:E,history:x}=(0,e.configureCallbacks)(w,$,r.epochs,null,null,d(o,r),null,p,m);E.setModel(a),a.history=x,await E.onTrainBegin(),a.stopTraining_=!1;let k=null==r.initialEpoch?0:r.initialEpoch,D=await o.iterator();for(;k<r.epochs;){const e={};await E.onEpochBegin(k);let h=0,d=0;for(c||(D=await o.iterator());!c||h<r.batchesPerEpoch;){const o=await D.next();if(c&&o.done){console.warn("You provided `batchesPerEpoch` as "+`${r.batchesPerEpoch}, `+"but your dataset iterator ran out of data after "+`${h} batches; `+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+`${r.batchesPerEpoch*r.epochs} batches). `+"You may need to use the repeat() function when building your dataset.");break}if(null!=o.value){const{xs:e,ys:i}=u(a,o.value),l={};l.batch=d,l.size=e[0].shape[0],await E.onBatchBegin(d,l);const c=[];if(null!=r.classWeight){const t=(0,n.standardizeClassWeights)(r.classWeight,a.outputNames);for(let e=0;e<t.length;++e)c.push(await(0,n.standardizeWeights)(i[e],null,t[e]))}const p=e.concat(i).concat(c),f=y(p);t.dispose(p);for(let a=0;a<v.length;++a){const e=v[a],s=f[a];l[e]=s,t.keep(s)}await E.onBatchEnd(d,l),(0,s.disposeTensorsInLogs)(l),d++,h++}if(c?h>=r.batchesPerEpoch:o.done){if(p){let t;t=f(r.validationData)?(0,i.toList)(await a.evaluateDataset(r.validationData,{batches:r.validationBatches})):(0,i.toList)(a.evaluate(g,b,{batchSize:null==r.validationBatchSize?l:r.validationBatchSize,verbose:0}));for(let s=0;s<a.metricsNames.length;++s)e[`val_${a.metricsNames[s]}`]=t[s]}break}if(a.stopTraining_)break}if(await E.onEpochEnd(k,e),k++,a.stopTraining_)break}return await E.onTrainEnd(),await a.history.syncData(),a.history}finally{a.isTraining=!1}}function d(t,e){let a=null;return null!=e.batchesPerEpoch?a=e.batchesPerEpoch:Number.isFinite(t.size)&&(a=t.size),a}function f(t){return"function"==typeof t.iterator}function g(t){return"function"==typeof t.next}async function b(e,s,n){const o=null!=(n=n||{}).batches,r=e.testFunction;let l=[];if(n.verbose>0)throw new a.NotImplementedError("Verbose mode is not implemented yet.");t.util.assert(!o||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+`received ${JSON.stringify(n.batches)}`);const c=g(s)?s:await s.iterator();let h=0,p=0;for(;!o||p<n.batches;){const a=await c.next();if(l=t.tidy(()=>{if(a.value){const{xs:s,ys:i}=u(e,a.value),n=s.concat(i),o=t.tidy(()=>r(n));if(t.dispose(n),0===p)for(let e=0;e<o.length;++e)l.push((0,t.scalar)(0));const c=n[0].shape[0];for(let e=0;e<o.length;++e){const a=o[e],s=l[e];l[e]=t.tidy(()=>t.add(l[e],t.mul(c,a))),p>0&&t.dispose(s)}t.dispose(o),h+=c,++p}return l}),a.done){o&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+`batches (in this case, ${n.batches} batches). `+"You may need to use the repeat() function when building your dataset.");break}}for(let a=0;a<l.length;++a){const e=l[a];l[a]=t.div(l[a],h),t.dispose(e)}return(0,i.singletonOrArray)(l)}
},{"@tensorflow/tfjs-core":"nPFy","../base_callbacks":"wyxt","../errors":"T5Wn","../logs":"FvYp","../utils/generic_utils":"jSJk","./training_utils":"sFsM"}],"u2dh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkBatchSize=l,exports.disposeNewTensors=g,exports.ensureTensorsRank2OrHigher=h,exports.fitTensors=d,exports.makeBatches=p,exports.sliceArrays=c,exports.sliceArraysByIndices=u;var e=o(require("@tensorflow/tfjs-core")),t=require("../backend/tfjs_backend"),n=require("../base_callbacks"),i=require("../errors"),a=require("../logs"),s=require("../utils/math_utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}function l(t){e.util.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function c(e,n,i){return null==e?[null]:Array.isArray(e)?e.map(e=>(0,t.sliceAlongFirstAxis)(e,n,i-n)):(0,t.sliceAlongFirstAxis)(e,n,i-n)}function u(n,i){return e.tidy(()=>null==n?null:Array.isArray(n)?n.map(e=>u(e,i)):(0,t.gather)(n,"int32"===i.dtype?i:e.cast(i,"int32")))}function p(e,t){const n=[];let i=0,a=null;for(;i<e;)(a=i+t)>=e&&(a=e),n.push([i,a]),i=a;return n}async function f(r,o,l,c,f,d,h,g,y,v,w,b,m,k,E){null==f&&(f=32),null==d&&(d=1),null==w&&(w=!0),null==m&&(m=0);let D=!1;if(null!=y&&null!=v&&(D=!0),null!=E&&(D=!0,null==k))throw new i.ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const T=r.checkNumSamples(l,f,k,"steps_per_epoch");let x;null!=T&&(x=(0,s.range)(0,T)),null==h&&(h=1);const{callbackList:A,history:_}=(0,n.configureCallbacks)(g,h,d,m,T,k,f,D,b);A.setModel(r),r.history=_,await A.onTrainBegin(),r.stopTraining_=!1;for(let n=m;n<d;++n){await A.onEpochBegin(n);const s={};if(null!=k)throw new i.NotImplementedError("stepsPerEpoch mode is not implemented yet.");{if("batch"===w)throw new i.NotImplementedError("batch shuffling is not implemneted yet");w&&e.util.shuffle(x);const n=(0,e.tensor1d)(x),d=p(T,f);for(let i=0;i<d.length;++i){const p={};if(await A.onBatchBegin(i,p),e.tidy(()=>{const a=d[i][0],h=d[i][1],g=(0,t.sliceAlongFirstAxis)(n,a,h-a);p.batch=i,p.size=h-a;const w=u(l,g),b=o(w);for(let t=0;t<c.length;++t){const n=c[t],i=b[t];p[n]=i,e.keep(i)}if(i===d.length-1&&D){const t=r.testLoop(y,v,f);for(let n=0;n<c.length;++n){const i=c[n],a=t[n];e.keep(a),s["val_"+i]=a}}}),await A.onBatchEnd(i,p),(0,a.disposeTensorsInLogs)(p),r.stopTraining_)break}n.dispose()}if(await A.onEpochEnd(n,s),r.stopTraining_)break}return await A.onTrainEnd(),await r.history.syncData(),r.history}async function d(t,a,s,r={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let o,u,p,d,h,y,v,w,b;t.isTraining=!0;try{const m=null==r.batchSize?32:r.batchSize;l(m);const k=!1,E=await t.standardizeUserData(a,s,r.sampleWeight,r.classWeight,k,m);o=E[0],u=E[1],b=E[2];let D,T=!1;if(null!=r.validationData&&r.validationData.length>0){if(T=!0,2!==r.validationData.length)throw 3===r.validationData.length?new i.NotImplementedError("validationData including sample weights is not supported yet."):new i.ValueError("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+`${r.validationData} is invalid.`);h=r.validationData[0],y=r.validationData[1];const e=!0,n=await t.standardizeUserData(h,y,null,null,e,m);v=n[0],w=n[1],D=v.concat(w)}else if(null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1){T=!0;const e=Math.floor(o[0].shape[0]*(1-r.validationSplit)),t=o[0].shape[0];v=c(o,e,t),p=o,o=c(o,0,e),w=c(u,e,t),d=u,u=c(u,0,e),D=v.concat(w)}else null!=r.validationSteps&&(T=!0);const x=o.concat(u).concat(b);t.checkTrainableWeightsConsistency();const A=t.makeTrainFunction(),_=t.getDedupedMetricsNames();let O,S;T?(t.makeTestFunction(),O=t.testFunction,S=_.slice().concat(_.map(e=>"val_"+e))):(O=null,D=[],S=_.slice());const j=(0,n.standardizeCallbacks)(r.callbacks,r.yieldEvery);return await f(t,A,x,_,m,r.epochs,r.verbose,j,O,D,r.shuffle,S,r.initialEpoch,null,null)}finally{t.isTraining=!1,g(o,a),g(u,s),g(p,a),g(d,s),g(v,h),g(w,y),null!=b&&e.dispose(b)}}function h(n){const i=[];n instanceof e.Tensor&&(n=[n]);for(let e=0;e<n.length;++e){const a=n[e];if(1===a.rank)i.push((0,t.expandDims)(a,1));else{if(0===a.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");i.push(a)}}return i}function g(t,n){if(null==t)return;const i=[];if(n instanceof e.Tensor)i.push(n.id);else if(Array.isArray(n))n.forEach(e=>i.push(e.id));else if(null!=n)for(const e in n){const t=n[e];i.push(t.id)}const a=[];if(t instanceof e.Tensor)-1===i.indexOf(t.id)&&a.push(t);else if(Array.isArray(t))t.forEach(e=>{-1===i.indexOf(e.id)&&a.push(e)});else if(null!=t)for(const e in t){const n=t[e];-1===i.indexOf(n.id)&&a.push(n)}a.forEach(e=>{e.isDisposed||e.dispose()})}
},{"@tensorflow/tfjs-core":"nPFy","../backend/tfjs_backend":"sLMb","../base_callbacks":"wyxt","../errors":"T5Wn","../logs":"FvYp","../utils/math_utils":"oh9E"}],"axan":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayersModel=exports.Functional=void 0,exports.checkArrayLengths=E,exports.collectMetrics=N,exports.isDataArray=$,exports.isDataDict=A,exports.isDataTensor=T,exports.standardizeInputData=z;var e=O(require("@tensorflow/tfjs-core")),t=O(require("../backend/tfjs_backend")),s=require("../common"),r=require("../errors"),i=require("../layers/serialization"),n=O(require("../losses")),o=O(require("../metrics")),a=O(require("../optimizers")),l=require("../user_defined_metadata"),h=require("../utils/generic_utils"),u=require("../utils/layer_utils"),c=require("../utils/math_utils"),p=require("../utils/serialization_utils"),f=require("../version"),d=require("./container"),g=require("./executor"),m=require("./training_dataset"),y=require("./training_tensors"),w=require("./training_utils");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(b=function(e){return e?s:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=b(t);if(s&&s.has(e))return s.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,s&&s.set(e,r),r}function T(t){return t instanceof e.Tensor}function $(e){return Array.isArray(e)}function A(e){return!T(e)&&!$(e)}function z(e,t,s,i=!0,n=""){if(null==t||0===t.length){if(null!=e){let t=!1;if($(e)&&e.length>0)t=!0;else if(A(e)){for(const s in e)if(e.hasOwnProperty(s)){t=!0;break}}else t=!0;if(t)throw new r.ValueError(`Error when checking model ${n} expected no data, `+`but got ${e}`)}return[]}if(null==e)return t.map(e=>null);let o;if(A(e)){e=e,o=[];for(const s of t){if(null==e[s])throw new r.ValueError(`No data provided for "${s}". Need data for each key in: `+`${t}`);o.push(e[s])}}else if($(e)){if((e=e).length!==t.length)throw new r.ValueError(`Error when checking model ${n}: the Array of `+"Tensors that you are passing to your model is not the size the "+`model expected. Expected to see ${t.length} Tensor(s), but `+`instead got the following list of Tensor(s): ${e}`);o=e}else{if(e=e,t.length>1)throw new r.ValueError(`The model ${n} expects ${t.length} Tensor(s), `+`but only received one Tensor. Found: Tensor with shape ${e.shape}`);o=[e]}if(o=(0,y.ensureTensorsRank2OrHigher)(o),null!=s)for(let a=0;a<t.length;++a){if(null==s[a])continue;const e=o[a];if(e.shape.length!==s[a].length)throw new r.ValueError(`Error when checking ${n}: expected ${t[a]} `+`to have ${s[a].length} dimension(s). but got array with `+`shape ${e.shape}`);for(let t=0;t<s[a].length;++t){if(0===t&&!i)continue;const o=e.shape[t],l=s[a][t];if(null!=l&&l>=0&&o!==l)throw new r.ValueError(`${n} expected a batch of elements where each `+`example has shape [${s[a].slice(1,s[a].length)}] `+`(i.e.,tensor shape [*,${s[a].slice(1,s[a].length)}])`+` but the ${n} received an input with ${e.shape[0]}`+` examples, each with shape [${e.shape.slice(1,e.shape.length)}]`+` (tensor shape [${e.shape}])`)}}return o}function E(t,s,i){const n=(0,h.unique)(t.map(e=>e.shape[0]));n.sort();const o=(0,h.unique)(s.map(e=>e.shape[0]));if(o.sort(),n.length>1)throw new r.ValueError("All input Tensors (x) should have the same number of samples. Got array shapes: "+`${JSON.stringify(t.map(e=>e.shape))}`);if(o.length>1)throw new r.ValueError("All target Tensors (y) should have the same number of samples. Got array shapes: "+`${JSON.stringify(s.map(e=>e.shape))}`);if(n.length>0&&o.length>0&&!e.util.arraysEqual(n,o))throw new r.ValueError("Input Tensors should have the same number of samples as target "+`Tensors. Found ${n[0]} input sample(s) and ${o[0]} target `+"sample(s).")}function v(e,t,s){const i=[n.meanSquaredError,n.binaryCrossentropy,n.categoricalCrossentropy];for(let o=0;o<e.length;++o){const a=e[o],l=t[o],h=s[o];if(null!=l){if(l===n.categoricalCrossentropy&&1===a.shape[a.shape.length-1])throw new r.ValueError(`You are passing a target array of shape ${a.shape} while using `+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==i.indexOf(l)){const e=a.shape.slice(1),t=h.slice(1);for(let s=0;s<e.length;++s){const i=e[s],n=t[s];if(null!=n&&i!==n)throw new r.ValueError(`A target Tensor with shape ${a.shape} was passed for an `+`output of shape ${h}, while using a loss function that `+"expects targets to have the same shape as the output.")}}}}}function x(e,t,s,i=!0,n=""){let o;if(Array.isArray(e)){if(e.length!==t.length)throw new r.ValueError(`Error when checking model ${n}: the Array of `+"Tensors that you are passing to your model is not the size the "+`the model expected. Expected to see ${t.length} Tensor(s),`+` but instead got ${e.length} Tensors(s).`);o=e}else{if(t.length>1)throw new r.ValueError(`The model expects ${t.length} ${n} Tensors, `+"but only received one Tensor. Found: array with shape "+`${JSON.stringify(e.shape)}.`);o=[e]}if(null!=s)for(let a=0;a<t.length;++a){if(null==s[a])continue;const e=o[a];if(e.shape.length!==s[a].length)throw new r.ValueError(`Error when checking ${n}: expected ${t[a]} `+`to have ${s[a].length} dimension(s), but got array with `+`shape ${JSON.stringify(e.shape)}`);for(let o=0;o<s[a].length;++o){if(0===o&&!i)continue;const l=e.shape[o],h=s[a][o];if(null!=h&&h!==l)throw new r.ValueError(`Error when checking ${n}: expected `+`${t[a]} to have shape ${JSON.stringify(s[a])} but `+`got array with shape ${JSON.stringify(e.shape)}.`)}}}function N(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let s;if("string"==typeof e||"function"==typeof e)s=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+`function, Array, or Object, found: ${e}`);s=e}if(Array.isArray(s))return t.map(e=>s);{const e=[];for(const r of t){let t=s.hasOwnProperty(r)?s[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}const k="layers-model";class S extends d.Container{constructor(e){super(e),this.isTraining=!1}summary(e,t,s=console.log){if(!this.built)throw new r.ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");(0,u.printSummary)(this,e,t,s)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer_=a.getOptimizer(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof e.Optimizer))throw new r.ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let i=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new r.ValueError("When passing an Array as loss, it should have one entry per "+`model output. The model has ${this.outputs.length} output(s), `+`but you passed loss=${t.loss}.`);const e=t.loss;i=e.map(e=>n.get(e))}else{const e=n.get(t.loss);this.outputs.forEach(t=>{i.push(e)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new r.ValueError(`Unknown entry in loss dictionary: "${e}". `+`Only expected the following keys: ${this.outputNames}`);for(const e of this.outputNames)null==t.loss[e]&&console.warn(`Output "${e}" is missing from loss dictionary. We assume `+"this was done on purpose, and we will not be expecting data "+`to be passed to ${e} during training`),i.push(n.get(t.loss[e]))}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let e=0;e<this.outputs.length;++e){const t=this.internalOutputShapes[e],s=this.outputNames[e];this.feedOutputNames.push(s),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[e])}const l=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],(0,s.nameScope)("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==l.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const h=N(t.metrics,this.outputNames),u=(e,t,s)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([s,e])};(0,s.nameScope)("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==l.indexOf(e))continue;(t=>{let r,i,a;for(const l of t){if("string"==typeof l&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(l)){const t=this.internalOutputShapes[e];let s;1===t[t.length-1]||this.lossFunctions[e]===n.binaryCrossentropy?-1!==["accuracy","acc"].indexOf(l)?i=o.binaryAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.binaryCrossentropy):this.lossFunctions[e]===n.sparseCategoricalCrossentropy?-1!==["accuracy","acc"].indexOf(l)?i=o.sparseCategoricalAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.sparseCategoricalCrossentropy):-1!==["accuracy","acc"].indexOf(l)?i=o.categoricalAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.categoricalCrossentropy),-1!==["accuracy","acc"].indexOf(l)?s="acc":-1!==["crossentropy","ce"].indexOf(l)&&(s="ce"),a=i,r=""+s}else{const e=o.get(l);a=e,r=""+o.getLossOrMetricName(l)}let t;(0,s.nameScope)(r,()=>{t=a}),u(e,r,t)}})(h[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,s={}){const r=null==s.batchSize?32:s.batchSize;(0,y.checkBatchSize)(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const n=i[0].concat(i[1]);this.makeTestFunction();const o=this.testFunction,a=this.testLoop(o,n,r,s.verbose,s.steps);return(0,h.singletonOrArray)(a)}finally{(0,y.disposeNewTensors)(i[0],e),(0,y.disposeNewTensors)(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),(0,m.evaluateDataset)(this,e,t)}checkNumSamples(e,t,s,i="steps"){let n;if(null!=s){if(n=null,null!=t)throw new r.ValueError(`If ${i} is set, batchSize must be null or undefined.`+`Got batchSize = ${t}`)}else{if(null==e)throw new r.ValueError("Either the input data should have a defined shape, or "+`${i} shoud be specified.`);n=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return n}execute(t,s){if(Array.isArray(s)&&0===s.length)throw new r.ValueError("`outputs` is an empty Array, which is not allowed.");const i=Array.isArray(s),n=i?s:[s],o=this.retrieveSymbolicTensors(n),a=new g.FeedDict;if(t instanceof e.Tensor&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new r.ValueError(`The number of inputs provided (${t.length}) `+"does not match the number of inputs of this model "+`(${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)a.add(this.inputs[e],t[e])}else for(const e of this.inputs){const s=t[e.name];if(null==s)throw new r.ValueError(`No value is provided for the model's input ${e.name}`);a.add(e,s)}const l=(0,g.execute)(o,a);return i?l:l[0]}retrieveSymbolicTensors(e){const t=(0,h.pyListRepeat)(null,e.length);let s=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],n=i.map(e=>e.name);for(let r=0;r<e.length;++r){const o=n.indexOf(e[r]);if(-1!==o&&(t[r]=i[o],s--),0===s)break}if(0===s)break}if(s>0){const s=[];throw t.forEach((t,r)=>{null==t&&s.push(e[r])}),new r.ValueError("Cannot find SymbolicTensors for output name(s): "+`${JSON.stringify(s)}`)}return t}predictLoop(t,s=32,i=!1){return e.tidy(()=>{const n=this.checkNumSamples(t);if(i)throw new r.NotImplementedError("Verbose predictLoop() is not implemented yet.");const o=(0,y.makeBatches)(n,s),a=this.outputs.map(e=>[]);for(let s=0;s<o.length;++s){e.tidy(()=>{const e=o[s][0],r=o[s][1],i=(0,y.sliceArrays)(t,e,r),n=[];if(Array.isArray(i))for(let t=0;t<i.length;++t)n.push({key:this.inputs[t],value:i[t]});else n.push({key:this.inputs[0],value:i});const a=new g.FeedDict(n);return(0,g.execute)(this.outputs,a)}).forEach((e,t)=>a[t].push(e))}return(0,h.singletonOrArray)(a.map(t=>e.concat(t,0)))})}predict(e,t={}){const s=(0,y.ensureTensorsRank2OrHigher)(e);x(s,this.inputNames,this.feedInputShapes,!1);try{const r=null==t.batchSize?32:t.batchSize;return(0,y.checkBatchSize)(r),this.predictLoop(s,r)}finally{(0,y.disposeNewTensors)(s,e)}}predictOnBatch(e){x(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,s=!0,i){if(null==this.optimizer_)throw new r.RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let r=0;r<this.feedOutputShapes.length;++r){const e=this.feedOutputShapes[r];this.feedLossFns[r]===n.sparseCategoricalCrossentropy?o.push(e.slice(0,e.length-1).concat([1])):o.push(e)}if(E(e=z(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=z(t,this.feedOutputNames,o,!1,"target"),null),v(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=i&&i>0&&e[0].shape[0]%i!=0)throw new r.ValueError("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+`${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,s,r,i=!0,n){const[o,a]=this.standardizeUserDataXY(e,t,i,n);if(null!=s)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=(0,w.standardizeClassWeights)(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await(0,w.standardizeWeights)(a[t],null,e[t]))}return[o,a,l]}testLoop(s,i,n,o=0,a){return e.tidy(()=>{const l=this.checkNumSamples(i,n,a,"steps"),h=[];if(o>0)throw new r.NotImplementedError("Verbose mode is not implemented yet.");if(null!=a)throw new r.NotImplementedError("steps mode in testLoop() is not implemented yet");{const r=(0,y.makeBatches)(l,n),o=(0,e.tensor1d)((0,c.range)(0,l));for(let n=0;n<r.length;++n){const a=r[n][0],l=r[n][1],u=t.sliceAlongFirstAxis(o,a,l-a),c=(0,y.sliceArraysByIndices)(i,u),p=s(c);if(0===n)for(let t=0;t<p.length;++t)h.push((0,e.scalar)(0));for(let t=0;t<p.length;++t){const s=p[t];h[t]=e.add(h[t],e.mul(l-a,s))}}for(let t=0;t<h.length;++t)h[t]=e.div(h[t],l)}return h})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let s=0;s<e.length;++s){const r=e[s];let i=r;if((0,h.count)(e,r)>1){i+=`_${(0,h.count)(e.slice(0,s),r)}`}t.push(i)}return t}makeTrainFunction(){return t=>{const s=[],r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),n=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],a=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:r[e]});const a=new g.FeedDict(t),l=(0,g.execute)(this.outputs,a,{training:!0});let h;for(let r=0;r<this.lossFunctions.length;++r){let t=(0,this.lossFunctions[r])(i[r],l[r]);null!=n[r]&&(t=(0,w.computeWeightedLoss)(t,n[r]));const o=e.mean(t);s.push(o),h=0===r?t:e.add(h,t)}for(let r=0;r<this.metricsTensors.length;++r){let t;if(this.outputs.length>1&&r<this.outputs.length)t=s[r];else{const s=this.metricsTensors[r][0],n=this.metricsTensors[r][1];t=e.mean(s(i[n],l[n]))}e.keep(t),o.push(t)}return h=e.mean(h),this.calculateLosses().forEach(t=>{h=e.add(h,t)}),h},!0,a)].concat(o)}}makeTestFunction(){this.testFunction=(t=>e.tidy(()=>{const s=[];let r;const i=t.slice(0,this.inputs.length),n=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:i[e]});const a=new g.FeedDict(o),l=(0,g.execute)(this.outputs,a);for(let t=0;t<this.lossFunctions.length;++t){const i=this.lossFunctions[t],o=e.mean(i(n[t],l[t]));r=0===t?o:e.add(r,o),s.push(r)}for(let t=0;t<this.metricsTensors.length;++t){const r=this.metricsTensors[t][0],i=this.metricsTensors[t][1],o=e.mean(r(n[i],l[i]));s.push(o)}return s}))}async fit(e,t,s={}){return(0,y.fitTensors)(this,e,t,s)}async fitDataset(e,t){return(0,m.fitDataset)(this,e,t)}async trainOnBatch(t,s){const r=await this.standardizeUserData(t,s),i=r[0],n=r[1],o=this.makeTrainFunction()(i.concat(n)),a=[];for(const e of o){const t=await e.data();a.push(t[0])}return e.dispose(o),(0,y.disposeNewTensors)(r[0],t),(0,y.disposeNewTensors)(r[1],s),(0,h.singletonOrArray)(a)}getNamedWeights(e){const t=[],s=null!=e&&e.trainableOnly,r=s?this.trainableWeights:this.weights,i=this.getWeights(s);for(let n=0;n<r.length;++n)s&&!r[n].trainable||t.push({name:r[n].originalName,tensor:i[n]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const s=e.memory().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=s-e.memory().numTensors}return t}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=(0,h.toSnakeCase)(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>(0,h.toSnakeCase)(e))}else{const t=Object.keys(this.loss);e={};const s=this.loss;for(const r of t){if("string"!=typeof s[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=(0,h.toSnakeCase)(s[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[(0,h.toSnakeCase)(o.getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>(0,h.toSnakeCase)(o.getLossOrMetricName(e)));{const e={};for(const t in this.metrics)e[t]=(0,h.toSnakeCase)(o.getLossOrMetricName(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=(0,p.convertPythonicToTs)(e.optimizer_config),s=(0,i.deserialize)(t);let r,n;if("string"==typeof e.loss)r=(0,h.toCamelCase)(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(e=>(0,h.toCamelCase)(e));else if(null!=e.loss){r={};for(const t in e.loss)r[t]=(0,h.toCamelCase)(e.loss[t])}if(Array.isArray(e.metrics))n=e.metrics.map(e=>(0,h.toCamelCase)(e));else if(null!=e.metrics){n={};for(const t in e.metrics)n[t]=(0,h.toCamelCase)(e.metrics[t])}this.compile({loss:r,metrics:n,optimizer:s})}async save(t,s){if("string"==typeof t){const s=e.io.getSaveHandlers(t);if(0===s.length)throw new r.ValueError(`Cannot find any save handlers for URL '${t}'`);if(s.length>1)throw new r.ValueError(`Found more than one (${s.length}) save handlers for `+`URL '${t}'`);t=s[0]}if(null==t.save)throw new r.ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const i=await e.io.encodeWeights(this.getNamedWeights(s)),n={modelTopology:this.toJSON(null,!1),format:k,generatedBy:`TensorFlow.js tfjs-layers v${f.version}`,convertedBy:null};if(null!=s&&s.includeOptimizer&&null!=this.optimizer){n.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:s,specs:r}=await e.io.encodeWeights(await this.optimizer.getWeights(),t);i.specs.push(...r),i.data=e.io.concatenateArrayBuffers([i.data,s])}if(null!=this.userDefinedMetadata){const e=!0;(0,l.checkUserDefinedMetadata)(this.userDefinedMetadata,this.name,e),n.userDefinedMetadata=this.userDefinedMetadata}return n.weightData=i.data,n.weightSpecs=i.specs,t.save(n)}setUserDefinedMetadata(e){(0,l.checkUserDefinedMetadata)(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}exports.LayersModel=S,S.className="Model",e.serialization.registerClass(S);class C extends S{}exports.Functional=C,C.className="Functional",e.serialization.registerClass(C);
},{"@tensorflow/tfjs-core":"nPFy","../backend/tfjs_backend":"sLMb","../common":"NirA","../errors":"T5Wn","../layers/serialization":"QRzD","../losses":"M7No","../metrics":"R0qT","../optimizers":"bJtV","../user_defined_metadata":"SQCu","../utils/generic_utils":"jSJk","../utils/layer_utils":"BgAQ","../utils/math_utils":"oh9E","../utils/serialization_utils":"ZUQf","../version":"tO0n","./container":"ZNov","./executor":"bfGC","./training_dataset":"HfBx","./training_tensors":"u2dh","./training_utils":"sFsM"}],"vFxQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sequential=void 0,exports.loadLayersModelFromIOHandler=c,exports.loadLayersModelInternal=m,exports.modelFromJSON=p;var e=require("@tensorflow/tfjs-core"),t=require("./backend/state"),i=require("./engine/input_layer"),s=require("./engine/topology"),o=require("./engine/training"),n=require("./errors"),r=require("./layers/serialization"),l=d(require("./utils/generic_utils")),a=require("./utils/serialization_utils"),u=require("./utils/types_utils");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(h=function(e){return e?i:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=h(t);if(i&&i.has(e))return i.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var r=o?Object.getOwnPropertyDescriptor(e,n):null;r&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=e[n]}return s.default=e,i&&i.set(e,s),s}async function p(t,i){"modelTopology"in t||(t={modelTopology:t});let s=(t=t).modelTopology;null!=s.model_config&&(s=s.model_config);const o=(0,a.convertPythonicToTs)(s),n=(0,r.deserialize)(o,i);if(null!=t.weightsManifest){const i=await e.io.loadWeights(t.weightsManifest,t.pathPrefix,n.weights.map(e=>e.originalName)),s={};for(const e of n.weights)s[e.originalName]=i[e.originalName];n.loadWeights(s),(0,e.dispose)(i)}return n}async function m(t,i){if(null==i&&(i={}),"string"==typeof t){const s=e.io.getLoadHandlers(t,i);if(0===s.length)s.push(e.io.browserHTTPRequest(t,i));else if(s.length>1)throw new n.ValueError(`Found more than one (${s.length}) load handlers for `+`URL '${t}'`);t=s[0]}return c(t,void 0,i)}async function c(t,i,s){if(null==s&&(s={}),null==t.load)throw new n.ValueError("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const o=await t.load();let l=o.modelTopology;null!=l.model_config&&(l=l.model_config);const u=null==s.strict||s.strict,h=null!=o.weightData&&null!=o.weightSpecs&&u,d=(0,r.deserialize)((0,a.convertPythonicToTs)(l),i,h),p=o.trainingConfig;if(null!=p&&d.loadTrainingConfig(p),null!=o.userDefinedMetadata&&d.setUserDefinedMetadata(o.userDefinedMetadata),null!=o.weightData){if(null==o.weightSpecs)throw new n.ValueError("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:t,optimizerWeights:i}=f(o.weightData,o.weightSpecs);d.loadWeights(t,u),null!=d.optimizer&&i.length>0&&await d.optimizer.setWeights(i),(0,e.dispose)(t),(0,e.dispose)(i.map(e=>e.tensor))}return d}function f(t,i){const s=e.io.decodeWeights(t,i),o={},n=[];return i.forEach(e=>{"optimizer"===e.group?n.push({name:e.name,tensor:s[e.name]}):o[e.name]=s[e.name]}),{modelWeights:o,optimizerWeights:n}}class g extends o.LayersModel{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:(0,t.getUid)("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new n.ValueError("Negative dimension size caused by adding layer "+`${e.name} with input shape [`+`${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof g||e instanceof o.LayersModel;let r;if(t){if(1!==(r=e).outputs.length)throw new n.ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==r.inputs.length)throw new n.ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new n.ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=(0,i.Input)({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(1!==e.inboundNodes.length)throw new n.ValueError("A layer added to a Sequential model must not already be "+`connected somewhere else. LayersModel received layer ${e.name} `+`which has ${e.inboundNodes.length} pre-existing inbound `+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new n.ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=(0,s.getSourceInputs)(this.outputs[0])}this.inboundNodes=[],new s.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:l.pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if((0,u.getExactlyOneShape)(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new o.LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,i=console.log){this.built||this.build(),super.summary(e,t,i)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,i={}){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(e,t,i)}async evaluateDataset(e,t){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,i={}){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.fit(e,t,i)}async fitDataset(e,t){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(t,i,s={},o=!1){let l,a={};if(i instanceof Array){if(null==i[0].className||"Merge"===i[0].className)throw new n.ValueError("Legacy serialization format not supported yet.");l=i}else e.util.assert(null!=i.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),l=i.layers,delete i.layers,a=i;const u=new t(a);if(!(u instanceof g))throw new n.NotImplementedError(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(const e of l){const t=void 0,i=(0,r.deserialize)(e,t,o);o&&i.setFastWeightInitDuringBuild(!0),u.add(i)}return u}set stopTraining(e){if(null==this.model)throw new n.ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new n.ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const i={};i.className=t.getClassName(),i.config=t.getConfig(),e.push(i)}return{name:this.name,layers:e}}}exports.Sequential=g,g.className="Sequential",e.serialization.registerClass(g);
},{"@tensorflow/tfjs-core":"nPFy","./backend/state":"LdP9","./engine/input_layer":"dbAF","./engine/topology":"ofZj","./engine/training":"axan","./errors":"T5Wn","./layers/serialization":"QRzD","./utils/generic_utils":"jSJk","./utils/serialization_utils":"ZUQf","./utils/types_utils":"CBHN"}],"dxpR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.input=i,exports.loadLayersModel=l,exports.model=o,exports.registerCallbackConstructor=s,exports.sequential=u;var e=require("./base_callbacks"),r=require("./engine/input_layer"),t=require("./engine/training"),n=require("./models");function o(e){return new t.LayersModel(e)}function u(e){return new n.Sequential(e)}function l(e,r){return null==r&&(r={}),(0,n.loadLayersModelInternal)(e,r)}function i(e){return(0,r.Input)(e)}function s(r,t){e.CallbackConstructorRegistry.registerCallbackConstructor(r,t)}
},{"./base_callbacks":"wyxt","./engine/input_layer":"dbAF","./engine/training":"axan","./models":"vFxQ"}],"WMvR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tanh=exports.Swish=exports.Softsign=exports.Softplus=exports.Softmax=exports.Sigmoid=exports.Selu=exports.Relu6=exports.Relu=exports.Mish=exports.LogSoftmax=exports.Linear=exports.HardSigmoid=exports.Elu=exports.Activation=void 0,exports.deserializeActivation=C,exports.getActivation=h,exports.serializeActivation=N;var e=a(require("@tensorflow/tfjs-core")),s=a(require("./backend/tfjs_backend")),t=require("./utils/generic_utils");function r(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:s})(e)}function a(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(s);if(t&&t.has(e))return t.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}return a.default=e,t&&t.set(e,a),a}class i extends e.serialization.Serializable{getConfig(){return{}}}exports.Activation=i;class l extends i{apply(e,t=1){return s.elu(e,t)}}exports.Elu=l,l.className="elu",e.serialization.registerClass(l);class o extends i{apply(s){return e.selu(s)}}exports.Selu=o,o.className="selu",e.serialization.registerClass(o);class n extends i{apply(s){return e.relu(s)}}exports.Relu=n,n.className="relu",e.serialization.registerClass(n);class p extends i{apply(s){return(0,e.tidy)(()=>e.minimum(6,e.relu(s)))}}exports.Relu6=p,p.className="relu6",e.serialization.registerClass(p);class u extends i{apply(e){return e}}exports.Linear=u,u.className="linear",e.serialization.registerClass(u);class c extends i{apply(s){return e.sigmoid(s)}}exports.Sigmoid=c,c.className="sigmoid",e.serialization.registerClass(c);class x extends i{apply(e){return s.hardSigmoid(e)}}exports.HardSigmoid=x,x.className="hardSigmoid",e.serialization.registerClass(x);class f extends i{apply(s){return e.softplus(s)}}exports.Softplus=f,f.className="softplus",e.serialization.registerClass(f);class d extends i{apply(e){return s.softsign(e)}}exports.Softsign=d,d.className="softsign",e.serialization.registerClass(d);class g extends i{apply(s){return e.tanh(s)}}exports.Tanh=g,g.className="tanh",e.serialization.registerClass(g);class m extends i{apply(s,t=-1){return e.softmax(s,t)}}exports.Softmax=m,m.className="softmax",e.serialization.registerClass(m);class y extends i{apply(s,t=-1){return e.logSoftmax(s,t)}}exports.LogSoftmax=y,y.className="logSoftmax",e.serialization.registerClass(y);class S extends i{apply(s,t=1){return(0,e.tidy)(()=>e.mul(e.sigmoid(e.mul(s,t)),s))}}exports.Swish=S,S.className="swish",e.serialization.registerClass(S);class z extends i{apply(s){return(0,e.tidy)(()=>e.mul(s,e.tanh(e.softplus(s))))}}function N(e){return e.getClassName()}function C(s,r={}){return(0,t.deserializeKerasObject)(s,e.serialization.SerializationMap.getMap().classNameMap,r,"activation")}function h(e){if(null==e){const e={className:"linear",config:{}};return C(e)}if("string"==typeof e){const s={};return s.className=e,s.config={},C(s)}return e instanceof i?e:C(e)}exports.Mish=z,z.className="mish",e.serialization.registerClass(z);
},{"@tensorflow/tfjs-core":"nPFy","./backend/tfjs_backend":"sLMb","./utils/generic_utils":"jSJk"}],"V0uh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Regularizer=exports.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=exports.L1L2=void 0,exports.deserializeRegularizer=p,exports.getRegularizer=d,exports.l1=a,exports.l2=o,exports.serializeRegularizer=f;var e=n(require("@tensorflow/tfjs-core")),r=n(require("./backend/tfjs_backend")),t=require("./utils/generic_utils");function l(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(l=function(e){return e?t:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l(r);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=i?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}function i(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+`object, but received: ${e}`)}class s extends e.serialization.Serializable{}exports.Regularizer=s;class u extends s{constructor(e){super(),i(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return(0,e.tidy)(()=>{let l=(0,e.zeros)([1]);return this.hasL1&&(l=(0,e.add)(l,(0,e.sum)(e.mul(this.l1,(0,e.abs)(t))))),this.hasL2&&(l=(0,e.add)(l,(0,e.sum)(e.mul(this.l2,r.square(t))))),e.reshape(l,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,r){return new e({l1:r.l1,l2:r.l2})}}function a(e){return i(e),new u({l1:null!=e?e.l1:null,l2:0})}function o(e){return i(e),new u({l2:null!=e?e.l2:null,l1:0})}exports.L1L2=u,u.className="L1L2",e.serialization.registerClass(u);const c={l1l2:"L1L2"};function f(e){return(0,t.serializeKerasObject)(e)}function p(r,l={}){return(0,t.deserializeKerasObject)(r,e.serialization.SerializationMap.getMap().classNameMap,l,"regularizer")}function d(e){if(null==e)return null;if("string"==typeof e){return p({className:e in c?c[e]:e,config:{}})}return e instanceof s?e:p(e)}exports.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=c;
},{"@tensorflow/tfjs-core":"nPFy","./backend/tfjs_backend":"sLMb","./utils/generic_utils":"jSJk"}],"VdXI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ThresholdedReLU=exports.Softmax=exports.ReLU=exports.PReLU=exports.LeakyReLU=exports.ELU=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../activations"),s=require("../constraints"),a=require("../engine/topology"),r=require("../errors"),i=require("../initializers"),l=require("../regularizers"),n=require("../utils/types_utils");class h extends a.Layer{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(t,s){t=(0,n.getExactlyOneTensor)(t);let a=(0,e.relu)(t);return null!=this.maxValue&&(a=(0,e.clipByValue)(a,0,this.maxValue)),a}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}exports.ReLU=h,h.className="ReLU",e.serialization.registerClass(h);class u extends a.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(t,s){const a=(0,n.getExactlyOneTensor)(t);return(0,e.leakyRelu)(a,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}exports.LeakyReLU=u,u.className="LeakyReLU",e.serialization.registerClass(u);class o extends a.Layer{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=(0,i.getInitializer)(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=(0,l.getRegularizer)(e.alphaRegularizer),this.alphaConstraint=(0,s.getConstraint)(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new r.ValueError("Expected sharedAxes to be a number or an array of numbers, "+`but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=(0,n.getExactlyOneShape)(e)).slice(1);if(null!=this.sharedAxes)for(const a of this.sharedAxes)t[a-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(null!=this.sharedAxes)for(let a=1;a<e.length;++a)s[a]=e[a];this.inputSpec=[new a.InputSpec({ndim:e.length,axes:s})],this.built=!0}call(t,s){return t=(0,n.getExactlyOneTensor)(t),(0,e.prelu)(t,this.alpha.read())}getConfig(){const e={alphaInitializer:(0,i.serializeInitializer)(this.alphaInitializer),alphaRegularizer:(0,l.serializeRegularizer)(this.alphaRegularizer),alphaConstraint:(0,s.serializeConstraint)(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}exports.PReLU=o,o.className="PReLU",e.serialization.registerClass(o);class p extends a.Layer{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new r.NotImplementedError(`Non-default alpha value (${e.alpha}) is not supported by the `+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(t,s){const a=(0,n.getExactlyOneTensor)(t);return(0,e.elu)(a)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}exports.ELU=p,p.className="ELU",e.serialization.registerClass(p);class c extends a.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(t,s){const a=(0,n.getExactlyOneTensor)(t);return(0,e.mul)(a,(0,e.cast)((0,e.greater)(a,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}exports.ThresholdedReLU=c,c.className="ThresholdedReLU",e.serialization.registerClass(c);class g extends a.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new t.Softmax).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){const s=(0,n.getExactlyOneTensor)(e);return this.softmax(s,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}exports.Softmax=g,g.className="Softmax",e.serialization.registerClass(g);
},{"@tensorflow/tfjs-core":"nPFy","../activations":"WMvR","../constraints":"RabT","../engine/topology":"ofZj","../errors":"T5Wn","../initializers":"QmHc","../regularizers":"V0uh","../utils/types_utils":"CBHN"}],"PwZ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convOutputLength=u,exports.deconvLength=i,exports.normalizeArray=n;var e=require("../errors"),r=require("./generic_utils"),t=require("./math_utils");function n(n,u,i){if("number"==typeof n)return(0,r.pyListRepeat)(n,u);if(n.length!==u)throw new e.ValueError(`The ${i} argument must be an integer or tuple of ${u} integers.`+` Received: ${n.length} elements.`);for(let r=0;r<u;++r){const o=n[r];if(!(0,t.isInteger)(o))throw new e.ValueError(`The ${i} argument must be an integer or tuple of ${u}`+` integers. Received: ${JSON.stringify(n)} including a`+` non-integer number ${o}`)}return n}function u(e,r,t,n,u=1){if(null==e)return e;let i;return i="same"===t?e:e-(r+(r-1)*(u-1))+1,Math.floor((i+n-1)/n)}function i(r,n,u,i){if(null==r)return null;if("valid"===i)r=r*n+(0,t.max)([u-n,0]);else{if("same"!==i)throw new e.ValueError(`Unsupport padding mode: ${i}.`);r*=n}return r}
},{"../errors":"T5Wn","./generic_utils":"jSJk","./math_utils":"oh9E"}],"KdxQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpSampling2D=exports.SeparableConv2D=exports.SeparableConv=exports.Cropping2D=exports.Conv3DTranspose=exports.Conv3D=exports.Conv2DTranspose=exports.Conv2D=exports.Conv1D=exports.Conv=exports.BaseConv=void 0,exports.conv1d=v,exports.conv1dWithBias=z,exports.conv2d=k,exports.conv2dWithBiasActivation=b,exports.conv3d=w,exports.conv3dWithBias=C,exports.preprocessConv2DInput=f,exports.preprocessConv3DInput=m;var e=g(require("@tensorflow/tfjs-core")),t=require("../activations"),i=require("../backend/common"),r=g(require("../backend/tfjs_backend")),n=require("../common"),s=require("../constraints"),a=require("../engine/topology"),o=require("../errors"),l=require("../initializers"),h=require("../regularizers"),d=require("../utils/conv_utils"),p=g(require("../utils/generic_utils")),u=require("../utils/types_utils");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(c=function(e){return e?i:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=c(t);if(i&&i.has(e))return i.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,i&&i.set(e,r),r}function f(t,i){return(0,e.tidy)(()=>((0,n.checkDataFormat)(i),"channelsFirst"===i?e.transpose(t,[0,2,3,1]):t))}function m(t,i){return(0,e.tidy)(()=>((0,n.checkDataFormat)(i),"channelsFirst"===i?e.transpose(t,[0,2,3,4,1]):t))}function z(t,s,a,l=1,h="valid",d,p=1){return(0,e.tidy)(()=>{if(null==d&&(d=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(d),3!==t.shape.length)throw new o.ValueError("The input of a conv1dWithBias operation should be 3, but is "+`${t.shape.length} instead.`);if(3!==s.shape.length)throw new o.ValueError("The kernel for a conv1dWithBias operation should be 3, but is "+`${s.shape.length} instead`);if(null!=a&&1!==a.shape.length)throw new o.ValueError("The bias for a conv1dWithBias operation should be 1, but is "+`${s.shape.length} instead`);if("channelsFirst"===d&&(t=e.transpose(t,[0,2,1])),"causal"===h)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let u=e.conv1d(t,s,l,"same"===h?"same":"valid","NWC",p);return null!=a&&(u=r.biasAdd(u,a)),u})}function v(t,i,r=1,s="valid",a,o=1){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),z(t,i,null,r,s,a,o)))}function k(t,i,r=[1,1],s="valid",a,o){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),b(t,i,null,r,s,a,o)))}function b(t,r,s,a=[1,1],l="valid",h,d,p=null){return(0,e.tidy)(()=>{if(null==h&&(h=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(h),3!==t.rank&&4!==t.rank)throw new o.ValueError("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+`but received ${t.rank}.`);if(3!==r.rank&&4!==r.rank)throw new o.ValueError("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+`but received ${t.rank}.`);let u=f(t,h);if("causal"===l)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=e.fused.conv2d({x:u,filter:r,strides:a,pad:"same"===l?"same":"valid",dilations:d,dataFormat:"NHWC",bias:s,activation:p}),"channelsFirst"===h&&(u=e.transpose(u,[0,3,1,2])),u})}function w(t,i,r=[1,1,1],s="valid",a,o){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),C(t,i,null,r,s,a,o)))}function C(t,s,a,l=[1,1,1],h="valid",d,p){return(0,e.tidy)(()=>{if(null==d&&(d=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(d),4!==t.rank&&5!==t.rank)throw new o.ValueError("conv3dWithBias expects input to be of rank 4 or 5, but received "+`${t.rank}.`);if(4!==s.rank&&5!==s.rank)throw new o.ValueError("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+`${t.rank}.`);let u=m(t,d);if("causal"===h)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return u=e.conv3d(u,s,l,"same"===h?"same":"valid","NDHWC",p),null!=a&&(u=r.biasAdd(u,a)),"channelsFirst"===d&&(u=e.transpose(u,[0,4,1,2,3])),u})}class y extends a.Layer{constructor(e,i){if(super(i),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",y.verifyArgs(i),this.rank=e,p.assertPositiveInteger(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new o.NotImplementedError(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is `+"not implemented yet.");if(this.kernelSize=(0,d.normalizeArray)(i.kernelSize,e,"kernelSize"),this.strides=(0,d.normalizeArray)(null==i.strides?1:i.strides,e,"strides"),this.padding=null==i.padding?"valid":i.padding,(0,n.checkPaddingMode)(this.padding),this.dataFormat=null==i.dataFormat?"channelsLast":i.dataFormat,(0,n.checkDataFormat)(this.dataFormat),this.activation=(0,t.getActivation)(i.activation),this.useBias=null==i.useBias||i.useBias,this.biasInitializer=(0,l.getInitializer)(i.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=(0,s.getConstraint)(i.biasConstraint),this.biasRegularizer=(0,h.getRegularizer)(i.biasRegularizer),this.activityRegularizer=(0,h.getRegularizer)(i.activityRegularizer),this.dilationRate=(0,d.normalizeArray)(null==i.dilationRate?1:i.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or an array of a single number for 1D convolution, but received "+`${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or array of two numbers for 2D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or array of three numbers for 3D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(p.assert("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!p.checkArrayTypeAndLength(e.kernelSize,"number",1,3))throw new o.ValueError("BaseConv expects config.kernelSize to be number or number[] with "+`length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:(0,t.serializeActivation)(this.activation),useBias:this.useBias,biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),biasRegularizer:(0,h.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,h.serializeRegularizer)(this.activityRegularizer),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint)},i=super.getConfig();return Object.assign(e,i),e}}exports.BaseConv=y;class S extends y{constructor(e,t){super(e,t),this.kernel=null,S.verifyArgs(t),this.filters=t.filters,p.assertPositiveInteger(this.filters,"filters"),this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.kernelRegularizer=(0,h.getRegularizer)(t.kernelRegularizer)}build(e){e=(0,u.getExactlyOneShape)(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new o.ValueError("The channel dimension of the input should be defined. "+`Found ${e[t]}`);const i=e[t],r=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:i}}],this.built=!0}call(t,i){return(0,e.tidy)(()=>{let e;t=(0,u.getExactlyOneTensor)(t);const i=null==this.bias?null:this.bias.read(),r=p.mapActivationToFusedKernel(this.activation.getClassName());if(null!=r&&2===this.rank)e=b(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=z(t,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=b(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new o.NotImplementedError("convolutions greater than 3D are not implemented yet.");e=C(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(e){e=(0,u.getExactlyOneShape)(e);const t=[],i="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let n=0;n<i.length;++n){const e=(0,d.convOutputLength)(i[n],this.kernelSize[n],this.padding,this.strides[n],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[n]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t)).push(this.filters):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),kernelRegularizer:(0,h.serializeRegularizer)(this.kernelRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new o.ValueError("Convolution layer expected config.filters to be a 'number' > 0 "+`but got ${JSON.stringify(e.filters)}`)}}exports.Conv=S;class I extends S{constructor(e){super(2,e),I.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!p.checkArrayTypeAndLength(e.kernelSize,"number",1,2))throw new o.ValueError("Conv2D expects config.kernelSize to be number or number[] with "+`length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv2D=I,I.className="Conv2D",e.serialization.registerClass(I);class F extends S{constructor(e){super(3,e),F.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new o.ValueError("Conv3D expects config.kernelSize to be number or"+` [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv3D=F,F.className="Conv3D",e.serialization.registerClass(F);class R extends I{constructor(e){if(super(e),this.inputSpec=[new a.InputSpec({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new o.ValueError("Conv2DTranspose currently supports only padding modes 'same' "+`and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=(0,u.getExactlyOneShape)(e)).length)throw new o.ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new o.ValueError("The channel dimension of the inputs should be defined. Found `None`.");const i=e[t],r=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new a.InputSpec({ndim:4,axes:{[t]:i}})],this.built=!0}call(t,i){return e.tidy(()=>{let i=(0,u.getExactlyOneTensor)(t);if(4!==i.shape.length)throw new o.ValueError("Conv2DTranspose.call() expects input tensor to be rank-4, but "+`received a tensor of rank-${i.shape.length}`);const n=i.shape,s=n[0];let a,l;"channelsFirst"===this.dataFormat?(a=2,l=3):(a=1,l=2);const h=n[a],p=n[l],c=this.kernelSize[0],g=this.kernelSize[1],f=this.strides[0],m=this.strides[1],z=[s,(0,d.deconvLength)(h,f,c,this.padding),(0,d.deconvLength)(p,m,g,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(i=e.transpose(i,[0,2,3,1]));let v=e.conv2dTranspose(i,this.kernel.read(),z,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(v=e.transpose(v,[0,3,1,2])),null!=this.bias&&(v=r.biasAdd(v,this.bias.read(),this.dataFormat)),null!=this.activation&&(v=this.activation.apply(v)),v})}computeOutputShape(e){const t=(e=(0,u.getExactlyOneShape)(e)).slice();let i,r,n;"channelsFirst"===this.dataFormat?(i=1,r=2,n=3):(i=3,r=1,n=2);const s=this.kernelSize[0],a=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[i]=this.filters,t[r]=(0,d.deconvLength)(t[r],o,s,this.padding),t[n]=(0,d.deconvLength)(t[n],l,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}exports.Conv2DTranspose=R,R.className="Conv2DTranspose",e.serialization.registerClass(R);class E extends F{constructor(e){if(super(e),this.inputSpec=[new a.InputSpec({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new o.ValueError("Conv3DTranspose currently supports only padding modes 'same' "+`and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=(0,u.getExactlyOneShape)(e)).length)throw new o.ValueError("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new o.ValueError("The channel dimension of the inputs should be defined. Found `None`.");const i=e[t],r=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new a.InputSpec({ndim:5,axes:{[t]:i}})],this.built=!0}call(t,i){return e.tidy(()=>{let i=(0,u.getExactlyOneTensor)(t);if(5!==i.shape.length)throw new o.ValueError("Conv3DTranspose.call() expects input tensor to be rank-4, but "+`received a tensor of rank-${i.shape.length}`);const n=i.shape,s=n[0];let a,l,h;"channelsFirst"===this.dataFormat?(h=2,a=3,l=4):(h=1,a=2,l=3);const p=n[h],c=n[a],g=n[l],f=this.kernelSize[0],m=this.kernelSize[1],z=this.kernelSize[2],v=this.strides[0],k=this.strides[1],b=this.strides[2],w=[s,(0,d.deconvLength)(p,v,f,this.padding),(0,d.deconvLength)(c,k,m,this.padding),(0,d.deconvLength)(g,b,z,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(i=e.transpose(i,[0,2,3,4,1]));let C=e.conv3dTranspose(i,this.kernel.read(),w,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(C=e.transpose(C,[0,4,1,2,3])),null!==this.bias&&(C=r.biasAdd(C,this.bias.read(),this.dataFormat)),null!==this.activation&&(C=this.activation.apply(C)),C})}computeOutputShape(e){const t=(e=(0,u.getExactlyOneShape)(e)).slice();let i,r,n,s;"channelsFirst"===this.dataFormat?(i=1,r=2,n=3,s=4):(i=4,r=1,n=2,s=3);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],h=this.strides[0],p=this.strides[1],c=this.strides[2];return t[i]=this.filters,t[r]=(0,d.deconvLength)(t[r],h,a,this.padding),t[n]=(0,d.deconvLength)(t[n],p,o,this.padding),t[s]=(0,d.deconvLength)(t[s],c,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}exports.Conv3DTranspose=E,E.className="Conv3DTranspose",e.serialization.registerClass(E);class x extends S{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new o.ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new o.ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new o.ValueError(`SeparableConv${this.rank}D supports only padding modes: `+`'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=(0,l.getInitializer)(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=(0,h.getRegularizer)(t.depthwiseRegularizer),this.depthwiseConstraint=(0,s.getConstraint)(t.depthwiseConstraint),this.pointwiseInitializer=(0,l.getInitializer)(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=(0,h.getRegularizer)(t.pointwiseRegularizer),this.pointwiseConstraint=(0,s.getConstraint)(t.pointwiseConstraint)}build(e){if((e=(0,u.getExactlyOneShape)(e)).length<this.rank+2)throw new o.ValueError(`Inputs to SeparableConv${this.rank}D should have rank `+`${this.rank+2}, but received input shape: `+`${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new o.ValueError("The channel dimension of the inputs should be defined, "+`but found ${JSON.stringify(e[t])}`);const i=e[t],r=this.kernelSize.concat([i,this.depthMultiplier]),n=[];for(let s=0;s<this.rank;++s)n.push(1);n.push(i*this.depthMultiplier,this.filters);this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",n,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new a.InputSpec({ndim:this.rank+2,axes:{[t]:i}})],this.built=!0}call(t,i){return(0,e.tidy)(()=>{let i;if(t=(0,u.getExactlyOneTensor)(t),1===this.rank)throw new o.NotImplementedError("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=e.transpose(t,[0,2,3,1])),i=e.separableConv2d(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=r.biasAdd(i,this.bias.read(),this.dataFormat)),null!=this.activation&&(i=this.activation.apply(i)),"channelsFirst"===this.dataFormat&&(i=e.transpose(i,[0,3,1,2])),i})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=(0,l.serializeInitializer)(this.depthwiseInitializer),e.pointwiseInitializer=(0,l.serializeInitializer)(this.pointwiseInitializer),e.depthwiseRegularizer=(0,h.serializeRegularizer)(this.depthwiseRegularizer),e.pointwiseRegularizer=(0,h.serializeRegularizer)(this.pointwiseRegularizer),e.depthwiseConstraint=(0,s.serializeConstraint)(this.depthwiseConstraint),e.pointwiseConstraint=(0,s.serializeConstraint)(this.pointwiseConstraint),e}}exports.SeparableConv=x,x.className="SeparableConv";class D extends x{constructor(e){super(2,e)}}exports.SeparableConv2D=D,D.className="SeparableConv2D",e.serialization.registerClass(D);class A extends S{constructor(e){super(1,e),A.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!p.checkArrayTypeAndLength(e.kernelSize,"number",1,1))throw new o.ValueError("Conv1D expects config.kernelSize to be number or number[] with "+`length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv1D=A,A.className="Conv1D",e.serialization.registerClass(A);class T extends a.Layer{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(t,i){return(0,e.tidy)(()=>{if(t=(0,u.getExactlyOneTensor)(t),"channelsLast"===this.dataFormat){const e=r.sliceAlongAxis(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return r.sliceAlongAxis(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=r.sliceAlongAxis(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return r.sliceAlongAxis(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Cropping2D=T,T.className="Cropping2D",e.serialization.registerClass(T);class N extends a.Layer{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,n.checkDataFormat)(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,(0,n.checkInterpolationFormat)(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],i=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,i]}{const t=null==e[1]?null:this.size[0]*e[1],i=null==e[2]?null:this.size[1]*e[2];return[e[0],t,i,e[3]]}}call(t,i){return e.tidy(()=>{let i=(0,u.getExactlyOneTensor)(t);const r=i.shape;if("channelsFirst"===this.dataFormat){i=e.transpose(i,[0,2,3,1]);const t=this.size[0]*r[2],n=this.size[1]*r[3],s="nearest"===this.interpolation?e.image.resizeNearestNeighbor(i,[t,n]):e.image.resizeBilinear(i,[t,n]);return e.transpose(s,[0,3,1,2])}{const t=this.size[0]*r[1],n=this.size[1]*r[2];return"nearest"===this.interpolation?e.image.resizeNearestNeighbor(i,[t,n]):e.image.resizeBilinear(i,[t,n])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}exports.UpSampling2D=N,N.className="UpSampling2D",e.serialization.registerClass(N);
},{"@tensorflow/tfjs-core":"nPFy","../activations":"WMvR","../backend/common":"OElF","../backend/tfjs_backend":"sLMb","../common":"NirA","../constraints":"RabT","../engine/topology":"ofZj","../errors":"T5Wn","../initializers":"QmHc","../regularizers":"V0uh","../utils/conv_utils":"PwZ9","../utils/generic_utils":"jSJk","../utils/types_utils":"CBHN"}],"bcCJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConv2D=void 0,exports.depthwiseConv2d=c;var e=d(require("@tensorflow/tfjs-core")),t=require("../backend/common"),i=d(require("../backend/tfjs_backend")),r=require("../common"),s=require("../constraints"),n=require("../errors"),a=require("../initializers"),l=require("../regularizers"),h=require("../utils/conv_utils"),u=require("../utils/types_utils"),o=require("./convolutional");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(p=function(e){return e?i:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=p(t);if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=s?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,i&&i.set(e,r),r}function c(i,s,a=[1,1],l="valid",h,u){return(0,e.tidy)(()=>{null==h&&(h=(0,t.imageDataFormat)()),(0,r.checkDataFormat)(h);let p=(0,o.preprocessConv2DInput)(i,h);if(4!==i.rank)throw new n.ValueError("Input for depthwiseConv2d is required to be 4-D, but is instead "+`${i.rank}-D`);if(4!==s.rank)throw new n.ValueError("depthwiseKernel is required to be 4-D, but is instead "+`${s.rank}-D`);return p=e.depthwiseConv2d(p,s,a,"same"===l?"same":"valid","NHWC",u),"channelsFirst"===h&&(p=e.transpose(p,[0,3,1,2])),p})}class w extends o.BaseConv{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=(0,a.getInitializer)(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=(0,s.getConstraint)(e.depthwiseConstraint),this.depthwiseRegularizer=(0,l.getRegularizer)(e.depthwiseRegularizer)}build(e){if((e=(0,u.getExactlyOneShape)(e)).length<4)throw new n.ValueError("Inputs to DepthwiseConv2D should have rank 4. "+`Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new n.ValueError("The channel dimension of the inputs to DepthwiseConv2D should "+`be defined, but is not (${e[t]}).`);const i=e[t],r=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,r){return(0,e.tidy)(()=>{let e=c(t=(0,u.getExactlyOneTensor)(t),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(e=i.biasAdd(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(e){e=(0,u.getExactlyOneShape)(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],i="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=(0,h.convOutputLength)(t,this.kernelSize[0],this.padding,this.strides[0]),n=(0,h.convOutputLength)(i,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,s,n]:[e[0],s,n,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=(0,a.serializeInitializer)(this.depthwiseInitializer),e.depthwiseRegularizer=(0,l.serializeRegularizer)(this.depthwiseRegularizer),e.depthwiseConstraint=(0,s.serializeConstraint)(this.depthwiseRegularizer),e}}exports.DepthwiseConv2D=w,w.className="DepthwiseConv2D",e.serialization.registerClass(w);
},{"@tensorflow/tfjs-core":"nPFy","../backend/common":"OElF","../backend/tfjs_backend":"sLMb","../common":"NirA","../constraints":"RabT","../errors":"T5Wn","../initializers":"QmHc","../regularizers":"V0uh","../utils/conv_utils":"PwZ9","../utils/types_utils":"CBHN","./convolutional":"KdxQ"}],"Jge7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StackedRNNCells=exports.SimpleRNNCell=exports.SimpleRNN=exports.RNNCell=exports.RNN=exports.LSTMCell=exports.LSTM=exports.GRUCell=exports.GRU=void 0,exports.generateDropoutMask=E,exports.rnn=R,exports.standardizeArgs=I;var t=z(require("@tensorflow/tfjs-core")),e=require("../activations"),i=z(require("../backend/tfjs_backend")),r=require("../common"),s=require("../constraints"),n=require("../engine/topology"),a=require("../errors"),l=require("../initializers"),u=require("../regularizers"),o=require("../utils/generic_utils"),h=z(require("../utils/math_utils")),c=require("../utils/types_utils"),p=require("../variables"),g=require("./serialization");function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(d=function(t){return t?i:e})(t)}function z(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=d(e);if(i&&i.has(t))return i.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var a=s?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,i&&i.set(t,r),r}function I(t,e,i,r){if(Array.isArray(t)){if(null!=e||null!=i)throw new a.ValueError("When inputs is an array, neither initialState or constants should be provided");null!=r&&(i=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=s(e),constants:i=s(i)}}function R(e,i,r,s=!1,n,l,u=!1,o=!1){return t.tidy(()=>{const c=i.shape.length;if(c<3)throw new a.ValueError(`Input should be at least 3D, but is ${c}D.`);const p=[1,0].concat(h.range(2,c));if(i=t.transpose(i,p),null!=l)throw new a.NotImplementedError("The rnn() functoin of the deeplearn.js backend does not support constants yet.");u&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=n&&((n=t.cast(t.cast(n,"bool"),"float32")).rank===c-1&&(n=t.expandDims(n,-1)),n=t.transpose(n,p)),s&&(i=t.reverse(i,0),null!=n&&(n=t.reverse(n,0)));const g=[];let d,z=r;const I=i.shape[0],R=t.unstack(i);let k,f;null!=n&&(k=t.unstack(n));for(let i=0;i<I;++i){const r=R[i],s=t.tidy(()=>e(r,z));if(null==n)d=s[0],z=s[1];else{const e=t.tidy(()=>{const e=k[i],r=t.sub(t.onesLike(e),e);return{output:t.add(t.mul(s[0],e),t.mul(z[0],r)),newStates:z.map((i,n)=>t.add(t.mul(s[1][n],e),t.mul(i,r)))}});d=e.output,z=e.newStates}o&&g.push(d)}if(o){const e=1;f=t.stack(g,e)}return[d,f,z]})}class k extends n.Layer{constructor(t){let e;if(super(t),null==t.cell)throw new a.ValueError("cell property is missing for the constructor of RNN.");if(null==(e=Array.isArray(t.cell)?new N({cells:t.cell}):t.cell).stateSize)throw new a.ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new n.InputSpec({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return h.range(0,t).map(t=>null)}return this.states_}setStates(t){this.states_=t}computeOutputShape(t){(0,c.isArrayOfShapes)(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const i=e[0];let r;if(r=this.returnSequences?[t[0],t[1],i]:[t[0],i],this.returnState){const i=[];for(const r of e)i.push([t[0],r]);return[r].concat(i)}return r}computeMask(e,i){return t.tidy(()=>{Array.isArray(i)&&(i=i[0]);const t=this.returnSequences?i:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let i=0;i<t;++i)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(e){if(null!=this.numConstants)throw new a.NotImplementedError("Constants support is not implemented in RNN yet.");(0,c.isArrayOfShapes)(e)&&(e=e[0]),e=e;const i=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new n.InputSpec({shape:[i,null,...r]});const s=[e[0]].concat(e.slice(2));let l;if(this.cell.build(s),l=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!t.util.arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),l))throw new a.ValueError("An initialState was passed that is not compatible with "+`cell.stateSize. Received stateSpec=${this.stateSpec}; `+`However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=l.map(t=>new n.InputSpec({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(e,i=!1){(0,t.tidy)(()=>{if(!this.stateful)throw new a.AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(null==r)throw new a.ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>t.zeros([r,e])):this.states_=[t.zeros([r,this.cell.stateSize])];else if(null==e)t.dispose(this.states_),null!=this.keptStates&&(t.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>t.zeros([r,e])):this.states_[0]=t.zeros([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new a.ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${e.length} state value(s). Input `+`received: ${e}`);!0===i?this.keptStates.push(this.states_.slice()):t.dispose(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],n=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,l=[r,n];if(!t.util.arraysEqual(s.shape,l))throw new a.ValueError(`State ${i} is incompatible with layer ${this.name}: `+`expected shape=${l}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(e=>t.keep(e.clone()))})}apply(t,e){let i=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const s=I(t,i,r,this.numConstants);t=s.inputs,i=s.initialState,r=s.constants;let a=[],l=[];if(null!=i){e.initialState=i,a=a.concat(i),this.stateSpec=[];for(const t of i)this.stateSpec.push(new n.InputSpec({shape:t.shape}));l=l.concat(this.stateSpec)}if(null!=r&&(e.constants=r,a=a.concat(r),this.numConstants=r.length),a[0]instanceof n.SymbolicTensor){const i=[t].concat(a),r=this.inputSpec.concat(l),s=this.inputSpec;this.inputSpec=r;const n=super.apply(i,e);return this.inputSpec=s,n}return super.apply(t,e)}call(e,i){return(0,t.tidy)(()=>{const t=null==i?null:i.mask,r=null==i?null:i.training;let s=null==i?null:i.initialState;e=(0,c.getExactlyOneTensor)(e),null==s&&(s=this.stateful?this.states_:this.getInitialState(e));const n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==n)throw new a.ValueError(`RNN Layer has ${n} state(s) but was passed `+`${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const l={training:r},u=R((t,e)=>{const i=this.cell.call([t].concat(e),l);return[i[0],i.slice(1)]},e,s,this.goBackwards,t,null,this.unroll,this.returnSequences),o=u[0],h=u[1],p=u[2];this.stateful&&this.resetStates(p,r);const g=this.returnSequences?h:o;return this.returnState?[g].concat(p):g})}getInitialState(e){return(0,t.tidy)(()=>{let r=t.zeros(e.shape);return r=t.sum(r,[1,2]),r=i.expandDims(r),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?i.tile(r,[1,t]):r):this.cell.stateSize>1?[i.tile(r,[1,this.cell.stateSize])]:[r]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);const i=this.cell.getConfig();return this.getClassName()===k.className&&(e.cell={className:this.cell.getClassName(),config:i}),Object.assign({},i,t,e)}static fromConfig(t,e,i={}){const r=e.cell,s=(0,g.deserialize)(r,i);return new t(Object.assign(e,{cell:s}))}}exports.RNN=k,k.className="RNN",t.serialization.registerClass(k);class f extends n.Layer{}exports.RNNCell=f;class m extends f{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=(0,c.getExactlyOneShape)(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,t.tidy)(()=>{if(2!==(e=e).length)throw new a.ValueError(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const n=null!=r.training&&r.training;let l;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:n,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(s),rate:this.recurrentDropout,training:n,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,o=this.recurrentDropoutMask;l=null!=u?i.dot(t.mul(e,u),this.kernel.read()):i.dot(e,this.kernel.read()),null!=this.bias&&(l=i.biasAdd(l,this.bias.read())),null!=o&&(s=t.mul(s,o));let h=t.add(l,i.dot(s,this.recurrentKernel.read()));return null!=this.activation&&(h=this.activation.apply(h)),[h,h]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,i)}}exports.SimpleRNNCell=m,m.className="SimpleRNNCell",t.serialization.registerClass(m);class A extends k{constructor(t){t.cell=new m(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return new t(e)}}exports.SimpleRNN=A,A.className="SimpleRNN",t.serialization.registerClass(A);class S extends f{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new a.ValueError("GRUCell does not support reset_after parameter set to true.");this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=(0,e.getActivation)(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){const e=(t=(0,c.getExactlyOneShape)(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,t.tidy)(()=>{if(2!==(e=e).length)throw new a.ValueError("GRUCell expects 2 input Tensors (inputs, h, c), got "+`${e.length}.`);const s=null!=r.training&&r.training;let n=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(n),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=this.recurrentDropoutMask;let o,h,c;0<this.dropout&&this.dropout<1&&(e=t.mul(e,l[0]));let p=i.dot(e,this.kernel.read());this.useBias&&(p=i.biasAdd(p,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(n=t.mul(n,u[0]));const g=this.recurrentKernel.read(),[d,z]=t.split(g,[2*this.units,this.units],g.rank-1),I=i.dot(n,d),[R,k,f]=t.split(p,3,p.rank-1),[m,A]=t.split(I,2,I.rank-1);o=this.recurrentActivation.apply(t.add(R,m)),h=this.recurrentActivation.apply(t.add(k,A));const S=i.dot(t.mul(h,n),z);c=this.activation.apply(t.add(f,S));const C=t.add(t.mul(o,n),t.mul(t.add(1,t.neg(o)),c));return[C,C]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),recurrentActivation:(0,e.serializeActivation)(this.recurrentActivation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,i)}}exports.GRUCell=S,S.className="GRUCell",t.serialization.registerClass(S);class C extends k{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new S(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}exports.GRU=C,C.className="GRU",t.serialization.registerClass(C);class b extends f{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=(0,e.getActivation)(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;const r=(t=(0,c.getExactlyOneShape)(t))[t.length-1];let s;if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,r=this.units;s=new((e=class extends l.Initializer{apply(e,s){const n=t.apply([r]),a=(new l.Ones).apply([r]),u=t.apply([2*r]);return i.concatAlongFirstAxis(i.concatAlongFirstAxis(n,a),u)}}).className="CustomInit",e)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,r){return(0,t.tidy)(()=>{const s=null!=r.training&&r.training;if(3!==(e=e).length)throw new a.ValueError("LSTMCell expects 3 input Tensors (inputs, h, c), got "+`${e.length}.`);let n=e[1];const l=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(n),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,o=this.recurrentDropoutMask;let h,c,p,g;0<this.dropout&&this.dropout<1&&(e=t.mul(e,u[0]));let d=i.dot(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(n=t.mul(n,o[0])),d=t.add(d,i.dot(n,this.recurrentKernel.read())),this.useBias&&(d=i.biasAdd(d,this.bias.read()));const[z,I,R,k]=t.split(d,4,d.rank-1);h=this.recurrentActivation.apply(z),c=this.recurrentActivation.apply(I),p=t.add(t.mul(c,l),t.mul(h,this.activation.apply(R))),g=this.recurrentActivation.apply(k);const f=t.mul(g,this.activation.apply(p));return[f,f,p]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),recurrentActivation:(0,e.serializeActivation)(this.recurrentActivation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,i)}}exports.LSTMCell=b,b.className="LSTMCell",t.serialization.registerClass(b);class y extends k{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new b(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}exports.LSTM=y,y.className="LSTM",t.serialization.registerClass(y);class N extends f{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(e,i){return(0,t.tidy)(()=>{let t=(e=e).slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(t.splice(0,e.stateSize.length)):r.push(t.splice(0,1));r.reverse();const s=[];let n;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];t=r[a],n=0===a?[e[0]].concat(t):[n[0]].concat(t),n=l.call(n,i),s.push(n.slice(1))}t=[];for(const e of s.slice().reverse())t.push(...e);return[n[0]].concat(t)})}build(t){let e;(0,c.isArrayOfShapes)(t)&&(t=t[0]),t=t,this.cells.forEach((i,s)=>{(0,r.nameScope)(`RNNCell_${s}`,()=>{i.build(t),e=Array.isArray(i.stateSize)?i.stateSize[0]:i.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=super.getConfig(),e={cells:this.cells.map(t=>({className:t.getClassName(),config:t.getConfig()}))};return Object.assign({},t,e)}static fromConfig(t,e,i={}){const r=[];for(const s of e.cells)r.push((0,g.deserialize)(s,i));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return(0,p.batchGetValue)(t)}setWeights(t){const e=[];for(const i of this.cells){const r=i.weights.length,s=t.splice(r);for(let t=0;t<i.weights.length;++t)e.push([i.weights[t],s[t]])}(0,p.batchSetValue)(e)}}function E(e){const{ones:r,rate:s,training:n=!1,count:a=1,dropoutFunc:l}=e,u=()=>null!=l?l(r(),s):i.dropout(r(),s),o=()=>i.inTrainPhase(u,r,n);return!a||a<=1?t.keep(o().clone()):Array(a).fill(void 0).map(o).map(e=>t.keep(e.clone()))}exports.StackedRNNCells=N,N.className="StackedRNNCells",t.serialization.registerClass(N);
},{"@tensorflow/tfjs-core":"nPFy","../activations":"WMvR","../backend/tfjs_backend":"sLMb","../common":"NirA","../constraints":"RabT","../engine/topology":"ofZj","../errors":"T5Wn","../initializers":"QmHc","../regularizers":"V0uh","../utils/generic_utils":"jSJk","../utils/math_utils":"oh9E","../utils/types_utils":"CBHN","../variables":"pUPC","./serialization":"QRzD"}],"CBER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConvLSTM2DCell=exports.ConvLSTM2D=void 0;var t=c(require("@tensorflow/tfjs-core")),e=c(require("../backend/tfjs_backend")),s=require("../common"),i=require("../engine/topology"),r=require("../errors"),n=require("../initializers"),a=require("../utils/conv_utils"),l=require("../utils/generic_utils"),o=require("../utils/types_utils"),u=require("./recurrent");function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(h=function(t){return t?s:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=h(e);if(s&&s.has(t))return s.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var a=r?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=t[n]}return i.default=t,s&&s.set(t,i),i}var p=function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(s[i[r]]=t[i[r]])}return s};class d extends u.RNNCell{}class f extends u.RNN{constructor(t){if(t.unroll)throw new r.NotImplementedError("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new r.NotImplementedError("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new i.InputSpec({ndim:5})]}call(e,s){return t.tidy(()=>{if(null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),s&&s.constants)throw new r.ValueError("ConvRNN2D cell does not support constants");const i=null==s?null:s.mask,n=null==s?null:s.training,a=null==s?null:s.initialState;return super.call(e,{mask:i,training:n,initialState:a})})}computeOutputShape(t){let e=this.computeSingleOutputShape(t);return this.returnSequences||(e=[e[0],...e.slice(2)]),this.returnState&&(e=[e,...Array(2).fill([t[0],...e.slice(-3)])]),e}getInitialState(e){return t.tidy(()=>{const{stateSize:s}=this.cell,i=e.shape,r=this.computeSingleOutputShape(i),n=[r[0],...r.slice(2)],a=t.zeros(n);return Array.isArray(s)?Array(s.length).fill(a):[a]})}resetStates(e,s=!1){t.tidy(()=>{if(!this.stateful)throw new r.AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const i=this.inputSpec[0].shape,n=this.computeSingleOutputShape(i),a=[n[0],...n.slice(2)];if(null==i[0])throw new r.ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>t.zeros(a)):this.states_=[t.zeros(a)];else if(null==e)t.dispose(this.states_),null!=this.keptStates&&(t.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>t.zeros(a)):this.states_[0]=t.zeros(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new r.ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${e.length} state value(s). Input `+`received: ${e}`);s?this.keptStates.push(this.states_.slice()):t.dispose(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],n=a;if(!t.util.arraysEqual(i.shape,n))throw new r.ValueError(`State ${s} is incompatible with layer ${this.name}: `+`expected shape=${n}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(e=>t.keep(e.clone()))})}computeSingleOutputShape(t){const{dataFormat:e,filters:s,kernelSize:i,padding:r,strides:n,dilationRate:l}=this.cell,o="channelsFirst"===e,u=t[o?3:2],h=t[o?4:3],c=(0,a.convOutputLength)(u,i[0],r,n[0],l[0]),p=(0,a.convOutputLength)(h,i[1],r,n[1],l[1]);return[...t.slice(0,2),...o?[s,c,p]:[c,p,s]]}}f.className="ConvRNN2D";class g extends u.LSTMCell{constructor(t){const{filters:e,kernelSize:i,strides:r,padding:n,dataFormat:o,dilationRate:u}=t;super(Object.assign({},t,{units:e})),this.filters=e,(0,l.assertPositiveInteger)(this.filters,"filters"),this.kernelSize=(0,a.normalizeArray)(i,2,"kernelSize"),this.kernelSize.forEach(t=>(0,l.assertPositiveInteger)(t,"kernelSize")),this.strides=(0,a.normalizeArray)(r||1,2,"strides"),this.strides.forEach(t=>(0,l.assertPositiveInteger)(t,"strides")),this.padding=n||"valid",(0,s.checkPaddingMode)(this.padding),this.dataFormat=o||"channelsLast",(0,s.checkDataFormat)(this.dataFormat),this.dilationRate=(0,a.normalizeArray)(u||1,2,"dilationRate"),this.dilationRate.forEach(t=>(0,l.assertPositiveInteger)(t,"dilationRate"))}build(s){var i;s=(0,o.getExactlyOneShape)(s);const a="channelsFirst"===this.dataFormat?1:s.length-1;if(null==s[a])throw new r.ValueError("The channel dimension of the input should be defined. "+`Found ${s[a]}`);const l=s[a],u=this.kernelSize.concat([l,4*this.filters]);this.kernel=this.addWeight("kernel",u,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const h=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",h,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let s;if(this.unitForgetBias){const r=this.biasInitializer,a=this.filters;s=new((i=class extends n.Initializer{apply(s,i){const n=r.apply([a]),l=t.ones([a]),o=r.apply([2*a]);return e.concatenate([n,l,o])}}).className="CustomInit",i)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,s,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,s){return t.tidy(()=>{if(3!==e.length)throw new r.ValueError("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+`${e.length}.`);const i=s.training||!1,n=e[0],a=e[1],l=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=(0,u.generateDropoutMask)({ones:()=>t.onesLike(n),rate:this.dropout,training:i,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,h=(e,s,i)=>s&&s[i]?t.mul(s[i],e):e;let c=h(n,o,0),p=h(n,o,1),d=h(n,o,2),f=h(n,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=(0,u.generateDropoutMask)({ones:()=>t.onesLike(a),rate:this.recurrentDropout,training:i,count:4,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let y=h(a,g,0),S=h(a,g,1),v=h(a,g,2),m=h(a,g,3);const[k,b,C,z]=t.split(this.kernel.read(),4,3),[w,O,M,N]=this.useBias?t.split(this.bias.read(),4):[null,null,null,null];c=this.inputConv(c,k,w,this.padding),p=this.inputConv(p,b,O,this.padding),d=this.inputConv(d,C,M,this.padding),f=this.inputConv(f,z,N,this.padding);const[D,I,_,A]=t.split(this.recurrentKernel.read(),4,3);y=this.recurrentConv(y,D),S=this.recurrentConv(S,I),v=this.recurrentConv(v,_),m=this.recurrentConv(m,A);const F=this.recurrentActivation.apply(t.add(c,y)),R=this.recurrentActivation.apply(t.add(p,S)),j=t.add(t.mul(R,l),t.mul(F,this.activation.apply(t.add(d,v)))),x=t.mul(this.recurrentActivation.apply(t.add(f,m)),this.activation.apply(j));return[x,x,j]})}getConfig(){const t=super.getConfig(),{units:e}=t,s=p(t,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},s,i)}inputConv(s,i,r,n){const a=t.conv2d(s,i,this.strides,n||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return r?e.biasAdd(a,r,this.dataFormat):a}recurrentConv(e,s){return t.conv2d(e,s,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}exports.ConvLSTM2DCell=g,g.className="ConvLSTM2DCell",t.serialization.registerClass(g);class y extends f{constructor(t){const e=new g(t);super(Object.assign({},t,{cell:e}))}static fromConfig(t,e){return new t(e)}}exports.ConvLSTM2D=y,y.className="ConvLSTM2D",t.serialization.registerClass(y);
},{"@tensorflow/tfjs-core":"nPFy","../backend/tfjs_backend":"sLMb","../common":"NirA","../engine/topology":"ofZj","../errors":"T5Wn","../initializers":"QmHc","../utils/conv_utils":"PwZ9","../utils/generic_utils":"jSJk","../utils/types_utils":"CBHN","./recurrent":"Jge7"}],"nWWZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpatialDropout1D=exports.Reshape=exports.RepeatVector=exports.Permute=exports.Masking=exports.Flatten=exports.Dropout=exports.Dense=exports.Activation=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../activations"),i=p(require("../backend/tfjs_backend")),s=require("../constraints"),r=require("../engine/topology"),n=require("../errors"),a=require("../initializers"),o=require("../regularizers"),l=require("../utils/generic_utils"),u=require("../utils/math_utils"),h=require("../utils/types_utils");function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(c=function(t){return t?i:e})(t)}function p(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=c(e);if(i&&i.has(t))return i.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var a=r?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(s,n,a):s[n]=t[n]}return s.default=t,i&&i.set(t,s),s}class g extends r.Layer{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,i=[];for(let s=0;s<this.noiseShape.length;++s)i.push(null==this.noiseShape[s]?e[s]:this.noiseShape[s]);return i}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);const t=(0,h.getExactlyOneTensor)(e);if(0<this.rate&&this.rate<1){const e=null!=s.training&&s.training,r=this.getNoiseShape(t);return i.inTrainPhase(()=>i.dropout(t,this.rate,r,this.seed),()=>t,e)}return e})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}exports.Dropout=g,g.className="Dropout",t.serialization.registerClass(g);class d extends g{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}exports.SpatialDropout1D=d,d.className="SpatialDropout1D",t.serialization.registerClass(d);class m extends r.Layer{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,(0,l.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=(0,a.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=(0,a.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.kernelRegularizer=(0,o.getRegularizer)(t.kernelRegularizer),this.biasRegularizer=(0,o.getRegularizer)(t.biasRegularizer),this.activityRegularizer=(0,o.getRegularizer)(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){const e=(t=(0,h.getExactlyOneShape)(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){const e=(t=(0,h.getExactlyOneShape)(t)).slice();return e[e.length-1]=this.units,e}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);const t=(0,h.getExactlyOneTensor)(e),r=(0,l.mapActivationToFusedKernel)(this.activation.getClassName());let n;return null!=r?n=i.dot(t,this.kernel.read(),r,this.bias?this.bias.read():null):(n=i.dot(t,this.kernel.read()),null!=this.bias&&(n=i.biasAdd(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){const t={units:this.units,activation:(0,e.serializeActivation)(this.activation),useBias:this.useBias,kernelInitializer:(0,a.serializeInitializer)(this.kernelInitializer),biasInitializer:(0,a.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,o.serializeRegularizer)(this.kernelRegularizer),biasRegularizer:(0,o.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,o.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint)},i=super.getConfig();return Object.assign(t,i),t}}exports.Dense=m,m.className="Dense",t.serialization.registerClass(m);class f extends r.Layer{constructor(t){super(t=t||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=(0,h.getExactlyOneShape)(t);for(const e of t.slice(1))if(null==e)throw new n.ValueError('The shape of the input to "Flatten" is not fully defined '+`(got ${t.slice(1)}). Make sure to pass a complete `+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],(0,u.arrayProd)(t,1)]}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);let r=(0,h.getExactlyOneTensor)(e);if("channelsFirst"===this.dataFormat&&r.rank>1){const e=[0];for(let t=2;t<r.rank;++t)e.push(t);e.push(1),r=(0,t.transpose)(r,e)}return i.batchFlatten(r)})}getConfig(){const t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}exports.Flatten=f,f.className="Flatten",t.serialization.registerClass(f);class k extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.activation=(0,e.getActivation)(t.activation)}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const t=(0,h.getExactlyOneTensor)(e);return this.activation.apply(t)})}getConfig(){const t={activation:(0,e.serializeActivation)(this.activation)},i=super.getConfig();return Object.assign(t,i),t}}exports.Activation=k,k.className="Activation",t.serialization.registerClass(k);class y extends r.Layer{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(e,s){return(0,t.tidy)(()=>(e=(0,h.getExactlyOneTensor)(e),i.repeat(e,this.n)))}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}exports.RepeatVector=y,y.className="RepeatVector",t.serialization.registerClass(y);class z extends r.Layer{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const i="Total size of new array must be unchanged.",s=e.slice();let r=1,a=null;for(let l=0;l<s.length;++l){const t=s[l];if(this.isUnknown(t)){if(null!==a)throw new n.ValueError("Can only specifiy one unknown dimension.");a=l}else r*=t}const o=(0,u.arrayProd)(t);if(null!==a){if(0===r||o%r!=0)throw new n.ValueError(i);s[a]=o/r}else if(o!==r)throw new n.ValueError(i);return s}computeOutputShape(t){let e=!1;for(let i=0;i<t.length;++i)if(this.isUnknown(t[i])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const s=(0,h.getExactlyOneTensor)(e),r=s.shape,n=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return(0,t.reshape)(s,n)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}exports.Reshape=z,z.className="Reshape",t.serialization.registerClass(z);class b extends r.Layer{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+`${e.dims} instead.`);const i=(0,u.range)(1,e.dims.length+1);if(!t.util.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new r.InputSpec({ndim:this.dims.length+1})]}computeOutputShape(t){const e=(t=(0,h.getExactlyOneShape)(t)).slice();return this.dims.forEach((i,s)=>{e[s+1]=t[i]}),e}call(e,i){return(0,t.transpose)((0,h.getExactlyOneTensor)(e),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}exports.Permute=b,b.className="Permute",t.serialization.registerClass(b);class S extends r.Layer{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(e,i){const s=(0,h.getExactlyOneTensor)(e);return(0,t.any)((0,t.notEqual)(s,this.maskValue),-1)}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const s=(0,h.getExactlyOneTensor)(e),r=(0,t.any)((0,t.notEqual)(s,this.maskValue),-1,!0);return(0,t.mul)(s,(0,t.cast)(r,s.dtype))})}}exports.Masking=S,S.className="Masking",t.serialization.registerClass(S);
},{"@tensorflow/tfjs-core":"nPFy","../activations":"WMvR","../backend/tfjs_backend":"sLMb","../constraints":"RabT","../engine/topology":"ofZj","../errors":"T5Wn","../initializers":"QmHc","../regularizers":"V0uh","../utils/generic_utils":"jSJk","../utils/math_utils":"oh9E","../utils/types_utils":"CBHN"}],"mcOq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Embedding=void 0;var e=require("@tensorflow/tfjs-core"),t=h(require("../backend/tfjs_backend")),i=require("../constraints"),n=require("../engine/topology"),r=require("../errors"),s=require("../initializers"),u=require("../regularizers"),a=h(require("../utils/generic_utils")),l=require("../utils/types_utils");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=r?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,i&&i.set(e,n),n}class p extends n.Layer{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(a.toList(e.inputLength))}this.inputDim=e.inputDim,a.assertPositiveInteger(this.inputDim,"inputDim"),this.outputDim=e.outputDim,a.assertPositiveInteger(this.outputDim,"outputDim"),this.embeddingsInitializer=(0,s.getInitializer)(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=(0,u.getRegularizer)(e.embeddingsRegularizer),this.activityRegularizer=(0,u.getRegularizer)(e.activityRegularizer),this.embeddingsConstraint=(0,i.getConstraint)(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(t,i){return(0,e.tidy)(()=>this.maskZero?(t=(0,l.getExactlyOneTensor)(t),(0,e.notEqual)(t,(0,e.zerosLike)(t))):null)}computeOutputShape(e){if(e=(0,l.getExactlyOneShape)(e),null==this.inputLength)return[...e,this.outputDim];const t=a.toList(this.inputLength);if(t.length!==e.length-1)throw new r.ValueError(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${e}`);{let i=0;for(let n=0;n<t.length;++n){const s=t[n],u=e[n+1];if(null!=s&&null!=u&&s!==u)throw new r.ValueError(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${e}`);null==s&&(t[i]=u),i++}}return[e[0],...t,this.outputDim]}call(i,n){return(0,e.tidy)(()=>{this.invokeCallHook(i,n);let r=(0,l.getExactlyOneTensor)(i);"int32"!==r.dtype&&(r=t.cast(r,"int32"));const s=t.gather(this.embeddings.read(),(0,e.reshape)(r,[r.size]));return(0,e.reshape)(s,(0,l.getExactlyOneShape)(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:(0,s.serializeInitializer)(this.embeddingsInitializer),embeddingsRegularizer:(0,u.serializeRegularizer)(this.embeddingsRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),embeddingsConstraint:(0,i.serializeConstraint)(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}exports.Embedding=p,p.className="Embedding",e.serialization.registerClass(p);
},{"@tensorflow/tfjs-core":"nPFy","../backend/tfjs_backend":"sLMb","../constraints":"RabT","../engine/topology":"ofZj","../errors":"T5Wn","../initializers":"QmHc","../regularizers":"V0uh","../utils/generic_utils":"jSJk","../utils/types_utils":"CBHN"}],"FWyP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Multiply=exports.Minimum=exports.Merge=exports.Maximum=exports.Dot=exports.Concatenate=exports.Average=exports.Add=void 0,exports.add=c,exports.average=m,exports.concatenate=k,exports.maximum=x,exports.minimum=w,exports.multiply=g;var e=u(require("@tensorflow/tfjs-core")),t=u(require("../backend/tfjs_backend")),r=require("../engine/topology"),n=require("../errors"),s=require("../losses"),l=u(require("../utils/generic_utils")),a=u(require("../utils/math_utils")),i=require("../utils/types_utils");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=s?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(n,l,a):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}class h extends r.Layer{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new n.NotImplementedError}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const r=e.slice(0,e.length-t.length);for(let s=0;s<t.length;++s){const l=e[e.length-t.length+s],a=t[s];if(null==l||null==a||l<0||a<0)r.push(null);else if(1===l)r.push(a);else if(1===a)r.push(l);else{if(l!==a)throw new n.ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(l)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[(0,i.getExactlyOneShape)(e)]),(e=e).length<2)throw new n.ValueError("A merge layer should be called on an Array of at least 2 inputs."+` Got ${e.length} input(s).`);let t=[];for(const n of e)null!=n&&null!==n[0]&&t.push(n[0]);if((t=l.unique(t)).length>1)throw new n.ValueError("Can not merge tensors with different batch sizes. "+`Got tensors with shapes: ${JSON.stringify(e)}.`);let r=null==e[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const t=null==e[n]?null:e[n].slice(1);r=this.computeElementwiseOpOutputShape(r,t)}const s=e.map(e=>e.length);-1===e.indexOf(null)&&1===l.unique(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(r,n){return(0,e.tidy)(()=>{if(r=r,this.reshapeRequired){const n=[],s=r.map(e=>e.rank);if(-1===s.indexOf(null)){const e=a.max(s);for(let s of r){const r=s.rank;for(let n=0;n<e-r;++n)s=t.expandDims(s,1);n.push(s)}return this.mergeFunction(n)}{let t=!1;for(const i of r){const r=i.rank;if(null==r){const r=i.shape,s=r[0],l=r.slice(1).concat([s]);let o=e.reshape(i,[s].concat(a.arrayProd(r.slice(1))));o=e.transpose(o,[1,0]),o=e.reshape(o,l),n.push(o),t=!0}else if(r>1){const s=a.range(1,r).concat([0]);n.push(e.transpose(i,s)),t=!0}else n.push(i)}let s=this.mergeFunction(n);const l=s.rank;if(t)if(null==l){const t=s.shape,r=t[t.length-1],n=[r].concat(t.slice(0,t.length-1));s=e.reshape(e.transpose(e.reshape(s,[-1,r]),[1,0]),n)}else if(l>1){const t=[l-1].concat(a.range(0,l-1));s=e.transpose(s,t)}return s}}return this.mergeFunction(r)})}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let r=[];for(const n of e)null!=n&&null!==n[0]&&r.push(n[0]);return t=1===(r=l.unique(r)).length?r.concat(t):[null].concat(t)}computeMask(t,r){return e.tidy(()=>{if(null==r)return null;if(!Array.isArray(r))throw new n.ValueError("`mask` should be an Array");if(!Array.isArray(t))throw new n.ValueError("`inputs` should be an Array");if(r.length!==t.length)throw new n.ValueError("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+`(${t.length} vs ${r.length})`);if(r.every(e=>null==e))return null;let s=(r=r.map(t=>null==t?t:e.expandDims(t,0)))[0];for(let t=1;t<r.length-1;++t)s=e.logicalAnd(s,r[t]);return s})}}exports.Merge=h;class p extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.add(r,t[n]);return r})}}function c(e){if(Array.isArray(e)){return new p({}).apply(e)}return new p(e)}exports.Add=p,p.className="Add",e.serialization.registerClass(p);class f extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.mul(r,t[n]);return r})}}function g(e){if(Array.isArray(e)){return new f({}).apply(e)}return new f(e)}exports.Multiply=f,f.className="Multiply",e.serialization.registerClass(f);class y extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.add(r,t[n]);return e.mul(1/t.length,r)})}}function m(e){if(Array.isArray(e)){return new y({}).apply(e)}return new y(e)}exports.Average=y,y.className="Average",e.serialization.registerClass(y);class d extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0];for(let n=1;n<t.length;++n)r=e.maximum(r,t[n]);return r})}}function x(e){if(Array.isArray(e)){return new d({}).apply(e)}return new d(e)}exports.Maximum=d,d.className="Maximum",e.serialization.registerClass(d);class A extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0];for(let n=1;n<t.length;++n)r=e.minimum(r,t[n]);return r})}}function w(e){if(Array.isArray(e)){return new A({}).apply(e)}return new A(e)}exports.Minimum=A,A.className="Minimum",e.serialization.registerClass(A);class b extends h{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new n.ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let r=!0;for(const e of t)if(null!=e){r=!1;break}if(r)return;const s=[];for(let n=0;n<t.length;++n){const r=t[n].slice();r.splice(this.axis,1);let l=!1;for(const t of s)if(e.util.arraysEqual(t,r)){l=!0;break}l||s.push(r)}if(s.length>1)throw new n.ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(r){return(0,e.tidy)(()=>t.concatenate(r,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new n.ValueError("A `Concatenate` layer should be called on a list of inputs.");const t=e,r=t[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const n of t.slice(1)){if(null==r[s]||null==n[s]){r[s]=null;break}r[s]+=n[s]}return r}computeMask(t,r){if(null==r)return null;if(!Array.isArray(r))throw new n.ValueError("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new n.ValueError("`inputs` should be an array for Concatenate");if(r.length!==t.length)throw new n.ValueError(`Mismatch in the length of mask (${r.length}) `+`and the legnth of inputs (${t.length})`);return e.tidy(()=>{let n=!0;if(r.forEach(e=>{null==e||(n=!1)}),n)return null;const s=[];for(let a=0;a<t.length;++a)null==r[a]?s.push(e.cast(e.onesLike(t[a]),"bool")):r[a].rank<t[a].rank?s.push(e.expandDims(r[a],-1)):s.push(r[a]);const l=e.concat(s,this.axis);return e.all(l,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function k(e){if(Array.isArray(e)){return new b({}).apply(e)}return new b(e)}function O(e,t){for(;e<0;)e+=t;return e}function E(t,r,s){if(t.shape.length>3||r.shape.length>3)throw new n.NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(e.util.assert(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+`but got ${t.shape.length}`),e.util.assert(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+`but got ${r.shape.length}`),"number"==typeof s&&(s=[s,s]),"complex64"===t.dtype||"complex64"===r.dtype)throw new n.NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");const l=t.shape.length,a=r.shape.length;null==s&&(s=[l-1,a-2]);const i=s;return e.tidy(()=>{let n,s;if(l>a){n=l-a;const t=[];for(let e=0;e<n;++e)t.push(1);r=e.reshape(r,r.shape.concat(t))}else if(a>l){n=a-l;const r=[];for(let e=0;e<n;++e)r.push(1);t=e.reshape(t,t.shape.concat(r))}else n=0;if(2===t.shape.length&&2===r.shape.length)s=i[0]===i[1]?e.sum(e.mul(t,r),i[0]):e.sum(e.mul(e.transpose(t,[1,0]),r),i[1]);else{const n=i[0]!==t.shape.length-1,l=i[1]===r.shape.length-1;s=e.matMul(t,r,n,l)}if(n>0){let t;const r=[];for(let e=t=l>a?l+a-3:l-1;e<t+n;++e)r.push(e);s=e.squeeze(s,r)}return 1===s.shape.length&&(s=e.expandDims(s,1)),s})}exports.Concatenate=b,b.className="Concatenate",e.serialization.registerClass(b);class D extends h{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){e.util.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const r=t[0],s=t[1];if(r.length>3||s.length>3)throw new n.NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const l=this.interpretAxes(r,s);if(r[l[0]]!==s[l[1]])throw new n.ValueError("Dimension incompatibility: "+`${r[l[0]]} !== ${s[l[1]]}`)}mergeFunction(e){if(2!==e.length)throw new n.ValueError("A `Dot` layer must be called on exactly 2 inputs, "+`but received ${e.length} input(s).`);let t,r=e[0],l=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,r)=>O(t,e[r].shape.length)):[O(this.axes,r.shape.length),O(this.axes,l.shape.length)],this.normalize&&(r=(0,s.l2Normalize)(r,t[0]),l=(0,s.l2Normalize)(l,t[1])),E(r,l,t)}interpretAxes(e,t){let r;return r=Array.isArray(this.axes)?this.axes:[O(this.axes,e.length),O(this.axes,t.length)]}computeOutputShape(t){e.util.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const r=t[0].slice(),s=t[1].slice();if(r.length>3||s.length>3)throw new n.NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const l=this.interpretAxes(r,s);r.splice(l[0],1),s.splice(l[1],1),s.splice(0,1);const a=r.concat(s);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}exports.Dot=D,D.className="Dot",e.serialization.registerClass(D);
},{"@tensorflow/tfjs-core":"nPFy","../backend/tfjs_backend":"sLMb","../engine/topology":"ofZj","../errors":"T5Wn","../losses":"M7No","../utils/generic_utils":"jSJk","../utils/math_utils":"oh9E","../utils/types_utils":"CBHN"}],"yNNf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GaussianNoise=exports.GaussianDropout=exports.AlphaDropout=void 0;var t=require("@tensorflow/tfjs-core"),e=n(require("../backend/tfjs_backend")),r=require("../engine/topology"),s=require("../utils/types_utils");function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(a=function(t){return t?r:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a(e);if(r&&r.has(t))return r.get(t);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=t[i]}return s.default=t,r&&r.set(t,s),s}class i extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{this.invokeCallHook(r,a);const n=(0,s.getExactlyOneTensor)(r);return e.inTrainPhase(()=>(0,t.add)(e.randomNormal(n.shape,0,this.stddev),n),()=>n,a.training||!1)})}}exports.GaussianNoise=i,i.className="GaussianNoise",t.serialization.registerClass(i);class o extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{this.invokeCallHook(r,a);const n=(0,s.getExactlyOneTensor)(r);if(this.rate>0&&this.rate<1){const r=()=>{const r=Math.sqrt(this.rate/(1-this.rate));return(0,t.mul)(n,e.randomNormal(n.shape,1,r))};return e.inTrainPhase(r,()=>n,a.training||!1)}return n})}}exports.GaussianDropout=o,o.className="GaussianDropout",t.serialization.registerClass(o);class u extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||(0,s.getExactlyOneTensor)(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(r),i=()=>{const a=(0,s.getExactlyOneTensor)(r),i=-1.7580993408473766;let o=(0,t.greaterEqual)((0,t.randomUniform)(n),this.rate);o=e.cast(o,"float32");const u=((1-this.rate)*(1+this.rate*i**2))**-.5,p=-u*i*this.rate,l=(0,t.add)((0,t.mul)(a,o),(0,t.mul)((0,t.add)(o,-1),i));return(0,t.add)((0,t.mul)(l,u),p)};return e.inTrainPhase(i,()=>(0,s.getExactlyOneTensor)(r),a.training||!1)}return r})}}exports.AlphaDropout=u,u.className="AlphaDropout",t.serialization.registerClass(u);
},{"@tensorflow/tfjs-core":"nPFy","../backend/tfjs_backend":"sLMb","../engine/topology":"ofZj","../utils/types_utils":"CBHN"}],"WMK3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayerNormalization=exports.BatchNormalization=void 0,exports.batchNormalization=g,exports.normalizeBatchInTraining=z;var i=u(require("@tensorflow/tfjs-core")),e=require("../constraints"),t=require("../engine/topology"),a=require("../errors"),r=require("../initializers"),s=require("../regularizers"),n=u(require("../utils/generic_utils")),l=u(require("../utils/math_utils")),o=require("../utils/types_utils");function h(i){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(h=function(i){return i?t:e})(i)}function u(i,e){if(!e&&i&&i.__esModule)return i;if(null===i||"object"!=typeof i&&"function"!=typeof i)return{default:i};var t=h(e);if(t&&t.has(i))return t.get(i);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if("default"!==s&&Object.prototype.hasOwnProperty.call(i,s)){var n=r?Object.getOwnPropertyDescriptor(i,s):null;n&&(n.get||n.set)?Object.defineProperty(a,s,n):a[s]=i[s]}return a.default=i,t&&t.set(i,a),a}function g(e,t,r,s,n,l=.001){let o;if(2===e.rank)o=i.batchNorm2d(e,t,r,s,n,l);else if(3===e.rank)o=i.batchNorm3d(e,t,r,s,n,l);else{if(4!==e.rank)throw new a.NotImplementedError(`batchNormalization is not implemented for array of rank ${e.rank} `+"yet");o=i.batchNorm4d(e,t,r,s,n,l)}return o}function m(e,t,a,r,s=.001){return(0,i.tidy)(()=>{const n=i.moments(e,r),l=n.mean,o=n.variance;return[g(e,l,o,a,t,s),l,o]})}function c(e,t,a,r,s=.001){return(0,i.tidy)(()=>{const n=i.moments(e,r),o=n.mean,h=n.variance,u=[];for(const i of l.range(0,e.rank))-1!==r.indexOf(i)?u.push(1):u.push(e.shape[i]);const m=(0,i.reshape)(o,u),c=(0,i.reshape)(h,u),z=null==t?null:(0,i.reshape)(t,u),p=null==a?null:(0,i.reshape)(a,u);return[g(e,m,c,p,z,s),o,h]})}function z(e,t,a,r,s=.001){return i.util.arraysEqual(r.slice().sort(),l.range(0,e.rank-1))?m(e,t,a,r,s):c(e,t,a,r,s)}class p extends t.Layer{constructor(i){null==i&&(i={}),super(i),this.supportsMasking=!0,this.axis=null==i.axis?-1:i.axis,this.momentum=null==i.momentum?.99:i.momentum,this.epsilon=null==i.epsilon?.001:i.epsilon,this.center=null==i.center||i.center,this.scale=null==i.scale||i.scale,this.betaInitializer=(0,r.getInitializer)(i.betaInitializer||"zeros"),this.gammaInitializer=(0,r.getInitializer)(i.gammaInitializer||"ones"),this.movingMeanInitializer=(0,r.getInitializer)(i.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=(0,r.getInitializer)(i.movingVarianceInitializer||"ones"),this.betaConstraint=(0,e.getConstraint)(i.betaConstraint),this.gammaConstraint=(0,e.getConstraint)(i.gammaConstraint),this.betaRegularizer=(0,s.getRegularizer)(i.betaRegularizer),this.gammaRegularizer=(0,s.getRegularizer)(i.gammaRegularizer)}build(i){i=(0,o.getExactlyOneShape)(i);const e=this.axis>=0?this.axis:this.axis+i.length,r=i[e];if(null==r)throw new a.ValueError(`Axis ${e} of input tensor should have a defined dimension but `+"the layer received an input with shape "+`${JSON.stringify(i)}.`);this.inputSpec=[new t.InputSpec({ndim:i.length,axes:{[e]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return(0,i.tidy)(()=>{const a=null!=t.training&&t.training,r=(0,o.getExactlyOneTensor)(e),s=r.shape,h=s.length,u=l.range(0,h),m=this.axis>=0?this.axis:this.axis+h;u.splice(m,1);const c=n.pyListRepeat(1,h);c[m]=s[m];const p=u.slice();p.sort();const f=!i.util.arraysEqual(p,l.range(0,h).slice(0,h-1));if(!a)return(()=>{if(f){const e=(0,i.reshape)(this.movingMean.read(),c),t=(0,i.reshape)(this.movingVariance.read(),c),a=this.center?(0,i.reshape)(this.beta.read(),c):null,s=this.scale?(0,i.reshape)(this.gamma.read(),c):null;return g(r,e,t,a,s,this.epsilon)}return g(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[b,d,x]=z(r,this.gamma.read(),this.beta.read(),u,this.epsilon),I=(e,t,a)=>{i.tidy(()=>{const r=1-a,s=e.read(),n=i.mul(i.sub(s,t),r);e.write(i.sub(s,n))})};return(()=>{I(this.movingMean,d,this.momentum),I(this.movingVariance,x,this.momentum)})(),b})}getConfig(){const i={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,r.serializeInitializer)(this.betaInitializer),gammaInitializer:(0,r.serializeInitializer)(this.gammaInitializer),movingMeanInitializer:(0,r.serializeInitializer)(this.movingMeanInitializer),movingVarianceInitializer:(0,r.serializeInitializer)(this.movingVarianceInitializer),betaRegularizer:(0,s.serializeRegularizer)(this.betaRegularizer),gammaRegularizer:(0,s.serializeRegularizer)(this.gammaRegularizer),betaConstraint:(0,e.serializeConstraint)(this.betaConstraint),gammaConstraint:(0,e.serializeConstraint)(this.gammaConstraint)},t=super.getConfig();return Object.assign(i,t),i}}exports.BatchNormalization=p,p.className="BatchNormalization",i.serialization.registerClass(p);class f extends t.Layer{constructor(i){if(null==i&&(i={}),super(i),this.axis=null==i.axis?-1:i.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+`but received ${JSON.stringify(this.axis)}`);for(const i of this.axis)if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, "+`but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==i.epsilon?.001:i.epsilon,this.center=null==i.center||i.center,this.scale=null==i.scale||i.scale,this.betaInitializer=(0,r.getInitializer)(i.betaInitializer||"zeros"),this.gammaInitializer=(0,r.getInitializer)(i.gammaInitializer||"ones"),this.betaRegularizer=(0,s.getRegularizer)(i.betaRegularizer),this.gammaRegularizer=(0,s.getRegularizer)(i.gammaRegularizer),this.supportsMasking=!0}build(i){const e=(i=(0,o.getExactlyOneShape)(i)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=e);for(const a of this.axis)if(a<0||a>=e)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==n.unique(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const t=this.axis.map(e=>i[e]);this.scale?this.gamma=this.addWeight("gamma",t,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",t,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0}call(e,t){const a=(0,o.getExactlyOneTensor)(e),r=a.shape,s=r.length;return(0,i.tidy)(()=>{let{mean:e,variance:t}=(0,i.moments)(a,this.axis,!0);const l=n.pyListRepeat(1,s);for(const i of this.axis)l[i]=r[i];const o=e=>null!=e&&e.shape.length!==s?i.reshape(e,l):e;let h=this.scale?o(this.gamma.read()):null,u=this.center?o(this.beta.read()):null;const m=[],c=[];for(let i=0;i<s;++i)-1!==this.axis.indexOf(i)?(m.push(r[i]),c.push(1)):(m.push(1),c.push(r[i]));return e=i.tile(e,m),t=i.tile(t,m),null!=h&&(h=i.tile(h,c)),null!=u&&(u=i.tile(u,c)),g(a,e,t,u,h,this.epsilon)})}getConfig(){const i={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,r.serializeInitializer)(this.betaInitializer),gammaInitializer:(0,r.serializeInitializer)(this.gammaInitializer),betaRegularizer:(0,s.serializeRegularizer)(this.betaRegularizer),gammaRegularizer:(0,s.serializeRegularizer)(this.gammaRegularizer)},e=super.getConfig();return Object.assign(i,e),i}}exports.LayerNormalization=f,f.className="LayerNormalization",i.serialization.registerClass(f);
},{"@tensorflow/tfjs-core":"nPFy","../constraints":"RabT","../engine/topology":"ofZj","../errors":"T5Wn","../initializers":"QmHc","../regularizers":"V0uh","../utils/generic_utils":"jSJk","../utils/math_utils":"oh9E","../utils/types_utils":"CBHN"}],"JDXr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ZeroPadding2D=void 0,exports.spatial2dPadding=l,exports.temporalPadding=o;var e=i(require("@tensorflow/tfjs-core")),t=require("../backend/common"),n=require("../engine/topology"),a=require("../errors"),r=require("../utils/types_utils");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function o(t,n){return(0,e.tidy)(()=>{if(3!==t.rank)throw new a.ValueError("temporalPadding expects input tensor to be 3-D, but received a "+`${t.rank}-D tensor.`);if(null==n&&(n=[1,1]),2!==n.length)throw new a.ValueError("temporalPadding expects input padding pattern to be a length-2 "+`array, but received a length-${n.length} array.`);const r=[[0,0],n,[0,0]];return e.pad(t,r)})}function l(n,r,d){return(0,e.tidy)(()=>{if(4!==n.rank)throw new a.ValueError("temporalPadding expects input tensor to be 4-D, but received a "+`${n.rank}-D tensor.`);if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new a.ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==d&&(d=(0,t.imageDataFormat)()),"channelsLast"!==d&&"channelsFirst"!==d)throw new a.ValueError(`Unknown data format: ${d}. `+"Supported data formats are 'channelsLast' and 'channelsFirst.");let i;return i="channelsFirst"===d?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],e.pad(n,i)})}class p extends n.Layer{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?(0,t.imageDataFormat)():e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new a.ValueError("ZeroPadding2D expects padding to be a length-2 array, but "+`received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new a.ValueError("ZeroPadding2D expects height padding to be a length-2 array, "+`but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new a.ValueError("ZeroPadding2D expects width padding to be a length-2 array, "+`but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new n.InputSpec({ndim:4})]}computeOutputShape(e){let t,n;return e=(0,r.getExactlyOneShape)(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(t,n){return(0,e.tidy)(()=>l((0,r.getExactlyOneTensor)(t),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.ZeroPadding2D=p,p.className="ZeroPadding2D",e.serialization.registerClass(p);
},{"@tensorflow/tfjs-core":"nPFy","../backend/common":"OElF","../engine/topology":"ofZj","../errors":"T5Wn","../utils/types_utils":"CBHN"}],"CU1X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pooling3D=exports.Pooling2D=exports.Pooling1D=exports.MaxPooling3D=exports.MaxPooling2D=exports.MaxPooling1D=exports.GlobalPooling2D=exports.GlobalPooling1D=exports.GlobalMaxPooling2D=exports.GlobalMaxPooling1D=exports.GlobalAveragePooling2D=exports.GlobalAveragePooling1D=exports.AveragePooling3D=exports.AveragePooling2D=exports.AveragePooling1D=void 0,exports.pool2d=u,exports.pool3d=g;var e=c(require("@tensorflow/tfjs-core")),t=require("../backend/common"),s=c(require("../backend/tfjs_backend")),o=require("../common"),i=require("../engine/topology"),r=require("../errors"),a=require("../utils/conv_utils"),n=require("../utils/generic_utils"),l=require("../utils/types_utils"),d=require("./convolutional");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(p=function(e){return e?s:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=p(t);if(s&&s.has(e))return s.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=i?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(o,r,a):o[r]=e[r]}return o.default=e,s&&s.set(e,o),o}function u(s,i,r,a,n,l){return(0,e.tidy)(()=>{let p;(0,o.checkDataFormat)(n),(0,o.checkPoolMode)(l),(0,o.checkPaddingMode)(a),null==r&&(r=[1,1]),null==a&&(a="valid"),null==n&&(n=(0,t.imageDataFormat)()),null==l&&(l="max"),s=(0,d.preprocessConv2DInput)(s,n);const c="same"===a?"same":"valid";return p="max"===l?e.maxPool(s,i,r,c):e.avgPool(s,i,r,c),"channelsFirst"===n&&(p=e.transpose(p,[0,3,1,2])),p})}function g(s,i,r,a,n,l){return(0,e.tidy)(()=>{let p;(0,o.checkDataFormat)(n),(0,o.checkPoolMode)(l),(0,o.checkPaddingMode)(a),null==r&&(r=[1,1,1]),null==a&&(a="valid"),null==n&&(n=(0,t.imageDataFormat)()),null==l&&(l="max"),s=(0,d.preprocessConv3DInput)(s,n);const c="same"===a?"same":"valid";return p="max"===l?e.maxPool3d(s,i,r,c):e.avgPool3d(s,i,r,c),"channelsFirst"===n&&(p=e.transpose(p,[0,4,1,2,3])),p})}class h extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new r.ValueError("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if((0,n.assertPositiveInteger)(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new r.ValueError("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(e.strides)}`);this.strides=e.strides}(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:3})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);const t=(0,a.convOutputLength)(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(t,o){return(0,e.tidy)(()=>{this.invokeCallHook(t,o),t=s.expandDims((0,l.getExactlyOneTensor)(t),2);const i=this.poolingFunction((0,l.getExactlyOneTensor)(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return e.squeeze(i,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling1D=h;class m extends h{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"max")}}exports.MaxPooling1D=m,m.className="MaxPooling1D",e.serialization.registerClass(m);class x extends h{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"avg")}}exports.AveragePooling1D=x,x.className="AveragePooling1D",e.serialization.registerClass(x);class S extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new r.ValueError("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+`${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];(0,n.assertPositiveInteger)(this.poolSize,"poolSize"),(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:4})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],s="channelsFirst"===this.dataFormat?e[3]:e[2];return t=(0,a.convOutputLength)(t,this.poolSize[0],this.padding,this.strides[0]),s=(0,a.convOutputLength)(s,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,s]:[e[0],t,s,e[3]]}call(t,s){return(0,e.tidy)(()=>(this.invokeCallHook(t,s),this.poolingFunction((0,l.getExactlyOneTensor)(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling2D=S;class P extends S{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"max")}}exports.MaxPooling2D=P,P.className="MaxPooling2D",e.serialization.registerClass(P);class y extends S{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"avg")}}exports.AveragePooling2D=y,y.className="AveragePooling2D",e.serialization.registerClass(y);class v extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new r.ValueError("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+`${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];(0,n.assertPositiveInteger)(this.poolSize,"poolSize"),(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:5})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],s="channelsFirst"===this.dataFormat?e[3]:e[2],o="channelsFirst"===this.dataFormat?e[4]:e[3];return t=(0,a.convOutputLength)(t,this.poolSize[0],this.padding,this.strides[0]),s=(0,a.convOutputLength)(s,this.poolSize[1],this.padding,this.strides[1]),o=(0,a.convOutputLength)(o,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,s,o]:[e[0],t,s,o,e[4]]}call(t,s){return(0,e.tidy)(()=>(this.invokeCallHook(t,s),this.poolingFunction((0,l.getExactlyOneTensor)(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling3D=v;class z extends v{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),g(e,t,s,i,r,"max")}}exports.MaxPooling3D=z,z.className="MaxPooling3D",e.serialization.registerClass(z);class D extends v{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),g(e,t,s,i,r,"avg")}}exports.AveragePooling3D=D,D.className="AveragePooling3D",e.serialization.registerClass(D);class F extends i.Layer{constructor(e){super(e),this.inputSpec=[new i.InputSpec({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new r.NotImplementedError}}exports.GlobalPooling1D=F;class f extends F{constructor(e){super(e||{})}call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return e.mean(s,1)})}}exports.GlobalAveragePooling1D=f,f.className="GlobalAveragePooling1D",e.serialization.registerClass(f);class b extends F{constructor(e){super(e||{})}call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return e.max(s,1)})}}exports.GlobalMaxPooling1D=b,b.className="GlobalMaxPooling1D",e.serialization.registerClass(b);class O extends i.Layer{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),this.inputSpec=[new i.InputSpec({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new r.NotImplementedError}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.GlobalPooling2D=O;class k extends O{call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return"channelsLast"===this.dataFormat?e.mean(s,[1,2]):e.mean(s,[2,3])})}}exports.GlobalAveragePooling2D=k,k.className="GlobalAveragePooling2D",e.serialization.registerClass(k);class M extends O{call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return"channelsLast"===this.dataFormat?e.max(s,[1,2]):e.max(s,[2,3])})}}exports.GlobalMaxPooling2D=M,M.className="GlobalMaxPooling2D",e.serialization.registerClass(M);
},{"@tensorflow/tfjs-core":"nPFy","../backend/common":"OElF","../backend/tfjs_backend":"sLMb","../common":"NirA","../engine/topology":"ofZj","../errors":"T5Wn","../utils/conv_utils":"PwZ9","../utils/generic_utils":"jSJk","../utils/types_utils":"CBHN","./convolutional":"KdxQ"}],"sJC1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Wrapper=exports.TimeDistributed=exports.Bidirectional=void 0,exports.checkBidirectionalMergeMode=y;var e=h(require("@tensorflow/tfjs-core")),t=h(require("../backend/tfjs_backend")),r=require("../common"),a=require("../engine/topology"),i=require("../errors"),s=require("../keras_format/common"),n=h(require("../utils/generic_utils")),l=require("../utils/types_utils"),o=require("./recurrent"),c=require("./serialization");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=i?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(a,s,n):a[s]=e[s]}return a.default=e,r&&r.set(e,a),a}class d extends a.Layer{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){const a=t.layer,i=(0,c.deserialize)(a,r);delete t.layer;const s={layer:i};return Object.assign(s,t),new e(s)}}exports.Wrapper=d;class g extends d{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=(0,l.getExactlyOneShape)(e)).length<3)throw new i.ValueError("TimeDistributed layer expects an input shape >= 3D, but received "+`input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=(0,l.getExactlyOneShape)(e))[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),a=e[1];return[r[0],a].concat(r.slice(1))}call(t,r){return(0,e.tidy)(()=>{t=(0,l.getExactlyOneTensor)(t);return(0,o.rnn)((e,t)=>{return[(0,l.getExactlyOneTensor)(this.layer.call(e,r)),[]]},t,[],!1,null,null,!1,!0)[1]})}}function y(e){n.checkStringTypeUnionValue(s.VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",e)}exports.TimeDistributed=g,g.className="TimeDistributed",e.serialization.registerClass(g);const p="concat";class f extends d{constructor(e){super(e);const t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=(0,c.deserialize)(r),t.goBackwards=!0!==t.goBackwards;const a={};if(a.className=e.layer.getClassName(),a.config=t,this.backwardLayer=(0,c.deserialize)(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?p:e.mergeMode,y(this.mergeMode),e.weights)throw new i.NotImplementedError("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t,r,a,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(a=i.slice(1),t=i[0]):t=i[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,r=[t]):r=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?r.concat(a).concat(a.slice()):[t].concat(a).concat(a.slice()):n.singletonOrArray(r)}apply(e,t){let r=null==t?null:t.initialState,s=null==t?null:t.constants;null==t&&(t={});const n=(0,o.standardizeArgs)(e,r,s,this.numConstants);if(e=n.inputs,r=n.initialState,s=n.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==s)return super.apply(e,t);const l=[],c=[];if(null!=r){const e=r.length;if(e%2>0)throw new i.ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,l.push(...r);const s=r.map(e=>new a.InputSpec({shape:e.shape}));this.forwardLayer.stateSpec=s.slice(0,e/2),this.backwardLayer.stateSpec=s.slice(e/2),c.push(...s)}if(null!=s)throw new i.NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");const u=l[0]instanceof a.SymbolicTensor;for(const o of l)if(o instanceof a.SymbolicTensor!==u)throw new i.ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const r=[e].concat(l),a=this.inputSpec.concat(c),i=this.inputSpec;this.inputSpec=a;const s=super.apply(r,t);return this.inputSpec=i,s}return super.apply(e,t)}call(r,a){return(0,e.tidy)(()=>{const i=a.initialState;let s,n,l,o;if(null==i)s=this.forwardLayer.call(r,a),n=this.backwardLayer.call(r,a);else{const e=i.slice(0,i.length/2),t=i.slice(i.length/2);s=this.forwardLayer.call(r,Object.assign(a,{initialState:e})),n=this.backwardLayer.call(r,Object.assign(a,{initialState:t}))}return this.returnState&&(Array.isArray(s)&&(l=s.slice(1).concat(n.slice(1))),s=s[0],n=n[0]),this.returnSequences&&(n=e.reverse(n,1)),"concat"===this.mergeMode?o=t.concatenate([s,n]):"sum"===this.mergeMode?o=e.add(s,n):"ave"===this.mergeMode?o=e.mul(.5,e.add(s,n)):"mul"===this.mergeMode?o=e.mul(s,n):null==this.mergeMode&&(o=[s,n]),this.returnState?null==this.mergeMode?o.concat(l):[o].concat(l):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){(0,r.nameScope)(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),(0,r.nameScope)(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let r;if(Array.isArray(t)&&(t=t[0]),r=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(r)?r.concat(e).concat(e):[r].concat(e).concat(e)}return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const r=(0,c.deserialize)(t.layer);if(delete t.layer,null!=t.numConstants)throw new i.NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=t;return a.layer=r,new e(a)}}exports.Bidirectional=f,f.className="Bidirectional",e.serialization.registerClass(f);
},{"@tensorflow/tfjs-core":"nPFy","../backend/tfjs_backend":"sLMb","../common":"NirA","../engine/topology":"ofZj","../errors":"T5Wn","../keras_format/common":"g7Ql","../utils/generic_utils":"jSJk","../utils/types_utils":"CBHN","./recurrent":"Jge7","./serialization":"QRzD"}],"pzDh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return n.Layer}}),Object.defineProperty(exports,"RNN",{enumerable:!0,get:function(){return d.RNN}}),Object.defineProperty(exports,"RNNCell",{enumerable:!0,get:function(){return d.RNNCell}}),exports.activation=U,exports.add=E,exports.alphaDropout=Ae,exports.average=V,exports.averagePooling1d=X,exports.averagePooling2d=ee,exports.averagePooling3d=oe,exports.avgPool1d=Y,exports.avgPool2d=ne,exports.avgPool3d=te,exports.avgPooling1d=$,exports.avgPooling2d=re,exports.avgPooling3d=ue,exports.batchNormalization=K,exports.bidirectional=Ne,exports.concatenate=F,exports.conv1d=N,exports.conv2d=C,exports.conv2dTranspose=R,exports.conv3d=L,exports.conv3dTranspose=M,exports.convLstm2d=Pe,exports.convLstm2dCell=De,exports.cropping2D=h,exports.dense=T,exports.depthwiseConv2d=A,exports.dot=J,exports.dropout=G,exports.elu=m,exports.embedding=B,exports.flatten=z,exports.gaussianDropout=Se,exports.gaussianNoise=he,exports.globalAveragePooling1d=ie,exports.globalAveragePooling2d=ae,exports.globalMaxPool2d=exports.globalMaxPool1d=void 0,exports.globalMaxPooling1d=se,exports.globalMaxPooling2d=le,exports.gru=fe,exports.gruCell=de,Object.defineProperty(exports,"input",{enumerable:!0,get:function(){return r.input}}),exports.inputLayer=w,exports.layerNormalization=Q,exports.leakyReLU=P,exports.lstm=ge,exports.lstmCell=we,exports.masking=Ue,exports.maxPool2d=exports.maxPool1d=void 0,exports.maxPooling1d=pe,exports.maxPooling2d=ce,exports.maxPooling3d=xe,exports.maximum=I,exports.minimum=Z,exports.multiply=H,exports.permute=O,exports.prelu=D,exports.reLU=v,exports.repeatVector=_,exports.reshape=j,exports.rnn=be,exports.separableConv2d=q,exports.simpleRNN=me,exports.simpleRNNCell=ve,exports.softmax=b,exports.spatialDropout1d=k,exports.stackedRNNCells=ye,exports.thresholdedReLU=y,exports.timeDistributed=Ce,exports.upSampling2d=S,exports.zeroPadding2d=W;var e=require("./engine/input_layer"),n=require("./engine/topology"),r=require("./exports"),o=require("./layers/advanced_activations"),t=require("./layers/convolutional"),u=require("./layers/convolutional_depthwise"),i=require("./layers/convolutional_recurrent"),a=require("./layers/core"),s=require("./layers/embeddings"),l=require("./layers/merge"),p=require("./layers/noise"),c=require("./layers/normalization"),x=require("./layers/padding"),f=require("./layers/pooling"),d=require("./layers/recurrent"),g=require("./layers/wrappers");function w(n){return new e.InputLayer(n)}function m(e){return new o.ELU(e)}function v(e){return new o.ReLU(e)}function P(e){return new o.LeakyReLU(e)}function D(e){return new o.PReLU(e)}function b(e){return new o.Softmax(e)}function y(e){return new o.ThresholdedReLU(e)}function N(e){return new t.Conv1D(e)}function C(e){return new t.Conv2D(e)}function R(e){return new t.Conv2DTranspose(e)}function L(e){return new t.Conv3D(e)}function M(e){return new t.Conv3DTranspose(e)}function q(e){return new t.SeparableConv2D(e)}function h(e){return new t.Cropping2D(e)}function S(e){return new t.UpSampling2D(e)}function A(e){return new u.DepthwiseConv2D(e)}function U(e){return new a.Activation(e)}function T(e){return new a.Dense(e)}function G(e){return new a.Dropout(e)}function k(e){return new a.SpatialDropout1D(e)}function z(e){return new a.Flatten(e)}function _(e){return new a.RepeatVector(e)}function j(e){return new a.Reshape(e)}function O(e){return new a.Permute(e)}function B(e){return new s.Embedding(e)}function E(e){return new l.Add(e)}function V(e){return new l.Average(e)}function F(e){return new l.Concatenate(e)}function I(e){return new l.Maximum(e)}function Z(e){return new l.Minimum(e)}function H(e){return new l.Multiply(e)}function J(e){return new l.Dot(e)}function K(e){return new c.BatchNormalization(e)}function Q(e){return new c.LayerNormalization(e)}function W(e){return new x.ZeroPadding2D(e)}function X(e){return new f.AveragePooling1D(e)}function Y(e){return X(e)}function $(e){return X(e)}function ee(e){return new f.AveragePooling2D(e)}function ne(e){return ee(e)}function re(e){return ee(e)}function oe(e){return new f.AveragePooling3D(e)}function te(e){return oe(e)}function ue(e){return oe(e)}function ie(e){return new f.GlobalAveragePooling1D(e)}function ae(e){return new f.GlobalAveragePooling2D(e)}function se(e){return new f.GlobalMaxPooling1D(e)}function le(e){return new f.GlobalMaxPooling2D(e)}function pe(e){return new f.MaxPooling1D(e)}function ce(e){return new f.MaxPooling2D(e)}function xe(e){return new f.MaxPooling3D(e)}function fe(e){return new d.GRU(e)}function de(e){return new d.GRUCell(e)}function ge(e){return new d.LSTM(e)}function we(e){return new d.LSTMCell(e)}function me(e){return new d.SimpleRNN(e)}function ve(e){return new d.SimpleRNNCell(e)}function Pe(e){return new i.ConvLSTM2D(e)}function De(e){return new i.ConvLSTM2DCell(e)}function be(e){return new d.RNN(e)}function ye(e){return new d.StackedRNNCells(e)}function Ne(e){return new g.Bidirectional(e)}function Ce(e){return new g.TimeDistributed(e)}const Re=se;exports.globalMaxPool1d=Re;const Le=le;exports.globalMaxPool2d=Le;const Me=pe;exports.maxPool1d=Me;const qe=ce;function he(e){return new p.GaussianNoise(e)}function Se(e){return new p.GaussianDropout(e)}function Ae(e){return new p.AlphaDropout(e)}function Ue(e){return new a.Masking(e)}exports.maxPool2d=qe;
},{"./engine/input_layer":"dbAF","./engine/topology":"ofZj","./exports":"dxpR","./layers/advanced_activations":"VdXI","./layers/convolutional":"KdxQ","./layers/convolutional_depthwise":"bcCJ","./layers/convolutional_recurrent":"CBER","./layers/core":"nWWZ","./layers/embeddings":"mcOq","./layers/merge":"FWyP","./layers/noise":"yNNf","./layers/normalization":"WMK3","./layers/padding":"JDXr","./layers/pooling":"CU1X","./layers/recurrent":"Jge7","./layers/wrappers":"sJC1"}],"QVyP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAPE=x,exports.MSE=g,exports.binaryAccuracy=o,exports.binaryCrossentropy=c,exports.categoricalAccuracy=a,exports.categoricalCrossentropy=i,exports.cosineProximity=f,exports.mape=b,exports.meanAbsoluteError=l,exports.meanAbsolutePercentageError=y,exports.meanSquaredError=m,exports.mse=A,exports.precision=s,exports.recall=p,exports.sparseCategoricalAccuracy=u;var r=n(require("./losses")),e=n(require("./metrics"));function t(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(t=function(r){return r?n:e})(r)}function n(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var n=t(e);if(n&&n.has(r))return n.get(r);var o={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var a=c?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=r[u]}return o.default=r,n&&n.set(r,o),o}function o(r,t){return e.binaryAccuracy(r,t)}function c(r,t){return e.binaryCrossentropy(r,t)}function u(r,t){return e.sparseCategoricalAccuracy(r,t)}function a(r,t){return e.categoricalAccuracy(r,t)}function i(r,t){return e.categoricalCrossentropy(r,t)}function s(r,t){return e.precision(r,t)}function p(r,t){return e.recall(r,t)}function f(e,t){return r.cosineProximity(e,t)}function l(e,t){return r.meanAbsoluteError(e,t)}function y(e,t){return r.meanAbsolutePercentageError(e,t)}function x(e,t){return r.meanAbsolutePercentageError(e,t)}function b(e,t){return r.meanAbsolutePercentageError(e,t)}function m(e,t){return r.meanSquaredError(e,t)}function g(e,t){return r.meanSquaredError(e,t)}function A(e,t){return r.meanSquaredError(e,t)}
},{"./losses":"M7No","./metrics":"R0qT"}],"GJ37":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"modelFromJSON",{enumerable:!0,get:function(){return e.modelFromJSON}});var e=require("./models");
},{"./models":"vFxQ"}],"w0wH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.l1=u,exports.l1l2=n,exports.l2=o;var e=t(require("./regularizers"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function t(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&Object.prototype.hasOwnProperty.call(e,f)){var i=o?Object.getOwnPropertyDescriptor(e,f):null;i&&(i.get||i.set)?Object.defineProperty(u,f,i):u[f]=e[f]}return u.default=e,n&&n.set(e,u),u}function n(r){return new e.L1L2(r)}function u(r){return e.l1(r)}function o(r){return e.l2(r)}
},{"./regularizers":"V0uh"}],"RKsF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.callbacks=exports.EarlyStopping=exports.Callback=void 0,exports.earlyStopping=l;var t=require("./base_callbacks"),e=require("./engine/training"),o=require("./errors"),i=require("./logs");class s extends t.BaseCallback{constructor(){super(...arguments),this.model=null}setModel(t){if(!(t instanceof e.LayersModel))throw new Error("model must be a LayersModel, not some other Container");this.model=t}}function n(t,e){return t<e}function r(t,e){return t>e}exports.Callback=s;class a extends s{constructor(t){if(super(),null==t&&(t={}),t.restoreBestWeights)throw new o.NotImplementedError("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=t.monitor||"val_loss",this.minDelta=Math.abs(t.minDelta||0),this.patience=t.patience||0,this.verbose=t.verbose||0,this.mode=t.mode||"auto",this.baseline=t.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. `+"Falling back to mode 'auto'."),this.mode="auto"),"min"===this.mode?this.monitorFunc=n:"max"===this.mode?this.monitorFunc=r:-1!==this.monitor.indexOf("acc")?this.monitorFunc=r:this.monitorFunc=n,this.monitorFunc===n&&(this.minDelta*=-1)}async onTrainBegin(t){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===n?1/0:-1/0}async onEpochEnd(t,e){await(0,i.resolveScalarsInLogs)(e);const o=this.getMonitorValue(e);null!=o&&(this.monitorFunc(o-this.minDelta,this.best)?(this.best=o,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)))}async onTrainEnd(t){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(t){null==t&&(t={});const e=t[this.monitor];return null==e&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. `+`Available metrics are: ${Object.keys(t)}`),e}}function l(t){return new a(t)}exports.EarlyStopping=a;const h={earlyStopping:l};exports.callbacks=h;
},{"./base_callbacks":"wyxt","./engine/training":"axan","./errors":"T5Wn","./logs":"FvYp"}],"pWLC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Callback",{enumerable:!0,get:function(){return s.Callback}}),Object.defineProperty(exports,"CallbackList",{enumerable:!0,get:function(){return u.CallbackList}}),Object.defineProperty(exports,"CustomCallback",{enumerable:!0,get:function(){return u.CustomCallback}}),Object.defineProperty(exports,"EarlyStopping",{enumerable:!0,get:function(){return s.EarlyStopping}}),Object.defineProperty(exports,"History",{enumerable:!0,get:function(){return u.History}}),Object.defineProperty(exports,"InputSpec",{enumerable:!0,get:function(){return a.InputSpec}}),Object.defineProperty(exports,"LayerVariable",{enumerable:!0,get:function(){return f.LayerVariable}}),Object.defineProperty(exports,"LayersModel",{enumerable:!0,get:function(){return l.LayersModel}}),Object.defineProperty(exports,"RNN",{enumerable:!0,get:function(){return p.RNN}}),Object.defineProperty(exports,"Sequential",{enumerable:!0,get:function(){return b.Sequential}}),Object.defineProperty(exports,"SymbolicTensor",{enumerable:!0,get:function(){return a.SymbolicTensor}}),Object.defineProperty(exports,"callbacks",{enumerable:!0,get:function(){return s.callbacks}}),exports.initializers=exports.constraints=void 0,Object.defineProperty(exports,"input",{enumerable:!0,get:function(){return c.input}}),exports.layers=void 0,Object.defineProperty(exports,"loadLayersModel",{enumerable:!0,get:function(){return c.loadLayersModel}}),exports.metrics=void 0,Object.defineProperty(exports,"model",{enumerable:!0,get:function(){return c.model}}),exports.models=void 0,Object.defineProperty(exports,"registerCallbackConstructor",{enumerable:!0,get:function(){return c.registerCallbackConstructor}}),exports.regularizers=void 0,Object.defineProperty(exports,"sequential",{enumerable:!0,get:function(){return c.sequential}}),Object.defineProperty(exports,"version_layers",{enumerable:!0,get:function(){return y.version}}),require("./flags_layers"),require("@tensorflow/tfjs-core"),require("@tensorflow/tfjs-core/dist/register_all_gradients");var e=x(require("./exports_constraints"));exports.constraints=e;var r=x(require("./exports_initializers"));exports.initializers=r;var t=x(require("./exports_layers"));exports.layers=t;var n=x(require("./exports_metrics"));exports.metrics=n;var o=x(require("./exports_models"));exports.models=o;var i=x(require("./exports_regularizers"));exports.regularizers=i;var u=require("./base_callbacks"),s=require("./callbacks"),a=require("./engine/topology"),l=require("./engine/training"),c=require("./exports"),p=require("./layers/recurrent"),b=require("./models"),f=require("./variables"),y=require("./version");function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:r})(e)}function x(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}
},{"./flags_layers":"RQsV","@tensorflow/tfjs-core":"nPFy","@tensorflow/tfjs-core/dist/register_all_gradients":"M8rT","./exports_constraints":"uKIo","./exports_initializers":"AQnF","./exports_layers":"pzDh","./exports_metrics":"QVyP","./exports_models":"GJ37","./exports_regularizers":"w0wH","./base_callbacks":"wyxt","./callbacks":"RKsF","./engine/topology":"ofZj","./engine/training":"axan","./exports":"dxpR","./layers/recurrent":"Jge7","./models":"vFxQ","./variables":"pUPC","./version":"tO0n"}],"bh5K":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core");const s=(0,e.env)();s.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});
},{"@tensorflow/tfjs-core":"nPFy"}],"CJak":[function(require,module,exports) {
"use strict";var T,_;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SaverDef=exports.DataType=void 0,exports.DataType=T,function(T){T[T.DT_INVALID=0]="DT_INVALID",T[T.DT_FLOAT=1]="DT_FLOAT",T[T.DT_DOUBLE=2]="DT_DOUBLE",T[T.DT_INT32=3]="DT_INT32",T[T.DT_UINT8=4]="DT_UINT8",T[T.DT_INT16=5]="DT_INT16",T[T.DT_INT8=6]="DT_INT8",T[T.DT_STRING=7]="DT_STRING",T[T.DT_COMPLEX64=8]="DT_COMPLEX64",T[T.DT_INT64=9]="DT_INT64",T[T.DT_BOOL=10]="DT_BOOL",T[T.DT_QINT8=11]="DT_QINT8",T[T.DT_QUINT8=12]="DT_QUINT8",T[T.DT_QINT32=13]="DT_QINT32",T[T.DT_BFLOAT16=14]="DT_BFLOAT16",T[T.DT_QINT16=15]="DT_QINT16",T[T.DT_QUINT16=16]="DT_QUINT16",T[T.DT_UINT16=17]="DT_UINT16",T[T.DT_COMPLEX128=18]="DT_COMPLEX128",T[T.DT_HALF=19]="DT_HALF",T[T.DT_RESOURCE=20]="DT_RESOURCE",T[T.DT_VARIANT=21]="DT_VARIANT",T[T.DT_UINT32=22]="DT_UINT32",T[T.DT_UINT64=23]="DT_UINT64",T[T.DT_FLOAT_REF=101]="DT_FLOAT_REF",T[T.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",T[T.DT_INT32_REF=103]="DT_INT32_REF",T[T.DT_UINT8_REF=104]="DT_UINT8_REF",T[T.DT_INT16_REF=105]="DT_INT16_REF",T[T.DT_INT8_REF=106]="DT_INT8_REF",T[T.DT_STRING_REF=107]="DT_STRING_REF",T[T.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",T[T.DT_INT64_REF=109]="DT_INT64_REF",T[T.DT_BOOL_REF=110]="DT_BOOL_REF",T[T.DT_QINT8_REF=111]="DT_QINT8_REF",T[T.DT_QUINT8_REF=112]="DT_QUINT8_REF",T[T.DT_QINT32_REF=113]="DT_QINT32_REF",T[T.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",T[T.DT_QINT16_REF=115]="DT_QINT16_REF",T[T.DT_QUINT16_REF=116]="DT_QUINT16_REF",T[T.DT_UINT16_REF=117]="DT_UINT16_REF",T[T.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",T[T.DT_HALF_REF=119]="DT_HALF_REF",T[T.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",T[T.DT_VARIANT_REF=121]="DT_VARIANT_REF",T[T.DT_UINT32_REF=122]="DT_UINT32_REF",T[T.DT_UINT64_REF=123]="DT_UINT64_REF"}(T||(exports.DataType=T={})),exports.SaverDef=_,function(T){let _;!function(T){T[T.LEGACY=0]="LEGACY",T[T.V1=1]="V1",T[T.V2=2]="V2"}(_=T.CheckpointFormatVersion||(T.CheckpointFormatVersion={}))}(_||(exports.SaverDef=_={}));
},{}],"c1gB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deregisterOp=s,exports.getRegisteredOp=r,exports.registerOp=t;const e={};function t(t,r){const s={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:r};e[t]=s}function r(t){return e[t]}function s(t){delete e[t]}
},{}],"X8lg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTensor=d,exports.getNodeNameAndIndex=o,exports.getPadding=c,exports.getParamValue=e,exports.getTensor=n,exports.getTensorsForCurrentContenxt=r,exports.parseNodeName=u,exports.split=i;var t=require("@tensorflow/tfjs-core");function e(e,r,o,s,u){const i=r.inputParams[e];if(i&&void 0!==i.inputIndexStart){const e=i.inputIndexStart,c=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd;if("tensor"===i.type)return n(r.inputNames[i.inputIndexStart],o,s,u);if("tensors"===i.type){return r.inputNames.slice(e,c).map(t=>n(t,o,s,u))}const d=n(r.inputNames.slice(e)[0],o,s,u),p=d.dataSync();return"number"===i.type?p[0]:t.util.toNestedArray(d.shape,p)}const c=r.attrParams[e];return c&&c.value}function n(t,e,n,r){const[o,i]=u(t);if(null!=r){const t=r.getHashTableHandleByName(o);if(null!=t)return t}const c=n.currentContextIds.find(t=>!!e[s(o,t)]);return void 0!==c?e[s(o,c)][i]:void 0}function r(t,e,n){return e[s(t,n.currentContextId)]}function o(t,e){const[n,r,o]=u(t);return[s(n,e&&e.currentContextId),r,o]}function s(t,e){return e?`${t}-${e}`:t}function u(t){const e=t.split(":");if(1===e.length)return[t,0,void 0];const n=e[0],r=3===e.length?e[1]:void 0;return[n,Number(e[e.length-1]),r]}function i(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function c(t,n,r){let o=e("pad",t,n,r);if("explicit"===o){o=e("explicitPaddings",t,n,r);const s=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)s[t][0]=o[2*t],s[t][1]=o[2*t+1];return s}return o}function d(e){return e.kept?e:(0,t.clone)(e)}
},{"@tensorflow/tfjs-core":"nPFy"}],"bHNY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"qGJM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"w0VO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];exports.json=e;
},{}],"jHcM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];exports.json=t;
},{}],"J3n3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];exports.json=e;
},{}],"OPSM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"am8d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];exports.json=e;
},{}],"kyno":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];exports.json=t;
},{}],"ssjH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}];exports.json=e;
},{}],"TZcI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];exports.json=e;
},{}],"LgUZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"fw25":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}];exports.json=e;
},{}],"wNAj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}];exports.json=t;
},{}],"Hi3P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];exports.json=e;
},{}],"uMPy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}];exports.json=e;
},{}],"WJlx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];exports.json=e;
},{}],"kpuq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];exports.json=t;
},{}],"snOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];exports.json=t;
},{}],"hNiy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];exports.json=t;
},{}],"ZI7R":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var e=arguments[3],t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.OperationMapper=void 0,exports.decodeBase64=k,exports.getBoolArrayParam=W,exports.getBoolParam=I,exports.getDtypeArrayParam=M,exports.getDtypeParam=S,exports.getFuncParam=E,exports.getNumberParam=w,exports.getNumericArrayParam=C,exports.getStringArrayParam=F,exports.getStringParam=V,exports.getTensorShapeArrayParam=L,exports.getTensorShapeParam=$,exports.parseDtypeParam=j,exports.parseStringParam=q,exports.parseTensorShapeParam=B;var a=require("@tensorflow/tfjs-core"),r=O(require("../data/compiled_api")),n=require("./custom_op/register"),s=require("./executors/utils"),u=O(require("./op_list/arithmetic")),o=O(require("./op_list/basic_math")),i=O(require("./op_list/control")),p=O(require("./op_list/convolution")),l=O(require("./op_list/creation")),c=O(require("./op_list/dynamic")),f=O(require("./op_list/evaluation")),d=O(require("./op_list/graph")),m=O(require("./op_list/hash_table")),h=O(require("./op_list/image")),g=O(require("./op_list/logical")),y=O(require("./op_list/matrices")),N=O(require("./op_list/normalization")),b=O(require("./op_list/reduction")),D=O(require("./op_list/slice_join")),_=O(require("./op_list/sparse")),T=O(require("./op_list/spectral")),v=O(require("./op_list/string")),x=O(require("./op_list/transformation"));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(P=function(e){return e?a:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=P(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=n?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}class A{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[u,o,i,p,l,c,f,d,m,h,g,y,N,b,D,_,T,v,x].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){const a=e.node,r=[],n=[],u=[],o=a.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?n.push(e[t.name]):null!=t.input&&0!==t.input.length||u.push(e[t.name]),e),{});let i=[];const p=[];let l={},c={};null!=t&&(l=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));const f=Object.keys(o);f.forEach(e=>{const t=o[e];t.inputNames.forEach((e,a)=>{const[r,,n]=(0,s.getNodeNameAndIndex)(e),u=o[r];if(null!=u.outputs){const e=u.outputs.indexOf(n);if(-1!==e){const n=`${r}:${e}`;t.inputNames[a]=n}}t.inputs.push(u),u.children.push(t)})}),0===Object.keys(c).length?f.forEach(e=>{const t=o[e];0===t.children.length&&p.push(t)}):Object.keys(c).forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e),a=o[t];null!=a&&(a.signatureKey=c[e],p.push(a))}),Object.keys(l).length>0?Object.keys(l).forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e),a=o[t];a&&(a.signatureKey=l[e],i.push(a))}):i=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const m={nodes:o,inputs:i,outputs:p,weights:n,placeholders:r,signature:t,functions:d};return u.length>0&&(m.initNodes=u),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,a)=>(t[e[a].name]=a,t),{})}mapNode(e){const t=(0,n.getRegisteredOp)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const a={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.slice(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(a.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(a.attrParams=t.attrs.reduce((t,a)=>{const r=a.type;let n=void 0;switch(a.type){case"string":void 0===(n=V(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=V(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":void 0===(n=F(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=F(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":void 0===(n=w(e.attr,a.tfName,a.defaultValue||0))&&a.tfDeprecatedName&&(n=w(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":void 0===(n=C(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=C(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":void 0===(n=I(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=I(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":void 0===(n=W(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=W(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":void 0===(n=$(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=$(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":void 0===(n=L(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=L(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":void 0===(n=S(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=S(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":void 0===(n=M(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=M(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":void 0===(n=E(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=E(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return t[a.name]={value:n,type:r},t},{})),a}mapFunction(e){const t=e.nodeDef,a=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&a.push(e[t.name]),e),{}));const n=[],u=[];e.signature.inputArg.forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e.name),a={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:j(e.type),type:"dtype"}},children:[]};a.signatureKey=e.name,n.push(a),r[t]=a}),Object.keys(r).forEach(e=>{const t=r[e];t.inputNames.forEach((e,a)=>{const[n,,u]=(0,s.getNodeNameAndIndex)(e),o=r[n];if(null!=o.outputs){const e=o.outputs.indexOf(u);if(-1!==e){const r=`${n}:${e}`;t.inputNames[a]=r}}t.inputs.push(o),o.children.push(t)})});const o=e.ret;e.signature.outputArg.forEach(e=>{const[t,a]=(0,s.getNodeNameAndIndex)(o[e.name]),n=r[t];null!=n&&(n.defaultOutput=a,u.push(n))});const i=this.mapArgsToSignature(e);return{nodes:r,inputs:n,outputs:u,weights:a,placeholders:[],signature:i}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,a)=>(t[a.name]=this.mapArgToTensorInfo(a,e.ret),t),{})}}mapArgToTensorInfo(e,t){let a=e.name;return null!=t&&(a=t[a]),{name:a,dtype:e.type}}}function k(e){const r=(0,a.env)().global;if(void 0!==r.atob)return r.atob(e);if(void 0!==t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function q(e,t){const a=Array.isArray(e)?String.fromCharCode.apply(null,e):k(e);return t?a:a.toLowerCase()}function V(e,t,a,r=!1){const n=e[t];return null!=n?q(n.s,r):a}function I(e,t,a){const r=e[t];return r?r.b:a}function w(e,t,a){const r=e[t]||{},n=null!=r.i?r.i:null!=r.f?r.f:a;return"number"==typeof n?n:parseInt(n,10)}function j(e){switch("string"==typeof e&&(e=r.DataType[e]),e){case r.DataType.DT_FLOAT:case r.DataType.DT_HALF:return"float32";case r.DataType.DT_INT32:case r.DataType.DT_INT64:case r.DataType.DT_INT8:case r.DataType.DT_UINT8:return"int32";case r.DataType.DT_BOOL:return"bool";case r.DataType.DT_DOUBLE:return"float32";case r.DataType.DT_STRING:return"string";default:return null}}function E(e,t,a){const r=e[t];return r&&r.func?r.func.name:a}function S(e,t,a){const r=e[t];return r&&r.type?j(r.type):a}function M(e,t,a){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>j(e)):a}function B(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function $(e,t,a){const r=e[t];return r&&r.shape?B(r.shape):a}function C(e,t,a){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):a}function F(e,t,a,r=!1){const n=e[t];return n&&n.list&&n.list.s?n.list.s.map(e=>q(e,r)):a}function L(e,t,a){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>B(e)):a}function W(e,t,a){const r=e[t];return r&&r.list&&r.list.b?r.list.b:a}exports.OperationMapper=A;
},{"@tensorflow/tfjs-core":"nPFy","../data/compiled_api":"CJak","./custom_op/register":"c1gB","./executors/utils":"X8lg","./op_list/arithmetic":"bHNY","./op_list/basic_math":"qGJM","./op_list/control":"w0VO","./op_list/convolution":"jHcM","./op_list/creation":"J3n3","./op_list/dynamic":"OPSM","./op_list/evaluation":"am8d","./op_list/graph":"kyno","./op_list/hash_table":"ssjH","./op_list/image":"TZcI","./op_list/logical":"LgUZ","./op_list/matrices":"fw25","./op_list/normalization":"wNAj","./op_list/reduction":"Hi3P","./op_list/slice_join":"uMPy","./op_list/sparse":"WJlx","./op_list/spectral":"kpuq","./op_list/string":"snOi","./op_list/transformation":"hNiy","buffer":"aMB2"}],"zuxC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeValueImpl=void 0;var t=require("../executors/utils"),r=require("../operation_mapper");class e{constructor(t,r,e){this.node=t,this.tensorMap=r,this.context=e,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,r)=>(t[r]=this.getAttr(r),t),{}))}getInput(r){return(0,t.getTensor)(r,this.tensorMap,this.context)}getAttr(e,s){const n=this.node.rawAttrs[e];if(null!=n.tensor)return(0,t.getTensor)(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return(0,r.getNumberParam)(this.node.rawAttrs,e,s);if(null!=n.s)return(0,r.getStringParam)(this.node.rawAttrs,e,s);if(null!=n.b)return(0,r.getBoolParam)(this.node.rawAttrs,e,s);if(null!=n.shape)return(0,r.getTensorShapeParam)(this.node.rawAttrs,e,s);if(null!=n.type)return(0,r.getDtypeParam)(this.node.rawAttrs,e,s);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return(0,r.getNumericArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.s)return(0,r.getStringArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.shape)return(0,r.getTensorShapeArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.b)return(0,r.getBoolArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.type)return(0,r.getDtypeArrayParam)(this.node.rawAttrs,e,s)}return s}}exports.NodeValueImpl=e;
},{"../executors/utils":"X8lg","../operation_mapper":"ZI7R"}],"cUqg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ops");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"./ops":"OgAK"}],"FLQV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=o?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(u,n,l):u[n]=e[n]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u,o=e)=>{switch(r.op){case"BiasAdd":case"AddV2":case"Add":return[o.add((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"AddN":return[o.addN((0,a.getParamValue)("tensors",r,t,u))];case"FloorMod":case"Mod":return[o.mod((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Mul":return[o.mul((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"RealDiv":case"Div":return[o.div((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"DivNoNan":return[o.divNoNan((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"FloorDiv":return[o.floorDiv((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Sub":return[o.sub((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Minimum":return[o.minimum((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Maximum":return[o.maximum((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Pow":return[o.pow((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"SquaredDifference":return[o.squaredDifference((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const o="arithmetic";exports.CATEGORY=o;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"GfFR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=n?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(u,l,s):u[l]=e[l]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u,n=e)=>{switch(r.op){case"Abs":case"ComplexAbs":return[n.abs((0,a.getParamValue)("x",r,t,u))];case"Acos":return[n.acos((0,a.getParamValue)("x",r,t,u))];case"Acosh":return[n.acosh((0,a.getParamValue)("x",r,t,u))];case"Asin":return[n.asin((0,a.getParamValue)("x",r,t,u))];case"Asinh":return[n.asinh((0,a.getParamValue)("x",r,t,u))];case"Atan":return[n.atan((0,a.getParamValue)("x",r,t,u))];case"Atan2":return[n.atan2((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("y",r,t,u))];case"Atanh":return[n.atanh((0,a.getParamValue)("x",r,t,u))];case"Ceil":return[n.ceil((0,a.getParamValue)("x",r,t,u))];case"Complex":return[n.complex((0,a.getParamValue)("real",r,t,u),(0,a.getParamValue)("imag",r,t,u))];case"Cos":return[n.cos((0,a.getParamValue)("x",r,t,u))];case"Cosh":return[n.cosh((0,a.getParamValue)("x",r,t,u))];case"Elu":return[n.elu((0,a.getParamValue)("x",r,t,u))];case"Erf":return[n.erf((0,a.getParamValue)("x",r,t,u))];case"Exp":return[n.exp((0,a.getParamValue)("x",r,t,u))];case"Expm1":return[n.expm1((0,a.getParamValue)("x",r,t,u))];case"Floor":return[n.floor((0,a.getParamValue)("x",r,t,u))];case"Log":return[n.log((0,a.getParamValue)("x",r,t,u))];case"Log1p":return[n.log1p((0,a.getParamValue)("x",r,t,u))];case"Imag":return[n.imag((0,a.getParamValue)("x",r,t,u))];case"Neg":return[n.neg((0,a.getParamValue)("x",r,t,u))];case"Reciprocal":return[n.reciprocal((0,a.getParamValue)("x",r,t,u))];case"Real":return[n.real((0,a.getParamValue)("x",r,t,u))];case"Relu":return[n.relu((0,a.getParamValue)("x",r,t,u))];case"Round":return[n.round((0,a.getParamValue)("x",r,t,u))];case"Selu":return[n.selu((0,a.getParamValue)("x",r,t,u))];case"Sigmoid":return[n.sigmoid((0,a.getParamValue)("x",r,t,u))];case"Sin":return[n.sin((0,a.getParamValue)("x",r,t,u))];case"Sign":return[n.sign((0,a.getParamValue)("x",r,t,u))];case"Sinh":return[n.sinh((0,a.getParamValue)("x",r,t,u))];case"Softplus":return[n.softplus((0,a.getParamValue)("x",r,t,u))];case"Sqrt":return[n.sqrt((0,a.getParamValue)("x",r,t,u))];case"Square":return[n.square((0,a.getParamValue)("x",r,t,u))];case"Tanh":return[n.tanh((0,a.getParamValue)("x",r,t,u))];case"Tan":return[n.tan((0,a.getParamValue)("x",r,t,u))];case"ClipByValue":return[n.clipByValue((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("clipValueMin",r,t,u),(0,a.getParamValue)("clipValueMax",r,t,u))];case"Relu6":return[n.relu6((0,a.getParamValue)("x",r,t,u))];case"Rsqrt":return[n.rsqrt((0,a.getTensor)(r.inputNames[0],t,u))];case"Prod":return[n.prod((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("axes",r,t,u))];case"LeakyRelu":return[n.leakyRelu((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("alpha",r,t,u))];case"Prelu":return[n.prelu((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("alpha",r,t,u))];case"IsNan":return[n.isNaN((0,a.getTensor)(r.inputNames[0],t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const n="basic_math";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"rSVZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertShapesMatchAllowUndefinedSize=t,exports.fullDefinedShape=r,exports.inferElementShape=n,exports.mergeElementShape=o;var e=require("@tensorflow/tfjs-core");function t(t,r,n=""){if("number"!=typeof t&&"number"!=typeof r){e.util.assert(t.length===r.length,()=>n+` Shapes ${t} and ${r} must match`);for(let o=0;o<t.length;o++){const l=t[o],s=r[o];e.util.assert(l<0||s<0||l===s,()=>n+` Shapes ${t} and ${r} must match`)}}}function r(e){return"number"!=typeof e&&!e.some(e=>e<0)}function n(e,t,n){let l=o(e,n);const s=!r(l);if(s&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+` with non-fully-defined elementShape: ${l}`);if(s&&t.forEach(e=>{l=o(e.shape,l)}),!r(l))throw new Error(`Non-fully-defined elementShape: ${l}`);return l}function o(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const r=[];for(let n=0;n<e.length;++n){const o=e[n],l=t[n];if(o>=0&&l>=0&&o!==l)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);r[n]=o>=0?o:l}return r}
},{"@tensorflow/tfjs-core":"nPFy"}],"rYC0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TensorArray=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./tensor_utils");class s{constructor(t,s,r,i,n,a,h){this.name=t,this.dtype=s,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=n,this.dynamicSize=a,this.clearAfterRead=h,this.tensors=[],this.closed_=!1,this.idTensor=(0,e.scalar)(0),(0,e.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read `+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(s,r){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(s<0||!this.dynamicSize&&s>=this.maxSize)throw new Error(`Tried to write to index ${s}, but array is not resizeable and size is: ${this.maxSize}`);const i=this.tensors[s]||{};if(r.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s},\n          because the value dtype is ${r.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=r.shape),(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,r.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${s}.`),i.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s}, because it has already been read.`);if(i.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s}, because it has already been written.`);i.tensor=r,(0,e.keep)(r),i.written=!0,this.tensors[s]=i}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,`+`because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,s)=>this.write(e,t[s]))}gather(s,r){if(r&&r!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${r}`);if(s)s=s.slice(0,this.size());else{s=[];for(let e=0;e<this.size();e++)s.push(e)}if(0===s.length)return(0,e.tensor)([],[0].concat(this.elementShape));const i=this.readMany(s);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),(0,e.stack)(i,0)}concat(s){if(s&&s!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${s}`);if(0===this.size())return(0,e.tensor)([],[0].concat(this.elementShape));const r=[];for(let e=0;e<this.size();e++)r.push(e);const i=this.readMany(r);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,i[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${i[0].shape})`),(0,e.concat)(i,0)}scatter(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);if(t.length!==s.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${s.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,(0,e.unstack)(s,0))}split(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);let r=0;const i=t.map(e=>r+=e);if(r!==s.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${s.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), `+"and the TensorArray is not marked as dynamically resizeable");const n=0===r?0:s.size/r,a=[];(0,e.tidy)(()=>{s=(0,e.reshape)(s,[1,r,n]);for(let r=0;r<t.length;++r){const h=[0,0===r?0:i[r-1],0],o=[1,t[r],n];a[r]=(0,e.reshape)((0,e.slice)(s,h,o),this.elementShape)}return a});const h=[];for(let e=0;e<t.length;e++)h[e]=e;this.writeMany(h,a)}}exports.TensorArray=s;
},{"@tensorflow/tfjs-core":"nPFy","./tensor_utils":"rSVZ"}],"jRV4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TensorList=void 0,exports.fromTensor=n,exports.reserve=r,exports.scatter=i,exports.split=h;var e=require("@tensorflow/tfjs-core"),t=require("./tensor_utils");class s{constructor(s,n,r,i=-1){this.tensors=s,this.elementShape=n,this.elementDtype=r,null!=s&&s.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);(0,t.assertShapesMatchAllowUndefinedSize)(n,s.shape,"TensorList shape mismatch: "),(0,e.keep)(s)}),this.idTensor=(0,e.scalar)(0),this.maxNumElements=i,(0,e.keep)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new s([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(s,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(-1!==r&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);(0,t.assertShapesMatchAllowUndefinedSize)(s,this.elementShape,"TensorList shape mismatch: ");const i=(0,t.inferElementShape)(this.elementShape,this.tensors,s);return(0,e.tidy)(()=>{const t=this.tensors.map(t=>(0,e.reshape)(t,i));return(0,e.stack)(t,0)})}popBack(s,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const r=(0,t.inferElementShape)(this.elementShape,this.tensors,s),i=this.tensors.pop();return(0,t.assertShapesMatchAllowUndefinedSize)(i.shape,s,"TensorList shape mismatch: "),(0,e.reshape)(i,r)}pushBack(s){if(s.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s.dtype}, but list elements ${this.elementDtype}`);if((0,t.assertShapesMatchAllowUndefinedSize)(s.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,e.keep)(s),this.tensors.push(s)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new s([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let s=0;s<Math.min(this.tensors.length,e);++s)t.tensors[s]=this.tensors[s];return t}getItem(s,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(s<0||s>this.tensors.length)throw new Error(`Trying to access element ${s} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[s])throw new Error(`element at index ${s} is null.`);(0,t.assertShapesMatchAllowUndefinedSize)(this.tensors[s].shape,n,"TensorList shape mismatch: ");const i=(0,t.inferElementShape)(this.elementShape,this.tensors,n);return(0,e.reshape)(this.tensors[s],i)}setItem(s,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(s<0||-1!==this.maxNumElements&&s>=this.maxNumElements)throw new Error(`Trying to set element ${s} in a list with max ${this.maxNumElements} elements.`);(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,n.shape,"TensorList shape mismatch: "),(0,e.keep)(n),this.tensors[s]=n}gather(s,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,r,"TensorList shape mismatch: "),s=s.slice(0,this.size());const i=(0,t.inferElementShape)(this.elementShape,this.tensors,r);return 0===s.length?(0,e.tensor)([],[0].concat(i)):(0,e.tidy)(()=>{const t=s.map(t=>(0,e.reshape)(this.tensors[t],i));return(0,e.stack)(t,0)})}concat(s,n){if(s&&s!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${s}`);(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,n,"TensorList shape mismatch: ");const r=(0,t.inferElementShape)(this.elementShape,this.tensors,n);return 0===this.size()?(0,e.tensor)([],[0].concat(r)):(0,e.tidy)(()=>{const t=this.tensors.map(t=>(0,e.reshape)(t,r));return(0,e.concat)(t,0)})}}function n(n,r,i){const h=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==i)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${i}`);const o=n.shape.slice(1);(0,t.assertShapesMatchAllowUndefinedSize)(o,r,"TensorList shape mismatch: ");const a=(0,e.unstack)(n);return new s(a,r,h)}function r(e,t,n,r){return new s([],e,t,r)}function i(t,n,r,i){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);const h=Math.max(...n);if(null!=i&&-1!==i&&h>=i)throw new Error(`Max index must be < array size (${h}  vs. ${i})`);const o=new s([],r,t.dtype,i),a=(0,e.unstack)(t,0);return n.forEach((e,t)=>{o.setItem(e,a[t])}),o}function h(n,r,i){let h=0;const o=r.map(e=>h+=e);if(h!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${h}, and tensor's shape is: ${n.shape}`);const a=n.shape.slice(1),l=(0,t.mergeElementShape)(a,i),p=0===h?0:n.size/h,m=(0,e.tidy)(()=>{const t=[];n=(0,e.reshape)(n,[1,h,p]);for(let s=0;s<r.length;++s){const i=[0,0===s?0:o[s-1],0],h=[1,r[s],p];t[s]=(0,e.reshape)((0,e.slice)(n,i,h),l)}return n.dispose(),t}),c=new s([],i,n.dtype,r.length);for(let e=0;e<m.length;e++)c.setItem(e,m[e]);return c}exports.TensorList=s;
},{"@tensorflow/tfjs-core":"nPFy","./tensor_utils":"rSVZ"}],"FT6T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../../executor/tensor_array"),t=require("../../executor/tensor_list"),r=require("./utils");const s=async(s,n,o)=>{switch(s.op){case"If":case"StatelessIf":{const e=(0,r.getParamValue)("thenBranch",s,n,o),a=(0,r.getParamValue)("elseBranch",s,n,o),t=(0,r.getParamValue)("cond",s,n,o),i=(0,r.getParamValue)("args",s,n,o);return(await t.data())[0]?o.functionMap[e].executeFunctionAsync(i,o.tensorArrayMap,o.tensorListMap):o.functionMap[a].executeFunctionAsync(i,o.tensorArrayMap,o.tensorListMap)}case"While":case"StatelessWhile":{const e=(0,r.getParamValue)("body",s,n,o),a=(0,r.getParamValue)("cond",s,n,o),t=(0,r.getParamValue)("args",s,n,o),i=await o.functionMap[a].executeFunctionAsync(t,o.tensorArrayMap,o.tensorListMap),c=t.map(e=>e.id);let u=await i[0].data();i.forEach(e=>{e.kept||-1!==c.indexOf(e.id)||e.dispose()});let l=t;for(;u[0];){const t=l,r=(l=await o.functionMap[e].executeFunctionAsync(l,o.tensorArrayMap,o.tensorListMap)).map(e=>e.id);t.forEach(e=>{e.kept||-1!==c.indexOf(e.id)||-1!==r.indexOf(e.id)||e.dispose()});const s=await o.functionMap[a].executeFunctionAsync(l,o.tensorArrayMap,o.tensorListMap);u=await s[0].data(),s.forEach(e=>{e.kept||-1!==c.indexOf(e.id)||-1!==r.indexOf(e.id)||e.dispose()})}return l}case"LoopCond":{const e=(0,r.getParamValue)("pred",s,n,o);return[(0,r.cloneTensor)(e)]}case"Switch":{const e=(0,r.getParamValue)("pred",s,n,o);let a=(0,r.getParamValue)("data",s,n,o);return a.kept||(a=(0,r.cloneTensor)(a)),(await e.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const e=s.inputNames.find(e=>void 0!==(0,r.getTensor)(e,n,o));if(e){const a=(0,r.getTensor)(e,n,o);return[(0,r.cloneTensor)(a)]}return}case"Enter":{const e=(0,r.getParamValue)("frameName",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o);return o.enterFrame(e),[(0,r.cloneTensor)(a)]}case"Exit":{const e=(0,r.getParamValue)("tensor",s,n,o);return o.exitFrame(),[(0,r.cloneTensor)(e)]}case"NextIteration":{const e=(0,r.getParamValue)("tensor",s,n,o);return o.nextIteration(),[(0,r.cloneTensor)(e)]}case"TensorArrayV3":{const t=(0,r.getParamValue)("size",s,n,o),i=(0,r.getParamValue)("dtype",s,n,o),c=(0,r.getParamValue)("elementShape",s,n,o),u=(0,r.getParamValue)("dynamicSize",s,n,o),l=(0,r.getParamValue)("clearAfterRead",s,n,o),m=(0,r.getParamValue)("identicalElementShapes",s,n,o),d=(0,r.getParamValue)("name",s,n,o),g=new a.TensorArray(d,i,t,c,m,u,l);return o.addTensorArray(g),[g.idTensor,(0,e.scalar)(1)]}case"TensorArrayWriteV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorArray(e.id);return i.write(a,t),[i.idTensor]}case"TensorArrayReadV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("index",s,n,o);return[o.getTensorArray(e.id).read(a)]}case"TensorArrayGatherV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("dtype",s,n,o);return[o.getTensorArray(e.id).gather(a,t)]}case"TensorArrayScatterV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorArray(e.id);return i.scatter(a,t),[i.idTensor]}case"TensorArrayConcatV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=o.getTensorArray(e.id),t=(0,r.getParamValue)("dtype",s,n,o);return[a.concat(t)]}case"TensorArraySplitV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),t=(0,r.getParamValue)("lengths",s,n,o),i=o.getTensorArray(e.id);return i.split(t,a),[i.idTensor]}case"TensorArraySizeV3":{const a=(0,r.getParamValue)("tensorArrayId",s,n,o),t=o.getTensorArray(a.id);return[(0,e.scalar)(t.size(),"int32")]}case"TensorArrayCloseV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=o.getTensorArray(e.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorList(e.id);return i.setItem(a,t),[i.idTensor]}case"TensorListGetItem":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).getItem(a,t,i)]}case"TensorListScatterV2":case"TensorListScatter":{const e=(0,r.getParamValue)("indices",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),i=(0,r.getParamValue)("elementShape",s,n,o),c=(0,r.getParamValue)("numElements",s,n,o),u=(0,t.scatter)(a,e,i,c);return o.addTensorList(u),[u.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const e=(0,r.getParamValue)("elementShape",s,n,o),a=(0,r.getParamValue)("elementDType",s,n,o);let i;i="TensorListReserve"===s.op?"numElements":"maxNumElements";const c=(0,r.getParamValue)(i,s,n,o),u="TensorListReserve"===s.op?-1:c,l=(0,t.reserve)(e,a,c,u);return o.addTensorList(l),[l.idTensor]}case"TensorListGather":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).gather(a,i,t)]}case"TensorListStack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),t=(0,r.getParamValue)("elementDType",s,n,o),i=(0,r.getParamValue)("numElements",s,n,o);return[o.getTensorList(e.id).stack(a,t,i)]}case"TensorListFromTensor":{const e=(0,r.getParamValue)("tensor",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o),c=(0,t.fromTensor)(e,a,i);return o.addTensorList(c),[c.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=o.getTensorList(e.id),t=(0,r.getParamValue)("dtype",s,n,o),i=(0,r.getParamValue)("elementShape",s,n,o);return[a.concat(t,i)]}case"TensorListPushBack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),t=o.getTensorList(e.id);return t.pushBack(a),[t.idTensor]}case"TensorListPopBack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),t=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).popBack(a,t)]}case"TensorListSplit":{const e=(0,r.getParamValue)("tensor",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("lengths",s,n,o),c=(0,t.split)(e,i,a);return o.addTensorList(c),[c.idTensor]}case"TensorListLength":{const a=(0,r.getParamValue)("tensorListId",s,n,o),t=o.getTensorList(a.id);return[(0,e.scalar)(t.size(),"int32")]}case"TensorListResize":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("size",s,n,o),t=o.getTensorList(e.id).resize(a);return o.addTensorList(t),[t.idTensor]}default:throw TypeError(`Node type ${s.op} is not implemented`)}};exports.executeOp=s;const n="control";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core":"nPFy","../../executor/tensor_array":"rYC0","../../executor/tensor_list":"jRV4","./utils":"X8lg"}],"YvDY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var n=l?Object.getOwnPropertyDescriptor(e,u):null;n&&(n.get||n.set)?Object.defineProperty(o,u,n):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}function o(e,t,r){const[o,l]=(0,a.getParamValue)("fusedOps",e,t,r),u="biasadd"===o,n=!u,s="prelu"===l,i="fusedbatchnorm"===o,d=(0,a.getParamValue)("numArgs",e,t,r);if(u){if(s&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&u&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(i)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const g=(0,a.getParamValue)("strides",e,t,r),m=(0,a.getPadding)(e,t,r),p=(0,a.getParamValue)("dataFormat",e,t,r).toUpperCase(),P=(0,a.getParamValue)("dilations",e,t,r);let[c,V]=(0,a.getParamValue)("args",e,t,r);return n&&(V=c,c=void 0),{stride:g,pad:m,dataFormat:p,dilations:P,biasArg:c,preluArg:V,activationFunc:l,leakyreluAlpha:(0,a.getParamValue)("leakyreluAlpha",e,t,r)}}const l=(t,r,l,u=e)=>{switch(t.op){case"Conv1D":{const e=(0,a.getParamValue)("stride",t,r,l),o=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,a.getParamValue)("dilation",t,r,l);return[u.conv1d((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),e,o,n,s)]}case"Conv2D":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getPadding)(t,r,l),n=(0,a.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,a.getParamValue)("dilations",t,r,l);return[u.conv2d((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),[e[1],e[2]],o,n,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:e,pad:n,dataFormat:s,dilations:i,biasArg:d,preluArg:g,activationFunc:m,leakyreluAlpha:p}=o(t,r,l);return[u.fused.conv2d({x:(0,a.getParamValue)("x",t,r,l),filter:(0,a.getParamValue)("filter",t,r,l),strides:[e[1],e[2]],pad:n,dataFormat:s,dilations:[i[1],i[2]],bias:d,activation:m,preluActivationWeights:g,leakyreluAlpha:p})]}case"FusedDepthwiseConv2dNative":{const{stride:e,pad:n,dataFormat:s,dilations:i,biasArg:d,preluArg:g,activationFunc:m,leakyreluAlpha:p}=o(t,r,l);return[u.fused.depthwiseConv2d({x:(0,a.getParamValue)("x",t,r,l),filter:(0,a.getParamValue)("filter",t,r,l),strides:[e[1],e[2]],pad:n,dataFormat:s,dilations:[i[1],i[2]],bias:d,activation:m,preluActivationWeights:g,leakyreluAlpha:p})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const e=(0,a.getParamValue)("outputShape",t,r,l),o=(0,a.getParamValue)("strides",t,r,l),n=(0,a.getPadding)(t,r,l);return[u.conv2dTranspose((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),e,[o[1],o[2]],n)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getPadding)(t,r,l),n=(0,a.getParamValue)("dilations",t,r,l),s=(0,a.getParamValue)("dataFormat",t,r,l).toUpperCase();return[u.depthwiseConv2d((0,a.getParamValue)("input",t,r,l),(0,a.getParamValue)("filter",t,r,l),[e[1],e[2]],o,s,[n[1],n[2]])]}case"Conv3D":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,a.getParamValue)("dilations",t,r,l);return[u.conv3d((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),[e[1],e[2],e[3]],o,n,[s[1],s[2],s[3]])]}case"AvgPool":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l);return[u.avgPool((0,a.getParamValue)("x",t,r,l),[n[1],n[2]],[e[1],e[2]],o)]}case"MaxPool":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l);return[u.maxPool((0,a.getParamValue)("x",t,r,l),[n[1],n[2]],[e[1],e[2]],o)]}case"MaxPoolWithArgmax":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l),s=(0,a.getParamValue)("includeBatchInIndex",t,r,l),{result:i,indexes:d}=u.maxPoolWithArgmax((0,a.getParamValue)("x",t,r,l),[n[1],n[2]],[e[1],e[2]],o,s);return[i,d]}case"AvgPool3D":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l);return[u.avgPool3d((0,a.getParamValue)("x",t,r,l),[n[1],n[2],n[3]],[e[1],e[2],e[3]],o)]}case"MaxPool3D":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l);return[u.maxPool3d((0,a.getParamValue)("x",t,r,l),[n[1],n[2],n[3]],[e[1],e[2],e[3]],o)]}case"Dilation2D":{const e=(0,a.getParamValue)("strides",t,r,l),o=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("dilations",t,r,l),s=e[1],i=e[2],d=n[1],g=n[2];return[u.dilation2d((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),[s,i],o,[d,g],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=l;const u="convolution";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"Upgr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(u,o,l):u[o]=e[o]}return u.default=e,r&&r.set(e,u),u}const u=(t,r,u,n=e)=>{switch(t.op){case"Fill":{const e=(0,a.getParamValue)("shape",t,r,u),o=(0,a.getParamValue)("dtype",t,r,u),l=(0,a.getParamValue)("value",t,r,u);return[n.fill(e,l,o)]}case"LinSpace":{const e=(0,a.getParamValue)("start",t,r,u),o=(0,a.getParamValue)("stop",t,r,u),l=(0,a.getParamValue)("num",t,r,u);return[n.linspace(e,o,l)]}case"Multinomial":{const e=(0,a.getParamValue)("logits",t,r,u),o=(0,a.getParamValue)("numSamples",t,r,u),l=(0,a.getParamValue)("seed",t,r,u);return[n.multinomial(e,o,l)]}case"OneHot":{const e=(0,a.getParamValue)("indices",t,r,u),o=(0,a.getParamValue)("depth",t,r,u),l=(0,a.getParamValue)("onValue",t,r,u),s=(0,a.getParamValue)("offValue",t,r,u);return[n.oneHot(e,o,l,s)]}case"Ones":return[n.ones((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"OnesLike":return[n.onesLike((0,a.getParamValue)("x",t,r,u))];case"RandomStandardNormal":return[n.randomStandardNormal((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u),(0,a.getParamValue)("seed",t,r,u))];case"RandomUniform":return[n.randomUniform((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("minval",t,r,u),(0,a.getParamValue)("maxval",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"Range":{const e=(0,a.getParamValue)("start",t,r,u),o=(0,a.getParamValue)("stop",t,r,u),l=(0,a.getParamValue)("step",t,r,u);return[n.range(e,o,l,(0,a.getParamValue)("dtype",t,r,u))]}case"TruncatedNormal":{const e=(0,a.getParamValue)("shape",t,r,u),o=(0,a.getParamValue)("mean",t,r,u),l=(0,a.getParamValue)("stdDev",t,r,u),s=(0,a.getParamValue)("seed",t,r,u);return[n.truncatedNormal(e,o,l,(0,a.getParamValue)("dtype",t,r,u),s)]}case"Zeros":return[n.zeros((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"ZerosLike":return[n.zerosLike((0,a.getParamValue)("x",t,r,u))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const n="creation";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"AX5u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=a?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(s,n,u):s[n]=e[n]}return s.default=e,o&&o.set(e,s),s}function s(e,r,o){return{boxes:(0,t.getParamValue)("boxes",e,r,o),scores:(0,t.getParamValue)("scores",e,r,o),maxOutputSize:(0,t.getParamValue)("maxOutputSize",e,r,o),iouThreshold:(0,t.getParamValue)("iouThreshold",e,r,o),scoreThreshold:(0,t.getParamValue)("scoreThreshold",e,r,o),softNmsSigma:(0,t.getParamValue)("softNmsSigma",e,r,o)}}const a=async(r,o,a,n,u=e)=>{switch(r.op){case"NonMaxSuppressionV5":{const{boxes:e,scores:t,maxOutputSize:n,iouThreshold:i,scoreThreshold:c,softNmsSigma:p}=s(r,o,a),l=await u.image.nonMaxSuppressionWithScoreAsync(e,t,n,i,c,p);return[l.selectedIndices,l.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:e,scores:n,maxOutputSize:i,iouThreshold:c,scoreThreshold:p}=s(r,o,a),l=(0,t.getParamValue)("padToMaxOutputSize",r,o,a),d=await u.image.nonMaxSuppressionPaddedAsync(e,n,i,c,p,l);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:e,scores:t,maxOutputSize:n,iouThreshold:i,scoreThreshold:c}=s(r,o,a);return[await u.image.nonMaxSuppressionAsync(e,t,n,i,c)]}case"Where":{const e=u.cast((0,t.getParamValue)("condition",r,o,a),"bool"),s=[await u.whereAsync(e)];return e.dispose(),s}case"ListDiff":return u.setdiff1dAsync((0,t.getParamValue)("x",r,o,a),(0,t.getParamValue)("y",r,o,a));default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=a;const n="dynamic";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"nMIn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=o?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(u,n,s):u[n]=e[n]}return u.default=e,a&&a.set(e,u),u}const u=(r,a,u,o=e)=>{switch(r.op){case"LowerBound":{const e=(0,t.getParamValue)("sortedSequence",r,a,u),n=(0,t.getParamValue)("values",r,a,u);return[o.lowerBound(e,n)]}case"TopKV2":{const e=(0,t.getParamValue)("x",r,a,u),n=(0,t.getParamValue)("k",r,a,u),s=(0,t.getParamValue)("sorted",r,a,u),c=o.topk(e,n,s);return[c.values,c.indices]}case"UpperBound":{const e=(0,t.getParamValue)("sortedSequence",r,a,u),n=(0,t.getParamValue)("values",r,a,u);return[o.upperBound(e,n)]}case"Unique":{const e=(0,t.getParamValue)("x",r,a,u),n=o.unique(e);return[n.values,n.indices]}case"UniqueV2":{const e=(0,t.getParamValue)("x",r,a,u),n=(0,t.getParamValue)("axis",r,a,u),s=o.unique(e,n);return[s.values,s.indices]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const o="evaluation";exports.CATEGORY=o;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"Xqvu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),r=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}const n=(t,a,n,o=e)=>{switch(t.op){case"Const":return a[t.name];case"PlaceholderWithDefault":const e=(0,r.getParamValue)("default",t,a,n);return[(0,r.getTensor)(t.name,a,n)||e];case"Placeholder":return[(0,r.getTensor)(t.name,a,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const e=(0,r.getParamValue)("x",t,a,n);return[(0,r.cloneTensor)(e)]}case"IdentityN":return(0,r.getParamValue)("x",t,a,n).map(e=>(0,r.cloneTensor)(e));case"Snapshot":const s=(0,r.getParamValue)("x",t,a,n);return[(0,r.cloneTensor)(s)];case"Shape":return[o.tensor1d((0,r.getParamValue)("x",t,a,n).shape,"int32")];case"ShapeN":return(0,r.getParamValue)("x",t,a,n).map(e=>o.tensor1d(e.shape));case"Size":return[o.scalar((0,r.getParamValue)("x",t,a,n).size,"int32")];case"Rank":return[o.scalar((0,r.getParamValue)("x",t,a,n).rank,"int32")];case"NoOp":return[o.scalar(1)];case"Print":const u=(0,r.getParamValue)("x",t,a,n),c=(0,r.getParamValue)("data",t,a,n),l=(0,r.getParamValue)("message",t,a,n),p=(0,r.getParamValue)("summarize",t,a,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let r=0;r<c.length;r++)console.log(Array.prototype.slice.call(c[r].dataSync()).slice(0,p));return[u];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=n;const o="graph";exports.CATEGORY="graph";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"aO0d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HashTable=void 0;var e=require("@tensorflow/tfjs-core"),t=s(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(r=function(e){return e?s:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=r(t);if(s&&s.has(e))return s.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,s&&s.set(e,n),n}class n{constructor(t,r){this.keyDType=t,this.valueDType=r,this.handle=(0,e.scalar)(0),this.tensorMap=new Map,(0,e.keep)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return t.scalar(this.size(),"int32")}async import(t,r){this.checkKeyAndValueTensor(t,r);const s=await t.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),(0,e.tidy)(()=>{const t=(0,e.unstack)(r),n=s.length,o=t.length;e.util.assert(n===o,()=>"The number of elements doesn't match, keys has "+`${n} elements, the values has ${o} `+"elements.");for(let r=0;r<n;r++){const n=s[r],o=t[r];(0,e.keep)(o),this.tensorMap.set(n,o)}return this.handle})}async find(t,r){this.checkKeyAndValueTensor(t,r);const s=await t.data();return(0,e.tidy)(()=>{const t=[];for(let e=0;e<s.length;e++){const n=s[e],o=this.findWithDefault(n,r);t.push(o)}return(0,e.stack)(t)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return null!=r?r:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got `+`${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got `+`${t.dtype}`)}}exports.HashTable=n;
},{"@tensorflow/tfjs-core":"nPFy","@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg"}],"OELD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=require("../../executor/hash_table"),a=require("./utils");const t=async(t,l,r,s)=>{switch(t.op){case"HashTable":case"HashTableV2":{const o=(0,a.getParamValue)("keyDType",t,l,r),u=(0,a.getParamValue)("valueDType",t,l,r),n=new e.HashTable(o,u);return s.addHashTable(t.name,n),[n.handle]}case"LookupTableImport":case"LookupTableImportV2":{const e=(0,a.getParamValue)("tableHandle",t,l,r,s),o=(0,a.getParamValue)("keys",t,l,r),u=(0,a.getParamValue)("values",t,l,r),n=s.getHashTableById(e.id);return[await n.import(o,u)]}case"LookupTableFind":case"LookupTableFindV2":{const e=(0,a.getParamValue)("tableHandle",t,l,r,s),o=(0,a.getParamValue)("keys",t,l,r),u=(0,a.getParamValue)("defaultValue",t,l,r),n=s.getHashTableById(e.id);return[await n.find(o,u)]}case"LookupTableSize":case"LookupTableSizeV2":{const e=(0,a.getParamValue)("tableHandle",t,l,r,s);return[s.getHashTableById(e.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=t;const l="hash_table";exports.CATEGORY=l;
},{"../../executor/hash_table":"aO0d","./utils":"X8lg"}],"e1hP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(o,n,s):o[n]=e[n]}return o.default=e,t&&t.set(e,o),o}const o=(r,t,o,i=e)=>{switch(r.op){case"ResizeBilinear":{const e=(0,a.getParamValue)("images",r,t,o),n=(0,a.getParamValue)("size",r,t,o),s=(0,a.getParamValue)("alignCorners",r,t,o),u=(0,a.getParamValue)("halfPixelCenters",r,t,o);return[i.image.resizeBilinear(e,[n[0],n[1]],s,u)]}case"ResizeNearestNeighbor":{const e=(0,a.getParamValue)("images",r,t,o),n=(0,a.getParamValue)("size",r,t,o),s=(0,a.getParamValue)("alignCorners",r,t,o),u=(0,a.getParamValue)("halfPixelCenters",r,t,o);return[i.image.resizeNearestNeighbor(e,[n[0],n[1]],s,u)]}case"CropAndResize":{const e=(0,a.getParamValue)("image",r,t,o),n=(0,a.getParamValue)("boxes",r,t,o),s=(0,a.getParamValue)("boxInd",r,t,o),u=(0,a.getParamValue)("cropSize",r,t,o),l=(0,a.getParamValue)("method",r,t,o),g=(0,a.getParamValue)("extrapolationValue",r,t,o);return[i.image.cropAndResize(e,n,s,u,l,g)]}case"ImageProjectiveTransformV3":{const e=(0,a.getParamValue)("images",r,t,o),n=(0,a.getParamValue)("transforms",r,t,o),s=(0,a.getParamValue)("outputShape",r,t,o),u=(0,a.getParamValue)("fillValue",r,t,o),l=(0,a.getParamValue)("interpolation",r,t,o),g=(0,a.getParamValue)("fillMode",r,t,o);return[i.image.transform(e,n,l.toLowerCase(),g.toLowerCase(),u,s)]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=o;const i="image";exports.CATEGORY="image";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"RjM4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var n=l?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(u,o,n):u[o]=e[o]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u,l=e)=>{switch(r.op){case"Equal":return[l.equal((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"NotEqual":return[l.notEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Greater":return[l.greater((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"GreaterEqual":return[l.greaterEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Less":return[l.less((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LessEqual":return[l.lessEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LogicalAnd":return[l.logicalAnd((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LogicalNot":return[l.logicalNot((0,a.getParamValue)("a",r,t,u))];case"LogicalOr":return[l.logicalOr((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Select":case"SelectV2":return[l.where((0,a.getParamValue)("condition",r,t,u),(0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const l="logical";exports.CATEGORY=l;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"Zh7M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var u={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(u,n,o):u[n]=e[n]}return u.default=e,r&&r.set(e,u),u}const u=(t,r,u,s=e)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[s.matMul((0,a.getParamValue)("a",t,r,u),(0,a.getParamValue)("b",t,r,u),(0,a.getParamValue)("transposeA",t,r,u),(0,a.getParamValue)("transposeB",t,r,u))];case"Einsum":return[s.einsum((0,a.getParamValue)("equation",t,r,u),...(0,a.getParamValue)("tensors",t,r,u))];case"Transpose":return[s.transpose((0,a.getParamValue)("x",t,r,u),(0,a.getParamValue)("perm",t,r,u))];case"_FusedMatMul":const[e,n]=(0,a.getParamValue)("fusedOps",t,r,u),o="biasadd"===e,l="prelu"===n,i=(0,a.getParamValue)("numArgs",t,r,u),p=(0,a.getParamValue)("leakyreluAlpha",t,r,u);if(o){if(l&&2!==i)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&1!==i)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=(0,a.getParamValue)("args",t,r,u);return[s.fused.matMul({a:(0,a.getParamValue)("a",t,r,u),b:(0,a.getParamValue)("b",t,r,u),transposeA:(0,a.getParamValue)("transposeA",t,r,u),transposeB:(0,a.getParamValue)("transposeB",t,r,u),bias:c,activation:n,preluActivationWeights:f,leakyreluAlpha:p})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const s="matrices";exports.CATEGORY=s;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"l0fb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=u?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}const o=(t,r,o,u=e)=>{switch(t.op){case"EuclideanNorm":return[u.euclideanNorm((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("axis",t,r,o),(0,a.getParamValue)("keepDims",t,r,o))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[u.batchNorm((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("mean",t,r,o),(0,a.getParamValue)("variance",t,r,o),(0,a.getParamValue)("offset",t,r,o),(0,a.getParamValue)("scale",t,r,o),(0,a.getParamValue)("epsilon",t,r,o))];case"LRN":return[u.localResponseNormalization((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("radius",t,r,o),(0,a.getParamValue)("bias",t,r,o),(0,a.getParamValue)("alpha",t,r,o),(0,a.getParamValue)("beta",t,r,o))];case"Softmax":return[u.softmax((0,a.getParamValue)("x",t,r,o))];case"LogSoftmax":return[u.logSoftmax((0,a.getParamValue)("x",t,r,o))];case"SparseToDense":return[u.sparseToDense((0,a.getParamValue)("sparseIndices",t,r,o),(0,a.getParamValue)("outputShape",t,r,o),(0,a.getParamValue)("sparseValues",t,r,o),(0,a.getParamValue)("defaultValue",t,r,o))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const u="normalization";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"qsqk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var u={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(u,n,o):u[n]=e[n]}return u.default=e,r&&r.set(e,u),u}const u=(t,r,u,s=e)=>{switch(t.op){case"Max":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("keepDims",t,r,u);return[s.max((0,a.getParamValue)("x",t,r,u),e,n)]}case"Mean":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("keepDims",t,r,u);return[s.mean((0,a.getParamValue)("x",t,r,u),e,n)]}case"Min":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("keepDims",t,r,u);return[s.min((0,a.getParamValue)("x",t,r,u),e,n)]}case"Sum":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("keepDims",t,r,u);return[s.sum((0,a.getParamValue)("x",t,r,u),e,n)]}case"All":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("keepDims",t,r,u);return[s.all((0,a.getParamValue)("x",t,r,u),e,n)]}case"Any":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("keepDims",t,r,u);return[s.any((0,a.getParamValue)("x",t,r,u),e,n)]}case"ArgMax":{const e=(0,a.getParamValue)("axis",t,r,u);return[s.argMax((0,a.getParamValue)("x",t,r,u),e)]}case"ArgMin":{const e=(0,a.getParamValue)("axis",t,r,u);return[s.argMin((0,a.getParamValue)("x",t,r,u),e)]}case"Prod":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("keepDims",t,r,u);return[s.prod((0,a.getParamValue)("x",t,r,u),e,n)]}case"Cumprod":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("exclusive",t,r,u),o=(0,a.getParamValue)("reverse",t,r,u);return[s.cumprod((0,a.getParamValue)("x",t,r,u),e,n,o)]}case"Cumsum":{const e=(0,a.getParamValue)("axis",t,r,u),n=(0,a.getParamValue)("exclusive",t,r,u),o=(0,a.getParamValue)("reverse",t,r,u);return[s.cumsum((0,a.getParamValue)("x",t,r,u),e,n,o)]}case"Bincount":const e=(0,a.getParamValue)("x",t,r,u),n=(0,a.getParamValue)("weights",t,r,u),o=(0,a.getParamValue)("size",t,r,u);return[s.bincount(e,n,o)];case"DenseBincount":{const e=(0,a.getParamValue)("x",t,r,u),n=(0,a.getParamValue)("weights",t,r,u),o=(0,a.getParamValue)("size",t,r,u),l=(0,a.getParamValue)("binaryOutput",t,r,u);return[s.denseBincount(e,n,o,l)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const s="reduction";exports.CATEGORY=s;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"di0L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=require("@tensorflow/tfjs-core"),a=s(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function s(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=u?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(s,n,l):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}const u=(r,s,u,n=a)=>{switch(r.op){case"ConcatV2":case"Concat":{const e=(0,t.getParamValue)("n",r,s,u),a=(0,t.getParamValue)("axis",r,s,u);let l=(0,t.getParamValue)("tensors",r,s,u);return l=l.slice(0,e),[n.concat(l,a)]}case"Gather":{const e=(0,t.getParamValue)("x",r,s,u),a=(0,t.getParamValue)("indices",r,s,u);return[n.gather(e,n.cast(a,"int32"),0)]}case"GatherV2":{const e=(0,t.getParamValue)("axis",r,s,u),a=(0,t.getParamValue)("batchDims",r,s,u),l=(0,t.getParamValue)("x",r,s,u),c=(0,t.getParamValue)("indices",r,s,u);return[n.gather(l,n.cast(c,"int32"),e,a)]}case"Reverse":{const e=(0,t.getParamValue)("dims",r,s,u),a=[];for(let t=0;t<e.length;t++)e[t]&&a.push(t);const l=(0,t.getParamValue)("x",r,s,u);return[n.reverse(l,a)]}case"ReverseV2":{const e=(0,t.getParamValue)("axis",r,s,u),a=(0,t.getParamValue)("x",r,s,u);return[n.reverse(a,e)]}case"Slice":{const e=(0,t.getParamValue)("begin",r,s,u),a=(0,t.getParamValue)("size",r,s,u);return[n.slice((0,t.getParamValue)("x",r,s,u),e,a)]}case"StridedSlice":{const e=(0,t.getParamValue)("begin",r,s,u),a=(0,t.getParamValue)("end",r,s,u),l=(0,t.getParamValue)("strides",r,s,u),c=(0,t.getParamValue)("beginMask",r,s,u),o=(0,t.getParamValue)("endMask",r,s,u),i=(0,t.getParamValue)("ellipsisMask",r,s,u),p=(0,t.getParamValue)("newAxisMask",r,s,u),g=(0,t.getParamValue)("shrinkAxisMask",r,s,u),m=(0,t.getParamValue)("x",r,s,u);return[n.stridedSlice(m,e,a,l,c,o,i,p,g)]}case"Pack":return(0,e.tidy)(()=>{const a=(0,t.getParamValue)("axis",r,s,u),l=(0,t.getParamValue)("tensors",r,s,u),c=l[0].shape,o=n.squeeze(l[0]).shape,i=l.map(a=>{const t=e.util.arraysEqual(a.shape,c);if(!t&&!e.util.arraysEqual(n.squeeze(a).shape,o))throw new Error("the input tensors shape does not match");return t?a:n.reshape(a,c)});return[n.stack(i,a)]});case"Unpack":{const e=(0,t.getParamValue)("axis",r,s,u),a=(0,t.getParamValue)("tensor",r,s,u);return n.unstack(a,e)}case"Tile":{const e=(0,t.getParamValue)("reps",r,s,u);return[n.tile((0,t.getParamValue)("x",r,s,u),e)]}case"Split":case"SplitV":{const e=(0,t.getParamValue)("axis",r,s,u),a=(0,t.getParamValue)("numOrSizeSplits",r,s,u),l=(0,t.getParamValue)("x",r,s,u);return n.split(l,a,e)}case"ScatterNd":{const e=(0,t.getParamValue)("indices",r,s,u),a=(0,t.getParamValue)("values",r,s,u),l=(0,t.getParamValue)("shape",r,s,u);return[n.scatterND(e,a,l)]}case"GatherNd":{const e=(0,t.getParamValue)("x",r,s,u),a=(0,t.getParamValue)("indices",r,s,u);return[n.gatherND(e,a)]}case"SparseToDense":{const e=(0,t.getParamValue)("sparseIndices",r,s,u),a=(0,t.getParamValue)("outputShape",r,s,u),l=(0,t.getParamValue)("sparseValues",r,s,u),c=(0,t.getParamValue)("defaultValue",r,s,u);return[n.sparseToDense(e,l,a,l.dtype===c.dtype?c:n.cast(c,l.dtype))]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const n="slice_join";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core":"nPFy","@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"l46a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var p=n?Object.getOwnPropertyDescriptor(e,u):null;p&&(p.get||p.set)?Object.defineProperty(s,u,p):s[u]=e[u]}return s.default=e,r&&r.set(e,s),s}const s=(a,r,s,n=e)=>{switch(a.op){case"SparseFillEmptyRows":{const{outputIndices:e,outputValues:u,emptyRowIndicator:p,reverseIndexMap:o}=n.sparse.sparseFillEmptyRows((0,t.getParamValue)("indices",a,r,s),(0,t.getParamValue)("values",a,r,s),(0,t.getParamValue)("denseShape",a,r,s),(0,t.getParamValue)("defaultValue",a,r,s));return[e,u,p,o]}case"SparseReshape":{const{outputIndices:e,outputShape:u}=n.sparse.sparseReshape((0,t.getParamValue)("inputIndices",a,r,s),(0,t.getParamValue)("inputShape",a,r,s),(0,t.getParamValue)("newShape",a,r,s));return[e,u]}case"SparseSegmentMean":return[n.sparse.sparseSegmentMean((0,t.getParamValue)("data",a,r,s),(0,t.getParamValue)("indices",a,r,s),(0,t.getParamValue)("segmentIds",a,r,s))];case"SparseSegmentSum":return[n.sparse.sparseSegmentSum((0,t.getParamValue)("data",a,r,s),(0,t.getParamValue)("indices",a,r,s),(0,t.getParamValue)("segmentIds",a,r,s))];default:throw TypeError(`Node type ${a.op} is not implemented`)}};exports.executeOp=s;const n="sparse";exports.CATEGORY="sparse";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"oI1i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=a?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,o&&o.set(e,n),n}const n=(r,o,n,a=e)=>{switch(r.op){case"FFT":return[a.fft((0,t.getParamValue)("x",r,o,n))];case"IFFT":return[a.ifft((0,t.getParamValue)("x",r,o,n))];case"RFFT":return[a.rfft((0,t.getParamValue)("x",r,o,n))];case"IRFFT":return[a.irfft((0,t.getParamValue)("x",r,o,n))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const a="spectral";exports.CATEGORY=a;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"XAXE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=s?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,a&&a.set(e,n),n}const n=(r,a,n,s=e)=>{switch(r.op){case"StringNGrams":{const{nGrams:e,nGramsSplits:u}=s.string.stringNGrams((0,t.getParamValue)("data",r,a,n),(0,t.getParamValue)("dataSplits",r,a,n),(0,t.getParamValue)("separator",r,a,n),(0,t.getParamValue)("nGramWidths",r,a,n),(0,t.getParamValue)("leftPad",r,a,n),(0,t.getParamValue)("rightPad",r,a,n),(0,t.getParamValue)("padWidth",r,a,n),(0,t.getParamValue)("preserveShortSequences",r,a,n));return[e,u]}case"StringSplit":{const{indices:e,values:u,shape:i}=s.string.stringSplit((0,t.getParamValue)("input",r,a,n),(0,t.getParamValue)("delimiter",r,a,n),(0,t.getParamValue)("skipEmpty",r,a,n));return[e,u,i]}case"StringToHashBucketFast":return[s.string.stringToHashBucketFast((0,t.getParamValue)("input",r,a,n),(0,t.getParamValue)("numBuckets",r,a,n))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const s="string";exports.CATEGORY="string";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"fCY7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=u?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}const o=(t,r,o,u=e)=>{switch(t.op){case"Cast":return[u.cast((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("dtype",t,r,o))];case"ExpandDims":{const e=(0,a.getParamValue)("axis",t,r,o);return[u.expandDims((0,a.getParamValue)("x",t,r,o),e)]}case"Squeeze":{const e=(0,a.getParamValue)("axis",t,r,o);return[u.squeeze((0,a.getParamValue)("x",t,r,o),e)]}case"Reshape":return[u.reshape((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("shape",t,r,o))];case"MirrorPad":return[u.mirrorPad((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("padding",t,r,o),(0,a.getParamValue)("mode",t,r,o))];case"PadV2":case"Pad":return[u.pad((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("padding",t,r,o),(0,a.getParamValue)("constantValue",t,r,o))];case"SpaceToBatchND":{const e=(0,a.getParamValue)("blockShape",t,r,o),s=(0,a.getParamValue)("paddings",t,r,o);return[u.spaceToBatchND((0,a.getParamValue)("x",t,r,o),e,s)]}case"BatchToSpaceND":{const e=(0,a.getParamValue)("blockShape",t,r,o),s=(0,a.getParamValue)("crops",t,r,o);return[u.batchToSpaceND((0,a.getParamValue)("x",t,r,o),e,s)]}case"DepthToSpace":{const e=(0,a.getParamValue)("blockSize",t,r,o),s=(0,a.getParamValue)("dataFormat",t,r,o).toUpperCase();return[u.depthToSpace((0,a.getParamValue)("x",t,r,o),e,s)]}case"BroadcastTo":return[u.broadcastTo((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("shape",t,r,o))];case"BroadcastArgs":return[u.broadcastArgs((0,a.getParamValue)("s0",t,r,o),(0,a.getParamValue)("s1",t,r,o))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const u="transformation";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"cUqg","./utils":"X8lg"}],"bPQR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=v;var e=b(require("@tensorflow/tfjs-core")),r=require("./custom_op/node_value_impl"),t=require("./custom_op/register"),u=b(require("./executors/arithmetic_executor")),c=b(require("./executors/basic_math_executor")),o=b(require("./executors/control_executor")),s=b(require("./executors/convolution_executor")),i=b(require("./executors/creation_executor")),n=b(require("./executors/dynamic_executor")),a=b(require("./executors/evaluation_executor")),x=b(require("./executors/graph_executor")),p=b(require("./executors/hash_table_executor")),l=b(require("./executors/image_executor")),_=b(require("./executors/logical_executor")),O=b(require("./executors/matrices_executor")),f=b(require("./executors/normalization_executor")),m=b(require("./executors/reduction_executor")),q=b(require("./executors/slice_join_executor")),d=b(require("./executors/sparse_executor")),g=b(require("./executors/spectral_executor")),h=b(require("./executors/string_executor")),y=b(require("./executors/transformation_executor"));function w(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(w=function(e){return e?t:r})(e)}function b(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=w(r);if(t&&t.has(e))return t.get(e);var u={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=c?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(u,o,s):u[o]=e[o]}return u.default=e,t&&t.set(e,u),u}function v(w,b,v,j,P=e.tidy){const M=((e,w,b)=>{switch(e.category){case"arithmetic":return P(()=>u.executeOp(e,w,b));case"basic_math":return P(()=>c.executeOp(e,w,b));case"control":return o.executeOp(e,w,b);case"convolution":return P(()=>s.executeOp(e,w,b));case"creation":return P(()=>i.executeOp(e,w,b));case"dynamic":return n.executeOp(e,w,b);case"evaluation":return P(()=>a.executeOp(e,w,b));case"image":return P(()=>l.executeOp(e,w,b));case"graph":return P(()=>x.executeOp(e,w,b));case"logical":return P(()=>_.executeOp(e,w,b));case"matrices":return P(()=>O.executeOp(e,w,b));case"normalization":return P(()=>f.executeOp(e,w,b));case"reduction":return P(()=>m.executeOp(e,w,b));case"slice_join":return P(()=>q.executeOp(e,w,b));case"sparse":return P(()=>d.executeOp(e,w,b));case"spectral":return P(()=>g.executeOp(e,w,b));case"string":return P(()=>h.executeOp(e,w,b));case"transformation":return P(()=>y.executeOp(e,w,b));case"hash_table":return p.executeOp(e,w,b,j);case"custom":const v=(0,t.getRegisteredOp)(e.op);if(v&&v.customExecutor)return v.customExecutor(new r.NodeValueImpl(e,w,b));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at `+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(w,b,v);return e.util.isPromise(M)?M.then(e=>[].concat(e)):[].concat(M)}
},{"@tensorflow/tfjs-core":"nPFy","./custom_op/node_value_impl":"zuxC","./custom_op/register":"c1gB","./executors/arithmetic_executor":"FLQV","./executors/basic_math_executor":"GfFR","./executors/control_executor":"FT6T","./executors/convolution_executor":"YvDY","./executors/creation_executor":"Upgr","./executors/dynamic_executor":"AX5u","./executors/evaluation_executor":"nMIn","./executors/graph_executor":"Xqvu","./executors/hash_table_executor":"OELD","./executors/image_executor":"e1hP","./executors/logical_executor":"RjM4","./executors/matrices_executor":"Zh7M","./executors/normalization_executor":"l0fb","./executors/reduction_executor":"qsqk","./executors/slice_join_executor":"di0L","./executors/sparse_executor":"l46a","./executors/spectral_executor":"oI1i","./executors/string_executor":"XAXE","./executors/transformation_executor":"fCY7"}],"vg1e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExecutionContext=void 0;class t{constructor(t={},e={},s={},n={}){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=s,this.functionMap=n,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const s=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(s))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}exports.ExecutionContext=t;
},{}],"QGdF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExecutionSubgraph=n,exports.getNodesInTopologicalOrder=s,exports.isControlFlow=p,exports.isDynamicShape=r,exports.isHashTable=u;var e=require("../operations/executors/utils");function n(n,s,o,a){const t=new Set,i=[];let l=null,h=null;const c=new Set,d=Object.keys(n).map(n=>(0,e.parseNodeName)(n)[0]);let m=[];null!=a&&(m=a.map(n=>(0,e.parseNodeName)(n.name)[0]));const f=[...s];for(;f.length>0;){const e=f.pop();(p(e)||r(e)||u(e))&&null==l&&(h=(l=e).children.map(e=>e.name).filter(e=>t.has(e))),t.add(e.name),null==o[e.name]&&(-1===d.indexOf(e.name)&&-1===m.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach(e=>{c.has(e.name)||(c.add(e.name),f.push(e))}):i.push(e.name)))}return{inputs:n,outputs:s,usedNodes:t,missingInputs:i,dynamicNode:l,syncInputs:h}}function s(n,s,o){const{usedNodes:a,inputs:t}=o,p=[],r=Object.keys(t).map(n=>(0,e.parseNodeName)(n)[0]).map(e=>n.nodes[e]),u=n.initNodes;r.forEach(e=>{a.has(e.name)&&p.push(e)}),n.weights.forEach(e=>{a.has(e.name)&&p.push(e)}),null!=u&&u.forEach(e=>{a.has(e.name)&&p.push(e)});const i=new Set,l=[];for(;p.length>0;){const e=p.pop();i.add(e.name),s[e.name]||l.push(e),e.children.forEach(e=>{!i.has(e.name)&&a.has(e.name)&&e.inputs.every(e=>i.has(e.name))&&p.push(e)})}return l}const o=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],a=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],t=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function p(e){return o.indexOf(e.op)>=0}function r(e){return a.indexOf(e.op)>=0}function u(e){return t.indexOf(e.op)>=0}
},{"../operations/executors/utils":"X8lg"}],"QF5K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GraphExecutor=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../operations/executors/utils"),s=require("../operations/operation_executor"),n=require("./execution_context"),i=require("./model_analysis");class o{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new o(e.functions[t],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){const s=e.map(e=>e.name).sort(),n=t.map(e=>e.name).sort();return s.join(this.SEPERATOR)+"--"+n.join(this.SEPERATOR)}compile(e,t){const s=(0,i.getExecutionSubgraph)(e,t,this.weightMap,this._initNodes),{missingInputs:n,dynamicNode:o,syncInputs:r}=s;if(null!=o)throw new Error(`This execution contains the node '${o.name}', which has `+`the dynamic op '${o.op}'. Please use `+"model.executeAsync() instead. Alternatively, to avoid the "+`dynamic ops, specify the inputs [${r}]`);if(n.length>0){const s=t.map(e=>e.name),i=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs `+`[${i}]. Missing the following inputs: [${n}]`)}return(0,i.getNodesInTopologicalOrder)(this.graph,this.weightMap,s)}execute(i,o){i=this.mapInputs(i);const r=Object.keys(i).sort();this.checkInputs(i),this.checkInputShapeAndType(i),o=this.mapOutputs(o),this.checkOutputs(o);const a=r.map(e=>this.graph.nodes[(0,t.parseNodeName)(e)[0]]),h=o.map(e=>(0,t.parseNodeName)(e)[0]);let p=h.map(e=>this.graph.nodes[e]);this.resetIntermediateTensors(),0===p.length&&(p=this._outputs);const u=this.getCompilationKey(a,p);let c=this.compiledMap.get(u);null==c&&(c=this.compile(i,p),this.compiledMap.set(u,c));const d={},m={};return(0,e.tidy)(()=>{const r=new n.ExecutionContext(this.weightMap,d,m,this.functionExecutorMap),a=Object.assign({},this.weightMap);Object.keys(i).forEach(e=>{const[s,n]=(0,t.parseNodeName)(e),o=[];o[n]=i[e],a[s]=o});const p=this.getFrozenTensorIds(a),u={};for(let t=0;t<c.length;t++){const n=c[t];if(!a[n.name]){const t=(0,s.executeOp)(n,a,r,this._resourceManager);if(e.util.isPromise(t))throw new Error(`The execution of the op '${n.op}' returned a promise. `+"Please use model.executeAsync() instead.");a[n.name]=t,this.checkTensorForDisposal(n.name,n,a,r,p,h,u)}}return null==this.parent&&r.dispose(p),o.map(e=>(0,t.getTensor)(e,a,r))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,s,n,i,o,r,a){"control"!==s.category&&-1===r.indexOf(e)&&(n[e].forEach(e=>{null!=e&&(a[e.id]=(a[e.id]||0)+s.children.length)}),s.inputs.forEach(e=>{if("control"!==e.category){const r=(0,t.getTensorsForCurrentContenxt)(e.name,n,i);null!=r&&r.forEach(e=>{if(e&&!e.kept&&!o.has(e.id)){const n=a[e.id];if(1===n){if(this.keepTensorForDebug){const[n,o]=(0,t.getNodeNameAndIndex)(s.name,i);this.intermediateTensors[n]?this.intermediateTensors[n][o]=e:(this.intermediateTensors[n]=[],this.intermediateTensors[n][o]=e)}else e.dispose();delete a[e.id]}else null!=n&&a[e.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(e=>e.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(e=>{!e||e.kept||e.isDisposed||this.keepIds.has(e.id)||e.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(e=>e.dispose()),delete this.intermediateTensors[e]}async _executeAsync(s,i,o=!1,r={},a={}){o||(s=this.mapInputs(s),this.checkInputs(s),this.checkInputShapeAndType(s),i=this.mapOutputs(i),this.checkOutputs(i));try{this.keepTensorForDebug=(0,e.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){console.warn(d.message)}this.resetIntermediateTensors();const h=new n.ExecutionContext(this.weightMap,r,a,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(s,h,i,o);const p=i.map(e=>(0,t.getTensor)(e,this.tensorsMap,h)),u=p.map(e=>e.id),c=Object.keys(s).map(e=>s[e].id);return this.keepIds=new Set([...u,...c,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&h.dispose(this.keepIds),p}async executeFunctionAsync(e,t,s){const n=e.reduce((e,t,s)=>(e[this.inputs[s].name]=t,e),{});return this._executeAsync(n,this.outputNodes,!0,t,s)}async executeWithControlFlow(e,s,n,o){const r=Object.keys(e),a=r.map(e=>this.graph.nodes[(0,t.parseNodeName)(e)[0]]),h=n.map(e=>(0,t.parseNodeName)(e)[0]);let p=h.map(e=>this.graph.nodes[e]);0===p.length&&(p=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:d,syncInputs:m}=(0,i.getExecutionSubgraph)(e,p,this.weightMap,this._initNodes),l=[...a,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:s.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(s=>{const[n,i]=(0,t.parseNodeName)(s),o=[];o[i]=e[s],g[n]=o});const f={},y=this.getFrozenTensorIds(g),x={};for(;l.length>0;){const e=this.processStack(a,l,s,g,x,y,h,f,u);await Promise.all(e)}null!=d||o||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=p.filter(e=>!(0,i.isControlFlow)(e)&&!(0,t.getTensor)(e.name,g,s)).map(e=>e.name);if(w.length>0){let e="";throw null!=d&&(e="Alternatively, to avoid the dynamic ops, use model.execute() "+`and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${w}] from the provided `+`inputs [${r}]. Consider providing the following inputs: `+`[${c}]. ${e}`)}return g}processStack(n,i,o,r,a,h,p,u,c){const d=[];for(;i.length>0;){const n=i.pop();o.currentContext=n.contexts;let m="";if("Enter"===n.node.op&&(0,t.getParamValue)("isConstant",n.node,r,o)&&([m]=(0,t.getNodeNameAndIndex)(n.node.name,o)),null==r[n.node.name]){const l=(0,s.executeOp)(n.node,r,o,this._resourceManager);m||([m]=(0,t.getNodeNameAndIndex)(n.node.name,o));const g=o.currentContext;e.util.isPromise(l)?d.push(l.then(e=>(r[m]=e,o.currentContext=g,this.checkTensorForDisposal(m,n.node,r,o,h,p,u),this.processChildNodes(n.node,i,o,r,a,c),e))):(r[m]=l,this.checkTensorForDisposal(m,n.node,r,o,h,p,u),this.processChildNodes(n.node,i,o,r,a,c))}else this.processChildNodes(n.node,i,o,r,a,c)}return d}processChildNodes(e,s,n,i,o,r){e.children.forEach(e=>{const[a]=(0,t.getNodeNameAndIndex)(e.name,n);!o[a]&&r.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!(0,t.getTensor)(e,i,n))&&(o[a]=!0,s.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!(0,t.getTensor)(e,i,n))&&(o[a]=!0,s.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(s){Object.keys(s).forEach(n=>{const i=s[n],[o]=(0,t.parseNodeName)(n),r=this.graph.nodes[o];if(r.attrParams.shape&&r.attrParams.shape.value){const t=r.attrParams.shape.value,s=t.length===i.shape.length&&i.shape.every((e,s)=>-1===t[s]||t[s]===e);e.util.assert(s,()=>`The shape of dict['${r.name}'] provided in `+`model.execute(dict) must be [${t}], but was `+`[${i.shape}]`)}r.attrParams.dtype&&r.attrParams.dtype.value&&e.util.assert(i.dtype===r.attrParams.dtype.value,()=>`The dtype of dict['${r.name}'] provided in `+"model.execute(dict) must be "+`${r.attrParams.dtype.value}, but was ${i.dtype}`)})}mapInputs(e){const t={};for(const s in e)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[s]){t[this._signature.inputs[s].name]=e[s]}else t[s]=e[s];return t}checkInputs(e){const s=Object.keys(e).filter(e=>{const[s]=(0,t.parseNodeName)(e);return null==this.graph.nodes[s]});if(s.length>0)throw new Error("The dict provided in model.execute(dict) has "+`keys: [${s}] that are not part of graph`)}mapOutputs(e){return e.map(e=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]){return this._signature.outputs[e].name}return e},{})}checkOutputs(e){e.forEach(e=>{const[s]=(0,t.parseNodeName)(e);if(!this.graph.nodes[s])throw new Error(`The output '${e}' is not found in the graph`)})}}exports.GraphExecutor=o;
},{"@tensorflow/tfjs-core":"nPFy","../operations/executors/utils":"X8lg","../operations/operation_executor":"bPQR","./execution_context":"vg1e","./model_analysis":"QGdF"}],"BlT9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResourceManager=void 0;class e{constructor(e={},a={}){this.hashTableNameToHandle=e,this.hashTableMap=a}addHashTable(e,a){this.hashTableNameToHandle[e]=a.handle,this.hashTableMap[a.id]=a}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}exports.ResourceManager=e;
},{}],"F00T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TFHUB_SEARCH_PARAM=exports.GraphModel=exports.DEFAULT_MODEL_NAME=void 0,exports.loadGraphModel=a,exports.loadGraphModelSync=u;var e=require("@tensorflow/tfjs-core"),t=require("../operations/operation_mapper"),r=require("./graph_executor"),s=require("./resource_manager");const n="?tfjs-format=file";exports.TFHUB_SEARCH_PARAM=n;const o="model.json";exports.DEFAULT_MODEL_NAME=o;class i{constructor(t,r={},n=e.io){this.modelUrl=t,this.loadOptions=r,this.version="n/a",this.io=n,null==r&&(this.loadOptions={}),this.resourceManager=new s.ResourceManager}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for `+`URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return e.util.isPromise(t)?t.then(e=>this.loadSync(e)):this.loadSync(t)}loadSync(e){this.artifacts=e;const s=this.artifacts.modelTopology;let n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(n=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}this.signature=n,this.version=`${s.versions.producer}.${s.versions.minConsumer}`;const o=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new r.GraphExecutor(t.OperationMapper.Instance.transformGraph(s,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(o),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const s=t.OperationMapper.Instance.transformGraph(e.modelInitializer);this.initializer=new r.GraphExecutor(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for `+`URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(t,r){const s=this.execute(t,this.outputNodes);if(this.structuredOutputKeys){const t=s instanceof e.Tensor?[s]:s,r={};return t.forEach((e,t)=>r[this.structuredOutputKeys[t]]=e),r}return s}normalizeInputs(t){if(!(t instanceof e.Tensor||Array.isArray(t)))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+`the graph model has ${this.inputNodes.length} placeholders, `+`while there are ${t.length} input tensors.`);return this.inputNodes.reduce((e,r,s)=>(e[r]=t[s],e),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function a(t,r={},s=e.io){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==r&&(r={}),r.fromTFHub&&"string"==typeof t&&(t=h(t));const n=new i(t,r,s);return await n.load(),n}function u(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide a url or an IOHandler that loads the model");if(!e.load)throw new Error(`modelUrl IO Handler ${e} has no load function`);const t=new i(e);return t.load(),t}function h(e){return e.endsWith("/")||(e+="/"),`${e}${o}${n}`}exports.GraphModel=i;
},{"@tensorflow/tfjs-core":"nPFy","../operations/operation_mapper":"ZI7R","./graph_executor":"QF5K","./resource_manager":"BlT9"}],"HPIS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GraphModel",{enumerable:!0,get:function(){return e.GraphModel}}),Object.defineProperty(exports,"deregisterOp",{enumerable:!0,get:function(){return r.deregisterOp}}),Object.defineProperty(exports,"loadGraphModel",{enumerable:!0,get:function(){return e.loadGraphModel}}),Object.defineProperty(exports,"loadGraphModelSync",{enumerable:!0,get:function(){return e.loadGraphModelSync}}),Object.defineProperty(exports,"registerOp",{enumerable:!0,get:function(){return r.registerOp}}),Object.defineProperty(exports,"version_converter",{enumerable:!0,get:function(){return t.version}}),require("./flags");var e=require("./executor/graph_model"),r=require("./operations/custom_op/register"),t=require("./version");
},{"./flags":"bh5K","./executor/graph_model":"F00T","./operations/custom_op/register":"c1gB","./version":"tO0n"}],"g7O1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canTensorify=f,exports.deepMap=n,exports.deepMapAndAwaitAll=a,exports.deepZip=u,exports.isIterable=c,exports.zipToList=s;var e=t(require("@tensorflow/tfjs-core"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function t(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(o,i,s):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function n(e,r){return o(e,r)}function o(e,r,t=new Map,n=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(n.has(e))throw new Error("Circular references are not supported.");if(t.has(e))return t.get(e);const u=r(e);if(u.recurse&&null!==u.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(u.recurse){if(c(e)){const u=Array.isArray(e)?[]:{};n.add(e);for(const i in e){const s=o(e[i],r,t,n);u[i]=s}return n.delete(e),e.__proto__&&(u.__proto__=e.__proto__),u}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return t.set(e,u.value),u.value}function u(e,r=s){return i(e,r)}function i(e,r,t=new Set){const n=e[0];if(t.has(n))throw new Error("Circular references are not supported.");const o=r(e);if(o.recurse&&null!==o.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse){if(c(n)){const o=Array.isArray(n)?[]:{};t.add(n);for(const u in n){const n=i(e.map(e=>e[u]),r,t);o[u]=n}return t.delete(n),o}throw new Error(`Can't recurse into non-iterable type: ${n}`)}return o.value}function s(e){return null===e?null:c(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function a(r,t){const n=new Map;o(r,t,n);for(const o of Array.from(n.keys())){const r=n.get(o);if(e.util.isPromise(r)){const e=await r;n.set(o,e)}}return o(r,t,n)}function c(r){let t=!1;if(e.env().get("IS_BROWSER"))t=r instanceof TextDecoder;else{const{StringDecoder:e}=require("string_decoder");t=r instanceof e}return null!=r&&!ArrayBuffer.isView(r)&&(Array.isArray(r)||"object"==typeof r&&!(r instanceof e.Tensor)&&!(r instanceof Promise)&&!t)}function f(r){return null==r||l(r)||Array.isArray(r)||"object"==typeof r&&r instanceof e.Tensor||e.util.isTypedArray(r)}function l(e){return null===e||"object"!=typeof e&&"function"!=typeof e}
},{"@tensorflow/tfjs-core":"nPFy","string_decoder":"sC8V"}],"HVJb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepClone=u;var e=n(require("@tensorflow/tfjs-core")),r=require("./deep_map");function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var f=o?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(u,a,f):u[a]=e[a]}return u.default=e,n&&n.set(e,u),u}function u(e){return(0,r.deepMap)(e,o)}function o(t){return t instanceof e.Tensor?{value:t.clone(),recurse:!1}:(0,r.isIterable)(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}
},{"@tensorflow/tfjs-core":"nPFy","./deep_map":"g7O1"}],"p8QS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RingBuffer=void 0;class t{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,i){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=i}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const i of t)this.push(i)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const i=this.wrap(this.begin+t),e=this.get(i);return this.set(i,this.pop()),e}}exports.RingBuffer=t;
},{}],"lJNF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GrowingRingBuffer=void 0;var e=require("./ring_buffer");class s extends e.RingBuffer{constructor(){super(s.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,s=new Array(e),t=this.length();for(let i=0;i<t;i++)s[i]=this.get(this.wrap(this.begin+i));this.data=s,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=t}}exports.GrowingRingBuffer=s,s.INITIAL_CAPACITY=32;
},{"./ring_buffer":"p8QS"}],"xkwP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ZipMismatchMode=exports.ShuffleIterator=exports.PrefetchIterator=exports.OneToManyIterator=exports.LazyIterator=exports.ChainedIterator=void 0,exports.iteratorFromConcatenated=m,exports.iteratorFromConcatenatedFunction=d,exports.iteratorFromFunction=c,exports.iteratorFromIncrementing=h,exports.iteratorFromItems=l,exports.iteratorFromZipped=p;var t,e=o(require("@tensorflow/tfjs-core")),r=o(require("seedrandom")),s=require("../util/deep_clone"),n=require("../util/deep_map"),a=require("../util/growing_ring_buffer"),i=require("../util/ring_buffer");function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(u=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=u(e);if(r&&r.has(t))return r.get(t);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var i=n?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=t[a]}return s.default=t,r&&r.set(t,s),s}function l(t){return new x(t)}function h(t){let e=t;return c(()=>({value:e++,done:!1}))}function c(t){return new y(t)}function m(t,e){return new E(t,e)}function d(t,e,r){return m(c(t).take(e),r)}function p(e,r=t.FAIL){return new O(e,r)}class f{async toArray(){const t=[];let e=await this.next();for(;!e.done;)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let r=await t.next();for(;!r.done;)e.push(r.value),r=await t.next();return e}async resolveFully(){let t=await this.next();for(;!t.done;)t=await this.next()}async resolveWhile(t){let e=await this.next(),r=t(e.value);for(;!e.done&&r;)r=t((e=await this.next()).value)}handleErrors(t){return new M(this,t)}filter(t){return new g(this,t)}map(t){return new F(this,t)}mapAsync(t){return new T(this,t)}serialMapAsync(t){return new T(this,t).serial()}flatmap(t){return new S(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new I(this,t,e)}columnMajorBatch(t,e=!0,r=n.zipToList){return this.rowMajorBatch(t,e).map(t=>(0,n.deepZip)(t,r))}concatenate(t,e){return new E(l([this,t]),e)}take(t){return t<0||null==t?this:new R(this,t)}skip(t){return t<0||null==t?this:new w(this,t)}prefetch(t){return new P(this,t)}shuffle(t,e){return new C(this,t,e)}serial(){return new v(this)}}exports.LazyIterator=f;class x extends f{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:(0,s.deepClone)(t),done:!1}}}class y extends f{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message=`Error thrown while iterating through a dataset: ${t.message}`,t}}}class v extends f{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class w extends f{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const t=await this.upstream.next();if(t.done)return t;e.dispose(t.value)}return this.upstream.next()}}class R extends f{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class I extends f{constructor(t,e,r=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];for(;t.length<this.batchSize;){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class g extends f{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;e.dispose(t.value)}}}class F extends f{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Map`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const r=e.tensor_util.getTensorsInContainer(t.value),s=this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return{value:s,done:!1}}}class M extends f{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class T extends f{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const r=e.tensor_util.getTensorsInContainer(t.value),s=await this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return{value:s,done:!1}}}class b extends f{constructor(){super(),this.outputQueue=new a.GrowingRingBuffer,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}exports.OneToManyIterator=b;class S extends b{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const t=await this.upstream.next();if(t.done)return!1;const r=e.tensor_util.getTensorsInContainer(t.value),s=this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);this.outputQueue.pushAll(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return!0}}class E extends f{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}exports.ChainedIterator=E,exports.ZipMismatchMode=t,function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(t||(exports.ZipMismatchMode=t={}));class O extends f{constructor(e,r=t.FAIL){super(),this.iterators=e,this.mismatchMode=r,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let r=0,s=0;const a=await(0,n.deepMapAndAwaitAll)(this.iterators,function(t){if(t instanceof f)return{value:t.next().then(t=>(r++,t.done&&s++,t.value)),recurse:!1};return{value:null,recurse:!0}});if(r===s)return{value:null,done:!0};if(s>0)switch(this.mismatchMode){case t.FAIL:throw new Error("Zipped streams should have the same length. "+`Mismatched at element ${this.count}.`);case t.SHORTEST:return{value:null,done:!0};case t.LONGEST:}return this.count++,{value:a,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class P extends f{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new i.RingBuffer(e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}exports.PrefetchIterator=P;class C extends P{constructor(t,s,n){super(t,s),this.upstream=t,this.windowSize=s,this.upstreamExhausted=!1,this.random=r.alea(n||e.util.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}exports.ShuffleIterator=C;
},{"@tensorflow/tfjs-core":"nPFy","seedrandom":"Q4CF","../util/deep_clone":"HVJb","../util/deep_map":"g7O1","../util/growing_ring_buffer":"lJNF","../util/ring_buffer":"p8QS"}],"Ng0F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dataset=void 0,exports.array=u,exports.datasetFromIteratorFn=o,exports.zip=l;var t=n(require("@tensorflow/tfjs-core")),e=n(require("seedrandom")),r=require("./iterators/lazy_iterator"),i=require("./util/deep_map");function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=n?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}class a{constructor(){this.size=null}batch(e,r=!0){const i=this;let s;return t.util.assert(e>0,()=>`batchSize needs to be positive, but it is\n      ${e}`),o(async()=>(await i.iterator()).columnMajorBatch(e,r,c),s=this.size===1/0||null==this.size?this.size:r?Math.ceil(this.size/e):Math.floor(this.size/e))}concatenate(t){const e=this;let r;return o(async()=>(await e.iterator()).concatenate(await t.iterator()),r=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null)}filter(e){const r=this;let i;return o(async()=>(await r.iterator()).filter(r=>t.tidy(()=>e(r))),i=this.size===1/0?1/0:null)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(e){const r=this;return o(async()=>(await r.iterator()).map(r=>t.tidy(()=>e(r))),this.size)}mapAsync(t){const e=this;return o(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return o(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let i;return o(async()=>{const i=(0,r.iteratorFromFunction)(async()=>({value:await e.iterator(),done:!1}));return(0,r.iteratorFromConcatenated)(i.take(t))},i=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null)}skip(t){const e=this;let r;return o(async()=>(await e.iterator()).skip(t),r=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null)}shuffle(r,i,s=!0){if(null==r||r<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+`bufferSize to the dataset size (${this.size} elements)`);const n=this,a=e.alea(i||t.util.now().toString());return o(async()=>{let t=a.int32();return s&&(t+=a.int32()),(await n.iterator()).shuffle(r,t.toString())},this.size)}take(t){const e=this;let r;return o(async()=>(await e.iterator()).take(t),r=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function o(t,e=null){return new class extends a{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function u(t){return o(async()=>(0,r.iteratorFromItems)(t),t.length)}function l(t){if(!(0,i.isIterable)(t))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(t))for(let r=0;r<t.length;r++)e=null==e?t[r].size:Math.min(e,t[r].size);else if(t instanceof Object)for(const r in t)e=null==e?t[r].size:Math.min(e,t[r].size);return o(async()=>{const e=await(0,i.deepMapAndAwaitAll)(t,t=>{if(t instanceof a)return{value:t.iterator(),recurse:!1};if((0,i.isIterable)(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return(0,r.iteratorFromZipped)(e,r.ZipMismatchMode.SHORTEST)},e)}function c(t){if(null===t)return null;const e=t[0];if((0,i.canTensorify)(e)){return{value:f(t),recurse:!1}}return{value:null,recurse:!0}}function f(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof t.Tensor?t.stack(e):t.tensor(e)}exports.Dataset=a,a.MAX_BUFFER_SIZE=1e4;
},{"@tensorflow/tfjs-core":"nPFy","seedrandom":"Q4CF","./iterators/lazy_iterator":"xkwP","./util/deep_map":"g7O1"}],"wsvE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextLineDataset=void 0;var t=require("../dataset");class e extends t.Dataset{constructor(t){super(),this.input=t}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(t=>(t.endsWith("\r")&&(t=t.slice(0,-1)),t))}}exports.TextLineDataset=e;
},{"../dataset":"Ng0F"}],"HyuO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CSVDataset=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../dataset"),s=require("./text_line_dataset");const i='"',l=Symbol("out"),a=Symbol("field"),n=Symbol("quote"),o=Symbol("quoteafterquote"),r=Symbol("quoteinquote");class u extends t.Dataset{constructor(t,i){super(),this.input=t,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new s.TextLineDataset(t),i||(i={}),this.hasHeader=!1!==i.hasHeader,this.fullColumnNames=i.columnNames,this.columnConfigs=i.columnConfigs,this.configuredColumnsOnly=i.configuredColumnsOnly,i.delimWhitespace?(e.util.assert(null==i.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=i.delimiter?i.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const t=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&t&&e.util.assert(t.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=t);const s=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),i=Object.keys(s).filter(e=>s[e]>1);if(e.util.assert(0===i.length,()=>"Duplicate column names found: "+i.toString()),this.columnConfigs)for(const e of Object.keys(this.columnConfigs)){if(-1===this.fullColumnNames.indexOf(e))throw new Error('The key "'+e+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const e=await this.base.iterator(),t=await e.next();if(t.done)throw new Error("No data was found for CSV parsing.");const s=t.value;return this.parseRow(s,!1)}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){const t=this.parseRow(e),s={},i={};for(let l=0;l<this.fullColumnNames.length;l++){const a=this.fullColumnNames[l],n=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||n){const o=t[l];let r=null;if(""===o)if(n&&void 0!==n.default)r=n.default;else{if(n&&(n.required||n.isLabel))throw new Error(`Required column ${a} is empty in this line: ${e}`);r=void 0}else{const e=Number(o);if(isNaN(e))r=n&&"bool"===n.dtype?this.getBoolean(o):o;else if(n&&n.dtype)switch(n.dtype){case"float32":r=e;break;case"int32":r=Math.floor(e);break;case"bool":r=this.getBoolean(o);break;default:r=e}else r=e}n&&n.isLabel?i[a]=r:s[a]=r}}return 0===Object.keys(i).length?s:{xs:s,ys:i}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){const s=[];let u=0;const h=e.length;let m=l;for(let c=0;c<h;c++)switch(m){case l:switch(e.charAt(c)){case i:u=c+1,m=n;break;case this.delimiter:if(u=c+1," "===this.delimiter&&this.delimWhitespace)break;s.push(""),m=l;break;default:m=a,u=c}break;case a:switch(e.charAt(c)){case this.delimiter:s.push(e.substring(u,c)),m=l,u=c+1}break;case n:switch(e.charAt(c)){case i:m=o}break;case o:switch(e.charAt(c)){case this.delimiter:s.push(e.substring(u,c-1)),m=l,u=c+1;break;case i:m=n;break;default:m=r}break;case r:switch(e.charAt(c)){case i:m=n}}if(m===o?s.push(e.substring(u,h-1)):s.push(e.substring(u)),t&&s.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${s}`);return s}}exports.CSVDataset=u;
},{"@tensorflow/tfjs-core":"nPFy","../dataset":"Ng0F","./text_line_dataset":"wsvE"}],"q7yf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MicrophoneIterator=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./lazy_iterator");class a extends e.LazyIterator{constructor(t){super(),this.microphoneConfig=t,this.isClosed=!1,this.fftSize=t.fftSize||1024;const e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error("Invalid fftSize: it must be a power of 2 between "+`2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=t.numFramesPerSpectrogram||43,this.sampleRateHz=t.sampleRateHz,this.columnTruncateLength=t.columnTruncateLength||this.fftSize,this.audioTrackConstraints=t.audioTrackConstraints,this.smoothingTimeConstant=t.smoothingTimeConstant||0,this.includeSpectrogram=!1!==t.includeSpectrogram,this.includeWaveform=!0===t.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!(0,t.env)().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");const i=new a(e);return await i.start(),i}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(a){throw new Error(`Error thrown while initializing video stream: ${a.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: "+`Expected: ${this.sampleRateHz}; `+`Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let t,e;const a=await this.getAudioData();if(this.includeSpectrogram){const e=this.flattenQueue(a.freqDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const t=this.flattenQueue(a.timeDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:t,waveform:e},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const t=[],e=[];let a=0;return new Promise(i=>{const r=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&i({freqDataQueue:t,timeDataQueue:e}),t.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++a===this.numFrames&&(clearInterval(r),i({freqDataQueue:t,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(t){const e=t[0].length,a=new Float32Array(t.length*e);return t.forEach((t,i)=>a.set(t,i*e)),a}getTensorFromAudioDataArray(e,a){const i=new Float32Array(t.util.sizeFromShape(a));return i.set(e,i.length-e.length),(0,t.tensor)(i,a)}}exports.MicrophoneIterator=a;
},{"@tensorflow/tfjs-core":"nPFy","./lazy_iterator":"xkwP"}],"ZpQA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebcamIterator=void 0;var e=require("@tensorflow/tfjs-core"),i=require("./lazy_iterator");class t extends i.LazyIterator{constructor(i,t){if(super(),this.webcamVideoElement=i,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=(0,e.tensor1d)([0],"int32"),this.webcamConfig.centerCrop){const i=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,r=(1-i)/2,s=(1-t)/2,o=r+i,n=t+s;this.cropBox=(0,e.tensor2d)([s,r,n,o],[1,4])}else this.cropBox=(0,e.tensor2d)([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(i,r={}){if(!(0,e.env)().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!i){if(i=document.createElement("video"),!r.resizeWidth||!r.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");i.width=r.resizeWidth,i.height=r.resizeHeight}const s=new t(i,r);return await s.start(),s}async start(){this.webcamConfig.facingMode&&e.util.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. `+"Please provide 'user' or 'environment'");try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(i){throw i.message=`Error thrown while initializing video stream: ${i.message}`,i}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=(()=>{e()})})}async next(){if(this.isClosed)return{value:null,done:!0};let i;try{i=e.browser.fromPixels(this.webcamVideoElement)}catch(t){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(t)}`)}if(!this.resize)return{value:i,done:!1};try{return{value:this.cropAndResizeFrame(i),done:!1}}catch(t){throw new Error(`Error thrown cropping the video: ${t.message}`)}finally{i.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(i){return(0,e.tidy)(()=>{const t=(0,e.expandDims)((0,e.cast)(i,"float32"),0);let r;const s=(r=e.image.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear")).shape;return(0,e.reshape)(r,s.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}exports.WebcamIterator=t;
},{"@tensorflow/tfjs-core":"nPFy","./lazy_iterator":"xkwP"}],"RZyF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataSource=void 0;class e{}exports.DataSource=e;
},{}],"QXdS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringIterator=void 0;var t=require("./lazy_iterator");class r extends t.LazyIterator{split(t){return new e(this,t)}}exports.StringIterator=r;class e extends r{constructor(t,r){super(),this.upstream=t,this.impl=new s(t,r)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class s extends t.OneToManyIterator{constructor(t,r){super(),this.upstream=t,this.separator=r,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const t=await this.upstream.next();if(t.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const r=t.value.split(this.separator);r[0]=this.carryover+r[0];for(const e of r.slice(0,-1))this.outputQueue.push(e);return this.carryover=r[r.length-1],!0}}
},{"./lazy_iterator":"xkwP"}],"tj3l":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ByteChunkIterator=void 0;var r=require("@tensorflow/tfjs-core"),t=require("./lazy_iterator"),s=require("./string_iterator");class u extends t.LazyIterator{decodeUTF8(){return new o(this)}}exports.ByteChunkIterator=u;class o extends s.StringIterator{constructor(e){super(),this.upstream=e,this.impl=new n(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class n extends t.OneToManyIterator{constructor(e){if(super(),this.upstream=e,(0,r.env)().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:e}=require("string_decoder");this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const t=await this.upstream.next();let s,u;return!t.done&&(s=t.value,u=(0,r.env)().get("IS_BROWSER")?this.decoder.decode(s,{stream:!0}):this.decoder.write(e.from(s.buffer)),this.outputQueue.push(u),!0)}}
},{"@tensorflow/tfjs-core":"nPFy","./lazy_iterator":"xkwP","./string_iterator":"QXdS","string_decoder":"sC8V","buffer":"aMB2"}],"LzkK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileChunkIterator=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./byte_chunk_iterator");class r extends t.ByteChunkIterator{constructor(t,r={}){super(),this.file=t,this.options=r,e.util.assert(t instanceof Uint8Array||!!(0,e.env)().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=r.offset||0,this.chunkSize=r.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const e=new Promise((e,t)=>{const r=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,r)));else{const i=new FileReader;i.onload=(r=>{let n=i.result;if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),!(n instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(n)}),i.onabort=(e=>t(new Error("Aborted"))),i.onerror=(e=>t(new Error(e.type)));const n=this.file.slice(this.offset,r);i.readAsArrayBuffer(n)}this.offset=r});return{value:await e,done:!1}}}exports.FileChunkIterator=r;
},{"@tensorflow/tfjs-core":"nPFy","./byte_chunk_iterator":"tj3l"}],"Set3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.urlChunkIterator=t;var e=require("@tensorflow/tfjs-core"),r=require("./file_chunk_iterator");async function t(t,i={},n){let a,c;"string"==typeof t?a=t:(a=t.url,c=o(t));const s=await(n||e.util.fetch)(a,c);if(s.ok){const e=new Uint8Array(await s.arrayBuffer());return new r.FileChunkIterator(e,i)}throw new Error(s.statusText)}const o=e=>{return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};
},{"@tensorflow/tfjs-core":"nPFy","./file_chunk_iterator":"LzkK"}],"gWkB":[function(require,module,exports) {
"use strict";function e(e){return"string"==typeof e&&"file://"===e.slice(0,7)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isLocalPath=e;
},{}],"uWmO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileDataSource=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../datasource"),r=require("../iterators/file_chunk_iterator"),i=require("../util/source_util");class s extends t.DataSource{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if((0,i.isLocalPath)(this.input)&&(0,e.env)().get("IS_NODE")){const e=require("fs");this.input=e.readFileSync(this.input.slice(7))}return new r.FileChunkIterator(this.input,this.options)}}exports.FileDataSource=s;
},{"@tensorflow/tfjs-core":"nPFy","../datasource":"RZyF","../iterators/file_chunk_iterator":"LzkK","../util/source_util":"gWkB","fs":"sC8V"}],"Ucg8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.URLDataSource=void 0;var r=require("../datasource"),e=require("../iterators/url_chunk_iterator"),t=require("../util/source_util"),i=require("./file_data_source");class s extends r.DataSource{constructor(r,e={}){super(),this.url=r,this.fileOptions=e}async iterator(){return(0,t.isLocalPath)(this.url)?new i.FileDataSource(this.url,this.fileOptions).iterator():(0,e.urlChunkIterator)(this.url,this.fileOptions)}}exports.URLDataSource=s;
},{"../datasource":"RZyF","../iterators/url_chunk_iterator":"Set3","../util/source_util":"gWkB","./file_data_source":"uWmO"}],"TH4z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csv=s,exports.func=c,exports.generator=i,exports.microphone=p,exports.webcam=u;var r=require("./dataset"),e=require("./datasets/csv_dataset"),t=require("./iterators/lazy_iterator"),a=require("./iterators/microphone_iterator"),o=require("./iterators/webcam_iterator"),n=require("./sources/url_data_source");function s(r,t={}){return new e.CSVDataset(new n.URLDataSource(r),t)}function c(e){const a=(0,t.iteratorFromFunction)(e);return(0,r.datasetFromIteratorFn)(async()=>a)}function i(e){return(0,r.datasetFromIteratorFn)(async()=>{const r=await e();return(0,t.iteratorFromFunction)(()=>r.next())})}async function u(r,e){return o.WebcamIterator.create(r,e)}async function p(r){return a.MicrophoneIterator.create(r)}
},{"./dataset":"Ng0F","./datasets/csv_dataset":"HyuO","./iterators/lazy_iterator":"xkwP","./iterators/microphone_iterator":"q7yf","./iterators/webcam_iterator":"ZpQA","./sources/url_data_source":"Ucg8"}],"MpC5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"CSVDataset",{enumerable:!0,get:function(){return r.CSVDataset}}),Object.defineProperty(exports,"Dataset",{enumerable:!0,get:function(){return e.Dataset}}),Object.defineProperty(exports,"FileDataSource",{enumerable:!0,get:function(){return a.FileDataSource}}),Object.defineProperty(exports,"TextLineDataset",{enumerable:!0,get:function(){return t.TextLineDataset}}),Object.defineProperty(exports,"URLDataSource",{enumerable:!0,get:function(){return u.URLDataSource}}),Object.defineProperty(exports,"array",{enumerable:!0,get:function(){return e.array}}),Object.defineProperty(exports,"csv",{enumerable:!0,get:function(){return n.csv}}),Object.defineProperty(exports,"func",{enumerable:!0,get:function(){return n.func}}),Object.defineProperty(exports,"generator",{enumerable:!0,get:function(){return n.generator}}),Object.defineProperty(exports,"microphone",{enumerable:!0,get:function(){return n.microphone}}),Object.defineProperty(exports,"version_data",{enumerable:!0,get:function(){return o.version}}),Object.defineProperty(exports,"webcam",{enumerable:!0,get:function(){return n.webcam}}),Object.defineProperty(exports,"zip",{enumerable:!0,get:function(){return e.zip}});var e=require("./dataset"),r=require("./datasets/csv_dataset"),t=require("./datasets/text_line_dataset"),n=require("./readers"),a=require("./sources/file_data_source"),u=require("./sources/url_data_source"),o=require("./version");
},{"./dataset":"Ng0F","./datasets/csv_dataset":"HyuO","./datasets/text_line_dataset":"wsvE","./readers":"TH4z","./sources/file_data_source":"uWmO","./sources/url_data_source":"Ucg8","./version":"tO0n"}],"AWt2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertNotComplex=r;var e=require("@tensorflow/tfjs-core");function r(r,t){Array.isArray(r)||(r=[r]),r.forEach(r=>{null!=r&&e.util.assert("complex64"!==r.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}
},{"@tensorflow/tfjs-core":"nPFy"}],"Ku8n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MathBackendCPU=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./cpu_util");const a=e.kernel_impls.whereImpl;class r extends e.KernelBackend{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new e.DataStorage(this,(0,e.engine)())}nextDataId(){return r.nextDataId++}write(t,a,r){this.firstUse&&(this.firstUse=!1,(0,e.env)().get("IS_NODE")&&e.backend_util.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const s={id:this.nextDataId()};return this.data.set(s,{values:t,dtype:r,refCount:1}),s}makeTensorInfo(t,a,r){let s;if("string"===a&&null!=r&&r.length>0&&e.util.isString(r[0])){const n=r.map(t=>e.util.encodeString(t));s=this.write(n,t,a)}else s=this.write(r,t,a);return{dataId:s,shape:t,dtype:a}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,a,r,s){this.data.set(e,{values:t,dtype:r,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(t){const{dtype:a,complexTensorInfos:r}=this.data.get(t);if("complex64"===a){const t=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return e.backend_util.mergeRealAndImagArrays(t,a)}return this.data.get(t).values}bufferSync(t){const a=this.readSync(t.dataId);if("string"===t.dtype)try{const s=a.map(t=>e.util.decodeString(t));return(0,e.buffer)(t.shape,t.dtype,s)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,e.buffer)(t.shape,t.dtype,a)}makeOutput(t,a,r){return(0,e.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(a,r,t),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:a}=this.data.get(e);null!=a&&(this.disposeData(a.real.dataId,!0),this.disposeData(a.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(t){const a=e.util.now();return t(),{kernelMs:e.util.now()-a}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){(0,t.assertNotComplex)([e],"where");const r=this.readSync(e.dataId);return a(e.shape,r)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}exports.MathBackendCPU=r,r.nextDataId=0;
},{"@tensorflow/tfjs-core":"nPFy","./cpu_util":"AWt2"}],"zMOx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absConfig=exports.abs=void 0,exports.simpleAbsImpl=s;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(e){const t=new Float32Array(e.length);for(let s=0;s<e.length;++s)t[s]=Math.abs(e[s]);return t}const r=r=>{const{x:a}=r.inputs,o=r.backend;(0,t.assertNotComplex)(a,"abs");let n=new Float32Array(e.util.sizeFromShape(a.shape));return n=s(o.data.get(a.dataId).values),o.makeOutput(n,a.shape,a.dtype)};exports.abs=r;const a={kernelName:e.Abs,backendName:"cpu",kernelFunc:r};exports.absConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"WxSo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimpleBinaryKernelImpl=t;var e=require("@tensorflow/tfjs-core");function t(t){return(l,r,o,n,i)=>{const c=e.backend_util.assertAndGetBroadcastShape(l,r),s=c.length,u=e.util.computeStrides(c),a=e.util.sizeFromShape(c),d=e.util.getTypedArrayFromDType(i,a),h=l.length,g=r.length,p=e.util.computeStrides(l),f=e.util.computeStrides(r),m=e.backend_util.getBroadcastDims(l,c),S=e.backend_util.getBroadcastDims(r,c);if(m.length+S.length===0)for(let e=0;e<d.length;++e)d[e]=t(o[e%o.length],n[e%n.length]);else for(let x=0;x<d.length;++x){const l=e.util.indexToLoc(x,s,u),r=l.slice(-h);m.forEach(e=>r[e]=0);const i=e.util.locToIndex(r,h,p),c=l.slice(-g);S.forEach(e=>c[e]=0);const a=e.util.locToIndex(c,g,f);d[x]=t(o[i],n[a])}return[d,c]}}
},{"@tensorflow/tfjs-core":"nPFy"}],"du7s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=a,exports.complexConfig=void 0;var e=require("@tensorflow/tfjs-core");function a(e){const{inputs:a,backend:o}=e,{real:t,imag:n}=a,r=o.data.get(t.dataId).values,s=o.data.get(n.dataId).values,l=o.makeTensorInfo(t.shape,"complex64");return o.data.get(l.dataId).complexTensorInfos={real:o.makeTensorInfo(t.shape,"float32",r),imag:o.makeTensorInfo(n.shape,"float32",s)},l}const o={kernelName:e.Complex,backendName:"cpu",kernelFunc:a};exports.complexConfig=o;
},{"@tensorflow/tfjs-core":"nPFy"}],"NggJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=o;var e=require("@tensorflow/tfjs-core"),r=require("../kernels/Complex");function o(t,s,l="float32"){if("complex64"===l){const e=o(t,s,"float32"),l=o(t,s,"float32");return(0,r.complex)({inputs:{real:e,imag:l},backend:t})}const n=e.util.makeZerosTypedArray(e.util.sizeFromShape(s),l);return t.makeTensorInfo(s,l,n)}
},{"@tensorflow/tfjs-core":"nPFy","../kernels/Complex":"du7s"}],"MAl9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:n}=e,{x:d}=t;return n.incRef(d.dataId),{dataId:d.dataId,shape:d.shape,dtype:d.dtype}}const n={kernelName:e.Identity,backendName:"cpu",kernelFunc:t};exports.identityConfig=n;
},{"@tensorflow/tfjs-core":"nPFy"}],"fcv6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=t,exports.realConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:a}=e,{input:r}=t,n=a.data.get(r.dataId).complexTensorInfos.real,o=a.data.get(n.dataId).values;return a.makeTensorInfo(n.shape,n.dtype,o)}const a={kernelName:e.Real,backendName:"cpu",kernelFunc:t};exports.realConfig=a;
},{"@tensorflow/tfjs-core":"nPFy"}],"bZFh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=o,exports.castConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/binary_impl"),r=require("../utils/zeros_impl"),n=require("./Complex"),a=require("./Identity"),s=require("./Real");function o(i){const{inputs:d,backend:p,attrs:u}=i,{x:c}=d,{dtype:l}=u;if("complex64"===l){if("complex64"===c.dtype)return(0,a.identity)({inputs:{x:c},backend:p});const e=(0,r.zeros)(p,c.shape,c.dtype),t=o({inputs:{x:c},backend:p,attrs:{dtype:"float32"}}),s=(0,n.complex)({inputs:{real:t,imag:e},backend:p});return p.disposeIntermediateTensorInfo(e),p.disposeIntermediateTensorInfo(t),s}if("complex64"===c.dtype){const e=(0,s.real)({inputs:{input:c},backend:p}),t=o({inputs:{x:e},backend:p,attrs:{dtype:l}});return p.disposeIntermediateTensorInfo(e),t}if(!e.util.hasEncodingLoss(c.dtype,l)){const e=(0,a.identity)({inputs:{x:c},backend:p});return{dataId:e.dataId,shape:e.shape,dtype:l}}if("int32"===l){const e=p.data.get(c.dataId).values,t=Int32Array.from(e);return p.makeTensorInfo(c.shape,"int32",t)}if("bool"===l){const r=p.data.get(c.dataId).values,n=e.util.toTypedArray([0],c.dtype),[a,s]=(0,t.createSimpleBinaryKernelImpl)((e,t)=>e!==t?1:0)(c.shape,[],r,n,"bool");return p.makeTensorInfo(s,"bool",a)}throw new Error(`Error in Cast: failed to cast ${c.dtype} to ${l}`)}const i={kernelName:e.Cast,backendName:"cpu",kernelFunc:o};exports.castConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/zeros_impl":"NggJ","./Complex":"du7s","./Identity":"MAl9","./Real":"fcv6"}],"GZZZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryKernelFunc=r,exports.createComplexBinaryKernelImpl=o;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("../kernels/Cast"),n=require("../kernels/Complex");function r(r,o,s,d){return null==s?({inputs:a,backend:n})=>{const{a:s,b:l}=a,i=n;(0,t.assertNotComplex)([s,l],r);const c=i.data.get(s.dataId).values,u=i.data.get(l.dataId).values,p="string"===s.dtype?e.backend_util.fromUint8ToStringArray(c):c,m="string"===s.dtype?e.backend_util.fromUint8ToStringArray(u):u,g=d||s.dtype,[I,f]=o(s.shape,l.shape,p,m,g);return i.makeTensorInfo(f,g,I)}:({inputs:e,backend:t})=>{const{a:r,b:l}=e,i=t;if("complex64"===r.dtype||"complex64"===l.dtype){const e=(0,a.cast)({inputs:{x:r},backend:i,attrs:{dtype:"complex64"}}),t=i.data.get(e.dataId),o=t.complexTensorInfos.real,d=t.complexTensorInfos.imag,c=i.data.get(o.dataId).values,u=i.data.get(d.dataId).values,p=(0,a.cast)({inputs:{x:l},backend:i,attrs:{dtype:"complex64"}}),m=i.data.get(p.dataId),g=m.complexTensorInfos.real,I=m.complexTensorInfos.imag,f=i.data.get(g.dataId).values,y=i.data.get(I.dataId).values,[T,x,h]=s(r.shape,l.shape,c,u,f,y),k=i.makeTensorInfo(h,"float32",T),b=i.makeTensorInfo(h,"float32",x),v=(0,n.complex)({inputs:{real:k,imag:b},backend:i});return i.disposeIntermediateTensorInfo(e),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(b),v}{const e=i.data.get(r.dataId).values,t=i.data.get(l.dataId).values,a=d||r.dtype,[n,s]=o(r.shape,l.shape,e,t,a);return i.makeTensorInfo(s,a,n)}}}function o(t){return(a,n,r,o,s,d)=>{const l=e.backend_util.assertAndGetBroadcastShape(a,n),i=e.util.sizeFromShape(l),c=l.length,u=e.util.computeStrides(l),p=e.util.getTypedArrayFromDType("float32",i),m=e.util.getTypedArrayFromDType("float32",i),g=e.backend_util.getBroadcastDims(a,l),I=e.backend_util.getBroadcastDims(n,l),f=e.backend_util.mergeRealAndImagArrays(r,o),y=e.backend_util.mergeRealAndImagArrays(s,d),T=a.length,x=e.util.computeStrides(a),h=n.length,k=e.util.computeStrides(n);if(g.length+I.length===0)for(let e=0;e<p.length;e++){const a=e%f.length,n=e%y.length,r=t(f[2*a],f[2*a+1],y[2*n],y[2*n+1]);p[e]=r.real,m[e]=r.imag}else for(let b=0;b<p.length;b++){const a=e.util.indexToLoc(b,c,u),n=a.slice(-T);g.forEach(e=>n[e]=0);const r=e.util.locToIndex(n,T,x),o=a.slice(-h);I.forEach(e=>o[e]=0);const s=e.util.locToIndex(o,h,k),d=t(f[2*r],f[2*r+1],y[2*s],y[2*s+1]);p[b]=d.real,m[b]=d.imag}return[p,m,l]}}
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../kernels/Cast":"bZFh","../kernels/Complex":"du7s"}],"KMQw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addImpl=exports.addConfig=exports.addComplexImpl=exports.add=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),d=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e+r);exports.addImpl=o;const t=(0,d.createComplexBinaryKernelImpl)((e,r,d,o)=>({real:e+d,imag:r+o}));exports.addComplexImpl=t;const l=(0,d.binaryKernelFunc)(e.Add,o,t);exports.add=l;const a={kernelName:e.Add,backendName:"cpu",kernelFunc:l};exports.addConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"fQVq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincountImpl=t,exports.bincountReduceImpl=r;var e=require("@tensorflow/tfjs-core");function t(t,r,n,o,s){const u=e.util.sizeFromShape(o),i=e.util.makeZerosTypedArray(s,n);for(let e=0;e<t.length;e++){const n=t[e];if(n<0)throw new Error("Input x must be non-negative!");n>=s||(i[n]+=u>0?r[e]:1)}return i}function r(t,r,n,o=!1){const s=t.shape[0],u=t.shape[1],i=(0,e.buffer)([s,n],r.dtype);for(let e=0;e<s;e++)for(let s=0;s<u;s++){const u=t.get(e,s);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(o?i.set(1,e,u):r.size>0?i.set(i.get(e,u)+r.get(e,s),e,u):i.set(i.get(e,u)+1,e,u))}return i}
},{"@tensorflow/tfjs-core":"nPFy"}],"rfSa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimpleUnaryImpl=r;var e=require("@tensorflow/tfjs-core");function r(r){return(t,o,n)=>{const l=e.util.getTypedArrayFromDType(o,t.length);for(let e=0;e<t.length;++e)l[e]=r(t[e],n);return l}}
},{"@tensorflow/tfjs-core":"nPFy"}],"mT3T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryKernelFunc=r,exports.unaryKernelFuncFromImpl=n;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function r(r,n,o){return({inputs:s,attrs:u,backend:a})=>{const{x:p}=s;if((0,e.assertNotComplex)(p,r),"string"===p.dtype||"string"===o)throw new Error("unaryKernelFunc does not support string input/output");const i=a,c=i.data.get(p.dataId).values,d=t.util.sizeFromShape(p.shape),l=o||p.dtype,y=t.util.getArrayFromDType(l,d);for(let t=0;t<d;++t)y[t]=n(c[t],u);return i.makeTensorInfo(p.shape,l,y)}}function n(t,r,n){return({inputs:o,attrs:s,backend:u})=>{const{x:a}=o;if((0,e.assertNotComplex)(a,t),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const p=u,i=p.data.get(a.dataId).values,c=n||a.dtype,d=r(i,c,s);return p.makeTensorInfo(a.shape,c,d)}}
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"MY3Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilImpl=exports.ceilConfig=exports.ceil=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),l=require("../utils/unary_utils");const i=(0,r.createSimpleUnaryImpl)(e=>Math.ceil(e));exports.ceilImpl=i;const t=(0,l.unaryKernelFuncFromImpl)(e.Ceil,i);exports.ceil=t;const o={kernelName:e.Ceil,backendName:"cpu",kernelFunc:t};exports.ceilConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_impl":"rfSa","../utils/unary_utils":"mT3T"}],"NNUH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,s,o){const a=e.util.getArrayFromDType(s,e.util.sizeFromShape(r));if(o&&"string"!==s){let r=0;t.forEach(t=>{const s=e.util.sizeFromShape(t.shape);a.set(t.vals,r),r+=s})}else{let o=0;t.forEach(t=>{const l="string"===s?e.backend_util.fromUint8ToStringArray(t.vals):t.vals;let i=0;for(let e=0;e<t.shape[0];++e){const s=e*r[1]+o;for(let e=0;e<t.shape[1];++e)a[s+e]=l[i++]}o+=t.shape[1]})}return a}
},{"@tensorflow/tfjs-core":"nPFy"}],"rTJm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalImpl=exports.equalConfig=exports.equal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),l=require("../utils/binary_utils");const u=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e===r?1:0);exports.equalImpl=u;const o=(0,l.binaryKernelFunc)(e.Equal,u,null,"bool");exports.equal=o;const t={kernelName:e.Equal,backendName:"cpu",kernelFunc:o};exports.equalConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"Z9b0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expImpl=exports.expConfig=exports.exp=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),p=require("../utils/unary_utils");const t=(0,r.createSimpleUnaryImpl)(e=>Math.exp(e));exports.expImpl=t;const o=(0,p.unaryKernelFuncFromImpl)(e.Exp,t,"float32");exports.exp=o;const s={kernelName:e.Exp,backendName:"cpu",kernelFunc:o};exports.expConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_impl":"rfSa","../utils/unary_utils":"mT3T"}],"EhVx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Impl=exports.expm1Config=exports.expm1=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),p=require("../utils/unary_utils");const t=(0,r.createSimpleUnaryImpl)(e=>Math.expm1(e));exports.expm1Impl=t;const o=(0,p.unaryKernelFuncFromImpl)(e.Expm1,t);exports.expm1=o;const m={kernelName:e.Expm1,backendName:"cpu",kernelFunc:o};exports.expm1Config=m;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_impl":"rfSa","../utils/unary_utils":"mT3T"}],"SlXE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorImpl=exports.floorConfig=exports.floor=void 0;var o=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),e=require("../utils/unary_utils");const l=(0,r.createSimpleUnaryImpl)(o=>Math.floor(o));exports.floorImpl=l;const t=(0,e.unaryKernelFuncFromImpl)(o.Floor,l);exports.floor=t;const s={kernelName:o.Floor,backendName:"cpu",kernelFunc:t};exports.floorConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_impl":"rfSa","../utils/unary_utils":"mT3T"}],"ip0J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherNdImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,o,r,n,s,i,f,l,c){const u=(0,e.buffer)([n,i],r);for(let e=0;e<n;e++){const r=[];let n=0;for(let o=0;o<s;o++){const i=t[e*s+o];n+=i*f[o],r.push(i)}if(n<0||n>=c/i)throw new Error(`Invalid indices: ${r} does not index into ${l}`);for(let t=0;t<i;t++)u.values[e*i+t]=o.get(...o.indexToLoc(n*i+t))}return u}
},{"@tensorflow/tfjs-core":"nPFy"}],"UlYr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2Impl=o;var e=require("@tensorflow/tfjs-core");function o(o,t,s){const r=(0,e.buffer)(s,o.dtype);for(let e=0;e<r.size;++e){const s=r.indexToLoc(e).slice(),l=s[0],n=s[2],c=t.locToIndex([l,n]);s[2]=t.values[c];const u=o.locToIndex(s);0<=u&&u<o.values.length&&(r.values[e]=o.values[u])}return r}
},{"@tensorflow/tfjs-core":"nPFy"}],"tUQk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterImpl=exports.greaterConfig=exports.greater=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),t=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e>r?1:0);exports.greaterImpl=o;const n=(0,t.binaryKernelFunc)(e.Greater,o,null,"bool");exports.greater=n;const a={kernelName:e.Greater,backendName:"cpu",kernelFunc:n};exports.greaterConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"jatl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualImpl=exports.greaterEqualConfig=exports.greaterEqual=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),t=require("../utils/binary_utils");const a=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e>=r?1:0);exports.greaterEqualImpl=a;const l=(0,t.binaryKernelFunc)(e.GreaterEqual,a,null,"bool");exports.greaterEqual=l;const u={kernelName:e.GreaterEqual,backendName:"cpu",kernelFunc:l};exports.greaterEqualConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"U0J5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessImpl=exports.lessConfig=exports.less=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/binary_impl"),r=require("../utils/binary_utils");const l=(0,s.createSimpleBinaryKernelImpl)((e,s)=>e<s?1:0);exports.lessImpl=l;const o=(0,r.binaryKernelFunc)(e.Less,l,null,"bool");exports.less=o;const t={kernelName:e.Less,backendName:"cpu",kernelFunc:o};exports.lessConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"t9BB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqualImpl=exports.lessEqualConfig=exports.lessEqual=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/binary_impl"),l=require("../utils/binary_utils");const r=(0,s.createSimpleBinaryKernelImpl)((e,s)=>e<=s?1:0);exports.lessEqualImpl=r;const u=(0,l.binaryKernelFunc)(e.LessEqual,r,null,"bool");exports.lessEqual=u;const o={kernelName:e.LessEqual,backendName:"cpu",kernelFunc:u};exports.lessEqualConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"l60F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linSpaceImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,o){const l=(t-r)/(o-1),s=e.util.makeZerosTypedArray(o,"float32");s[0]=r;for(let e=1;e<s.length;e++)s[e]=s[e-1]+l;return s}
},{"@tensorflow/tfjs-core":"nPFy"}],"D4z7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logImpl=exports.logConfig=exports.log=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_impl"),r=require("../utils/unary_utils");const l=(0,o.createSimpleUnaryImpl)(e=>Math.log(e));exports.logImpl=l;const t=(0,r.unaryKernelFuncFromImpl)(e.Log,l);exports.log=t;const s={kernelName:e.Log,backendName:"cpu",kernelFunc:t};exports.logConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_impl":"rfSa","../utils/unary_utils":"mT3T"}],"L8WG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s){const l=e.util.getTypedArrayFromDType(s,e.util.sizeFromShape(o));for(let e=0;e<l.length;++e){const o=e*r;let s=t[o];for(let e=0;e<r;++e){const r=t[o+e];(Number.isNaN(r)||r>s)&&(s=r)}l[e]=s}return l}
},{"@tensorflow/tfjs-core":"nPFy"}],"I2nX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumImpl=exports.maximumConfig=exports.maximum=void 0;var e=require("@tensorflow/tfjs-core"),m=require("../utils/binary_impl"),r=require("../utils/binary_utils");const i=(0,m.createSimpleBinaryKernelImpl)((e,m)=>Math.max(e,m));exports.maximumImpl=i;const t=(0,r.binaryKernelFunc)(e.Maximum,i);exports.maximum=t;const a={kernelName:e.Maximum,backendName:"cpu",kernelFunc:t};exports.maximumConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"omVI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumImpl=exports.minimumConfig=exports.minimum=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/binary_impl"),m=require("../utils/binary_utils");const r=(0,i.createSimpleBinaryKernelImpl)((e,i)=>Math.min(e,i));exports.minimumImpl=r;const n=(0,m.binaryKernelFunc)(e.Minimum,r);exports.minimum=n;const t={kernelName:e.Minimum,backendName:"cpu",kernelFunc:n};exports.minimumConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"V7WM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyImpl=exports.multiplyConfig=exports.multiplyComplexImpl=exports.multiply=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/binary_impl"),r=require("../utils/binary_utils");const t=(0,l.createSimpleBinaryKernelImpl)((e,l)=>e*l);exports.multiplyImpl=t;const p=(0,r.createComplexBinaryKernelImpl)((e,l,r,t)=>({real:e*r-l*t,imag:e*t+l*r}));exports.multiplyComplexImpl=p;const i=(0,r.binaryKernelFunc)(e.Multiply,t,p);exports.multiply=i;const o={kernelName:e.Multiply,backendName:"cpu",kernelFunc:i};exports.multiplyConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"FtXF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=o,exports.negConfig=void 0,exports.negImpl=r;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),n=require("./Multiply");function r(t,r,o){const s=e.util.createScalarValue(-1,o);return(0,n.multiplyImpl)([],r,s,t,o)}function o(e){const{inputs:n,backend:o}=e,{x:s}=n;(0,t.assertNotComplex)(s,"neg");const u=o.data.get(s.dataId).values,[a,l]=r(u,s.shape,s.dtype);return o.makeTensorInfo(l,s.dtype,a)}const s={kernelName:e.Neg,backendName:"cpu",kernelFunc:o};exports.negConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Multiply":"V7WM"}],"WkOI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualImpl=exports.notEqualConfig=exports.notEqual=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/binary_impl"),r=require("../utils/binary_utils");const t=(0,o.createSimpleBinaryKernelImpl)((e,o)=>e!==o?1:0);exports.notEqualImpl=t;const l=(0,r.binaryKernelFunc)(e.NotEqual,t,null,"bool");exports.notEqual=l;const n={kernelName:e.NotEqual,backendName:"cpu",kernelFunc:l};exports.notEqualConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"ExvY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,l,i){const s=r.length,u=e.util.sizeFromShape(r),n=e.util.computeStrides(r),p=e.util.computeStrides(i),c=e.util.getTypedArrayFromDType(o,e.util.sizeFromShape(i));for(let a=0;a<u;++a){const r=e.util.indexToLoc(a,s,n),o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[l[e]];c[e.util.locToIndex(o,s,p)]=t[a]}return c}
},{"@tensorflow/tfjs-core":"nPFy"}],"WjPF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=r,exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose_impl");function r(e){const{inputs:r,attrs:a,backend:n}=e,{x:o}=r,{perm:p}=a;(0,t.assertNotComplex)(o,"transpose");const d=o.shape.length,u=new Array(d);for(let t=0;t<u.length;t++)u[t]=o.shape[p[t]];const c=n.data.get(o.dataId).values,i=(0,s.transposeImpl)(c,o.shape,o.dtype,p,u);return{dataId:n.write(i,u,o.dtype),shape:u,dtype:o.dtype}}const a={kernelName:e.Transpose,backendName:"cpu",kernelFunc:r};exports.transposeConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Transpose_impl":"ExvY"}],"zD2R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=s,exports.prodConfig=void 0,exports.prodImpl=r;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("./Transpose");function r(t,o,r,s){const[n,a]=e.backend_util.computeOutAndReduceShapes(t,s),p=(0,e.upcastType)(o,"int32"),u=e.util.makeZerosTypedArray(e.util.sizeFromShape(n),p),i=e.util.sizeFromShape(a);for(let e=0;e<u.length;++e){const t=e*i;let o=1;for(let e=0;e<i;++e)o*=r[t+e];u[e]=o}return{outVals:u,outShape:n,outDtype:p}}function s(s){const{inputs:n,backend:a,attrs:p}=s,{x:u}=n,{axis:i,keepDims:l}=p;(0,t.assertNotComplex)(u,"prod");const c=u.shape.length,d=e.util.parseAxisParam(i,u.shape),m=e.backend_util.getAxesPermutation(d,c);let h=d,x=u;const f=[];null!=m&&(x=(0,o.transpose)({inputs:{x:u},backend:a,attrs:{perm:m}}),f.push(x),h=e.backend_util.getInnerMostAxes(h.length,c));const k=a.data.get(x.dataId).values,{outVals:b,outShape:g,outDtype:y}=r(x.shape,x.dtype,k,h);let _=g;return l&&(_=e.backend_util.expandShapeToKeepDim(g,d)),f.forEach(e=>a.disposeIntermediateTensorInfo(e)),a.makeTensorInfo(_,y,b)}const n={kernelName:e.Prod,backendName:"cpu",kernelFunc:s};exports.prodConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Transpose":"WjPF"}],"zrp9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,o,s){if(r===t||r<t&&o<0||t<r&&o>1)return e.util.makeZerosTypedArray(0,s);const a=Math.abs(Math.ceil((t-r)/o)),l=e.util.makeZerosTypedArray(a,s);t<r&&1===o&&(o=-1),l[0]=r;for(let e=1;e<l.length;e++)l[e]=l[e-1]+o;return l}
},{"@tensorflow/tfjs-core":"nPFy"}],"I735":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtImpl=exports.rsqrtConfig=exports.rsqrt=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../utils/unary_impl"),t=require("../utils/unary_utils");const s=(0,e.createSimpleUnaryImpl)(r=>1/Math.sqrt(r));exports.rsqrtImpl=s;const o=(0,t.unaryKernelFuncFromImpl)(r.Rsqrt,s);exports.rsqrt=o;const n={kernelName:r.Rsqrt,backendName:"cpu",kernelFunc:o};exports.rsqrtConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_impl":"rfSa","../utils/unary_utils":"mT3T"}],"LcM1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,l,s,n,f,u,i,a){const c=[l/s,s],p=t.values,v=r.values;if(0===l)return(0,e.buffer)(o,r.dtype);const d=(0,e.buffer)(c,r.dtype);"string"==typeof i?d.values.fill(i):"number"==typeof i?d.values.fill(i):"boolean"==typeof i&&d.values.fill(+i);for(let e=0;e<n;e++){const t=[];let n=0;for(let r=0;r<f;r++){const o=p[e*f+r];t.push(o),n+=o*u[r]}if(n<0||n>=l/s)throw new Error(`Invalid indices: ${t} does not index into ${o}`);for(let o=0;o<s;o++)a?d.values[n*s+o]+=v[e*s+o]:d.values[n*s+o]=0===r.rank?v[0]:v[e*s+o]}return d}
},{"@tensorflow/tfjs-core":"nPFy"}],"dqzS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidImpl=exports.sigmoidConfig=exports.sigmoid=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/unary_impl"),r=require("../utils/unary_utils");const o=(0,i.createSimpleUnaryImpl)(e=>1/(1+Math.exp(-e)));exports.sigmoidImpl=o;const s=(0,r.unaryKernelFunc)(e.Sigmoid,e=>1/(1+Math.exp(-e)));exports.sigmoid=s;const t={kernelName:e.Sigmoid,backendName:"cpu",kernelFunc:s};exports.sigmoidConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_impl":"rfSa","../utils/unary_utils":"mT3T"}],"moln":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=i,exports.sliceConfig=void 0,exports.sliceImpl=s;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(t,s,i,r,n){const o=e.slice_util.isSliceContinous(r,s,i),c=e.util.sizeFromShape(i),l=e.util.computeStrides(r);if(o){const i=e.slice_util.computeFlatOffset(s,l);return"string"===n?t.slice(i,i+c):t.subarray(i,i+c)}const a="string"===n?e.backend_util.fromUint8ToStringArray(t):t,u=(0,e.buffer)(r,n,a),p=(0,e.buffer)(i,n);for(let e=0;e<p.size;++e){const t=p.indexToLoc(e),i=t.map((e,t)=>e+s[t]);p.set(u.get(...i),...t)}return"string"===n?e.backend_util.fromStringArrayToUint8(p.values):p.values}function i(i){const{inputs:r,backend:n,attrs:o}=i,{x:c}=r,{begin:l,size:a}=o;(0,t.assertNotComplex)(c,"slice");const[u,p]=e.slice_util.parseSliceParams(c,l,a);e.slice_util.assertParamsValid(c,u,p);const f=s(n.data.get(c.dataId).values,u,p,c.shape,c.dtype);return n.makeTensorInfo(p,c.dtype,f)}const r={kernelName:e.Slice,backendName:"cpu",kernelFunc:i};exports.sliceConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"AbzN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseFillEmptyRowsImpl=e;var r=require("@tensorflow/tfjs-core");function e(e,t,o,l,s,n,i){const a=t[0],f=n[0],c=new Array(f),p=new Array(a),y=t[1];if(0===f){if(0!==a)throw new Error(r.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));return[r.util.getArrayFromDType(o,0),[0,y],r.util.getArrayFromDType(s,0),c,p]}let u=!0,w=0;const g=new Array(f).fill(0);for(let E=0;E<a;++E){const t=e[E*y];if(t<0)throw new Error(r.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(E,t));if(t>=f)throw new Error(r.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(E,t,f));++g[t],u=u&&t>=w,w=t}let m=!0;for(let r=0;r<f;++r){const e=0===g[r];c[r]=e,m=m&&!e,g[r]=Math.max(g[r],1),r>0&&(g[r]+=g[r-1])}if(m&&u){const r=e,t=l;for(let e=0;e<a;++e)p[e]=e;return[r,[a,y],t,c,p]}{const t=g[f-1],n=r.util.getArrayFromDType(o,t*y),u=r.util.getArrayFromDType(s,t),w=new Array(f).fill(0);for(let r=0;r<a;++r){const t=e[r*y],o=w[t],s=(0===t?0:g[t-1])+o;w[t]++;for(let l=0;l<y;++l)n[s*y+l]=e[r*y+l];u[s]=l[r],p[r]=s}for(let r=0;r<f;++r){if(0===w[r]){const e=0===r?0:g[r-1];n[e*y+0]=r;for(let r=1;r<y;++r)n[e*y+r]=0;u[e]=i}}return[n,[t,y],u,c,p]}}
},{"@tensorflow/tfjs-core":"nPFy"}],"o2RF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseReshapeImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,s,o,a){const u=e.util.sizeFromShape(o),i=t[0],p=a.length,n=[];let l=1,h=-1;for(let E=0;E<p;++E){const r=a[E];if(-1===r){if(-1!==h)throw new Error(e.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(h,E));h=E,n.push(1)}else{if(r<0)throw new Error(e.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(E,r));l*=r,n.push(r)}}if(-1!==h){if(l<=0)throw new Error(e.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const r=Math.trunc(u/l);if(l*r!==u)throw new Error(e.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(o,n));n[h]=r}if(e.util.sizeFromShape(n)!==u)throw new Error(e.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(o,n));const f=o.length,c=[];if(f>0){c[f-1]=1;for(let e=f-2;e>=0;--e)c[e]=c[e+1]*o[e+1]}const g=[];if(p>0){g[p-1]=1;for(let e=p-2;e>=0;--e)g[e]=g[e+1]*n[e+1]}const w=e.util.getArrayFromDType(s,i*p);for(let e=0;e<i;++e){let t=0;for(let s=0;s<f;++s)t+=r[e*f+s]*c[s];for(let r=0;r<p;++r)w[e*p+r]=Math.trunc(t/g[r]),t%=g[r]}return[w,[i,p],n]}
},{"@tensorflow/tfjs-core":"nPFy"}],"HayZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentReductionImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t,n,o,i,s=!1,g=0){const a=o.length,c=[t[0],r.length/t[0]],l=c[1],f=a>0?i[a-1]+1:0;if(f<0)throw new Error(e.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const u=t.slice();u[0]=f;const d=u.reduce((e,r)=>e*r,1),S=e.util.getArrayFromDType(n,d);if(0===a)return f>0&&S.fill(g),[S,u];if(f<=0)throw new Error(e.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,p=1,w=0,E=i[m];for(;;){let t=0;if(p<a){if(E===(t=i[p])){++p;continue}if(E>=t)throw new Error(e.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(E<0||E>=f)throw new Error(e.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(E,f));E>w&&S.fill(g,w*l,E*l);for(let n=m;n<p;++n){const t=o[n];if(t<0||t>=c[0])throw new Error(e.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(n,o[n],c[0]));for(let e=0;e<l;e++)S[E*l+e]+=r[t*l+e]}if(s)for(let e=0;e<l;e++)S[E*l+e]/=p-m;if(m=p,w=E+1,E=t,++p>a)break}return w<f&&S.fill(g,w*l,f*l),[S,u]}
},{"@tensorflow/tfjs-core":"nPFy"}],"utBR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtImpl=exports.sqrtConfig=exports.sqrt=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../utils/unary_impl"),t=require("../utils/unary_utils");const s=(0,e.createSimpleUnaryImpl)(r=>Math.sqrt(r));exports.sqrtImpl=s;const o=(0,t.unaryKernelFunc)(r.Sqrt,r=>Math.sqrt(r));exports.sqrt=o;const n={kernelName:r.Sqrt,backendName:"cpu",kernelFunc:o};exports.sqrtConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_impl":"rfSa","../utils/unary_utils":"mT3T"}],"qlEh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceImpl=exports.squaredDifferenceConfig=exports.squaredDifference=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),n=require("../utils/binary_utils");const i=(0,r.createSimpleBinaryKernelImpl)((e,r)=>{const n=e-r;return n*n});exports.squaredDifferenceImpl=i;const s=(0,n.binaryKernelFunc)(e.SquaredDifference,i);exports.squaredDifference=s;const t={kernelName:e.SquaredDifference,backendName:"cpu",kernelFunc:s};exports.squaredDifferenceConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"L2EX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSliceImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s){const n=(0,e.buffer)(t,r.dtype);for(let e=0;e<n.size;e++){const t=n.indexToLoc(e),l=new Array(t.length);for(let e=0;e<l.length;e++)l[e]=t[e]*o[e]+s[e];n.set(r.get(...l),...t)}return n}
},{"@tensorflow/tfjs-core":"nPFy"}],"KhQU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringNGramsImpl=r;var t=require("@tensorflow/tfjs-core");class e{constructor(e,r,s,i,a,h){this.separator=t.util.encodeString(e),this.nGramWidths=r,this.leftPad=t.util.encodeString(s),this.rightPad=t.util.encodeString(i),this.padWidth=a,this.preserveShort=h}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const r=this.getPadWidth(e);return Math.max(0,t+2*r-e+1)}createNGrams(t,e,r,s,i,a){for(let h=0;h<i;++h){const o=this.getPadWidth(a),n=Math.max(0,o-h),l=Math.max(0,o-(i-(h+1))),c=a-(n+l),d=e+(n>0?0:h-o);let f=0;f+=n*this.leftPad.length;for(let e=0;e<c;++e)f+=t[d+e].length;f+=l*this.rightPad.length,f+=(n+l+c-1)*this.separator.length,r[s+h]=new Uint8Array(f);const u=r[s+h];let g=0;const m=t=>t.forEach(t=>u[g++]=t);for(let t=0;t<n;++t)m(this.leftPad),m(this.separator);for(let e=0;e<c-1;++e)m(t[d+e]),m(this.separator);if(c>0){m(t[d+c-1]);for(let t=0;t<l;++t)m(this.separator),m(this.rightPad)}else{for(let t=0;t<l-1;++t)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,r){const s=e.length,i=r.length;if(i>0){let t=r[0];if(0!==t)throw new Error(`First split value must be 0, got ${t}`);for(let e=1;e<i;++e){let i=r[e]>=t;if(!(i=i&&r[e]<=s))throw new Error(`Invalid split value ${r[e]}, must be in [${t}, ${s}]`);t=r[e]}if(t!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${t}`)}const a=i-1,h=t.util.getArrayFromDType("int32",i);if(0===s||0===i){const t=new Array(s);for(let e=0;e<=a;++e)h[e]=0;return[t,h]}h[0]=0;for(let t=1;t<=a;++t){const e=r[t]-r[t-1];let s=0;this.nGramWidths.forEach(t=>{s+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===s&&(s=1),h[t]=h[t-1]+s}const o=new Array(h[a]);for(let t=0;t<a;++t){const s=r[t];let i=h[t];if(this.nGramWidths.forEach(a=>{const h=r[t+1]-r[t],n=this.getNumNGrams(h,a);this.createNGrams(e,s,o,i,n,a),i+=n}),this.preserveShort&&i===h[t]){const a=r[t+1]-r[t];if(0===a)continue;const h=a+2*this.padWidth,n=1;this.createNGrams(e,s,o,i,n,h)}}return[o,h]}}function r(t,r,s,i,a,h,o,n){return new e(s,i,a,h,o,n).compute(t,r)}
},{"@tensorflow/tfjs-core":"nPFy"}],"RAXd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringSplitImpl=r;var t=require("@tensorflow/tfjs-core");function e(t,e,r,n){if(!t.length)return;if(0===e.length){for(let e=0;e<t.length;++e)n.push(t.subarray(e,e+1));return}if(1===e.length){const l=e[0];let o=t.indexOf(l);for(;-1!==o;){const e=t.subarray(0,o);r&&0===e.length||n.push(e),o=(t=t.subarray(o+1)).indexOf(l)}return void(r&&0===t.length||n.push(t))}let l=0;for(let o=0;o<t.length+1;o++)if(o===t.length||-1!==e.indexOf(t[o])){const e=t.subarray(l,o);r&&0===e.length||n.push(e),l=o+1}}function r(r,n,l){const o=r.length,s=[];let u=0,f=0;const h=new Array(o);for(let t=0;t<o;++t){const o=s.length;e(r[t],n,l,s);const i=s.length-o;h[t]=i,u+=i,f=Math.max(f,i)}const i=t.util.getArrayFromDType("int32",2*u),a=new Array(u),g=[o,f];let c=0;for(let t=0;t<o;++t)for(let e=0;e<h[t];++e)i[2*c]=t,i[2*c+1]=e,a[c]=s[c],++c;return[i,a,g]}
},{"@tensorflow/tfjs-core":"nPFy"}],"NL6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringToHashBucketFastImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r){const o=e.util.getArrayFromDType("int32",t.length);for(let n=0;n<t.length;++n)o[n]=e.util.fingerPrint64(t[n]).modulo(r).getLowBitsUnsigned();return o}
},{"@tensorflow/tfjs-core":"nPFy"}],"VFZK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subImpl=exports.subConfig=exports.subComplexImpl=exports.sub=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),s=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e-r);exports.subImpl=o;const t=(0,s.createComplexBinaryKernelImpl)((e,r,s,o)=>({real:e-s,imag:r-o}));exports.subComplexImpl=t;const l=(0,s.binaryKernelFunc)(e.Sub,o,t);exports.sub=l;const p={kernelName:e.Sub,backendName:"cpu",kernelFunc:l};exports.subConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"DYEi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tileImpl=r;var e=require("@tensorflow/tfjs-core");function r(r,t){const o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=r.shape[e]*t[e];const n=(0,e.buffer)(o,r.dtype);for(let e=0;e<n.values.length;++e){const t=n.indexToLoc(e),o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=t[e]%r.shape[e];const s=r.locToIndex(o);n.values[e]=r.values[s]}return n}
},{"@tensorflow/tfjs-core":"nPFy"}],"ekKr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topKImpl=o;var t=require("@tensorflow/tfjs-core");const e=(t,e)=>{const r=e.value-t.value;return 0===r?t.index-e.index:r};function r(o,n,a=0,l=o.length-1){for(;l>a;){if(l-a>600){const t=l-a+1,e=n-a+1,s=Math.log(t),u=.5*Math.exp(2*s/3),i=.5*Math.sqrt(s*u*(t-u)/t)*Math.sign(e-t/2);r(o,n,Math.max(a,Math.floor(n-e*u/t+i)),Math.min(l,Math.floor(n+(t-e)*u/t+i)))}const s=o[n];let u=a,i=l;for(t.util.swap(o,a,n),e(o[l],s)>0&&t.util.swap(o,a,l);u<i;){for(t.util.swap(o,u,i),u++,i--;e(o[u],s)<0;)u+=1;for(;e(o[i],s)>0;)i-=1}0===e(o[a],s)?t.util.swap(o,a,i):(i+=1,t.util.swap(o,i,l)),i<=n&&(a=i+1),n<=i&&(l=i-1)}}function o(o,n,a,l,s){const u=n[n.length-1],[i,f]=[o.length/u,u],c=t.util.getTypedArrayFromDType(a,i*l),h=t.util.getTypedArrayFromDType("int32",i*l);for(let t=0;t<i;t++){const n=t*f,a=o.subarray(n,n+f);let u=new Array(a.length);a.forEach((t,e)=>u[e]={value:t,index:e}),l<u.length&&(r(u,l),u=u.slice(0,l)),s&&u.sort(e);const i=t*l,p=c.subarray(i,i+l),y=h.subarray(i,i+l);for(let t=0;t<l;t++)p[t]=u[t].value,y[t]=u[t].index}const p=n.slice();return p[p.length-1]=l,[(0,t.buffer)(p,a,c),(0,t.buffer)(p,"int32",h)]}
},{"@tensorflow/tfjs-core":"nPFy"}],"AdAg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uniqueImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,o,s,r){const n=e.util.parseAxisParam(o,s)[0],l=[1,s[0],1];for(let e=0;e<n;e++)l[0]*=s[e];l[1]=s[n];for(let e=n+1;e<s.length;e++)l[2]*=s[e];const u={},f=new Int32Array(s[n]),c=new e.TensorBuffer(l,r,t),i=[],a=1===l[0]&&1===l[2];for(let e=0;e<s[n];e++){let o;if(a)o=t[e].toString();else{const t=[];for(let o=0;o<l[0];o++)for(let s=0;s<l[2];s++)t.push(c.get(o,e,s));o=t.join(",")}if(void 0!==u[o])f[e]=u[o];else{const t=Object.keys(u).length;u[o]=t,f[e]=t,i.push(e)}}const p=l.slice();p[1]=Object.keys(u).length;const h=new e.TensorBuffer(p,r);i.forEach((e,t)=>{for(let o=0;o<l[0];o++)for(let s=0;s<l[2];s++)h.set(c.get(o,e,s),o,t,s)});const g=s.slice();return g[n]=p[1],{outputValues:h.values,outputShape:g,indices:f}}
},{"@tensorflow/tfjs-core":"nPFy"}],"ms57":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"addImpl",{enumerable:!0,get:function(){return r.addImpl}}),Object.defineProperty(exports,"bincountImpl",{enumerable:!0,get:function(){return t.bincountImpl}}),Object.defineProperty(exports,"bincountReduceImpl",{enumerable:!0,get:function(){return t.bincountReduceImpl}}),Object.defineProperty(exports,"ceilImpl",{enumerable:!0,get:function(){return n.ceilImpl}}),Object.defineProperty(exports,"concatImpl",{enumerable:!0,get:function(){return l.concatImpl}}),Object.defineProperty(exports,"equalImpl",{enumerable:!0,get:function(){return p.equalImpl}}),Object.defineProperty(exports,"expImpl",{enumerable:!0,get:function(){return u.expImpl}}),Object.defineProperty(exports,"expm1Impl",{enumerable:!0,get:function(){return i.expm1Impl}}),Object.defineProperty(exports,"floorImpl",{enumerable:!0,get:function(){return m.floorImpl}}),Object.defineProperty(exports,"gatherNdImpl",{enumerable:!0,get:function(){return o.gatherNdImpl}}),Object.defineProperty(exports,"gatherV2Impl",{enumerable:!0,get:function(){return s.gatherV2Impl}}),Object.defineProperty(exports,"greaterEqualImpl",{enumerable:!0,get:function(){return a.greaterEqualImpl}}),Object.defineProperty(exports,"greaterImpl",{enumerable:!0,get:function(){return c.greaterImpl}}),Object.defineProperty(exports,"lessEqualImpl",{enumerable:!0,get:function(){return f.lessEqualImpl}}),Object.defineProperty(exports,"lessImpl",{enumerable:!0,get:function(){return b.lessImpl}}),Object.defineProperty(exports,"linSpaceImpl",{enumerable:!0,get:function(){return I.linSpaceImpl}}),Object.defineProperty(exports,"logImpl",{enumerable:!0,get:function(){return g.logImpl}}),Object.defineProperty(exports,"maxImpl",{enumerable:!0,get:function(){return d.maxImpl}}),Object.defineProperty(exports,"maximumImpl",{enumerable:!0,get:function(){return q.maximumImpl}}),Object.defineProperty(exports,"minimumImpl",{enumerable:!0,get:function(){return x.minimumImpl}}),Object.defineProperty(exports,"multiplyImpl",{enumerable:!0,get:function(){return y.multiplyImpl}}),Object.defineProperty(exports,"negImpl",{enumerable:!0,get:function(){return k.negImpl}}),Object.defineProperty(exports,"notEqualImpl",{enumerable:!0,get:function(){return P.notEqualImpl}}),Object.defineProperty(exports,"prodImpl",{enumerable:!0,get:function(){return j.prodImpl}}),Object.defineProperty(exports,"rangeImpl",{enumerable:!0,get:function(){return O.rangeImpl}}),Object.defineProperty(exports,"rsqrtImpl",{enumerable:!0,get:function(){return S.rsqrtImpl}}),Object.defineProperty(exports,"scatterImpl",{enumerable:!0,get:function(){return _.scatterImpl}}),Object.defineProperty(exports,"sigmoidImpl",{enumerable:!0,get:function(){return E.sigmoidImpl}}),Object.defineProperty(exports,"simpleAbsImpl",{enumerable:!0,get:function(){return e.simpleAbsImpl}}),Object.defineProperty(exports,"sliceImpl",{enumerable:!0,get:function(){return R.sliceImpl}}),Object.defineProperty(exports,"sparseFillEmptyRowsImpl",{enumerable:!0,get:function(){return h.sparseFillEmptyRowsImpl}}),Object.defineProperty(exports,"sparseReshapeImpl",{enumerable:!0,get:function(){return N.sparseReshapeImpl}}),Object.defineProperty(exports,"sparseSegmentReductionImpl",{enumerable:!0,get:function(){return F.sparseSegmentReductionImpl}}),Object.defineProperty(exports,"sqrtImpl",{enumerable:!0,get:function(){return G.sqrtImpl}}),Object.defineProperty(exports,"squaredDifferenceImpl",{enumerable:!0,get:function(){return T.squaredDifferenceImpl}}),Object.defineProperty(exports,"stridedSliceImpl",{enumerable:!0,get:function(){return M.stridedSliceImpl}}),Object.defineProperty(exports,"stringNGramsImpl",{enumerable:!0,get:function(){return A.stringNGramsImpl}}),Object.defineProperty(exports,"stringSplitImpl",{enumerable:!0,get:function(){return B.stringSplitImpl}}),Object.defineProperty(exports,"stringToHashBucketFastImpl",{enumerable:!0,get:function(){return L.stringToHashBucketFastImpl}}),Object.defineProperty(exports,"subImpl",{enumerable:!0,get:function(){return w.subImpl}}),Object.defineProperty(exports,"tileImpl",{enumerable:!0,get:function(){return D.tileImpl}}),Object.defineProperty(exports,"topKImpl",{enumerable:!0,get:function(){return H.topKImpl}}),Object.defineProperty(exports,"transposeImpl",{enumerable:!0,get:function(){return K.transposeImpl}}),Object.defineProperty(exports,"uniqueImpl",{enumerable:!0,get:function(){return V.uniqueImpl}});var e=require("./kernels/Abs"),r=require("./kernels/Add"),t=require("./kernels/Bincount_impl"),n=require("./kernels/Ceil"),l=require("./kernels/Concat_impl"),p=require("./kernels/Equal"),u=require("./kernels/Exp"),i=require("./kernels/Expm1"),m=require("./kernels/Floor"),o=require("./kernels/GatherNd_Impl"),s=require("./kernels/GatherV2_impl"),c=require("./kernels/Greater"),a=require("./kernels/GreaterEqual"),b=require("./kernels/Less"),f=require("./kernels/LessEqual"),I=require("./kernels/LinSpace_impl"),g=require("./kernels/Log"),d=require("./kernels/Max_impl"),q=require("./kernels/Maximum"),x=require("./kernels/Minimum"),y=require("./kernels/Multiply"),k=require("./kernels/Neg"),P=require("./kernels/NotEqual"),j=require("./kernels/Prod"),O=require("./kernels/Range_impl"),S=require("./kernels/Rsqrt"),_=require("./kernels/Scatter_impl"),E=require("./kernels/Sigmoid"),R=require("./kernels/Slice"),h=require("./kernels/SparseFillEmptyRows_impl"),N=require("./kernels/SparseReshape_impl"),F=require("./kernels/SparseSegmentReduction_impl"),G=require("./kernels/Sqrt"),T=require("./kernels/SquaredDifference"),M=require("./kernels/StridedSlice_impl"),A=require("./kernels/StringNGrams_impl"),B=require("./kernels/StringSplit_impl"),L=require("./kernels/StringToHashBucketFast_impl"),w=require("./kernels/Sub"),D=require("./kernels/Tile_impl"),H=require("./kernels/TopK_impl"),K=require("./kernels/Transpose_impl"),V=require("./kernels/Unique_impl");
},{"./kernels/Abs":"zMOx","./kernels/Add":"KMQw","./kernels/Bincount_impl":"fQVq","./kernels/Ceil":"MY3Y","./kernels/Concat_impl":"NNUH","./kernels/Equal":"rTJm","./kernels/Exp":"Z9b0","./kernels/Expm1":"EhVx","./kernels/Floor":"SlXE","./kernels/GatherNd_Impl":"ip0J","./kernels/GatherV2_impl":"UlYr","./kernels/Greater":"tUQk","./kernels/GreaterEqual":"jatl","./kernels/Less":"U0J5","./kernels/LessEqual":"t9BB","./kernels/LinSpace_impl":"l60F","./kernels/Log":"D4z7","./kernels/Max_impl":"L8WG","./kernels/Maximum":"I2nX","./kernels/Minimum":"omVI","./kernels/Multiply":"V7WM","./kernels/Neg":"FtXF","./kernels/NotEqual":"WkOI","./kernels/Prod":"zD2R","./kernels/Range_impl":"zrp9","./kernels/Rsqrt":"I735","./kernels/Scatter_impl":"LcM1","./kernels/Sigmoid":"dqzS","./kernels/Slice":"moln","./kernels/SparseFillEmptyRows_impl":"AbzN","./kernels/SparseReshape_impl":"o2RF","./kernels/SparseSegmentReduction_impl":"HayZ","./kernels/Sqrt":"utBR","./kernels/SquaredDifference":"qlEh","./kernels/StridedSlice_impl":"L2EX","./kernels/StringNGrams_impl":"KhQU","./kernels/StringSplit_impl":"RAXd","./kernels/StringToHashBucketFast_impl":"NL6k","./kernels/Sub":"VFZK","./kernels/Tile_impl":"DYEi","./kernels/TopK_impl":"ekKr","./kernels/Transpose_impl":"ExvY","./kernels/Unique_impl":"AdAg"}],"AYnN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"MathBackendCPU",{enumerable:!0,get:function(){return r.MathBackendCPU}}),exports.shared=void 0,Object.defineProperty(exports,"version_cpu",{enumerable:!0,get:function(){return n.version}});var e=require("@tensorflow/tfjs-core"),r=require("./backend_cpu"),t=u(require("./shared"));exports.shared=t;var n=require("./version");function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(r);if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(0,e.registerBackend)("cpu",()=>new r.MathBackendCPU,1);
},{"@tensorflow/tfjs-core":"nPFy","./backend_cpu":"Ku8n","./shared":"ms57","./version":"tO0n"}],"JYKr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluConfig=exports.elu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Elu,e=>e>=0?e:Math.exp(e)-1);exports.elu=u;const t={kernelName:e.Elu,backendName:"cpu",kernelFunc:u};exports.eluConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"SyXw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=a,exports.leakyReluConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function a(a){const{inputs:r,backend:o,attrs:l}=a,{x:s}=r,{alpha:u}=l;(0,t.assertNotComplex)([s],"leakyRelu");const n=e.util.sizeFromShape(s.shape),p=o.data.get(s.dataId).values,i=e.util.getTypedArrayFromDType("float32",n);for(let e=0;e<p.length;e++)i[e]=p[e]<0?u*p[e]:p[e];return o.makeTensorInfo(s.shape,"float32",i)}const r={kernelName:e.LeakyRelu,backendName:"cpu",kernelFunc:a};exports.leakyReluConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"coN5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=o,exports.preluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../cpu_util"),t=require("../utils/binary_impl");const a=(0,t.createSimpleBinaryKernelImpl)((e,r)=>e<0?r*e:e);function o(e){const{inputs:t,backend:o}=e,{x:l,alpha:n}=t;(0,r.assertNotComplex)([l,n],"prelu");const s=o.data.get(l.dataId).values,u=o.data.get(n.dataId).values,[p,i]=a(l.shape,n.shape,s,u,"float32");return o.makeTensorInfo(i,"float32",p)}const l={kernelName:e.Prelu,backendName:"cpu",kernelFunc:o};exports.preluConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../utils/binary_impl":"WxSo"}],"xjI9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluConfig=exports.relu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Relu,e=>Math.max(0,e));exports.relu=u;const t={kernelName:e.Relu,backendName:"cpu",kernelFunc:u};exports.reluConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"RCPe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6Config=exports.relu6=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Relu6,e=>Math.min(Math.max(0,e),6));exports.relu6=u;const t={kernelName:e.Relu6,backendName:"cpu",kernelFunc:u};exports.relu6Config=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"PY5o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyActivation=a;var e=require("../kernels/Elu"),r=require("../kernels/Identity"),n=require("../kernels/LeakyRelu"),u=require("../kernels/Prelu"),i=require("../kernels/Relu"),t=require("../kernels/Relu6"),l=require("../kernels/Sigmoid");function a(a,s,k,p,d){if("linear"===k)return(0,r.identity)({inputs:{x:s},backend:a});if("relu"===k)return(0,i.relu)({inputs:{x:s},backend:a});if("elu"===k)return(0,e.elu)({inputs:{x:s},backend:a});if("relu6"===k)return(0,t.relu6)({inputs:{x:s},backend:a});if("prelu"===k)return(0,u.prelu)({inputs:{x:s,alpha:p},backend:a});if("leakyrelu"===k)return(0,n.leakyRelu)({inputs:{x:s},backend:a,attrs:{alpha:d}});if("sigmoid"===k)return(0,l.sigmoid)({inputs:{x:s},backend:a});throw new Error(`Activation ${k} has not been implemented for the CPU backend.`)}
},{"../kernels/Elu":"JYKr","../kernels/Identity":"MAl9","../kernels/LeakyRelu":"SyXw","../kernels/Prelu":"coN5","../kernels/Relu":"xjI9","../kernels/Relu6":"RCPe","../kernels/Sigmoid":"dqzS"}],"Ut4n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=s,exports.reshapeConfig=void 0;var e=require("@tensorflow/tfjs-core");function s(s){const{inputs:a,backend:t,attrs:n}=s,{x:o}=a,{shape:p}=n,r=e.util.sizeFromShape(o.shape),h=e.util.inferFromImplicitShape(p,r),l=e.util.sizeFromShape(h);e.util.assert(r===l,()=>`The new shape (${h}) has ${l} elements and the old `+`shape (${o.shape}) has ${r} elements. The new shape and old `+"shape must have the same number of elements."),t.incRef(o.dataId);const d=t.data.get(o.dataId);if(null!=d.complexTensorInfos){const e=d.complexTensorInfos.real,s=d.complexTensorInfos.imag;e.shape=h,s.shape=h}return{dataId:o.dataId,shape:h,dtype:o.dtype}}const a={kernelName:e.Reshape,backendName:"cpu",kernelFunc:s};exports.reshapeConfig=a;
},{"@tensorflow/tfjs-core":"nPFy"}],"ZNR0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMul=t,exports.batchMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../cpu_util"),s=require("./Reshape");function t(t){const{inputs:r,backend:p,attrs:n}=t,{a:o,b:h}=r,{transposeA:i,transposeB:l}=n;(0,a.assertNotComplex)([o,h],"matMul");const u=o.shape.length,c=h.shape.length,d=i?o.shape[u-2]:o.shape[u-1],m=l?h.shape[c-1]:h.shape[c-2],f=i?o.shape[u-1]:o.shape[u-2],M=l?h.shape[c-2]:h.shape[c-1],b=o.shape.slice(0,-2),k=h.shape.slice(0,-2),x=e.util.sizeFromShape(b),v=e.util.sizeFromShape(k),I=e.broadcast_util.assertAndGetBroadcastShape(o.shape.slice(0,-2),h.shape.slice(0,-2)).concat([f,M]);e.util.assert(d===m,()=>`Error in matMul: inner shapes (${d}) and (`+`${m}) of Tensors with shapes ${o.shape} and `+`${h.shape} and transposeA=${i}`+` and transposeB=${l} must match.`);const g=i?[x,d,f]:[x,f,d],S=l?[v,M,m]:[v,m,M],$=(0,s.reshape)({inputs:{x:o},backend:p,attrs:{shape:g}}),B=(0,s.reshape)({inputs:{x:h},backend:p,attrs:{shape:S}}),T=i?$.shape[1]:$.shape[2],_=i?$.shape[2]:$.shape[1],q=l?B.shape[1]:B.shape[2],y=Math.max(x,v),z=p.data.get($.dataId).values,A=p.data.get(B.dataId).values,C=e.util.computeStrides($.shape),F=e.util.computeStrides(B.shape),[N,j,w]=i?[C[0],1,C[1]]:[C[0],C[1],1],[E,G,O]=l?[1,F[1],F[0]]:[F[1],1,F[0]],P=_*q,R=(0,e.buffer)([y,_,q],$.dtype),D=R.values,H=p.blockSize;for(let e=0;e<y;e++)for(let a=0;a<_;a+=H)for(let s=0;s<q;s+=H)for(let t=0;t<T;t+=H){const r=Math.min(a+H,_),p=Math.min(s+H,q),n=Math.min(t+H,T);for(let o=a;o<r;o++)for(let a=s;a<p;a++){let s=0;for(let r=t;r<n;r++){const t=Math.min(e,x-1)*N,p=Math.min(e,v-1)*O;s+=z[t+o*j+r*w]*A[r*E+a*G+p]}D[e*P+(o*q+a)]+=s}}return p.disposeIntermediateTensorInfo($),p.disposeIntermediateTensorInfo(B),p.makeTensorInfo(I,R.dtype,R.values)}const r={kernelName:e.BatchMatMul,backendName:"cpu",kernelFunc:t};exports.batchMatMulConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Reshape":"Ut4n"}],"RAP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._fusedMatMul=r,exports._fusedMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fused_utils"),s=require("./Add"),a=require("./BatchMatMul");function r(e){const{inputs:r,backend:n,attrs:u}=e,{a:o,b:i,bias:p,preluActivationWeights:c}=r,{transposeA:l,transposeB:d,activation:f,leakyreluAlpha:M}=u;let b,k,_;const h=[];b=(0,a.batchMatMul)({inputs:{a:o,b:i},attrs:{transposeA:l,transposeB:d},backend:n}),p&&(k=(0,s.add)({inputs:{a:b,b:p},backend:n}),h.push(b),b=k),f&&(_=(0,t.applyActivation)(n,b,f,c,M),h.push(b),b=_);for(const t of h)n.disposeIntermediateTensorInfo(t);return b}const n={kernelName:e._FusedMatMul,backendName:"cpu",kernelFunc:r};exports._fusedMatMulConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/fused_utils":"PY5o","./Add":"KMQw","./BatchMatMul":"ZNR0"}],"SH2G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosConfig=exports.acos=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Acos,e=>Math.acos(e));exports.acos=s;const r={kernelName:e.Acos,backendName:"cpu",kernelFunc:s};exports.acosConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"NM9Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshConfig=exports.acosh=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Acosh,e=>Math.acosh(e));exports.acosh=s;const r={kernelName:e.Acosh,backendName:"cpu",kernelFunc:s};exports.acoshConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"vPOn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=o,exports.addNConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:r,backend:a}=o,s=r;(0,t.assertNotComplex)(r,"addN");const n=s.map(e=>a.data.get(e.dataId).values),d=(0,e.buffer)(s[0].shape,s[0].dtype),u=d.values;for(let e=0;e<s.length;e++){const t=n[e];for(let e=0;e<u.length;e++)u[e]+=t[e]}return a.makeTensorInfo(d.shape,d.dtype,d.values)}const r={kernelName:e.AddN,backendName:"cpu",kernelFunc:o};exports.addNConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"idmz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=a,exports.allConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Reshape"),n=require("./Transpose");function a(a){const{inputs:r,backend:o,attrs:l}=a,{x:i}=r,{axis:p,keepDims:u}=l;(0,t.assertNotComplex)(i,"all");const c=e.util.parseAxisParam(p,i.shape);let d=c;const h=e.backend_util.getAxesPermutation(d,i.shape.length);let m=i;null!=h&&(m=(0,n.transpose)({inputs:{x:i},backend:o,attrs:{perm:h}}),d=e.backend_util.getInnerMostAxes(d.length,i.shape.length)),e.backend_util.assertAxesAreInnerMostDims("all",d,m.shape.length);const[k,x]=e.backend_util.computeOutAndReduceShapes(m.shape,d),f=e.util.sizeFromShape(x),b=e.util.makeZerosTypedArray(e.util.sizeFromShape(k),m.dtype),g=o.data.get(m.dataId).values;for(let e=0;e<b.length;++e){const t=e*f;let s=g[t];for(let e=0;e<f;++e){const n=g[t+e];s=s&&n}b[e]=s}null!=h&&o.disposeIntermediateTensorInfo(m);const A=o.makeTensorInfo(k,m.dtype,b);if(u){const t=e.backend_util.expandShapeToKeepDim(k,c),n=(0,s.reshape)({inputs:{x:A},backend:o,attrs:{shape:t}});return o.disposeIntermediateTensorInfo(A),n}return A}const r={kernelName:e.All,backendName:"cpu",kernelFunc:a};exports.allConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Reshape":"Ut4n","./Transpose":"WjPF"}],"HOvl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=a,exports.anyConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),n=require("./Reshape"),s=require("./Transpose");function a(a){const{inputs:r,backend:o,attrs:i}=a,{x:p}=r,{axis:u,keepDims:l}=i;(0,t.assertNotComplex)(p,"any");const c=e.util.parseAxisParam(u,p.shape);let d=c;const h=e.backend_util.getAxesPermutation(d,p.shape.length);let m=p;null!=h&&(m=(0,s.transpose)({inputs:{x:p},backend:o,attrs:{perm:h}}),d=e.backend_util.getInnerMostAxes(d.length,p.shape.length)),e.backend_util.assertAxesAreInnerMostDims("any",d,m.shape.length);const[k,x]=e.backend_util.computeOutAndReduceShapes(m.shape,d),f=e.util.sizeFromShape(x),y=e.util.makeZerosTypedArray(e.util.sizeFromShape(k),m.dtype),b=o.data.get(m.dataId).values;for(let e=0;e<y.length;++e){const t=e*f;let n=b[t];for(let e=0;e<f;++e){const s=b[t+e];n=n||s}y[e]=n}null!=h&&o.disposeIntermediateTensorInfo(m);const g=o.makeTensorInfo(k,m.dtype,y);if(l){const t=e.backend_util.expandShapeToKeepDim(k,c),s=(0,n.reshape)({inputs:{x:g},backend:o,attrs:{shape:t}});return o.disposeIntermediateTensorInfo(g),s}return g}const r={kernelName:e.Any,backendName:"cpu",kernelFunc:a};exports.anyConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Reshape":"Ut4n","./Transpose":"WjPF"}],"iOtO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=a,exports.argMaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose");function a(a){const{inputs:r,backend:n,attrs:o}=a,{x:i}=r,{axis:u}=o;(0,t.assertNotComplex)(i,"argMax");let l=e.util.parseAxisParam(u,i.shape);const p=e.backend_util.getAxesPermutation(l,i.shape.length);let c=i;const d=[];null!=p&&(c=(0,s.transpose)({inputs:{x:i},backend:n,attrs:{perm:p}}),d.push(c),l=e.backend_util.getInnerMostAxes(l.length,c.shape.length)),l=[l[0]],e.backend_util.assertAxesAreInnerMostDims("argMax",l,c.shape.length);const[x,g]=e.backend_util.computeOutAndReduceShapes(c.shape,l),h=e.util.sizeFromShape(x),m=e.util.makeZerosTypedArray(h,"int32"),f=e.util.sizeFromShape(g),k=n.data.get(c.dataId).values;for(let e=0;e<m.length;++e){const t=e*f;let s=k[t],a=0;for(let e=0;e<f;++e){const r=k[t+e];r>s&&(s=r,a=e)}m[e]=a}return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(x,"int32",m)}const r={kernelName:e.ArgMax,backendName:"cpu",kernelFunc:a};exports.argMaxConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Transpose":"WjPF"}],"YREn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=s,exports.argMinConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),n=require("./Transpose");function s(s){const{inputs:r,backend:a,attrs:o}=s,{x:i}=r,{axis:u}=o;(0,t.assertNotComplex)(i,"argMin");let l=e.util.parseAxisParam(u,i.shape);const p=e.backend_util.getAxesPermutation(l,i.shape.length);let c=i;const d=[];null!=p&&(c=(0,n.transpose)({inputs:{x:i},backend:a,attrs:{perm:p}}),d.push(c),l=e.backend_util.getInnerMostAxes(l.length,c.shape.length)),l=[l[0]],e.backend_util.assertAxesAreInnerMostDims("argMin",l,c.shape.length);const[g,h]=e.backend_util.computeOutAndReduceShapes(c.shape,l),m=e.util.sizeFromShape(g),x=e.util.makeZerosTypedArray(m,"int32"),f=e.util.sizeFromShape(h),k=a.data.get(c.dataId).values;for(let e=0;e<x.length;++e){const t=e*f;let n=k[t],s=0;for(let e=0;e<f;++e){const r=k[t+e];r<n&&(n=r,s=e)}x[e]=s}return d.forEach(e=>a.disposeIntermediateTensorInfo(e)),a.makeTensorInfo(g,"int32",x)}const r={kernelName:e.ArgMin,backendName:"cpu",kernelFunc:s};exports.argMinConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Transpose":"WjPF"}],"zJWX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinConfig=exports.asin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const s=(0,n.unaryKernelFunc)(e.Asin,e=>Math.asin(e));exports.asin=s;const r={kernelName:e.Asin,backendName:"cpu",kernelFunc:s};exports.asinConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"THeL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhConfig=exports.asinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const s=(0,n.unaryKernelFunc)(e.Asinh,e=>Math.asinh(e));exports.asinh=s;const r={kernelName:e.Asinh,backendName:"cpu",kernelFunc:s};exports.asinhConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"EKXF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanConfig=exports.atan=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const n=(0,t.unaryKernelFunc)(e.Atan,e=>Math.atan(e));exports.atan=n;const a={kernelName:e.Atan,backendName:"cpu",kernelFunc:n};exports.atanConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"hJAZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2Impl=exports.atan2Config=exports.atan2=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/binary_impl"),r=require("../utils/binary_utils");const a=(0,t.createSimpleBinaryKernelImpl)((e,t)=>Math.atan2(e,t));exports.atan2Impl=a;const n=(0,r.binaryKernelFunc)(e.Atan2,a);exports.atan2=n;const o={kernelName:e.Atan2,backendName:"cpu",kernelFunc:n};exports.atan2Config=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"Z2kp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhConfig=exports.atanh=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const n=(0,t.unaryKernelFunc)(e.Atanh,e=>Math.atanh(e));exports.atanh=n;const a={kernelName:e.Atanh,backendName:"cpu",kernelFunc:n};exports.atanhConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"XmpV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3dPositions=n,exports.maxPoolPositions=o,exports.pool=e,exports.pool3d=i;var t=require("@tensorflow/tfjs-core");function e(e,o,i,n,h,r){const f=h.strideHeight,a=h.strideWidth,l=h.dilationHeight,s=h.dilationWidth,d=h.effectiveFilterHeight,c=h.effectiveFilterWidth,u=h.padInfo.top,p=h.padInfo.left,I="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,N=(0,t.buffer)(h.outShape,i),g=N.values,S=h.outShape[1]*h.outShape[2]*h.outShape[3],m=h.outShape[2]*h.outShape[3],W=h.outShape[3];for(let t=0;t<h.batchSize;++t){const o=t*S,i=t*n[0];for(let t=0;t<h.inChannels;++t)for(let N=0;N<h.outHeight;++N){const S=N*f-u,H=Math.max(0,S),b=Math.min(h.inHeight,d+S),v=o+N*m;for(let o=0;o<h.outWidth;++o){const f=o*a-p,d=Math.max(0,f),u=Math.min(h.inWidth,c+f);let N=I,S=0,m=0;for(let o=H;o<b;o+=l){const h=i+o*n[1];for(let o=d;o<u;o+=s){const i=e[h+o*n[2]+t];"max"===r&&i>N?N=i:"avg"===r&&(S+=i,m++)}if(isNaN(N))break}g[v+o*W+t]="avg"===r?S/m:N}}}return N}function o(e,o,i,n,h=!1,r=!1){const f=(0,t.buffer)(n.outShape,"int32"),a=n.strideHeight,l=n.strideWidth,s=n.dilationHeight,d=n.dilationWidth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,p=n.padInfo.top,I=n.padInfo.left,N=(0,t.buffer)(o,i,e);for(let t=0;t<n.batchSize;++t)for(let e=0;e<n.inChannels;++e)for(let o=0;o<n.outHeight;++o){const i=o*a-p;let g=i;for(;g<0;)g+=s;const S=Math.min(n.inHeight,c+i);for(let a=0;a<n.outWidth;++a){const c=a*l-I;let p=c;for(;p<0;)p+=d;const m=Math.min(n.inWidth,u+c);let W=Number.NEGATIVE_INFINITY,H=-1;for(let o=g;o<S;o+=s){const f=o-i;for(let i=p;i<m;i+=d){const a=i-c,l=N.get(t,o,i,e);l>W&&(W=l,H=h?r?((t*n.inHeight+o)*n.inWidth+i)*n.inChannels+e:(o*n.inWidth+i)*n.inChannels+e:f*u+a)}}f.set(H,t,o,a,e)}}return f}function i(e,o,i,n,h,r){const f=h.strideDepth,a=h.strideHeight,l=h.strideWidth,s=h.dilationDepth,d=h.dilationHeight,c=h.dilationWidth,u=h.effectiveFilterDepth,p=h.effectiveFilterHeight,I=h.effectiveFilterWidth,N=h.padInfo.front,g=h.padInfo.top,S=h.padInfo.left,m="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,W=(0,t.buffer)(h.outShape,i),H=W.values,b=h.outShape[1]*h.outShape[2]*h.outShape[3]*h.outShape[4],v=h.outShape[2]*h.outShape[3]*h.outShape[4],F=h.outShape[3]*h.outShape[4],x=h.outShape[4];for(let t=0;t<h.batchSize;++t){const o=t*b,i=t*n[0];for(let t=0;t<h.inChannels;++t)for(let W=0;W<h.outDepth;++W){const b=W*f-N;let M=b;for(;M<0;)M+=s;const T=Math.min(h.inDepth,u+b),D=o+W*v;for(let o=0;o<h.outHeight;++o){const f=o*a-g;let u=f;for(;u<0;)u+=d;const N=Math.min(h.inHeight,p+f),W=D+o*F;for(let o=0;o<h.outWidth;++o){const f=o*l-S;let a=f;for(;a<0;)a+=c;const p=Math.min(h.inWidth,I+f),g=W+o*x;let b=m,v=0,F=0;for(let o=M;o<T;o+=s){const h=i+o*n[1];for(let o=u;o<N;o+=d){const i=h+o*n[2];for(let o=a;o<p;o+=c){const h=e[i+o*n[3]+t];if("max"===r&&h>b?b=h:"avg"===r&&(v+=h,F++),isNaN(b))break}if(isNaN(b))break}if(isNaN(b))break}H[g+t]="avg"===r?v/F:b}}}}return W}function n(e,o){const i=(0,t.buffer)(o.outShape,"int32"),n=o.strideDepth,h=o.strideHeight,r=o.strideWidth,f=o.dilationDepth,a=o.dilationHeight,l=o.dilationWidth,s=o.effectiveFilterDepth,d=o.effectiveFilterHeight,c=o.effectiveFilterWidth,u=o.padInfo.front,p=o.padInfo.top,I=o.padInfo.left;for(let t=0;t<o.batchSize;++t)for(let N=0;N<o.inChannels;++N)for(let g=0;g<o.outDepth;++g){const S=g*n-u;let m=S;for(;m<0;)m+=f;const W=Math.min(o.inDepth,s+S);for(let n=0;n<o.outHeight;++n){const s=n*h-p;let u=s;for(;u<0;)u+=a;const H=Math.min(o.inHeight,d+s);for(let h=0;h<o.outWidth;++h){const p=h*r-I;let b=p;for(;b<0;)b+=l;const v=Math.min(o.inWidth,c+p);let F=Number.NEGATIVE_INFINITY,x=-1;for(let o=m;o<W;o+=f){const i=o-S;for(let n=u;n<H;n+=a){const h=n-s;for(let r=b;r<v;r+=l){const f=r-p,a=e.get(t,o,n,r,N);a>=F&&(F=a,x=i*d*c+h*d+f)}}}i.set(x,t,g,n,h,N)}}}return i}
},{"@tensorflow/tfjs-core":"nPFy"}],"hUaI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=r,exports.avgPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils"),i=require("./Identity");function r(r){const{inputs:s,backend:a,attrs:n}=r,{x:l}=s;(0,t.assertNotComplex)(l,"avgPool");const{filterSize:u,strides:d,pad:p,dimRoundingMode:c}=n;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const f=e.backend_util.computePool2DInfo(l.shape,u,d,1,p,c);let g;if(1===f.filterWidth&&1===f.filterHeight&&e.util.arraysEqual(f.inShape,f.outShape))g=(0,i.identity)({inputs:{x:l},backend:a});else{const t=a.data.get(l.dataId).values,i=e.util.computeStrides(l.shape),r=(0,o.pool)(t,l.shape,l.dtype,i,f,"avg");g=a.makeTensorInfo(f.outShape,l.dtype,r.values)}return g}const s={kernelName:e.AvgPool,backendName:"cpu",kernelFunc:r};exports.avgPoolConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../utils/pool_utils":"XmpV","./Identity":"MAl9"}],"mSKw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3D=a,exports.avgPool3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../cpu_util"),t=require("../utils/pool_utils");function a(a){const{inputs:s,backend:r,attrs:l}=a,{x:n}=s,{filterSize:u,strides:i,pad:d,dimRoundingMode:p,dataFormat:c}=l;(0,o.assertNotComplex)(n,"avgPool3d");const v=e.backend_util.computePool3DInfo(n.shape,u,i,1,d,p,c),f=r.data.get(n.dataId).values,g=(0,t.pool3d)(f,n.shape,n.dtype,e.util.computeStrides(n.shape),v,"avg");return r.makeTensorInfo(g.shape,"float32",g.values)}const s={kernelName:e.AvgPool3D,backendName:"cpu",kernelFunc:a};exports.avgPool3DConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../utils/pool_utils":"XmpV"}],"nhUO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGrad=o,exports.avgPool3DGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:i,backend:r,attrs:f}=o,{dy:n,input:l}=i,{filterSize:a,strides:d,pad:s,dimRoundingMode:h}=f;(0,t.assertNotComplex)([n,l],"avgPool3DGrad");const p=e.backend_util.computePool3DInfo(l.shape,a,d,1,s,h),c=p.strideDepth,u=p.strideHeight,g=p.strideWidth,v=p.filterDepth,D=p.filterHeight,b=p.filterWidth,P=p.dilationDepth,k=p.dilationHeight,m=p.dilationWidth,H=p.effectiveFilterDepth,W=p.effectiveFilterHeight,x=p.effectiveFilterWidth,G=H-1-p.padInfo.front,I=x-1-p.padInfo.left,M=W-1-p.padInfo.top,y=(0,e.buffer)(l.shape,"float32"),C=1/(v*D*b),F=r.bufferSync(n);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let o=0;o<p.inDepth;++o)for(let i=0;i<p.inHeight;++i)for(let r=0;r<p.inWidth;++r){const f=o-G,n=i-M,l=r-I;let a=0;for(let o=0;o<H;o+=P){const i=(f+o)/c;if(!(i<0||i>=p.outDepth||Math.floor(i)!==i))for(let o=0;o<W;o+=k){const r=(n+o)/u;if(!(r<0||r>=p.outHeight||Math.floor(r)!==r))for(let o=0;o<x;o+=m){const f=(l+o)/g;f<0||f>=p.outWidth||Math.floor(f)!==f||(a+=F.get(e,i,r,f,t))}}}y.set(a*C,e,o,i,r,t)}return r.makeTensorInfo(y.shape,y.dtype,y.values)}const i={kernelName:e.AvgPool3DGrad,backendName:"cpu",kernelFunc:o};exports.avgPool3DGradConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"LUQw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGrad=o,exports.avgPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:i,backend:r,attrs:a}=o,{dy:l,input:f}=i,n=f;(0,t.assertNotComplex)([l,f],"avgPoolGrad");const{filterSize:s,strides:d,pad:u}=a,c=e.backend_util.computePool2DInfo(n.shape,s,d,1,u),h=c.strideHeight,p=c.strideWidth,g=c.filterHeight,v=c.filterWidth,b=c.dilationHeight,P=c.dilationWidth,k=c.effectiveFilterHeight,H=c.effectiveFilterWidth,W=H-1-c.padInfo.left,m=k-1-c.padInfo.top,x=(0,e.buffer)(n.shape,"float32"),G=1/(g*v),I=r.data.get(l.dataId).values,C=(0,e.buffer)(l.shape,"float32",I);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let o=0;o<c.inHeight;++o)for(let i=0;i<c.inWidth;++i){const r=o-m,a=i-W;let l=0;for(let o=0;o<k;o+=b){const i=(r+o)/h;if(!(i<0||i>=c.outHeight||Math.floor(i)!==i))for(let o=0;o<H;o+=P){const r=(a+o)/p;r<0||r>=c.outWidth||Math.floor(r)!==r||(l+=C.get(e,i,r,t))}}x.set(l*G,e,o,i,t)}return r.makeTensorInfo(x.shape,x.dtype,x.values)}const i={kernelName:e.AvgPoolGrad,backendName:"cpu",kernelFunc:o};exports.avgPoolGradConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"h0Y0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm=t,exports.batchNormConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../cpu_util");function t(t){const{inputs:n,backend:r,attrs:l}=t,{x:s,scale:o,offset:h,mean:u,variance:i}=n;e.util.assert(u.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),e.util.assert(null==h||u.shape.length===h.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),e.util.assert(null==o||u.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),(0,a.assertNotComplex)([s,u,i,o,h],"batchNorm");let{varianceEpsilon:d}=l;null==d&&(d=.001);const c=r.data.get(s.dataId).values,g=r.data.get(u.dataId).values,p=r.data.get(i.dataId).values,m=o?r.data.get(o.dataId).values:new Float32Array([1]),v=h?r.data.get(h.dataId).values:new Float32Array([0]),f=new Float32Array(c.length),q=v.length,k=m.length,N=p.length,b=g.length;let x=0,I=0,y=0,F=0;for(let e=0;e<c.length;++e)f[e]=v[x++]+(c[e]-g[I++])*m[y++]/Math.sqrt(p[F++]+d),x>=q&&(x=0),I>=b&&(I=0),y>=k&&(y=0),F>=N&&(F=0);return r.makeTensorInfo(s.shape,s.dtype,f)}const n={kernelName:e.FusedBatchNorm,backendName:"cpu",kernelFunc:t};exports.batchNormConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"CDyz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceND=r,exports.batchToSpaceNDConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Reshape"),a=require("./Slice"),n=require("./Transpose");function r(r){const{inputs:c,backend:o,attrs:i}=r,{x:p}=c,{blockShape:u,crops:d}=i;(0,t.assertNotComplex)([p],"batchToSpaceND");const l=u.reduce((e,t)=>e*t),h=e.backend_util.getReshaped(p.shape,u,l),b=e.backend_util.getPermuted(h.length,u.length),k=e.backend_util.getReshapedPermuted(p.shape,u,l),g=e.backend_util.getSliceBeginCoords(d,u.length),x=e.backend_util.getSliceSize(k,d,u.length),S=(0,s.reshape)({inputs:{x:p},backend:o,attrs:{shape:h}}),f=(0,n.transpose)({inputs:{x:S},backend:o,attrs:{perm:b}}),m=(0,s.reshape)({inputs:{x:f},backend:o,attrs:{shape:k}}),T=(0,a.slice)({inputs:{x:m},backend:o,attrs:{begin:g,size:x}});return o.disposeIntermediateTensorInfo(S),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(m),T}const c={kernelName:e.BatchToSpaceND,backendName:"cpu",kernelFunc:r};exports.batchToSpaceNDConfig=c;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Reshape":"Ut4n","./Slice":"moln","./Transpose":"WjPF"}],"LUcP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincount=n,exports.bincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Bincount_impl");function n(e){const{inputs:n,backend:o,attrs:r}=e,{x:a,weights:s}=n,{size:i}=r,u=o.data.get(a.dataId).values,c=o.data.get(s.dataId).values,d=(0,t.bincountImpl)(u,c,s.dtype,s.shape,i);return o.makeTensorInfo([i],s.dtype,d)}const o={kernelName:e.Bincount,backendName:"cpu",kernelFunc:n};exports.bincountConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","./Bincount_impl":"fQVq"}],"bJzQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastArgs=r,exports.broadcastArgsConfig=void 0;var e=require("@tensorflow/tfjs-core");function r(r){const{inputs:a,backend:t}=r,{s0:s,s1:o}=a,n=t.data.get(s.dataId).values,d=t.data.get(o.dataId).values,c=e.backend_util.assertAndGetBroadcastShape(Array.from(n),Array.from(d));return t.makeTensorInfo([c.length],"int32",Int32Array.from(c))}const a={kernelName:e.BroadcastArgs,backendName:"cpu",kernelFunc:r};exports.broadcastArgsConfig=a;
},{"@tensorflow/tfjs-core":"nPFy"}],"ZSpF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValueConfig=exports.clipByValue=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/unary_utils");const u=(0,l.unaryKernelFunc)(e.ClipByValue,(e,l)=>{const u=l;return e>u.clipValueMax?u.clipValueMax:e<u.clipValueMin?u.clipValueMin:e});exports.clipByValue=u;const r={kernelName:e.ClipByValue,backendName:"cpu",kernelFunc:u};exports.clipByValueConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"P8FE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexAbsConfig=exports.complexAbs=void 0;var e=require("@tensorflow/tfjs-core");const t=t=>{const{x:o}=t.inputs,a=t.backend,s=new Float32Array(e.util.sizeFromShape(o.shape)),r=a.data.get(o.dataId),n=r.complexTensorInfos.real,l=r.complexTensorInfos.imag,p=a.data.get(n.dataId).values,c=a.data.get(l.dataId).values;for(let e=0;e<p.length;e++){const t=p[e],o=c[e];s[e]=Math.hypot(t,o)}return a.makeOutput(s,o.shape,"float32")};exports.complexAbs=t;const o={kernelName:e.ComplexAbs,backendName:"cpu",kernelFunc:t};exports.complexAbsConfig=o;
},{"@tensorflow/tfjs-core":"nPFy"}],"qiGA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=t,exports.imagConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:a}=e,{input:n}=t,o=a.data.get(n.dataId).complexTensorInfos.imag,r=a.data.get(o.dataId).values;return a.makeTensorInfo(o.shape,o.dtype,r)}const a={kernelName:e.Imag,backendName:"cpu",kernelFunc:t};exports.imagConfig=a;
},{"@tensorflow/tfjs-core":"nPFy"}],"qbkR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=i,exports.concatConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Complex"),a=require("./Concat_impl"),n=require("./Identity"),s=require("./Imag"),r=require("./Real"),p=require("./Reshape");function i(o){const{inputs:c,backend:u,attrs:d}=o,{axis:m}=d,l=e.util.parseAxisParam(m,c[0].shape)[0];let h=e.backend_util.computeOutShape(c.map(e=>e.shape),l);if(0===e.util.sizeFromShape(h))return u.makeTensorInfo(h,c[0].dtype,[]);const f=c.filter(t=>e.util.sizeFromShape(t.shape)>0);if(1===f.length)return(0,n.identity)({inputs:{x:f[0]},backend:u});const k=f.map(e=>e.shape);if(e.backend_util.assertParamsConsistent(k,l),"complex64"===f[0].dtype){const e=f.map(e=>(0,r.real)({inputs:{input:e},backend:u})),a=f.map(e=>(0,s.imag)({inputs:{input:e},backend:u})),n=i({inputs:e,backend:u,attrs:{axis:l}}),p=i({inputs:a,backend:u,attrs:{axis:l}}),o=(0,t.complex)({inputs:{real:n,imag:p},backend:u});return e.forEach(e=>u.disposeIntermediateTensorInfo(e)),a.forEach(e=>u.disposeIntermediateTensorInfo(e)),u.disposeIntermediateTensorInfo(n),u.disposeIntermediateTensorInfo(p),o}const I=f.map(t=>{const a=[-1,e.util.sizeFromShape(t.shape.slice(l))];return(0,p.reshape)({inputs:{x:t},backend:u,attrs:{shape:a}})}),b=I.map(e=>({vals:u.data.get(e.dataId).values,shape:e.shape}));h=e.backend_util.computeOutShape(I.map(e=>e.shape),1);const x=1===I[0].shape[0],g=(0,a.concatImpl)(b,h,c[0].dtype,x),q=e.backend_util.computeOutShape(f.map(e=>e.shape),l),y=u.makeTensorInfo(q,c[0].dtype,g);return I.forEach(e=>u.disposeIntermediateTensorInfo(e)),y}const o={kernelName:e.Concat,backendName:"cpu",kernelFunc:i};exports.concatConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","./Complex":"du7s","./Concat_impl":"NNUH","./Identity":"MAl9","./Imag":"qiGA","./Real":"fcv6","./Reshape":"Ut4n"}],"fqOO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2D=o,exports.conv2DConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:s,attrs:i}=o,{x:a,filter:r}=n,{strides:d,pad:c,dataFormat:l,dilations:u,dimRoundingMode:f}=i;(0,e.assertNotComplex)([a,r],"conv2d");const p=t.backend_util.convertConv2DDataFormat(l),h=t.backend_util.computeConv2DInfo(a.shape,r.shape,d,u,c,f,!1,p),v=h.filterHeight,m=h.filterWidth,g=h.dilationHeight,C=h.dilationWidth,k=h.padInfo.left,D=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new t.TensorBuffer(h.outShape,a.dtype),I=t.util.computeStrides(a.shape),H=t.util.computeStrides(r.shape),W=I[0],_=b?I[1]:I[2],F=b?I[2]:1,S=b?1:I[1],y=x.strides[0],N=b?x.strides[1]:x.strides[2],j=b?x.strides[2]:1,q=b?1:x.strides[1],w=s.data.get(a.dataId).values,M=s.data.get(r.dataId).values,T=x.values;for(let t=0;t<h.batchSize;++t){const e=t*W,o=t*y;for(let t=0;t<h.outHeight;++t){const n=o+t*N,s=t*h.strideHeight-D;for(let t=0;t<v;++t){const o=s+t*g;if(o<0||o>=h.inHeight)continue;const i=t*H[0],a=e+o*_;for(let t=0;t<h.outWidth;++t){const e=n+t*j,o=t*h.strideWidth-k;for(let t=0;t<m;++t){const n=o+t*C;if(n<0||n>=h.inWidth)continue;const s=a+n*F;let r=i+t*H[1];for(let t=0;t<h.inChannels;++t){const o=w[s+t*S];for(let t=0;t<h.outChannels;++t)T[e+t*q]+=o*M[r+t];r+=h.outChannels}}}}}}return s.makeTensorInfo(x.shape,x.dtype,T)}const n={kernelName:t.Conv2D,backendName:"cpu",kernelFunc:o};exports.conv2DConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"I7QM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=o,exports.conv2DBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:r,attrs:n}=o,{x:i,dy:s}=a,{strides:l,pad:c,dataFormat:d,dimRoundingMode:p,filterShape:f}=n;(0,t.assertNotComplex)([i,s],"conv2dBackpropFilter");const u=e.backend_util.convertConv2DDataFormat(d),h=e.backend_util.computeConv2DInfo(i.shape,f,l,1,c,p,!1,u),{strideHeight:v,strideWidth:g,filterHeight:m,filterWidth:k}=h,F="channelsLast"===h.dataFormat,x=new e.TensorBuffer(h.filterShape,"float32"),B=h.padInfo.left,C=h.padInfo.top,M=r.data.get(i.dataId).values,D=r.data.get(s.dataId).values,b=new e.TensorBuffer(i.shape,i.dtype,M),I=new e.TensorBuffer(s.shape,s.dtype,D);for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((C-e)/v)),o=Math.min(h.outHeight,(h.inHeight+C-e)/v);for(let a=0;a<k;++a){const r=Math.max(0,Math.ceil((B-a)/g)),n=Math.min(h.outWidth,(h.inWidth+B-a)/g);for(let i=0;i<h.inChannels;++i)for(let s=0;s<h.outChannels;++s){let l=0;for(let c=0;c<h.batchSize;++c)for(let d=t;d<o;++d){const t=e+d*v-C;for(let e=r;e<n;++e){const o=a+e*g-B;l+=F?b.get(c,t,o,i)*I.get(c,d,e,s):b.get(c,i,t,o)*I.get(c,s,d,e)}}x.set(l,e,a,i,s)}}}return r.makeTensorInfo(x.shape,x.dtype,x.values)}const a={kernelName:e.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:o};exports.conv2DBackpropFilterConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"PV16":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=o,exports.conv2DBackpropInputConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:a,backend:n,attrs:r}=o,{dy:s,filter:i}=a,{inputShape:p,strides:d,pad:c,dataFormat:l,dimRoundingMode:u}=r;(0,e.assertNotComplex)([s,i],"conv2dBackpropInput");const f=t.util.computeStrides(i.shape),h=t.util.computeStrides(s.shape);let m=t.backend_util.convertConv2DDataFormat(l);const v=t.backend_util.computeConv2DInfo(p,i.shape,d,1,c,u,!1,m),k=new t.TensorBuffer(v.inShape,"float32"),I=k.values,g=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,[M,x,D]=f,{batchSize:b,filterHeight:B,filterWidth:S,inChannels:_,inHeight:F,inWidth:H,outChannels:W,outHeight:y,outWidth:N,strideHeight:j,strideWidth:q}=v;m=v.dataFormat;const w=B-1-v.padInfo.top,T=S-1-v.padInfo.left,z="channelsLast"===m,L=k.strides[0],O=z?k.strides[1]:k.strides[2],P=z?k.strides[2]:1,R=z?1:k.strides[1],A=h[0],E=z?h[1]:h[2],G=z?h[2]:1,J=z?1:h[1];for(let t=0;t<b;++t)for(let e=0;e<_;++e)for(let o=0;o<F;++o){const a=o-w,n=Math.max(0,Math.ceil(a/j)),r=Math.min(y,(B+a)/j);for(let s=0;s<H;++s){const i=s-T,p=Math.max(0,Math.ceil(i/q)),d=Math.min(N,(S+i)/q);let c=0;for(let o=n;o<r;++o){const n=o*j-a;for(let a=p;a<d;++a){const r=A*t+E*o+G*a,s=M*(B-1-n)+x*(S-1-(a*q-i))+D*e;for(let t=0;t<W;++t){c+=g[r+J*t]*C[s+t]}}}I[L*t+O*o+P*s+R*e]=c}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const a={kernelName:t.Conv2DBackpropInput,backendName:"cpu",kernelFunc:o};exports.conv2DBackpropInputConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"cPgQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3D=o,exports.conv3DConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:s,attrs:i}=o,{x:r,filter:a}=n,{strides:l,pad:c,dilations:d}=i;(0,e.assertNotComplex)([r,a],"conv3d");const u=t.backend_util.computeConv3DInfo(r.shape,a.shape,l,d,c),{filterDepth:f,filterHeight:p,filterWidth:h,dilationDepth:v,dilationHeight:C,dilationWidth:D,padInfo:g}=u,m=g.front,k=g.left,x=g.top,b=new t.TensorBuffer(u.outShape,r.dtype),H=s.data.get(r.dataId).values,I=s.data.get(a.dataId).values,W=b.values,S=t.util.computeStrides(r.shape),_=t.util.computeStrides(a.shape);for(let t=0;t<u.batchSize;++t){const e=t*S[0],o=t*b.strides[0];for(let t=0;t<u.outDepth;++t){const n=o+t*b.strides[1],s=t*u.strideDepth-m;for(let t=0;t<f;++t){const o=s+t*v;if(o<0||o>=u.inDepth)continue;const i=t*_[0],r=e+o*S[1];for(let t=0;t<u.outHeight;++t){const e=n+t*b.strides[2],o=t*u.strideHeight-x;for(let t=0;t<p;++t){const n=o+t*C;if(n<0||n>=u.inHeight)continue;const s=i+t*_[1],a=r+n*S[2];for(let t=0;t<u.outWidth;++t){const o=e+t*u.outChannels,n=t*u.strideWidth-k;for(let t=0;t<h;++t){const e=n+t*D;if(e<0||e>=u.inWidth)continue;const i=s+t*_[2],r=a+e*u.inChannels;let l=i;for(let t=0;t<u.inChannels;++t){const e=H[r+t];for(let t=0;t<u.outChannels;++t)W[o+t]+=e*I[l+t];l+=u.outChannels}}}}}}}}return s.makeTensorInfo(b.shape,b.dtype,b.values)}const n={kernelName:t.Conv3D,backendName:"cpu",kernelFunc:o};exports.conv3DConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"s7zP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilterV2=o,exports.conv3DBackpropFilterV2Config=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:r,backend:a,attrs:n}=o,{x:i,dy:s}=r,{strides:l,pad:p,filterShape:c}=n;(0,e.assertNotComplex)([i,s],"conv3dBackpropFilterV2");const d=t.util.computeStrides(i.shape),f=t.util.computeStrides(s.shape),h=t.backend_util.computeConv3DInfo(i.shape,c,l,1,p),u=h.strideDepth,m=h.strideHeight,v=h.strideWidth,k=h.filterDepth,M=h.filterHeight,x=h.filterWidth,D=new t.TensorBuffer(h.filterShape,"float32"),g=D.values,[C,I,B,F]=D.strides,b=a.data.get(s.dataId).values,[S,V,H,W]=f,_=a.data.get(i.dataId).values,[y,N,j,q]=d,w=h.padInfo.front,T=h.padInfo.left,z=h.padInfo.top;for(let t=0;t<k;++t){const e=Math.max(0,Math.ceil((w-t)/u)),o=Math.min(h.outDepth,(h.inDepth+w-t)/u),r=t*C;for(let a=0;a<M;++a){const n=Math.max(0,Math.ceil((z-a)/m)),i=Math.min(h.outHeight,(h.inHeight+z-a)/m),s=a*I+r;for(let r=0;r<x;++r){const l=Math.max(0,Math.ceil((T-r)/v)),p=Math.min(h.outWidth,(h.inWidth+T-r)/v),c=r*B+s;for(let s=0;s<h.inChannels;++s){const d=s*F+c;for(let c=0;c<h.outChannels;++c){let f=0;for(let d=0;d<h.batchSize;++d){const h=d*y,k=d*S;for(let d=e;d<o;++d){const e=(t+d*u-w)*N+h,o=d*V+k;for(let t=n;t<i;++t){const n=(a+t*m-z)*j+e,i=t*H+o;for(let t=l;t<p;++t){const e=t*W+i;f+=_[(r+t*v-T)*q+n+s]*b[e+c]}}}}g[d+c]=f}}}}}return a.makeTensorInfo(D.shape,D.dtype,D.values)}const r={kernelName:t.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:o};exports.conv3DBackpropFilterV2Config=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"J4ly":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInputV2=o,exports.conv3DBackpropInputV2Config=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:a,attrs:r}=o,{dy:i,filter:p}=n,{pad:s,strides:c,inputShape:l}=r;(0,e.assertNotComplex)([i],"conv3dBackpropInputV2");const u=t.util.computeStrides(i.shape),d=t.util.computeStrides(p.shape),h=t.backend_util.computeConv3DInfo(l,p.shape,c,1,s),f=new t.TensorBuffer(h.inShape,"float32"),m=f.values,[v,I,k,M]=f.strides,D=a.data.get(i.dataId).values,[g,x,C,B]=u,b=a.data.get(p.dataId).values,[S,V,H,W]=d,{batchSize:_,filterDepth:y,filterHeight:N,filterWidth:j,inChannels:q,inDepth:w,inHeight:T,inWidth:z,outChannels:F,outDepth:O,outHeight:P,outWidth:A,strideDepth:E,strideHeight:G,strideWidth:J}=h,K=y-1-h.padInfo.front,L=N-1-h.padInfo.top,Q=j-1-h.padInfo.left;for(let t=0;t<_;++t)for(let e=0;e<q;++e)for(let o=0;o<w;++o){const n=o-K,a=Math.max(0,Math.ceil(n/E)),r=Math.min(O,(y+n)/E);for(let i=0;i<T;++i){const p=i-L,s=Math.max(0,Math.ceil(p/G)),c=Math.min(P,(N+p)/G);for(let l=0;l<z;++l){const u=l-Q,d=Math.max(0,Math.ceil(u/J)),h=Math.min(A,(j+u)/J);let f=0;for(let o=a;o<r;++o){const a=o*E-n;for(let n=s;n<c;++n){const r=n*G-p;for(let i=d;i<h;++i){const p=g*t+x*o+C*n+B*i,s=S*(y-1-a)+V*(N-1-r)+H*(j-1-(i*J-u))+W*e;for(let t=0;t<F;++t){f+=D[p+t]*b[s+t]}}}}m[v*t+I*o+k*i+M*l+e]=f}}}return a.makeTensorInfo(f.shape,f.dtype,f.values)}const n={kernelName:t.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:o};exports.conv3DBackpropInputV2Config=n;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"WYkQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosConfig=exports.cos=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Cos,e=>Math.cos(e));exports.cos=s;const r={kernelName:e.Cos,backendName:"cpu",kernelFunc:s};exports.cosConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"zFlx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshConfig=exports.cosh=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Cosh,e=>Math.cosh(e));exports.cosh=s;const r={kernelName:e.Cosh,backendName:"cpu",kernelFunc:s};exports.coshConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"MXxE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResize=t,exports.cropAndResizeConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(t){const{inputs:o,backend:s,attrs:a}=t,{image:n,boxes:r,boxInd:l}=o,{cropSize:c,method:i,extrapolationValue:u}=a,[f,d,p,h]=n.shape,v=r.shape[0],[b,m]=c,x=(0,e.buffer)([v,b,m,h],"float32"),M=s.data.get(r.dataId).values,g=s.data.get(l.dataId).values,k=s.data.get(n.dataId).values,z=e.util.computeStrides(n.shape),I=e.util.computeStrides(x.shape);for(let e=0;e<v;e++){const t=4*e,o=M[t],s=M[t+1],a=M[t+2],n=M[t+3],r=g[e];if(r>=f)continue;const l=b>1?(a-o)*(d-1)/(b-1):0,c=m>1?(n-s)*(p-1)/(m-1):0;for(let f=0;f<b;f++){const t=b>1?o*(d-1)+f*l:.5*(o+a)*(d-1);if(t<0||t>d-1)for(let o=0;o<m;o++)for(let t=0;t<h;t++){const s=t+o*I[2]+f*I[1]+e*I[0];x.values[s]=u}else if("bilinear"===i){const o=Math.floor(t),a=Math.ceil(t),l=t-o;for(let t=0;t<m;t++){const i=m>1?s*(p-1)+t*c:.5*(s+n)*(p-1);if(i<0||i>p-1){for(let o=0;o<h;o++){const s=o+t*I[2]+f*I[1]+e*I[0];x.values[s]=u}continue}const d=Math.floor(i),v=Math.ceil(i),b=i-d;for(let s=0;s<h;s++){let n=s+d*z[2]+o*z[1]+r*z[0];const c=k[n],i=k[n=s+v*z[2]+o*z[1]+r*z[0]],u=k[n=s+d*z[2]+a*z[1]+r*z[0]],p=c+(i-c)*b,h=u+(k[n=s+v*z[2]+a*z[1]+r*z[0]]-u)*b;n=s+t*I[2]+f*I[1]+e*I[0],x.values[n]=p+(h-p)*l}}}else for(let o=0;o<m;++o){const a=m>1?s*(p-1)+o*c:.5*(s+n)*(p-1);if(a<0||a>p-1){for(let t=0;t<h;t++){const s=t+o*I[2]+f*I[1]+e*I[0];x.values[s]=u}continue}const l=Math.round(a),i=Math.round(t);for(let t=0;t<h;t++){const s=t+l*z[2]+i*z[1]+r*z[0],a=t+o*I[2]+f*I[1]+e*I[0];x.values[a]=k[s]}}}}return s.makeTensorInfo(x.shape,x.dtype,x.values)}const o={kernelName:e.CropAndResize,backendName:"cpu",kernelFunc:t};exports.cropAndResizeConfig=o;
},{"@tensorflow/tfjs-core":"nPFy"}],"qJkZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumprod=n,exports.cumprodConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose");function n(n){const{inputs:r,backend:o,attrs:a}=n,{x:p}=r,{axis:i,exclusive:u,reverse:c}=a;(0,t.assertNotComplex)(p,"cumprod");const l=e.backend_util.getAxesPermutation([i],p.shape.length);let d=p;null!=l&&(d=(0,s.transpose)({inputs:{x:p},backend:o,attrs:{perm:l}}));const m=e.backend_util.getInnerMostAxes(1,p.shape.length)[0];if(m!==d.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+`axis=${d.shape.length-1} but got axis=${m}`);const h=(0,e.upcastType)(d.dtype,"int32"),x=e.util.makeOnesTypedArray(e.util.sizeFromShape(d.shape),h),f=o.data.get(d.dataId).values,g=d.shape[d.shape.length-1],k=c?(e,t)=>e+g-t-1:(e,t)=>e+t;for(let e=0;e<f.length;e+=g)for(let t=0;t<g;t++){const s=k(e,t);if(0===t)x[s]=u?1:f[s];else{const n=k(e,t-1);x[s]=u?f[n]*x[n]:f[s]*x[n]}}const b=o.makeTensorInfo(d.shape,h,x);if(null!=l){const t=e.backend_util.getUndoAxesPermutation(l),n=(0,s.transpose)({inputs:{x:b},backend:o,attrs:{perm:t}});return o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(d),n}return b}const r={kernelName:e.Cumprod,backendName:"cpu",kernelFunc:n};exports.cumprodConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Transpose":"WjPF"}],"KLnz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=n,exports.cumsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose");function n(n){const{inputs:r,backend:o,attrs:a}=n,{x:u}=r,{axis:i,exclusive:c,reverse:p}=a;(0,t.assertNotComplex)(u,"cumsum");const l=e.backend_util.getAxesPermutation([i],u.shape.length);let m=u;null!=l&&(m=(0,s.transpose)({inputs:{x:u},backend:o,attrs:{perm:l}}));const d=e.backend_util.getInnerMostAxes(1,u.shape.length)[0];if(d!==m.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+`axis=${m.shape.length-1} but got axis=${d}`);const h=(0,e.upcastType)(m.dtype,"int32"),x=e.util.makeZerosTypedArray(e.util.sizeFromShape(m.shape),h),f=o.data.get(m.dataId).values,g=m.shape[m.shape.length-1],k=p?(e,t)=>e+g-t-1:(e,t)=>e+t;for(let e=0;e<f.length;e+=g)for(let t=0;t<g;t++){const s=k(e,t);if(0===t)x[s]=c?0:f[s];else{const n=k(e,t-1);x[s]=c?f[n]+x[n]:f[s]+x[n]}}const b=o.makeTensorInfo(m.shape,h,x);if(null!=l){const t=e.backend_util.getUndoAxesPermutation(l),n=(0,s.transpose)({inputs:{x:b},backend:o,attrs:{perm:t}});return o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(m),n}return b}const r={kernelName:e.Cumsum,backendName:"cpu",kernelFunc:n};exports.cumsumConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Transpose":"WjPF"}],"z7bO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBincount=t,exports.denseBincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Bincount_impl");function t(e){const{inputs:t,backend:r,attrs:o}=e,{x:s,weights:u}=t,{size:a,binaryOutput:i}=o;if(1===s.shape.length){const e=r.data.get(s.dataId).values,t=r.data.get(u.dataId).values,o=(0,n.bincountImpl)(e,t,u.dtype,u.shape,a);return r.makeTensorInfo([a],u.dtype,o)}if(2===s.shape.length){const e=r.bufferSync(s),t=r.bufferSync(u),o=(0,n.bincountReduceImpl)(e,t,a,i);return r.makeTensorInfo(o.shape,u.dtype,o.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+`${s.shape.length}.`)}const r={kernelName:e.DenseBincount,backendName:"cpu",kernelFunc:t};exports.denseBincountConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Bincount_impl":"fQVq"}],"hw0x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=t,exports.depthToSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(t){const{inputs:o,backend:a,attrs:r}=t,{x:s}=o,{blockSize:n,dataFormat:p}=r;e.util.assert("NHWC"===p,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${p}`);const c=s.shape[0],l=s.shape[1],d=s.shape[2],f=s.shape[3],u=l*n,h=d*n,i=f/(n*n),k=a.data.get(s.dataId).values,S=new Float32Array(c*u*h*i);let T=0;for(let e=0;e<c;++e)for(let t=0;t<u;++t){const o=Math.floor(t/n),a=t%n;for(let t=0;t<h;++t){const r=Math.floor(t/n),s=(a*n+t%n)*i;for(let t=0;t<i;++t){const a=t+s+f*(r+d*(o+l*e));S[T++]=k[a]}}}return a.makeTensorInfo([c,u,h,i],s.dtype,S)}const o={kernelName:e.DepthToSpace,backendName:"cpu",kernelFunc:t};exports.depthToSpaceConfig=o;
},{"@tensorflow/tfjs-core":"nPFy"}],"eDJF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNative=i,exports.depthwiseConv2dNativeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function i(i){const{inputs:s,backend:n,attrs:o}=i,{x:r,filter:d}=s,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o;(0,t.assertNotComplex)([r,d],"depthwiseConv2DNative");const h=e.util.computeStrides(r.shape),p=e.util.computeStrides(d.shape);let f=u;null==f&&(f=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(a,f),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${a} and dilations '${f}'`);const v=e.backend_util.computeConv2DInfo(r.shape,d.shape,a,f,l,c,!0),{filterHeight:C,filterWidth:g,dilationHeight:m,dilationWidth:w,padInfo:N}=v,b=N.left,k=N.top,x=v.outChannels/v.inChannels,H=new e.TensorBuffer(v.outShape,r.dtype),I=n.data.get(r.dataId).values,S=n.data.get(d.dataId).values,W=H.values;for(let e=0;e<v.batchSize;++e){const t=e*h[0],i=e*H.strides[0];for(let e=0;e<v.outHeight;++e){const s=i+e*H.strides[1],n=e*v.strideHeight-k;for(let e=0;e<C;++e){const i=n+e*m;if(i<0||i>=v.inHeight)continue;const o=e*p[0],r=t+i*h[1];for(let e=0;e<v.outWidth;++e){const t=s+e*H.strides[2],i=e*v.strideWidth-b;for(let e=0;e<g;++e){const s=i+e*w;if(s<0||s>=v.inWidth)continue;const n=o+e*p[1],d=r+s*v.inChannels;let a=t,l=n;for(let e=0;e<v.inChannels;++e){const t=I[d+e];for(let e=0;e<x;++e)W[a+e]+=t*S[l+e];a+=x,l+=x}}}}}}return n.makeTensorInfo(H.shape,H.dtype,H.values)}const s={kernelName:e.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:i};exports.depthwiseConv2dNativeConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"P3Ds":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=o,exports.depthwiseConv2dNativeBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:n,attrs:i}=o,{x:r,dy:s}=a,{strides:d,dilations:p,pad:l,dimRoundingMode:h,filterShape:c}=i;(0,t.assertNotComplex)([r,s],"depthwiseConv2dNativeBackpropFilter");const f=e.backend_util.computeConv2DInfo(r.shape,c,d,p,l,h,!0),{strideHeight:u,strideWidth:v,filterHeight:C,filterWidth:g}=f,k=new e.TensorBuffer(f.filterShape,"float32"),m=f.padInfo.left,w=f.padInfo.top,M=f.outChannels/f.inChannels,x=n.data.get(r.dataId).values,B=new e.TensorBuffer(r.shape,r.dtype,x),N=n.data.get(s.dataId).values,F=new e.TensorBuffer(s.shape,s.dtype,N);for(let e=0;e<C;++e){const t=Math.max(0,Math.ceil((w-e)/u)),o=Math.min(f.outHeight,(f.inHeight+w-e)/u);for(let a=0;a<g;++a){const n=Math.max(0,Math.ceil((m-a)/v)),i=Math.min(f.outWidth,(f.inWidth+m-a)/v);for(let r=0;r<f.outChannels;++r){const s=Math.trunc(r/M),d=r%M;let p=0;for(let l=0;l<f.batchSize;++l)for(let d=t;d<o;++d){const t=e+d*u-w;for(let e=n;e<i;++e){const o=a+e*v-m;p+=B.get(l,t,o,s)*F.get(l,d,e,r)}}k.set(p,e,a,s,d)}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const a={kernelName:e.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:o};exports.depthwiseConv2dNativeBackpropFilterConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"iwqp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=o,exports.depthwiseConv2dNativeBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:i,attrs:n}=o,{dy:s,filter:p}=a,{strides:r,dilations:d,pad:u,dimRoundingMode:l,inputShape:c}=n;(0,t.assertNotComplex)([s,p],"depthwiseConv2DNativeBackpropInput");const h=e.util.computeStrides(s.shape),f=e.util.computeStrides(p.shape),v=e.backend_util.computeConv2DInfo(c,p.shape,r,d,u,l,!0),m=new e.TensorBuffer(v.inShape,"float32"),k=m.values,[C,I,g]=m.strides,M=i.data.get(s.dataId).values,[N,w,x]=h,B=i.data.get(p.dataId).values,[b,S,H]=f,{batchSize:W,filterHeight:_,filterWidth:y,inChannels:D,inHeight:j,inWidth:q,outChannels:T,outHeight:z,outWidth:F,strideHeight:O,strideWidth:P}=v,R=_-1-v.padInfo.top,A=y-1-v.padInfo.left,E=T/D;for(let e=0;e<W;++e)for(let t=0;t<D;++t)for(let o=0;o<j;++o){const a=o-R,i=Math.max(0,Math.ceil(a/O)),n=Math.min(z,(_+a)/O);for(let s=0;s<q;++s){const p=s-A,r=Math.max(0,Math.ceil(p/P)),d=Math.min(F,(y+p)/P);let u=0;for(let o=i;o<n;++o){const i=o*O-a;for(let a=r;a<d;++a){const n=N*e+w*o+x*a,s=b*(_-1-i)+S*(y-1-(a*P-p))+H*t;for(let e=0;e<E;++e){u+=M[n+(t*E+e)]*B[s+e]}}}k[C*e+I*o+g*s+t]=u}}return i.makeTensorInfo(m.shape,m.dtype,m.values)}const a={kernelName:e.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:o};exports.depthwiseConv2dNativeBackpropInputConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"ci2m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=t,exports.diagConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(t){const{inputs:a,backend:s}=t,{x:o}=a,r=e.util.sizeFromShape(o.shape),n=s.data.get(o.dataId).values,i=(0,e.buffer)([r,r],o.dtype),u=i.values;for(let e=0;e<n.length;e++)u[e*r+e]=n[e];const d=[...o.shape,...o.shape];return s.makeTensorInfo(d,i.dtype,i.values)}const a={kernelName:e.Diag,backendName:"cpu",kernelFunc:t};exports.diagConfig=a;
},{"@tensorflow/tfjs-core":"nPFy"}],"Xezu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2DConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2D,backendName:"cpu",kernelFunc:({inputs:e,backend:i,attrs:o})=>{const{x:a,filter:l}=e,{strides:d,pad:n,dilations:r}=o,s=i,p=s.data.get(a.dataId).values,u=a.shape.length,h=s.data.get(l.dataId).values,c=l.shape.length,{batchSize:f,inHeight:g,inWidth:y,inChannels:I,outHeight:m,outWidth:x,padInfo:D,strideHeight:S,strideWidth:b,filterHeight:H,filterWidth:N,dilationHeight:T,dilationWidth:W,outShape:k}=t.backend_util.computeDilation2DInfo(a.shape,l.shape,d,n,"NHWC",r),v=t.util.sizeFromShape(k),_=k.length,C=t.util.getArrayFromDType(a.dtype,v);for(let F=0;F<f;++F)for(let e=0;e<m;++e){const i=e*S-D.top;for(let o=0;o<x;++o){const d=o*b-D.left;for(let n=0;n<I;++n){let r=Number.MIN_SAFE_INTEGER;for(let e=0;e<H;++e){const o=i+e*T;if(o>=0&&o<g)for(let i=0;i<N;++i){const s=d+i*W;if(s>=0&&s<y){const d=t.util.locToIndex([F,o,s,n],u,t.util.computeStrides(a.shape)),f=t.util.locToIndex([e,i,n],c,t.util.computeStrides(l.shape)),g=p[d]+h[f];g>r&&(r=g)}}}C[t.util.locToIndex([F,e,o,n],_,t.util.computeStrides(k))]=r}}}return{dataId:s.write(t.util.toTypedArray(C,a.dtype),k,a.dtype),shape:k,dtype:a.dtype}}};exports.dilation2DConfig=e;
},{"@tensorflow/tfjs-core":"nPFy"}],"jE6i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2DBackpropFilterConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:e,backend:a,attrs:i})=>{const{x:r,filter:o,dy:d}=e,{strides:s,pad:l,dilations:n}=i,p=a,u=t.util.toNestedArray(r.shape,p.data.get(r.dataId).values),h=t.util.toNestedArray(o.shape,p.data.get(o.dataId).values),{batchSize:c,inHeight:f,inWidth:y,inChannels:g,outHeight:k,outWidth:N,padInfo:D,strideHeight:I,strideWidth:b,filterHeight:m,filterWidth:v,dilationHeight:A,dilationWidth:F,outShape:H}=t.backend_util.computeDilation2DInfo(r.shape,o.shape,s,l,"NHWC",n);t.util.assert(d.rank===H.length,()=>`Error in ${t.Dilation2DBackpropFilter}, dy `+`must have the same rank as output ${H.length}, but got `+`${d.rank}`);const W=t.util.toNestedArray(H,p.data.get(d.dataId).values),_=t.util.makeZerosNestedTypedArray(o.shape,o.dtype);for(let t=0;t<c;++t)for(let e=0;e<k;++e){const a=e*I-D.top;for(let i=0;i<N;++i){const r=i*b-D.left;for(let o=0;o<g;++o){let d=Number.MIN_SAFE_INTEGER,s=0,l=0;for(let e=0;e<m;++e){const i=a+e*A;if(i>=0&&i<f)for(let a=0;a<v;++a){const n=r+a*F;if(n>=0&&n<y){const r=u[t][i][n][o]+h[e][a][o];r>d&&(d=r,s=e,l=a)}}}_[s][l][o]+=W[t][e][i][o]}}}return{dataId:p.write(t.util.toTypedArray(_,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.dilation2DBackpropFilterConfig=e;
},{"@tensorflow/tfjs-core":"nPFy"}],"QSWt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2DBackpropInputConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:e,backend:a,attrs:i})=>{const{x:o,filter:r,dy:d}=e,{strides:n,pad:s,dilations:p}=i,l=a,u=t.util.toNestedArray(o.shape,l.data.get(o.dataId).values),h=t.util.toNestedArray(r.shape,l.data.get(r.dataId).values),{batchSize:c,inHeight:f,inWidth:y,inChannels:g,outHeight:k,outWidth:I,padInfo:N,strideHeight:D,strideWidth:b,filterHeight:m,filterWidth:v,dilationHeight:A,dilationWidth:H,outShape:W}=t.backend_util.computeDilation2DInfo(o.shape,r.shape,n,s,"NHWC",p);t.util.assert(d.rank===W.length,()=>`Error in ${t.Dilation2DBackpropInput}, dy `+`must have the same rank as output ${W.length}, but got `+`${d.rank}`);const _=t.util.toNestedArray(W,l.data.get(d.dataId).values),x=t.util.makeZerosNestedTypedArray(o.shape,o.dtype);for(let t=0;t<c;++t)for(let e=0;e<k;++e){const a=e*D-N.top;for(let i=0;i<I;++i){const o=i*b-N.left;for(let r=0;r<g;++r){let d=Number.MIN_SAFE_INTEGER,n=a<0?0:a,s=o<0?0:o;for(let e=0;e<m;++e){const i=a+e*A;if(i>=0&&i<f)for(let a=0;a<v;++a){const p=o+a*H;if(p>=0&&p<y){const o=u[t][i][p][r]+h[e][a][r];o>d&&(d=o,n=i,s=p)}}}x[t][n][s][r]+=_[t][e][i][r]}}}return{dataId:l.write(t.util.toTypedArray(x,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.dilation2DBackpropInputConfig=e;
},{"@tensorflow/tfjs-core":"nPFy"}],"EoUL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=o,exports.sumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("../utils/zeros_impl"),n=require("./Cast"),a=require("./Identity"),r=require("./Reshape"),i=require("./Transpose");function o(o){const{inputs:u,backend:p,attrs:d}=o,{x:l}=u,{axis:c,keepDims:m}=d;let x;(0,t.assertNotComplex)(l,"sum");const h=(x="bool"===l.dtype?(0,n.cast)({inputs:{x:l},backend:p,attrs:{dtype:"int32"}}):(0,a.identity)({inputs:{x:l},backend:p})).shape.length,k=e.util.parseAxisParam(c,x.shape),b=e.backend_util.getAxesPermutation(k,h);let f=k,I=x;null!=b&&(I=(0,i.transpose)({inputs:{x:x},backend:p,attrs:{perm:b}}),f=e.backend_util.getInnerMostAxes(f.length,h)),e.backend_util.assertAxesAreInnerMostDims("sum",f,I.shape.length);const[g,_]=e.backend_util.computeOutAndReduceShapes(I.shape,f),q=e.backend_util.upcastType(I.dtype,"int32");let y=(0,s.zeros)(p,g,q);const A=e.util.sizeFromShape(_),T=p.data.get(y.dataId).values,v=p.data.get(I.dataId).values;for(let e=0;e<T.length;++e){const t=e*A;let s=0;for(let e=0;e<A;++e)s+=v[t+e];T[e]=s}if(m){const t=e.backend_util.expandShapeToKeepDim(y.shape,k),s=y;y=(0,r.reshape)({inputs:{x:y},backend:p,attrs:{shape:t}}),p.disposeIntermediateTensorInfo(s)}return p.disposeIntermediateTensorInfo(x),null!=b&&p.disposeIntermediateTensorInfo(I),y}const u={kernelName:e.Sum,backendName:"cpu",kernelFunc:o};exports.sumConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../utils/zeros_impl":"NggJ","./Cast":"bZFh","./Identity":"MAl9","./Reshape":"Ut4n","./Transpose":"WjPF"}],"Gy51":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.einsum=u,exports.einsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Multiply"),s=require("./Reshape"),n=require("./Sum"),i=require("./Transpose");function u(u){const{inputs:r,backend:a,attrs:o}=u,{equation:l}=o,p=r,{allDims:c,summedDims:m,idDims:d}=e.backend_util.decodeEinsumEquation(l,p.length);e.backend_util.checkEinsumDimSizes(c.length,d,p);const{path:h,steps:k}=e.backend_util.getEinsumComputePath(m,d),b=k.length;let f=null,g=c.length;const x=[];for(let q=0;q<b;++q){for(const n of k[q]){const{permutationIndices:u,expandDims:r}=e.backend_util.getEinsumPermutation(g,d[n]);let o;e.backend_util.isIdentityPermutation(u)?o=p[n]:(o=(0,i.transpose)({inputs:{x:p[n]},backend:a,attrs:{perm:u}}),x.push(o));const l=o.shape.slice();for(let e=0;e<r.length;++e)l.splice(r[e],0,1);e.util.arraysEqual(o.shape,l)||(o=(0,s.reshape)({inputs:{x:o},backend:a,attrs:{shape:l}}),x.push(o)),null===f?f=o:(f=(0,t.multiply)({inputs:{a:o,b:f},backend:a}),x.push(f))}q<b-1&&(h[q]>=0&&(f=(0,n.sum)({inputs:{x:f},backend:a,attrs:{axis:h[q]-(c.length-g),keepDims:!1}}),x.push(f)),g--)}for(const e of x)e!==f&&a.disposeIntermediateTensorInfo(e);return f}const r={kernelName:e.Einsum,backendName:"cpu",kernelFunc:u};exports.einsumConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Multiply":"V7WM","./Reshape":"Ut4n","./Sum":"EoUL","./Transpose":"WjPF"}],"VzDf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGrad=a,exports.eluGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function a(a){const{inputs:r,backend:o}=a,{dy:s,y:n}=r;(0,t.assertNotComplex)([s,n],"eluGrad");const u=new Float32Array(e.util.sizeFromShape(n.shape)),l=o.data.get(n.dataId).values,d=o.data.get(s.dataId).values;for(let e=0;e<l.length;++e){const t=l[e];u[e]=t>=1?d[e]:d[e]*(t+1)}return o.makeTensorInfo(n.shape,"float32",u)}const r={kernelName:e.EluGrad,backendName:"cpu",kernelFunc:a};exports.eluGradConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"s9Jq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfConfig=exports.erf=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const t=e.backend_util.ERF_P,n=e.backend_util.ERF_A1,u=e.backend_util.ERF_A2,a=e.backend_util.ERF_A3,s=e.backend_util.ERF_A4,c=e.backend_util.ERF_A5,i=(0,r.unaryKernelFunc)(e.Erf,e=>{const r=Math.sign(e),i=Math.abs(e),o=1/(1+t*i);return r*(1-((((c*o+s)*o+a)*o+u)*o+n)*o*Math.exp(-i*i))});exports.erf=i;const o={kernelName:e.Erf,backendName:"cpu",kernelFunc:i};exports.erfConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"DBjm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=t,exports.expandDimsConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Reshape");function t(t){const{inputs:n,backend:r,attrs:i}=t,{input:a}=n,{dim:p}=i,o=a.shape.length,u=a.shape.slice();let c=p;return p<0&&(e.util.assert(-(o+1)<=p,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+p+1),u.splice(c,0,1),(0,s.reshape)({inputs:{x:a},backend:r,attrs:{shape:u}})}const n={kernelName:e.ExpandDims,backendName:"cpu",kernelFunc:t};exports.expandDimsConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./Reshape":"Ut4n"}],"Ymlz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.realDivImpl=exports.realDivConfig=exports.div=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),i=require("../utils/binary_utils");const l=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e/r);exports.realDivImpl=l;const t=(0,i.binaryKernelFunc)(e.RealDiv,l);exports.div=t;const n={kernelName:e.RealDiv,backendName:"cpu",kernelFunc:t};exports.realDivConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"EHf5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fftBatch=m,exports.fftImpl=p;var e=require("@tensorflow/tfjs-core"),n=require("../kernels/Add"),a=require("../kernels/Complex"),t=require("../kernels/Concat"),o=require("../kernels/Identity"),r=require("../kernels/Imag"),s=require("../kernels/Multiply"),i=require("../kernels/Real"),d=require("../kernels/RealDiv"),l=require("../kernels/Slice"),I=require("../kernels/Sub");function m(n,t,o){const r=n.shape,s=r[0],i=r[1],d=o.data.get(n.dataId),I=d.complexTensorInfos.real,m=d.complexTensorInfos.imag,f=[s,i],u=e.util.sizeFromShape(f),c=e.util.getTypedArrayFromDType("float32",u),T=e.util.getTypedArrayFromDType("float32",u);for(let x=0;x<s;x++){const n=(0,l.slice)({inputs:{x:I},backend:o,attrs:{begin:[x,0],size:[1,i]}}),r=(0,l.slice)({inputs:{x:m},backend:o,attrs:{begin:[x,0],size:[1,i]}}),s=(0,a.complex)({inputs:{real:n,imag:r},backend:o}),{real:d,imag:f}=p(s,t,o),u=e.backend_util.mergeRealAndImagArrays(d,f);for(let a=0;a<i;a++){const n=e.backend_util.getComplexWithIndex(u,a);c[x*i+a]=n.real,T[x*i+a]=n.imag}o.disposeIntermediateTensorInfo(n),o.disposeIntermediateTensorInfo(r),o.disposeIntermediateTensorInfo(s)}const k=o.makeTensorInfo(f,"float32",c),g=o.makeTensorInfo(f,"float32",T),b=(0,a.complex)({inputs:{real:k,imag:g},backend:o});return o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(g),b}function p(n,a,t){const r=e.util.sizeFromShape(n.shape),s=t.data.get(n.dataId),i=t.data.get(s.complexTensorInfos.real.dataId).values,l=t.data.get(s.complexTensorInfos.imag.dataId).values;if(f(r)){const s=u(i,l,r,a,t),I=[n.shape[0],n.shape[1]];if(a){const n=t.makeTensorInfo(I,"float32",s.real),a=t.makeTensorInfo(I,"float32",s.imag),i=t.makeTensorInfo([],"float32",e.util.createScalarValue(r,"float32")),l=(0,o.identity)({inputs:{x:i},backend:t}),m=d.realDivConfig.kernelFunc({inputs:{a:n,b:i},backend:t}),p=d.realDivConfig.kernelFunc({inputs:{a:a,b:l},backend:t}),f=t.data.get(m.dataId).values,u=t.data.get(p.dataId).values;return t.disposeIntermediateTensorInfo(n),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(l),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(p),{real:f,imag:u}}return s}{const n=c(e.backend_util.mergeRealAndImagArrays(i,l),r,a);return e.backend_util.splitRealAndImagArrays(n)}}function f(e){return 0==(e&e-1)}function u(o,d,l,m,p){if(1===l)return{real:o,imag:d};const f=e.backend_util.mergeRealAndImagArrays(o,d),c=l/2,T=e.backend_util.complexWithEvenIndex(f),k=T.real,g=T.imag,b=[k.length],x=p.makeTensorInfo(b,"float32",k),y=p.makeTensorInfo(b,"float32",g),h=(0,a.complex)({inputs:{real:x,imag:y},backend:p}),A=e.backend_util.complexWithOddIndex(f),_=A.real,v=A.imag,q=[_.length],F=p.makeTensorInfo(q,"float32",_),C=p.makeTensorInfo(q,"float32",v),R=(0,a.complex)({inputs:{real:F,imag:C},backend:p}),D=u(k,g,c,m,p),S=D.real,z=D.imag,W=[S.length],j=p.makeTensorInfo(W,"float32",S),w=p.makeTensorInfo(W,"float32",z),M=(0,a.complex)({inputs:{real:j,imag:w},backend:p}),O=u(_,v,c,m,p),B=O.real,E=O.imag,P=[B.length],V=p.makeTensorInfo(P,"float32",B),G=p.makeTensorInfo(P,"float32",E),H=(0,a.complex)({inputs:{real:V,imag:G},backend:p}),J=e.backend_util.exponents(l,m),K=[J.real.length],L=p.makeTensorInfo(K,"float32",J.real),N=p.makeTensorInfo(K,"float32",J.imag),Q=(0,a.complex)({inputs:{real:L,imag:N},backend:p}),U=(0,s.multiply)({inputs:{a:Q,b:H},backend:p}),X=(0,n.add)({inputs:{a:M,b:U},backend:p}),Y=(0,I.sub)({inputs:{a:M,b:U},backend:p}),Z=(0,i.real)({inputs:{input:X},backend:p}),$=(0,i.real)({inputs:{input:Y},backend:p}),ee=(0,r.imag)({inputs:{input:X},backend:p}),ne=(0,r.imag)({inputs:{input:Y},backend:p}),ae=(0,t.concat)({inputs:[Z,$],backend:p,attrs:{axis:0}}),te=(0,t.concat)({inputs:[ee,ne],backend:p,attrs:{axis:0}}),oe=p.data.get(ae.dataId).values,re=p.data.get(te.dataId).values;return p.disposeIntermediateTensorInfo(x),p.disposeIntermediateTensorInfo(y),p.disposeIntermediateTensorInfo(h),p.disposeIntermediateTensorInfo(F),p.disposeIntermediateTensorInfo(C),p.disposeIntermediateTensorInfo(R),p.disposeIntermediateTensorInfo(j),p.disposeIntermediateTensorInfo(w),p.disposeIntermediateTensorInfo(M),p.disposeIntermediateTensorInfo(V),p.disposeIntermediateTensorInfo(G),p.disposeIntermediateTensorInfo(H),p.disposeIntermediateTensorInfo(L),p.disposeIntermediateTensorInfo(N),p.disposeIntermediateTensorInfo(Q),p.disposeIntermediateTensorInfo(U),p.disposeIntermediateTensorInfo(X),p.disposeIntermediateTensorInfo(Y),p.disposeIntermediateTensorInfo(Z),p.disposeIntermediateTensorInfo(ee),p.disposeIntermediateTensorInfo($),p.disposeIntermediateTensorInfo(ne),p.disposeIntermediateTensorInfo(ae),p.disposeIntermediateTensorInfo(te),{real:oe,imag:re}}function c(n,a,t){const o=new Float32Array(2*a);for(let r=0;r<a;r++){let s=0,i=0;for(let o=0;o<a;o++){const d=e.backend_util.exponent(r*o,a,t),l=e.backend_util.getComplexWithIndex(n,o);s+=l.real*d.real-l.imag*d.imag,i+=l.real*d.imag+l.imag*d.real}t&&(s/=a,i/=a),e.backend_util.assignToTypedArray(o,s,i,r)}return o}
},{"@tensorflow/tfjs-core":"nPFy","../kernels/Add":"KMQw","../kernels/Complex":"du7s","../kernels/Concat":"qbkR","../kernels/Identity":"MAl9","../kernels/Imag":"qiGA","../kernels/Multiply":"V7WM","../kernels/Real":"fcv6","../kernels/RealDiv":"Ymlz","../kernels/Slice":"moln","../kernels/Sub":"VFZK"}],"BGm9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=r,exports.fftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fft_utils"),s=require("./Reshape");function r(r){const{inputs:n,backend:a}=r,{input:o}=n,p=e.util.sizeFromShape(o.shape),i=o.shape[o.shape.length-1],f=p/i,u=(0,s.reshape)({inputs:{x:o},backend:a,attrs:{shape:[f,i]}}),c=(0,t.fftBatch)(u,!1,a),h=(0,s.reshape)({inputs:{x:c},backend:a,attrs:{shape:o.shape}});return a.disposeIntermediateTensorInfo(u),a.disposeIntermediateTensorInfo(c),h}const n={kernelName:e.FFT,backendName:"cpu",kernelFunc:r};exports.fftConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/fft_utils":"EHf5","./Reshape":"Ut4n"}],"I0wF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=r,exports.fillConfig=void 0;var e=require("@tensorflow/tfjs-core");function r(r){const{backend:t,attrs:l}=r,{shape:n,value:i,dtype:s}=l,f=s||e.util.inferDtype(i),u=e.util.getArrayFromDType(f,e.util.sizeFromShape(n));return o(u,i,f),t.makeTensorInfo(n,f,u)}const t={kernelName:e.Fill,backendName:"cpu",kernelFunc:r};function o(e,r,t){e.fill(r)}exports.fillConfig=t;
},{"@tensorflow/tfjs-core":"nPFy"}],"pS9t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRightConfig=void 0;var e=require("@tensorflow/tfjs-core");const t={kernelName:e.FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:o})=>{const{image:a}=t,s=o,p=e.util.getTypedArrayFromDType(a.dtype,e.util.sizeFromShape(a.shape)),[i,n,d,l]=a.shape,f=s.data.get(a.dataId).values;for(let e=0;e<i;e++){const t=e*d*n*l;for(let e=0;e<n;e++){const r=e*(d*l);for(let e=0;e<d;e++){const o=e*l;for(let a=0;a<l;a++){const s=Math.round(d-e-1),i=t+r+o+a;let n=f[i];if(s>=0&&s<d){n=f[t+r+s*l+a]}p[i]=n}}}}return{dataId:s.write(p,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};exports.flipLeftRightConfig=t;
},{"@tensorflow/tfjs-core":"nPFy"}],"kZyv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivImpl=exports.floorDivConfig=exports.floorDiv=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),o=require("../utils/binary_utils");const i=(0,r.createSimpleBinaryKernelImpl)((e,r)=>Math.floor(e/r));exports.floorDivImpl=i;const l=(0,o.binaryKernelFunc)(e.FloorDiv,i,null,"int32");exports.floorDiv=l;const t={kernelName:e.FloorDiv,backendName:"cpu",kernelFunc:l};exports.floorDivConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"WvBn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedConv2D=i,exports.fusedConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/fused_utils"),t=require("./Add"),n=require("./Conv2D"),a=require("./Reshape");function i(e){const{inputs:i,backend:o,attrs:r}=e,{x:d,filter:p,bias:u,preluActivationWeights:c}=i,{strides:l,pad:f,dataFormat:h,dilations:v,dimRoundingMode:b,activation:k,leakyreluAlpha:m}=r;let C=(0,n.conv2D)({inputs:{x:d,filter:p},backend:o,attrs:{strides:l,pad:f,dataFormat:h,dilations:v,dimRoundingMode:b}});if(u){const e=C;if("NCHW"===h&&1===u.shape.length&&1!==u.shape[0]){const e=(0,a.reshape)({inputs:{x:u},backend:o,attrs:{shape:[u.shape[0],1,1]}});C=(0,t.add)({inputs:{a:C,b:e},backend:o}),o.disposeIntermediateTensorInfo(e)}else C=(0,t.add)({inputs:{a:C,b:u},backend:o});o.disposeIntermediateTensorInfo(e)}if(k){const e=C;if("NCHW"===h&&"prelu"===k&&1===c.shape.length&&1!==c.shape[0]){const e=(0,a.reshape)({inputs:{x:c},backend:o,attrs:{shape:[c.shape[0],1,1]}});C=(0,s.applyActivation)(o,C,k,e,m),o.disposeIntermediateTensorInfo(e)}else C=(0,s.applyActivation)(o,C,k,c,m);o.disposeIntermediateTensorInfo(e)}return C}const o={kernelName:e.FusedConv2D,backendName:"cpu",kernelFunc:i};exports.fusedConv2DConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/fused_utils":"PY5o","./Add":"KMQw","./Conv2D":"fqOO","./Reshape":"Ut4n"}],"EH74":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedDepthwiseConv2D=n,exports.fusedDepthwiseConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fused_utils"),i=require("./Add"),s=require("./DepthwiseConv2dNative");function n(e){const{inputs:n,backend:o,attrs:d}=e,{x:r,filter:a,bias:u,preluActivationWeights:p}=n,{strides:c,pad:l,dataFormat:f,dilations:v,dimRoundingMode:D,activation:h,leakyreluAlpha:m}=d;let C=(0,s.depthwiseConv2dNative)({inputs:{x:r,filter:a},backend:o,attrs:{strides:c,pad:l,dataFormat:f,dilations:v,dimRoundingMode:D}});if(u){const e=C;C=(0,i.add)({inputs:{a:C,b:u},backend:o}),o.disposeIntermediateTensorInfo(e)}if(h){const e=C;C=(0,t.applyActivation)(o,C,h,p,m),o.disposeIntermediateTensorInfo(e)}return C}const o={kernelName:e.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:n};exports.fusedDepthwiseConv2DConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/fused_utils":"PY5o","./Add":"KMQw","./DepthwiseConv2dNative":"eDJF"}],"o5Du":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherNd=t,exports.gatherNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./GatherNd_Impl");function t(t){const{inputs:a,backend:n}=t,{params:s,indices:d}=a,o=e.util.sizeFromShape(s.shape),p=d.shape,i=p[p.length-1],[u,c,l,f]=e.backend_util.prepareAndValidate(s,d);if(0===c)return n.makeTensorInfo(u,s.dtype,[]);const h=n.data.get(d.dataId).values,g=n.bufferSync(s),m=(0,r.gatherNdImpl)(h,g,s.dtype,c,i,l,f,s.shape,o);return n.makeTensorInfo(u,s.dtype,m.values)}const a={kernelName:e.GatherNd,backendName:"cpu",kernelFunc:t};exports.gatherNdConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","./GatherNd_Impl":"ip0J"}],"TZ41":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2=s,exports.gatherV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("./GatherV2_impl"),r=require("./Reshape");function s(s){const{inputs:i,backend:n,attrs:o}=s,{x:u,indices:c}=i,{axis:p,batchDims:h}=o;(0,t.assertNotComplex)([u,c],"gatherV2");const l=e.util.parseAxisParam(p,u.shape)[0],d=n.data.get(c.dataId).values,f=u.shape[l];for(let t=0;t<d.length;++t){const a=d[t];e.util.assert(a<=f-1&&a>=0,()=>`GatherV2: the index value ${a} is not in [0, ${f-1}]`)}let S=h;null==h&&(S=0);const b=e.util.sizeFromShape(c.shape),m=e.backend_util.segment_util.collectGatherOpShapeInfo(u,c,l,S),x=(0,r.reshape)({inputs:{x:u},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),z=(0,r.reshape)({inputs:{x:c},backend:n,attrs:{shape:[m.batchSize,b/m.batchSize]}}),g=[m.batchSize,m.outerSize,b/m.batchSize,m.sliceSize],k=n.bufferSync(z),I=n.bufferSync(x),V=(0,a.gatherV2Impl)(I,k,g);return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(z),n.makeTensorInfo(m.outputShape,V.dtype,V.values)}const i={kernelName:e.GatherV2,backendName:"cpu",kernelFunc:s};exports.gatherV2Config=i;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./GatherV2_impl":"UlYr","./Reshape":"Ut4n"}],"JtLL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=r,exports.ifftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fft_utils"),s=require("./Reshape");function r(r){const{inputs:n,backend:i}=r,{input:a}=n,o=e.util.sizeFromShape(a.shape),p=a.shape[a.shape.length-1],f=o/p,u=(0,s.reshape)({inputs:{x:a},backend:i,attrs:{shape:[f,p]}}),c=(0,t.fftBatch)(u,!0,i),h=(0,s.reshape)({inputs:{x:c},backend:i,attrs:{shape:a.shape}});return i.disposeIntermediateTensorInfo(u),i.disposeIntermediateTensorInfo(c),h}const n={kernelName:e.IFFT,backendName:"cpu",kernelFunc:r};exports.ifftConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/fft_utils":"EHf5","./Reshape":"Ut4n"}],"yiXL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteConfig=exports.isFinite=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/unary_utils");const t=(0,i.unaryKernelFunc)(e.IsFinite,e=>Number.isFinite(e)?1:0,"bool");exports.isFinite=t;const n={kernelName:e.IsFinite,backendName:"cpu",kernelFunc:t};exports.isFiniteConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"Oi25":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfConfig=exports.isInf=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/unary_utils");const n=(0,s.unaryKernelFunc)(e.IsInf,e=>Math.abs(e)===1/0?1:0,"bool");exports.isInf=n;const r={kernelName:e.IsInf,backendName:"cpu",kernelFunc:n};exports.isInfConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"KoeD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNConfig=exports.isNaN=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const s=(0,r.unaryKernelFunc)(e.IsNan,e=>Number.isNaN(e)?1:0,"bool");exports.isNaN=s;const o={kernelName:e.IsNan,backendName:"cpu",kernelFunc:s};exports.isNaNConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"e19G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linSpace=r,exports.linSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./LinSpace_impl");function r(e){const{backend:r,attrs:t}=e,{start:o,stop:a,num:c}=t,i=(0,n.linSpaceImpl)(o,a,c);return r.makeTensorInfo([i.length],"float32",i)}const t={kernelName:e.LinSpace,backendName:"cpu",kernelFunc:r};exports.linSpaceConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","./LinSpace_impl":"l60F"}],"EBTn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pConfig=exports.log1p=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const r=(0,o.unaryKernelFunc)(e.Log1p,e=>Math.log1p(e));exports.log1p=r;const t={kernelName:e.Log1p,backendName:"cpu",kernelFunc:r};exports.log1pConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"ck0g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAndImpl=exports.logicalAndConfig=exports.logicalAnd=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/binary_impl"),o=require("../utils/binary_utils");const r=(0,l.createSimpleBinaryKernelImpl)((e,l)=>e&&l);exports.logicalAndImpl=r;const n=(0,o.binaryKernelFunc)(e.LogicalAnd,r,null,"bool");exports.logicalAnd=n;const i={kernelName:e.LogicalAnd,backendName:"cpu",kernelFunc:n};exports.logicalAndConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"Zap2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNotConfig=exports.logicalNot=void 0;var o=require("@tensorflow/tfjs-core"),e=require("../utils/unary_utils");const t=(0,e.unaryKernelFunc)(o.LogicalNot,o=>o?0:1,"bool");exports.logicalNot=t;const r={kernelName:o.LogicalNot,backendName:"cpu",kernelFunc:t};exports.logicalNotConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"oNw8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOrImpl=exports.logicalOrConfig=exports.logicalOr=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),l=require("../utils/binary_utils");const o=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e||r);exports.logicalOrImpl=o;const i=(0,l.binaryKernelFunc)(e.LogicalOr,o,null,"bool");exports.logicalOr=i;const t={kernelName:e.LogicalOr,backendName:"cpu",kernelFunc:i};exports.logicalOrConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"Ab7Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNConfig=void 0,exports.lRN=o;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:r,attrs:s}=o,{x:n}=a,{depthRadius:c,bias:p,alpha:u,beta:i}=s;(0,t.assertNotComplex)(n,"LRN");const l=n.shape[3],d=l-1,f=r.data.get(n.dataId).values,h=e.util.sizeFromShape(n.shape),N=new Float32Array(h);function m(e){const t=e%l;let o=e-t+Math.max(0,t-c);const a=e-t+Math.min(t+c,d);let r=0;for(;o<=a;o++){const e=f[o];r+=e*e}return r}for(let e=0;e<h;e++){const t=m(e),o=f[e]*Math.pow(p+u*t,-i);N[e]=o}return r.makeTensorInfo(n.shape,n.dtype,N)}const a={kernelName:e.LRN,backendName:"cpu",kernelFunc:o};exports.LRNConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"ECTh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNGradConfig=void 0,exports.lRNGrad=t;var e=require("@tensorflow/tfjs-core"),a=require("../cpu_util");function t(t){const{inputs:r,backend:o,attrs:s}=t,{x:d,y:n,dy:l}=r,{depthRadius:p,bias:u,alpha:i,beta:c}=s;(0,a.assertNotComplex)(l,"LRNGrad");const f=e.util.sizeFromShape(l.shape),h=l.shape[3],N=o.data.get(l.dataId).values,m=o.data.get(d.dataId).values,x=o.data.get(n.dataId).values,v=new Float32Array(f),R=f;for(let e=0;e<R;e++){const a=e%h,t=e-a+Math.max(0,a-p),r=e-a+Math.min(h,a+p+1);let o=0;for(let e=t;e<r;e++)o+=Math.pow(m[e],2);o=i*o+u;for(let s=t;s<r;s++){let a=-2*i*c*m[s]*x[e]/o;e===s&&(a+=Math.pow(o,-c)),a*=N[e],v[s]+=a}}return o.makeTensorInfo(l.shape,d.dtype,v)}const r={kernelName:e.LRNGrad,backendName:"cpu",kernelFunc:t};exports.LRNGradConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"Hr9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=s,exports.maxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("./Max_impl"),n=require("./Transpose_impl");function s(s){const{inputs:r,backend:i,attrs:o}=s,{x:p}=r,{reductionIndices:l,keepDims:u}=o,d=i;let c=p.shape;const m=c.length,x=e.util.parseAxisParam(l,c);let k=x;const _=e.backend_util.getAxesPermutation(k,m);let f=d.data.get(p.dataId).values;if(null!=_){const t=new Array(m);for(let e=0;e<t.length;e++)t[e]=c[_[e]];f=(0,n.transposeImpl)(f,c,p.dtype,_,t),k=e.backend_util.getInnerMostAxes(k.length,m),c=t}(0,t.assertNotComplex)(p,"max"),e.backend_util.assertAxesAreInnerMostDims("max",k,m);const[b,g]=e.backend_util.computeOutAndReduceShapes(c,k),h=e.util.sizeFromShape(g),y=(0,a.maxImpl)(f,h,b,p.dtype),A=d.write(y,b,p.dtype);let I=b;if(u){I=e.backend_util.expandShapeToKeepDim(b,x)}return{dataId:A,shape:I,dtype:p.dtype}}const r={kernelName:e.Max,backendName:"cpu",kernelFunc:s};exports.maxConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Max_impl":"L8WG","./Transpose_impl":"ExvY"}],"UCYz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=r,exports.maxPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils"),i=require("./Identity");function r(r){const{inputs:s,backend:a,attrs:n}=r,{x:l}=s;(0,t.assertNotComplex)(l,"maxPool");const{filterSize:u,strides:d,pad:p,dimRoundingMode:c}=n;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const m=e.backend_util.computePool2DInfo(l.shape,u,d,1,p,c);let x;if(1===m.filterWidth&&1===m.filterHeight&&e.util.arraysEqual(m.inShape,m.outShape))x=(0,i.identity)({inputs:{x:l},backend:a});else{const t=a.data.get(l.dataId).values,i=e.util.computeStrides(l.shape),r=(0,o.pool)(t,l.shape,l.dtype,i,m,"max");x=a.makeTensorInfo(m.outShape,l.dtype,r.values)}return x}const s={kernelName:e.MaxPool,backendName:"cpu",kernelFunc:r};exports.maxPoolConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../utils/pool_utils":"XmpV","./Identity":"MAl9"}],"WraG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3D=a,exports.maxPool3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../cpu_util"),t=require("../utils/pool_utils");function a(a){const{inputs:s,backend:r,attrs:l}=a,{x:n}=s,{filterSize:u,strides:i,pad:d,dimRoundingMode:p,dataFormat:c}=l;(0,o.assertNotComplex)(n,"maxPool3d");const m=e.backend_util.computePool3DInfo(n.shape,u,i,1,d,p,c),x=r.data.get(n.dataId).values,f=(0,t.pool3d)(x,n.shape,n.dtype,e.util.computeStrides(n.shape),m,"max");return r.makeTensorInfo(f.shape,"float32",f.values)}const s={kernelName:e.MaxPool3D,backendName:"cpu",kernelFunc:a};exports.maxPool3DConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../utils/pool_utils":"XmpV"}],"LcRz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DGrad=i,exports.maxPool3DGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils");function i(i){const{inputs:r,backend:n,attrs:f}=i,{dy:l,input:a}=r,{filterSize:s,strides:d,pad:u,dimRoundingMode:c}=f;(0,t.assertNotComplex)([l,a],"maxPool3DGrad");const p=e.backend_util.computePool3DInfo(a.shape,s,d,1,u,c),h=n.bufferSync(a),m=(0,o.maxPool3dPositions)(h,p),x=p.strideDepth,D=p.strideHeight,g=p.strideWidth,P=p.dilationDepth,b=p.dilationHeight,v=p.dilationWidth,k=p.effectiveFilterDepth,M=p.effectiveFilterHeight,y=p.effectiveFilterWidth,G=k-1-p.padInfo.front,H=y-1-p.padInfo.left,I=M-1-p.padInfo.top,W=(0,e.buffer)(a.shape,"float32"),_=n.bufferSync(l);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let o=0;o<p.inDepth;++o)for(let i=0;i<p.inHeight;++i)for(let r=0;r<p.inWidth;++r){const n=o-G,f=i-I,l=r-H;let a=0;for(let o=0;o<k;o+=P){const i=(n+o)/x;if(!(i<0||i>=p.outDepth||Math.floor(i)!==i))for(let r=0;r<M;r+=b){const n=(f+r)/D;if(!(n<0||n>=p.outHeight||Math.floor(n)!==n))for(let f=0;f<y;f+=v){const s=(l+f)/g;if(s<0||s>=p.outWidth||Math.floor(s)!==s)continue;const d=k*M*y-1-m.get(e,i,n,s,t)===o*M*y+r*y+f?1:0;0!==d&&(a+=_.get(e,i,n,s,t)*d)}}}W.set(a,e,o,i,r,t)}return n.makeTensorInfo(W.shape,W.dtype,W.values)}const r={kernelName:e.MaxPool3DGrad,backendName:"cpu",kernelFunc:i};exports.maxPool3DGradConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../utils/pool_utils":"XmpV"}],"NybX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGrad=a,exports.maxPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils");function a(a){const{inputs:i,backend:r,attrs:l}=a,{dy:s,input:n,output:d}=i,f=n;(0,t.assertNotComplex)([n,d],"maxPoolGrad");const{filterSize:u,strides:p,pad:c,dimRoundingMode:h}=l,g=e.backend_util.computePool2DInfo(f.shape,u,p,1,c,h),m=r.data.get(f.dataId).values,x=(0,e.buffer)(g.outShape,f.dtype,(0,o.maxPoolPositions)(m,f.shape,f.dtype,g).values),v=g.strideHeight,P=g.strideWidth,b=g.dilationHeight,k=g.dilationWidth,I=g.effectiveFilterHeight,y=g.effectiveFilterWidth,G=y-1-g.padInfo.left,H=I-1-g.padInfo.top,M=(0,e.buffer)(f.shape,"float32"),W=r.data.get(s.dataId).values,_=(0,e.buffer)(s.shape,"float32",W);for(let e=0;e<g.batchSize;++e)for(let t=0;t<g.inChannels;++t)for(let o=0;o<g.inHeight;++o)for(let a=0;a<g.inWidth;++a){const i=o-H,r=a-G;let l=0;for(let o=0;o<I;o+=b){const a=(i+o)/v;if(!(a<0||a>=g.outHeight||Math.floor(a)!==a))for(let i=0;i<y;i+=k){const s=(r+i)/P;if(s<0||s>=g.outWidth||Math.floor(s)!==s)continue;const n=I*y-1-x.get(e,a,s,t)===o*y+i?1:0;0!==n&&(l+=_.get(e,a,s,t)*n)}}M.set(l,e,o,a,t)}return r.makeTensorInfo(M.shape,M.dtype,M.values)}const i={kernelName:e.MaxPoolGrad,backendName:"cpu",kernelFunc:a};exports.maxPoolGradConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","../utils/pool_utils":"XmpV"}],"qts5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxImpl=t;var e=require("@tensorflow/tfjs-core"),o=require("../utils/pool_utils");function t(t,r,s,l,u){const i=e.util.computeStrides(r),a=(0,o.pool)(t,r,s,i,u,"max"),n=(0,o.maxPoolPositions)(t,r,s,u,!0,l);return[a.values,n.values]}
},{"@tensorflow/tfjs-core":"nPFy","../utils/pool_utils":"XmpV"}],"RsQt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("./MaxPoolWithArgmax_impl");const o={kernelName:e.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:o,attrs:r,backend:p})=>{const{x:i}=o,{filterSize:d,strides:s,pad:l,includeBatchInIndex:n}=r,u=p;(0,t.assertNotComplex)(i,"MaxPoolWithArgmax");const x=u.data.get(i.dataId).values,c=e.backend_util.computePool2DInfo(i.shape,d,s,[1,1],l),[h,m]=(0,a.maxPoolWithArgmaxImpl)(x,i.shape,i.dtype,n,c),g=u.write(h,c.outShape,i.dtype),P=u.write(m,c.outShape,i.dtype);return[{dataId:g,shape:c.outShape,dtype:i.dtype},{dataId:P,shape:c.outShape,dtype:"int32"}]}};exports.maxPoolWithArgmaxConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./MaxPoolWithArgmax_impl":"qts5"}],"fMkA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mean=n,exports.meanConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Cast"),t=require("./RealDiv"),a=require("./Sum");function n(n){const{inputs:r,backend:o,attrs:i}=n,{x:u}=r,{axis:p,keepDims:c}=i,d=e.util.parseAxisParam(p,u.shape),m=e.backend_util.computeOutAndReduceShapes(u.shape,d)[1],l=e.util.sizeFromShape(m),f=[],k=o.makeTensorInfo([],"float32",new Float32Array([l]));f.push(k);const x=(0,s.cast)({inputs:{x:u},backend:o,attrs:{dtype:"float32"}});f.push(x);const b=(0,t.div)({inputs:{a:x,b:k},backend:o});f.push(b);const h=(0,a.sum)({inputs:{x:b},backend:o,attrs:{axis:p,keepDims:c}});return f.forEach(e=>o.disposeIntermediateTensorInfo(e)),h}const r={kernelName:e.Mean,backendName:"cpu",kernelFunc:n};exports.meanConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Cast":"bZFh","./RealDiv":"Ymlz","./Sum":"EoUL"}],"DXPk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=r,exports.minConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Reshape"),n=require("./Transpose");function r(r){const{inputs:a,backend:o,attrs:i}=r,{x:p}=a,{axis:u,keepDims:l}=i;(0,t.assertNotComplex)(p,"min");const c=e.util.parseAxisParam(u,p.shape);let d=c;const m=e.backend_util.getAxesPermutation(d,p.shape.length);let h=p;null!=m&&(h=(0,n.transpose)({inputs:{x:p},backend:o,attrs:{perm:m}}),d=e.backend_util.getInnerMostAxes(d.length,p.shape.length)),e.backend_util.assertAxesAreInnerMostDims("min",d,h.shape.length);const[k,x]=e.backend_util.computeOutAndReduceShapes(h.shape,d),f=e.util.sizeFromShape(x),b=e.util.makeZerosTypedArray(e.util.sizeFromShape(k),h.dtype),g=o.data.get(h.dataId).values;for(let e=0;e<b.length;++e){const t=e*f;let s=g[t];for(let e=0;e<f;++e){const n=g[t+e];(Number.isNaN(n)||n<s)&&(s=n)}b[e]=s}null!=m&&o.disposeIntermediateTensorInfo(h);const I=o.makeTensorInfo(k,h.dtype,b);if(l){const t=e.backend_util.expandShapeToKeepDim(k,c),n=(0,s.reshape)({inputs:{x:I},backend:o,attrs:{shape:t}});return o.disposeIntermediateTensorInfo(I),n}return I}const a={kernelName:e.Min,backendName:"cpu",kernelFunc:r};exports.minConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Reshape":"Ut4n","./Transpose":"WjPF"}],"G6dD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPad=r,exports.mirrorPadConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:o,backend:a,attrs:p}=r,{x:d}=o,{paddings:i,mode:s}=p;(0,t.assertNotComplex)(d,"mirrorPad");const n=i.map((e,t)=>e[0]+d.shape[t]+e[1]),l=i.map(e=>e[0]),u=i.map((e,t)=>e[0]+d.shape[t]),c="reflect"===s?0:1,m=a.data.get(d.dataId).values,f=d.shape.length,h=e.util.computeStrides(d.shape),x=e.util.sizeFromShape(n),y=n.length,g=e.util.computeStrides(n),P=e.util.getTypedArrayFromDType(d.dtype,x);for(let t=0;t<x;t++){let r=e.util.indexToLoc(t,y,g);for(let e=0;e<y;e++)r[e]<l[e]?r[e]=2*l[e]-r[e]-c:r[e]>=u[e]&&(r[e]=2*(u[e]-1)-r[e]+c);r=r.map((e,t)=>e-l[t]);const o=e.util.locToIndex(r,f,h);P[t]=m[o]}return{dataId:a.write(P,n,d.dtype),shape:n,dtype:d.dtype}}const o={kernelName:e.MirrorPad,backendName:"cpu",kernelFunc:r};exports.mirrorPadConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"Pqrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modImpl=exports.modConfig=exports.mod=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),o=require("../utils/binary_utils");const t=(0,r.createSimpleBinaryKernelImpl)((e,r)=>{const o=e%r;return e<0&&r<0||e>=0&&r>=0?o:(o+r)%r});exports.modImpl=t;const n=(0,o.binaryKernelFunc)(e.Mod,t);exports.mod=n;const s={kernelName:e.Mod,backendName:"cpu",kernelFunc:n};exports.modConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"EqLD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=o,exports.softmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Exp"),t=require("./Max"),n=require("./RealDiv"),a=require("./Reshape"),r=require("./Sub"),i=require("./Sum");function o(o){const{inputs:p,backend:d,attrs:u}=o,{logits:m}=p,{dim:c}=u,x=m.shape.length;let f=c;if(-1===f&&(f=x-1),f!==x-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${x} and dim was ${f}`);const b=e.util.parseAxisParam([f],m.shape),k=(0,t.max)({inputs:{x:m},backend:d,attrs:{reductionIndices:b,keepDims:!1}}),l=e.backend_util.expandShapeToKeepDim(k.shape,b),I=(0,a.reshape)({inputs:{x:k},backend:d,attrs:{shape:l}}),h=(0,r.sub)({inputs:{a:m,b:I},backend:d}),q=(0,s.exp)({inputs:{x:h},backend:d}),T=(0,i.sum)({inputs:{x:q},backend:d,attrs:{axis:b,keepDims:!1}}),g=(0,a.reshape)({inputs:{x:T},backend:d,attrs:{shape:l}}),v=(0,n.div)({inputs:{a:q,b:g},backend:d});return d.disposeIntermediateTensorInfo(k),d.disposeIntermediateTensorInfo(I),d.disposeIntermediateTensorInfo(h),d.disposeIntermediateTensorInfo(q),d.disposeIntermediateTensorInfo(T),d.disposeIntermediateTensorInfo(g),v}const p={kernelName:e.Softmax,backendName:"cpu",kernelFunc:o};exports.softmaxConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","./Exp":"Z9b0","./Max":"Hr9E","./RealDiv":"Ymlz","./Reshape":"Ut4n","./Sub":"VFZK","./Sum":"EoUL"}],"I37o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=i,exports.multinomialConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=a(require("seedrandom")),r=require("../cpu_util"),n=require("./Softmax");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function i(o){const{inputs:a,backend:i,attrs:l}=o,{logits:s}=a,{numSamples:u,seed:f,normalized:p}=l;(0,r.assertNotComplex)(s,"multinomial");const c=p?s:(0,n.softmax)({inputs:{logits:s},backend:i,attrs:{dim:-1}}),d=c.shape[0],m=c.shape[1],g=i.data.get(c.dataId).values,y=[d,u],b=e.util.makeZerosTypedArray(e.util.sizeFromShape(y),"int32");for(let e=0;e<d;++e){const r=e*m,n=new Float32Array(m-1);n[0]=g[r];for(let e=1;e<n.length;++e)n[e]=n[e-1]+g[r+e];const o=t.alea(f.toString()),a=e*u;for(let e=0;e<u;++e){const t=o();b[a+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){b[a+e]=r;break}}}return p||i.disposeIntermediateTensorInfo(c),i.makeTensorInfo(y,"int32",b)}const l={kernelName:e.Multinomial,backendName:"cpu",kernelFunc:i};exports.multinomialConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","seedrandom":"Q4CF","../cpu_util":"AWt2","./Softmax":"EqLD"}],"HdNb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3=o,exports.nonMaxSuppressionV3Config=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../cpu_util");const s=e.kernel_impls.nonMaxSuppressionV3Impl;function o(e){const{inputs:o,backend:r,attrs:t}=e,{boxes:a,scores:p}=o,{maxOutputSize:u,iouThreshold:i,scoreThreshold:c}=t;(0,n.assertNotComplex)(a,"NonMaxSuppression");const l=r.data.get(a.dataId).values,d=r.data.get(p.dataId).values,{selectedIndices:x}=s(l,d,u,i,c);return r.makeTensorInfo([x.length],"int32",new Int32Array(x))}const r={kernelName:e.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:o};exports.nonMaxSuppressionV3Config=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"QuPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV4=o,exports.nonMaxSuppressionV4Config=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../cpu_util");const s=e.kernel_impls.nonMaxSuppressionV4Impl;function o(e){const{inputs:o,backend:t,attrs:r}=e,{boxes:a,scores:p}=o,{maxOutputSize:u,iouThreshold:i,scoreThreshold:d,padToMaxOutputSize:c}=r;(0,n.assertNotComplex)(a,"NonMaxSuppressionPadded");const l=t.data.get(a.dataId).values,x=t.data.get(p.dataId).values,{selectedIndices:f,validOutputs:m}=s(l,x,u,i,d,c);return[t.makeTensorInfo([f.length],"int32",new Int32Array(f)),t.makeTensorInfo([],"int32",new Int32Array([m]))]}const t={kernelName:e.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:o};exports.nonMaxSuppressionV4Config=t;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"KfNG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV5=n,exports.nonMaxSuppressionV5Config=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../cpu_util");const s=e.kernel_impls.nonMaxSuppressionV5Impl;function n(e){const{inputs:n,backend:t,attrs:r}=e,{boxes:a,scores:p}=n,{maxOutputSize:i,iouThreshold:u,scoreThreshold:c,softNmsSigma:l}=r;(0,o.assertNotComplex)(a,"NonMaxSuppressionWithScore");const d=t.data.get(a.dataId).values,x=t.data.get(p.dataId).values,f=i,m=u,S=c,g=l,{selectedIndices:h,selectedScores:k}=s(d,x,f,m,S,g);return[t.makeTensorInfo([h.length],"int32",new Int32Array(h)),t.makeTensorInfo([k.length],"float32",new Float32Array(k))]}const t={kernelName:e.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:n};exports.nonMaxSuppressionV5Config=t;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"J3iT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHot=t,exports.oneHotConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../cpu_util");function t(t){const{inputs:n,backend:r,attrs:s}=t,{indices:a}=n,{depth:i,onValue:u,offValue:l}=s;(0,o.assertNotComplex)(a,"oneHot");const c=e.util.sizeFromShape(a.shape),p=new Float32Array(c*i);p.fill(l);const f=r.data.get(a.dataId).values;for(let e=0;e<c;++e)f[e]>=0&&f[e]<i&&(p[e*i+f[e]]=u);return r.makeTensorInfo([...a.shape,i],"int32",p)}const n={kernelName:e.OneHot,backendName:"cpu",kernelFunc:t};exports.oneHotConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"M0wi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=o,exports.zerosLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./Complex"),n=require("./Fill"),s=require("./Imag"),t=require("./Real");function o(e){const{inputs:i,backend:p}=e,{x:a}=i;if("string"===a.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===a.dtype){const e=(0,t.real)({inputs:{input:a},backend:p}),n=o({inputs:{x:e},backend:p}),i=(0,s.imag)({inputs:{input:a},backend:p}),d=o({inputs:{x:i},backend:p}),u=(0,r.complex)({inputs:{real:n,imag:d},backend:p});return p.disposeIntermediateTensorInfo(e),p.disposeIntermediateTensorInfo(n),p.disposeIntermediateTensorInfo(i),p.disposeIntermediateTensorInfo(d),u}return(0,n.fill)({backend:p,attrs:{shape:a.shape,value:0,dtype:a.dtype}})}const i={kernelName:e.ZerosLike,backendName:"cpu",kernelFunc:o};exports.zerosLikeConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","./Complex":"du7s","./Fill":"I0wF","./Imag":"qiGA","./Real":"fcv6"}],"bbfc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=o,exports.onesLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Complex"),r=require("./Fill"),s=require("./Imag"),i=require("./Real"),t=require("./ZerosLike");function o(e){const{inputs:p,backend:a}=e,{x:d}=p;if("string"===d.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===d.dtype){const e=(0,i.real)({inputs:{input:d},backend:a}),r=o({inputs:{x:e},backend:a}),p=(0,s.imag)({inputs:{input:d},backend:a}),u=(0,t.zerosLike)({inputs:{x:p},backend:a}),c=(0,n.complex)({inputs:{real:r,imag:u},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(r),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(u),c}return(0,r.fill)({backend:a,attrs:{shape:d.shape,value:1,dtype:d.dtype}})}const p={kernelName:e.OnesLike,backendName:"cpu",kernelFunc:o};exports.onesLikeConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","./Complex":"du7s","./Fill":"I0wF","./Imag":"qiGA","./Real":"fcv6","./ZerosLike":"M0wi"}],"qNzk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pack=a,exports.packConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat"),s=require("./ExpandDims");function a(a){const{inputs:n,backend:r,attrs:c}=a,{axis:p}=c;if(1===n.length)return(0,s.expandDims)({inputs:{input:n[0]},backend:r,attrs:{dim:p}});const i=n[0].shape,o=n[0].dtype;n.forEach(t=>{e.util.assertShapesMatch(i,t.shape,"All tensors passed to stack must have matching shapes"),e.util.assert(o===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],d=n.map(e=>{const t=(0,s.expandDims)({inputs:{input:e},backend:r,attrs:{dim:p}});return u.push(t),t}),h=(0,t.concat)({inputs:d,backend:r,attrs:{axis:p}});return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),h}const n={kernelName:e.Pack,backendName:"cpu",kernelFunc:a};exports.packConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./Concat":"qbkR","./ExpandDims":"DBjm"}],"z1EK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2=a,exports.padV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function a(a){const{inputs:p,backend:o,attrs:r}=a,{x:s}=p,{paddings:d,constantValue:i}=r;(0,t.assertNotComplex)(s,"pad");const n=d.map((e,t)=>e[0]+s.shape[t]+e[1]),u=d.map(e=>e[0]),l=o.data.get(s.dataId).values,c=e.util.sizeFromShape(s.shape),m=s.shape.length,h=e.util.computeStrides(s.shape),f=e.util.sizeFromShape(n),x=n.length,y=e.util.computeStrides(n),g=e.util.getTypedArrayFromDType(s.dtype,f);0!==i&&g.fill(i);for(let t=0;t<c;t++){const a=e.util.indexToLoc(t,m,h).map((e,t)=>e+u[t]);g[e.util.locToIndex(a,x,y)]=l[t]}return{dataId:o.write(g,n,s.dtype),shape:n,dtype:s.dtype}}const p={kernelName:e.PadV2,backendName:"cpu",kernelFunc:a};exports.padV2Config=p;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"CaKS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powImpl=exports.powConfig=exports.pow=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),o=require("../utils/binary_utils");const p=(0,r.createSimpleBinaryKernelImpl)((e,r)=>Math.pow(e,r));exports.powImpl=p;const t=(0,o.binaryKernelFunc)(e.Pow,p);exports.pow=t;const n={kernelName:e.Pow,backendName:"cpu",kernelFunc:t};exports.powConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/binary_impl":"WxSo","../utils/binary_utils":"GZZZ"}],"FMra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=n,exports.rangeConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./Range_impl");function n(e){const{backend:n,attrs:t}=e,{start:o,stop:s,dtype:a,step:p}=t,c=(0,r.rangeImpl)(o,s,p,a);return n.makeTensorInfo([c.length],a,c)}const t={kernelName:e.Range,backendName:"cpu",kernelFunc:n};exports.rangeConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","./Range_impl":"zrp9"}],"oSrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalConfig=exports.reciprocal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const c=(0,r.unaryKernelFunc)(e.Reciprocal,e=>1/e);exports.reciprocal=c;const o={kernelName:e.Reciprocal,backendName:"cpu",kernelFunc:c};exports.reciprocalConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"OdX6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=r,exports.resizeBilinearConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:a,backend:i,attrs:o}=r,{images:s}=a,{alignCorners:n,halfPixelCenters:l,size:c}=o;(0,t.assertNotComplex)(s,"resizeBilinear");const u=e.util.computeStrides(s.shape),[f,p]=c,[h,m,d,M]=s.shape,x=i.data.get(s.dataId).values,z=new Float32Array(e.util.sizeFromShape([h,f,p,M])),g=[n&&f>1?m-1:m,n&&p>1?d-1:d],k=[n&&f>1?f-1:f,n&&p>1?p-1:p];let B=0;const C=g[0]/k[0],v=g[1]/k[1];for(let e=0;e<h;e++)for(let t=0;t<f;t++){let r;r=l?C*(t+.5)-.5:C*t;const a=Math.max(0,Math.floor(r)),i=r-a,o=Math.min(m-1,Math.ceil(r)),s=e*u[0]+a*u[1],n=e*u[0]+o*u[1];for(let e=0;e<p;e++){let t;t=l?v*(e+.5)-.5:v*e;const r=Math.max(0,Math.floor(t)),a=t-r,o=Math.min(d-1,Math.ceil(t)),c=s+r*u[2],f=n+r*u[2],p=s+o*u[2],h=n+o*u[2];for(let e=0;e<M;e++){const t=x[c+e],r=x[f+e],o=t+(x[p+e]-t)*a,s=o+(r+(x[h+e]-r)*a-o)*i;z[B++]=s}}}return i.makeTensorInfo([h,f,p,M],"float32",z)}const a={kernelName:e.ResizeBilinear,backendName:"cpu",kernelFunc:r};exports.resizeBilinearConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"bZ47":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearGrad=t,exports.resizeBilinearGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../cpu_util");function t(t){const{inputs:a,backend:o,attrs:i}=t,{images:s,dy:n}=a,{alignCorners:l}=i;(0,r.assertNotComplex)([n,s],"resizeBilinearGrad");const c=e.util.computeStrides(s.shape),[d,u,f,p]=s.shape,[,h,m]=n.shape,M=new Float32Array(d*u*f*p),g=[l&&h>1?u-1:u,l&&m>1?f-1:f],k=[l&&h>1?h-1:h,l&&m>1?m-1:m],x=g[0]/k[0],z=g[1]/k[1],B=o.data.get(n.dataId).values;let G=0;for(let e=0;e<d;e++){const r=e*c[0];for(let e=0;e<h;e++){const t=e*x,a=Math.floor(t),o=Math.min(Math.ceil(t),u-1),i=r+a*c[1],s=r+o*c[1],n=t-a,l=1-n;for(let e=0;e<m;e++){const r=e*z,t=Math.floor(r),a=Math.min(Math.ceil(r),f-1),o=r-t,d=1-o,u=i+t*c[2],h=i+a*c[2],m=s+t*c[2],g=s+a*c[2],k=l*d,x=l*o,v=n*d,C=n*o;for(let e=0;e<p;e++){const r=B[G++];M[u+e]+=r*k,M[h+e]+=r*x,M[m+e]+=r*v,M[g+e]+=r*C}}}}return o.makeTensorInfo([d,f,u,p],"float32",M)}const a={kernelName:e.ResizeBilinearGrad,backendName:"cpu",kernelFunc:t};exports.resizeBilinearGradConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"Z38C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=r,exports.resizeNearestNeighborConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:o,backend:s,attrs:a}=r,{images:n}=o,{alignCorners:i,halfPixelCenters:l,size:c}=a;(0,t.assertNotComplex)(n,"resizeNearestNeighbor");const u=e.util.computeStrides(n.shape),[h,f]=c,[p,N,d,g]=n.shape,m=s.data.get(n.dataId).values,M=new Float32Array(p*h*f*g),b=[i&&h>1?N-1:N,i&&f>1?d-1:d],x=[i&&h>1?h-1:h,i&&f>1?f-1:f],z=b[0]/x[0],k=b[1]/x[1];let C=0;for(let e=0;e<p;e++){const t=e*u[0];for(let e=0;e<h;e++){const r=l?z*(e+.5):z*e;let o=Math.min(N-1,i?Math.round(r):Math.floor(r));l&&(o=Math.max(0,o));const s=t+o*u[1];for(let e=0;e<f;e++){const t=l?k*(e+.5):k*e;let r=Math.min(d-1,i?Math.round(t):Math.floor(t));l&&(r=Math.max(0,r));const o=s+r*u[2];for(let e=0;e<g;e++){const t=m[o+e];M[C++]=t}}}}return s.makeTensorInfo([p,h,f,g],n.dtype,M)}const o={kernelName:e.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:r};exports.resizeNearestNeighborConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"wl4g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighborGrad=r,exports.resizeNearestNeighborGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:o,backend:a,attrs:s}=r,{images:n,dy:i}=o,{alignCorners:l}=s;(0,t.assertNotComplex)([i,n],"resizeNearestNeighborGrad");const c=e.util.computeStrides(n.shape),f=e.util.computeStrides(i.shape),[h,u,d,p]=n.shape,[,M,N]=i.shape,g=new Float32Array(h*u*d*p),m=a.data.get(i.dataId).values,b=[l&&M>1?u-1:u,l&&N>1?d-1:d],k=[l&&M>1?M-1:M,l&&N>1?N-1:N],x=b[0]/k[0],z=b[1]/k[1],G=1/x,v=1/z,y=2*Math.ceil(G)+2,C=2*Math.ceil(v)+2;for(let e=0;e<h;e++){const t=e*c[0];for(let e=0;e<u;e++){const r=t+e*c[1],o=Math.floor(e*G),a=Math.floor(o-y/2);for(let s=0;s<d;s++){const o=r+s*c[2],n=Math.floor(s*v),i=Math.floor(n-C/2);for(let r=0;r<p;r++){let n=0;for(let o=0;o<y;o++){const c=o+a;if(c<0||c>=M)continue;const h=t+c*f[1],p=c*x;if(e===Math.min(u-1,l?Math.round(p):Math.floor(p)))for(let e=0;e<C;e++){const t=e+i;if(t<0||t>=N)continue;const o=h+t*f[2],a=t*z;s===Math.min(d-1,l?Math.round(a):Math.floor(a))&&(n+=m[o+r])}}g[o+r]=n}}}}return a.makeTensorInfo(n.shape,n.dtype,g)}const o={kernelName:e.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:r};exports.resizeNearestNeighborGradConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"bXbo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=t,exports.reverseConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../cpu_util"),s=require("./Identity");function t(t){const{inputs:n,backend:o,attrs:i}=t,{x:a}=n,{dims:c}=i;(0,r.assertNotComplex)(a,"reverse");const u=a.shape.length,p=e.util.parseAxisParam(c,a.shape);if(0===u)return(0,s.identity)({inputs:{x:a},backend:o});const f=new e.TensorBuffer(a.shape,a.dtype),d=o.bufferSync(a);for(let e=0;e<f.size;e++){const r=f.indexToLoc(e),s=r.slice();p.forEach(e=>s[e]=a.shape[e]-1-s[e]),f.set(d.get(...s),...r)}return o.makeTensorInfo(f.shape,f.dtype,f.values)}const n={kernelName:e.Reverse,backendName:"cpu",kernelFunc:t};exports.reverseConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Identity":"MAl9"}],"n5Gy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffsetConfig=void 0;var e=require("@tensorflow/tfjs-core");const t={kernelName:e.RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:t,attrs:a,backend:r})=>{const{image:o}=t,{radians:s,fillValue:n,center:i}=a,d=r,p=e.util.getTypedArrayFromDType(o.dtype,e.util.sizeFromShape(o.shape)),[f,l,c,u]=o.shape,[h,y]=e.backend_util.getImageCenter(i,l,c),g=Math.sin(s),m=Math.cos(s),b=d.data.get(o.dataId).values;for(let e=0;e<f;e++){const t=e*c*l*u;for(let e=0;e<l;e++){const a=e*(c*u);for(let r=0;r<c;r++){const o=r*u;for(let s=0;s<u;s++){const i=[f,e,r,s],d=i[2],k=i[1];let M=(d-h)*m-(k-y)*g,v=(d-h)*g+(k-y)*m;M=Math.round(M+h),v=Math.round(v+y);let O=n;if("number"!=typeof n&&(O=3===s?255:n[s]),M>=0&&M<c&&v>=0&&v<l){O=b[t+v*(c*u)+M*u+s]}p[t+a+o+s]=O}}}}return{dataId:d.write(p,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.rotateWithOffsetConfig=t;
},{"@tensorflow/tfjs-core":"nPFy"}],"LCbt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundConfig=exports.round=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const o=(0,r.unaryKernelFunc)(e.Round,e=>{const r=Math.floor(e);return e-r<.5?Math.floor(e):e-r>.5?Math.ceil(e):r%2==0?r:r+1});exports.round=o;const n={kernelName:e.Round,backendName:"cpu",kernelFunc:o};exports.roundConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"PYVV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterNd=r,exports.scatterNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Scatter_impl");function r(r){const{inputs:s,backend:c,attrs:a}=r,{indices:n,updates:u}=s,{shape:i}=a,{sliceRank:o,numUpdates:d,sliceSize:p,strides:l,outputSize:f}=e.backend_util.calculateShapes(u,n,i),k=c.bufferSync(n),S=c.bufferSync(u),b=(0,t.scatterImpl)(k,S,i,f,p,d,o,l,0,!0);return c.makeTensorInfo(i,b.dtype,b.values)}const s={kernelName:e.ScatterNd,backendName:"cpu",kernelFunc:r};exports.scatterNdConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","./Scatter_impl":"LcM1"}],"VpxG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchSortedImpl=o;var e=require("@tensorflow/tfjs-core");function t(e,t){let r=0,o=e.length,n=0;for(;r<o;)e[n=Math.floor((r+o)/2)]<t?r=n+1:o=n;return o}function r(e,t){let r=0,o=e.length,n=0;for(;r<o;)e[n=Math.floor((r+o)/2)]<=t?r=n+1:o=n;return o}function o(o,n,l,f,s,u){const c=e.util.getArrayFromDType("int32",l*s);for(let e=0;e<l;++e){const l=o.slice(e*f,(e+1)*f),i=e*s;for(let e=0;e<s;++e)c[i+e]="left"===u?t(l,n[e+i]):r(l,n[e+i])}return c}
},{"@tensorflow/tfjs-core":"nPFy"}],"lw2z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchSorted=t,exports.searchSortedConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./SearchSorted_impl");function t(e){const{inputs:t,backend:a,attrs:s}=e,{sortedSequence:o,values:d}=t,{side:n}=s,c=a.data.get(o.dataId).values,u=a.data.get(d.dataId).values,p=(0,r.searchSortedImpl)(c,u,o.shape[0],o.shape[1],d.shape[1],n);return a.makeTensorInfo(d.shape,"int32",p)}const a={kernelName:e.SearchSorted,backendName:"cpu",kernelFunc:t};exports.searchSortedConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","./SearchSorted_impl":"VpxG"}],"Xbdn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=s,exports.selectConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(s){const{inputs:a,backend:o}=s,{condition:r,t:l,e:n}=a;(0,t.assertNotComplex)([r,l,n],"select");const c=r.shape.length,p=o.data.get(r.dataId).values,u=o.data.get(l.dataId).values,d=o.data.get(n.dataId).values,i=(0,e.upcastType)(l.dtype,n.dtype),h=e.util.makeZerosTypedArray(e.util.sizeFromShape(l.shape),i);let f=0;const g=0===c||c>1||1===l.shape.length?1:e.util.sizeFromShape(l.shape.slice(1));for(let e=0;e<p.length;e++)for(let t=0;t<g;t++)1===p[e]?h[f++]=u[e]:h[f++]=d[e];return o.makeTensorInfo(l.shape,i,h)}const a={kernelName:e.Select,backendName:"cpu",kernelFunc:s};exports.selectConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"NpYo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluConfig=exports.selu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=e.backend_util.SELU_SCALEALPHA,s=e.backend_util.SELU_SCALE,t=(0,r.unaryKernelFunc)(e.Selu,e=>e>=0?s*e:u*(Math.exp(e)-1));exports.selu=t;const l={kernelName:e.Selu,backendName:"cpu",kernelFunc:t};exports.seluConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"TfJL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signConfig=exports.sign=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sign,e=>e<0?-1:e>0?1:0);exports.sign=r;const s={kernelName:e.Sign,backendName:"cpu",kernelFunc:r};exports.signConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"lchD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinConfig=exports.sin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sin,e=>Math.sin(e));exports.sin=r;const s={kernelName:e.Sin,backendName:"cpu",kernelFunc:r};exports.sinConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"FQDi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhConfig=exports.sinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sinh,e=>Math.sinh(e));exports.sinh=r;const s={kernelName:e.Sinh,backendName:"cpu",kernelFunc:r};exports.sinhConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"poI4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusConfig=exports.softplus=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const s=1.1920928955078125e-7,o=Math.log(s)+2,r=(0,t.unaryKernelFunc)(e.Softplus,e=>{const t=e>-o,s=e<o,r=Math.exp(e);let u;return u=s?r:t?e:Math.log(1+r)});exports.softplus=r;const u={kernelName:e.Softplus,backendName:"cpu",kernelFunc:r};exports.softplusConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"rvUz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchND=r,exports.spaceToBatchNDConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./PadV2"),a=require("./Reshape"),n=require("./Transpose");function r(r){const{inputs:p,backend:o,attrs:c}=r,{x:i}=p,{blockShape:u,paddings:d}=c;(0,t.assertNotComplex)([i],"spaceToBatchND");const h=e.util.sizeFromShape(u),l=[[0,0]];l.push(...d);for(let e=1+u.length;e<i.shape.length;++e)l.push([0,0]);const k=s.padV2Config.kernelFunc({inputs:{x:i},backend:o,attrs:{paddings:l,constantValue:0}}),g=e.backend_util.getReshaped(k.shape,u,h,!1),b=e.backend_util.getPermuted(g.length,u.length,!1),f=e.backend_util.getReshapedPermuted(k.shape,u,h,!1),m={x:k},x={shape:g},T=(0,a.reshape)({inputs:m,backend:o,attrs:x}),N={x:T},I={perm:b},_=(0,n.transpose)({inputs:N,backend:o,attrs:I}),q={x:_},B={shape:f},D=(0,a.reshape)({inputs:q,backend:o,attrs:B});return o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(_),D}const p={kernelName:e.SpaceToBatchND,backendName:"cpu",kernelFunc:r};exports.spaceToBatchNDConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./PadV2":"z1EK","./Reshape":"Ut4n","./Transpose":"WjPF"}],"PWDY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseFillEmptyRows=s,exports.sparseFillEmptyRowsConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./SparseFillEmptyRows_impl");function s(e){const{inputs:s,backend:t}=e,{indices:r,values:n,denseShape:o,defaultValue:p}=s;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${o.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==n.shape.length)throw new Error(`Values must be a vector, saw:\n        ${n.shape}`);if(0!==p.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${p.shape}`);const l=t.data.get(r.dataId).values,d=t.data.get(n.dataId).values,i=t.data.get(o.dataId).values,u=t.data.get(p.dataId).values[0],[h,m,w,c,f]=(0,a.sparseFillEmptyRowsImpl)(l,r.shape,r.dtype,d,n.dtype,i,u);return[t.makeTensorInfo(m,r.dtype,h),t.makeTensorInfo([m[0]],n.dtype,w),t.makeTensorInfo([c.length],"bool",new Uint8Array(c.map(e=>Number(e)))),t.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}const t={kernelName:e.SparseFillEmptyRows,backendName:"cpu",kernelFunc:s};exports.sparseFillEmptyRowsConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","./SparseFillEmptyRows_impl":"AbzN"}],"KjjM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseReshape=r,exports.sparseReshapeConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./SparseReshape_impl");function r(e){const{inputs:r,backend:s}=e,{inputIndices:t,inputShape:p,newShape:n}=r;if(2!==t.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${t.shape}`);if(1!==p.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${p.shape}`);if(1!==n.shape.length)throw new Error(`Target shape should be a vector but received shape ${n.shape}`);const o=Array.from(s.data.get(p.dataId).values),h=s.data.get(t.dataId).values,d=Array.from(s.data.get(n.dataId).values),[u,i,c]=(0,a.sparseReshapeImpl)(h,t.shape,t.dtype,o,d);return[s.makeTensorInfo(i,t.dtype,u),s.makeTensorInfo([c.length],n.dtype,new Int32Array(c))]}const s={kernelName:e.SparseReshape,backendName:"cpu",kernelFunc:r};exports.sparseReshapeConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","./SparseReshape_impl":"o2RF"}],"mt8I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentMean=s,exports.sparseSegmentMeanConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./SparseSegmentReduction_impl");function s(e){const{inputs:s,backend:t}=e,{data:n,indices:r,segmentIds:o}=s;if(n.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${r.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const d=t.data.get(n.dataId).values,i=t.data.get(r.dataId).values,p=t.data.get(o.dataId).values,[c,h]=(0,a.sparseSegmentReductionImpl)(d,n.shape,n.dtype,i,p,!0);return t.makeTensorInfo(h,n.dtype,c)}const t={kernelName:e.SparseSegmentMean,backendName:"cpu",kernelFunc:s};exports.sparseSegmentMeanConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","./SparseSegmentReduction_impl":"HayZ"}],"eRVn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentSum=t,exports.sparseSegmentSumConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./SparseSegmentReduction_impl");function t(e){const{inputs:t,backend:a}=e,{data:r,indices:n,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==n.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${n.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${o.shape}`);if(n.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const d=a.data.get(r.dataId).values,i=a.data.get(n.dataId).values,p=a.data.get(o.dataId).values,[u,c]=(0,s.sparseSegmentReductionImpl)(d,r.shape,r.dtype,i,p);return a.makeTensorInfo(c,r.dtype,u)}const a={kernelName:e.SparseSegmentSum,backendName:"cpu",kernelFunc:t};exports.sparseSegmentSumConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","./SparseSegmentReduction_impl":"HayZ"}],"Ovby":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=a,exports.sparseToDenseConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Scatter_impl");function a(a){const{inputs:s,backend:r,attrs:n}=a,{sparseIndices:o,sparseValues:c,defaultValue:u}=s,{outputShape:p}=n,{sliceRank:l,numUpdates:d,sliceSize:i,strides:f,outputSize:b}=e.backend_util.calculateShapes(c,o,p),S=r.bufferSync(o);let k;switch(c.dtype){case"bool":{const e=r.bufferSync(c),a=Boolean(r.data.get(u.dataId).values[0]);k=(0,t.scatterImpl)(S,e,p,b,i,d,l,f,a,!1);break}case"float32":case"int32":{const e=r.bufferSync(c),a=r.data.get(u.dataId).values[0];k=(0,t.scatterImpl)(S,e,p,b,i,d,l,f,a,!1);break}case"string":{const a=r.bufferSync(c),s=e.util.decodeString(r.data.get(u.dataId).values[0]);k=(0,t.scatterImpl)(S,a,p,b,i,d,l,f,s,!1);break}default:throw new Error(`Unsupported type ${c.dtype}`)}return r.makeTensorInfo(p,k.dtype,k.values)}const s={kernelName:e.SparseToDense,backendName:"cpu",kernelFunc:a};exports.sparseToDenseConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","./Scatter_impl":"LcM1"}],"eeCz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitV=s,exports.splitVConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Slice");function s(s){const{inputs:r,backend:i,attrs:n}=s,{x:p}=r,{numOrSizeSplits:a,axis:l}=n,c=e.util.parseAxisParam(l,p.shape)[0],o=e.backend_util.prepareSplitSize(p,a,c),u=new Array(p.shape.length).fill(0),x=p.shape.slice();return o.map(e=>{const s=[...x];s[c]=e;const r=(0,t.slice)({inputs:{x:p},backend:i,attrs:{begin:u,size:s}});return u[c]+=e,r})}const r={kernelName:e.SplitV,backendName:"cpu",kernelFunc:s};exports.splitVConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Slice":"moln"}],"k0N7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");const r={kernelName:e.Square,backendName:"cpu",kernelFunc:({inputs:e,backend:r})=>{const{x:a}=e,s=r;(0,t.assertNotComplex)(a,"square");const o=s.data.get(a.dataId).values,n=new Float32Array(o.length);for(let t=0;t<o.length;++t){const e=o[t];n[t]=e*e}return{dataId:s.write(n,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};exports.squareConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2"}],"CmTU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stepConfig=exports.step=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const r=(0,t.unaryKernelFunc)(e.Step,(e,t)=>{const r=t;return isNaN(e)?NaN:e>0?1:r.alpha});exports.step=r;const s={kernelName:e.Step,backendName:"cpu",kernelFunc:r};exports.stepConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"FEX1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=n,exports.stridedSliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../cpu_util"),i=require("./Reshape"),t=require("./Slice"),r=require("./StridedSlice_impl");function n(n){const{inputs:a,backend:l,attrs:c}=n,{x:p}=a,{begin:d,end:o,strides:u,beginMask:S,endMask:f,ellipsisMask:h,newAxisMask:k,shrinkAxisMask:b}=c;(0,s.assertNotComplex)(p,"stridedSlice");const{finalShapeSparse:m,finalShape:x,isIdentity:g,sliceDim0:I,isSimpleSlice:M,begin:_,end:q,strides:v}=e.slice_util.sliceInfo(p.shape,d,o,u,S,f,h,k,b);let y;if(g)y=(0,i.reshape)({inputs:{x:p},backend:l,attrs:{shape:x}});else if(I||M){e.util.assert(p.shape.length>=1,()=>`Input must have rank at least 1, got: ${p.shape.length}`);const s=e.slice_util.computeOutShape(_,q,v),r=(0,t.slice)({inputs:{x:p},backend:l,attrs:{begin:_,size:s}});y=(0,i.reshape)({inputs:{x:r},backend:l,attrs:{shape:x}}),l.disposeIntermediateTensorInfo(r)}else{const e=l.bufferSync(p),s=(0,r.stridedSliceImpl)(m,e,v,_);y=l.makeTensorInfo(x,s.dtype,s.values)}return y}const a={kernelName:e.StridedSlice,backendName:"cpu",kernelFunc:n};exports.stridedSliceConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Reshape":"Ut4n","./Slice":"moln","./StridedSlice_impl":"L2EX"}],"n5iR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringNGrams=t,exports.stringNGramsConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./StringNGrams_impl");function t(e){const{inputs:t,backend:a,attrs:s}=e,{separator:n,nGramWidths:i,leftPad:o,rightPad:d,padWidth:p,preserveShortSequences:g}=s,{data:m,dataSplits:u}=t,l=a.data.get(m.dataId).values,c=a.data.get(u.dataId).values,[f,N]=(0,r.stringNGramsImpl)(l,c,n,i,o,d,p,g);return[a.makeTensorInfo([f.length],"string",f),a.makeTensorInfo(u.shape,"int32",N)]}const a={kernelName:e.StringNGrams,backendName:"cpu",kernelFunc:t};exports.stringNGramsConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","./StringNGrams_impl":"KhQU"}],"mq73":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringSplit=r,exports.stringSplitConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./StringSplit_impl");function r(t){const{inputs:r,backend:n,attrs:s}=t,{skipEmpty:i}=s,{input:a,delimiter:o}=r;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const p=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values[0],[g,u,d]=(0,e.stringSplitImpl)(p,l,i),c=u.length;return[n.makeTensorInfo([c,2],"int32",g),n.makeTensorInfo([c],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const n={kernelName:t.StringSplit,backendName:"cpu",kernelFunc:r};exports.stringSplitConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./StringSplit_impl":"RAXd"}],"Se80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringToHashBucketFast=s,exports.stringToHashBucketFastConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./StringToHashBucketFast_impl");function s(t){const{inputs:s,backend:r,attrs:n}=t,{numBuckets:a}=n,{input:o}=s;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const u=r.data.get(o.dataId).values,i=(0,e.stringToHashBucketFastImpl)(u,a);return r.makeTensorInfo(o.shape,"int32",i)}const r={kernelName:t.StringToHashBucketFast,backendName:"cpu",kernelFunc:s};exports.stringToHashBucketFastConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./StringToHashBucketFast_impl":"NL6k"}],"GAQp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanConfig=exports.tan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const t=(0,n.unaryKernelFunc)(e.Tan,e=>Math.tan(e));exports.tan=t;const r={kernelName:e.Tan,backendName:"cpu",kernelFunc:t};exports.tanConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"HDxJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhConfig=exports.tanh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const t=(0,n.unaryKernelFunc)(e.Tanh,e=>Math.tanh(e));exports.tanh=t;const r={kernelName:e.Tanh,backendName:"cpu",kernelFunc:t};exports.tanhConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../utils/unary_utils":"mT3T"}],"LGPu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=o,exports.tileConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),r=require("./Tile_impl");function o(e){const{inputs:o,backend:s,attrs:i}=e,{x:n}=o,{reps:l}=i;(0,t.assertNotComplex)(n,"tile");const u=(0,r.tileImpl)(s.bufferSync(n),l);return s.makeTensorInfo(u.shape,u.dtype,u.values)}const s={kernelName:e.Tile,backendName:"cpu",kernelFunc:o};exports.tileConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Tile_impl":"DYEi"}],"BEKo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topK=r,exports.topKConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("./TopK_impl");function r(e){const{inputs:r,backend:s,attrs:p}=e,{x:a}=r,{k:n,sorted:u}=p;(0,t.assertNotComplex)(a,"topk");const c=s.data.get(a.dataId).values,[d,i]=(0,o.topKImpl)(c,a.shape,a.dtype,n,u);return[s.makeTensorInfo(d.shape,d.dtype,d.values),s.makeTensorInfo(i.shape,i.dtype,i.values)]}const s={kernelName:e.TopK,backendName:"cpu",kernelFunc:r};exports.topKConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./TopK_impl":"ekKr"}],"l6eg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform=e,exports.transformConfig=void 0;var t=require("@tensorflow/tfjs-core");function e(e){const{inputs:r,attrs:a,backend:o}=e,{image:s,transforms:u}=r,{interpolation:i,fillMode:f,fillValue:p,outputShape:d}=a,[h,m,y,M]=s.shape,[b,g]=null!=d?d:[m,y],k=[h,b,g,M],w=t.util.computeStrides(s.shape),v=w[0],x=w[1],T=w[2],I=t.util.getTypedArrayFromDType(s.dtype,t.util.sizeFromShape(k));I.fill(p);const E=o.data.get(s.dataId).values,F=o.data.get(u.dataId).values;for(let t=0;t<h;++t){const e=1===u.shape[0]?F:F.subarray(8*t,8*t+8);for(let r=0;r<b;++r)for(let a=0;a<g;++a)for(let o=0;o<M;++o){let s;const u=e[6]*a+e[7]*r+1;if(0===u)continue;const d=(e[0]*a+e[1]*r+e[2])/u,h=(e[3]*a+e[4]*r+e[5])/u,M=n(d,y,f),b=n(h,m,f);switch(i){case"nearest":s=c(E,m,y,v,x,T,t,b,M,o,p);break;case"bilinear":s=l(E,m,y,v,x,T,t,b,M,o,p);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+`'bilinear', but got ${i}`)}I[t*v+r*x+a*T+o]=s}return o.makeTensorInfo(k,s.dtype,I)}return{dataId:o.write(I,k,s.dtype),shape:s.shape,dtype:s.dtype}}const r={kernelName:t.Transform,backendName:"cpu",kernelFunc:e};function n(t,e,r){switch(r){case"reflect":return a(t,e);case"wrap":return o(t,e);case"nearest":return u(t,e);case"constant":default:return s(t,e)}}function a(e,r){let n=e;if(n<0)if(r<=1)n=0;else{const t=2*r;n<t&&(n=t*Math.trunc(-n/t)+n),n=n<-r?n+t:-n-1}else if(n>r-1)if(r<=1)n=0;else{const t=2*r;(n-=t*Math.trunc(n/t))>=r&&(n=t-n-1)}return t.util.clamp(0,n,r-1)}function o(e,r){let n=e;if(n<0)if(r<=1)n=0;else{const t=r-1;n+=r*(Math.trunc(-n/t)+1)}else if(n>r-1)if(r<=1)n=0;else{const t=r-1;n-=r*Math.trunc(n/t)}return t.util.clamp(0,n,r-1)}function s(t,e){return t}function u(e,r){return t.util.clamp(0,e,r-1)}function i(t,e,r,n,a,o,s,u,i,c,l){return 0<=u&&u<e&&0<=i&&i<r?t[s*n+u*a+i*o+c]:l}function c(t,e,r,n,a,o,s,u,c,l,f){return i(t,e,r,n,a,o,s,Math.round(u),Math.round(c),l,f)}function l(t,e,r,n,a,o,s,u,c,l,f){const p=Math.floor(u),d=Math.floor(c),h=p+1,m=d+1;return(h-u)*((m-c)*i(t,e,r,n,a,o,s,p,d,l,f)+(c-d)*i(t,e,r,n,a,o,s,p,m,l,f))+(u-p)*((m-c)*i(t,e,r,n,a,o,s,h,d,l,f)+(c-d)*i(t,e,r,n,a,o,s,h,m,l,f))}exports.transformConfig=r;
},{"@tensorflow/tfjs-core":"nPFy"}],"YO8a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=n,exports.uniqueConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),u=require("./Unique_impl");function n(e){const{inputs:n,attrs:o,backend:r}=e,{axis:i}=o,{x:s}=n;(0,t.assertNotComplex)(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:p,outputShape:c,indices:l}=(0,u.uniqueImpl)(a,i,s.shape,s.dtype);return[r.makeTensorInfo(c,s.dtype,p),r.makeTensorInfo([l.length],"int32",l)]}const o={kernelName:e.Unique,backendName:"cpu",kernelFunc:n};exports.uniqueConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Unique_impl":"AdAg"}],"pFb9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpack=t,exports.unpackConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Reshape"),s=require("./Slice");function t(e){const{inputs:t,backend:r,attrs:a}=e,{value:o}=t;let{axis:c}=a;c<0&&(c+=o.shape.length);const p=o.shape.length,i=o.shape[c],l=new Array(p-1);let u=0;for(let n=0;n<p;n++)n!==c&&(l[u++]=o.shape[n]);const h=new Array(p).fill(0),f=o.shape.slice();f[c]=1;const k=new Array(i);for(let d=0;d<k.length;d++){h[c]=d;const e=(0,s.slice)({inputs:{x:o},backend:r,attrs:{begin:h,size:f}});k[d]=(0,n.reshape)({inputs:{x:e},backend:r,attrs:{shape:l}}),r.disposeIntermediateTensorInfo(e)}return k}const r={kernelName:e.Unpack,backendName:"cpu",kernelFunc:t};exports.unpackConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Reshape":"Ut4n","./Slice":"moln"}],"Yi6e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=o,exports.unsortedSegmentSumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Cast"),n=require("./Equal"),u=require("./ExpandDims"),r=require("./Multiply"),a=require("./Pack"),i=require("./Sum");function o(o){const{inputs:p,backend:c,attrs:m}=o,{x:d,segmentIds:l}=p,{numSegments:k}=m;(0,t.assertNotComplex)(d,"unsortedSegmentSum");const S=[],f=[],h=d.shape.length-l.shape.length;let x=l;for(let e=0;e<h;++e){const t=(0,u.expandDims)({inputs:{input:x},backend:c,attrs:{dim:e+1}});x=t,f.push(t)}for(let t=0;t<k;++t){const u=e.util.createScalarValue(t,"int32"),a=c.makeTensorInfo([],"int32",u),o=(0,n.equal)({inputs:{a:a,b:x},backend:c}),p=(0,s.cast)({inputs:{x:o},backend:c,attrs:{dtype:"float32"}}),m=(0,r.multiply)({inputs:{a:p,b:d},backend:c}),l=(0,i.sum)({inputs:{x:m},backend:c,attrs:{axis:0,keepDims:!1}});S.push(l),f.push(a),f.push(o),f.push(p),f.push(m),f.push(l)}const b=(0,a.pack)({inputs:S,backend:c,attrs:{axis:0}});return f.forEach(e=>c.disposeIntermediateTensorInfo(e)),b}const p={kernelName:e.UnsortedSegmentSum,backendName:"cpu",kernelFunc:o};exports.unsortedSegmentSumConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../cpu_util":"AWt2","./Cast":"bZFh","./Equal":"rTJm","./ExpandDims":"DBjm","./Multiply":"V7WM","./Pack":"qNzk","./Sum":"EoUL"}],"qjPK":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),r=require("./kernels/_FusedMatMul"),i=require("./kernels/Abs"),n=require("./kernels/Acos"),o=require("./kernels/Acosh"),s=require("./kernels/Add"),l=require("./kernels/AddN"),u=require("./kernels/All"),g=require("./kernels/Any"),a=require("./kernels/ArgMax"),f=require("./kernels/ArgMin"),k=require("./kernels/Asin"),C=require("./kernels/Asinh"),q=require("./kernels/Atan"),t=require("./kernels/Atan2"),p=require("./kernels/Atanh"),c=require("./kernels/AvgPool"),d=require("./kernels/AvgPool3D"),m=require("./kernels/AvgPool3DGrad"),S=require("./kernels/AvgPoolGrad"),D=require("./kernels/BatchMatMul"),h=require("./kernels/BatchNorm"),v=require("./kernels/BatchToSpaceND"),N=require("./kernels/Bincount"),x=require("./kernels/BroadcastArgs"),M=require("./kernels/Cast"),B=require("./kernels/Ceil"),R=require("./kernels/ClipByValue"),A=require("./kernels/Complex"),F=require("./kernels/ComplexAbs"),P=require("./kernels/Concat"),G=require("./kernels/Conv2D"),L=require("./kernels/Conv2DBackpropFilter"),T=require("./kernels/Conv2DBackpropInput"),V=require("./kernels/Conv3D"),E=require("./kernels/Conv3DBackpropFilterV2"),I=require("./kernels/Conv3DBackpropInputV2"),b=require("./kernels/Cos"),w=require("./kernels/Cosh"),y=require("./kernels/CropAndResize"),z=require("./kernels/Cumprod"),O=require("./kernels/Cumsum"),H=require("./kernels/DenseBincount"),W=require("./kernels/DepthToSpace"),K=require("./kernels/DepthwiseConv2dNative"),U=require("./kernels/DepthwiseConv2dNativeBackpropFilter"),_=require("./kernels/DepthwiseConv2dNativeBackpropInput"),j=require("./kernels/Diag"),Z=require("./kernels/Dilation2D"),J=require("./kernels/Dilation2DBackpropFilter"),Q=require("./kernels/Dilation2DBackpropInput"),X=require("./kernels/Einsum"),Y=require("./kernels/Elu"),$=require("./kernels/EluGrad"),ee=require("./kernels/Equal"),re=require("./kernels/Erf"),ie=require("./kernels/Exp"),ne=require("./kernels/ExpandDims"),oe=require("./kernels/Expm1"),se=require("./kernels/FFT"),le=require("./kernels/Fill"),ue=require("./kernels/FlipLeftRight"),ge=require("./kernels/Floor"),ae=require("./kernels/FloorDiv"),fe=require("./kernels/FusedConv2D"),ke=require("./kernels/FusedDepthwiseConv2D"),Ce=require("./kernels/GatherNd"),qe=require("./kernels/GatherV2"),te=require("./kernels/Greater"),pe=require("./kernels/GreaterEqual"),ce=require("./kernels/Identity"),de=require("./kernels/IFFT"),me=require("./kernels/Imag"),Se=require("./kernels/IsFinite"),De=require("./kernels/IsInf"),he=require("./kernels/IsNaN"),ve=require("./kernels/LeakyRelu"),Ne=require("./kernels/Less"),xe=require("./kernels/LessEqual"),Me=require("./kernels/LinSpace"),Be=require("./kernels/Log"),Re=require("./kernels/Log1p"),Ae=require("./kernels/LogicalAnd"),Fe=require("./kernels/LogicalNot"),Pe=require("./kernels/LogicalOr"),Ge=require("./kernels/LRN"),Le=require("./kernels/LRNGrad"),Te=require("./kernels/Max"),Ve=require("./kernels/Maximum"),Ee=require("./kernels/MaxPool"),Ie=require("./kernels/MaxPool3D"),be=require("./kernels/MaxPool3DGrad"),we=require("./kernels/MaxPoolGrad"),ye=require("./kernels/MaxPoolWithArgmax"),ze=require("./kernels/Mean"),Oe=require("./kernels/Min"),He=require("./kernels/Minimum"),We=require("./kernels/MirrorPad"),Ke=require("./kernels/Mod"),Ue=require("./kernels/Multinomial"),_e=require("./kernels/Multiply"),je=require("./kernels/Neg"),Ze=require("./kernels/NonMaxSuppressionV3"),Je=require("./kernels/NonMaxSuppressionV4"),Qe=require("./kernels/NonMaxSuppressionV5"),Xe=require("./kernels/NotEqual"),Ye=require("./kernels/OneHot"),$e=require("./kernels/OnesLike"),er=require("./kernels/Pack"),rr=require("./kernels/PadV2"),ir=require("./kernels/Pow"),nr=require("./kernels/Prelu"),or=require("./kernels/Prod"),sr=require("./kernels/Range"),lr=require("./kernels/Real"),ur=require("./kernels/RealDiv"),gr=require("./kernels/Reciprocal"),ar=require("./kernels/Relu"),fr=require("./kernels/Relu6"),kr=require("./kernels/Reshape"),Cr=require("./kernels/ResizeBilinear"),qr=require("./kernels/ResizeBilinearGrad"),tr=require("./kernels/ResizeNearestNeighbor"),pr=require("./kernels/ResizeNearestNeighborGrad"),cr=require("./kernels/Reverse"),dr=require("./kernels/RotateWithOffset"),mr=require("./kernels/Round"),Sr=require("./kernels/Rsqrt"),Dr=require("./kernels/ScatterNd"),hr=require("./kernels/SearchSorted"),vr=require("./kernels/Select"),Nr=require("./kernels/Selu"),xr=require("./kernels/Sigmoid"),Mr=require("./kernels/Sign"),Br=require("./kernels/Sin"),Rr=require("./kernels/Sinh"),Ar=require("./kernels/Slice"),Fr=require("./kernels/Softmax"),Pr=require("./kernels/Softplus"),Gr=require("./kernels/SpaceToBatchND"),Lr=require("./kernels/SparseFillEmptyRows"),Tr=require("./kernels/SparseReshape"),Vr=require("./kernels/SparseSegmentMean"),Er=require("./kernels/SparseSegmentSum"),Ir=require("./kernels/SparseToDense"),br=require("./kernels/SplitV"),wr=require("./kernels/Sqrt"),yr=require("./kernels/Square"),zr=require("./kernels/SquaredDifference"),Or=require("./kernels/Step"),Hr=require("./kernels/StridedSlice"),Wr=require("./kernels/StringNGrams"),Kr=require("./kernels/StringSplit"),Ur=require("./kernels/StringToHashBucketFast"),_r=require("./kernels/Sub"),jr=require("./kernels/Sum"),Zr=require("./kernels/Tan"),Jr=require("./kernels/Tanh"),Qr=require("./kernels/Tile"),Xr=require("./kernels/TopK"),Yr=require("./kernels/Transform"),$r=require("./kernels/Transpose"),ei=require("./kernels/Unique"),ri=require("./kernels/Unpack"),ii=require("./kernels/UnsortedSegmentSum"),ni=require("./kernels/ZerosLike");const oi=[r._fusedMatMulConfig,i.absConfig,n.acosConfig,o.acoshConfig,s.addConfig,l.addNConfig,u.allConfig,g.anyConfig,a.argMaxConfig,f.argMinConfig,k.asinConfig,C.asinhConfig,q.atanConfig,t.atan2Config,p.atanhConfig,c.avgPoolConfig,d.avgPool3DConfig,m.avgPool3DGradConfig,S.avgPoolGradConfig,D.batchMatMulConfig,h.batchNormConfig,v.batchToSpaceNDConfig,N.bincountConfig,x.broadcastArgsConfig,M.castConfig,B.ceilConfig,R.clipByValueConfig,A.complexConfig,F.complexAbsConfig,P.concatConfig,G.conv2DConfig,L.conv2DBackpropFilterConfig,T.conv2DBackpropInputConfig,V.conv3DConfig,E.conv3DBackpropFilterV2Config,I.conv3DBackpropInputV2Config,b.cosConfig,w.coshConfig,y.cropAndResizeConfig,z.cumprodConfig,O.cumsumConfig,H.denseBincountConfig,W.depthToSpaceConfig,K.depthwiseConv2dNativeConfig,U.depthwiseConv2dNativeBackpropFilterConfig,_.depthwiseConv2dNativeBackpropInputConfig,j.diagConfig,Z.dilation2DConfig,J.dilation2DBackpropFilterConfig,Q.dilation2DBackpropInputConfig,X.einsumConfig,Y.eluConfig,$.eluGradConfig,ee.equalConfig,re.erfConfig,ie.expConfig,ne.expandDimsConfig,oe.expm1Config,se.fftConfig,le.fillConfig,ue.flipLeftRightConfig,ge.floorConfig,ae.floorDivConfig,fe.fusedConv2DConfig,ke.fusedDepthwiseConv2DConfig,Ce.gatherNdConfig,qe.gatherV2Config,te.greaterConfig,pe.greaterEqualConfig,ce.identityConfig,de.ifftConfig,me.imagConfig,Se.isFiniteConfig,De.isInfConfig,he.isNaNConfig,ve.leakyReluConfig,Ne.lessConfig,xe.lessEqualConfig,Me.linSpaceConfig,Be.logConfig,Re.log1pConfig,Ae.logicalAndConfig,Fe.logicalNotConfig,Pe.logicalOrConfig,Ge.LRNConfig,Le.LRNGradConfig,Te.maxConfig,Ve.maximumConfig,Ee.maxPoolConfig,Ie.maxPool3DConfig,be.maxPool3DGradConfig,we.maxPoolGradConfig,ye.maxPoolWithArgmaxConfig,ze.meanConfig,Oe.minConfig,He.minimumConfig,We.mirrorPadConfig,Ke.modConfig,Ue.multinomialConfig,_e.multiplyConfig,je.negConfig,Ze.nonMaxSuppressionV3Config,Je.nonMaxSuppressionV4Config,Qe.nonMaxSuppressionV5Config,Xe.notEqualConfig,Ye.oneHotConfig,$e.onesLikeConfig,er.packConfig,rr.padV2Config,ir.powConfig,nr.preluConfig,or.prodConfig,sr.rangeConfig,lr.realConfig,ur.realDivConfig,gr.reciprocalConfig,ar.reluConfig,fr.relu6Config,kr.reshapeConfig,Cr.resizeBilinearConfig,qr.resizeBilinearGradConfig,tr.resizeNearestNeighborConfig,pr.resizeNearestNeighborGradConfig,cr.reverseConfig,dr.rotateWithOffsetConfig,mr.roundConfig,Sr.rsqrtConfig,Dr.scatterNdConfig,hr.searchSortedConfig,vr.selectConfig,Nr.seluConfig,xr.sigmoidConfig,Mr.signConfig,Br.sinConfig,Rr.sinhConfig,Ar.sliceConfig,Fr.softmaxConfig,Pr.softplusConfig,Gr.spaceToBatchNDConfig,Lr.sparseFillEmptyRowsConfig,Tr.sparseReshapeConfig,Vr.sparseSegmentMeanConfig,Er.sparseSegmentSumConfig,Ir.sparseToDenseConfig,br.splitVConfig,wr.sqrtConfig,yr.squareConfig,zr.squaredDifferenceConfig,Or.stepConfig,Hr.stridedSliceConfig,Wr.stringNGramsConfig,Kr.stringSplitConfig,Ur.stringToHashBucketFastConfig,_r.subConfig,jr.sumConfig,Zr.tanConfig,Jr.tanhConfig,Qr.tileConfig,Xr.topKConfig,Yr.transformConfig,$r.transposeConfig,ei.uniqueConfig,ri.unpackConfig,ii.unsortedSegmentSumConfig,ni.zerosLikeConfig];for(const si of oi)(0,e.registerKernel)(si);
},{"@tensorflow/tfjs-core":"nPFy","./kernels/_FusedMatMul":"RAP9","./kernels/Abs":"zMOx","./kernels/Acos":"SH2G","./kernels/Acosh":"NM9Q","./kernels/Add":"KMQw","./kernels/AddN":"vPOn","./kernels/All":"idmz","./kernels/Any":"HOvl","./kernels/ArgMax":"iOtO","./kernels/ArgMin":"YREn","./kernels/Asin":"zJWX","./kernels/Asinh":"THeL","./kernels/Atan":"EKXF","./kernels/Atan2":"hJAZ","./kernels/Atanh":"Z2kp","./kernels/AvgPool":"hUaI","./kernels/AvgPool3D":"mSKw","./kernels/AvgPool3DGrad":"nhUO","./kernels/AvgPoolGrad":"LUQw","./kernels/BatchMatMul":"ZNR0","./kernels/BatchNorm":"h0Y0","./kernels/BatchToSpaceND":"CDyz","./kernels/Bincount":"LUcP","./kernels/BroadcastArgs":"bJzQ","./kernels/Cast":"bZFh","./kernels/Ceil":"MY3Y","./kernels/ClipByValue":"ZSpF","./kernels/Complex":"du7s","./kernels/ComplexAbs":"P8FE","./kernels/Concat":"qbkR","./kernels/Conv2D":"fqOO","./kernels/Conv2DBackpropFilter":"I7QM","./kernels/Conv2DBackpropInput":"PV16","./kernels/Conv3D":"cPgQ","./kernels/Conv3DBackpropFilterV2":"s7zP","./kernels/Conv3DBackpropInputV2":"J4ly","./kernels/Cos":"WYkQ","./kernels/Cosh":"zFlx","./kernels/CropAndResize":"MXxE","./kernels/Cumprod":"qJkZ","./kernels/Cumsum":"KLnz","./kernels/DenseBincount":"z7bO","./kernels/DepthToSpace":"hw0x","./kernels/DepthwiseConv2dNative":"eDJF","./kernels/DepthwiseConv2dNativeBackpropFilter":"P3Ds","./kernels/DepthwiseConv2dNativeBackpropInput":"iwqp","./kernels/Diag":"ci2m","./kernels/Dilation2D":"Xezu","./kernels/Dilation2DBackpropFilter":"jE6i","./kernels/Dilation2DBackpropInput":"QSWt","./kernels/Einsum":"Gy51","./kernels/Elu":"JYKr","./kernels/EluGrad":"VzDf","./kernels/Equal":"rTJm","./kernels/Erf":"s9Jq","./kernels/Exp":"Z9b0","./kernels/ExpandDims":"DBjm","./kernels/Expm1":"EhVx","./kernels/FFT":"BGm9","./kernels/Fill":"I0wF","./kernels/FlipLeftRight":"pS9t","./kernels/Floor":"SlXE","./kernels/FloorDiv":"kZyv","./kernels/FusedConv2D":"WvBn","./kernels/FusedDepthwiseConv2D":"EH74","./kernels/GatherNd":"o5Du","./kernels/GatherV2":"TZ41","./kernels/Greater":"tUQk","./kernels/GreaterEqual":"jatl","./kernels/Identity":"MAl9","./kernels/IFFT":"JtLL","./kernels/Imag":"qiGA","./kernels/IsFinite":"yiXL","./kernels/IsInf":"Oi25","./kernels/IsNaN":"KoeD","./kernels/LeakyRelu":"SyXw","./kernels/Less":"U0J5","./kernels/LessEqual":"t9BB","./kernels/LinSpace":"e19G","./kernels/Log":"D4z7","./kernels/Log1p":"EBTn","./kernels/LogicalAnd":"ck0g","./kernels/LogicalNot":"Zap2","./kernels/LogicalOr":"oNw8","./kernels/LRN":"Ab7Q","./kernels/LRNGrad":"ECTh","./kernels/Max":"Hr9E","./kernels/Maximum":"I2nX","./kernels/MaxPool":"UCYz","./kernels/MaxPool3D":"WraG","./kernels/MaxPool3DGrad":"LcRz","./kernels/MaxPoolGrad":"NybX","./kernels/MaxPoolWithArgmax":"RsQt","./kernels/Mean":"fMkA","./kernels/Min":"DXPk","./kernels/Minimum":"omVI","./kernels/MirrorPad":"G6dD","./kernels/Mod":"Pqrn","./kernels/Multinomial":"I37o","./kernels/Multiply":"V7WM","./kernels/Neg":"FtXF","./kernels/NonMaxSuppressionV3":"HdNb","./kernels/NonMaxSuppressionV4":"QuPh","./kernels/NonMaxSuppressionV5":"KfNG","./kernels/NotEqual":"WkOI","./kernels/OneHot":"J3iT","./kernels/OnesLike":"bbfc","./kernels/Pack":"qNzk","./kernels/PadV2":"z1EK","./kernels/Pow":"CaKS","./kernels/Prelu":"coN5","./kernels/Prod":"zD2R","./kernels/Range":"FMra","./kernels/Real":"fcv6","./kernels/RealDiv":"Ymlz","./kernels/Reciprocal":"oSrv","./kernels/Relu":"xjI9","./kernels/Relu6":"RCPe","./kernels/Reshape":"Ut4n","./kernels/ResizeBilinear":"OdX6","./kernels/ResizeBilinearGrad":"bZ47","./kernels/ResizeNearestNeighbor":"Z38C","./kernels/ResizeNearestNeighborGrad":"wl4g","./kernels/Reverse":"bXbo","./kernels/RotateWithOffset":"n5Gy","./kernels/Round":"LCbt","./kernels/Rsqrt":"I735","./kernels/ScatterNd":"PYVV","./kernels/SearchSorted":"lw2z","./kernels/Select":"Xbdn","./kernels/Selu":"NpYo","./kernels/Sigmoid":"dqzS","./kernels/Sign":"TfJL","./kernels/Sin":"lchD","./kernels/Sinh":"FQDi","./kernels/Slice":"moln","./kernels/Softmax":"EqLD","./kernels/Softplus":"poI4","./kernels/SpaceToBatchND":"rvUz","./kernels/SparseFillEmptyRows":"PWDY","./kernels/SparseReshape":"KjjM","./kernels/SparseSegmentMean":"mt8I","./kernels/SparseSegmentSum":"eRVn","./kernels/SparseToDense":"Ovby","./kernels/SplitV":"eeCz","./kernels/Sqrt":"utBR","./kernels/Square":"k0N7","./kernels/SquaredDifference":"qlEh","./kernels/Step":"CmTU","./kernels/StridedSlice":"FEX1","./kernels/StringNGrams":"n5iR","./kernels/StringSplit":"mq73","./kernels/StringToHashBucketFast":"Se80","./kernels/Sub":"VFZK","./kernels/Sum":"EoUL","./kernels/Tan":"GAQp","./kernels/Tanh":"HDxJ","./kernels/Tile":"LGPu","./kernels/TopK":"BEKo","./kernels/Transform":"l6eg","./kernels/Transpose":"WjPF","./kernels/Unique":"YO8a","./kernels/Unpack":"pFb9","./kernels/UnsortedSegmentSum":"Yi6e","./kernels/ZerosLike":"M0wi"}],"pGMc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))}),require("./register_all_kernels");
},{"./base":"AYnN","./register_all_kernels":"qjPK"}],"fDY8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearWebGLContext=n,exports.getWebGLContext=l,exports.setWebGLContext=o;const e={},t={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function n(t){delete e[t]}function o(t,n){e[t]=n}function l(t,n){if(!(t in e)||null!=n){const o=a(t,n);if(null===o)return console.log("Could not get context for WebGL version",t),null;e[t]=o}const o=e[t];return null==o||o.isContextLost()?(delete e[t],l(t)):(o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.disable(o.BLEND),o.disable(o.DITHER),o.disable(o.POLYGON_OFFSET_FILL),o.disable(o.SAMPLE_COVERAGE),o.enable(o.SCISSOR_TEST),o.enable(o.CULL_FACE),o.cullFace(o.BACK),e[t])}function r(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function a(n,o){if(1!==n&&2!==n)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const l=null==o?r(n):o;return l.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete e[n]},!1),1===n?l.getContext("webgl",t)||l.getContext("experimental-webgl",t):l.getContext("webgl2",t)}
},{}],"GY6p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextureUsage=exports.PhysicalTextureType=exports.PackingScheme=void 0,exports.decodeMatrixFromUnpackedColorRGBAArray=A,exports.getColorMatrixTextureShapeWidthHeight=i,exports.getDenseTexShape=u,exports.getMatrixSizeFromUnpackedArraySize=l,exports.getPackedMatrixTextureShapeWidthHeight=x,exports.getPackedRGBAArraySizeFromMatrixShape=c,exports.getTextureConfig=s,exports.getUnpackedArraySizeFromMatrixSize=n,exports.getUnpackedMatrixTextureShapeWidthHeight=a;var e,t,r,o=require("@tensorflow/tfjs-core");function a(e,t){return[t,e]}function n(e,t){return e*t}function i(e,t){return[4*t,e]}function u(e){const t=o.util.sizeFromShape(e),r=Math.ceil(t/4);return o.util.sizeToSquarishShape(r)}function l(e,t){if(e%t!=0)throw new Error(`unpackedSize (${e}) must be a multiple of `+`${t}`);return e/t}function A(e,t,r){const o=e.length*r/4;if(t.length<o)throw new Error(`matrix length (${t.length}) must be >= ${o}`);let a=0;for(let n=0;n<e.length;n+=4)for(let o=0;o<r;o++)t[a++]=e[n+o]}function x(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function c(e,t){const[r,o]=x(e,t);return r*o*4}function s(e,t){const r=e;let a,n,i,u,l,A,x,c,s,p;return 2===(0,o.env)().getNumber("WEBGL_VERSION")?(a=r.R32F,n=r.R16F,i=r.RGBA16F,u=r.RGBA32F,l=r.RED,x=4,c=1,s=r.HALF_FLOAT,p=r.FLOAT,A=r.RGBA8):(a=e.RGBA,n=e.RGBA,i=e.RGBA,u=r.RGBA,l=e.RGBA,x=4,c=4,s=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT,A=e.RGBA),{internalFormatFloat:a,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:u,textureFormatFloat:l,downloadTextureFormat:A,downloadUnpackNumChannels:x,defaultNumChannels:c,textureTypeHalfFloat:s,textureTypeFloat:p}}exports.PackingScheme=e,function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(e||(exports.PackingScheme=e={})),exports.TextureUsage=t,function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(t||(exports.TextureUsage=t={})),exports.PhysicalTextureType=r,function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(r||(exports.PhysicalTextureType=r={}));
},{"@tensorflow/tfjs-core":"nPFy"}],"wqV5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertNotComplex=te,exports.bindCanvasToFramebuffer=I,exports.bindColorTextureToFramebuffer=N,exports.bindTextureToProgramUniformSampler=S,exports.bindTextureUnit=U,exports.bindVertexBufferToProgramAttribute=d,exports.callAndCheck=n,exports.canBeRepresented=i,exports.createFragmentShader=l,exports.createFramebuffer=m,exports.createProgram=F,exports.createStaticIndexBuffer=_,exports.createStaticVertexBuffer=x,exports.createTexture=h,exports.createVertexShader=s,exports.getBatchDim=w,exports.getExtensionOrThrow=f,exports.getFramebufferErrorMessage=C,exports.getMaxTexturesInShader=z,exports.getNumChannels=b,exports.getProgramUniformLocation=M,exports.getProgramUniformLocationOrThrow=L,exports.getRowsCols=G,exports.getShapeAs3D=X,exports.getTextureShapeFromLogicalShape=W,exports.getWebGLDisjointQueryTimerVersion=Y,exports.getWebGLErrorMessage=E,exports.getWebGLMaxTextureSize=H,exports.hasExtension=j,exports.isCapableOfRenderingToFloatTexture=K,exports.isDownloadFloatTextureEnabled=Q,exports.isReshapeFree=V,exports.isWebGLFenceEnabled=re,exports.isWebGLVersionEnabled=Z,exports.linkProgram=g,exports.logShaderSourceAndInfoLog=T,exports.resetMaxTextureSize=k,exports.resetMaxTexturesInShader=q,exports.unbindColorTextureFromFramebuffer=O,exports.unbindTextureUnit=p,exports.validateFramebuffer=B,exports.validateProgram=R,exports.validateTextureSize=A;var e=require("@tensorflow/tfjs-core"),r=require("./canvas_util"),t=require("./tex_util");function n(r,t){const n=t();return(0,e.env)().getBool("DEBUG")&&o(r),n}function o(e){const r=e.getError();if(r!==e.NO_ERROR)throw new Error("WebGL Error: "+E(e,r))}const u=5.96e-8,a=65504;function i(r){return!!((0,e.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===r||u<Math.abs(r)&&Math.abs(r)<a)}function E(e,r){switch(r){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function f(e,r){return P(e,()=>e.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function s(e,r){const t=P(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(n(e,()=>e.shaderSource(t,r)),n(e,()=>e.compileShader(t)),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function l(r,t){const o=P(r,()=>r.createShader(r.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(n(r,()=>r.shaderSource(o,t)),n(r,()=>r.compileShader(o)),(0,e.env)().get("ENGINE_COMPILE_ONLY"))return o;if(!1===r.getShaderParameter(o,r.COMPILE_STATUS))throw T(t,r.getShaderInfoLog(o)),new Error("Failed to compile fragment shader.");return o}const c=/ERROR: [0-9]+:([0-9]+):/g;function T(r,t){const n=c.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(r);const o=+n[1],u=r.split("\n"),a=u.length.toString().length+2,i=u.map((r,t)=>e.util.rightPad((t+1).toString(),a)+r);let E=0;for(let e=0;e<i.length;e++)E=Math.max(i[e].length,E);const f=i.slice(0,o-1),s=i.slice(o-1,o),l=i.slice(o);console.log(f.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${e.util.rightPad(s[0],E)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function F(e){return P(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function g(r,t){if(n(r,()=>r.linkProgram(t)),!(0,e.env)().get("ENGINE_COMPILE_ONLY")&&!1===r.getProgramParameter(t,r.LINK_STATUS))throw console.log(r.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function R(e,r){if(n(e,()=>e.validateProgram(r)),!1===e.getProgramParameter(r,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function x(e,r){const t=P(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return n(e,()=>e.bindBuffer(e.ARRAY_BUFFER,t)),n(e,()=>e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)),t}function _(e,r){const t=P(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return n(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t)),n(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)),t}function b(){return 2===(0,e.env)().getNumber("WEBGL_VERSION")?1:4}function h(e){return P(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function A(r,t){const n=(0,e.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(r<=0||t<=0){throw new Error("Requested texture size "+`[${r}x${t}]`+" is invalid.")}if(r>n||t>n){throw new Error("Requested texture size "+`[${r}x${t}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}}function m(e){return P(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function d(e,r,t,o,u,a,i){const E=e.getAttribLocation(r,t);return-1!==E&&(n(e,()=>e.bindBuffer(e.ARRAY_BUFFER,o)),n(e,()=>e.vertexAttribPointer(E,u,e.FLOAT,!1,a,i)),n(e,()=>e.enableVertexAttribArray(E)),!0)}function U(e,r,t){D(e,t),n(e,()=>e.activeTexture(e.TEXTURE0+t)),n(e,()=>e.bindTexture(e.TEXTURE_2D,r))}function p(e,r){D(e,r),n(e,()=>e.activeTexture(e.TEXTURE0+r)),n(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function L(e,r,t){return P(e,()=>e.getUniformLocation(r,t),'uniform "'+t+'" not present in program.')}function M(e,r,t){return e.getUniformLocation(r,t)}function S(e,r,t,o){n(e,()=>U(e,r,o)),n(e,()=>e.uniform1i(t,o))}function I(e){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),n(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),n(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function N(e,r,t){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),n(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0))}function O(e,r){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,r)),n(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function B(e){const r=e.checkFramebufferStatus(e.FRAMEBUFFER);if(r!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+C(e,r))}function C(e,r){switch(r){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function P(e,r,t){const o=n(e,()=>r());if(null==o)throw new Error(t);return o}function D(e,r){const t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=r+e.TEXTURE0;if(n<e.TEXTURE0||n>t){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${t}]`}.`)}}function w(r,t=2){return e.util.sizeFromShape(r.slice(0,r.length-t))}function G(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function X(e){let r=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(r=[w(e),...G(e)]),r}function W(r,t=!1){let n=(0,e.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(r=r.map((t,n)=>n>=r.length-2?e.util.nearestLargerEven(r[n]):r[n])).length&&(r=[2,r[0]])),2!==r.length){const t=e.util.squeezeShape(r);r=t.newShape}let o=e.util.sizeFromShape(r);if(r.length<=1&&o<=n)return[1,o];if(2===r.length&&r[0]<=n&&r[1]<=n)return r;if(3===r.length&&r[0]*r[1]<=n&&r[2]<=n)return[r[0]*r[1],r[2]];if(3===r.length&&r[0]<=n&&r[1]*r[2]<=n)return[r[0],r[1]*r[2]];if(4===r.length&&r[0]*r[1]*r[2]<=n&&r[3]<=n)return[r[0]*r[1]*r[2],r[3]];if(4===r.length&&r[0]<=n&&r[1]*r[2]*r[3]<=n)return[r[0],r[1]*r[2]*r[3]];if(t){const t=w(r);let n=2,u=2;return r.length&&([n,u]=G(r)),o=t*(n/2)*(u/2),e.util.sizeToSquarishShape(o).map(e=>2*e)}return e.util.sizeToSquarishShape(o)}function v(e){return e%2==0}function V(r,t){if(r=r.slice(-2),t=t.slice(-2),e.util.arraysEqual(r,t))return!0;if(!r.length||!t.length)return!0;if(0===r[0]||0===r[1]||0===t[0]||0===t[1])return!0;if(r.length!==t.length){const e=r.slice(-1)[0],n=t.slice(-1)[0];if(e===n)return!0;if(v(e)&&v(n)&&(1===r[0]||1===t[0]))return!0}return r[1]===t[1]&&v(r[0])&&v(t[0])}let y,$;function H(e){if(null==y){const t=(0,r.getWebGLContext)(e);y=t.getParameter(t.MAX_TEXTURE_SIZE)}return y}function k(){y=null}function q(){$=null}function z(e){if(null==$){const t=(0,r.getWebGLContext)(e);$=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$)}function Y(e){if(0===e)return 0;let t;const n=(0,r.getWebGLContext)(e);return t=j(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:j(n,"EXT_disjoint_timer_query")?1:0}function j(e,r){return null!=e.getExtension(r)}function Z(e){try{if(null!=(0,r.getWebGLContext)(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function K(e){if(0===e)return!1;const t=(0,r.getWebGLContext)(e);if(1===e){if(!j(t,"OES_texture_float"))return!1}else if(!j(t,"EXT_color_buffer_float"))return!1;return J(t)}function Q(e){if(0===e)return!1;const t=(0,r.getWebGLContext)(e);if(1!==e){if(j(t,"EXT_color_buffer_float"))return J(t);const e="EXT_color_buffer_half_float";if(j(t,e)){const r=t.getExtension(e);return ee(t,r)}return!1}return!!j(t,"OES_texture_float")&&(!!j(t,"WEBGL_color_buffer_float")&&J(t))}function J(e){const r=(0,t.getTextureConfig)(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(o),u}function ee(e,r){const n=(0,t.getTextureConfig)(e,r),o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const u=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(o),e.deleteFramebuffer(u),a}function re(e){if(2!==e)return!1;return null!=(0,r.getWebGLContext)(e).fenceSync}function te(r,t){Array.isArray(r)||(r=[r]),r.forEach(r=>{null!=r&&e.util.assert("complex64"!==r.dtype,()=>`${t} does not support complex64 tensors `+"in the WebGL backend.")})}
},{"@tensorflow/tfjs-core":"nPFy","./canvas_util":"fDY8","./tex_util":"GY6p"}],"QJWP":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),E=require("./webgl_util");const _=(0,e.env)();_.registerFlag("HAS_WEBGL",()=>_.getNumber("WEBGL_VERSION")>0),_.registerFlag("WEBGL_VERSION",()=>(0,E.isWebGLVersionEnabled)(2)?2:(0,E.isWebGLVersionEnabled)(1)?1:0),_.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),_.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===_.get("WEBGL_VERSION")),_.registerFlag("WEBGL_CPU_FORWARD",()=>!0),_.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),_.registerFlag("WEBGL_PACK",()=>_.getBool("HAS_WEBGL")),_.registerFlag("WEBGL_PACK_NORMALIZATION",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_CLIP",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_REDUCE",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_LAZILY_UNPACK",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_CONV_IM2COL",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>(0,E.getWebGLMaxTextureSize)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>(0,E.getMaxTexturesInShader)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=_.getNumber("WEBGL_VERSION");return 0===e?0:(0,E.getWebGLDisjointQueryTimerVersion)(e)}),_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>_.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!e.device_util.isMobile()),_.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>(0,E.isCapableOfRenderingToFloatTexture)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!_.getBool("WEBGL_FORCE_F16_TEXTURES")&&_.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),_.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>(0,E.isDownloadFloatTextureEnabled)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_FENCE_API_ENABLED",()=>(0,E.isWebGLFenceEnabled)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{return _.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),_.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+`delete) or at least 0, but got ${e}.`)}),_.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>e.device_util.isMobile()?1:-1,e=>{if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+`manual flush) or at least 0, but got ${e}.`)}),_.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),_.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),_.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),_.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);
},{"@tensorflow/tfjs-core":"nPFy","./webgl_util":"wqV5"}],"Y5cG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlslDifferences=e;var n=require("@tensorflow/tfjs-core");function e(){let e,a,t,u,o,l,v,i,r,s;return 2===(0,n.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",a="in",t="out",u="in",o="texture",l="outputColor",v="out vec4 outputColor;",i="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",r="",s="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",a="attribute",t="varying",u="varying",o="texture2D",l="gl_FragColor",v="",i="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",r="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",s="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:a,varyingVs:t,varyingFs:u,texture2D:o,output:l,defineOutput:v,defineSpecialNaN:i,defineSpecialInf:r,defineRound:s}}
},{"@tensorflow/tfjs-core":"nPFy"}],"r0fH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENCODE_FLOAT_SNIPPET=void 0,exports.dotify=c,exports.getFlatIndexFrom3D=s,exports.getFlatIndexFrom3DOutput=l,exports.getLogicalCoordinatesFromFlatIndex=t,exports.getLogicalCoordinatesFromFlatIndexByUniform=r,exports.getOutputLogicalCoordinatesFromFlatIndexByUniform=e;var n=require("@tensorflow/tfjs-core");function t(t,e,o="index"){const r=n.util.computeStrides(e);return r.map((n,e)=>{return`${`int ${t[e]} = ${o} / ${n}`}; ${e===r.length-1?`int ${t[e+1]} = ${o} - ${t[e]} * ${n}`:`index -= ${t[e]} * ${n}`};`}).join("")}function e(t,e,o="index"){const r=n.util.computeStrides(e);return r.map((n,e)=>{return`${`int ${t[e]} = ${o} / outShapeStrides[${e}]`}; ${e===r.length-1?`int ${t[e+1]} = ${o} - ${t[e]} * outShapeStrides[${e}]`:`index -= ${t[e]} * outShapeStrides[${e}]`};`}).join("")}function o(n,t){const e=n.length,o=n.map(n=>`${t}[${n}]`),r=new Array(e-1);r[e-2]=o[e-1];for(let i=e-3;i>=0;--i)r[i]=`(${r[i+1]} * ${o[i+1]})`;return r}function r(n,t,e="index"){const r=o(n.map((n,t)=>t),t);return r.map((t,o)=>{return`${`int ${n[o]} = ${e} / ${r[o]}`}; ${o===r.length-1?`int ${n[o+1]} = ${e} - ${n[o]} * ${r[o]}`:`index -= ${n[o]} * ${r[o]}`};`}).join("")}function i(n){return 1===n.length?`${n[0]}`:`vec${n.length}(${n.join(",")})`}function c(n,t){if(n.length!==t.length)throw new Error("Vectors to be dotted must be of the same length -"+`got ${n.length} and ${t.length}`);const e=[],o=Math.floor(n.length/4),r=n.length%4;for(let c=0;c<o;c++){const o=n.slice(4*c,4*c+4),r=t.slice(4*c,4*c+4);e.push(`${i(o)}, ${i(r)}`)}if(0!==r){let r=n.slice(4*o),c=t.slice(4*o);1===r.length&&(r=r.map(n=>`float(${n})`),c=c.map(n=>`float(${n})`)),e.push(`${i(r)}, ${i(c)}`)}return e.map((n,t)=>`dot(${n})`).join("+")}function s(t){const e=n.util.computeStrides(t).map(n=>n.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;\n  }\n`}function l(){return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n"}const a="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";exports.ENCODE_FLOAT_SNIPPET=a;
},{"@tensorflow/tfjs-core":"nPFy"}],"ELB4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCoordsDataType=W,exports.getUniformInfoFromShape=J,exports.makeShader=a,exports.squeezeInputInfo=K;var e=require("@tensorflow/tfjs-core"),n=require("./glsl_version"),t=o(require("./shader_compiler_util"));function r(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:n})(e)}function o(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(n);if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=i?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(o,a,c):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}const{getBroadcastDims:i}=e.backend_util;function a(t,r,o){const i=[];if(t.forEach(n=>{const t=e.util.sizeFromShape(n.shapeInfo.logicalShape);if(n.shapeInfo.isUniform?i.push(`uniform float ${n.name}${t>1?`[${t}]`:""};`):(i.push(`uniform sampler2D ${n.name};`),i.push(`uniform int offset${n.name};`)),o.enableShapeUniforms){const{uniformShape:e}=J(o.packedInputs,n.shapeInfo.logicalShape,n.shapeInfo.texShape);switch(e.length){case 1:i.push(`uniform int ${n.name}Shape;`);break;case 2:i.push(`uniform ivec2 ${n.name}Shape;`);break;case 3:i.push(`uniform ivec3 ${n.name}Shape;`);break;case 4:i.push(`uniform ivec4 ${n.name}Shape;`)}i.push(`uniform ivec2 ${n.name}TexShape;`)}}),o.enableShapeUniforms){switch(r.logicalShape.length){case 1:i.push("uniform int outShape;");break;case 2:i.push("uniform ivec2 outShape;"),i.push("uniform int outShapeStrides;");break;case 3:i.push("uniform ivec3 outShape;"),i.push("uniform ivec2 outShapeStrides;");break;case 4:i.push("uniform ivec4 outShape;"),i.push("uniform ivec3 outShapeStrides;")}i.push("uniform ivec2 outTexShape;")}o.customUniforms&&o.customUniforms.forEach(e=>{i.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)});const a=i.join("\n"),c=t.map(e=>l(e,r,o.packedInputs,o.enableShapeUniforms)).join("\n"),u=r.texShape,$=(0,n.getGlslDifferences)(),f=x($);let S,T,m=v($);return r.isPacked?(S=p(r.logicalShape,u,o.enableShapeUniforms),T=d($)):(S=s(r.logicalShape,u,o.enableShapeUniforms),T=h($)),o.packedInputs&&(m+=C),[m,f,T,a,S,c,o.userCode].join("\n")}function c(e,n=!1){const t=e.shapeInfo.logicalShape;switch(t.length){case 0:return F(e,n);case 1:return M(e,n);case 2:return B(e,n);case 3:return E(e,n);case 4:return j(e,n);case 5:return q(e);case 6:return P(e);default:throw new Error(`${t.length}-D input sampling`+" is not yet supported")}}function u(e,n){switch(e.shapeInfo.logicalShape.length){case 0:return D(e);case 1:return N(e,n);case 2:return L(e,n);case 3:return A(e,n);default:return z(e,n)}}function l(e,n,t=!1,r){let o="";o+=t?u(e,r):c(e,r);const i=e.shapeInfo.logicalShape,a=n.logicalShape;return i.length<=a.length&&(o+=t?G(e,n):H(e,n)),o}function p(e,n,t){switch(e.length){case 0:return T();case 1:return m(e,n,t);case 2:return O(e,n,t);case 3:return R(e,n,t);default:return y(e,n,t)}}function s(e,n,t){switch(e.length){case 0:return T();case 1:return g(e,n,t);case 2:return V(e,n,t);case 3:return w(e,n,t);case 4:return I(e,n,t);case 5:return U(e,n);case 6:return k(e,n);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function x(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}function h(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}function d(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}function v(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${$}\n    ${f}\n    ${S}\n  `}const $="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",f="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",S="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",C="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function T(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function m(e,n,t){const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return 1===r[0]?t?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?t?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:t?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}function g(e,n,t){return 1===n[0]?t?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?t?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:t?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `}function R(e,n,t){if(t)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(e[2]/2),i=o*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function w(e,n,r){if(r){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${t.getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const o=t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${o}\n      return ivec3(r, c, d);\n    }\n  `}function y(e,n,t){if(t)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(e[e.length-1]/2),i=o*Math.ceil(e[e.length-2]/2);let a=i,c="",u="b, r, c";for(let l=2;l<e.length-1;l++)c=`\n      int b${l} = index / ${a*=e[e.length-l-1]};\n      index -= b${l} * ${a};\n    `+c,u=`b${l}, `+u;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${c}\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec${e.length}(${u});\n    }\n  `}function I(e,n,r){if(r){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${t.getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const o=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${o}\n      return ivec4(r, c, d, d2);\n    }\n  `}function U(e,n){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},\n                             ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function k(e,n){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function O(n,t,r){const o=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(e.util.arraysEqual(n,t))return r?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${o[0]}, ${o[1]}));\n      }\n    `;const i=Math.ceil(n[1]/2);return r?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${o[0]}, ${o[1]}));\n\n      int index = resTexRC.x * ${o[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function V(n,t,r){return e.util.arraysEqual(n,t)?r?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===n[1]?r?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===n[0]?r?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:r?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${n[1]};\n      int c = index - r * ${n[1]};\n      return ivec2(r, c);\n    }\n  `}function b(e){return`offset${e}`}function D(e){const t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${(0,n.getGlslDifferences)().texture2D}(${t}, halfCR);\n    }\n  `}function F(e,n){const t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[o,i]=e.shapeInfo.texShape;if(1===o&&1===i)return`\n      float ${r}() {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const a=b(t);if(n)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${a});\n      return sampleTexture(${t}, uv);\n    }\n  `;const[c,u]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${c}, ${u}, ${a});\n      return sampleTexture(${t}, uv);\n    }\n  `}function N(e,t){const r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,a=(0,n.getGlslDifferences)();if(t)return`\n    vec4 ${o}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${o}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${c[0]}, ${c[1]}, index);\n      return ${a.texture2D}(${r}, uv);\n    }\n  `}function M(e,n){const t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${_(e)}\n      }\n    `;const o=e.shapeInfo.texShape,i=o[0],a=o[1];if(1===a&&1===i)return`\n      float ${r}(int index) {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const c=b(t);return 1===a?n?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${c}) + 0.5) / float(${t}TexShape[0]));\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${c}) + 0.5) / ${i}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:1===i?n?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${c}) + 0.5) / float(${t}TexShape[1]), 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${c}) + 0.5) / ${a}.0, 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:n?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${c});\n      return sampleTexture(${t}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${i}, ${a}, index + ${c});\n      return sampleTexture(${t}, uv);\n    }\n  `}function L(t,r){const o=t.shapeInfo.logicalShape,i=t.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),c=t.shapeInfo.texShape,u=c[0],l=c[1],p=(0,n.getGlslDifferences)();if(null!=c&&e.util.arraysEqual(o,c))return r?`\n      vec4 ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);\n\n        return ${p.texture2D}(${i}, uv);\n      }\n    `:`\n      vec4 ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${u}.0);\n\n        return ${p.texture2D}(${i}, uv);\n      }\n    `;if(r)return`\n    vec4 ${a}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${i}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${p.texture2D}(${i}, uv);\n    }\n  `;const s=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];return`\n    vec4 ${a}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(o[1]/2)}, ${s[0]}, ${s[1]}, row, col);\n      return ${p.texture2D}(${i}, uv);\n    }\n  `}function B(n,t){const r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=n.shapeInfo.texShape;if(null!=a&&e.util.arraysEqual(r,a)){if(t)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `;const e=a[0];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${e}.0);\n      return sampleTexture(${o}, uv);\n    }\n  `}const{newShape:u,keptDims:l}=e.util.squeezeShape(r),p=u;if(p.length<r.length){const e=["row","col"];return`\n      ${c(K(n,p),t)}\n      float ${i}(int row, int col) {\n        return ${i}(${Q(e,l)});\n      }\n    `}if(n.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${r[1]}, 1)));\n        ${_(n)}\n      }\n    `;const s=a[0],x=a[1],h=b(o);return 1===x?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${o}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${o}TexShape[0]));\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${r[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${s}.0);\n      return sampleTexture(${o}, uv);\n    }\n  `:1===s?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${o}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${o}TexShape[1]), 0.5);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${r[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${x}.0, 0.5);\n      return sampleTexture(${o}, uv);\n    }\n  `:t?`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o}Shape[1] + col + ${h};\n        vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${r[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${s}, ${x}, index);\n    return sampleTexture(${o}, uv);\n  }\n`}function A(e,t){const r=e.shapeInfo.logicalShape,o=e.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=e.shapeInfo.texShape,c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===r[0]){const n=[1,2],o=["b","row","col"];return`\n        ${u(K(e,r.slice(1)),t)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${Q(o,n)});\n        }\n      `}const l=(0,n.getGlslDifferences)();if(t)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${o}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${o}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${l.texture2D}(${o}, uv);\n    }\n  `;const p=c[0],s=c[1],x=Math.ceil(r[2]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${p}, ${s}, ${x*Math.ceil(r[1]/2)}, ${x}, b, row, col);\n      return ${l.texture2D}(${o}, uv);\n    }\n  `}function E(n,t){const r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[1]*r[2],u=r[2],{newShape:l,keptDims:p}=e.util.squeezeShape(r),s=l;if(s.length<r.length){const e=["row","col","depth"];return`\n        ${c(K(n,s),t)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${Q(e,p)});\n        }\n      `}if(n.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${u}, 1)));\n        ${_(n)}\n      }\n    `;const x=n.shapeInfo.texShape,h=x[0],d=x[1],v=n.shapeInfo.flatOffset;if(d===a&&null==v)return t?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${o}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${u}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${o}, uv);\n        }\n      `;if(d===u&&null==v)return t?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${o}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${r[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${o}, uv);\n    }\n  `;const $=b(o);return t?`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${o}Shape[1] * ${o}Shape[2];\n      int stride1 = ${o}Shape[2];\n      int index = row * ${a} + col * ${u} + depth + ${$};\n      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);\n      return sampleTexture(${o}, uv);\n    }\n    `:`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${u} + depth + ${$};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${o}, uv);\n      }\n  `}function z(e,t){const r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=(0,n.getGlslDifferences)();if(t)return`\n    vec4 ${o}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${r}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${r}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${r}, uv);\n    }\n  `;const a=e.shapeInfo.logicalShape,c=a.length,u=e.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],p=l[0],s=l[1],x=Math.ceil(a[c-1]/2);let h=x*Math.ceil(a[c-2]/2),d="int b, int row, int col",v=`b * ${h} + (row / 2) * ${x} + (col / 2)`;for(let n=2;n<c-1;n++)d=`int b${n}, `+d,v=`b${n} * ${h*=a[c-n-1]} + `+v;return`\n    vec4 ${o}(${d}) {\n      int index = ${v};\n      int texR = index / ${s};\n      int texC = index - texR * ${s};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}, ${p});\n      return ${i.texture2D}(${r}, uv);\n    }\n  `}function j(n,t){const r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[3],u=r[2]*a,l=r[1]*u,{newShape:p,keptDims:s}=e.util.squeezeShape(r);if(p.length<r.length){const e=["row","col","depth","depth2"];return`\n      ${c(K(n,p),t)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${Q(e,s)});\n      }\n    `}if(n.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${l}, ${u}, ${a}, 1)));\n        ${_(n)}\n      }\n    `;const x=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,d=h[0],v=h[1],$=`int stride2 = ${o}Shape[3];`,f=`int stride1 = ${o}Shape[2] * stride2;`,S=`int stride0 = ${o}Shape[1] * stride1;`;if(v===l&&null==x)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${$}\n        ${f}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${u}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${v}.0, ${d}.0);\n        return sampleTexture(${o}, uv);\n      }\n    `;if(v===a&&null==x)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${o}Shape[1] * ${o}Shape[2], ${o}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${o}TexShape[1], ${o}TexShape[0]);\n        return sampleTexture(${o}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r[1]*r[2]}, ${r[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${v}.0, ${d}.0);\n        return sampleTexture(${o}, uv);\n      }\n    `;const C=b(o);return t?`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${$}\n      ${f}\n      ${S}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index + ${C});\n      return sampleTexture(${o}, uv);\n    }\n  `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${u} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${v}, index + ${C});\n      return sampleTexture(${o}, uv);\n    }\n  `}function q(n){const t=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[4],a=t[3]*i,u=t[2]*a,l=t[1]*u,{newShape:p,keptDims:s}=e.util.squeezeShape(t);if(p.length<t.length){const e=["row","col","depth","depth2","depth3"];return`\n      ${c(K(n,p))}\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        return ${o}(${Q(e,s)});\n      }\n    `}if(n.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${u}, ${a}, ${i})) +\n          depth3;\n        ${_(n)}\n      }\n    `;const x=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,d=h[0],v=h[1];return v===l&&null==x?`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${u}, ${a}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${v}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:v===i&&null==x?`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${v}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${u} + depth * ${a} +\n          depth2 * ${i} + depth3 + ${b(r)};\n      vec2 uv = uvFromFlat(${d}, ${v}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}function P(n){const t=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),{newShape:i,keptDims:a}=e.util.squeezeShape(t);if(i.length<t.length){const e=["row","col","depth","depth2","depth3","depth4"];return`\n      ${c(K(n,i))}\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${o}(${Q(e,a)});\n      }\n    `}const u=t[5],l=t[4]*u,p=t[3]*l,s=t[2]*p,x=t[1]*s;if(n.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${x}, ${s}, ${p}, ${l})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${u}, 1)));\n        ${_(n)}\n      }\n    `;const h=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,v=d[0],$=d[1];return $===x&&null==h?`\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${s}, ${p}, ${l}, ${u})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${$}.0, ${v}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:$===u&&null==h?`\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${$}.0, ${v}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${x} + col * ${s} + depth * ${p} +\n          depth2 * ${l} + depth3 * ${u} + depth4 + ${b(r)};\n      vec2 uv = uvFromFlat(${v}, ${$}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}function _(n){const t=n.name,r=e.util.sizeFromShape(n.shapeInfo.logicalShape);return r<2?`return ${t};`:`\n    for (int i = 0; i < ${r}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function G(n,t){const r=n.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",c=n.shapeInfo.logicalShape.length,u=t.logicalShape.length,l=i(n.shapeInfo.logicalShape,t.logicalShape),p=W(u),s=u-c;let x;const h=["x","y","z","w","u","v"];x=0===c?"":u<2&&l.length>=1?"coords = 0;":l.map(e=>`coords.${h[e+s]} = 0;`).join("\n");let d="";d=u<2&&c>0?"coords":n.shapeInfo.logicalShape.map((e,n)=>`coords.${h[n+s]}`).join(", ");let v="return outputValue;";const $=1===e.util.sizeFromShape(n.shapeInfo.logicalShape),f=1===e.util.sizeFromShape(t.logicalShape);if(1!==c||$||f){if($&&!f)v=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){const e=c-2,n=c-1;l.indexOf(e)>-1&&l.indexOf(n)>-1?v="return vec4(outputValue.x);":l.indexOf(e)>-1?v="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(n)>-1&&(v="return vec4(outputValue.xx, outputValue.zz);")}}else v="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${a}() {\n      ${p} coords = getOutputCoords();\n      ${x}\n      vec4 outputValue = get${o}(${d});\n      ${v}\n    }\n  `}function H(n,t){const r=n.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",c=t.texShape,u=n.shapeInfo.texShape,l=n.shapeInfo.logicalShape.length,p=t.logicalShape.length;if(!n.shapeInfo.isUniform&&l===p&&null==n.shapeInfo.flatOffset&&e.util.arraysEqual(u,c))return`\n      float ${a}() {\n        return sampleTexture(${r}, resultUV);\n      }\n    `;const s=W(p),x=i(n.shapeInfo.logicalShape,t.logicalShape),h=p-l;let d;const v=["x","y","z","w","u","v"];let $="";return`\n    float ${a}() {\n      ${s} coords = getOutputCoords();\n      ${d=0===l?"":p<2&&x.length>=1?"coords = 0;":x.map(e=>`coords.${v[e+h]} = 0;`).join("\n")}\n      return get${o}(${$=p<2&&l>0?"coords":n.shapeInfo.logicalShape.map((e,n)=>`coords.${v[n+h]}`).join(", ")});\n    }\n  `}function W(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function J(n,t,r){const{newShape:o,keptDims:i}=e.util.squeezeShape(t),a=t.length,c=n&&3===a&&1===t[0],u=c?t.slice(1):o,l=!n&&a>1&&!e.util.arraysEqual(t,r)&&o.length<a||c;return{useSqueezeShape:l,uniformShape:l?u:t,keptDims:i}}function K(e,n){const t=JSON.parse(JSON.stringify(e));return t.shapeInfo.logicalShape=n,t}function Q(e,n){return n.map(n=>e[n]).join(", ")}
},{"@tensorflow/tfjs-core":"nPFy","./glsl_version":"Y5cG","./shader_compiler_util":"r0fH"}],"vVuV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileProgram=r,exports.getUniformLocations=i,exports.makeShaderKey=u,exports.runProgram=f,exports.useShapeUniforms=l;var e=require("@tensorflow/tfjs-core"),t=o(require("./shader_compiler")),a=require("./webgl_util");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(o,i,s):o[i]=e[i]}return o.default=e,a&&a.set(e,o),o}function r(n,o,r,s){const f=r.map((e,t)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:o.variableNames[t],shapeInfo:a}}),u=f.map(e=>e.shapeInfo),l={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},c=t.makeShader(f,l,o),p=(0,a.createFragmentShader)(n.gl,c),h=n.createProgram(p);return(0,e.env)().get("ENGINE_COMPILE_ONLY")?{program:o,fragmentShader:p,source:c,webGLProgram:h,inShapeInfos:u,outShapeInfo:l,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:o,fragmentShader:p,source:c,webGLProgram:h,inShapeInfos:u,outShapeInfo:l},i(n,o,h))}function i(t,a,n){const o={},r={},i={},s=[];let f,u,l,c=null,p=null;p=t.getUniformLocation(n,"NAN",!1),1===(0,e.env)().getNumber("WEBGL_VERSION")&&(c=t.getUniformLocation(n,"INFINITY",!1));for(let e=0;e<a.variableNames.length;e++){const s=a.variableNames[e];o[s]=t.getUniformLocation(n,s,!1),o[`offset${s}`]=t.getUniformLocation(n,`offset${s}`,!1),a.enableShapeUniforms&&(r[`${s}Shape`]=t.getUniformLocation(n,`${s}Shape`,!1),i[`${s}TexShape`]=t.getUniformLocation(n,`${s}TexShape`,!1))}return a.enableShapeUniforms&&(f=t.getUniformLocation(n,"outShape",!1),l=t.getUniformLocation(n,"outShapeStrides",!1),u=t.getUniformLocation(n,"outTexShape",!1)),a.customUniforms&&a.customUniforms.forEach((e,a)=>{s[a]=t.getUniformLocation(n,e.name,!1)}),{uniformLocations:o,customUniformLocations:s,infLoc:c,nanLoc:p,inShapesLocations:r,inTexShapesLocations:i,outShapeLocation:f,outShapeStridesLocation:l,outTexShapeLocation:u}}function s(t,a){if(t.length!==a.length)throw Error(`Binary was compiled with ${t.length} inputs, but `+`was executed with ${a.length} inputs`);t.forEach((t,n)=>{const o=t.logicalShape,r=a[n],i=r.shape;if(!e.util.arraysEqual(o,i))throw Error("Binary was compiled with different shapes than "+`the current args. Shapes ${o} and ${i} must match`);if(t.isUniform&&r.isUniform)return;const s=t.texShape,f=r.isUniform?null:r.texData.texShape;if(!e.util.arraysEqual(s,f))throw Error("Binary was compiled with different texture shapes than the"+` current args. Shape ${s} and ${f} must match`)})}function f(a,n,o,r,i){n.program.enableShapeUniforms||(s(n.inShapeInfos,o),s([n.outShapeInfo],[r]));const f=r.texData.texture,u=r.texData.texShape;r.texData.isPacked?a.setOutputPackedMatrixTexture(f.texture,u[0],u[1]):a.setOutputMatrixTexture(f.texture,u[0],u[1]),a.setProgram(n.webGLProgram),1===(0,e.env)().getNumber("WEBGL_VERSION")&&null!==n.infLoc&&a.gl.uniform1f(n.infLoc,1/0),null!==n.nanLoc&&a.gl.uniform1f(n.nanLoc,NaN),o.forEach((o,r)=>{const i=n.program.variableNames[r],s=n.uniformLocations[i],f=n.uniformLocations[`offset${i}`],u=n.inShapesLocations[`${i}Shape`],l=n.inTexShapesLocations[`${i}TexShape`];if(u){const{uniformShape:e}=t.getUniformInfoFromShape(n.program.packedInputs,o.shape,o.texData.texShape);switch(e.length){case 1:a.gl.uniform1iv(u,new Int32Array(e));break;case 2:a.gl.uniform2iv(u,new Int32Array(e));break;case 3:a.gl.uniform3iv(u,new Int32Array(e));break;case 4:a.gl.uniform4iv(u,new Int32Array(e))}}if(l&&a.gl.uniform2i(l,o.texData.texShape[0],o.texData.texShape[1]),null!=s)if(o.isUniform)if(e.util.sizeFromShape(o.shape)<2)a.gl.uniform1f(s,o.uniformValues[0]);else{let e=o.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),a.gl.uniform1fv(s,e)}else null!=o.texData.slice&&null!=f&&a.gl.uniform1i(f,o.texData.slice.flatOffset),a.setInputMatrixTexture(o.texData.texture.texture,s,r)});const l=n.outShapeLocation;if(l)switch(r.shape.length){case 1:a.gl.uniform1iv(l,new Int32Array(r.shape));break;case 2:a.gl.uniform2iv(l,new Int32Array(r.shape));break;case 3:a.gl.uniform3iv(l,new Int32Array(r.shape));break;case 4:a.gl.uniform4iv(l,new Int32Array(r.shape))}if(n.outShapeStridesLocation){const t=e.util.computeStrides(r.shape);switch(r.shape.length){case 2:a.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(t));break;case 3:a.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(t));break;case 4:a.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(t))}}n.outTexShapeLocation&&a.gl.uniform2i(n.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),n.program.customUniforms&&i&&n.program.customUniforms.forEach((e,t)=>{const o=n.customUniformLocations[t],r=i[t];if("float"===e.type)a.gl.uniform1fv(o,r);else if("vec2"===e.type)a.gl.uniform2fv(o,r);else if("vec3"===e.type)a.gl.uniform3fv(o,r);else if("vec4"===e.type)a.gl.uniform4fv(o,r);else if("int"===e.type)a.gl.uniform1iv(o,r);else if("ivec2"===e.type)a.gl.uniform2iv(o,r);else if("ivec3"===e.type)a.gl.uniform3iv(o,r);else{if("ivec4"!==e.type)throw Error(`uniform type ${e.type} is not supported yet.`);a.gl.uniform4iv(o,r)}}),a.executeProgram()}function u(a,n,o){let r="";n.concat(o).forEach(n=>{const i=null!=n.texData&&null!=n.texData.slice&&n.texData.slice.flatOffset>0;if(a.enableShapeUniforms&&!n.isUniform){const s=n.texData.texShape,{useSqueezeShape:f,uniformShape:u,keptDims:l}=t.getUniformInfoFromShape(a.packedInputs,n.shape,s);let c="",p="",h="";if(1===u.length&&a.packedInputs){const e=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];c=`${e[0]>1}_${e[1]>1}`}else if(2!==u.length||a.packedInputs){if(u.length>2&&!a.packedInputs){const t=e.util.computeStrides(u);h=`${t[0]===s[1]}_${t[t.length-1]===s[1]}`}}else p=`${u[0]>1}_${u[1]>1}`;const m=n.shape.length,g=2===u.length&&e.util.arraysEqual(n.shape,s),S=1===e.util.sizeFromShape(n.shape),x=e.backend_util.getBroadcastDims(n.shape,o.shape),L=!a.packedInputs&&m===o.shape.length&&e.util.arraysEqual(s,o.texData.texShape),d=a.packedInputs||u.length>2?"":`${s[0]>1}_${s[1]>1}`;r+=`${m}_${L}_${f?l:""}_${u.length}_${S}_${x}_${g}_${c}_${p}_${h}_${d}_${i}`}else{const e=n.isUniform?"uniform":n.texData.texShape;r+=`${n.shape}_${e}_${i}`}});const i=a.userCode;let s=a.constructor.name;return s+="_"+r+"_"+i+`${(0,e.env)().getNumber("WEBGL_VERSION")}`}function l(t){return(0,e.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}
},{"@tensorflow/tfjs-core":"nPFy","./shader_compiler":"ELB4","./webgl_util":"wqV5"}],"MIOs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecodeMatrixProgram=void 0;var e=require("./glsl_version"),t=require("./gpgpu_math"),r=o(require("./shader_compiler_util")),n=require("./tex_util");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}class a{constructor(i){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=n.PackingScheme.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=(0,e.getGlslDifferences)();this.outputShape=i,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?r.getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],i):r.getLogicalCoordinatesFromFlatIndex(["r","c","d"],i)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.DecodeMatrixProgram=a;
},{"./glsl_version":"Y5cG","./gpgpu_math":"vVuV","./shader_compiler_util":"r0fH","./tex_util":"GY6p"}],"CwE1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecodeMatrixPackedProgram=void 0;var e=require("./glsl_version"),t=require("./gpgpu_math"),r=o(require("./shader_compiler_util")),n=require("./tex_util");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}class a{constructor(i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=n.PackingScheme.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=(0,e.getGlslDifferences)();this.outputShape=i,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?r.getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],i):r.getLogicalCoordinatesFromFlatIndex(["r","c","d"],i)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.DecodeMatrixPackedProgram=a;
},{"./glsl_version":"Y5cG","./gpgpu_math":"vVuV","./shader_compiler_util":"r0fH","./tex_util":"GY6p"}],"H2GP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeFloatProgram=void 0;var e=require("./glsl_version"),t=require("./shader_compiler_util"),o=require("./tex_util");class r{constructor(r){this.variableNames=["A"],this.outTexUsage=o.TextureUsage.DOWNLOAD;const s=(0,e.getGlslDifferences)();this.outputShape=r,this.userCode=`\n      ${t.ENCODE_FLOAT_SNIPPET}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${s.output} = encode_float(x);\n      }\n    `}}exports.EncodeFloatProgram=r;
},{"./glsl_version":"Y5cG","./shader_compiler_util":"r0fH","./tex_util":"GY6p"}],"vLid":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeFloatPackedProgram=void 0;var e=require("./glsl_version"),t=require("./shader_compiler_util"),o=require("./tex_util");class r{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=o.TextureUsage.DOWNLOAD;const s=(0,e.getGlslDifferences)();this.outputShape=r,this.userCode=`\n      ${t.ENCODE_FLOAT_SNIPPET}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${s.output} = encode_float(x);\n      }\n    `}}exports.EncodeFloatPackedProgram=r;
},{"./glsl_version":"Y5cG","./shader_compiler_util":"r0fH","./tex_util":"GY6p"}],"pfo6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeMatrixProgram=void 0;var e=require("./glsl_version"),t=require("./gpgpu_math"),n=o(require("./shader_compiler_util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}class a{constructor(r,o=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=(0,e.getGlslDifferences)();this.outputShape=r,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length);let s="result";o&&(s="floor(result * 255. + 0.5)"),this.userCode=`\n      ${this.enableShapeUniforms?n.getFlatIndexFrom3DOutput():n.getFlatIndexFrom3D(r)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ${a.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${a.output} = vec4(${s}, 0., 0., 0.);\n      }\n    `}}exports.EncodeMatrixProgram=a;
},{"./glsl_version":"Y5cG","./gpgpu_math":"vVuV","./shader_compiler_util":"r0fH"}],"VpZr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeMatrixPackedProgram=void 0;var e=require("./glsl_version"),t=require("./gpgpu_math"),n=o(require("./shader_compiler_util"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(o,s,l):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}class a{constructor(r,o=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=(0,e.getGlslDifferences)();this.outputShape=r,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length);let s="",l="result";o&&(l="floor(result * 255. + 0.5)");for(let e=0;e<=1;e++)for(let t=0;t<=1;t++){const n=2*e+t;s+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${this.enableShapeUniforms?"outShape[2]":`${r[2]}`}) {\n          localCoords[2] += ${t};\n          if (localCoords[1] + ${e} < ${this.enableShapeUniforms?"outShape[1]":`${r[1]}`}) {\n            localCoords[1] += ${e};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${a.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${n}] = values[0];\n            } else if (offset == 1) {\n              result[${n}] = values[1];\n            } else if (offset == 2) {\n              result[${n}] = values[2];\n            } else {\n              result[${n}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?n.getFlatIndexFrom3DOutput():n.getFlatIndexFrom3D(r)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${s}\n\n          ${a.output} = ${l};\n        }\n    `}}exports.EncodeMatrixPackedProgram=a;
},{"./glsl_version":"Y5cG","./gpgpu_math":"vVuV","./shader_compiler_util":"r0fH"}],"Fmkw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindVertexProgramAttributeStreams=B,exports.createBufferFromOutputTexture=R,exports.createFloat16MatrixTexture=T,exports.createFloat16PackedMatrixTexture=_,exports.createFloat32MatrixTexture=d,exports.createIndexBuffer=i,exports.createPackedMatrixTexture=s,exports.createUnsignedBytesMatrixTexture=A,exports.createVertexBuffer=c,exports.createVertexShader=u,exports.downloadByteEncodedFloatMatrixFromOutputTexture=U,exports.downloadFloat32MatrixFromBuffer=g,exports.downloadMatrixFromPackedOutputTexture=m,exports.downloadPackedMatrixFromBuffer=k,exports.getInternalFormatForFloat16MatrixTexture=f,exports.getInternalFormatForFloat16PackedMatrixTexture=p,exports.getInternalFormatForFloat32MatrixTexture=x,exports.getInternalFormatForPackedMatrixTexture=F,exports.getInternalFormatForUnsignedBytesMatrixTexture=E,exports.uploadDenseMatrixToTexture=h,exports.uploadPixelDataToTexture=P;var e=require("@tensorflow/tfjs-core"),t=require("./glsl_version"),r=o(require("./tex_util")),n=o(require("./webgl_util"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=o?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function u(e){const r=(0,t.getGlslDifferences)(),a=`${r.version}\n    precision highp float;\n    ${r.attribute} vec3 clipSpacePos;\n    ${r.attribute} vec2 uv;\n    ${r.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return n.createVertexShader(e,a)}function c(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return n.createStaticVertexBuffer(e,t)}function i(e){const t=new Uint16Array([0,1,2,2,1,3]);return n.createStaticIndexBuffer(e,t)}function l(t,r,a,o,u,c){n.validateTextureSize(r,a);const i=n.createTexture(t),l=t.TEXTURE_2D;return n.callAndCheck(t,()=>t.bindTexture(l,i)),n.callAndCheck(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),n.callAndCheck(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),n.callAndCheck(t,()=>t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)),n.callAndCheck(t,()=>t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)),1===(0,e.env)().getNumber("WEBGL_VERSION")?n.callAndCheck(t,()=>t.texImage2D(l,0,o,r,a,0,u,c,null)):n.callAndCheck(t,()=>t.texStorage2D(l,1,o,r,a)),n.callAndCheck(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[a,r]}}function x(e){return e.internalFormatFloat}function d(e,t,n,a){const[o,u]=r.getUnpackedMatrixTextureShapeWidthHeight(t,n);return l(e,o,u,x(a),a.textureFormatFloat,e.FLOAT)}function f(e){return e.internalFormatHalfFloat}function T(e,t,n,a){const[o,u]=r.getUnpackedMatrixTextureShapeWidthHeight(t,n);return l(e,o,u,f(a),a.textureFormatFloat,a.textureTypeHalfFloat)}function E(e){return e.downloadTextureFormat}function A(e,t,n,a){const[o,u]=r.getUnpackedMatrixTextureShapeWidthHeight(t,n);return l(e,o,u,E(a),e.RGBA,e.UNSIGNED_BYTE)}function F(e){return e.internalFormatPackedFloat}function s(e,t,n,a){const[o,u]=r.getPackedMatrixTextureShapeWidthHeight(t,n);return l(e,o,u,F(a),e.RGBA,e.FLOAT)}function p(e){return e.internalFormatPackedHalfFloat}function _(e,t,n,a){const[o,u]=r.getPackedMatrixTextureShapeWidthHeight(t,n);return l(e,o,u,p(a),e.RGBA,a.textureTypeHalfFloat)}function B(e,t,r){return n.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),n.bindVertexBufferToProgramAttribute(e,t,"clipSpacePos",r,3,20,0)&&n.bindVertexBufferToProgramAttribute(e,t,"uv",r,2,20,12)}function h(t,r,a,o,u,c){let i,l,x;n.callAndCheck(t,()=>t.bindTexture(t.TEXTURE_2D,r)),u instanceof Uint8Array?(i=new Uint8Array(a*o*4),l=t.UNSIGNED_BYTE,x=t.RGBA):(i=new Float32Array(a*o*4),l=t.FLOAT,x=c.internalFormatPackedFloat),i.set(u),2===(0,e.env)().getNumber("WEBGL_VERSION")?n.callAndCheck(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,a,o,t.RGBA,l,i)):n.callAndCheck(t,()=>t.texImage2D(t.TEXTURE_2D,0,x,a,o,0,t.RGBA,l,i)),n.callAndCheck(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function P(t,r,a){n.callAndCheck(t,()=>t.bindTexture(t.TEXTURE_2D,r)),a.data instanceof Uint8Array?2===(0,e.env)().getNumber("WEBGL_VERSION")?n.callAndCheck(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,a.width,a.height,t.RGBA,t.UNSIGNED_BYTE,a.data)):n.callAndCheck(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,a.width,a.height,0,t.RGBA,t.UNSIGNED_BYTE,a.data)):2===(0,e.env)().getNumber("WEBGL_VERSION")?n.callAndCheck(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,a)):n.callAndCheck(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a)),n.callAndCheck(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function R(e,t,r,a){const o=e.createBuffer();n.callAndCheck(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const u=16*t*r;return n.callAndCheck(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,u,e.STREAM_READ)),n.callAndCheck(e,()=>e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,0)),n.callAndCheck(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function g(e,t,r){const n=e,a=new Float32Array(r);return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,a),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),a}function U(e,t,a,o){const[u,c]=r.getUnpackedMatrixTextureShapeWidthHeight(t,a),i=new Uint8Array(r.getUnpackedArraySizeFromMatrixSize(t*a,4));return n.callAndCheck(e,()=>e.readPixels(0,0,u,c,o.downloadTextureFormat,e.UNSIGNED_BYTE,i)),new Float32Array(i.buffer)}function k(e,t,n,a,o,u,c,i){const l=e,x=new Float32Array(r.getPackedRGBAArraySizeFromMatrixShape(u,c));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,x),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),x}function m(e,t,r){const a=new Float32Array(t*r*4);return n.callAndCheck(e,()=>e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,a)),a}
},{"@tensorflow/tfjs-core":"nPFy","./glsl_version":"Y5cG","./tex_util":"GY6p","./webgl_util":"wqV5"}],"OTOS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GPGPUContext=void 0,exports.linearSearchLastTrue=u;var e=require("@tensorflow/tfjs-core"),t=require("./canvas_util"),r=n(require("./gpgpu_util")),i=n(require("./tex_util")),o=n(require("./webgl_util"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=o?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(i,n,l):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}class l{constructor(s){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=(0,e.env)().getNumber("WEBGL_VERSION");null!=s?(this.gl=s,(0,t.setWebGLContext)(n,s)):this.gl=(0,t.getWebGLContext)(n);let l="WEBGL_color_buffer_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,e.env)().getNumber("WEBGL_VERSION")){const t="OES_texture_float",r="OES_texture_half_float";if(this.textureFloatExtension=o.getExtensionOrThrow(this.gl,t),o.hasExtension(this.gl,r))this.textureHalfFloatExtension=o.getExtensionOrThrow(this.gl,r);else if((0,e.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(l),o.hasExtension(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=o.getExtensionOrThrow(this.gl,"EXT_color_buffer_half_float");else if((0,e.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(l="EXT_color_buffer_float",o.hasExtension(this.gl,l))this.colorBufferFloatExtension=this.gl.getExtension(l);else{if(!o.hasExtension(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=r.createVertexBuffer(this.gl),this.indexBuffer=r.createIndexBuffer(this.gl),this.framebuffer=o.createFramebuffer(this.gl),this.textureConfig=i.getTextureConfig(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,e.env)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;o.callAndCheck(e,()=>e.finish()),o.callAndCheck(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),o.callAndCheck(e,()=>e.deleteFramebuffer(this.framebuffer)),o.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),o.callAndCheck(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),o.callAndCheck(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat32MatrixTexture(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat16MatrixTexture(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),r.createUnsignedBytesMatrixTexture(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),r.uploadPixelDataToTexture(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,i,o){this.throwIfDisposed(),r.uploadDenseMatrixToTexture(this.gl,e,t,i,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat16PackedMatrixTexture(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),r.createPackedMatrixTexture(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),o.callAndCheck(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,i){return this.downloadMatrixDriver(e,()=>r.downloadByteEncodedFloatMatrixFromOutputTexture(this.gl,t,i,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,i,o,s,n){return r.downloadPackedMatrixFromBuffer(this.gl,e,t,i,o,s,n,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return r.downloadFloat32MatrixFromBuffer(this.gl,e,t)}createBufferFromTexture(e,t,i){this.bindTextureToFrameBuffer(e);const o=r.createBufferFromOutputTexture(this.gl,t,i,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(t){let r,i;if((0,e.env)().getBool("WEBGL_FENCE_API_ENABLED")){const e=t,o=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),i=(()=>{const t=e.clientWaitSync(o,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED}),r=o}else(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),i=(()=>this.isQueryAvailable(r,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))):i=(()=>!0);return{query:r,isFencePassed:i}}downloadMatrixFromPackedTexture(e,t,i){return this.downloadMatrixDriver(e,()=>r.downloadMatrixFromPackedOutputTexture(this.gl,t,i))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=r.createVertexShader(t));const i=o.createProgram(t);return o.callAndCheck(t,()=>t.attachShader(i,this.vertexShader)),o.callAndCheck(t,()=>t.attachShader(i,e)),o.linkProgram(t,i),this.debug&&o.validateProgram(t,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=r.bindVertexProgramAttributeStreams(t,this.program,this.vertexBuffer)),i}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&o.callAndCheck(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&o.validateProgram(this.gl,this.program),o.callAndCheck(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?o.getProgramUniformLocationOrThrow(this.gl,e,t):o.getProgramUniformLocation(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),o.bindTextureToProgramUniformSampler(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[o,s]=i.getPackedMatrixTextureShapeWidthHeight(t,r);this.setOutputMatrixTextureDriver(e,o,s)}setOutputMatrixWriteRegion(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)}setOutputPackedMatrixWriteRegion(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&o.validateProgram(this.gl,this.program),o.validateFramebuffer(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),o.callAndCheck(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=o.getExtensionOrThrow(this.gl,2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),r=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,r),r}endQuery(){if(2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await e.util.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),r=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=u(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(t,r){this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||e.util.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),o.bindColorTextureToFramebuffer(this.gl,e,this.framebuffer),this.debug&&o.validateFramebuffer(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(o.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.debug&&o.validateFramebuffer(this.gl)):o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const i=this.gl;o.bindColorTextureToFramebuffer(i,e,this.framebuffer),this.debug&&o.validateFramebuffer(i),this.outputTexture=e,o.callAndCheck(i,()=>i.viewport(0,0,t,r)),o.callAndCheck(i,()=>i.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,i){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.scissor(e,t,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function u(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}exports.GPGPUContext=l;
},{"@tensorflow/tfjs-core":"nPFy","./canvas_util":"fDY8","./gpgpu_util":"Fmkw","./tex_util":"GY6p","./webgl_util":"wqV5"}],"Q6tG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uniqueImplCPU=exports.transposeImplCPU=exports.topKImplCPU=exports.tileImplCPU=exports.subImplCPU=exports.stringToHashBucketFastImplCPU=exports.stringSplitImplCPU=exports.stringNGramsImplCPU=exports.stridedSliceImplCPU=exports.sqrtImplCPU=exports.sparseSegmentReductionImplCPU=exports.sparseReshapeImplCPU=exports.sparseFillEmptyRowsImplCPU=exports.sliceImplCPU=exports.simpleAbsImplCPU=exports.sigmoidImplCPU=exports.scatterImplCPU=exports.rsqrtImplCPU=exports.rangeImplCPU=exports.prodImplCPU=exports.notEqualImplCPU=exports.negImplCPU=exports.multiplyImplCPU=exports.minimumImplCPU=exports.maximumImplCPU=exports.maxImplCPU=exports.logImplCPU=exports.linSpaceImplCPU=exports.lessImplCPU=exports.lessEqualImplCPU=exports.greaterImplCPU=exports.greaterEqualImplCPU=exports.gatherV2ImplCPU=exports.gatherNdImplCPU=exports.floorImplCPU=exports.expm1ImplCPU=exports.expImplCPU=exports.equalImplCPU=exports.concatImplCPU=exports.ceilImplCPU=exports.bincountReduceImplCPU=exports.bincountImplCPU=exports.addImplCPU=void 0;var p=t(require("@tensorflow/tfjs-backend-cpu/dist/shared"));function e(p){if("function"!=typeof WeakMap)return null;var t=new WeakMap,l=new WeakMap;return(e=function(p){return p?l:t})(p)}function t(p,t){if(!t&&p&&p.__esModule)return p;if(null===p||"object"!=typeof p&&"function"!=typeof p)return{default:p};var l=e(t);if(l&&l.has(p))return l.get(p);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in p)if("default"!==m&&Object.prototype.hasOwnProperty.call(p,m)){var o=s?Object.getOwnPropertyDescriptor(p,m):null;o&&(o.get||o.set)?Object.defineProperty(r,m,o):r[m]=p[m]}return r.default=p,l&&l.set(p,r),r}const{addImpl:l,bincountImpl:r,bincountReduceImpl:s,ceilImpl:m,concatImpl:o,equalImpl:I,expImpl:x,expm1Impl:P,floorImpl:a,gatherNdImpl:i,gatherV2Impl:C,greaterImpl:U,greaterEqualImpl:n,lessImpl:u,lessEqualImpl:c,linSpaceImpl:g,logImpl:d,maxImpl:f,maximumImpl:q,minimumImpl:b,multiplyImpl:y,negImpl:h,notEqualImpl:E,prodImpl:R,rangeImpl:S,rsqrtImpl:w,scatterImpl:O,sigmoidImpl:j,simpleAbsImpl:v,sliceImpl:k,sparseFillEmptyRowsImpl:F,sparseReshapeImpl:N,sparseSegmentReductionImpl:M,sqrtImpl:_,stridedSliceImpl:A,stringNGramsImpl:B,stringSplitImpl:G,stringToHashBucketFastImpl:H,subImpl:K,tileImpl:T,topKImpl:V,transposeImpl:W,uniqueImpl:D}=p;exports.uniqueImplCPU=D,exports.transposeImplCPU=W,exports.topKImplCPU=V,exports.tileImplCPU=T,exports.subImplCPU=K,exports.stringToHashBucketFastImplCPU=H,exports.stringSplitImplCPU=G,exports.stringNGramsImplCPU=B,exports.stridedSliceImplCPU=A,exports.sqrtImplCPU=_,exports.sparseSegmentReductionImplCPU=M,exports.sparseReshapeImplCPU=N,exports.sparseFillEmptyRowsImplCPU=F,exports.sliceImplCPU=k,exports.simpleAbsImplCPU=v,exports.sigmoidImplCPU=j,exports.scatterImplCPU=O,exports.rsqrtImplCPU=w,exports.rangeImplCPU=S,exports.prodImplCPU=R,exports.notEqualImplCPU=E,exports.negImplCPU=h,exports.multiplyImplCPU=y,exports.minimumImplCPU=b,exports.maximumImplCPU=q,exports.maxImplCPU=f,exports.logImplCPU=d,exports.linSpaceImplCPU=g,exports.lessEqualImplCPU=c,exports.lessImplCPU=u,exports.greaterEqualImplCPU=n,exports.greaterImplCPU=U,exports.gatherV2ImplCPU=C,exports.gatherNdImplCPU=i,exports.floorImplCPU=a,exports.expm1ImplCPU=P,exports.expImplCPU=x,exports.equalImplCPU=I,exports.concatImplCPU=o,exports.ceilImplCPU=m,exports.bincountReduceImplCPU=s,exports.bincountImplCPU=r,exports.addImplCPU=l;
},{"@tensorflow/tfjs-backend-cpu/dist/shared":"ms57"}],"CYDT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PackProgram=void 0;var t=require("./gpgpu_math"),e=require("./packing_util"),r=require("./shader_compiler");class n{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const t=(0,e.getChannels)("rc",this.rank),n=(0,r.getCoordsDataType)(this.rank),s=this.getOutOfBoundsCondition(t),i=this.getSetup(t),h=this.getOutput(t);this.userCode=`\n        void main() {\n          ${n} rc = getOutputCoords();\n\n          if(${s}) {\n            setOutput(vec4(0));\n          } else {\n            ${i}\n\n            setOutput(vec4(${h}));\n          }\n        }\n      `}}getSourceCoordsArr(t){const e=[];for(let r=0;r<=1;r++)for(let n=0;n<=1;n++){let s=`${0===r?"r":"rp1"}, ${0===n?"c":"cp1"}`;for(let e=2;e<this.rank;e++)s=`${t[t.length-1-e]},`+s;e.push(s)}return e}getOutOfBoundsCondition(t){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let r=this.rank-2;r<this.rank;r++)e+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(e+="||");return e}getSetup(t){if(1===this.rank)return"";const e=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],n=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${e[0]};\n      int c = ${e[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${r};\n      bool rEdge = rp1 >= ${n};\n    `}getOutput(t){const e=this.getSourceCoordsArr(t);if(1===this.rank){return`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${e[0]}),\n            cEdge ? 0. : getA(${e[1]}),\n            rEdge ? 0. : getA(${e[2]}),\n            rEdge || cEdge ? 0. : getA(${e[3]})`}}exports.PackProgram=n;
},{"./gpgpu_math":"vVuV","./packing_util":"Axn8","./shader_compiler":"ELB4"}],"d5r6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReshapePackedProgram=void 0;var e=require("./gpgpu_math"),t=r(require("./shader_compiler_util"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}class i{constructor(n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=(0,e.useShapeUniforms)(this.outputShape.length);let i="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),i+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}this.userCode=`\n      ${o(r,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?t.getFlatIndexFrom3DOutput():t.getFlatIndexFrom3D(n)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};\n\n        ${i}\n\n        setOutput(result);\n      }\n    `}}function o(e,n){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n?t.getLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],"inputShape"):t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],e)}\n      return ivec3(r, c, d);\n    }\n  `}exports.ReshapePackedProgram=i;
},{"./gpgpu_math":"vVuV","./shader_compiler_util":"r0fH"}],"iUej":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextureManager=void 0,exports.computeBytes=i;var e=require("@tensorflow/tfjs-core"),t=require("./gpgpu_util"),r=require("./tex_util");class s{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,s){const u=h(t,s),n=x(e,u,s);n in this.freeTextures||(this.freeTextures[n]=[]),n in this.usedTextures||(this.usedTextures[n]=[]);const T=i(e,u,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[n].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=T,this.log();const e=this.freeTextures[n].shift();return this.usedTextures[n].push(e),e}let a;return u===r.PhysicalTextureType.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[n].push(a),this.numUsedTextures++,this._numBytesAllocated+=T,this.log(),a}releaseTexture(t,r,s,u){if(null==this.freeTextures)return;const n=h(s,u),T=x(r,n,u);T in this.freeTextures||(this.freeTextures[T]=[]);const a=i(r,n,this.gpgpu.gl,this.gpgpu.textureConfig,u),o=(0,e.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[T].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[T],c=l.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function u(e,t){const r=e;if(t===r.R32F)return 4;if(t===r.R16F)return 2;if(t===r.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===r.RGBA16F)return 8;if(t===r.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function i(e,t,s,i,T){const h=n(t,i);let x;if(T){const[t,s]=(0,r.getPackedMatrixTextureShapeWidthHeight)(e[0],e[1]);x=t*s}else{const[t,s]=(0,r.getUnpackedMatrixTextureShapeWidthHeight)(e[0],e[1]);x=t*s}return x*u(s,h)}function n(e,s){switch(e){case r.PhysicalTextureType.PACKED_2X2_FLOAT32:return(0,t.getInternalFormatForPackedMatrixTexture)(s);case r.PhysicalTextureType.PACKED_2X2_FLOAT16:return(0,t.getInternalFormatForFloat16PackedMatrixTexture)(s);case r.PhysicalTextureType.UNPACKED_FLOAT32:return(0,t.getInternalFormatForFloat32MatrixTexture)(s);case r.PhysicalTextureType.UNPACKED_FLOAT16:return(0,t.getInternalFormatForFloat16MatrixTexture)(s);case r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE:return(0,t.getInternalFormatForUnsignedBytesMatrixTexture)(s);default:throw new Error(`Unknown physical texture type ${e}`)}}function T(t){return(0,e.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?r.PhysicalTextureType.PACKED_2X2_FLOAT32:r.PhysicalTextureType.UNPACKED_FLOAT32:t?r.PhysicalTextureType.PACKED_2X2_FLOAT16:r.PhysicalTextureType.UNPACKED_FLOAT16}function h(e,t){if(e===r.TextureUsage.UPLOAD)return r.PhysicalTextureType.PACKED_2X2_FLOAT32;if(e===r.TextureUsage.RENDER||null==e)return T(t);if(e===r.TextureUsage.DOWNLOAD||e===r.TextureUsage.PIXELS)return r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function x(e,t,r){return`${e[0]}_${e[1]}_${t}_${r}`}exports.TextureManager=s;
},{"@tensorflow/tfjs-core":"nPFy","./gpgpu_util":"Fmkw","./tex_util":"GY6p"}],"J9Rr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SIGMOID=exports.RELU6=exports.RELU=exports.LINEAR=exports.ELU=exports.CLONE=exports.CHECK_NAN_SNIPPET=exports.ABS=void 0,exports.STEP=s,exports.UnaryOpProgram=void 0;var t=require("./gpgpu_math");class r{constructor(r,e){this.variableNames=["A"],this.outputShape=r,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpProgram=r;const e="if (isnan(x)) return x;";exports.CHECK_NAN_SNIPPET=e;const n="return x;";exports.LINEAR=n;const o="return abs(x);";function s(t=0){return e+`\n    return x > 0.0 ? 1.0 : float(${t});\n  `}exports.ABS=o;const x="return (x >= 0.0) ? x : (exp(x) - 1.0);";exports.ELU=x;const p=e+"\n  return (x < 0.0) ? 0.0 : x;\n";exports.RELU=p;const a=e+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";exports.RELU6=a;const u="return x;";exports.CLONE=u;const i="return 1.0 / (1.0 + exp(-1.0 * x));";exports.SIGMOID=i;
},{"./gpgpu_math":"vVuV"}],"gjas":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnaryOpPackedProgram=exports.SIGMOID=exports.RELU6=exports.RELU=exports.LINEAR=exports.ELU=void 0;var e=require("./gpgpu_math");const r="return x;";exports.LINEAR=r;const t="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n";exports.ELU=t;const s="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";exports.RELU=s;const n="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";exports.RELU6=n;const a="return 1.0 / (1.0 + exp(-1.0 * x));";exports.SIGMOID=a;class u{constructor(r,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=(0,e.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpPackedProgram=u;
},{"./gpgpu_math":"vVuV"}],"I2XV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnpackProgram=void 0;var e=require("./gpgpu_math"),t=require("./packing_util"),r=require("./shader_compiler");class s{constructor(s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=s,this.enableShapeUniforms=(0,e.useShapeUniforms)(this.outputShape.length);const a=s.length,n=(0,t.getChannels)("rc",a),p=(0,r.getCoordsDataType)(a),o=(0,t.getSourceCoords)(a,n),u=n.slice(-2),i=a<=1?"rc":`vec2(${u.join(",")})`;this.userCode=`\n      void main() {\n        ${p} rc = getOutputCoords();\n        vec4 packedInput = getA(${o});\n\n        setOutput(getChannel(packedInput, ${i}));\n      }\n    `}}exports.UnpackProgram=s;
},{"./gpgpu_math":"vVuV","./packing_util":"Axn8","./shader_compiler":"ELB4"}],"YLrt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MathBackendWebGL=exports.EPSILON_FLOAT32=exports.EPSILON_FLOAT16=void 0,exports.getBinaryCache=D,require("./flags_webgl");var e=require("@tensorflow/tfjs-core"),t=require("./canvas_util"),a=require("./decode_matrix_gpu"),r=require("./decode_matrix_packed_gpu"),n=require("./encode_float_gpu"),s=require("./encode_float_packed_gpu"),i=require("./encode_matrix_gpu"),o=require("./encode_matrix_packed_gpu"),u=require("./gpgpu_context"),h=y(require("./gpgpu_math")),l=require("./kernel_utils/shared"),p=require("./pack_gpu"),d=require("./reshape_packed_gpu"),c=y(require("./tex_util")),g=require("./texture_manager"),m=y(require("./unaryop_gpu")),f=require("./unaryop_packed_gpu"),x=require("./unpack_gpu"),P=y(require("./webgl_util"));function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(I=function(e){return e?a:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=n?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}const E=e.kernel_impls.whereImpl,T=1e-7;exports.EPSILON_FLOAT32=T;const L=1e-4;exports.EPSILON_FLOAT16=L;const _={};function D(e){return e in _?_[e]:(_[e]={},_[e])}const w=(0,e.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),S=600;function k(){return null==(0,e.env)().global.screen?1024:(0,e.env)().global.screen.height*(0,e.env)().global.screen.width*window.devicePixelRatio*S/1024/1024}class O extends e.KernelBackend{constructor(a){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!(0,e.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let r;if(null!=a){if(a instanceof u.GPGPUContext)r=a;else{const n=(0,t.getWebGLContext)((0,e.env)().getNumber("WEBGL_VERSION"),a);r=new u.GPGPUContext(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const a=(0,t.getWebGLContext)((0,e.env)().getNumber("WEBGL_VERSION"));r=new u.GPGPUContext(a),this.binaryCache=D((0,e.env)().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=r,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new g.TextureManager(this.gpgpu),this.numMBBeforeWarning=k(),this.texData=new e.DataStorage(this,(0,e.engine)())}nextDataId(){return O.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(t,a,r){if(((0,e.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,e.env)().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===r&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const n={id:this.nextDataId()};return this.texData.set(n,{shape:a,dtype:r,values:t,usage:c.TextureUsage.UPLOAD,refCount:1}),n}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(t,a,r,n,s){if((0,e.env)().getBool("DEBUG")&&this.checkNumericalProblems(a),"complex64"===n)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:n,values:a,usage:c.TextureUsage.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(t){const a=this.texData.get(t),{values:r,dtype:n,complexTensorInfos:s,slice:i,shape:o,isPacked:u}=a;if(null!=i){let e;e=u?new f.UnaryOpPackedProgram(o,m.CLONE):new m.UnaryOpProgram(o,m.CLONE);const a=this.runWebGLProgram(e,[{dataId:t,shape:o,dtype:n}],n),r=this.readSync(a.dataId);return this.disposeIntermediateTensorInfo(a),r}if(null!=r)return this.convertAndCacheOnCPU(t);if("string"===n)return r;const h=null!=this.activeTimers;let l,p;if(h&&(l=e.util.now()),"complex64"===n){const t=this.readSync(s.real.dataId),a=this.readSync(s.imag.dataId);p=e.backend_util.mergeRealAndImagArrays(t,a)}else p=this.getValuesFromTexture(t);return h&&(this.downloadWaitMs+=e.util.now()-l),this.convertAndCacheOnCPU(t,p)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const a=this.texData.get(t),{values:r,shape:n,slice:s,dtype:i,complexTensorInfos:o,isPacked:u}=a;if(null!=s){let e;e=u?new f.UnaryOpPackedProgram(n,m.CLONE):new m.UnaryOpProgram(n,m.CLONE);const a=this.runWebGLProgram(e,[{dataId:t,shape:n,dtype:i}],i),r=this.read(a.dataId);return this.disposeIntermediateTensorInfo(a),r}if(null!=r)return this.convertAndCacheOnCPU(t);if((0,e.env)().getBool("DEBUG")&&!(0,e.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,e.env)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let h,l,p=null;if("complex64"!==i&&(0,e.env)().get("WEBGL_BUFFER_SUPPORTED")){h=this.decode(t);const e=this.texData.get(h.dataId);p=this.gpgpu.createBufferFromTexture(e.texture.texture,...c.getDenseTexShape(n))}if(this.pendingRead.set(t,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){const t=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),a=t[0],r=t[1];l=e.backend_util.mergeRealAndImagArrays(a,r)}else if(null==p)l=this.getValuesFromTexture(t);else{const t=e.util.sizeFromShape(n);l=this.gpgpu.downloadFloat32MatrixFromBuffer(p,t)}if(null!=h&&this.disposeIntermediateTensorInfo(h),null!=p){const e=this.gpgpu.gl;P.callAndCheck(e,()=>e.deleteBuffer(p))}const d=this.convertAndCacheOnCPU(t,l),g=this.pendingRead.get(t);return this.pendingRead.delete(t),g.forEach(e=>e(d)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&(0,e.engine)().removeDataId(t,this),this.pendingDeletes--),d}readToGPU(t,a={}){const r=this.texData.get(t),{values:n,shape:s,slice:i,dtype:o,isPacked:u,texture:h}=r;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){let e;e=u?new f.UnaryOpPackedProgram(s,m.CLONE):new m.UnaryOpProgram(s,m.CLONE);const r=this.runWebGLProgram(e,[{dataId:t,shape:s,dtype:o}],o),n=this.readToGPU(r,a);return this.disposeIntermediateTensorInfo(r),n}if(null==h)throw null!=n?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(t,a.customTexShape),p=(0,e.engine)().makeTensorFromTensorInfo(l),d=this.texData.get(l.dataId);return Object.assign({tensorRef:p},d.texture)}bufferSync(t){const a=this.readSync(t.dataId);if("string"===t.dtype)try{const n=a.map(t=>e.util.decodeString(t));return(0,e.buffer)(t.shape,t.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,e.buffer)(t.shape,t.dtype,a)}checkNumericalProblems(t){if(null!=t)for(let a=0;a<t.length;a++){const r=t[a];if(!P.canBeRepresented(r)){if((0,e.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${r} cannot be represented with your `+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error(`The value ${r} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:a,dtype:r,isPacked:i}=this.texData.get(t),o=e.util.sizeFromShape(a);if((0,e.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const e=this.decode(t),r=this.texData.get(e.dataId),n=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...c.getDenseTexShape(a)).subarray(0,o);return this.disposeIntermediateTensorInfo(e),n}const u=(0,e.env)().getBool("WEBGL_PACK")&&!0===i,h=u?P.getShapeAs3D(a):a,l=u?new s.EncodeFloatPackedProgram(h):new n.EncodeFloatProgram(h),p=this.runWebGLProgram(l,[{shape:h,dtype:r,dataId:t}],"float32"),d=this.texData.get(p.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),g}timerAvailable(){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const a=this.activeTimers,r=[];let n=!1;null==this.programTimersStack?(this.programTimersStack=r,n=!0):this.activeTimers.push(r),this.activeTimers=r,t();const s=e.util.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=e.util.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=a,n&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if((0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(s);o.kernelMs=e.util.sum(t),o.getExtraProfileInfo=(()=>t.map((e,t)=>({name:i[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", "))}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:e.util.now(),endMs:null}}endTimer(t){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=e.util.now(),t)}async getQueryTime(t){if((0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const a=t;return a.endMs-a.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:a}=this.texData.get(e);return null!=a&&(this.disposeData(a.real.dataId,t),this.disposeData(a.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:a,texShape:r,usage:n,isPacked:s,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,u=this.dataRefCount.get(o);u>1?this.dataRefCount.set(o,u-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,a),this.textureManager.releaseTexture(t,r,n,s)));const h=this.texData.get(e);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(t,a=w){return(0,e.env)().getBool("WEBGL_CPU_FORWARD")&&t.every(t=>null==this.texData.get(t.dataId).texture&&e.util.sizeFromShape(t.shape)<a)}getGPGPUContext(){return this.gpgpu}where(t){e.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const a=t.dataSync();return E(t.shape,a)}packedUnaryOp(t,a,r){const n=new f.UnaryOpPackedProgram(t.shape,a),s=this.compileAndRun(n,[t],r);return(0,e.engine)().makeTensorFromTensorInfo(s)}abs(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){const e=(0,l.simpleAbsImplCPU)(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,m.ABS,t.dtype);const a=new m.UnaryOpProgram(t.shape,m.ABS),r=this.compileAndRun(a,[t]);return(0,e.engine)().makeTensorFromTensorInfo(r)}makeTensorInfo(t,a,r){let n;if("string"===a&&null!=r&&r.length>0&&e.util.isString(r[0])){const s=r.map(t=>e.util.encodeString(t));n=this.write(s,t,a)}else n=this.write(r,t,a);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:a}}makeOutput(t,a,r){return(0,e.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(t,a,r),this)}unpackTensor(e){const t=new x.UnpackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new p.PackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const a=[P.getBatchDim(e.shape),...P.getRowsCols(e.shape)],r={dtype:e.dtype,shape:a,dataId:e.dataId},n=[P.getBatchDim(t),...P.getRowsCols(t)],s=new d.ReshapePackedProgram(n,a),i=[a],o=this.runWebGLProgram(s,[r],e.dtype,i,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}decode(t,n){const s=this.texData.get(t),{isPacked:i,shape:o,dtype:u}=s;if(null!=n){const t=e.util.sizeFromShape(o),a=n[0]*n[1]*4;e.util.assert(t<=a,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const h=P.getShapeAs3D(o);let l;l=i?new r.DecodeMatrixPackedProgram(h):new a.DecodeMatrixProgram(h);const p=[null!=n?n:c.getDenseTexShape(h)];return{dtype:u,shape:o,dataId:this.runWebGLProgram(l,[{shape:h,dtype:u,dataId:t}],u,p,!0,n).dataId}}runWebGLProgram(t,a,r,n,s=!1,i){const o=this.makeTensorInfo(t.outputShape,r),u=this.texData.get(o.dataId);if(t.packedOutput&&(u.isPacked=!0),t.outPackingScheme===c.PackingScheme.DENSE){const e=null!=i?i:c.getDenseTexShape(t.outputShape);u.texShape=e.map(e=>2*e)}if(null!=t.outTexUsage&&(u.usage=t.outTexUsage),0===e.util.sizeFromShape(o.shape))return u.values=e.util.getTypedArrayFromDType(o.dtype,0),o;const l=[],p=a.map(a=>{if("complex64"===a.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let r=this.texData.get(a.dataId);if(null==r.texture){if(!t.packedInputs&&e.util.sizeFromShape(a.shape)<=(0,e.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:a.shape,texData:null,isUniform:!0,uniformValues:r.values};t.packedInputs&&(r.isPacked=!0,r.shape=a.shape)}if(this.uploadToGPU(a.dataId),!!r.isPacked!=!!t.packedInputs)a=r.isPacked?this.unpackTensor(a):this.packTensor(a),l.push(a),r=this.texData.get(a.dataId);else if(r.isPacked&&!P.isReshapeFree(r.shape,a.shape)){const e=a,t=a.shape;a.shape=r.shape,a=this.packedReshape(a,t),l.push(a),r=this.texData.get(a.dataId),e.shape=t}return{shape:a.shape,texData:r,isUniform:!1}});this.uploadToGPU(o.dataId);const d={shape:o.shape,texData:u,isUniform:!1},g=h.makeShaderKey(t,p,d),m=this.getAndSaveBinary(g,()=>h.compileProgram(this.gpgpu,t,p,d)),f=null!=this.activeTimers;let x;f&&(x=this.startTimer()),(0,e.env)().get("ENGINE_COMPILE_ONLY")||h.runProgram(this.gpgpu,m,p,d,n),l.forEach(e=>this.disposeIntermediateTensorInfo(e)),f&&(x=this.endTimer(x),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(x)}));const I=(0,e.env)().get("WEBGL_FLUSH_THRESHOLD");if(I>0){const t=e.util.now();t-this.lastGlFlushTime>I&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=t)}if(!(0,e.env)().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===s){const e=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),e}return o}compileAndRun(e,t,a,r,n=!1){return a=a||t[0].dtype,this.runWebGLProgram(e,t,a,r,n)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,e.env)().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,e.tidy)(()=>{if(!(0,e.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=(0,e.env)().getBool("DEBUG");(0,e.env)().set("DEBUG",!1);const a=this.abs((0,e.scalar)(1e-8)).dataSync()[0];if((0,e.env)().set("DEBUG",t),a>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?T:L}uploadToGPU(t){const a=this.texData.get(t),{shape:r,dtype:n,values:s,texture:u,usage:h,isPacked:l}=a;if(null!=u)return;const p=null!=this.activeTimers;let d;p&&(d=e.util.now());let g=a.texShape;if(null==g&&(g=P.getTextureShapeFromLogicalShape(r,l),a.texShape=g),null!=s){const t=P.getShapeAs3D(r);let u,h=g[1],m=g[0];const f=s instanceof Uint8Array||s instanceof Uint8ClampedArray;!l&&f||([h,m]=c.getPackedMatrixTextureShapeWidthHeight(g[0],g[1])),u=l?new o.EncodeMatrixPackedProgram(t,f):new i.EncodeMatrixProgram(t,f);const x=f?[m,h]:g,I=this.makeTensorInfo(x,n),y=this.texData.get(I.dataId);y.usage=f?c.TextureUsage.PIXELS:c.TextureUsage.UPLOAD,y.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(I.dataId),h,m,s);const E=[[m,h]],T=!0,L=this.runWebGLProgram(u,[I],n,E,T),_=this.texData.get(L.dataId);a.texShape=_.texShape,a.isPacked=_.isPacked,a.usage=_.usage,(0,e.env)().get("ENGINE_COMPILE_ONLY")?this.disposeData(L.dataId):(a.texture=_.texture,a.values=null,this.texData.delete(L.dataId)),this.disposeIntermediateTensorInfo(I),p&&(this.uploadWaitMs+=e.util.now()-d)}else{const e=this.acquireTexture(g,h,n,l);a.texture=e}}convertAndCacheOnCPU(e,t){const a=this.texData.get(e),{dtype:r}=a;return this.releaseGPUData(e),null!=t&&(a.values=v(t,r)),a.values}acquireTexture(e,t,a,r){if(this.numBytesInGPU+=this.computeBytes(e,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, `+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(t,a){return t[0]*t[1]*e.util.bytesPerElement(a)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const a=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(a){throw a}});e.push(a)}return Promise.all(e)}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await(0,e.nextFrame)(),this.checkCompletionAsync_(t))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw P.logShaderSourceAndInfoLog(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:t,customUniformLocations:a,infLoc:r,nanLoc:n,inShapesLocations:s,inTexShapesLocations:i,outShapeLocation:o,outShapeStridesLocation:u,outTexShapeLocation:l}=(0,h.getUniformLocations)(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=a,e.infLoc=r,e.nanLoc=n,e.inShapesLocations=s,e.inTexShapesLocations=i,e.outShapeLocation=o,e.outShapeStridesLocation=u,e.outTexShapeLocation=l}}}function v(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const a="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<a.length;++t)a[t]=Math.round(e[t]);return a}throw new Error(`Unknown dtype ${t}`)}exports.MathBackendWebGL=O,O.nextDataId=0;
},{"./flags_webgl":"QJWP","@tensorflow/tfjs-core":"nPFy","./canvas_util":"fDY8","./decode_matrix_gpu":"MIOs","./decode_matrix_packed_gpu":"CwE1","./encode_float_gpu":"H2GP","./encode_float_packed_gpu":"vLid","./encode_matrix_gpu":"pfo6","./encode_matrix_packed_gpu":"VpZr","./gpgpu_context":"OTOS","./gpgpu_math":"vVuV","./kernel_utils/shared":"Q6tG","./pack_gpu":"CYDT","./reshape_packed_gpu":"d5r6","./tex_util":"GY6p","./texture_manager":"iUej","./unaryop_gpu":"J9Rr","./unaryop_packed_gpu":"gjas","./unpack_gpu":"I2XV","./webgl_util":"wqV5"}],"NqgJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GPGPUContext",{enumerable:!0,get:function(){return u.GPGPUContext}}),Object.defineProperty(exports,"MathBackendWebGL",{enumerable:!0,get:function(){return n.MathBackendWebGL}}),exports.forceHalfFloat=a,exports.gpgpu_util=void 0,Object.defineProperty(exports,"setWebGLContext",{enumerable:!0,get:function(){return o.setWebGLContext}}),exports.webgl_util=void 0;var e=require("@tensorflow/tfjs-core"),t=p(require("./gpgpu_util"));exports.gpgpu_util=t;var r=p(require("./webgl_util"));exports.webgl_util=r;var n=require("./backend_webgl"),o=require("./canvas_util"),u=require("./gpgpu_context");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var p=o?Object.getOwnPropertyDescriptor(e,u):null;p&&(p.get||p.set)?Object.defineProperty(n,u,p):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function a(){(0,e.env)().set("WEBGL_FORCE_F16_TEXTURES",!0)}
},{"@tensorflow/tfjs-core":"nPFy","./gpgpu_util":"Fmkw","./webgl_util":"wqV5","./backend_webgl":"YLrt","./canvas_util":"fDY8","./gpgpu_context":"OTOS"}],"E5WR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={webgl:!0,version_webgl:!0};Object.defineProperty(exports,"version_webgl",{enumerable:!0,get:function(){return o.version}}),exports.webgl=void 0;var r=require("@tensorflow/tfjs-core"),t=require("./backend_webgl"),o=require("./version"),n=require("./webgl");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===n[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))}),r.device_util.isBrowser()&&(0,r.registerBackend)("webgl",()=>new t.MathBackendWebGL,2);const s={forceHalfFloat:n.forceHalfFloat};exports.webgl=s;
},{"@tensorflow/tfjs-core":"nPFy","./backend_webgl":"YLrt","./version":"tO0n","./webgl":"NqgJ"}],"apo2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SQUARED_DIFFERENCE=exports.CHECK_NAN_SNIPPET=exports.BinaryOpProgram=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./gpgpu_math");const r="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";exports.CHECK_NAN_SNIPPET=r;const a="return (a - b) * (a - b);";exports.SQUARED_DIFFERENCE=a;class n{constructor(r,a,n){this.variableNames=["A","B"],this.outputShape=t.backend_util.assertAndGetBroadcastShape(a,n),this.enableShapeUniforms=(0,e.useShapeUniforms)(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${r}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}exports.BinaryOpProgram=n;
},{"@tensorflow/tfjs-core":"nPFy","./gpgpu_math":"vVuV"}],"N9H6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NOT_EQUAL=exports.ELU_DER=exports.CHECK_NAN_SNIPPET=exports.BinaryOpPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./gpgpu_math"),s=require("./packing_util"),n=require("./shader_compiler");const r="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";exports.CHECK_NAN_SNIPPET=r;const u="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n";exports.ELU_DER=u;const o="\n  return vec4(notEqual(a, b));\n";exports.NOT_EQUAL=o;class a{constructor(r,u,o,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.backend_util.assertAndGetBroadcastShape(u,o);const l=this.outputShape.length;this.enableShapeUniforms=(0,t.useShapeUniforms)(l);let i="";if(a)if(0===l||1===e.util.sizeFromShape(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(i=`\n          ${(0,n.getCoordsDataType)(l)} coords = getOutputCoords();\n        `,1===l)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=(0,s.getChannels)("coords",l);this.enableShapeUniforms?i+=`\n            bool nextRowOutOfBounds =\n              (${e[l-2]} + 1) >= outShape[${l} - 2];\n            bool nextColOutOfBounds =\n              (${e[l-1]} + 1) >= outShape[${l} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:i+=`\n            bool nextRowOutOfBounds =\n              (${e[l-2]} + 1) >= ${this.outputShape[l-2]};\n            bool nextColOutOfBounds =\n              (${e[l-1]} + 1) >= ${this.outputShape[l-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${r}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${i}\n\n        setOutput(result);\n      }\n    `}}exports.BinaryOpPackedProgram=a;
},{"@tensorflow/tfjs-core":"nPFy","./gpgpu_math":"vVuV","./packing_util":"Axn8","./shader_compiler":"ELB4"}],"kxbQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:n}=e,{x:d}=t;return n.incRef(d.dataId),{dataId:d.dataId,shape:d.shape,dtype:d.dtype}}const n={kernelName:e.Identity,backendName:"webgl",kernelFunc:t};exports.identityConfig=n;
},{"@tensorflow/tfjs-core":"nPFy"}],"UYfu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=n,exports.complexConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function n(e){const{inputs:n,backend:o}=e,{real:r,imag:a}=n,i=o.makeTensorInfo(r.shape,"complex64"),s=o.texData.get(i.dataId),c=(0,t.identity)({inputs:{x:r},backend:o}),p=(0,t.identity)({inputs:{x:a},backend:o});return s.complexTensorInfos={real:c,imag:p},i}const o={kernelName:e.Complex,backendName:"webgl",kernelFunc:n};exports.complexConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","./Identity":"kxbQ"}],"czyI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LEAKYRELU_PACKED=exports.LEAKYRELU=void 0,exports.leakyRelu=s,exports.leakyReluConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu");const o="return (a < 0.) ? b * a : a;";exports.LEAKYRELU=o;const n="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function s(s){const{inputs:t,backend:p,attrs:l}=s,{x:u}=t,{alpha:c}=l,i=p.makeTensorInfo([],"float32",e.util.createScalarValue(c,"float32")),L=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new r.BinaryOpPackedProgram(n,u.shape,i.shape):new a.BinaryOpProgram(o,u.shape,i.shape),E=p.runWebGLProgram(L,[u,i],"float32");return p.disposeIntermediateTensorInfo(i),E}exports.LEAKYRELU_PACKED=n;const t={kernelName:e.LeakyRelu,backendName:"webgl",kernelFunc:s};exports.leakyReluConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_gpu":"apo2","../binaryop_packed_gpu":"N9H6"}],"iJof":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PRELU_PACKED=exports.PRELU=void 0,exports.prelu=s,exports.preluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),a=require("../binaryop_packed_gpu");const n="return (a < 0.) ? b * a : a;";exports.PRELU=n;const o="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function s(s){const{inputs:p,backend:t}=s,{x:u,alpha:c}=p,i=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new a.BinaryOpPackedProgram(o,u.shape,c.shape):new r.BinaryOpProgram(n,u.shape,c.shape);return t.runWebGLProgram(i,[u,c],"float32")}exports.PRELU_PACKED=o;const p={kernelName:e.Prelu,backendName:"webgl",kernelFunc:s};exports.preluConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_gpu":"apo2","../binaryop_packed_gpu":"N9H6"}],"ANbB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHECK_NAN_SNIPPET_UNARY=exports.CHECK_NAN_SNIPPET_BINARY_PACKED=exports.CHECK_NAN_SNIPPET_BINARY=void 0,exports.binaryKernelFunc=N,exports.mapActivationToShaderProgram=y,exports.unaryKernelFunc=f;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),t=require("../binaryop_packed_gpu"),n=require("../kernels/Complex"),a=require("../kernels/LeakyRelu"),p=require("../kernels/Prelu"),o=i(require("../unaryop_gpu")),u=i(require("../unaryop_packed_gpu"));function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function i(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if("default"!==p&&Object.prototype.hasOwnProperty.call(e,p)){var o=a?Object.getOwnPropertyDescriptor(e,p):null;o&&(o.get||o.set)?Object.defineProperty(n,p,o):n[p]=e[p]}return n.default=e,t&&t.set(e,n),n}const l="if (isnan(x)) return x;";exports.CHECK_NAN_SNIPPET_UNARY=l;const d="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";exports.CHECK_NAN_SNIPPET_BINARY=d;const c="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";function f({opSnippet:r,packedOpSnippet:t,cpuKernelImpl:n,dtype:a}){return({inputs:p,backend:s})=>{const{x:i}=p,l=s,d=a||i.dtype;if(l.shouldExecuteOnCPU([i])&&null!=n){const e=l.texData.get(i.dataId),r=n(e.values,d);return l.makeTensorInfo(i.shape,d,r)}let c;return c=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new u.UnaryOpPackedProgram(i.shape,t):new o.UnaryOpProgram(i.shape,r),l.runWebGLProgram(c,[i],d)}}function N({opSnippet:a,packedOpSnippet:p,checkOutOfBounds:o=!1,supportsComplex:u=!1,cpuKernelImpl:s,dtype:i}){return({inputs:l,backend:d})=>{const{a:c,b:f}=l,N=d;if(u&&"complex64"===c.dtype){const t=N.texData.get(c.dataId),p=N.texData.get(f.dataId),[o,u]=[[t.complexTensorInfos.real,p.complexTensorInfos.real],[t.complexTensorInfos.imag,p.complexTensorInfos.imag]].map(t=>{const[n,p]=t,o={dataId:n.dataId,dtype:n.dtype,shape:c.shape},u={dataId:p.dataId,dtype:p.dtype,shape:f.shape},s=new r.BinaryOpProgram(a,c.shape,f.shape);return N.runWebGLProgram(s,[o,u],(0,e.upcastType)(n.dtype,p.dtype))}),s=(0,n.complex)({inputs:{real:o,imag:u},backend:N});return N.disposeIntermediateTensorInfo(o),N.disposeIntermediateTensorInfo(u),s}const y=i||(0,e.upcastType)(c.dtype,f.dtype);if(("string"===c.dtype||"string"===f.dtype||N.shouldExecuteOnCPU([c,f]))&&null!=s){const r=N.texData.get(c.dataId).values,t=N.texData.get(f.dataId).values,n="string"===c.dtype?e.backend_util.fromUint8ToStringArray(r):r,a="string"===c.dtype?e.backend_util.fromUint8ToStringArray(t):t,[p,o]=s(c.shape,f.shape,n,a,y),u=N.makeTensorInfo(o,y);return N.texData.get(u.dataId).values=p,u}let P;return P=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=p?new t.BinaryOpPackedProgram(p,c.shape,f.shape,o):new r.BinaryOpProgram(a,c.shape,f.shape),N.runWebGLProgram(P,[c,f],y)}}function y(e,r=!1){if("linear"===e)return r?u.LINEAR:o.LINEAR;if("relu"===e)return r?u.RELU:o.RELU;if("elu"===e)return r?u.ELU:o.ELU;if("relu6"===e)return r?u.RELU6:o.RELU6;if("prelu"===e)return r?p.PRELU_PACKED:p.PRELU;if("leakyrelu"===e)return r?a.LEAKYRELU_PACKED:a.LEAKYRELU;if("sigmoid"===e)return r?u.SIGMOID:o.SIGMOID;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}exports.CHECK_NAN_SNIPPET_BINARY_PACKED=c;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_gpu":"apo2","../binaryop_packed_gpu":"N9H6","../kernels/Complex":"UYfu","../kernels/LeakyRelu":"czyI","../kernels/Prelu":"iJof","../unaryop_gpu":"J9Rr","../unaryop_packed_gpu":"gjas"}],"i9go":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatMulPackedProgram=void 0;var t=require("./gpgpu_math");class e{constructor(e,n,a,i=!1,r=!1,s=!1,o=null,c=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length);const l=i?e[1]:e[2],h=Math.ceil(l/2),v=i?"i * 2, rc.y":"rc.y, i * 2",p=r?"rc.z, i * 2":"i * 2, rc.z",d=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",m="";o&&(b=c?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:u?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${o}\n        }`:`vec4 activation(vec4 x) {\n          ${o}\n        }`,m="result = activation(result);");const $=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let g="rc.x",y="rc.x";e[0]<n[0]?g=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(y=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`\n      ${b}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${h}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${h}; i++) {\n          int batchA = ${g};\n          int batchB = ${y};\n          vec4 a = getMatrixA(batchA, ${v});\n          vec4 b = getMatrixB(batchB, ${p});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${d[0]} * ${x[0]});\n          result += (${d[1]} * ${x[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${$}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}}exports.MatMulPackedProgram=e;
},{"./gpgpu_math":"vVuV"}],"Uh13":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.COMPLEX_MULTIPLY=exports.BinaryOpComplexProgram=void 0;var a=require("@tensorflow/tfjs-core");const e={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};exports.COMPLEX_MULTIPLY=e;class t{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(t,r),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}exports.BinaryOpComplexProgram=t;
},{"@tensorflow/tfjs-core":"nPFy"}],"na66":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiply=d,exports.multiplyConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=s(require("../binaryop_complex_gpu")),t=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu"),n=require("../kernel_utils/shared"),o=require("./Complex");function p(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:a})(e)}function s(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p(a);if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}const l="return a * b;";function d(p){const{inputs:s,backend:d}=p,{a:u,b:i}=s,c=e.backend_util.upcastType(u.dtype,i.dtype);if("complex64"===u.dtype){const e=d.texData.get(u.dataId),t=d.texData.get(i.dataId),r=new a.BinaryOpComplexProgram(a.COMPLEX_MULTIPLY.REAL,u.shape,i.shape),n=new a.BinaryOpComplexProgram(a.COMPLEX_MULTIPLY.IMAG,u.shape,i.shape),p=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:u.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:u.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],s=d.runWebGLProgram(r,p,"float32"),l=d.runWebGLProgram(n,p,"float32"),c=(0,o.complex)({inputs:{real:s,imag:l},backend:d});return d.disposeIntermediateTensorInfo(s),d.disposeIntermediateTensorInfo(l),c}if(d.shouldExecuteOnCPU([u,i])){const e=d.texData.get(u.dataId),a=d.texData.get(i.dataId),[t,r]=(0,n.multiplyImplCPU)(u.shape,i.shape,e.values,a.values,c),o=d.makeTensorInfo(r,c);return d.texData.get(o.dataId).values=t,o}let f;return f=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new r.BinaryOpPackedProgram(l,u.shape,i.shape):new t.BinaryOpProgram(l,u.shape,i.shape),d.runWebGLProgram(f,[u,i],c)}const u={kernelName:e.Multiply,backendName:"webgl",kernelFunc:d};exports.multiplyConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_complex_gpu":"Uh13","../binaryop_gpu":"apo2","../binaryop_packed_gpu":"N9H6","../kernel_utils/shared":"Q6tG","./Complex":"UYfu"}],"uO0F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packedReshape=a;var e=require("../reshape_packed_gpu"),t=require("../webgl_util");function a(a,d,p){const r=[(0,t.getBatchDim)(a.shape),...(0,t.getRowsCols)(a.shape)],s={dtype:a.dtype,shape:r,dataId:a.dataId},o=[(0,t.getBatchDim)(d),...(0,t.getRowsCols)(d)],u=new e.ReshapePackedProgram(o,r),c=[r],h=p.runWebGLProgram(u,[s],a.dtype,c,!0);return{dataId:h.dataId,shape:d,dtype:h.dtype}}
},{"../reshape_packed_gpu":"d5r6","../webgl_util":"wqV5"}],"Sp48":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=t,exports.reshapeConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../kernel_utils/reshape"),s=require("../webgl_util");function t(t){const{inputs:r,backend:p,attrs:h}=t,{x:n}=r,{shape:i}=h,l=p,o=e.util.sizeFromShape(n.shape),d=e.util.inferFromImplicitShape(i,o),u=e.util.sizeFromShape(d);e.util.assert(o===u,()=>`The new shape (${d}) has ${u} elements and the old `+`shape (${n.shape}) has ${o} elements. The new shape and old `+"shape must have the same number of elements.");const c=l.texData.get(n.dataId);return!c.isPacked||(0,s.isReshapeFree)(n.shape,d)||null!==c.texture&&(0,s.isReshapeFree)(c.shape,d)?(l.incRef(n.dataId),{dataId:n.dataId,shape:d,dtype:n.dtype}):(0,a.packedReshape)(n,d,l)}const r={kernelName:e.Reshape,backendName:"webgl",kernelFunc:t};exports.reshapeConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/reshape":"uO0F","../webgl_util":"wqV5"}],"HYcy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeanProgram=void 0;var n=require("@tensorflow/tfjs-core");class e{constructor(e,t){this.variableNames=["x"];const{windowSize:i,batchSize:a,inSize:s,outSize:o}=e;this.outputShape=[a,o];const u=4*Math.floor(i/4),c=i%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${n.util.isInt(e)?e.toPrecision(2):e}, ones);`}let d="";s%i>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}exports.MeanProgram=e;
},{"@tensorflow/tfjs-core":"nPFy"}],"PXUT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reduce=o;var e=require("@tensorflow/tfjs-core"),i=require("../mean_gpu"),t=require("../reduce_gpu");function n(i){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:i[1],o=e.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return t}function o(e,o,r,u){const a=n(e.shape);let z=e;for(let n=0;n<a.length;n++){const{inSize:S,windowSize:s,outSize:c}=a[n];let d,w;d="mean"===r?0===n?new i.MeanProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c},S):new i.MeanProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c}):new t.ReduceProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c},r),w=z,z=u.runWebGLProgram(d,[z],o),w.dataId!==e.dataId&&u.disposeIntermediateTensorInfo(w)}return z}
},{"@tensorflow/tfjs-core":"nPFy","../mean_gpu":"HYcy","../reduce_gpu":"cqVi"}],"o723":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransposeProgram=void 0;var r=require("./shader_compiler");class e{constructor(e,s){this.variableNames=["A"];const o=new Array(e.length);for(let r=0;r<o.length;r++)o[r]=e[s[r]];this.outputShape=o,this.rank=o.length;const n=(0,r.getCoordsDataType)(this.rank),a=t(s);this.userCode=`\n    void main() {\n      ${n} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}function t(r){const e=r.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let o=0;o<r.length;o++)s[r[o]]=t[o];return s.join()}exports.TransposeProgram=e;
},{"./shader_compiler":"ELB4"}],"Ib0x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransposePackedProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class r{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(r.length);for(let t=0;t<s.length;t++)s[t]=r[n[t]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=(0,e.getCoordsDataType)(this.rank),i=(0,t.getVecChannels)("rc",this.rank),o=new Array(this.rank);for(let t=0;t<n.length;t++)o[n[t]]=i[t];const h=`vec2(${o.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${s[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${h})`;this.userCode=`\n    void main() {\n      ${a} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${u}) {\n        result[1] = ${c};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${s[this.rank-2]}) {\n        result[2] = ${c};\n        if(${u}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}exports.TransposePackedProgram=r;
},{"./packing_util":"Axn8","./shader_compiler":"ELB4"}],"gE5d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeImpl=o,Object.defineProperty(exports,"transposeImplCPU",{enumerable:!0,get:function(){return r.transposeImplCPU}});var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),s=require("../transpose_gpu"),t=require("../transpose_packed_gpu");function o(r,o,n){const p=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t.TransposePackedProgram(r.shape,o):new s.TransposeProgram(r.shape,o);return n.runWebGLProgram(p,[r],r.dtype)}
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../transpose_gpu":"o723","../transpose_packed_gpu":"Ib0x"}],"QYTI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumImpl=n;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),r=require("./Transpose_impl");function n(n,a,p,u){const i=a,o=n.shape.length,l=e.util.parseAxisParam(i,n.shape);let d=l;const c=e.backend_util.getAxesPermutation(d,o),m=null!=c;let h=n;m&&(h=(0,r.transposeImpl)(n,c,u),d=e.backend_util.getInnerMostAxes(d.length,o)),e.backend_util.assertAxesAreInnerMostDims("sum",d,o);const[I,x]=e.backend_util.computeOutAndReduceShapes(h.shape,d);let _=I;p&&(_=e.backend_util.expandShapeToKeepDim(I,l));const b=e.util.sizeFromShape(x),k=e.util.sizeFromShape(n.shape)/b,f=(0,t.reshape)({inputs:{x:h},attrs:{shape:[k,b]},backend:u}),A=(0,e.sumOutType)(n.dtype),T=(0,s.reduce)(f,A,"sum",u),g=(0,t.reshape)({inputs:{x:T},attrs:{shape:_},backend:u});return u.disposeIntermediateTensorInfo(f),u.disposeIntermediateTensorInfo(T),m&&u.disposeIntermediateTensorInfo(h),g}
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/reduce":"PXUT","./Reshape":"Sp48","./Transpose_impl":"gE5d"}],"Snxr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=s,exports.sumConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./Sum_impl");function s(e){const{inputs:s,backend:t,attrs:n}=e,{x:o}=s,{axis:u,keepDims:i}=n;return(0,r.sumImpl)(o,u,i,t)}const t={kernelName:e.Sum,backendName:"webgl",kernelFunc:s};exports.sumConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","./Sum_impl":"QYTI"}],"zUf2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=s,exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Transpose_impl");function s(e){const{inputs:s,backend:r,attrs:a}=e,{x:n}=s,{perm:o}=a,p=r,l=n.shape.length,u=new Array(l);for(let t=0;t<u.length;t++)u[t]=n.shape[o[t]];let d;if(p.shouldExecuteOnCPU([n])){const e=p.texData.get(n.dataId).values,s=(0,t.transposeImplCPU)(e,n.shape,n.dtype,o,u);d=p.makeTensorInfo(u,n.dtype),p.texData.get(d.dataId).values=s}else d=(0,t.transposeImpl)(n,o,p);return d}const r={kernelName:e.Transpose,backendName:"webgl",kernelFunc:s};exports.transposeConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Transpose_impl":"gE5d"}],"phUe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MATMUL_SHARED_DIM_THRESHOLD=void 0,exports.batchMatMulImpl=l;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils"),a=require("../mulmat_packed_gpu"),t=require("./Multiply"),p=require("./Reshape"),r=require("./Sum"),n=require("./Transpose");const u=1e3;function l({a:l,b:h,transposeA:i,transposeB:o,backend:c,bias:d=null,preluActivationWeights:m=null,leakyreluAlpha:k=0,activation:b=null}){const f=l.shape.length,x=h.shape.length,M=i?l.shape[f-2]:l.shape[f-1],_=o?h.shape[x-1]:h.shape[x-2],A=i?l.shape[f-1]:l.shape[f-2],S=o?h.shape[x-2]:h.shape[x-1],T=l.shape.slice(0,-2),y=h.shape.slice(0,-2),g=e.util.sizeFromShape(T),q=e.util.sizeFromShape(y),D=e.broadcast_util.assertAndGetBroadcastShape(l.shape.slice(0,-2),h.shape.slice(0,-2)).concat([A,S]);e.util.assert(M===_,()=>`Error in matMul: inner shapes (${M}) and (`+`${_}) of Tensors with shapes ${l.shape} and `+`${h.shape} and transposeA=${i}`+` and transposeB=${o} must match.`);const v=i?[g,M,A]:[g,A,M],H=o?[q,S,_]:[q,_,S],I=(0,p.reshape)({inputs:{x:l},backend:c,attrs:{shape:v}}),$=(0,p.reshape)({inputs:{x:h},backend:c,attrs:{shape:H}}),E=[I,$],L=Math.max(g,q),P=i?I.shape[1]:I.shape[2],R=null!=d,w=null!=m,B="leakyrelu"===b,O=null!=b?(0,s.mapActivationToShaderProgram)(b,!0):null;let j;if((1===A||1===S)&&P>u&&!1===(R||w||B||null!=O)){let e=I,s=$;i&&(e=(0,n.transpose)({inputs:{x:I},backend:c,attrs:{perm:[0,2,1]}}),E.push(e)),o&&(s=(0,n.transpose)({inputs:{x:$},backend:c,attrs:{perm:[0,2,1]}}),E.push(s));const a=1===S;let u=e;1!==S&&(u=(0,p.reshape)({inputs:{x:e},backend:c,attrs:{shape:[L,P,1]}}),E.push(u));const l=1===S?2:1;let h=s;a&&(h=(0,p.reshape)({inputs:{x:s},backend:c,attrs:{shape:[L,1,P]}}),E.push(h));const d=(0,t.multiply)({inputs:{a:u,b:h},backend:c});j=(0,r.sum)({inputs:{x:d},backend:c,attrs:{axis:l,keepDims:!0}}),E.push(d)}else{const s=(0,e.upcastType)(l.dtype,h.dtype),t=new a.MatMulPackedProgram(v,H,[L,A,S],i,o,R,O,w,B),p=[I,$];if(null!=d&&p.push(d),w&&p.push(m),B){const s=c.makeTensorInfo([],"float32",e.util.createScalarValue(k,"float32"));p.push(s),E.push(s)}j=c.runWebGLProgram(t,p,s)}const z=(0,p.reshape)({inputs:{x:j},backend:c,attrs:{shape:D}});E.push(j);for(const e of E)c.disposeIntermediateTensorInfo(e);return z}exports.MATMUL_SHARED_DIM_THRESHOLD=u;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../mulmat_packed_gpu":"i9go","./Multiply":"na66","./Reshape":"Sp48","./Sum":"Snxr","./Transpose":"zUf2"}],"QuKQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._fusedMatMul=a,exports._fusedMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./BatchMatMul_impl");function a(e){const{inputs:a,backend:s,attrs:r}=e,{a:n,b:o,bias:u,preluActivationWeights:i}=a,{transposeA:l,transposeB:c,activation:p,leakyreluAlpha:M}=r;return(0,t.batchMatMulImpl)({a:n,b:o,transposeA:l,transposeB:c,backend:s,bias:u,preluActivationWeights:i,leakyreluAlpha:M,activation:p})}const s={kernelName:e._FusedMatMul,backendName:"webgl",kernelFunc:a};exports._fusedMatMulConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","./BatchMatMul_impl":"phUe"}],"ZJWE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=s,exports.absConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),n=require("../unaryop_gpu"),t=require("../unaryop_packed_gpu");const a="return abs(x);";function s(s){const{inputs:o,backend:p}=s,{x:u}=o;if(p.shouldExecuteOnCPU([u])&&"complex64"!==u.dtype){const e=p.texData.get(u.dataId),n=(0,r.simpleAbsImplCPU)(e.values);return p.makeTensorInfo(u.shape,u.dtype,n)}let c;return c=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new t.UnaryOpPackedProgram(u.shape,a):new n.UnaryOpProgram(u.shape,a),p.runWebGLProgram(c,[u],u.dtype)}const o={kernelName:e.Abs,backendName:"webgl",kernelFunc:s};exports.absConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../unaryop_gpu":"J9Rr","../unaryop_packed_gpu":"gjas"}],"tcg3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosConfig=exports.acos=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const o=n.CHECK_NAN_SNIPPET+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",s=(0,r.unaryKernelFunc)({opSnippet:o});exports.acos=s;const t={kernelName:e.Acos,backendName:"webgl",kernelFunc:s};exports.acosConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../unaryop_gpu":"J9Rr"}],"rclO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshConfig=exports.acosh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),o=require("../unaryop_gpu");const n=o.CHECK_NAN_SNIPPET+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",s=(0,r.unaryKernelFunc)({opSnippet:n});exports.acosh=s;const t={kernelName:e.Acosh,backendName:"webgl",kernelFunc:s};exports.acoshConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../unaryop_gpu":"J9Rr"}],"pGv9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addKernelFunc=exports.addConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../kernel_utils/shared");const t="return a + b;",l=(0,r.binaryKernelFunc)({opSnippet:t,packedOpSnippet:t,supportsComplex:!0,cpuKernelImpl:n.addImplCPU});exports.addKernelFunc=l;const p={kernelName:e.Add,backendName:"webgl",kernelFunc:l};exports.addConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"lkXW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=d,exports.addNConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../addn_gpu"),r=require("../addn_packed_gpu"),t=require("./Identity");function d(a){const{inputs:o,backend:s}=a,i=o;if(1===i.length)return(0,t.identity)({inputs:{x:i[0]},backend:s});if(i.length>(0,e.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(i.length/2),n=d({inputs:i.slice(0,e),backend:s}),r=d({inputs:i.slice(e),backend:s});return d({inputs:[n,r],backend:s})}const u=i.map(e=>e.dtype).reduce((n,r)=>(0,e.upcastType)(n,r)),c=i.map(e=>e.shape),p=(0,e.env)().getBool("WEBGL_PACK")?new r.AddNPackedProgram(i[0].shape,c):new n.AddNProgram(i[0].shape,c);return s.runWebGLProgram(p,i,u)}const a={kernelName:e.AddN,backendName:"webgl",kernelFunc:d};exports.addNConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../addn_gpu":"DioZ","../addn_packed_gpu":"BmoR","./Identity":"kxbQ"}],"Z8u3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=a,exports.allConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function a(a){const{inputs:r,backend:i,attrs:l}=a,{x:o}=r,{axis:p,keepDims:u}=l,d=o.shape.length,c=e.util.parseAxisParam(p,o.shape);let h=c;const k=e.backend_util.getAxesPermutation(h,d);let x=o;null!=k&&(x=(0,n.transpose)({inputs:{x:o},backend:i,attrs:{perm:k}}),h=e.backend_util.getInnerMostAxes(h.length,d)),e.backend_util.assertAxesAreInnerMostDims("all",h,d);const[b,m]=e.backend_util.computeOutAndReduceShapes(x.shape,h),f=e.util.sizeFromShape(m),I=(0,t.reshape)({inputs:{x:x},backend:i,attrs:{shape:[-1,f]}}),_=(0,s.reduce)(I,I.dtype,"all",i);let g;if(u){const s=e.backend_util.expandShapeToKeepDim(b,c);g=(0,t.reshape)({inputs:{x:_},backend:i,attrs:{shape:s}})}else g=(0,t.reshape)({inputs:{x:_},backend:i,attrs:{shape:b}});return i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(_),null!=k&&i.disposeIntermediateTensorInfo(x),g}const r={kernelName:e.All,backendName:"webgl",kernelFunc:a};exports.allConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/reduce":"PXUT","./Reshape":"Sp48","./Transpose":"zUf2"}],"VzkM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=a,exports.anyConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function a(a){const{inputs:r,backend:i,attrs:o}=a,{x:p}=r,{axis:u,keepDims:d}=o,c=p.shape.length,l=e.util.parseAxisParam(u,p.shape);let h=l;const k=e.backend_util.getAxesPermutation(h,c);let x=p;null!=k&&(x=(0,n.transpose)({inputs:{x:p},backend:i,attrs:{perm:k}}),h=e.backend_util.getInnerMostAxes(h.length,c)),e.backend_util.assertAxesAreInnerMostDims("any",h,c);const[b,m]=e.backend_util.computeOutAndReduceShapes(x.shape,h),f=e.util.sizeFromShape(m),y=(0,t.reshape)({inputs:{x:x},backend:i,attrs:{shape:[-1,f]}}),I=(0,s.reduce)(y,y.dtype,"any",i);let _;if(d){const s=e.backend_util.expandShapeToKeepDim(b,l);_=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:s}})}else _=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:b}});return i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(I),null!=k&&i.disposeIntermediateTensorInfo(x),_}const r={kernelName:e.Any,backendName:"webgl",kernelFunc:a};exports.anyConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/reduce":"PXUT","./Reshape":"Sp48","./Transpose":"zUf2"}],"kcEt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArgMinMaxPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./packing_util"),t=require("./shader_compiler");class c{constructor(c,o,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,e.util.assert(c.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const i=c[c.length-1],r=Math.ceil(i/o);this.outputShape=c.slice(0,-1),r>1&&this.outputShape.push(r),a||this.variableNames.push("bestIndicesA");const d=this.outputShape,l=d.length,$=(0,t.getCoordsDataType)(l),u=(0,n.getChannels)("coords",l);let h,p;if(1===r){p=l+1;const e=(0,t.getCoordsDataType)(p);h=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[l-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[l-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[l-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[l-2]};`}else p=l,h=`\n        ${$} sourceLocR = coords;\n        ++${u[l-1]};\n        ${$} sourceLocG = coords;\n        ++${u[l-2]};\n        ${$} sourceLocA = coords;\n        --${u[l-1]};\n        ${$} sourceLocB = coords;\n        --${u[l-2]};`;const x=["x","y","z","w","u","v"].slice(0,p),g="."+x[p-1],v=x.map(e=>"int "+e),C=(0,n.getChannels)("sourceLocR",p-1).concat("inIdx.r"),I=(0,n.getChannels)("sourceLocG",p-1).concat("inIdx.g"),b=(0,n.getChannels)("sourceLocB",p-1).concat("inIdx.b"),A=(0,n.getChannels)("sourceLocA",p-1).concat("inIdx.a"),j="max"===s?"greaterThan":"lessThan",L=a?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${C.join()}),\n                             getBestIndicesAChannel(${I.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${A.join()})));`,B=`vec4(\n            getAChannel(${C.join()}),\n            hasNextCol ? getAChannel(${I.join()}) : 0.,\n            hasNextRow ? getAChannel(${b.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${A.join()}) : 0.)`,m=a?"":`\n      float getBestIndicesAChannel(${v.join()}) {\n        return getChannel(getBestIndicesA(${x.join()}),\n                                          vec2(${x.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${v.join()}) {\n        return getChannel(getA(${x.join()}),\n                               vec2(${x.slice(-2).join()}));\n      }\n      ${m}\n      void main() {\n        ${$} coords = getOutputCoords();\n        bool hasNextCol = ${u[l-1]} < ${d[l-1]-1};\n        bool hasNextRow = ${u[l-2]} < ${d[l-2]-1};\n        ${h}\n        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},\n          sourceLocB${g}, sourceLocA${g}) * ${o};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${B};\n\n        for (int i = 0; i < ${o}; i++) {\n          inIdx = srcIdx;\n          ${L}\n          vec4 candidate = ${B};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${j}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}exports.ArgMinMaxPackedProgram=c;
},{"@tensorflow/tfjs-core":"nPFy","./packing_util":"Axn8","./shader_compiler":"ELB4"}],"DY9K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMinMaxReduce=i;var e=require("@tensorflow/tfjs-core"),n=require("../argminmax_gpu"),t=require("../argminmax_packed_gpu"),r=require("../kernels/Reshape");function s(t,r,a,i=null){let u=r.shape[0],o=r.shape[1];null!=i&&(u=i.shape[0],o=i.shape[1]);const p=e.backend_util.computeOptimalWindowSize(o),l={windowSize:p,inSize:o,batchSize:u,outSize:Math.ceil(o/p)},c=new n.ArgMinMaxProgram(l,a,null==i),h=[r];null!=i&&h.push(i);const d=t.runWebGLProgram(c,h,"int32");if(1===d.shape[1])return d;const g=s(t,r,a,d);return t.disposeIntermediateTensorInfo(d),g}function a(n,r,s,i=null){const u=null!=i?i.shape:r.shape,o=u[u.length-1],p=e.backend_util.computeOptimalWindowSize(o),l=new t.ArgMinMaxPackedProgram(u,p,s,null==i),c=null==i?[r]:[r,i],h=n.runWebGLProgram(l,c,"int32");if(h.shape.length===r.shape.length){const e=a(n,r,s,h);return n.disposeIntermediateTensorInfo(h),e}return h}function i(n,t,i,u){const o=[i];if(e.backend_util.assertAxesAreInnerMostDims("arg"+u.charAt(0).toUpperCase()+u.slice(1),o,t.shape.length),!(0,e.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const a=[],i=n.texData.get(t.dataId);let p=t;null!==i&&i.isPacked&&(p=n.unpackTensor(t),a.push(p));const[l,c]=e.backend_util.computeOutAndReduceShapes(p.shape,o),h=e.util.sizeFromShape(c),d=(0,r.reshape)({inputs:{x:p},backend:n,attrs:{shape:[-1,h]}});a.push(d);const g=s(n,d,u);a.push(g);const m=(0,r.reshape)({inputs:{x:g},backend:n,attrs:{shape:l}});return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),m}return a(n,t,u)}
},{"@tensorflow/tfjs-core":"nPFy","../argminmax_gpu":"Pm0r","../argminmax_packed_gpu":"kcEt","../kernels/Reshape":"Sp48"}],"YggO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=s,exports.argMaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/arg_min_max"),r=require("./Transpose");function s(s){const{inputs:n,backend:a,attrs:o}=s,{x:i}=n,{axis:l}=o;let u=e.util.parseAxisParam(l,i.shape);const x=e.backend_util.getAxesPermutation(u,i.shape.length);let c=i;const p=[];null!=x&&(c=(0,r.transpose)({inputs:{x:i},backend:a,attrs:{perm:x}}),p.push(c),u=e.backend_util.getInnerMostAxes(u.length,c.shape.length)),e.backend_util.assertAxesAreInnerMostDims("argMax",[u[0]],c.shape.length);const g=(0,t.argMinMaxReduce)(a,c,u[0],"max");return p.forEach(e=>a.disposeIntermediateTensorInfo(e)),g}const n={kernelName:e.ArgMax,backendName:"webgl",kernelFunc:s};exports.argMaxConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/arg_min_max":"DY9K","./Transpose":"zUf2"}],"F2hN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=r,exports.argMinConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/arg_min_max"),t=require("./Transpose");function r(r){const{inputs:s,backend:a,attrs:i}=r,{x:o}=s,{axis:l}=i;let u=e.util.parseAxisParam(l,o.shape);const c=e.backend_util.getAxesPermutation(u,o.shape.length);let p=o;const g=[];null!=c&&(p=(0,t.transpose)({inputs:{x:o},backend:a,attrs:{perm:c}}),g.push(p),u=e.backend_util.getInnerMostAxes(u.length,p.shape.length)),e.backend_util.assertAxesAreInnerMostDims("argMin",[u[0]],p.shape.length);const x=(0,n.argMinMaxReduce)(a,p,u[0],"min");return g.forEach(e=>a.disposeIntermediateTensorInfo(e)),x}const s={kernelName:e.ArgMin,backendName:"webgl",kernelFunc:r};exports.argMinConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/arg_min_max":"DY9K","./Transpose":"zUf2"}],"wvMb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinConfig=exports.asin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils"),r=require("../unaryop_gpu");const s=r.CHECK_NAN_SNIPPET+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",i=(0,n.unaryKernelFunc)({opSnippet:s});exports.asin=i;const t={kernelName:e.Asin,backendName:"webgl",kernelFunc:i};exports.asinConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../unaryop_gpu":"J9Rr"}],"bDVn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhConfig=exports.asinh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const s=n.CHECK_NAN_SNIPPET+"return log(x + sqrt(x * x + 1.0));",o=(0,r.unaryKernelFunc)({opSnippet:s});exports.asinh=o;const t={kernelName:e.Asinh,backendName:"webgl",kernelFunc:o};exports.asinhConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../unaryop_gpu":"J9Rr"}],"OUqi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanConfig=exports.atan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils"),r=require("../unaryop_gpu");const t=r.CHECK_NAN_SNIPPET+"\n  return atan(x);\n",a=(0,n.unaryKernelFunc)({opSnippet:t});exports.atan=a;const o={kernelName:e.Atan,backendName:"webgl",kernelFunc:a};exports.atanConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../unaryop_gpu":"J9Rr"}],"NaoH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2Config=exports.atan2=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=n.CHECK_NAN_SNIPPET_BINARY+"\n  return atan(a, b);\n",r="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+n.CHECK_NAN_SNIPPET_BINARY_PACKED+"\n  return result;\n",a=(0,n.binaryKernelFunc)({opSnippet:t,packedOpSnippet:r});exports.atan2=a;const s={kernelName:e.Atan2,backendName:"webgl",kernelFunc:a};exports.atan2Config=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"Z7WF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhConfig=exports.atanh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const t=n.CHECK_NAN_SNIPPET+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",o=(0,r.unaryKernelFunc)({opSnippet:t});exports.atanh=o;const a={kernelName:e.Atanh,backendName:"webgl",kernelFunc:o};exports.atanhConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../unaryop_gpu":"J9Rr"}],"Php8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=i,exports.avgPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../pool_gpu"),o=require("../webgl_util"),r=require("./Identity");function i(i){const{inputs:n,backend:s,attrs:a}=i,{x:l}=n;(0,o.assertNotComplex)(l,"avgPool");const{filterSize:u,strides:d,pad:c,dimRoundingMode:g}=a;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const p=e.backend_util.computePool2DInfo(l.shape,u,d,1,c,g);if(1===p.filterWidth&&1===p.filterHeight&&e.util.arraysEqual(p.inShape,p.outShape))return(0,r.identity)({inputs:{x:l},backend:s});const f=new t.Pool2DProgram(p,"avg",!1);return s.runWebGLProgram(f,[l],"float32")}const n={kernelName:e.AvgPool,backendName:"webgl",kernelFunc:i};exports.avgPoolConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../pool_gpu":"DAMt","../webgl_util":"wqV5","./Identity":"kxbQ"}],"OAAV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3D=r,exports.avgPool3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../pool_gpu");function r(r){const{inputs:t,backend:n,attrs:a}=r,{x:l}=t,{filterSize:s,strides:i,pad:u,dimRoundingMode:d,dataFormat:g}=a,c=e.backend_util.computePool3DInfo(l.shape,s,i,[1,1,1],u,d,g),p=new o.Pool3DProgram(c,"avg",!1);return n.runWebGLProgram(p,[l],"float32")}const t={kernelName:e.AvgPool3D,backendName:"webgl",kernelFunc:r};exports.avgPool3DConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../pool_gpu":"DAMt"}],"qUF3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGrad=r,exports.avgPool3DGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../avg_pool_backprop_gpu");function r(r){const{inputs:t,backend:a,attrs:n}=r,{dy:d,input:p}=t,i=p,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=n,g=e.backend_util.computePool3DInfo(i.shape,s,l,[1,1,1],u,c),v=new o.AvgPool3DBackpropProgram(g);return a.runWebGLProgram(v,[d],i.dtype)}const t={kernelName:e.AvgPool3DGrad,backendName:"webgl",kernelFunc:r};exports.avgPool3DGradConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../avg_pool_backprop_gpu":"vgTo"}],"RyUE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGrad=t,exports.avgPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../avg_pool_backprop_gpu"),r=require("../webgl_util");function t(t){const{inputs:a,backend:n,attrs:l}=t,{dy:s,input:p}=a,i=p;(0,r.assertNotComplex)([s,p],"avgPoolGrad");const{filterSize:u,strides:d,pad:c}=l,g=e.backend_util.computePool2DInfo(i.shape,u,d,1,c),v=new o.AvgPool2DBackpropProgram(g);return n.runWebGLProgram(v,[s],i.dtype)}const a={kernelName:e.AvgPoolGrad,backendName:"webgl",kernelFunc:t};exports.avgPoolGradConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../avg_pool_backprop_gpu":"vgTo","../webgl_util":"wqV5"}],"Zgqh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMul=a,exports.batchMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./BatchMatMul_impl");function a(e){const{inputs:a,backend:r,attrs:s}=e,{a:n,b:o}=a,{transposeA:c,transposeB:u}=s;return(0,t.batchMatMulImpl)({a:n,b:o,transposeA:c,transposeB:u,backend:r})}const r={kernelName:e.BatchMatMul,backendName:"webgl",kernelFunc:a};exports.batchMatMulConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./BatchMatMul_impl":"phUe"}],"jbJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BatchNormProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e,a,s,o,r,n){this.outputShape=[],this.variableNames=["x","mean","variance"],t.backend_util.assertAndGetBroadcastShape(e,a),t.backend_util.assertAndGetBroadcastShape(e,s);let l="0.0";null!=o&&(t.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let i="1.0";null!=r&&(t.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${l};\n        float scale = ${i};\n        float inv = scale * inversesqrt(variance + float(${n}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}exports.BatchNormProgram=e;
},{"@tensorflow/tfjs-core":"nPFy"}],"I5Tp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BatchNormPackedProgram=void 0;var e=require("@tensorflow/tfjs-core");class t{constructor(t,a,s,r,n,c){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],e.backend_util.assertAndGetBroadcastShape(t,a),e.backend_util.assertAndGetBroadcastShape(t,s);let o="vec4(0.0)";null!=r&&(e.backend_util.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let i="vec4(1.0)";null!=n&&(e.backend_util.assertAndGetBroadcastShape(t,n),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${i};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${c}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}exports.BatchNormPackedProgram=t;
},{"@tensorflow/tfjs-core":"nPFy"}],"wgWL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNormConfig=exports.batchNorm=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../batchnorm_gpu"),t=require("../batchnorm_packed_gpu");const r=({inputs:r,backend:n,attrs:s})=>{const{x:o,mean:l,variance:h,offset:u,scale:c}=r;e.util.assert(l.shape.length===h.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),e.util.assert(null==u||l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),e.util.assert(null==c||l.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:i}=s;null==i&&(i=.001);const p=[o,l,h];let m=null;null!=u&&(m=u.shape,p.push(u));let g=null;null!=c&&(g=c.shape,p.push(c));const d=(0,e.env)().getBool("WEBGL_PACK_NORMALIZATION")?new t.BatchNormPackedProgram(o.shape,l.shape,h.shape,m,g,i):new a.BatchNormProgram(o.shape,l.shape,h.shape,m,g,i);return n.runWebGLProgram(d,p,p[0].dtype)};exports.batchNorm=r;const n={kernelName:e.FusedBatchNorm,backendName:"webgl",kernelFunc:r};exports.batchNormConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../batchnorm_gpu":"jbJk","../batchnorm_packed_gpu":"I5Tp"}],"SZ8f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SliceProgram=void 0;var r=require("./shader_compiler");class t{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const s=(0,r.getCoordsDataType)(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=e(this.rank);let i;i=`\n        ${s} sourceLoc;\n        ${s} coords = getOutputCoords();\n        ${t.map((r,t)=>`sourceLoc.${o[t]} = start[${t}] + coords.${o[t]};`).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${i}\n        setOutput(getSource(${n}));\n      }\n    `}}exports.SliceProgram=t;const o=["x","y","z","w","u","v"];function e(r){if(1===r)return"sourceLoc";if(r<=6)return o.slice(0,r).map(r=>"sourceLoc."+r).join(",");throw Error(`Slicing for rank ${r} is not yet supported`)}
},{"./shader_compiler":"ELB4"}],"gycR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SlicePackedProgram=void 0;var n=require("./packing_util"),t=require("./shader_compiler");class s{constructor(s){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.rank=s.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=(0,t.getCoordsDataType)(this.rank),e=(0,n.getChannels)("coords",this.rank),a=(0,n.getChannels)("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${i})`,c=`\n      result.x = ${o};\n      if (++${e[this.rank-1]} < ${s[this.rank-1]}) {\n        ++${a[this.rank-1]};\n        result.y = ${o};\n        --${a[this.rank-1]};\n      }\n    `,h=1===this.rank?"":`\n      --${e[this.rank-1]};\n      if (++${e[this.rank-2]} < ${s[this.rank-2]}) {\n        ++${a[this.rank-2]};\n        result.z = ${o};\n        if (++${e[this.rank-1]} < ${s[this.rank-1]}) {\n          ++${a[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,u=this.rank<=4?`sourceLoc = coords +\n            ${r}(${s.map((n,t)=>`start[${t}]`).join()});`:s.map((n,t)=>`${a[t]} = ${e[t]} + start[${t}];`).join("\n");this.userCode=`\n      void main() {\n        ${r} coords = getOutputCoords();\n        ${r} sourceLoc;\n        ${u}\n        vec4 result = vec4(0.);\n        ${c}\n        ${h}\n        setOutput(result);\n      }\n    `}}exports.SlicePackedProgram=s;
},{"./packing_util":"Axn8","./shader_compiler":"ELB4"}],"R1jH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=r,exports.sliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),a=require("../slice_gpu"),s=require("../slice_packed_gpu");function i(t,a,s,i){const r=i.texData.get(t.dataId),o=i.makeTensorInfo(s,t.dtype),l=i.texData.get(o.dataId);Object.assign(l,r),l.refCount=1,l.shape=s,l.dtype=t.dtype;let n=e.slice_util.computeFlatOffset(a,e.util.computeStrides(t.shape));r.slice&&(n+=r.slice.flatOffset),l.slice={flatOffset:n,origDataId:r.slice&&r.slice.origDataId||t.dataId};const c=i.dataRefCount.get(l.slice.origDataId)||1;return i.dataRefCount.set(l.slice.origDataId,c+1),o}function r(r){const{inputs:o,backend:l,attrs:n}=r,{x:c}=o,{begin:d,size:u}=n,[p,f]=e.slice_util.parseSliceParams(c,d,u);if(e.slice_util.assertParamsValid(c,p,f),0===e.util.sizeFromShape(f))return l.makeTensorInfo(f,c.dtype,[]);if(l.shouldExecuteOnCPU([c])||"string"===c.dtype){const e=l.texData.get(c.dataId),a=(0,t.sliceImplCPU)(e.values,p,f,c.shape,c.dtype);return l.makeTensorInfo(f,c.dtype,a)}const{isPacked:g}=l.texData.get(c.dataId),I=e.slice_util.isSliceContinous(c.shape,p,f);if(g||!I){const t=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s.SlicePackedProgram(f):new a.SliceProgram(f),i=[p];return l.runWebGLProgram(t,[c],c.dtype,i)}return l.uploadToGPU(c.dataId),i(c,p,f,l)}const o={kernelName:e.Slice,backendName:"webgl",kernelFunc:r};exports.sliceConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../slice_gpu":"SZ8f","../slice_packed_gpu":"gycR"}],"UvpQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceNDConfig=exports.batchToSpaceND=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Reshape"),a=require("./Slice"),s=require("./Transpose");const n=n=>{const{inputs:r,backend:c,attrs:p}=n,{x:o}=r,{blockShape:i,crops:h}=p;e.util.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const u=i.reduce((e,t)=>e*t),d=e.backend_util.getReshaped(o.shape,i,u),l=e.backend_util.getPermuted(d.length,i.length),b=e.backend_util.getReshapedPermuted(o.shape,i,u),k=e.backend_util.getSliceBeginCoords(h,i.length),g=e.backend_util.getSliceSize(b,h,i.length),S=[],x=(0,t.reshape)({inputs:{x:o},backend:c,attrs:{shape:d}}),f=(0,s.transpose)({inputs:{x:x},backend:c,attrs:{perm:l}}),m=(0,t.reshape)({inputs:{x:f},backend:c,attrs:{shape:b}}),N=(0,a.slice)({inputs:{x:m},backend:c,attrs:{begin:k,size:g}});return S.push(x),S.push(f),S.push(m),S.forEach(e=>c.disposeIntermediateTensorInfo(e)),N};exports.batchToSpaceND=n;const r={kernelName:e.BatchToSpaceND,backendName:"webgl",kernelFunc:n};exports.batchToSpaceNDConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Reshape":"Sp48","./Slice":"R1jH","./Transpose":"zUf2"}],"VKPY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bincount=t,exports.bincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:r,attrs:o}=e,{x:s,weights:i}=t,{size:a}=o,c=r.readSync(s.dataId),u=r.readSync(i.dataId),d=(0,n.bincountImplCPU)(c,u,i.dtype,i.shape,a);return r.makeTensorInfo([a],i.dtype,d)}const r={kernelName:e.Bincount,backendName:"webgl",kernelFunc:t};exports.bincountConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"PAk0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastArgs=e,exports.broadcastArgsConfig=void 0;var r=require("@tensorflow/tfjs-core");function e(e){const{inputs:a,backend:t}=e,{s0:s,s1:o}=a,n=t.readSync(s.dataId),d=t.readSync(o.dataId),c=r.backend_util.assertAndGetBroadcastShape(Array.from(n),Array.from(d));return t.makeTensorInfo([c.length],"int32",Int32Array.from(c))}const a={kernelName:r.BroadcastArgs,backendName:"webgl",kernelFunc:e};exports.broadcastArgsConfig=a;
},{"@tensorflow/tfjs-core":"nPFy"}],"TEW1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualConfig=exports.notEqual=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const n="return float(a != b);",o=(0,r.binaryKernelFunc)({opSnippet:n,cpuKernelImpl:t.notEqualImplCPU,dtype:"bool"});exports.notEqual=o;const l={kernelName:e.NotEqual,backendName:"webgl",kernelFunc:o};exports.notEqualConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"Ia5k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=r,exports.realConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function r(e){const{inputs:r,backend:n}=e,{input:o}=r,a=n.texData.get(o.dataId);return(0,t.identity)({inputs:{x:a.complexTensorInfos.real},backend:n})}const n={kernelName:e.Real,backendName:"webgl",kernelFunc:r};exports.realConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./Identity":"kxbQ"}],"PTXc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.int=t;var e=require("../unaryop_gpu");const r="return float(int(x));";function t(t,a){const n=new e.UnaryOpProgram(t.shape,r),o=a.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}
},{"../unaryop_gpu":"J9Rr"}],"DV8S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=p,exports.castConfig=void 0;var e=s(require("@tensorflow/tfjs-core")),t=require("./Complex"),r=require("./Identity"),n=require("./NotEqual"),o=require("./Real"),i=require("../kernel_utils/int");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function p(a){const{inputs:s,backend:u,attrs:c}=a,{x:d}=s,{dtype:f}=c;if("complex64"===f){if("complex64"===d.dtype)return(0,r.identity)({inputs:{x:d},backend:u});const n=e.zeros(d.shape),o=p({inputs:{x:d},backend:u,attrs:{dtype:"float32"}}),i=(0,t.complex)({inputs:{real:o,imag:n},backend:u});return n.dispose(),u.disposeIntermediateTensorInfo(o),i}if("complex64"===d.dtype){const e=(0,o.real)({inputs:{input:d},backend:u}),t=p({inputs:{x:e},backend:u,attrs:{dtype:f}});return u.disposeIntermediateTensorInfo(e),t}if(!e.util.hasEncodingLoss(d.dtype,f)){const e=(0,r.identity)({inputs:{x:d},backend:u});return{dataId:e.dataId,shape:e.shape,dtype:f}}if("int32"===f)return(0,i.int)(d,u);if("bool"===f){const t=u.makeTensorInfo([],"bool",e.util.getTypedArrayFromDType("bool",1)),r={a:d,b:t},o=(0,n.notEqual)({inputs:r,backend:u});return u.disposeIntermediateTensorInfo(t),o}throw new Error(`Error in Cast: failed to cast ${d.dtype} to ${f}`)}const u={kernelName:e.Cast,backendName:"webgl",kernelFunc:p};exports.castConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","./Complex":"UYfu","./Identity":"kxbQ","./NotEqual":"TEW1","./Real":"Ia5k","../kernel_utils/int":"PTXc"}],"b4Oa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilConfig=exports.ceil=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),l=require("../kernel_utils/shared");const n="return ceil(x);",i=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:n,cpuKernelImpl:l.ceilImplCPU});exports.ceil=i;const t={kernelName:e.Ceil,backendName:"webgl",kernelFunc:i};exports.ceilConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"mMpZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValue=p,exports.clipByValueConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../clip_gpu"),l=require("../clip_packed_gpu");function p(p){const{inputs:a,backend:i,attrs:n}=p,{x:o}=a,{clipValueMin:t,clipValueMax:c}=n;let u;u=(0,e.env)().getBool("WEBGL_PACK_CLIP")?new l.ClipPackedProgram(o.shape):new r.ClipProgram(o.shape);const s=[[t],[c]];return i.runWebGLProgram(u,[o],o.dtype,s)}const a={kernelName:e.ClipByValue,backendName:"webgl",kernelFunc:p};exports.clipByValueConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../clip_gpu":"rjZd","../clip_packed_gpu":"QdXF"}],"m3jr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complexAbs=t,exports.complexAbsConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../complex_abs_gpu");function r(e,o){return{dataId:o.dataId,dtype:o.dtype,shape:e.shape}}function t(e){const{inputs:t,backend:s}=e,{x:n}=t,a=s.texData.get(n.dataId),p=new o.ComplexAbsProgram(n.shape),c=[r(n,a.complexTensorInfos.real),r(n,a.complexTensorInfos.imag)];return s.runWebGLProgram(p,c,c[0].dtype)}const s={kernelName:e.ComplexAbs,backendName:"webgl",kernelFunc:t};exports.complexAbsConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../complex_abs_gpu":"w3Ul"}],"GmJd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConcatProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e){this.outputShape=[],this.outputShape=t.backend_util.computeOutShape(e,1),this.variableNames=e.map((t,e)=>`T${e}`);const o=new Array(e.length-1);o[0]=e[0][1];for(let t=1;t<o.length;t++)o[t]=o[t-1]+e[t][1];const s=[`if (yC < ${o[0]}) setOutput(getT0(yR, yC));`];for(let t=1;t<o.length;t++){const e=o[t-1];s.push(`else if (yC < ${o[t]}) `+`setOutput(getT${t}(yR, yC-${e}));`)}const n=o.length,r=o[o.length-1];s.push(`else setOutput(getT${n}(yR, yC-${r}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${s.join("\n        ")}\n      }\n    `}}exports.ConcatProgram=e;
},{"@tensorflow/tfjs-core":"nPFy"}],"gzri":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConcatPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./packing_util"),n=require("./shader_compiler");class r{constructor(r,s){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=e.backend_util.computeOutShape(r,s);const u=this.outputShape,a=u.length,$=(0,n.getCoordsDataType)(a),l=(0,t.getChannels)("coords",a),i=["x","y","z","w","u","v"].slice(0,a);this.variableNames=r.map((e,t)=>`T${t}`);const c=new Array(r.length-1);c[0]=r[0][s];for(let e=1;e<c.length;e++)c[e]=c[e-1]+r[e][s];const g=i[s],p=i.slice(-2),h=i.join();let d=`if (${g} < ${c[0]}) {\n        return getChannel(\n            getT0(${h}), vec2(${p.join()}));\n        }`;for(let e=1;e<c.length;e++){const t=c[e-1];d+=`\n        if (${g} < ${c[e]}  && ${g} >= ${c[e-1]}) {\n          return getChannel(\n            getT${e}(${o(i,g,t)}),\n            vec2(${o(p,g,t)}));\n        }`}const f=c.length,v=c[c.length-1];d+=`\n        return getChannel(\n          getT${f}(${o(i,g,v)}),\n          vec2(${o(p,g,v)}));`,this.userCode=`\n      float getValue(${i.map(e=>"int "+e)}) {\n        ${d}\n      }\n\n      void main() {\n        ${$} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${l}), 0., 0., 0.);\n\n        ${l[a-1]} = ${l[a-1]} + 1;\n        if (${l[a-1]} < ${u[a-1]}) {\n          result.g = getValue(${l});\n        }\n\n        ${l[a-2]} = ${l[a-2]} + 1;\n        if (${l[a-2]} < ${u[a-2]}) {\n          result.a = getValue(${l});\n        }\n\n        ${l[a-1]} = ${l[a-1]} - 1;\n        if (${l[a-2]} < ${u[a-2]} &&\n            ${l[a-1]} < ${u[a-1]}) {\n          result.b = getValue(${l});\n        }\n        setOutput(result);\n      }\n    `}}function o(e,t,n){const r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}exports.ConcatPackedProgram=r;
},{"@tensorflow/tfjs-core":"nPFy","./packing_util":"Axn8","./shader_compiler":"ELB4"}],"qnx7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=n,exports.imagConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function n(e){const{inputs:n,backend:r}=e,{input:i}=n,o=r.texData.get(i.dataId);return(0,t.identity)({inputs:{x:o.complexTensorInfos.imag},backend:r})}const r={kernelName:e.Imag,backendName:"webgl",kernelFunc:n};exports.imagConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Identity":"kxbQ"}],"eiZo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatImpl=i;var e=require("@tensorflow/tfjs-core"),t=require("../concat_gpu"),n=require("../concat_packed_gpu"),r=require("../kernel_utils/shared"),s=require("./Complex"),a=require("./Imag"),o=require("./Real"),p=require("./Reshape");function i(u,m,d){const h=u[0].dtype;if("complex64"===h){const e=u.map(e=>(0,o.real)({inputs:{input:e},backend:d})),t=u.map(e=>(0,a.imag)({inputs:{input:e},backend:d})),n=i(e,m,d),r=i(t,m,d),p=(0,s.complex)({inputs:{real:n,imag:r},backend:d});return e.forEach(e=>d.disposeIntermediateTensorInfo(e)),t.forEach(e=>d.disposeIntermediateTensorInfo(e)),d.disposeIntermediateTensorInfo(n),d.disposeIntermediateTensorInfo(r),p}let l=d.shouldExecuteOnCPU(u);if("string"===h&&(l=!0),l){const t=u.map(t=>{const n=[-1,e.util.sizeFromShape(t.shape.slice(m))];return(0,p.reshape)({inputs:{x:t},backend:d,attrs:{shape:n}})}),n=t.map(e=>({vals:d.readSync(e.dataId),shape:e.shape})),s=e.backend_util.computeOutShape(t.map(e=>e.shape),1),a=1===t[0].shape[0],o=(0,r.concatImplCPU)(n,s,h,a),i=e.backend_util.computeOutShape(u.map(e=>e.shape),m),c=d.makeTensorInfo(i,h,o);return t.forEach(e=>d.disposeIntermediateTensorInfo(e)),c}const f=(0,e.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(u.length>f){const e=[];for(let n=0;n<u.length;n+=f){const t=u.slice(n,n+f);e.push(i(t,m,d))}const t=i(e,m,d);for(const n of e)d.disposeIntermediateTensorInfo(n);return t}if((0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&u[0].shape.length>1){const e=new n.ConcatPackedProgram(u.map(e=>e.shape),m);return d.runWebGLProgram(e,u,h)}const{tensors2D:I,outShape:_}=c(u,m,d),g=new t.ConcatProgram(I.map(e=>e.shape)),b=d.runWebGLProgram(g,I,h);I.forEach(e=>d.disposeIntermediateTensorInfo(e));const k=(0,p.reshape)({inputs:{x:b},attrs:{shape:_},backend:d});return d.disposeIntermediateTensorInfo(b),k}function c(t,n,r){const s=e.backend_util.computeOutShape(t.map(e=>e.shape),n);return{tensors2D:t.map(t=>(0,p.reshape)({inputs:{x:t},attrs:{shape:[-1,e.util.sizeFromShape(t.shape.slice(n))]},backend:r})),outShape:s}}
},{"@tensorflow/tfjs-core":"nPFy","../concat_gpu":"GmJd","../concat_packed_gpu":"gzri","../kernel_utils/shared":"Q6tG","./Complex":"UYfu","./Imag":"qnx7","./Real":"Ia5k","./Reshape":"Sp48"}],"Pc9H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=a,exports.concatConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat_impl"),n=require("./Identity");function a(a){const{inputs:r,backend:s,attrs:o}=a,{axis:i}=o,c=e.util.parseAxisParam(i,r[0].shape)[0],p=e.backend_util.computeOutShape(r.map(e=>e.shape),c);if(0===e.util.sizeFromShape(p))return s.makeTensorInfo(p,r[0].dtype,[]);const u=r.filter(t=>e.util.sizeFromShape(t.shape)>0);if(1===u.length)return(0,n.identity)({inputs:{x:u[0]},backend:s});const l=u.map(e=>e.shape);return e.backend_util.assertParamsConsistent(l,c),(0,t.concatImpl)(u,c,s)}const r={kernelName:e.Concat,backendName:"webgl",kernelFunc:a};exports.concatConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Concat_impl":"eiZo","./Identity":"kxbQ"}],"TQNV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Im2ColPackedProgram=void 0;var e=require("./glsl_version"),n=require("./gpgpu_math");class t{constructor(t,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=(0,n.useShapeUniforms)(this.outputShape.length);const{dataFormat:s}=i,o=(0,e.getGlslDifferences)(),r="channelsLast"===s,a=r?1:2,d=r?2:3,p=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let c="";for(let e=0;e<=1;e++)for(let n=0;n<=1;n++)c+=`\n          blockIndex = rc.z + ${n};\n          pos = rc.y + ${e};\n\n          ${p}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${a}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${d}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${r}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+n}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+n}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${c}\n\n        ${o.output} = result;\n      }\n    `}}exports.Im2ColPackedProgram=t;
},{"./glsl_version":"Y5cG","./gpgpu_math":"vVuV"}],"MAO7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2dByMatMul=o,exports.conv2dWithIm2Row=c;var e=require("@tensorflow/tfjs-core"),t=require("../im2col_packed_gpu"),a=require("../kernel_utils/kernel_funcs_utils"),n=require("../mulmat_packed_gpu"),s=u(require("../webgl_util")),r=require("./BatchMatMul_impl"),i=require("./Identity"),l=require("./Reshape");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=s?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}function h(e,t){const a=e.length;return a>=3?t?[...e.slice(0,-3),e[a-3]*e[a-2],e[a-1]]:[...e.slice(0,-3),e[a-3],e[a-2]*e[a-1]]:!t&&1===a&&e[0]>1?[e[0],1]:null}function o({x:t,filter:a,convInfo:n,backend:p,bias:u=null,preluActivationWeights:o=null,leakyreluAlpha:c=0,activation:d=null}){const f=t.shape,b=p.texData.get(t.dataId),k=n.inChannels,g=f[0]*f[1]*f[2],x=n.outChannels,y="channelsLast"===n.dataFormat;let m;const v=[];if(null!=o){const e=h(o.shape,y);null!=e&&(o=(0,l.reshape)({inputs:{x:o},backend:p,attrs:{shape:e}}),v.push(o))}if(null!=u){const e=h(u.shape,y);null!=e&&(u=(0,l.reshape)({inputs:{x:u},backend:p,attrs:{shape:e}}),v.push(u))}if(!((1===g||1===x)&&k>r.MATMUL_SHARED_DIM_THRESHOLD)&&b.isPacked&&y&&null!=b.texture&&f[2]%2!=0&&e.util.arraysEqual(b.shape.slice(-3),f.slice(-3))){const h=f[0]*f[1]*(f[2]+1),k={dataId:t.dataId,shape:[1,h,n.inChannels],dtype:t.dtype},g=b.shape;b.shape=b.shape.slice(),b.shape[b.shape.length-2]++,e.util.assert(s.isReshapeFree(b.shape,k.shape),()=>`packed reshape ${b.shape} to ${k.shape} isn't free`);const x=(0,l.reshape)({inputs:{x:a},backend:p,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(x);const y=(0,r.batchMatMulImpl)({a:k,b:x,backend:p,transposeA:!1,transposeB:!1,bias:u,activation:d,preluActivationWeights:o,leakyreluAlpha:c}),M=p.texData.get(y.dataId);e.util.assert(M.isPacked,()=>"batchMatMul result is expected to be packed"),b.shape=g,M.shape=n.outShape,(m=(0,i.identity)({inputs:{x:y},backend:p})).shape=n.outShape,v.push(y)}else{const e=n.outHeight*n.outWidth,s=(0,l.reshape)({inputs:{x:t},backend:p,attrs:{shape:y?[n.batchSize,e,n.inChannels]:[n.batchSize,n.inChannels,e]}}),i=(0,l.reshape)({inputs:{x:a},backend:p,attrs:{shape:[1,n.inChannels,n.outChannels]}}),h=(0,r.batchMatMulImpl)({a:y?s:i,b:y?i:s,transposeA:!y,transposeB:!1,backend:p,bias:u,activation:d,preluActivationWeights:o,leakyreluAlpha:c});m=(0,l.reshape)({inputs:{x:h},backend:p,attrs:{shape:n.outShape}}),v.push(s),v.push(i),v.push(h)}for(const e of v)p.disposeIntermediateTensorInfo(e);return m}function c({x:s,filter:r,convInfo:i,backend:p,bias:u=null,preluActivationWeights:o=null,leakyreluAlpha:c=0,activation:d=null}){const{filterWidth:f,filterHeight:b,inChannels:k,outWidth:g,outHeight:x,dataFormat:y}=i,m="channelsLast"===y,v=f*b*k,M=x*g,I=[i.batchSize,v,M],W=[];if(null!=o){const e=h(o.shape,m);null!=e&&(o=(0,l.reshape)({inputs:{x:o},backend:p,attrs:{shape:e}}),W.push(o))}if(null!=u){const e=h(u.shape,m);null!=e&&(u=(0,l.reshape)({inputs:{x:u},backend:p,attrs:{shape:e}}),W.push(u))}const _=(0,l.reshape)({inputs:{x:r},backend:p,attrs:{shape:[1,v,e.util.sizeFromShape(r.shape)/v]}});W.push(_);const C=new t.Im2ColPackedProgram(I,i),P=[s.shape,[i.padInfo.top,i.padInfo.left],[i.strideHeight,i.strideWidth],[i.dilationHeight,i.dilationWidth],[i.inChannels],[i.filterWidth*i.inChannels],[i.outWidth]],S=p.runWebGLProgram(C,[s],"float32",P),A=(0,l.reshape)({inputs:{x:S},backend:p,attrs:{shape:I}});W.push(S),W.push(A);const w=null!=u,O=null!=o,q="leakyrelu"===d,j=d?(0,a.mapActivationToShaderProgram)(d,!0):null,H=new n.MatMulPackedProgram(m?A.shape:_.shape,m?_.shape:A.shape,m?[i.batchSize,M,i.outChannels]:[i.batchSize,i.outChannels,M],!0,!1,w,j,O,q),D=m?[A,_]:[_,A];if(u&&D.push(u),O&&D.push(o),q){const t=p.makeTensorInfo([],"float32",e.util.createScalarValue(c,"float32"));D.push(t),W.push(t)}const z=p.runWebGLProgram(H,D,"float32"),L=(0,l.reshape)({inputs:{x:z},backend:p,attrs:{shape:i.outShape}});W.push(z);for(const e of W)p.disposeIntermediateTensorInfo(e);return L}
},{"@tensorflow/tfjs-core":"nPFy","../im2col_packed_gpu":"TQNV","../kernel_utils/kernel_funcs_utils":"ANbB","../mulmat_packed_gpu":"i9go","../webgl_util":"wqV5","./BatchMatMul_impl":"phUe","./Identity":"kxbQ","./Reshape":"Sp48"}],"ZyyX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DConfig=void 0,exports.conv2d=r;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu"),o=require("./Conv2D_impl"),n=require("./Reshape");function r(r){const{inputs:i,backend:a,attrs:s}=r,{x:d,filter:c}=i,{strides:l,pad:p,dataFormat:f,dilations:u,dimRoundingMode:v}=s,h=e.backend_util.convertConv2DDataFormat(f),g=e.backend_util.computeConv2DInfo(d.shape,c.shape,l,u,p,v,!1,h);let m;if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if((0,e.env)().getBool("WEBGL_CONV_IM2COL"))m=(0,o.conv2dWithIm2Row)({x:d,filter:c,convInfo:g,backend:a});else{const e=new t.Conv2DProgram(g);m=a.runWebGLProgram(e,[d,c],"float32")}else m=(0,o.conv2dByMatMul)({x:d,filter:c,convInfo:g,backend:a});const b=(0,n.reshape)({inputs:{x:m},backend:a,attrs:{shape:g.outShape}});return a.disposeIntermediateTensorInfo(m),b}const i={kernelName:e.Conv2D,backendName:"webgl",kernelFunc:r};exports.conv2DConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../conv_gpu":"LHRJ","./Conv2D_impl":"MAO7","./Reshape":"Sp48"}],"yl7e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=o,exports.conv2DBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../conv_backprop_gpu");function o(o){const{inputs:t,backend:n,attrs:a}=o,{x:c,dy:p}=t,{strides:i,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:d}=a,v=e.backend_util.convertConv2DDataFormat(l),k=e.backend_util.computeConv2DInfo(c.shape,d,i,1,s,u,!1,v),f=new r.Conv2DDerFilterProgram(k);return n.runWebGLProgram(f,[c,p],"float32")}const t={kernelName:e.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:o};exports.conv2DBackpropFilterConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../conv_backprop_gpu":"y8Ea"}],"XNH5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=n,exports.conv2DBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../conv_backprop_gpu");function n(n){const{inputs:r,backend:t,attrs:p}=n,{dy:a,filter:c}=r,{inputShape:u,strides:i,pad:s,dataFormat:d,dimRoundingMode:v}=p,k=e.backend_util.convertConv2DDataFormat(d),l=e.backend_util.computeConv2DInfo(u,c.shape,i,1,s,v,!1,k),f=new o.Conv2DDerInputProgram(l);return t.runWebGLProgram(f,[a,c],"float32")}const r={kernelName:e.Conv2DBackpropInput,backendName:"webgl",kernelFunc:n};exports.conv2DBackpropInputConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../conv_backprop_gpu":"y8Ea"}],"LWnT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3D=n,exports.conv3DConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../conv_gpu");function n(n){const{inputs:r,backend:t,attrs:s}=n,{x:a,filter:c}=r,{strides:i,pad:u,dilations:p}=s,l=e.backend_util.computeConv3DInfo(a.shape,c.shape,i,p,u),v=new o.Conv3DProgram(l);return t.runWebGLProgram(v,[a,c],"float32")}const r={kernelName:e.Conv3D,backendName:"webgl",kernelFunc:n};exports.conv3DConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../conv_gpu":"LHRJ"}],"jowa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilterV2=o,exports.conv3DBackpropFilterV2Config=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../conv_backprop_gpu");function o(o){const{inputs:t,backend:n,attrs:p}=o,{x:c,dy:a}=t,{strides:i,pad:s,filterShape:l}=p,u=e.backend_util.computeConv3DInfo(c.shape,l,i,1,s),k=new r.Conv3DDerFilterProgram(u);return n.runWebGLProgram(k,[c,a],"float32")}const t={kernelName:e.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:o};exports.conv3DBackpropFilterV2Config=t;
},{"@tensorflow/tfjs-core":"nPFy","../conv_backprop_gpu":"y8Ea"}],"FLHF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInput=o,exports.conv3DBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../conv_backprop_gpu");function o(o){const{inputs:r,backend:t,attrs:p}=o,{dy:c,filter:a}=r,{pad:u,strides:s,inputShape:i}=p,k=e.backend_util.computeConv3DInfo(i,a.shape,s,1,u),v=new n.Conv3DDerInputProgram(k);return t.runWebGLProgram(v,[c,a],"float32")}const r={kernelName:e.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:o};exports.conv3DBackpropInputConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../conv_backprop_gpu":"y8Ea"}],"C4W6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosConfig=exports.cos=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o=r.CHECK_NAN_SNIPPET_UNARY+"\n  return cos(x);\n",s=(0,r.unaryKernelFunc)({opSnippet:o});exports.cos=s;const n={kernelName:e.Cos,backendName:"webgl",kernelFunc:s};exports.cosConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"UXpP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshConfig=exports.cosh=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",n=(0,r.unaryKernelFunc)({opSnippet:o});exports.cosh=n;const s={kernelName:e.Cosh,backendName:"webgl",kernelFunc:n};exports.coshConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"DCUo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResizeConfig=exports.cropAndResize=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../crop_and_resize_gpu");const o=e=>{const{inputs:o,backend:n,attrs:s}=e,{image:t,boxes:p,boxInd:i}=o,{cropSize:a,method:c,extrapolationValue:d}=s,u=new r.CropAndResizeProgram(t.shape,p.shape,a,c,d);return n.runWebGLProgram(u,[t,p,i],"float32")};exports.cropAndResize=o;const n={kernelName:e.CropAndResize,backendName:"webgl",kernelFunc:o};exports.cropAndResizeConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../crop_and_resize_gpu":"nc6W"}],"WGrM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CumProgram=exports.CumOpType=void 0;var t,e=require("./shader_compiler");exports.CumOpType=t,function(t){t.Prod="*",t.Sum="+"}(t||(exports.CumOpType=t={}));class o{constructor(o,i,s,p){this.op=o,this.outputShape=i,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const u=this.outputShape.length,d=this.op===t.Prod?"1.0":"0.0",$=s?d:`getX(${r(u,"coords",this.op)})`,a=this.outputShape[this.outputShape.length-1];let h="",f="";s?(h=p?`end != ${a-1}`:"end != 0",f=p?"end + 1":"end - 1"):(h=p?`end + pow2 < ${a}`:"end >= pow2",f=p?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${(0,e.getCoordsDataType)(u)} coords = getOutputCoords();\n        int end = ${n(u,"coords",this.op)};\n        float val = ${$};\n        int pow2 = int(pow(2.0, index));\n        if (${h}) {\n          int idx = ${f};\n          ${n(u,"coords",this.op)} = idx;\n          val ${this.op}= getX(${r(u,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function r(t,e,o){if(1===t)return`${e}`;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${o} for rank ${t} is not yet supported`)}function n(t,e,o){if(1===t)return`${e}`;if(2===t)return`${e}.y`;if(3===t)return`${e}.z`;if(4===t)return`${e}.w`;throw new Error(`Cumulative ${o} for rank ${t} is not yet supported`)}exports.CumProgram=o;
},{"./shader_compiler":"ELB4"}],"lenp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumImpl=s;var e=require("@tensorflow/tfjs-core"),t=require("../cum_gpu"),r=require("./Identity"),n=require("./Transpose");function s(s,o,a,i,u,p){const d=o.shape.length,c=e.backend_util.getAxesPermutation([i],d);let m=o;null!=c&&(m=(0,n.transpose)({inputs:{x:o},backend:a,attrs:{perm:c}}));const l=e.backend_util.getInnerMostAxes(1,d)[0];if(l!==d-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${o.shape.length-1} `+`but got axis=${i}`);const f=m.shape[l];let g=(0,r.identity)({inputs:{x:m},backend:a});for(let e=0;e<=Math.ceil(Math.log2(f))-1;e++){const r=new t.CumProgram(s,m.shape,!1,p),n=[[e]],o=g;g=a.runWebGLProgram(r,[g],g.dtype,n),a.disposeIntermediateTensorInfo(o)}if(u){const e=new t.CumProgram(s,m.shape,u,p),r=g;g=a.runWebGLProgram(e,[g],g.dtype),a.disposeIntermediateTensorInfo(r)}if(null!=c){const t=e.backend_util.getUndoAxesPermutation(c),r=(0,n.transpose)({inputs:{x:g},backend:a,attrs:{perm:t}});return a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(m),r}return g}
},{"@tensorflow/tfjs-core":"nPFy","../cum_gpu":"WGrM","./Identity":"kxbQ","./Transpose":"zUf2"}],"Pqza":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumprod=u,exports.cumprodConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../cum_gpu"),o=require("./Cum_impl");function u(e){const{inputs:u,backend:t,attrs:s}=e,{x:c}=u,{axis:n,exclusive:p,reverse:i}=s;return(0,o.cumImpl)(r.CumOpType.Prod,c,t,n,p,i)}const t={kernelName:e.Cumprod,backendName:"webgl",kernelFunc:u};exports.cumprodConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../cum_gpu":"WGrM","./Cum_impl":"lenp"}],"ka4l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=s,exports.cumsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),u=require("../cum_gpu"),r=require("./Cum_impl");function s(e){const{inputs:s,backend:m,attrs:t}=e,{x:c}=s,{axis:n,exclusive:o,reverse:i}=t;return(0,r.cumImpl)(u.CumOpType.Sum,c,m,n,o,i)}const m={kernelName:e.Cumsum,backendName:"webgl",kernelFunc:s};exports.cumsumConfig=m;
},{"@tensorflow/tfjs-core":"nPFy","../cum_gpu":"WGrM","./Cum_impl":"lenp"}],"VIHQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBincount=t,exports.denseBincountConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,weights:u}=t,{size:a,binaryOutput:i}=s;if(1===o.shape.length){const e=r.readSync(o.dataId),t=r.readSync(u.dataId),s=(0,n.bincountImplCPU)(e,t,u.dtype,u.shape,a);return r.makeTensorInfo([a],u.dtype,s)}if(2===o.shape.length){const e=r.bufferSync(o),t=r.bufferSync(u),s=(0,n.bincountReduceImplCPU)(e,t,a,i);return r.makeTensorInfo(s.shape,u.dtype,s.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+`${o.shape.length}.`)}const r={kernelName:e.DenseBincount,backendName:"webgl",kernelFunc:t};exports.denseBincountConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"ExC9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=t,exports.depthToSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core"),p=require("../depth_to_space_gpu");function t(e){const{inputs:t,backend:a,attrs:o}=e,{x:r}=t,{blockSize:s,dataFormat:n}=o,c=r.shape[0],h=("NHWC"===n?r.shape[1]:r.shape[2])*s,d=("NHWC"===n?r.shape[2]:r.shape[3])*s,u=("NHWC"===n?r.shape[3]:r.shape[1])/(s*s),i="NHWC"===n?[c,h,d,u]:[c,u,h,d],l=new p.DepthToSpaceProgram(i,s,n);return a.runWebGLProgram(l,[r],r.dtype)}const a={kernelName:e.DepthToSpace,backendName:"webgl",kernelFunc:t};exports.depthToSpaceConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../depth_to_space_gpu":"KXiR"}],"HIFn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConv2DProgram=void 0;var t=require("./gpgpu_math");class n{constructor(n,e=!1,o=null,i=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=(0,t.useShapeUniforms)(this.outputShape.length);const s=n.filterHeight,r=n.filterWidth,l=n.outChannels/n.inChannels;let d="",u="";o&&(d=i?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${o}\n        }`:`\n          float activation(float x) {\n            ${o}\n          }\n        `,u="result = activation(result);");const h=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${d}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${l};\n        int q = d2 - d1 * ${l};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${s}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${r}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${h}\n        ${u}\n        setOutput(result);\n      }\n    `}}exports.DepthwiseConv2DProgram=n;
},{"./gpgpu_math":"vVuV"}],"WxQq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConvPacked2DProgram=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./gpgpu_math");class x{constructor(x,t=!1,i=null,s=!1,C=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=x.outShape,this.enableShapeUniforms=(0,n.useShapeUniforms)(this.outputShape.length);const l=x.outChannels/x.inChannels,a=x.padInfo.left,f=x.strideWidth,r=x.dilationWidth,c=x.filterHeight,d=x.filterWidth,o=d;let $="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<d;e++)$+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;$+=`\n    for (int r = 0; r < ${c}; r++) {\n      `;for(let e=0;e<d;e++)$+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;$+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let n=0;n<(o+1)/2;n++){const x=2*n;if($+=`\n          xC = xCCorner + ${x*r};\n          `,1===f){if(x<d&&(a%2==1?($+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {\n                  xTexelC${x} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${x}.zw = vec2(0.0);\n                  }\n                  xTexelC${x}Ready = 1;\n                }\n              `,$+=1===r&&x>0?`\n                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);\n                  } else {\n                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);\n                  }\n                  `):$+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {\n                  xTexelC${x} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${x}.zw = vec2(0.0);\n                  }\n                  xTexelC${x}Ready = 1;\n                }\n\n                xC${x} = xTexelC${x};\n                `,x+1<d)){const n=a%2==0?e.util.nearestLargerEven(r):r;r%2==0&&a%2==1||r%2!=0&&a%2!=1?($+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${n};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {\n                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${x+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${x+1}Ready = 1;\n                  }\n                  `,r>1&&($+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {\n                      xTexelC${x} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${x}Ready = 1;\n                    }\n                    `),$+=`\n                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);\n                  `):$+=1===n?`\n                    xC${x+1} = xTexelC${x};\n                    `:`\n                    xCOffset = xC + ${n};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {\n                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${x+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${x+1}Ready = 1;\n                    }\n\n                    xC${x+1} = xTexelC${x+1};\n                    `}}else x<d&&(a%2==1?($+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {\n                  xTexelC${x} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${x}.zw = vec2(0.0);\n                  }\n                  xTexelC${x}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {\n                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${x+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${x+1}Ready = 1;\n                }\n\n                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);\n              `,x+1<d&&($+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);\n                `)):($+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {\n                  xTexelC${x} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${x}.zw = vec2(0.0);\n                  }\n                  xTexelC${x}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {\n                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${x+1}.zw = vec2(0.);\n                  }\n                  xTexelC${x+1}Ready = 1;\n                }\n\n                xC${x} = vec4(\n                  xTexelC${x}.xy, xTexelC${x+1}.xy);\n              `,x+1<d&&($+=`\n                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);\n                `)));x<d&&($+=`\n            wTexel = getW(r, ${x}, d1, q);\n            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);\n          `,x+1<d&&($+=`\n              wTexel = getW(r, ${x+1}, d1, q);\n              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}$+="\n    }\n  ",$+="\n      }\n    ";let v="",u="";i&&(v=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:C?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,u="result = activation(result);");const T=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),C&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${l};\n        int q = d2 - d1 * ${l};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${$}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${T}\n        ${u}\n        setOutput(result);\n      }\n    `}}exports.DepthwiseConvPacked2DProgram=x;
},{"@tensorflow/tfjs-core":"nPFy","./gpgpu_math":"vVuV"}],"y4c4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNative=n,exports.depthwiseConv2dNativeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu_depthwise"),i=require("../conv_packed_gpu_depthwise");function n(n){const{inputs:o,backend:r,attrs:s}=n,{x:d,filter:a}=o,{strides:l,pad:p,dilations:h,dimRoundingMode:u}=s;let c=h;null==c&&(c=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(l,c),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${l} and dilations '${c}'`);const v=e.backend_util.computeConv2DInfo(d.shape,a.shape,l,c,p,u,!0);let C;C=(0,e.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1?new i.DepthwiseConvPacked2DProgram(v):new t.DepthwiseConv2DProgram(v);const g=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]];return r.runWebGLProgram(C,[d,a],"float32",g)}const o={kernelName:e.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:n};exports.depthwiseConv2dNativeConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../conv_gpu_depthwise":"HIFn","../conv_packed_gpu_depthwise":"WxQq"}],"Iezu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=r,exports.depthwiseConv2dNativeBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_backprop_gpu_depthwise");function r(r){const{inputs:o,backend:i,attrs:n}=r,{x:p,dy:a}=o,{strides:s,dilations:d,pad:c,dimRoundingMode:l,filterShape:u}=n,v=e.backend_util.computeConv2DInfo(p.shape,u,s,d,c,l,!0),k=new t.DepthwiseConv2DDerFilterProgram(v);return i.runWebGLProgram(k,[p,a],"float32")}const o={kernelName:e.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:r};exports.depthwiseConv2dNativeBackpropFilterConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../conv_backprop_gpu_depthwise":"QU4a"}],"c3Ls":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=n,exports.depthwiseConv2dNativeBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_backprop_gpu_depthwise");function n(n){const{inputs:o,backend:p,attrs:r}=n,{dy:i,filter:a}=o,{strides:s,dilations:d,pad:u,dimRoundingMode:c,inputShape:v}=r,k=e.backend_util.computeConv2DInfo(v,a.shape,s,d,u,c,!0),l=new t.DepthwiseConv2DDerInputProgram(k);return p.runWebGLProgram(l,[i,a],"float32")}const o={kernelName:e.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:n};exports.depthwiseConv2dNativeBackpropInputConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../conv_backprop_gpu_depthwise":"QU4a"}],"qcJn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=a,exports.diagConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../diag_gpu"),s=require("./Reshape");function a(a){const{inputs:n,backend:t}=a,{x:i}=n,o=[...i.shape,...i.shape],p=e.util.sizeFromShape(i.shape),d=(0,s.reshape)({inputs:{x:i},backend:t,attrs:{shape:[p]}}),u=new r.DiagProgram(p),g=t.runWebGLProgram(u,[d],d.dtype),c=(0,s.reshape)({inputs:{x:g},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(g),c}const n={kernelName:e.Diag,backendName:"webgl",kernelFunc:a};exports.diagConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../diag_gpu":"V8Cn","./Reshape":"Sp48"}],"GR9f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2D=o,exports.dilation2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../dilation_gpu"),n=require("./Reshape");function o(o){const{inputs:i,backend:r,attrs:a}=o,{x:s,filter:l}=i,{strides:p,pad:d,dilations:u}=a,c=e.backend_util.computeDilation2DInfo(s.shape,l.shape,p,d,"NHWC",u);let f;const D=new t.Dilation2DProgram(c);f=r.runWebGLProgram(D,[s,l],"float32");const b=(0,n.reshape)({inputs:{x:f},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(f),b}const i={kernelName:e.Dilation2D,backendName:"webgl",kernelFunc:o};exports.dilation2DConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../dilation_gpu":"zpON","./Reshape":"Sp48"}],"IP7q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.einsum=u,exports.einsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Multiply"),s=require("./Reshape"),n=require("./Sum"),i=require("./Transpose");function u(u){const{inputs:r,backend:a,attrs:o}=u,{equation:l}=o,p=r,{allDims:c,summedDims:m,idDims:d}=e.backend_util.decodeEinsumEquation(l,p.length);e.backend_util.checkEinsumDimSizes(c.length,d,p);const{path:h,steps:k}=e.backend_util.getEinsumComputePath(m,d),b=k.length;let f=null,g=c.length;const x=[];for(let q=0;q<b;++q){for(const n of k[q]){const{permutationIndices:u,expandDims:r}=e.backend_util.getEinsumPermutation(g,d[n]);let o;e.backend_util.isIdentityPermutation(u)?o=p[n]:(o=(0,i.transpose)({inputs:{x:p[n]},backend:a,attrs:{perm:u}}),x.push(o));const l=o.shape.slice();for(let e=0;e<r.length;++e)l.splice(r[e],0,1);e.util.arraysEqual(o.shape,l)||(o=(0,s.reshape)({inputs:{x:o},backend:a,attrs:{shape:l}}),x.push(o)),null===f?f=o:(f=(0,t.multiply)({inputs:{a:o,b:f},backend:a}),x.push(f))}q<b-1&&(h[q]>=0&&(f=(0,n.sum)({inputs:{x:f},backend:a,attrs:{axis:h[q]-(c.length-g),keepDims:!1}}),x.push(f)),g--)}for(const e of x)e!==f&&a.disposeIntermediateTensorInfo(e);return f}const r={kernelName:e.Einsum,backendName:"webgl",kernelFunc:u};exports.einsumConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Multiply":"na66","./Reshape":"Sp48","./Sum":"Snxr","./Transpose":"zUf2"}],"hi8W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return (x >= 0.0) ? x : (exp(x) - 1.0);",x="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:x}),u={kernelName:e.Elu,backendName:"webgl",kernelFunc:t};exports.eluConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"YQgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGradConfig=exports.eluGrad=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),a=require("../binaryop_packed_gpu");const n="return (b >= 1.0) ? a : a * (b + 1.0);",o="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t=t=>{const{inputs:u,backend:p}=t,{dy:s,y:c}=u,b=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new a.BinaryOpPackedProgram(o,s.shape,c.shape):new r.BinaryOpProgram(n,s.shape,c.shape);return p.runWebGLProgram(b,[s,c],s.dtype)};exports.eluGrad=t;const u={kernelName:e.EluGrad,backendName:"webgl",kernelFunc:t};exports.eluGradConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_gpu":"apo2","../binaryop_packed_gpu":"N9H6"}],"z2VW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalConfig=exports.equal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),l=require("../kernel_utils/shared");const n="\n  return vec4(equal(a, b));\n",t="return float(a == b);",u=(0,r.binaryKernelFunc)({opSnippet:t,packedOpSnippet:n,dtype:"bool",cpuKernelImpl:l.equalImplCPU});exports.equal=u;const o={kernelName:e.Equal,backendName:"webgl",kernelFunc:u};exports.equalConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"LCUS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfConfig=exports.erf=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${e.backend_util.ERF_P};\n  float a1 = ${e.backend_util.ERF_A1};\n  float a2 = ${e.backend_util.ERF_A2};\n  float a3 = ${e.backend_util.ERF_A3};\n  float a4 = ${e.backend_util.ERF_A4};\n  float a5 = ${e.backend_util.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,a=(0,n.unaryKernelFunc)({opSnippet:t});exports.erf=a;const r={kernelName:e.Erf,backendName:"webgl",kernelFunc:a};exports.erfConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"dncg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expConfig=exports.exp=exports.EXP=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../kernel_utils/shared");const s=r.CHECK_NAN_SNIPPET_UNARY+"\n  return exp(x);\n";exports.EXP=s;const t="\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",l=(0,r.unaryKernelFunc)({opSnippet:s,packedOpSnippet:t,cpuKernelImpl:n.expImplCPU,dtype:"float32"});exports.exp=l;const p={kernelName:e.Exp,backendName:"webgl",kernelFunc:l};exports.expConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"e8Qs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=t,exports.expandDimsConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Reshape");function t(t){const{inputs:n,attrs:r,backend:i}=t,{dim:a}=r,{input:p}=n,o=p.shape.length,u=p.shape.slice();let c=a;return a<0&&(e.util.assert(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+a+1),u.splice(c,0,1),(0,s.reshape)({inputs:{x:p},backend:i,attrs:{shape:u}})}const n={kernelName:e.ExpandDims,backendName:"webgl",kernelFunc:t};exports.expandDimsConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./Reshape":"Sp48"}],"Sl7O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Config=exports.expm1=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),p=require("../kernel_utils/shared");const n="return exp(x) - 1.0;",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:n,cpuKernelImpl:p.expm1ImplCPU});exports.expm1=t;const s={kernelName:e.Expm1,backendName:"webgl",kernelFunc:t};exports.expm1Config=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"yccJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fftImpl=t;var e=require("@tensorflow/tfjs-core"),a=require("../fft_gpu"),r=require("./Complex"),s=require("./Reshape");function t(t,o,n){const p=n.texData.get(t.dataId),d=e.util.sizeFromShape(t.shape),i=t.shape[t.shape.length-1],m=d/i,f=(0,s.reshape)({inputs:{x:t},backend:n,attrs:{shape:[m,i]}}),l=f.shape,I=new a.FFTProgram("real",l,o),u=new a.FFTProgram("imag",l,o),c=[{dataId:p.complexTensorInfos.real.dataId,dtype:p.complexTensorInfos.real.dtype,shape:l},{dataId:p.complexTensorInfos.imag.dataId,dtype:p.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(I,c,"float32"),g=n.runWebGLProgram(u,c,"float32"),x=(0,r.complex)({inputs:{real:h,imag:g},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g);const T=(0,s.reshape)({inputs:{x:x},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(x),T}
},{"@tensorflow/tfjs-core":"nPFy","../fft_gpu":"LwKt","./Complex":"UYfu","./Reshape":"Sp48"}],"GG30":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=r,exports.fftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./FFT_impl");function r(e){const{inputs:r,backend:n}=e,{input:o}=r;return(0,t.fftImpl)(o,!1,n)}const n={kernelName:e.FFT,backendName:"webgl",kernelFunc:r};exports.fftConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./FFT_impl":"yccJ"}],"BnXr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=t,exports.fillConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../fill_gpu");function t(t){const{backend:l,attrs:n}=t,{shape:o,value:i}=n;let{dtype:s}=n;if("string"===(s=s||e.util.inferDtype(i))){const r=e.util.getArrayFromDType(s,e.util.sizeFromShape(o));return r.fill(i),l.makeTensorInfo(o,s,r)}{const e=new r.FillProgram(o,i),t=[[i]];return l.runWebGLProgram(e,[],s,t)}}const l={kernelName:e.Fill,backendName:"webgl",kernelFunc:t};exports.fillConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../fill_gpu":"A8rF"}],"gG5Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRightConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../flip_left_right_gpu");const r={kernelName:e.FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:e,backend:r})=>{const{image:i}=e,n=r,o=new t.FlipLeftRightProgram(i.shape);return n.runWebGLProgram(o,[i],i.dtype)}};exports.flipLeftRightConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../flip_left_right_gpu":"gwWQ"}],"wQ7g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorConfig=exports.floor=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),o=require("../kernel_utils/shared");const l="return floor(x);",n=(0,r.unaryKernelFunc)({opSnippet:l,packedOpSnippet:l,cpuKernelImpl:o.floorImplCPU});exports.floor=n;const t={kernelName:e.Floor,backendName:"webgl",kernelFunc:n};exports.floorConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"t81V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivConfig=exports.floorDiv=void 0;var n=require("@tensorflow/tfjs-core"),i=require("../kernel_utils/kernel_funcs_utils");const e="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",o="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",r=(0,i.binaryKernelFunc)({opSnippet:e,packedOpSnippet:o,dtype:"int32"});exports.floorDiv=r;const t={kernelName:n.FloorDiv,backendName:"webgl",kernelFunc:r};exports.floorDivConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"ZyS1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FromPixelsProgram=void 0;var e=require("../../glsl_version");class t{constructor(t){this.variableNames=["A"];const s=(0,e.getGlslDifferences)(),[n,o]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${n}.0);\n\n        vec4 values = ${s.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}exports.FromPixelsProgram=t;
},{"../../glsl_version":"Y5cG"}],"POa8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FromPixelsPackedProgram=void 0;var e=require("../../glsl_version");class t{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const o=(0,e.getGlslDifferences)(),[n,s]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${s}.0, ${n}.0);\n            vec4 values = ${o.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.FromPixelsPackedProgram=t;
},{"../../glsl_version":"Y5cG"}],"ryp3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromPixelsConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../tex_util"),n=require("./FromPixels_utils/from_pixels_gpu"),o=require("./FromPixels_utils/from_pixels_packed_gpu");const a={kernelName:e.FromPixels,backendName:"webgl",kernelFunc:i};let r;function i(a){const{inputs:i,backend:s,attrs:l}=a;let{pixels:d}=i;const{numChannels:u}=l,m="undefined"!=typeof HTMLVideoElement&&d instanceof HTMLVideoElement,c="undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement,[g,x]=m?[d.videoWidth,d.videoHeight]:[d.width,d.height],f=[x,g],p=[x,g,u];(c||m)&&(null==r&&(r=document.createElement("canvas").getContext("2d")),r.canvas.width=g,r.canvas.height=x,r.drawImage(d,0,0,g,x),d=r.canvas);const P=s.makeTensorInfo(f,"int32");s.texData.get(P.dataId).usage=t.TextureUsage.PIXELS,s.gpgpu.uploadPixelDataToTexture(s.getTexture(P.dataId),d);const _=(0,e.env)().getBool("WEBGL_PACK")?new o.FromPixelsPackedProgram(p):new n.FromPixelsProgram(p),v=s.runWebGLProgram(_,[P],"int32");return s.disposeData(P.dataId),v}exports.fromPixelsConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../tex_util":"GY6p","./FromPixels_utils/from_pixels_gpu":"ZyS1","./FromPixels_utils/from_pixels_packed_gpu":"POa8"}],"e5W1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedConv2DConfig=void 0,exports.fusedConv2d=i;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu"),n=require("../kernel_utils/kernel_funcs_utils"),a=require("./Conv2D_impl"),o=require("./Reshape");function i(i){const{inputs:r,backend:s,attrs:l}=i,{x:u,filter:p,bias:c,preluActivationWeights:d}=r,{strides:h,pad:f,dataFormat:v,dilations:k,dimRoundingMode:g,activation:b,leakyreluAlpha:m}=l,C=e.backend_util.convertConv2DDataFormat(v),I=e.backend_util.computeConv2DInfo(u.shape,p.shape,h,k,f,g,!1,C);let _;const W=[];if(1!==I.filterHeight||1!==I.filterWidth||1!==I.dilationHeight||1!==I.dilationWidth||1!==I.strideHeight||1!==I.strideWidth||"SAME"!==I.padInfo.type&&"VALID"!==I.padInfo.type)if((0,e.env)().getBool("WEBGL_CONV_IM2COL"))_=(0,a.conv2dWithIm2Row)({x:u,filter:p,convInfo:I,backend:s,bias:c,activation:b,preluActivationWeights:d,leakyreluAlpha:m});else{const a=null!=c,i=null!=d,r="leakyrelu"===b,l=b?(0,n.mapActivationToShaderProgram)(b,!1):null,h=new t.Conv2DProgram(I,a,l,i,r),f=[u,p],k=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=(0,o.reshape)({inputs:{x:e},backend:s,attrs:{shape:[e.shape[0],1,1]}});return W.push(t),t}return e};if(a&&f.push(k(c,v)),i&&f.push(k(d,v)),r){const t=s.makeTensorInfo([],"float32",e.util.createScalarValue(m,"float32"));f.push(t),W.push(t)}_=s.runWebGLProgram(h,f,"float32")}else _=(0,a.conv2dByMatMul)({x:u,filter:p,convInfo:I,backend:s,bias:c,activation:b,preluActivationWeights:d,leakyreluAlpha:m});const x=(0,o.reshape)({inputs:{x:_},backend:s,attrs:{shape:I.outShape}});return W.push(_),W.forEach(e=>s.disposeIntermediateTensorInfo(e)),x}const r={kernelName:e.FusedConv2D,backendName:"webgl",kernelFunc:i};exports.fusedConv2DConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../conv_gpu":"LHRJ","../kernel_utils/kernel_funcs_utils":"ANbB","./Conv2D_impl":"MAO7","./Reshape":"Sp48"}],"SxXF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedDepthwiseConv2D=o,exports.fusedDepthwiseConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../conv_gpu_depthwise"),i=require("../conv_packed_gpu_depthwise"),n=require("../kernel_utils/kernel_funcs_utils");function o(o){const{inputs:s,backend:r,attrs:a}=o,{x:l,filter:d,bias:u,preluActivationWeights:p}=s,{strides:h,pad:c,dilations:f,dimRoundingMode:v,activation:g,leakyreluAlpha:D}=a,C=[];let _=f;null==_&&(_=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(h,_),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${h} and dilations '${_}'`);const k=e.backend_util.computeConv2DInfo(l.shape,d.shape,h,_,c,v,!0),w=(0,e.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&k.strideWidth<=2&&k.outChannels/k.inChannels==1,m=g?(0,n.mapActivationToShaderProgram)(g,w):null,b=[l,d],P=null!=u,W=null!=p,I="leakyrelu"===g;if(P&&b.push(u),W&&b.push(p),I){const t=r.makeTensorInfo([],"float32",e.util.createScalarValue(D,"float32"));b.push(t),C.push(t)}let E;E=w?new i.DepthwiseConvPacked2DProgram(k,P,m,W,I):new t.DepthwiseConv2DProgram(k,P,m,W,I);const x=[[k.padInfo.top,k.padInfo.left],[k.strideHeight,k.strideWidth],[k.dilationHeight,k.dilationWidth],[k.inHeight,k.inWidth]],A=r.runWebGLProgram(E,b,"float32",x);return C.forEach(e=>r.disposeIntermediateTensorInfo(e)),A}const s={kernelName:e.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:o};exports.fusedDepthwiseConv2DConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../conv_gpu_depthwise":"HIFn","../conv_packed_gpu_depthwise":"WxQq","../kernel_utils/kernel_funcs_utils":"ANbB"}],"wjRR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GatherNDProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,o,n){this.sliceDim=t,this.strides=s,this.paramsShape=n,this.variableNames=["x","indices"],this.outputShape=o;const r=(0,e.getCoordsDataType)(s.length),i=(0,e.getCoordsDataType)(o.length),a=this.sliceDim>1?"strides[j]":"strides",d=(0,e.getCoordsDataType)(n.length),u=n.length>1?"paramsShape[j]":"paramsShape";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n        ${d} paramsShape = ${d}(${this.paramsShape});\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            out_of_bounds = out_of_bounds || index < 0;\n            out_of_bounds = out_of_bounds || index >= ${u};\n            flattenIndex += index * ${a};\n          }\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}exports.GatherNDProgram=t;
},{"./shader_compiler":"ELB4"}],"ghL0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherNd=a,exports.gatherNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../gather_nd_gpu"),t=require("../kernel_utils/shared"),s=require("./Reshape");function a(a){const{inputs:n,backend:p}=a,{params:d,indices:o}=n,i=o.shape,u=i[i.length-1],h=e.util.sizeFromShape(d.shape),[c,l,f,g]=e.backend_util.prepareAndValidate(d,o),m=(0,s.reshape)({inputs:{x:o},backend:p,attrs:{shape:[l,u]}}),b=(0,s.reshape)({inputs:{x:d},backend:p,attrs:{shape:[e.util.sizeFromShape(d.shape)/f,f]}});if(p.shouldExecuteOnCPU([d,o])||"string"===d.dtype){const e=p.readSync(o.dataId),r=p.bufferSync(d),s=(0,t.gatherNdImplCPU)(e,r,d.dtype,l,u,f,g,d.shape,h);return p.makeTensorInfo(c,d.dtype,s.values)}const k=new r.GatherNDProgram(u,g,[l,f],d.shape),I=p.runWebGLProgram(k,[b,m],b.dtype),x=(0,s.reshape)({inputs:{x:I},backend:p,attrs:{shape:c}});return p.disposeIntermediateTensorInfo(m),p.disposeIntermediateTensorInfo(b),p.disposeIntermediateTensorInfo(I),x}const n={kernelName:e.GatherNd,backendName:"webgl",kernelFunc:a};exports.gatherNdConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../gather_nd_gpu":"wjRR","../kernel_utils/shared":"Q6tG","./Reshape":"Sp48"}],"UjbW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GatherProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s){this.variableNames=["A","indices"],this.outputShape=s,this.rank=s.length;const n=(0,e.getCoordsDataType)(this.rank),i=r(t,2);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${i}));\n      }\n    `}}function r(e,t){const r=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let n=0;n<e.length;n++)2===n?s.push("index"):s.push(`${r[n]}`);return s.join()}exports.GatherProgram=t;
},{"./shader_compiler":"ELB4"}],"T69H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2=a,exports.gatherV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../gather_gpu"),r=require("../kernel_utils/shared"),s=require("./Reshape");function a(a){const{inputs:n,backend:i,attrs:o}=a,{x:h,indices:p}=n,{axis:u,batchDims:c}=o,d=e.util.parseAxisParam(u,h.shape)[0];if((0,e.env)().get("DEBUG")){const t=i.readSync(p.dataId),r=h.shape[d];for(let s=0;s<t.length;++s){const a=t[s];e.util.assert(a<=r-1&&a>=0,()=>`GatherV2: the index value ${a} is not in [0, ${r-1}]`)}}const l=e.backend_util.segment_util.collectGatherOpShapeInfo(h,p,d,c),f=e.util.sizeFromShape(p.shape),b=[],S=(0,s.reshape)({inputs:{x:h},backend:i,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),g=(0,s.reshape)({inputs:{x:p},backend:i,attrs:{shape:[l.batchSize,f/l.batchSize]}});b.push(S),b.push(g);const m=[l.batchSize,l.outerSize,f/l.batchSize,l.sliceSize];if(i.shouldExecuteOnCPU([h,p])||"string"===h.dtype){const e=i.bufferSync(g),t=i.bufferSync(S),s=(0,r.gatherV2ImplCPU)(t,e,m);return b.forEach(e=>i.disposeIntermediateTensorInfo(e)),i.makeTensorInfo(l.outputShape,s.dtype,s.values)}const x=new t.GatherProgram(S.shape,m),z=i.runWebGLProgram(x,[S,g],S.dtype);b.push(z);const k=(0,s.reshape)({inputs:{x:z},backend:i,attrs:{shape:l.outputShape}});return b.forEach(e=>i.disposeIntermediateTensorInfo(e)),k}const n={kernelName:e.GatherV2,backendName:"webgl",kernelFunc:a};exports.gatherV2Config=n;
},{"@tensorflow/tfjs-core":"nPFy","../gather_gpu":"UjbW","../kernel_utils/shared":"Q6tG","./Reshape":"Sp48"}],"mwyr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterConfig=exports.greater=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const n="return float(a > b);",a="\n  return vec4(greaterThan(a, b));\n",o=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:a,cpuKernelImpl:t.greaterImplCPU,dtype:"bool"});exports.greater=o;const l={kernelName:e.Greater,backendName:"webgl",kernelFunc:o};exports.greaterConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"g4Ro":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualConfig=exports.greaterEqual=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const a="return float(a >= b);",l="\n  return vec4(greaterThanEqual(a, b));\n",n=(0,r.binaryKernelFunc)({opSnippet:a,packedOpSnippet:l,dtype:"bool",cpuKernelImpl:t.greaterEqualImplCPU});exports.greaterEqual=n;const u={kernelName:e.GreaterEqual,backendName:"webgl",kernelFunc:n};exports.greaterEqualConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"ILIc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=r,exports.ifftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./FFT_impl");function r(e){const{inputs:r,backend:n}=e,{input:o}=r;return(0,t.fftImpl)(o,!0,n)}const n={kernelName:e.IFFT,backendName:"webgl",kernelFunc:r};exports.ifftConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./FFT_impl":"yccJ"}],"ImJM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteConfig=exports.isFinite=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../kernel_utils/kernel_funcs_utils");const n="return float(!isnan(x) && !isinf(x));",t=(0,i.unaryKernelFunc)({opSnippet:n,dtype:"bool"});exports.isFinite=t;const r={kernelName:e.IsFinite,backendName:"webgl",kernelFunc:t};exports.isFiniteConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"obhn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfConfig=exports.isInf=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return float(isinf(x));",s=(0,n.unaryKernelFunc)({opSnippet:r,dtype:"bool"});exports.isInf=s;const o={kernelName:e.IsInf,backendName:"webgl",kernelFunc:s};exports.isInfConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"sBfI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNConfig=exports.isNaN=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return float(isnan(x));",s=(0,r.unaryKernelFunc)({opSnippet:n,dtype:"bool"});exports.isNaN=s;const o={kernelName:e.IsNan,backendName:"webgl",kernelFunc:s};exports.isNaNConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"VmyK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessConfig=exports.less=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils"),r=require("../kernel_utils/shared");const n="return float(a < b);",l="\n  return vec4(lessThan(a, b));\n",t=(0,s.binaryKernelFunc)({opSnippet:n,packedOpSnippet:l,cpuKernelImpl:r.lessImplCPU,dtype:"bool"});exports.less=t;const o={kernelName:e.Less,backendName:"webgl",kernelFunc:t};exports.lessConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"JSht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqualConfig=exports.lessEqual=exports.LESS_EQUAL_PACKED=exports.LESS_EQUAL=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/kernel_funcs_utils"),r=require("../kernel_utils/shared");const l="return float(a <= b);";exports.LESS_EQUAL=l;const t="\n  return vec4(lessThanEqual(a, b));\n";exports.LESS_EQUAL_PACKED=t;const n=(0,s.binaryKernelFunc)({opSnippet:l,packedOpSnippet:t,cpuKernelImpl:r.lessEqualImplCPU,dtype:"bool"});exports.lessEqual=n;const o={kernelName:e.LessEqual,backendName:"webgl",kernelFunc:n};exports.lessEqualConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"pItX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linSpace=r,exports.linSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared");function r(e){const{backend:r,attrs:t}=e,{start:o,stop:s,num:a}=t,l=(0,n.linSpaceImplCPU)(o,s,a);return r.makeTensorInfo([l.length],"float32",l)}const t={kernelName:e.LinSpace,backendName:"webgl",kernelFunc:r};exports.linSpaceConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"Xy28":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logConfig=exports.log=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../kernel_utils/shared");const l=r.CHECK_NAN_SNIPPET_UNARY+"\n  return x < 0.0 ? 0./0. : log(x);\n",s="\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:l,packedOpSnippet:s,cpuKernelImpl:n.logImplCPU});exports.log=t;const u={kernelName:e.Log,backendName:"webgl",kernelFunc:t};exports.logConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"nXyc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pConfig=exports.log1p=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o=r.CHECK_NAN_SNIPPET_UNARY+"\n  return log(1.0 + x);\n",n=(0,r.unaryKernelFunc)({opSnippet:o});exports.log1p=n;const t={kernelName:e.Log1p,backendName:"webgl",kernelFunc:n};exports.log1pConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"wtB0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAndConfig=exports.logicalAnd=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return float(a >= 1.0 && b >= 1.0);",l="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",o=(0,n.binaryKernelFunc)({opSnippet:r,packedOpSnippet:l,dtype:"bool"});exports.logicalAnd=o;const t={kernelName:e.LogicalAnd,backendName:"webgl",kernelFunc:o};exports.logicalAndConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"hLJl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNotConfig=exports.logicalNot=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../kernel_utils/kernel_funcs_utils");const r="return float(!(x >= 1.0));",t=(0,o.unaryKernelFunc)({opSnippet:r});exports.logicalNot=t;const l={kernelName:e.LogicalNot,backendName:"webgl",kernelFunc:t};exports.logicalNotConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"qehJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOrConfig=exports.logicalOr=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return float(a >= 1.0 || b >= 1.0);",l="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",o=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:l,dtype:"bool"});exports.logicalOr=o;const t={kernelName:e.LogicalOr,backendName:"webgl",kernelFunc:o};exports.logicalOrConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"Kgde":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lrn=exports.LRNConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../lrn_gpu"),n=require("../lrn_packed_gpu");const t=t=>{const{inputs:o,backend:a,attrs:s}=t,{x:p}=o,{depthRadius:u,bias:l,alpha:c,beta:i}=s,d=(0,e.env)().getBool("WEBGL_PACK_NORMALIZATION")?new n.LRNPackedProgram(p.shape,u,l,c,i):new r.LRNProgram(p.shape,u,l,c,i);return a.runWebGLProgram(d,[p],p.dtype)};exports.lrn=t;const o={kernelName:e.LRN,backendName:"webgl",kernelFunc:t};exports.LRNConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../lrn_gpu":"DLwU","../lrn_packed_gpu":"sdWO"}],"rjKW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lrnGrad=exports.LRNGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../lrn_grad_gpu");const a=e=>{const{inputs:a,backend:t,attrs:n}=e,{x:o,y:s,dy:d}=a,{depthRadius:p,bias:u,alpha:i,beta:l}=n,c=new r.LRNGradProgram(o.shape,p,u,i,l);return t.runWebGLProgram(c,[o,s,d],o.dtype)};exports.lrnGrad=a;const t={kernelName:e.LRNGrad,backendName:"webgl",kernelFunc:a};exports.LRNGradConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../lrn_grad_gpu":"xmP3"}],"M9aP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxImpl=t;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/reduce"),s=require("../kernels/Reshape");function t(t,a,n,i){const o=e.util.sizeFromShape(a),p=e.util.sizeFromShape(t.shape)/o,u=(0,s.reshape)({inputs:{x:t},attrs:{shape:[p,o]},backend:i}),d=(0,r.reduce)(u,t.dtype,"max",i),c=(0,s.reshape)({inputs:{x:d},attrs:{shape:n},backend:i});return i.disposeIntermediateTensorInfo(u),i.disposeIntermediateTensorInfo(d),c}
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/reduce":"PXUT","../kernels/Reshape":"Sp48"}],"jXmi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=n,exports.maxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),a=require("./Max_impl"),s=require("./Transpose_impl");function n(n){const{inputs:r,backend:o,attrs:l}=n,{x:i}=r,{reductionIndices:p,keepDims:d}=l,u=i.shape.length,c=e.util.parseAxisParam(p,i.shape);let m=c;const x=e.backend_util.getAxesPermutation(m,u),I=null!=x,f=o.shouldExecuteOnCPU([i]);let h=i;if(I){if(f){const e=o.texData.get(h.dataId).values,t=new Array(u);for(let s=0;s<t.length;s++)t[s]=i.shape[x[s]];const a=(0,s.transposeImplCPU)(e,i.shape,i.dtype,x,t);h=o.makeTensorInfo(t,i.dtype),o.texData.get(h.dataId).values=a}else h=(0,s.transposeImpl)(i,x,o);m=e.backend_util.getInnerMostAxes(m.length,u)}e.backend_util.assertAxesAreInnerMostDims("max",m,u);const[k,g]=e.backend_util.computeOutAndReduceShapes(h.shape,m);let _,b=k;if(d&&(b=e.backend_util.expandShapeToKeepDim(k,c)),f){const a=o.texData.get(h.dataId).values,s=(0,t.maxImplCPU)(a,e.util.sizeFromShape(g),b,i.dtype);_=o.makeTensorInfo(b,i.dtype),o.texData.get(_.dataId).values=s}else _=(0,a.maxImpl)(h,g,b,o);return I&&o.disposeIntermediateTensorInfo(h),_}const r={kernelName:e.Max,backendName:"webgl",kernelFunc:n};exports.maxConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","./Max_impl":"M9aP","./Transpose_impl":"gE5d"}],"OOyA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumConfig=exports.maximum=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),n=require("../binaryop_packed_gpu"),i=require("../kernel_utils/kernel_funcs_utils"),u=require("../kernel_utils/shared");const a=r.CHECK_NAN_SNIPPET+"\n  return max(a, b);\n",m="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+n.CHECK_NAN_SNIPPET+"\n  return result;\n",s=(0,i.binaryKernelFunc)({opSnippet:a,packedOpSnippet:m,cpuKernelImpl:u.maximumImplCPU});exports.maximum=s;const t={kernelName:e.Maximum,backendName:"webgl",kernelFunc:s};exports.maximumConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_gpu":"apo2","../binaryop_packed_gpu":"N9H6","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"mfXW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=i,exports.maxPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../pool_gpu"),o=require("../webgl_util"),r=require("./Identity");function i(i){const{inputs:n,backend:s,attrs:a}=i,{x:l}=n;(0,o.assertNotComplex)(l,"maxPool");const{filterSize:u,strides:d,pad:c,dimRoundingMode:p}=a;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const m=e.backend_util.computePool2DInfo(l.shape,u,d,1,c,p);if(1===m.filterWidth&&1===m.filterHeight&&e.util.arraysEqual(m.inShape,m.outShape))return(0,r.identity)({inputs:{x:l},backend:s});const x=new t.Pool2DProgram(m,"max",!1);return s.runWebGLProgram(x,[l],l.dtype)}const n={kernelName:e.MaxPool,backendName:"webgl",kernelFunc:i};exports.maxPoolConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../pool_gpu":"DAMt","../webgl_util":"wqV5","./Identity":"kxbQ"}],"bVhq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DConfig=void 0,exports.maxPool3d=r;var e=require("@tensorflow/tfjs-core"),o=require("../pool_gpu");function r(r){const{inputs:t,backend:n,attrs:a}=r,{x:s}=t,{filterSize:i,strides:l,pad:d,dataFormat:u,dimRoundingMode:p}=a,c=e.backend_util.computePool3DInfo(s.shape,i,l,[1,1,1],d,p,u),m=new o.Pool3DProgram(c,"max",!1);return n.runWebGLProgram(m,[s],s.dtype)}const t={kernelName:e.MaxPool3D,backendName:"webgl",kernelFunc:r};exports.maxPool3DConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../pool_gpu":"DAMt"}],"EIGX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DGrad=a,exports.maxPool3DGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../max_pool_backprop_gpu"),r=require("../pool_gpu");function a(a){const{inputs:n,backend:t,attrs:p}=a,{dy:d,input:i}=n,s=i,{filterSize:u,strides:l,pad:m,dimRoundingMode:c}=p,P=e.backend_util.computePool3DInfo(s.shape,u,l,[1,1,1],m,c),x=new r.Pool3DProgram(P,"max",!0),g=t.runWebGLProgram(x,[s],s.dtype),f=new o.MaxPool3DBackpropProgram(P),b=t.runWebGLProgram(f,[d,g],s.dtype);return t.disposeIntermediateTensorInfo(g),b}const n={kernelName:e.MaxPool3DGrad,backendName:"webgl",kernelFunc:a};exports.maxPool3DGradConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../max_pool_backprop_gpu":"trD0","../pool_gpu":"DAMt"}],"eepi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGrad=a,exports.maxPoolGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../max_pool_backprop_gpu"),r=require("../pool_gpu"),t=require("../webgl_util");function a(a){const{inputs:n,backend:p,attrs:s}=a,{dy:u,input:d,output:i}=n,l=d;(0,t.assertNotComplex)([d,i],"maxPoolGrad");const{filterSize:m,strides:c,pad:x,dimRoundingMode:P}=s,g=e.backend_util.computePool2DInfo(l.shape,m,c,1,x,P),b=new r.Pool2DProgram(g,"max",!0),f=p.runWebGLProgram(b,[l],l.dtype),_=new o.MaxPool2DBackpropProgram(g),k=p.runWebGLProgram(_,[u,f],l.dtype);return p.disposeIntermediateTensorInfo(f),k}const n={kernelName:e.MaxPoolGrad,backendName:"webgl",kernelFunc:a};exports.maxPoolGradConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../max_pool_backprop_gpu":"trD0","../pool_gpu":"DAMt","../webgl_util":"wqV5"}],"xySM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxImpl=o;var r=require("../pool_gpu");function o(o,e,t,a){let l=new r.Pool2DProgram(t,"max",!1);const m=a.runWebGLProgram(l,[o],"float32");return l=new r.Pool2DProgram(t,"max",!0,!0,e),[m,a.runWebGLProgram(l,[o],"float32")]}
},{"../pool_gpu":"DAMt"}],"HBxI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./MaxPoolWithArgmax_impl");const r={kernelName:e.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:r,attrs:o,backend:i})=>{const{x:a}=r,{filterSize:n,strides:s,pad:l,includeBatchInIndex:u}=o,d=i;e.util.assert(4===a.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${a.shape.length}.`);const m=[1,1];e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(s,m),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '${m}'`);const x=e.backend_util.computePool2DInfo(a.shape,n,s,m,l),[c,h]=(0,t.maxPoolWithArgmaxImpl)(a,u,x,d);return[c,h]}};exports.maxPoolWithArgmaxConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./MaxPoolWithArgmax_impl":"xySM"}],"YLSE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanImpl=t;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/reduce"),s=require("../kernels/Reshape");function t(t,n,a,o){const i=e.util.sizeFromShape(n),p=e.util.sizeFromShape(t.shape)/i,u=(0,s.reshape)({inputs:{x:t},attrs:{shape:[p,i]},backend:o}),d=(0,r.reduce)(u,"float32","mean",o),l=(0,s.reshape)({inputs:{x:d},attrs:{shape:a},backend:o});return o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(d),l}
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/reduce":"PXUT","../kernels/Reshape":"Sp48"}],"Nsgk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Mean_impl"),s=require("./Transpose_impl");const n={kernelName:e.Mean,backendName:"webgl",kernelFunc:({inputs:n,attrs:a,backend:r})=>{const{x:o}=n,{keepDims:l,axis:p}=a,i=r,u=o.shape.length,c=e.util.parseAxisParam(p,o.shape);let d=c;const m=e.backend_util.getAxesPermutation(d,u),x=null!=m,f=i.shouldExecuteOnCPU([o]),h=[];let k=o;if(x){if(f){const e=i.texData.get(k.dataId).values,t=new Array(u);for(let s=0;s<t.length;s++)t[s]=o.shape[m[s]];const n=(0,s.transposeImplCPU)(e,o.shape,o.dtype,m,t);k=i.makeTensorInfo(t,o.dtype),i.texData.get(k.dataId).values=n}else k=(0,s.transposeImpl)(o,m,i);h.push(k),d=e.backend_util.getInnerMostAxes(d.length,u)}e.backend_util.assertAxesAreInnerMostDims("sum",d,u);const[g,I]=e.backend_util.computeOutAndReduceShapes(k.shape,d);let b=g;l&&(b=e.backend_util.expandShapeToKeepDim(g,c));const _=(0,t.meanImpl)(k,I,b,i);for(const e of h)i.disposeIntermediateTensorInfo(e);return _}};exports.meanConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./Mean_impl":"YLSE","./Transpose_impl":"gE5d"}],"DJm8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=r,exports.minConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("./Reshape"),n=require("./Transpose");function r(r){const{inputs:a,backend:i,attrs:p}=r,{x:o}=a,{axis:u,keepDims:d}=p,l=o.shape.length,c=e.util.parseAxisParam(u,o.shape);let m=c;const h=e.backend_util.getAxesPermutation(m,l);let k=o;null!=h&&(k=(0,n.transpose)({inputs:{x:o},backend:i,attrs:{perm:h}}),m=e.backend_util.getInnerMostAxes(m.length,o.shape.length)),e.backend_util.assertAxesAreInnerMostDims("min",m,l);const[x,b]=e.backend_util.computeOutAndReduceShapes(k.shape,m),f=e.util.sizeFromShape(b),g=(0,t.reshape)({inputs:{x:k},backend:i,attrs:{shape:[-1,f]}}),I=(0,s.reduce)(g,g.dtype,"min",i);let _;if(d){const s=e.backend_util.expandShapeToKeepDim(x,c);_=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:s}})}else _=(0,t.reshape)({inputs:{x:I},backend:i,attrs:{shape:x}});return i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(I),null!=h&&i.disposeIntermediateTensorInfo(k),_}const a={kernelName:e.Min,backendName:"webgl",kernelFunc:r};exports.minConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/reduce":"PXUT","./Reshape":"Sp48","./Transpose":"zUf2"}],"cmHN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumConfig=exports.minimum=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu"),i=require("../kernel_utils/kernel_funcs_utils"),u=require("../kernel_utils/shared");const m=n.CHECK_NAN_SNIPPET+"\n  return min(a, b);\n",s="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+r.CHECK_NAN_SNIPPET+"\n  return result;\n",t=(0,i.binaryKernelFunc)({opSnippet:m,packedOpSnippet:s,cpuKernelImpl:u.minimumImplCPU});exports.minimum=t;const p={kernelName:e.Minimum,backendName:"webgl",kernelFunc:t};exports.minimumConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_gpu":"apo2","../binaryop_packed_gpu":"N9H6","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"oZll":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirrorPadProgram=void 0;var t=require("./shader_compiler");class o{constructor(o,n,r){this.variableNames=["x"],this.outputShape=n.map((t,n)=>t[0]+o[n]+t[1]);const e=o.length,i=(0,t.getCoordsDataType)(e),s=n.map(t=>t[0]).join(","),u=n.map((t,n)=>t[0]+o[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e),d="reflect"===r?0:1;this.userCode=1!==e?`\n      ${i} start = ${i}(${s});\n      ${i} end = ${i}(${u});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${e}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${d};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${d};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${a}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${u};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${d};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${d};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}exports.MirrorPadProgram=o;
},{"./shader_compiler":"ELB4"}],"uuqC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirrorPadPackedProgram=void 0;var e=require("./packing_util"),n=require("./shader_compiler");class t{constructor(t,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map((e,n)=>e[0]+t[n]+e[1]);const o=t.length,u=(0,n.getCoordsDataType)(o),$=r.map(e=>e[0]).join(","),c=r.map((e,n)=>e[0]+t[n]).join(","),a=(0,e.getChannels)("rc",o),i=(0,e.getChannels)("source",o),l=`${a[o-1]} < ${this.outputShape[o-1]}`,g=1===o?"source":`vec2(${i.slice(-2).join()})`,p="reflect"===s?0:1;let h="";if(1===o){const e=`\n        ${u} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${p};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${p};\n        }\n        source -= start;\n      `;h=`\n        ${u} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${i.join()}), ${g});\n        ${a[o-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${i.join()}), ${g});\n        }\n      `}else{const e=`\n        ${u} source = rc;\n        ${u} lt = ${u}(lessThan(source, start));\n        ${u} gte = ${u}(greaterThanEqual(source, end));\n        ${u} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${p}) +\n                gte * ((end - 1) * 2 - source + ${p});\n        source -= start;\n      `;h=`\n        ${u} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${i.join()}), ${g});\n        ${a[o-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${i.join()}), ${g});\n        }\n        rc = outputLoc;\n        ${a[o-2]} += 1;\n        if(${a[o-2]} < ${this.outputShape[o-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${i.join()}), ${g});\n          ${a[o-1]} += 1;\n          if(${l}) {\n            ${e}\n            result[3] = getChannel(getX(${i.join()}), ${g});\n          }\n        }\n      `}this.userCode=`\n      const ${u} start = ${u}(${$});\n      const ${u} end = ${u}(${c});\n\n      void main() {\n        ${u} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}exports.MirrorPadPackedProgram=t;
},{"./packing_util":"Axn8","./shader_compiler":"ELB4"}],"uZGq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPadKernelFunc=exports.mirrorPadConfig=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../mirror_pad_gpu"),o=require("../mirror_pad_packed_gpu");const a=({inputs:a,backend:n,attrs:d})=>{const{x:t}=a,{paddings:i,mode:s}=d,p=(0,r.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new o.MirrorPadPackedProgram(t.shape,i,s):new e.MirrorPadProgram(t.shape,i,s);return n.runWebGLProgram(p,[t],t.dtype)};exports.mirrorPadKernelFunc=a;const n={kernelName:r.MirrorPad,backendName:"webgl",kernelFunc:a};exports.mirrorPadConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../mirror_pad_gpu":"oZll","../mirror_pad_packed_gpu":"uuqC"}],"QpmY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modConfig=exports.mod=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_packed_gpu"),n=require("../kernel_utils/kernel_funcs_utils");const o="if (b == 0.0) return NAN;\n  return mod(a, b);",t="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+r.CHECK_NAN_SNIPPET+"\n  return result;\n",s=(0,n.binaryKernelFunc)({opSnippet:o,packedOpSnippet:t});exports.mod=s;const u={kernelName:e.Mod,backendName:"webgl",kernelFunc:s};exports.modConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_packed_gpu":"N9H6","../kernel_utils/kernel_funcs_utils":"ANbB"}],"cQ4X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.realDivConfig=exports.realDiv=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",l=(0,n.binaryKernelFunc)({opSnippet:r,packedOpSnippet:t,checkOutOfBounds:!0});exports.realDiv=l;const u={kernelName:e.RealDiv,backendName:"webgl",kernelFunc:l};exports.realDivConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"mft5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subConfig=exports.sub=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),s=require("../kernel_utils/shared");const n="return a - b;",u=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:n,supportsComplex:!0,cpuKernelImpl:s.subImplCPU});exports.sub=u;const t={kernelName:e.Sub,backendName:"webgl",kernelFunc:u};exports.subConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"LXdb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=o,exports.softmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Exp"),t=require("./Max"),n=require("./RealDiv"),r=require("./Reshape"),a=require("./Sub"),i=require("./Sum");function o(o){const{inputs:p,backend:d,attrs:u}=o,{logits:m}=p,{dim:x}=u,c=e.util.parseAxisParam([x],m.shape),b=(0,t.max)({inputs:{x:m},backend:d,attrs:{reductionIndices:c,keepDims:!1}}),f=e.backend_util.expandShapeToKeepDim(b.shape,c),k=(0,r.reshape)({inputs:{x:b},backend:d,attrs:{shape:f}}),I=(0,a.sub)({inputs:{a:m,b:k},backend:d}),l=(0,s.exp)({inputs:{x:I},backend:d}),h=(0,i.sum)({inputs:{x:l},backend:d,attrs:{axis:c,keepDims:!1}}),q=(0,r.reshape)({inputs:{x:h},backend:d,attrs:{shape:f}}),T=(0,n.realDiv)({inputs:{a:l,b:q},backend:d});return d.disposeIntermediateTensorInfo(b),d.disposeIntermediateTensorInfo(k),d.disposeIntermediateTensorInfo(I),d.disposeIntermediateTensorInfo(l),d.disposeIntermediateTensorInfo(h),d.disposeIntermediateTensorInfo(q),T}const p={kernelName:e.Softmax,backendName:"webgl",kernelFunc:o};exports.softmaxConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","./Exp":"dncg","./Max":"jXmi","./RealDiv":"cQ4X","./Reshape":"Sp48","./Sub":"mft5","./Sum":"Snxr"}],"hGiK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=o,exports.multinomialConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../multinomial_gpu"),n=require("./Softmax");function o(e){const{inputs:o,backend:i,attrs:r}=e,{logits:s}=o,{numSamples:a,seed:l,normalized:m}=r,u=m?s:(0,n.softmax)({inputs:{logits:s},backend:i,attrs:{dim:s.shape.length-1}}),p=u.shape[0],d=u.shape[1],c=new t.MultinomialProgram(p,d,a),f=[[l]],g=i.runWebGLProgram(c,[u],"int32",f);return m||i.disposeIntermediateTensorInfo(u),g}const i={kernelName:e.Multinomial,backendName:"webgl",kernelFunc:o};exports.multinomialConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../multinomial_gpu":"j5oG","./Softmax":"LXdb"}],"WpNF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=u,exports.negConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),n=require("../unaryop_gpu"),t=require("../unaryop_packed_gpu");const s=n.CHECK_NAN_SNIPPET+"\n  return -x;\n",a="\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";function u(u){const{inputs:o,backend:l}=u,{x:p}=o;if(l.shouldExecuteOnCPU([p])){const e=l.texData.get(p.dataId),[n,t]=(0,r.negImplCPU)(e.values,p.shape,p.dtype);return l.makeTensorInfo(t,p.dtype,n)}let g;return g=(0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new t.UnaryOpPackedProgram(p.shape,a):new n.UnaryOpProgram(p.shape,s),l.runWebGLProgram(g,[p],p.dtype)}const o={kernelName:e.Neg,backendName:"webgl",kernelFunc:u};exports.negConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../unaryop_gpu":"J9Rr","../unaryop_packed_gpu":"gjas"}],"bxCL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3=s,exports.nonMaxSuppressionV3Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV3Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:c,scoreThreshold:u}=t,d=r.readSync(a.dataId),l=r.readSync(i.dataId),{selectedIndices:x}=n(d,l,p,c,u);return r.makeTensorInfo([x.length],"int32",new Int32Array(x))}const o={kernelName:e.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV3Config=o;
},{"@tensorflow/tfjs-core":"nPFy"}],"qb99":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV4=s,exports.nonMaxSuppressionV4Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV4Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:c}=t,l=r.readSync(a.dataId),x=r.readSync(i.dataId),{selectedIndices:S,validOutputs:f}=n(l,x,p,u,d,c);return[r.makeTensorInfo([S.length],"int32",new Int32Array(S)),r.makeTensorInfo([],"int32",new Int32Array([f]))]}const o={kernelName:e.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV4Config=o;
},{"@tensorflow/tfjs-core":"nPFy"}],"LkNa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV5=s,exports.nonMaxSuppressionV5Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV5Impl;function s(s){e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:o,backend:r,attrs:t}=s,{boxes:a,scores:i}=o,{maxOutputSize:p,iouThreshold:l,scoreThreshold:c,softNmsSigma:d}=t,u=r.readSync(a.dataId),x=r.readSync(i.dataId),f=p,S=l,k=c,m=d,{selectedIndices:h,selectedScores:I}=n(u,x,f,S,k,m);return[r.makeTensorInfo([h.length],"int32",new Int32Array(h)),r.makeTensorInfo([I.length],"float32",new Float32Array(I))]}const o={kernelName:e.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:s};exports.nonMaxSuppressionV5Config=o;
},{"@tensorflow/tfjs-core":"nPFy"}],"WJtm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHotConfig=exports.oneHot=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../onehot_gpu"),t=require("./Reshape");const n=n=>{const{inputs:r,backend:s,attrs:a}=n,{indices:p}=r,{depth:i,onValue:u,offValue:d}=a,c=e.util.sizeFromShape(p.shape),h=new o.OneHotProgram(c,i,u,d),f=(0,t.reshape)({inputs:{x:p},backend:s,attrs:{shape:[c]}}),l=s.runWebGLProgram(h,[f],p.dtype);s.disposeIntermediateTensorInfo(f);const b=[...p.shape,i],m=(0,t.reshape)({inputs:{x:l},backend:s,attrs:{shape:b}});return s.disposeIntermediateTensorInfo(l),m};exports.oneHot=n;const r={kernelName:e.OneHot,backendName:"webgl",kernelFunc:n};exports.oneHotConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../onehot_gpu":"Nv1m","./Reshape":"Sp48"}],"ctWw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=i,exports.zerosLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Complex"),r=require("./Fill"),t=require("./Imag"),s=require("./Real");function i(e){const{inputs:o,backend:a}=e,{x:p}=o;if("complex64"===p.dtype){const e=(0,s.real)({inputs:{input:p},backend:a}),r=i({inputs:{x:e},backend:a}),o=(0,t.imag)({inputs:{input:p},backend:a}),d=i({inputs:{x:o},backend:a}),u=(0,n.complex)({inputs:{real:r,imag:d},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(r),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(d),u}return(0,r.fill)({attrs:{shape:p.shape,dtype:p.dtype,value:"string"===p.dtype?"":0},backend:a})}const o={kernelName:e.ZerosLike,backendName:"webgl",kernelFunc:i};exports.zerosLikeConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","./Complex":"UYfu","./Fill":"BnXr","./Imag":"qnx7","./Real":"Ia5k"}],"VfxS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=o,exports.onesLikeConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Complex"),r=require("./Fill"),i=require("./Imag"),s=require("./Real"),t=require("./ZerosLike");function o(e){const{inputs:p,backend:a}=e,{x:d}=p;if("string"===d.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===d.dtype){const e=(0,s.real)({inputs:{input:d},backend:a}),r=o({inputs:{x:e},backend:a}),p=(0,i.imag)({inputs:{input:d},backend:a}),u=(0,t.zerosLike)({inputs:{x:p},backend:a}),c=(0,n.complex)({inputs:{real:r,imag:u},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(r),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(u),c}return(0,r.fill)({attrs:{shape:d.shape,dtype:d.dtype,value:1},backend:a})}const p={kernelName:e.OnesLike,backendName:"webgl",kernelFunc:o};exports.onesLikeConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","./Complex":"UYfu","./Fill":"BnXr","./Imag":"qnx7","./Real":"Ia5k","./ZerosLike":"ctWw"}],"yVNv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pack=a,exports.packConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat"),s=require("./ExpandDims");function a(a){const{inputs:n,backend:r,attrs:c}=a,{axis:i}=c;if(1===n.length)return(0,s.expandDims)({inputs:{input:n[0]},backend:r,attrs:{dim:i}});const o=n[0].shape,p=n[0].dtype;n.forEach(t=>{e.util.assertShapesMatch(o,t.shape,"All tensors passed to stack must have matching shapes"),e.util.assert(p===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],d=n.map(e=>{const t=(0,s.expandDims)({inputs:{input:e},backend:r,attrs:{dim:i}});return u.push(t),t}),h=(0,t.concat)({inputs:d,backend:r,attrs:{axis:i}});return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),h}const n={kernelName:e.Pack,backendName:"webgl",kernelFunc:a};exports.packConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","./Concat":"Pc9H","./ExpandDims":"e8Qs"}],"i5XF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PadProgram=void 0;var t=require("./shader_compiler");class e{constructor(e,n,o){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((t,n)=>t[0]+e[n]+t[1]);const s=e.length,a=(0,t.getCoordsDataType)(s),r=n.map(t=>t[0]).join(","),u=n.map((t,n)=>t[0]+e[n]).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);this.userCode=1!==s?`\n      ${a} start = ${a}(${r});\n      ${a} end = ${a}(${u});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${a} coords = outC - start;\n          setOutput(getX(${i}));\n        }\n      }\n    `:`\n        int start = ${r};\n        int end = ${u};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}exports.PadProgram=e;
},{"./shader_compiler":"ELB4"}],"UGaD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PadPackedProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class n{constructor(n,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=r.map((t,e)=>t[0]+n[e]+t[1]);const a=n.length,o=(0,e.getCoordsDataType)(a),u=r.map(t=>t[0]).join(","),c=r.map((t,e)=>t[0]+n[e]).join(","),i=(0,t.getChannels)("rc",a),p=(0,t.getChannels)("source",a),$=`${i[a-1]} < ${this.outputShape[a-1]}`,l=1===a?"source":`vec2(${p.slice(-2).join()})`,h=[`${o} rc = outputLoc;`,`${i[a-1]} += 1;\n       if(${$}) {\n      `,1===a?"":`}\n       rc = outputLoc;\n       ${i[a-2]} += 1;\n       if(${i[a-2]} < ${this.outputShape[a-2]}) {`,1===a?"":`  ${i[a-1]} += 1;\n         if(${$}) {`],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let t=0,e=1===a?2:4;t<e;t++)g+=`\n        ${h[t]}\n        if (${d}) {\n          result[${t}] = float(value);\n        } else {\n          ${o} source = rc - start;\n          result[${t}] = getChannel(getX(${p.join()}), ${l});\n        }\n      `;g+=1===a?"} ":"}}",this.userCode=`\n      const ${o} start = ${o}(${u});\n      const ${o} end = ${o}(${c});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${g}\n        setOutput(result);\n      }\n    `}}exports.PadPackedProgram=n;
},{"./packing_util":"Axn8","./shader_compiler":"ELB4"}],"geRf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2Config=exports.padV2=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../pad_gpu"),a=require("../pad_packed_gpu"),t=require("./Fill");const p=p=>{const{inputs:s,backend:n,attrs:o}=p,{x:d}=s,{paddings:u,constantValue:i}=o;if(0===e.util.sizeFromShape(d.shape)){const e=u.map((e,r)=>e[0]+d.shape[r]+e[1]);return(0,t.fill)({backend:n,attrs:{shape:e,value:i,dtype:d.dtype}})}const c=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a.PadPackedProgram(d.shape,u,i):new r.PadProgram(d.shape,u,i),l=[[i]];return n.runWebGLProgram(c,[d],d.dtype,l)};exports.padV2=p;const s={kernelName:e.PadV2,backendName:"webgl",kernelFunc:p};exports.padV2Config=s;
},{"@tensorflow/tfjs-core":"nPFy","../pad_gpu":"i5XF","../pad_packed_gpu":"UGaD","./Fill":"BnXr"}],"RF18":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powConfig=exports.pow=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../binaryop_packed_gpu"),r=require("../kernel_utils/kernel_funcs_utils");const o="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",s="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+n.CHECK_NAN_SNIPPET+"\n  return result;\n",t=(0,r.binaryKernelFunc)({opSnippet:o,packedOpSnippet:s});exports.pow=t;const u={kernelName:e.Pow,backendName:"webgl",kernelFunc:t};exports.powConfig=u;
},{"@tensorflow/tfjs-core":"nPFy","../binaryop_packed_gpu":"N9H6","../kernel_utils/kernel_funcs_utils":"ANbB"}],"JrZP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=n,exports.prodConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/reduce"),t=require("../kernel_utils/shared"),r=require("./Reshape"),a=require("./Transpose");function n(n){const{inputs:p,backend:o,attrs:u}=n,{x:i}=p,{axis:d,keepDims:c}=u,l=i.shape.length,h=[],k=e.util.parseAxisParam(d,i.shape);let x=k;const m=e.backend_util.getAxesPermutation(x,l);let b,f=i;if(null!=m&&(f=(0,a.transpose)({inputs:{x:i},backend:o,attrs:{perm:m}}),x=e.backend_util.getInnerMostAxes(x.length,l),h.push(f)),e.backend_util.assertAxesAreInnerMostDims("prod",x,l),o.shouldExecuteOnCPU([f])){const e=o.texData.get(f.dataId).values,{outVals:s,outShape:r,outDtype:a}=(0,t.prodImplCPU)(f.shape,f.dtype,e,x);b=o.makeTensorInfo(r,a,s)}else{const[t,a]=e.backend_util.computeOutAndReduceShapes(f.shape,x),n=e.util.sizeFromShape(a),p=(0,r.reshape)({inputs:{x:f},backend:o,attrs:{shape:[-1,n]}}),u=(0,e.sumOutType)(i.dtype),d=(0,s.reduce)(p,u,"prod",o);b=(0,r.reshape)({inputs:{x:d},backend:o,attrs:{shape:t}}),h.push(p),h.push(d)}if(c){h.push(b);const s=e.backend_util.expandShapeToKeepDim(b.shape,k);b=(0,r.reshape)({inputs:{x:b},backend:o,attrs:{shape:s}})}return h.forEach(e=>o.disposeIntermediateTensorInfo(e)),b}const p={kernelName:e.Prod,backendName:"webgl",kernelFunc:n};exports.prodConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/reduce":"PXUT","../kernel_utils/shared":"Q6tG","./Reshape":"Sp48","./Transpose":"zUf2"}],"bBbq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeConfig=exports.range=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");const t=e=>{const{backend:t,attrs:n}=e,{start:s,stop:o,step:a,dtype:g}=n,l=(0,r.rangeImplCPU)(s,o,a,g);return t.makeTensorInfo([l.length],g,l)};exports.range=t;const n={kernelName:e.Range,backendName:"webgl",kernelFunc:t};exports.rangeConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"vUHw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalConfig=exports.reciprocal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o="return 1.0 / x;",c=(0,r.unaryKernelFunc)({opSnippet:o});exports.reciprocal=c;const n={kernelName:e.Reciprocal,backendName:"webgl",kernelFunc:c};exports.reciprocalConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"wBl8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluConfig=exports.relu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const u=n.CHECK_NAN_SNIPPET+"\n  return (x < 0.0) ? 0.0 : x;\n",s="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:u,packedOpSnippet:s});exports.relu=t;const l={kernelName:e.Relu,backendName:"webgl",kernelFunc:t};exports.reluConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../unaryop_gpu":"J9Rr"}],"pTN1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6Config=exports.relu6=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../unaryop_gpu");const u=n.CHECK_NAN_SNIPPET+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",s="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:u,packedOpSnippet:s});exports.relu6=t;const l={kernelName:e.Relu6,backendName:"webgl",kernelFunc:t};exports.relu6Config=l;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../unaryop_gpu":"J9Rr"}],"PgzH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=n,exports.resizeBilinearConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_bilinear_gpu"),i=require("../resize_bilinear_packed_gpu");function n(n){const{inputs:s,backend:a,attrs:o}=n,{images:t}=s,{alignCorners:l,halfPixelCenters:u,size:c}=o,[g,p]=c,_=(0,e.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new i.ResizeBilinearPackedProgram(t.shape,g,p,l,u):new r.ResizeBilinearProgram(t.shape,g,p,l,u);return a.runWebGLProgram(_,[t],"float32")}const s={kernelName:e.ResizeBilinear,backendName:"webgl",kernelFunc:n};exports.resizeBilinearConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../resize_bilinear_gpu":"BAHS","../resize_bilinear_packed_gpu":"QNLw"}],"pIYH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearGrad=i,exports.resizeBilinearGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_bilinear_backprop_gpu");function i(e){const{inputs:i,backend:a,attrs:n}=e,{images:s,dy:o}=i,{alignCorners:t}=n,p=new r.ResizeBilinearBackpropProgram(o.shape,s.shape,t);return a.runWebGLProgram(p,[o],o.dtype)}const a={kernelName:e.ResizeBilinearGrad,backendName:"webgl",kernelFunc:i};exports.resizeBilinearGradConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../resize_bilinear_backprop_gpu":"bHYm"}],"mjrE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=i,exports.resizeNearestNeighborConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_nearest_neighbor_gpu"),s=require("../resize_nearest_neighbor_packed_gpu");function i(i){const{inputs:o,backend:t,attrs:n}=i,{images:a}=o,{alignCorners:g,halfPixelCenters:N,size:b}=n,[u,p]=b,_=(0,e.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new s.ResizeNearestNeighborPackedProgram(a.shape,u,p,g,N):new r.ResizeNearestNeighborProgram(a.shape,u,p,g,N);return t.runWebGLProgram(_,[a],a.dtype)}const o={kernelName:e.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:i};exports.resizeNearestNeighborConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../resize_nearest_neighbor_gpu":"T9BX","../resize_nearest_neighbor_packed_gpu":"O3Cm"}],"esN3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighborGrad=s,exports.resizeNearestNeighborGradConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../resize_nearest_neighbor_backprop_gpu");function s(e){const{inputs:s,backend:o,attrs:a}=e,{images:t,dy:i}=s,{alignCorners:n}=a,g=new r.ResizeNearestNeigborBackpropProgram(i.shape,t.shape,n);return o.runWebGLProgram(g,[i],i.dtype)}const o={kernelName:e.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:s};exports.resizeNearestNeighborGradConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../resize_nearest_neighbor_backprop_gpu":"hkPU"}],"vUWv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReverseProgram=void 0;var e=require("./shader_compiler");class o{constructor(o,t){this.variableNames=["x"];const r=o.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=o,1===r)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${o[0]} - coord - 1));\n        }\n      `);const s=o.map((e,r)=>(e=>-1!==t.indexOf(e)&&1!==o[e]?`${o[e]} - coords[${e}] - 1`:`coords[${e}]`)(r)).join(","),n=(0,e.getCoordsDataType)(r);this.userCode=`\n      void main() {\n        ${n} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}exports.ReverseProgram=o;
},{"./shader_compiler":"ELB4"}],"UzgM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReversePackedProgram=void 0;var e=require("./packing_util"),t=require("./shader_compiler");class n{constructor(n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=n.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=n;const u=(0,e.getChannels)("rc",s),i=`${u[s-1]} + 1 < ${this.outputShape[s-1]}`,o=`${u[s-2]} + 1 < ${this.outputShape[s-2]}`,c=(0,t.getCoordsDataType)(s);function a(e){const t=n.map((t,s)=>(function(e,t){return-1!==r.indexOf(e)&&1!==n[e]?`${n[e]} - ${t[e]} - 1`:`${t[e]}`})(s,e));return`getChannel(getX(${t.join(",")}), vec2(${t.slice(-2).join(",")}))`}this.userCode=1===s?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${n[0]} - rc - 1),\n            ${n[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),\n                ${n[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${c} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return a(e)}(u.slice())};\n          if(${i}){\n            result.g = ${function(e){return e[s-1]="("+e[s-1]+" + 1)",a(e)}(u.slice())};\n          }\n          if(${o}) {\n            result.b = ${function(e){return e[s-2]="("+e[s-2]+" + 1)",a(e)}(u.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[s-1]="("+e[s-1]+" + 1)",e[s-2]="("+e[s-2]+" + 1)",a(e)}(u.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}exports.ReversePackedProgram=n;
},{"./packing_util":"Axn8","./shader_compiler":"ELB4"}],"I7Fz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=n,exports.reverseConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../reverse_gpu"),s=require("../reverse_packed_gpu"),t=require("./Identity");function n(n){const{inputs:o,backend:a,attrs:i}=n,{x:u}=o,{dims:p}=i,c=u.shape.length,d=e.util.parseAxisParam(p,u.shape);if(0===c)return(0,t.identity)({inputs:{x:u},backend:a});const v=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s.ReversePackedProgram(u.shape,d):new r.ReverseProgram(u.shape,d);return a.runWebGLProgram(v,[u],u.dtype)}const o={kernelName:e.Reverse,backendName:"webgl",kernelFunc:n};exports.reverseConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../reverse_gpu":"vUWv","../reverse_packed_gpu":"UzgM","./Identity":"kxbQ"}],"CUoT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffsetConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../rotate_gpu");const r={kernelName:e.RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:r,attrs:a,backend:o})=>{const{image:s}=r,{radians:n,fillValue:i,center:f}=a,u=o,c=new t.RotateProgram(s.shape,i),[l,p]=e.backend_util.getImageCenter(f,s.shape[1],s.shape[2]),g=[[l,p,Math.sin(n),Math.cos(n)]];return u.runWebGLProgram(c,[s],s.dtype,g)}};exports.rotateWithOffsetConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../rotate_gpu":"MkU1"}],"NvYI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundConfig=exports.round=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",o=(0,n.unaryKernelFunc)({opSnippet:r});exports.round=o;const s={kernelName:e.Round,backendName:"webgl",kernelFunc:o};exports.roundConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"nzVx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtConfig=exports.rsqrt=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),s=require("../kernel_utils/shared");const t="return inversesqrt(x);",n=(0,r.unaryKernelFunc)({opSnippet:t,cpuKernelImpl:s.rsqrtImplCPU});exports.rsqrt=n;const l={kernelName:e.Rsqrt,backendName:"webgl",kernelFunc:n};exports.rsqrtConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"KauQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,n,o,s,r,d,i=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=d;const a=(0,e.getCoordsDataType)(r.length),u=(0,e.getCoordsDataType)(d.length);let l="";1===o?l="i":2===o&&(l="i, j");const c=`getIndices(${l})`;let f="";1===s?f="i":2===s&&(f="i, coords[1]");const p=`getUpdates(${f})`,$=n>1?"strides[j]":"strides";this.userCode=`\n        ${a} strides = ${a}(${r});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${n}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${$};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${p};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}exports.ScatterProgram=t;
},{"./shader_compiler":"ELB4"}],"Zg94":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterNd=r,exports.scatterNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../scatter_gpu"),s=require("./Reshape");function r(r){const{inputs:n,backend:a,attrs:o}=r,{indices:i,updates:p}=n,{shape:d}=o,{sliceRank:c,numUpdates:u,sliceSize:l,strides:f,outputSize:h}=e.backend_util.calculateShapes(p,i,d),k=[h/l,l];if(0===h)return a.makeTensorInfo(d,i.dtype);const m=(0,s.reshape)({inputs:{x:i},backend:a,attrs:{shape:[u,c]}}),I=(0,s.reshape)({inputs:{x:p},backend:a,attrs:{shape:[u,l]}}),b=a.makeTensorInfo([],"float32",new Float32Array([0])),g=new t.ScatterProgram(u,c,m.shape.length,I.shape.length,f,k),x=a.runWebGLProgram(g,[I,m,b],I.dtype),N=(0,s.reshape)({inputs:{x:x},backend:a,attrs:{shape:d}});return a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(b),N}const n={kernelName:e.ScatterNd,backendName:"webgl",kernelFunc:r};exports.scatterNdConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../scatter_gpu":"KauQ","./Reshape":"Sp48"}],"WkAB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SearchSortedProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e,n,i,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,i];const o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=2===(0,t.env)().getNumber("WEBGL_VERSION")?"while (left < right) {":o,s="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${a}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${s} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}exports.SearchSortedProgram=e;
},{"@tensorflow/tfjs-core":"nPFy"}],"UKwP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchSorted=s,exports.searchSortedConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../search_sorted_gpu");function s(e){const{inputs:s,backend:t,attrs:o}=e,{sortedSequence:a,values:n}=s,{side:c}=o,d=new r.SearchSortedProgram(a.shape[0],a.shape[1],n.shape[1],c),u=[[a.shape[1]]];return t.runWebGLProgram(d,[a,n],"int32",u)}const t={kernelName:e.SearchSorted,backendName:"webgl",kernelFunc:s};exports.searchSortedConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../search_sorted_gpu":"WkAB"}],"AhTD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,r,s){let o,n;if(this.variableNames=["c","a","b"],this.outputShape=r,s>4)throw Error(`Where for rank ${s} is not yet supported`);if(1===s)n="resRC",o="resRC";else{const e=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[];for(let o=0;o<r.length;o++)a.push(`${e[o]}`),o<t&&s.push(`${e[o]}`);o=s.join(),n=a.join()}const a=(0,e.getCoordsDataType)(s);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${o});\n        if (cVal >= 1.0) {\n          setOutput(getA(${n}));\n        } else {\n          setOutput(getB(${n}));\n        }\n      }\n    `}}exports.SelectProgram=t;
},{"./shader_compiler":"ELB4"}],"k7Fm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=r,exports.selectConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../select_gpu");function r(r){const{inputs:n,backend:s}=r,{condition:o,t:c,e:l}=n,p=new t.SelectProgram(o.shape.length,c.shape,c.shape.length);return s.runWebGLProgram(p,[o,c,l],(0,e.upcastType)(c.dtype,l.dtype))}const n={kernelName:e.Select,backendName:"webgl",kernelFunc:r};exports.selectConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../select_gpu":"AhTD"}],"xNLQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluConfig=exports.selu=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${e.backend_util.SELU_SCALEALPHA};\n  float scale = ${e.backend_util.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`,l=(0,n.unaryKernelFunc)({opSnippet:t});exports.selu=l;const r={kernelName:e.Selu,backendName:"webgl",kernelFunc:l};exports.seluConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"kFQm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidConfig=exports.sigmoid=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),s=require("../kernel_utils/shared");const n=r.CHECK_NAN_SNIPPET_UNARY+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",i="\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",t=(0,r.unaryKernelFunc)({opSnippet:n,packedOpSnippet:i,cpuKernelImpl:s.sigmoidImplCPU});exports.sigmoid=t;const l={kernelName:e.Sigmoid,backendName:"webgl",kernelFunc:t};exports.sigmoidConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"sGQM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signConfig=exports.sign=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sign=s;const i={kernelName:e.Sign,backendName:"webgl",kernelFunc:s};exports.signConfig=i;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"Gr2B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinConfig=exports.sin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r=n.CHECK_NAN_SNIPPET_UNARY+"\n  return sin(x);\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sin=s;const t={kernelName:e.Sin,backendName:"webgl",kernelFunc:s};exports.sinConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"u5DI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhConfig=exports.sinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",s=(0,n.unaryKernelFunc)({opSnippet:r});exports.sinh=s;const t={kernelName:e.Sinh,backendName:"webgl",kernelFunc:s};exports.sinhConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"viUC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusConfig=exports.softplus=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../kernel_utils/kernel_funcs_utils");const l="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",n=(0,o.unaryKernelFunc)({opSnippet:l});exports.softplus=n;const s={kernelName:e.Softplus,backendName:"webgl",kernelFunc:n};exports.softplusConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"RVMM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchNDConfig=exports.spaceToBatchND=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./PadV2"),s=require("./Reshape"),a=require("./Transpose");const n=n=>{const{inputs:r,backend:p,attrs:c}=n,{x:o}=r,{blockShape:h,paddings:d}=c;e.util.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const u=h.reduce((e,t)=>e*t),i=[[0,0]];i.push(...d);for(let e=1+h.length;e<o.shape.length;++e)i.push([0,0]);const l=[],b=(0,t.padV2)({inputs:{x:o},backend:p,attrs:{paddings:i,constantValue:0}}),k=e.backend_util.getReshaped(b.shape,h,u,!1),g=e.backend_util.getPermuted(k.length,h.length,!1),x=e.backend_util.getReshapedPermuted(b.shape,h,u,!1),f=(0,s.reshape)({inputs:{x:b},backend:p,attrs:{shape:k}}),m=(0,a.transpose)({inputs:{x:f},backend:p,attrs:{perm:g}}),N=(0,s.reshape)({inputs:{x:m},backend:p,attrs:{shape:x}});return l.push(b),l.push(f),l.push(m),l.forEach(e=>p.disposeIntermediateTensorInfo(e)),N};exports.spaceToBatchND=n;const r={kernelName:e.SpaceToBatchND,backendName:"webgl",kernelFunc:n};exports.spaceToBatchNDConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./PadV2":"geRf","./Reshape":"Sp48","./Transpose":"zUf2"}],"u4mR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseFillEmptyRows=r,exports.sparseFillEmptyRowsConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../kernel_utils/shared");function r(e){const{inputs:r,backend:s}=e,{indices:t,values:n,denseShape:o,defaultValue:p}=r;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${o.shape}`);if(2!==t.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${t.shape}`);if(1!==n.shape.length)throw new Error(`Values must be a vector, saw:\n         ${n.shape}`);if(0!==p.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${p.shape}`);const l=s.readSync(t.dataId),d=s.readSync(n.dataId),i=s.readSync(o.dataId),h=s.readSync(p.dataId)[0],[u,w,c,m,y]=(0,a.sparseFillEmptyRowsImplCPU)(l,t.shape,t.dtype,d,n.dtype,i,h);return[s.makeTensorInfo(w,t.dtype,u),s.makeTensorInfo([w[0]],n.dtype,c),s.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(e=>Number(e)))),s.makeTensorInfo([y.length],t.dtype,new Int32Array(y))]}const s={kernelName:e.SparseFillEmptyRows,backendName:"webgl",kernelFunc:r};exports.sparseFillEmptyRowsConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"TnnW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseReshape=a,exports.sparseReshapeConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");function a(e){const{inputs:a,backend:s}=e,{inputIndices:t,inputShape:n,newShape:p}=a;if(2!==t.shape.length)throw new Error(`Input indices should be a matrix but received shape ${t.shape}`);if(1!==n.shape.length)throw new Error(`Input shape should be a vector but received shape ${n.shape}`);if(1!==p.shape.length)throw new Error(`Target shape should be a vector but received shape ${p.shape}`);const o=Array.from(s.readSync(n.dataId)),h=s.readSync(t.dataId),d=Array.from(s.readSync(p.dataId)),[i,c,u]=(0,r.sparseReshapeImplCPU)(h,t.shape,t.dtype,o,d);return[s.makeTensorInfo(c,t.dtype,i),s.makeTensorInfo([u.length],p.dtype,new Int32Array(u))]}const s={kernelName:e.SparseReshape,backendName:"webgl",kernelFunc:a};exports.sparseReshapeConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"onr5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentMean=n,exports.sparseSegmentMeanConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");function n(e){const{inputs:n,backend:a}=e,{data:t,indices:s,segmentIds:o}=n;if(t.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${s.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${o.shape}`);const d=a.readSync(t.dataId),i=a.readSync(s.dataId),c=a.readSync(o.dataId),[p,h]=(0,r.sparseSegmentReductionImplCPU)(d,t.shape,t.dtype,i,c,!0);return a.makeTensorInfo(h,t.dtype,p)}const a={kernelName:e.SparseSegmentMean,backendName:"webgl",kernelFunc:n};exports.sparseSegmentMeanConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"I9sc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseSegmentSum=t,exports.sparseSegmentSumConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:s}=e,{data:n,indices:a,segmentIds:o}=t;if(n.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${a.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${o.shape}`);const d=s.readSync(n.dataId),i=s.readSync(a.dataId),c=s.readSync(o.dataId),[p,u]=(0,r.sparseSegmentReductionImplCPU)(d,n.shape,n.dtype,i,c);return s.makeTensorInfo(u,n.dtype,p)}const s={kernelName:e.SparseSegmentSum,backendName:"webgl",kernelFunc:t};exports.sparseSegmentSumConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"nycg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=n,exports.sparseToDenseConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/shared"),r=require("../scatter_gpu"),t=require("./Reshape");function n(n){const{inputs:a,backend:o,attrs:u}=n,{sparseIndices:p,sparseValues:i,defaultValue:c}=a,{outputShape:d}=u,{sliceRank:l,numUpdates:f,sliceSize:g,strides:h,outputSize:S}=e.backend_util.calculateShapes(i,p,d);if("string"===i.dtype){const r=o.bufferSync(p),t=o.bufferSync(i),n=e.util.decodeString(o.readSync(c.dataId)[0]),a=(0,s.scatterImplCPU)(r,t,d,S,g,f,l,h,n,!1);return o.makeTensorInfo(d,a.dtype,a.values)}const b=new r.ScatterProgram(f,l,p.shape.length,i.shape.length,h,[S,1],!1),k=o.runWebGLProgram(b,[i,p,c],i.dtype),m=(0,t.reshape)({inputs:{x:k},backend:o,attrs:{shape:d}});return o.disposeIntermediateTensorInfo(k),m}const a={kernelName:e.SparseToDense,backendName:"webgl",kernelFunc:n};exports.sparseToDenseConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../scatter_gpu":"KauQ","./Reshape":"Sp48"}],"qLb0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitV=s,exports.splitVConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Slice");function s(s){const{inputs:r,backend:i,attrs:n}=s,{x:a}=r,{numOrSizeSplits:l,axis:p}=n,o=e.util.parseAxisParam(p,a.shape)[0],c=e.backend_util.prepareSplitSize(a,l,o),u=a.shape.length,x=new Array(u).fill(0),b=a.shape.slice();return c.map(e=>{const s=[...b];s[o]=e;const r=(0,t.slice)({inputs:{x:a},backend:i,attrs:{begin:x,size:s}});return x[o]+=e,r})}const r={kernelName:e.SplitV,backendName:"webgl",kernelFunc:s};exports.splitVConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Slice":"R1jH"}],"jjx0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtConfig=exports.sqrt=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),t=require("../kernel_utils/shared");const s="return sqrt(x);",n=(0,r.unaryKernelFunc)({opSnippet:s,packedOpSnippet:s,cpuKernelImpl:t.sqrtImplCPU});exports.sqrt=n;const l={kernelName:e.Sqrt,backendName:"webgl",kernelFunc:n};exports.sqrtConfig=l;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB","../kernel_utils/shared":"Q6tG"}],"b09r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareConfig=exports.square=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const s="return x * x;",n=(0,r.unaryKernelFunc)({opSnippet:s});exports.square=n;const t={kernelName:e.Square,backendName:"webgl",kernelFunc:n};exports.squareConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"pBLH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceConfig=exports.squaredDifference=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return (a - b) * (a - b);",s=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:n});exports.squaredDifference=s;const t={kernelName:e.SquaredDifference,backendName:"webgl",kernelFunc:s};exports.squaredDifferenceConfig=t;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"mAoH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.step=t,exports.stepConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../unaryop_gpu");function t({inputs:e,attrs:t,backend:n}){const{x:o}=e,s=r.CHECK_NAN_SNIPPET+`\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,p=new r.UnaryOpProgram(o.shape,s);return n.runWebGLProgram(p,[o],o.dtype)}const n={kernelName:e.Step,backendName:"webgl",kernelFunc:t};exports.stepConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../unaryop_gpu":"J9Rr"}],"KNbi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StridedSliceProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,i=(0,e.getCoordsDataType)(r.length),d=(0,e.getCoordsDataType)(r.length);let n="";if(1===o)n="coords * strides + begin";else{let e=0;n=r.map((t,s)=>(e++,1===r.length?`coords * strides[${s}] + begin[${s}]`:`coords[${e-1}] * strides[${s}] + begin[${s}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${s});\n\n      void main() {\n        ${d} coords = getOutputCoords();\n        setOutput(getX(${n}));\n      }\n    `}}exports.StridedSliceProgram=t;
},{"./shader_compiler":"ELB4"}],"oHT7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=n,exports.stridedSliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../kernel_utils/shared"),t=require("../strided_slice_gpu"),i=require("./Reshape"),r=require("./Slice");function n(n){const{inputs:a,backend:d,attrs:l}=n,{x:p}=a,{begin:c,end:o,strides:u,beginMask:h,endMask:f,ellipsisMask:k,newAxisMask:S,shrinkAxisMask:b}=l,{finalShapeSparse:g,finalShape:m,isIdentity:x,sliceDim0:I,isSimpleSlice:_,begin:y,end:M,strides:q}=e.slice_util.sliceInfo(p.shape,c,o,u,h,f,k,S,b);let v;if(x)v=(0,i.reshape)({inputs:{x:p},backend:d,attrs:{shape:m}});else if(I||_){e.util.assert(p.shape.length>=1,()=>`Input must have rank at least 1, got: ${p.shape.length}`);const s=e.slice_util.computeOutShape(y,M,q),t=(0,r.slice)({inputs:{x:p},backend:d,attrs:{begin:y,size:s}});v=(0,i.reshape)({inputs:{x:t},backend:d,attrs:{shape:m}}),d.disposeIntermediateTensorInfo(t)}else{if(d.shouldExecuteOnCPU([p])){const t=d.readSync(p.dataId),i=(0,e.buffer)(p.shape,p.dtype,t),r=(0,s.stridedSliceImplCPU)(g,i,q,y);v=d.makeTensorInfo(m,p.dtype,r.values)}else{const e=new t.StridedSliceProgram(y,q,g);v=d.runWebGLProgram(e,[p],p.dtype)}}const P=(0,i.reshape)({inputs:{x:v},backend:d,attrs:{shape:m}});return d.disposeIntermediateTensorInfo(v),P}const a={kernelName:e.StridedSlice,backendName:"webgl",kernelFunc:n};exports.stridedSliceConfig=a;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../strided_slice_gpu":"KNbi","./Reshape":"Sp48","./Slice":"R1jH"}],"koMq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringNGrams=t,exports.stringNGramsConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");function t(e){const{inputs:t,backend:s,attrs:a}=e,{separator:n,nGramWidths:i,leftPad:o,rightPad:d,padWidth:c,preserveShortSequences:l}=a,{data:p,dataSplits:g}=t,m=s.readSync(p.dataId),u=s.readSync(g.dataId),[f,h]=(0,r.stringNGramsImplCPU)(m,u,n,i,o,d,c,l);return[s.makeTensorInfo([f.length],"string",f),s.makeTensorInfo(g.shape,"int32",h)]}const s={kernelName:e.StringNGrams,backendName:"webgl",kernelFunc:t};exports.stringNGramsConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"lTdk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringSplit=r,exports.stringSplitConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared");function r(e){const{inputs:r,backend:n,attrs:s}=e,{skipEmpty:i}=s,{input:o,delimiter:a}=r;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==a.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const p=n.readSync(o.dataId),l=n.readSync(a.dataId)[0],[g,u,d]=(0,t.stringSplitImplCPU)(p,l,i),c=u.length;return[n.makeTensorInfo([c,2],"int32",g),n.makeTensorInfo([c],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const n={kernelName:e.StringSplit,backendName:"webgl",kernelFunc:r};exports.stringSplitConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"EiVC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringToHashBucketFast=r,exports.stringToHashBucketFastConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../kernel_utils/shared");function r(t){const{inputs:r,backend:s,attrs:n}=t,{numBuckets:o}=n,{input:a}=r;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const u=s.readSync(a.dataId),i=(0,e.stringToHashBucketFastImplCPU)(u,o);return s.makeTensorInfo(a.shape,"int32",i)}const s={kernelName:t.StringToHashBucketFast,backendName:"webgl",kernelFunc:r};exports.stringToHashBucketFastConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG"}],"fPfm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanConfig=exports.tan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return tan(x);",t=(0,n.unaryKernelFunc)({opSnippet:r});exports.tan=t;const o={kernelName:e.Tan,backendName:"webgl",kernelFunc:t};exports.tanConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"pGfo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhConfig=exports.tanh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",t=(0,n.unaryKernelFunc)({opSnippet:r});exports.tanh=t;const o={kernelName:e.Tanh,backendName:"webgl",kernelFunc:t};exports.tanhConfig=o;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/kernel_funcs_utils":"ANbB"}],"GZRA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TileProgram=void 0;var e=require("./shader_compiler");class r{constructor(r,s){this.variableNames=["A"];const o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[e]*s[e];this.outputShape=o,this.rank=o.length;const n=(0,e.getCoordsDataType)(this.rank),i=t(r);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function t(e){const r=e.length;if(r>5)throw Error(`Tile for rank ${r} is not yet supported`);if(1===r)return`imod(resRC, ${e[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${t[o]}, ${e[o]})`);return s.join()}exports.TileProgram=r;
},{"./shader_compiler":"ELB4"}],"eO7i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=n,exports.tileConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),t=require("../tile_gpu");function n(n){const{inputs:s,backend:i,attrs:o}=n,{x:a}=s,{reps:l}=o;if("string"===a.dtype||a.shape.length>5){const t=i.readSync(a.dataId),n="string"===a.dtype?t.map(r=>e.util.decodeString(r)):t,s=(0,e.buffer)(a.shape,a.dtype,n),o=(0,r.tileImplCPU)(s,l);return i.makeTensorInfo(o.shape,o.dtype,o.values)}const p=new t.TileProgram(a.shape,l);return i.runWebGLProgram(p,[a],a.dtype)}const s={kernelName:e.Tile,backendName:"webgl",kernelFunc:n};exports.tileConfig=s;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../tile_gpu":"GZRA"}],"x7JC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topK=l,exports.topKConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),n=require("../top_k_gpu"),r=require("./Fill"),s=require("./GatherV2"),a=require("./Reshape"),o=require("./Slice");function u(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function i(e){let t=1;for(;t<e;)t*=2;return t}function l(l){const{inputs:p,backend:c,attrs:d}=l,{x:f}=p,{k:h,sorted:k}=d,b=(0,e.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),m=(0,e.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),g=f.shape,_=g[g.length-1];if(c.shouldExecuteOnCPU([f])||_<b||h>m){const e=c.readSync(f.dataId),[n,r]=(0,t.topKImplCPU)(e,g,f.dtype,h,k);return[c.makeTensorInfo(n.shape,n.dtype,n.values),c.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===h)return g[g.length-1]=0,[c.makeTensorInfo(g,f.dtype,[]),c.makeTensorInfo(g,"int32",[])];if(1===_)return[f,(0,r.fill)({attrs:{shape:g,dtype:"int32",value:0},backend:c})];const I=c.texData.get(f.dataId),T=null!==I&&I.isPacked,x=T?c.unpackTensor(f):f,P=e.util.sizeFromShape(g)/_,N=(0,a.reshape)({inputs:{x:x},attrs:{shape:[P,_]},backend:c});T&&u(c,x);const v=i(h),F=i(_);let K=null;const O=()=>null===K?[N,N]:[N,K],S=(e,t,r)=>{const s=O(),a=new n.SwapProgram(r),o=[[_],[null===K?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],i=K;K=c.runWebGLProgram(a,s,"int32",o),u(c,i)};for(let e=1;e<v;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)S(t,n,[P,F])}for(let e=F;e>v;e/=2){const t=O(),r=new n.MergeProgram([P,e/2]),s=[[_],[null===K?1:0],[v]],a=K;K=c.runWebGLProgram(r,t,"int32",s),u(c,a);const o=v/2,i=2*o;for(let e=o;e>=1;e/=2)S(i,e,K.shape)}let q=K;K=(0,o.slice)({inputs:{x:K},backend:c,attrs:{begin:0,size:[P,h]}}),u(c,q);let y=(0,s.gatherV2)({inputs:{x:N,indices:K},backend:c,attrs:{axis:1,batchDims:1}});u(c,N);const D=g.slice(0,-1);D.push(h),q=K,K=(0,a.reshape)({inputs:{x:K},attrs:{shape:D},backend:c}),u(c,q);const C=y;return y=(0,a.reshape)({inputs:{x:y},attrs:{shape:D},backend:c}),u(c,C),[y,K]}const p={kernelName:e.TopK,backendName:"webgl",kernelFunc:l};exports.topKConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../top_k_gpu":"DGmS","./Fill":"BnXr","./GatherV2":"T69H","./Reshape":"Sp48","./Slice":"R1jH"}],"aOcd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform=o,exports.transformConfig=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../transform_gpu");function o(r){const{inputs:o,backend:n,attrs:t}=r,{image:a,transforms:s}=o,{interpolation:f,fillMode:l,fillValue:u,outputShape:i}=t,[m,p,c,g]=a.shape,[d,b]=null!=i?i:[p,c],k=[m,d,b,g],x=new e.TransformProgram(p,c,f,l,u,k);return n.runWebGLProgram(x,[a,s],"float32")}const n={kernelName:r.Transform,backendName:"webgl",kernelFunc:o};exports.transformConfig=n;
},{"@tensorflow/tfjs-core":"nPFy","../transform_gpu":"p0dN"}],"cqho":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=o,exports.uniqueConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared"),t=require("../webgl_util");function o(e){const{inputs:o,attrs:r,backend:u}=e,{axis:s}=r,{x:i}=o;(0,t.assertNotComplex)(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=u.readSync(i.dataId),{outputValues:l,outputShape:d,indices:p}=(0,n.uniqueImplCPU)(a,s,i.shape,i.dtype);return[u.makeTensorInfo(d,i.dtype,l),u.makeTensorInfo([p.length],"int32",p)]}const r={kernelName:e.Unique,backendName:"webgl",kernelFunc:o};exports.uniqueConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","../kernel_utils/shared":"Q6tG","../webgl_util":"wqV5"}],"GdUS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpack=t,exports.unpackConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./Reshape"),s=require("./Slice");function t(e){const{inputs:t,backend:r,attrs:a}=e,{value:o}=t;let{axis:c}=a;c<0&&(c+=o.shape.length);const p=o,i=p.shape.length,l=o.shape[c],u=new Array(i-1);let h=0;for(let n=0;n<i;n++)n!==c&&(u[h++]=p.shape[n]);const f=[],k=new Array(i).fill(0),d=p.shape.slice();d[c]=1;const b=new Array(l);for(let g=0;g<b.length;g++){k[c]=g;const e=(0,s.slice)({inputs:{x:p},backend:r,attrs:{begin:k,size:d}}),t=(0,n.reshape)({inputs:{x:e},backend:r,attrs:{shape:u}});b[g]=t,f.push(e)}return f.forEach(e=>r.disposeIntermediateTensorInfo(e)),b}const r={kernelName:e.Unpack,backendName:"webgl",kernelFunc:t};exports.unpackConfig=r;
},{"@tensorflow/tfjs-core":"nPFy","./Reshape":"Sp48","./Slice":"R1jH"}],"VdUt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=a,exports.unsortedSegmentSumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../segment_gpu"),n=require("./Range"),s=require("./Reshape"),r=require("./Tile"),u=require("./Transpose");function a(a){const{inputs:p,backend:o,attrs:i}=a,{x:m,segmentIds:c}=p,{numSegments:d}=i,l=m.shape.length,g=[];let h=0;const S=e.backend_util.getAxesPermutation([h],l);let b=m;null!=S&&(b=(0,u.transpose)({inputs:{x:m},backend:o,attrs:{perm:S}}),g.push(b),h=e.backend_util.getInnerMostAxes(1,l)[0]);const k=e.backend_util.segment_util.computeOutShape(b.shape,h,d),x=e.util.sizeFromShape([b.shape[h]]),f=(0,s.reshape)({inputs:{x:b},backend:o,attrs:{shape:[-1,x]}});g.push(f);const _=(0,e.sumOutType)(m.dtype),q=(s,u,a,p,i)=>{const m=s.shape[0],c=s.shape[1],d=e.backend_util.segment_util.segOpComputeOptimalWindowSize(c,i),l={windowSize:d,inSize:c,batchSize:m,numSegments:i},h=new t.SegmentOpProgram(l,u),S=o.compileAndRun(h,[s,a],p);if(g.push(S),S.shape[1]===i)return S;const b=(0,n.range)({backend:o,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),k=(0,r.tile)({inputs:{x:b},backend:o,attrs:{reps:[c/d]}});return g.push(b),g.push(k),q(S,u,k,p,i)},w=q(f,"unsortedSegmentSum",c,_,d),O=(0,s.reshape)({inputs:{x:w},backend:o,attrs:{shape:k}});let z=O;if(null!=S){g.push(O);const t=e.backend_util.getUndoAxesPermutation(S);z=(0,u.transpose)({inputs:{x:z},backend:o,attrs:{perm:t}})}return g.forEach(e=>o.disposeIntermediateTensorInfo(e)),z}const p={kernelName:e.UnsortedSegmentSum,backendName:"webgl",kernelFunc:a};exports.unsortedSegmentSumConfig=p;
},{"@tensorflow/tfjs-core":"nPFy","../segment_gpu":"x8Mt","./Range":"bBbq","./Reshape":"Sp48","./Tile":"eO7i","./Transpose":"zUf2"}],"kKtC":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),r=require("./kernels/_FusedMatMul"),i=require("./kernels/Abs"),n=require("./kernels/Acos"),o=require("./kernels/Acosh"),s=require("./kernels/Add"),l=require("./kernels/AddN"),u=require("./kernels/All"),g=require("./kernels/Any"),a=require("./kernels/ArgMax"),f=require("./kernels/ArgMin"),C=require("./kernels/Asin"),k=require("./kernels/Asinh"),q=require("./kernels/Atan"),t=require("./kernels/Atan2"),p=require("./kernels/Atanh"),c=require("./kernels/AvgPool"),d=require("./kernels/AvgPool3D"),m=require("./kernels/AvgPool3DGrad"),S=require("./kernels/AvgPoolGrad"),h=require("./kernels/BatchMatMul"),D=require("./kernels/BatchNorm"),v=require("./kernels/BatchToSpaceND"),N=require("./kernels/Bincount"),x=require("./kernels/BroadcastArgs"),M=require("./kernels/Cast"),B=require("./kernels/Ceil"),R=require("./kernels/ClipByValue"),A=require("./kernels/Complex"),P=require("./kernels/ComplexAbs"),F=require("./kernels/Concat"),G=require("./kernels/Conv2D"),L=require("./kernels/Conv2DBackpropFilter"),T=require("./kernels/Conv2DBackpropInput"),V=require("./kernels/Conv3D"),E=require("./kernels/Conv3DBackpropFilterV2"),b=require("./kernels/Conv3DBackpropInputV2"),I=require("./kernels/Cos"),w=require("./kernels/Cosh"),y=require("./kernels/CropAndResize"),z=require("./kernels/Cumprod"),O=require("./kernels/Cumsum"),H=require("./kernels/DenseBincount"),W=require("./kernels/DepthToSpace"),K=require("./kernels/DepthwiseConv2dNative"),U=require("./kernels/DepthwiseConv2dNativeBackpropFilter"),_=require("./kernels/DepthwiseConv2dNativeBackpropInput"),j=require("./kernels/Diag"),Z=require("./kernels/Dilation2D"),J=require("./kernels/Einsum"),Q=require("./kernels/Elu"),X=require("./kernels/EluGrad"),Y=require("./kernels/Equal"),$=require("./kernels/Erf"),ee=require("./kernels/Exp"),re=require("./kernels/ExpandDims"),ie=require("./kernels/Expm1"),ne=require("./kernels/FFT"),oe=require("./kernels/Fill"),se=require("./kernels/FlipLeftRight"),le=require("./kernels/Floor"),ue=require("./kernels/FloorDiv"),ge=require("./kernels/FromPixels"),ae=require("./kernels/FusedConv2D"),fe=require("./kernels/FusedDepthwiseConv2D"),Ce=require("./kernels/GatherNd"),ke=require("./kernels/GatherV2"),qe=require("./kernels/Greater"),te=require("./kernels/GreaterEqual"),pe=require("./kernels/Identity"),ce=require("./kernels/IFFT"),de=require("./kernels/Imag"),me=require("./kernels/IsFinite"),Se=require("./kernels/IsInf"),he=require("./kernels/IsNaN"),De=require("./kernels/LeakyRelu"),ve=require("./kernels/Less"),Ne=require("./kernels/LessEqual"),xe=require("./kernels/LinSpace"),Me=require("./kernels/Log"),Be=require("./kernels/Log1p"),Re=require("./kernels/LogicalAnd"),Ae=require("./kernels/LogicalNot"),Pe=require("./kernels/LogicalOr"),Fe=require("./kernels/LRN"),Ge=require("./kernels/LRNGrad"),Le=require("./kernels/Max"),Te=require("./kernels/Maximum"),Ve=require("./kernels/MaxPool"),Ee=require("./kernels/MaxPool3D"),be=require("./kernels/MaxPool3DGrad"),Ie=require("./kernels/MaxPoolGrad"),we=require("./kernels/MaxPoolWithArgmax"),ye=require("./kernels/Mean"),ze=require("./kernels/Min"),Oe=require("./kernels/Minimum"),He=require("./kernels/MirrorPad"),We=require("./kernels/Mod"),Ke=require("./kernels/Multinomial"),Ue=require("./kernels/Multiply"),_e=require("./kernels/Neg"),je=require("./kernels/NonMaxSuppressionV3"),Ze=require("./kernels/NonMaxSuppressionV4"),Je=require("./kernels/NonMaxSuppressionV5"),Qe=require("./kernels/NotEqual"),Xe=require("./kernels/OneHot"),Ye=require("./kernels/OnesLike"),$e=require("./kernels/Pack"),er=require("./kernels/PadV2"),rr=require("./kernels/Pow"),ir=require("./kernels/Prelu"),nr=require("./kernels/Prod"),or=require("./kernels/Range"),sr=require("./kernels/Real"),lr=require("./kernels/RealDiv"),ur=require("./kernels/Reciprocal"),gr=require("./kernels/Relu"),ar=require("./kernels/Relu6"),fr=require("./kernels/Reshape"),Cr=require("./kernels/ResizeBilinear"),kr=require("./kernels/ResizeBilinearGrad"),qr=require("./kernels/ResizeNearestNeighbor"),tr=require("./kernels/ResizeNearestNeighborGrad"),pr=require("./kernels/Reverse"),cr=require("./kernels/RotateWithOffset"),dr=require("./kernels/Round"),mr=require("./kernels/Rsqrt"),Sr=require("./kernels/ScatterNd"),hr=require("./kernels/SearchSorted"),Dr=require("./kernels/Select"),vr=require("./kernels/Selu"),Nr=require("./kernels/Sigmoid"),xr=require("./kernels/Sign"),Mr=require("./kernels/Sin"),Br=require("./kernels/Sinh"),Rr=require("./kernels/Slice"),Ar=require("./kernels/Softmax"),Pr=require("./kernels/Softplus"),Fr=require("./kernels/SpaceToBatchND"),Gr=require("./kernels/SparseFillEmptyRows"),Lr=require("./kernels/SparseReshape"),Tr=require("./kernels/SparseSegmentMean"),Vr=require("./kernels/SparseSegmentSum"),Er=require("./kernels/SparseToDense"),br=require("./kernels/SplitV"),Ir=require("./kernels/Sqrt"),wr=require("./kernels/Square"),yr=require("./kernels/SquaredDifference"),zr=require("./kernels/Step"),Or=require("./kernels/StridedSlice"),Hr=require("./kernels/StringNGrams"),Wr=require("./kernels/StringSplit"),Kr=require("./kernels/StringToHashBucketFast"),Ur=require("./kernels/Sub"),_r=require("./kernels/Sum"),jr=require("./kernels/Tan"),Zr=require("./kernels/Tanh"),Jr=require("./kernels/Tile"),Qr=require("./kernels/TopK"),Xr=require("./kernels/Transform"),Yr=require("./kernels/Transpose"),$r=require("./kernels/Unique"),ei=require("./kernels/Unpack"),ri=require("./kernels/UnsortedSegmentSum"),ii=require("./kernels/ZerosLike");const ni=[r._fusedMatMulConfig,i.absConfig,n.acosConfig,o.acoshConfig,s.addConfig,l.addNConfig,u.allConfig,g.anyConfig,a.argMaxConfig,f.argMinConfig,C.asinConfig,k.asinhConfig,q.atanConfig,t.atan2Config,p.atanhConfig,c.avgPoolConfig,d.avgPool3DConfig,m.avgPool3DGradConfig,S.avgPoolGradConfig,h.batchMatMulConfig,D.batchNormConfig,v.batchToSpaceNDConfig,N.bincountConfig,x.broadcastArgsConfig,M.castConfig,B.ceilConfig,R.clipByValueConfig,A.complexConfig,P.complexAbsConfig,F.concatConfig,G.conv2DConfig,L.conv2DBackpropFilterConfig,T.conv2DBackpropInputConfig,V.conv3DConfig,E.conv3DBackpropFilterV2Config,b.conv3DBackpropInputConfig,I.cosConfig,w.coshConfig,y.cropAndResizeConfig,z.cumprodConfig,O.cumsumConfig,H.denseBincountConfig,W.depthToSpaceConfig,K.depthwiseConv2dNativeConfig,U.depthwiseConv2dNativeBackpropFilterConfig,_.depthwiseConv2dNativeBackpropInputConfig,j.diagConfig,Z.dilation2DConfig,J.einsumConfig,Q.eluConfig,X.eluGradConfig,Y.equalConfig,$.erfConfig,ee.expConfig,re.expandDimsConfig,ie.expm1Config,ne.fftConfig,oe.fillConfig,se.flipLeftRightConfig,le.floorConfig,ue.floorDivConfig,ge.fromPixelsConfig,ae.fusedConv2DConfig,fe.fusedDepthwiseConv2DConfig,Ce.gatherNdConfig,ke.gatherV2Config,qe.greaterConfig,te.greaterEqualConfig,pe.identityConfig,ce.ifftConfig,de.imagConfig,me.isFiniteConfig,Se.isInfConfig,he.isNaNConfig,De.leakyReluConfig,ve.lessConfig,Ne.lessEqualConfig,xe.linSpaceConfig,Me.logConfig,Be.log1pConfig,Re.logicalAndConfig,Ae.logicalNotConfig,Pe.logicalOrConfig,Fe.LRNConfig,Ge.LRNGradConfig,Le.maxConfig,Te.maximumConfig,Ve.maxPoolConfig,Ee.maxPool3DConfig,be.maxPool3DGradConfig,Ie.maxPoolGradConfig,we.maxPoolWithArgmaxConfig,ye.meanConfig,ze.minConfig,Oe.minimumConfig,He.mirrorPadConfig,We.modConfig,Ke.multinomialConfig,Ue.multiplyConfig,_e.negConfig,je.nonMaxSuppressionV3Config,Ze.nonMaxSuppressionV4Config,Je.nonMaxSuppressionV5Config,Qe.notEqualConfig,Xe.oneHotConfig,Ye.onesLikeConfig,$e.packConfig,er.padV2Config,rr.powConfig,ir.preluConfig,nr.prodConfig,or.rangeConfig,sr.realConfig,lr.realDivConfig,ur.reciprocalConfig,gr.reluConfig,ar.relu6Config,fr.reshapeConfig,Cr.resizeBilinearConfig,kr.resizeBilinearGradConfig,qr.resizeNearestNeighborConfig,tr.resizeNearestNeighborGradConfig,pr.reverseConfig,cr.rotateWithOffsetConfig,dr.roundConfig,mr.rsqrtConfig,Sr.scatterNdConfig,hr.searchSortedConfig,Dr.selectConfig,vr.seluConfig,Nr.sigmoidConfig,xr.signConfig,Mr.sinConfig,Br.sinhConfig,Rr.sliceConfig,Ar.softmaxConfig,Pr.softplusConfig,Fr.spaceToBatchNDConfig,Gr.sparseFillEmptyRowsConfig,Lr.sparseReshapeConfig,Tr.sparseSegmentMeanConfig,Vr.sparseSegmentSumConfig,Er.sparseToDenseConfig,br.splitVConfig,Ir.sqrtConfig,wr.squareConfig,yr.squaredDifferenceConfig,zr.stepConfig,Or.stridedSliceConfig,Hr.stringNGramsConfig,Wr.stringSplitConfig,Kr.stringToHashBucketFastConfig,Ur.subConfig,_r.sumConfig,jr.tanConfig,Zr.tanhConfig,Jr.tileConfig,Qr.topKConfig,Xr.transformConfig,Yr.transposeConfig,$r.uniqueConfig,ei.unpackConfig,ri.unsortedSegmentSumConfig,ii.zerosLikeConfig];for(const oi of ni)(0,e.registerKernel)(oi);
},{"@tensorflow/tfjs-core":"nPFy","./kernels/_FusedMatMul":"QuKQ","./kernels/Abs":"ZJWE","./kernels/Acos":"tcg3","./kernels/Acosh":"rclO","./kernels/Add":"pGv9","./kernels/AddN":"lkXW","./kernels/All":"Z8u3","./kernels/Any":"VzkM","./kernels/ArgMax":"YggO","./kernels/ArgMin":"F2hN","./kernels/Asin":"wvMb","./kernels/Asinh":"bDVn","./kernels/Atan":"OUqi","./kernels/Atan2":"NaoH","./kernels/Atanh":"Z7WF","./kernels/AvgPool":"Php8","./kernels/AvgPool3D":"OAAV","./kernels/AvgPool3DGrad":"qUF3","./kernels/AvgPoolGrad":"RyUE","./kernels/BatchMatMul":"Zgqh","./kernels/BatchNorm":"wgWL","./kernels/BatchToSpaceND":"UvpQ","./kernels/Bincount":"VKPY","./kernels/BroadcastArgs":"PAk0","./kernels/Cast":"DV8S","./kernels/Ceil":"b4Oa","./kernels/ClipByValue":"mMpZ","./kernels/Complex":"UYfu","./kernels/ComplexAbs":"m3jr","./kernels/Concat":"Pc9H","./kernels/Conv2D":"ZyyX","./kernels/Conv2DBackpropFilter":"yl7e","./kernels/Conv2DBackpropInput":"XNH5","./kernels/Conv3D":"LWnT","./kernels/Conv3DBackpropFilterV2":"jowa","./kernels/Conv3DBackpropInputV2":"FLHF","./kernels/Cos":"C4W6","./kernels/Cosh":"UXpP","./kernels/CropAndResize":"DCUo","./kernels/Cumprod":"Pqza","./kernels/Cumsum":"ka4l","./kernels/DenseBincount":"VIHQ","./kernels/DepthToSpace":"ExC9","./kernels/DepthwiseConv2dNative":"y4c4","./kernels/DepthwiseConv2dNativeBackpropFilter":"Iezu","./kernels/DepthwiseConv2dNativeBackpropInput":"c3Ls","./kernels/Diag":"qcJn","./kernels/Dilation2D":"GR9f","./kernels/Einsum":"IP7q","./kernels/Elu":"hi8W","./kernels/EluGrad":"YQgw","./kernels/Equal":"z2VW","./kernels/Erf":"LCUS","./kernels/Exp":"dncg","./kernels/ExpandDims":"e8Qs","./kernels/Expm1":"Sl7O","./kernels/FFT":"GG30","./kernels/Fill":"BnXr","./kernels/FlipLeftRight":"gG5Q","./kernels/Floor":"wQ7g","./kernels/FloorDiv":"t81V","./kernels/FromPixels":"ryp3","./kernels/FusedConv2D":"e5W1","./kernels/FusedDepthwiseConv2D":"SxXF","./kernels/GatherNd":"ghL0","./kernels/GatherV2":"T69H","./kernels/Greater":"mwyr","./kernels/GreaterEqual":"g4Ro","./kernels/Identity":"kxbQ","./kernels/IFFT":"ILIc","./kernels/Imag":"qnx7","./kernels/IsFinite":"ImJM","./kernels/IsInf":"obhn","./kernels/IsNaN":"sBfI","./kernels/LeakyRelu":"czyI","./kernels/Less":"VmyK","./kernels/LessEqual":"JSht","./kernels/LinSpace":"pItX","./kernels/Log":"Xy28","./kernels/Log1p":"nXyc","./kernels/LogicalAnd":"wtB0","./kernels/LogicalNot":"hLJl","./kernels/LogicalOr":"qehJ","./kernels/LRN":"Kgde","./kernels/LRNGrad":"rjKW","./kernels/Max":"jXmi","./kernels/Maximum":"OOyA","./kernels/MaxPool":"mfXW","./kernels/MaxPool3D":"bVhq","./kernels/MaxPool3DGrad":"EIGX","./kernels/MaxPoolGrad":"eepi","./kernels/MaxPoolWithArgmax":"HBxI","./kernels/Mean":"Nsgk","./kernels/Min":"DJm8","./kernels/Minimum":"cmHN","./kernels/MirrorPad":"uZGq","./kernels/Mod":"QpmY","./kernels/Multinomial":"hGiK","./kernels/Multiply":"na66","./kernels/Neg":"WpNF","./kernels/NonMaxSuppressionV3":"bxCL","./kernels/NonMaxSuppressionV4":"qb99","./kernels/NonMaxSuppressionV5":"LkNa","./kernels/NotEqual":"TEW1","./kernels/OneHot":"WJtm","./kernels/OnesLike":"VfxS","./kernels/Pack":"yVNv","./kernels/PadV2":"geRf","./kernels/Pow":"RF18","./kernels/Prelu":"iJof","./kernels/Prod":"JrZP","./kernels/Range":"bBbq","./kernels/Real":"Ia5k","./kernels/RealDiv":"cQ4X","./kernels/Reciprocal":"vUHw","./kernels/Relu":"wBl8","./kernels/Relu6":"pTN1","./kernels/Reshape":"Sp48","./kernels/ResizeBilinear":"PgzH","./kernels/ResizeBilinearGrad":"pIYH","./kernels/ResizeNearestNeighbor":"mjrE","./kernels/ResizeNearestNeighborGrad":"esN3","./kernels/Reverse":"I7Fz","./kernels/RotateWithOffset":"CUoT","./kernels/Round":"NvYI","./kernels/Rsqrt":"nzVx","./kernels/ScatterNd":"Zg94","./kernels/SearchSorted":"UKwP","./kernels/Select":"k7Fm","./kernels/Selu":"xNLQ","./kernels/Sigmoid":"kFQm","./kernels/Sign":"sGQM","./kernels/Sin":"Gr2B","./kernels/Sinh":"u5DI","./kernels/Slice":"R1jH","./kernels/Softmax":"LXdb","./kernels/Softplus":"viUC","./kernels/SpaceToBatchND":"RVMM","./kernels/SparseFillEmptyRows":"u4mR","./kernels/SparseReshape":"TnnW","./kernels/SparseSegmentMean":"onr5","./kernels/SparseSegmentSum":"I9sc","./kernels/SparseToDense":"nycg","./kernels/SplitV":"qLb0","./kernels/Sqrt":"jjx0","./kernels/Square":"b09r","./kernels/SquaredDifference":"pBLH","./kernels/Step":"mAoH","./kernels/StridedSlice":"oHT7","./kernels/StringNGrams":"koMq","./kernels/StringSplit":"lTdk","./kernels/StringToHashBucketFast":"EiVC","./kernels/Sub":"mft5","./kernels/Sum":"Snxr","./kernels/Tan":"fPfm","./kernels/Tanh":"pGfo","./kernels/Tile":"eO7i","./kernels/TopK":"x7JC","./kernels/Transform":"aOcd","./kernels/Transpose":"zUf2","./kernels/Unique":"cqho","./kernels/Unpack":"GdUS","./kernels/UnsortedSegmentSum":"VdUt","./kernels/ZerosLike":"ctWw"}],"Cf3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))}),require("./register_all_kernels");
},{"./base":"E5WR","./register_all_kernels":"kKtC"}],"fHyk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:!0,data:!0};exports.version=exports.data=void 0;var r=require("@tensorflow/tfjs-core");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))}),require("@tensorflow/tfjs-core/dist/register_all_gradients"),require("@tensorflow/tfjs-core/dist/public/chained_ops/register_all_chained_ops");var t=require("@tensorflow/tfjs-layers");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("@tensorflow/tfjs-converter");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=c(require("@tensorflow/tfjs-data"));exports.data=n;var s=require("@tensorflow/tfjs-backend-cpu"),a=require("@tensorflow/tfjs-backend-webgl"),f=require("./version");function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function c(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}const u={"tfjs-core":r.version_core,"tfjs-backend-cpu":s.version_cpu,"tfjs-backend-webgl":a.version_webgl,"tfjs-data":n.version_data,"tfjs-layers":t.version_layers,"tfjs-converter":o.version_converter,tfjs:f.version};exports.version=u;
},{"@tensorflow/tfjs-core":"nPFy","@tensorflow/tfjs-core/dist/register_all_gradients":"M8rT","@tensorflow/tfjs-core/dist/public/chained_ops/register_all_chained_ops":"uq8x","@tensorflow/tfjs-layers":"pWLC","@tensorflow/tfjs-converter":"HPIS","@tensorflow/tfjs-data":"MpC5","@tensorflow/tfjs-backend-cpu":"pGMc","@tensorflow/tfjs-backend-webgl":"Cf3p","./version":"tO0n"}],"bfxE":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];(function(){"use strict";var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype?t:(t[e]=n.value,t)};var i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(t,e){if(e)t:{var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];if(!(a in n))break t;n=n[a]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}function a(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function u(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}function s(t){if(!(t instanceof Array)){t=u(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}o("Symbol",function(t){function e(t,e){this.g=t,r(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function t(r){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(n+(r||"")+"_"+i++,r)}}),o("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<e.length;o++){var u=i[e[o]];"function"==typeof u&&"function"!=typeof u.prototype[t]&&r(u.prototype,t,{configurable:!0,writable:!0,value:function(){return a(n(this))}})}return t});var l,c="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var f;t:{var h={};try{h.__proto__={a:!0},f=h.a;break t}catch(Oe){}f=!1}l=f?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var g=l;function d(t,e){if(t.prototype=c(e.prototype),t.prototype.constructor=t,g)g(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.da=e.prototype}function p(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function v(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}function y(t,e){t.j={U:e,V:!0},t.g=t.m||t.s}function m(t,e,n){return t.g=n,{value:e}}function b(t){this.g=new p,this.h=t}function w(t,e,n,r){try{var i=e.call(t.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.g.l=!1,i;var o=i.value}catch(a){return t.g.i=null,y(t.g,a),A(t)}return t.g.i=null,r.call(t.g,o),A(t)}function A(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(n){t.g.h=void 0,y(t.g,n)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.V)throw e.U;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function j(t){this.next=function(e){return v(t.g),t.g.i?e=w(t,t.g.i.next,e,t.g.o):(t.g.o(e),e=A(t)),e},this.throw=function(e){return v(t.g),t.g.i?e=w(t,t.g.i.throw,e,t.g.o):(y(t.g,e),e=A(t)),e},this.return=function(e){return function(t,e){v(t.g);var n=t.g.i;return n?w(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.g.return):(t.g.return(e),A(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function x(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise(function(r,i){!function t(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(t,i)}(t.next())})}(new j(new b(t)))}p.prototype.o=function(t){this.h=t},p.prototype.return=function(t){this.j={return:t},this.g=this.s},o("Promise",function(t){function e(t){this.h=0,this.i=void 0,this.g=[],this.o=!1;var e=this.j();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.g=null}function r(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;n.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.i(function(){e.l()})}this.g.push(t)};var o=i.setTimeout;n.prototype.i=function(t){o(t,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(t){this.i(function(){throw t})},e.prototype.j=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.C),reject:t(this.l)}},e.prototype.C=function(t){if(t===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.F(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.m(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.l(n)}"function"==typeof e?this.G(e,t):this.m(t)},e.prototype.l=function(t){this.s(2,t)},e.prototype.m=function(t){this.s(1,t)},e.prototype.s=function(t,e){if(0!=this.h)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.h);this.h=t,this.i=e,2===this.h&&this.D(),this.A()},e.prototype.D=function(){var t=this;o(function(){if(t.B()){var e=i.console;void 0!==e&&e.error(t.i)}},1)},e.prototype.B=function(){if(this.o)return!1;var t=i.CustomEvent,e=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.i,n(t))},e.prototype.A=function(){if(null!=this.g){for(var t=0;t<this.g.length;++t)a.h(this.g[t]);this.g=null}};var a=new n;return e.prototype.F=function(t){var e=this.j();t.J(e.resolve,e.reject)},e.prototype.G=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e(function(t,e){i=t,o=e});return this.J(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.J=function(t,e){function n(){switch(r.h){case 1:t(r.i);break;case 2:e(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},e.resolve=r,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var i=u(t),o=i.next();!o.done;o=i.next())r(o.value).J(e,n)})},e.all=function(t){var n=u(t),i=n.next();return i.done?r([]):new e(function(t,e){function o(e){return function(n){a[e]=n,0==--u&&t(a)}}var a=[],u=0;do{a.push(void 0),u++,r(i.value).J(o(a.length-1),e),i=n.next()}while(!i.done)})},e});var _="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};o("Object.assign",function(t){return t||_}),o("Object.is",function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}}),o("Array.prototype.includes",function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(e=e||0)&&(e=Math.max(e+r,0));e<r;e++){var i=n[e];if(i===t||Object.is(i,t))return!0}return!1}}),o("String.prototype.includes",function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e||0)}}),o("Array.prototype.keys",function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(t){return t})}});var O=this||self;function E(t,e){t=t.split(".");var n,r=O;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}function T(t){!function(t){O.setTimeout(function(){throw t},0)}(t)}function k(t,e){T(Error("Invalid wire type: "+t+" (at position "+e+")"))}function S(){T(Error("Failed to read varint, encoding is invalid."))}function F(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}var C,R,U="undefined"!=typeof TextDecoder,P="undefined"!=typeof TextEncoder;function B(t){if(P)t=(R||(R=new TextEncoder)).encode(t);else{var e=void 0;e=void 0!==e&&e;for(var n=0,r=new Uint8Array(3*t.length),i=0;i<t.length;i++){var o=t.charCodeAt(i);if(128>o)r[n++]=o;else{if(2048>o)r[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&i<t.length){var a=t.charCodeAt(++i);if(56320<=a&&57343>=a){o=1024*(o-55296)+a-56320+65536,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128;continue}i--}if(e)throw Error("Found an unpaired surrogate");o=65533}r[n++]=o>>12|224,r[n++]=o>>6&63|128}r[n++]=63&o|128}}t=r.subarray(0,n)}return t}var L={},M=null;function N(t){var e;void 0===e&&(e=0),D(),e=L[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,o=0;i<t.length-2;i+=3){var a=t[i],u=t[i+1],s=t[i+2],l=e[a>>2];a=e[(3&a)<<4|u>>4],u=e[(15&u)<<2|s>>6],s=e[63&s],n[o++]=l+a+u+s}switch(l=0,s=r,t.length-i){case 2:s=e[(15&(l=t[i+1]))<<2]||r;case 1:t=t[i],n[o]=e[t>>2]+e[(3&t)<<4|l>>4]+s+r}return n.join("")}function I(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=M[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}D();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),u=n(64);if(64===u&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=u&&e(a<<6&192|u))}}(t,function(t){r[i++]=t}),r.subarray(0,i)}function D(){if(!M){M={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));L[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===M[o]&&(M[o]=i)}}}}var G,H="function"==typeof Uint8Array;function W(t){if(this.g=t,null!==t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}W.prototype.toJSON=function(){if(null==this.g)var t="";else t=this.g,t=this.g=null==t||"string"==typeof t?t:H&&t instanceof Uint8Array?N(t):null;return t};var V="function"==typeof Uint8Array.prototype.slice;function X(t,e,n){return e===n?G||(G=new Uint8Array(0)):V?t.slice(e,n):new Uint8Array(t.subarray(e,n))}var z=0;function Y(t,e){e=void 0!==(e=void 0===e?{}:e).u&&e.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=e,t&&J(this,t)}function J(t,e){t.h=function(t){if(t.constructor===Uint8Array)return t;if(t.constructor===ArrayBuffer)return new Uint8Array(t);if(t.constructor===Array)return new Uint8Array(t);if(t.constructor===String)return I(t);if(t.constructor===W){if(null==t.g)var e=G||(G=new Uint8Array(0));else{e=Uint8Array;var n=t.g;n=null==n||H&&null!=n&&n instanceof Uint8Array?n:"string"==typeof n?I(n):null,e=new e(t=t.g=n)}return e}if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(e),t.l=0,t.i=t.h.length,t.g=t.l}function K(t){t.g>t.i&&(t.j=!0,T(Error("Tried to read past the end of the data "+t.g+" > "+t.i)))}function $(t){var e=t.h,n=e[t.g],r=127&n;return 128>n?(t.g+=1,K(t),r):(r|=(127&(n=e[t.g+1]))<<7,128>n?(t.g+=2,K(t),r):(r|=(127&(n=e[t.g+2]))<<14,128>n?(t.g+=3,K(t),r):(r|=(127&(n=e[t.g+3]))<<21,128>n?(t.g+=4,K(t),r):(r|=(15&(n=e[t.g+4]))<<28,128>n?(t.g+=5,K(t),r>>>0):(t.g+=5,128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]?(t.j=!0,S(),r):(K(t),r))))))}Y.prototype.reset=function(){this.g=this.l};var q=[];function Z(){this.g=new Uint8Array(64),this.h=0}function Q(t,e){if(!(t.h+1<t.g.length)){var n=t.g;t.g=new Uint8Array(Math.ceil(1+2*t.g.length)),t.g.set(n)}t.g[t.h++]=e}function tt(t,e){for(;127<e;)Q(t,127&e|128),e>>>=7;Q(t,e)}function et(t){var e={},n=void 0!==e.N&&e.N;this.m={u:void 0!==e.u&&e.u},this.N=n,e=this.m,q.length?(n=q.pop(),e&&(n.u=e.u),t&&J(n,t),t=n):t=new Y(t,e),this.g=t,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function nt(t){var e=t.g;if((e=e.g==e.i)||(e=t.j)||(e=(e=t.g).j||0>e.g||e.g>e.i),e)return!1;t.l=t.g.g;var n=$(t.g);return e=n>>>3,0<=(n&=7)&&5>=n?(t.i=e,t.h=n,!0):(t.j=!0,k(n,t.l),!1)}function rt(t){switch(t.h){case 0:if(0!=t.h)rt(t);else t:{for(var e=(t=t.g).g,n=0;10>n;n++){if(0==(128&t.h[e])){t.g=e+1,K(t);break t}e++}t.j=!0,S()}break;case 1:(t=t.g).g+=8,K(t);break;case 2:2!=t.h?rt(t):(e=$(t.g),(t=t.g).g+=e,K(t));break;case 5:(t=t.g).g+=4,K(t);break;case 3:for(e=t.i;;){if(!nt(t)){t.j=!0,T(Error("Unmatched start-group tag: stream EOF"));break}if(4==t.h){t.i!=e&&(t.j=!0,T(Error("Unmatched end-group tag")));break}rt(t)}break;default:t.j=!0,k(t.h,t.l)}}function it(t,e,n){t.N||(t=X(t.g.h,n,t.g.g),(n=e.m)?n.push(t):e.m=[t])}Z.prototype.length=function(){return this.h},Z.prototype.end=function(){var t=this.g,e=this.h;return this.h=0,X(t,0,e)},et.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var ot=[];function at(){this.h=[],this.i=0,this.g=new Z}function ut(t,e){0!==e.length&&(t.h.push(e),t.i+=e.length)}function st(t,e,n){tt(t.g,8*e+2),tt(t.g,n.length),ut(t,t.g.end()),ut(t,n)}var lt,ct="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ft(t,e){Object.isFrozen(t)||(ct?t[ct]|=e:void 0!==t.g?t.g|=e:Object.defineProperties(t,{g:{value:e,configurable:!0,writable:!0,enumerable:!1}}))}function ht(t){return t?null==(e=ct?t[ct]:t.g)?0:e:0;var e}function gt(t){return Array.isArray(t)?(ft(t,1),t):t}function dt(t){if(!Array.isArray(t))throw Error("cannot mark non-array as immutable");ft(t,2)}function pt(t){return null!==t&&"object"==typeof t&&t.constructor===Object}function vt(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":return H&&null!=t&&t instanceof Uint8Array?N(t):t;default:return t}}function yt(t,e){if(null!=t)return Array.isArray(t)||pt(t)?mt(t,e):e(t)}function mt(t,e){if(Array.isArray(t)){for(var n=Array(t.length),r=0;r<t.length;r++)n[r]=yt(t[r],e);return 1&ht(t)&&gt(n),n}for(r in n={},t)n[r]=yt(t[r],e);return n}function bt(t,e,n){var r=lt;if(lt=null,t||(t=r),r=this.constructor.ba,t||(t=r?[r]:[]),this.j=(r?0:-1)-(this.constructor.$||0),this.i=null,this.g=t,t=(r=this.g.length)-1,r&&pt(r=this.g[t])?(this.l=t-this.j,this.h=r):void 0!==e&&-1<e?(this.l=Math.max(e,t+1-this.j),this.h=null):this.l=Number.MAX_VALUE,n)for(e=0;e<n.length;e++)(t=n[e])<this.l?(t+=this.j,(r=this.g[t])?gt(r):this.g[t]=jt):(xt(this),(r=this.h[t])?gt(r):this.h[t]=jt)}var wt,At,jt=Object.freeze(gt([]));function xt(t){var e=t.l+t.j;t.g[e]||(t.h=t.g[e]={})}function _t(t,e,n){return-1===e?null:void 0!==n&&n||e>=t.l?t.h?t.h[e]:void 0:t.g[e+t.j]}function Ot(t,e,n){n=void 0===n||n;var r=void 0!==r&&r,i=_t(t,e,r);return null==i&&(i=jt),i===jt?Tt(t,e,i=gt([]),r):n&&Array.isArray(i)&&2&ht(i)&&Tt(t,e,i=i.slice(),r),i}function Et(t,e,n){return null==(t=null==(t=_t(t,e))?t:+t)?void 0===n?0:n:t}function Tt(t,e,n,r){void 0!==r&&r||e>=t.l?(xt(t),t.h[e]=n):t.g[e+t.j]=n}function kt(t,e,n){t.i||(t.i={});var r=t.i[n];if(!r){var i=Ot(t,n,!1);r=[];for(var o=!!Array.isArray(i)&&!!(2&ht(i)),a=0;a<i.length;a++)r[a]=new e(i[a]),o&&dt(r[a].g);o&&(dt(r),Object.freeze(r)),t.i[n]=r}return r}function St(t,e,n,r,i){var o=kt(t,r,e);n=n||new r,t=Ot(t,e),null!=i?(o.splice(i,0,n),t.splice(i,0,Ft(n))):(o.push(n),t.push(Ft(n)))}function Ft(t){if(t.i)for(var e in t.i){var n=t.i[e];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&Ft(n[r]);else n&&Ft(n)}return t.g}function Ct(t,e){return null==(t=_t(t,e))?0:t}function Rt(t,e){return null==(t=_t(t,e))?"":t}function Ut(t,e){if(t=t.m){ut(e,e.g.end());for(var n=0;n<t.length;n++)ut(e,t[n])}}function Pt(t){var e=t[0];switch(t.length){case 2:var n=t[1];return function(t,r,i){return e(t,r,i,n)};case 3:var r=t[1],i=t[2];return function(t,n,o){return e(t,n,o,r,i)};case 4:var o=t[1],a=t[2],u=t[3];return function(t,n,r){return e(t,n,r,o,a,u)};default:throw Error("unsupported number of parameters, expected [2-4], got "+t.length)}}function Bt(t,e,n){for(;nt(e)&&4!=e.h;){var r=e.i,i=n[r];if(i){if(Array.isArray(i)&&(i=n[r]=Pt(i)),!i(e,t,r)){i=t;var o=(r=e).l;rt(r),it(r,i,o)}}else i=t,o=(r=e).l,rt(r),it(r,i,o)}return t}function Lt(t,e){var n=new at;if(e(t,n),0===(t=n.i+n.g.length()))n=new Uint8Array(0);else{t=new Uint8Array(t);for(var r=n.h,i=r.length,o=e=0;o<i;o++){var a=r[o];0!==a.length&&(t.set(a,e),e+=a.length)}0!==(i=(r=n.g).h)&&(t.set(r.g.subarray(0,i),e),r.h=0),n.h=[t],n=t}return n}function Mt(t,e,n){if(ot.length){var r=ot.pop();t&&(J(r.g,t),r.i=-1,r.h=-1),t=r}else t=new et(t);try{return n(new e,t)}finally{(e=t.g).h=null,e.l=0,e.i=0,e.g=0,e.j=!1,e.u=!1,t.i=-1,t.h=-1,t.j=!1,100>ot.length&&ot.push(t)}}function Nt(t,e,n){if(null!=(e=_t(e,n))){tt(t.g,8*n+5),t=t.g;var r=e;0===(r=(n=0>r?1:0)?-r:r)?0<1/r?z=0:(0,z=2147483648):isNaN(r)?(0,z=2147483647):3.4028234663852886e38<r?(0,z=(n<<31|2139095040)>>>0):1.1754943508222875e-38>r?(r=Math.round(r/Math.pow(2,-149)),0,z=(n<<31|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),16777216<=(r=Math.round(8388608*r))&&++e,0,z=(n<<31|e+127<<23|8388607&r)>>>0),Q(t,(n=z)>>>0&255),Q(t,n>>>8&255),Q(t,n>>>16&255),Q(t,n>>>24&255)}}function It(t,e,n){if(5!==t.h)return!1;var r=(t=t.g).h[t.g],i=t.h[t.g+1],o=t.h[t.g+2],a=t.h[t.g+3];return t.g+=4,K(t),t=2*((i=(r<<0|i<<8|o<<16|a<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,Tt(e,n,255==r?i?NaN:1/0*t:0==r?t*Math.pow(2,-149)*i:t*Math.pow(2,r-150)*(i+Math.pow(2,23))),!0}function Dt(t,e,n){if(0!==t.h)return!1;for(var r=t.g,i=128,o=0,a=t=0;4>a&&128<=i;a++)o|=(127&(i=r.h[r.g++]))<<7*a;if(128<=i&&(o|=(127&(i=r.h[r.g++]))<<28,t|=(127&i)>>4),128<=i)for(a=0;5>a&&128<=i;a++)t|=(127&(i=r.h[r.g++]))<<7*a+3;return 128>i?(r=o>>>0,(t=2147483648&(i=t>>>0))&&(i=~i>>>0,0==(r=1+~r>>>0)&&(i=i+1>>>0)),r=4294967296*i+(r>>>0),t=t?-r:r):(r.j=!0,S(),t=void 0),Tt(e,n,t),!0}function Gt(t,e,n){return 0===t.h&&(Tt(e,n,$(t.g)),!0)}function Ht(t,e,n){if(2!==t.h)return!1;var r,i=$(t.g),o=(t=t.g).g;if(t.g+=i,K(t),t=t.h,U)(r=C)||(r=C=new TextDecoder("utf-8",{fatal:!1})),r=r.decode(t.subarray(o,o+i));else{i=o+i;for(var a,u,s,l=[],c=null;o<i;)128>(a=t[o++])?l.push(a):224>a?o>=i?l.push(65533):(u=t[o++],194>a||128!=(192&u)?(o--,l.push(65533)):l.push((31&a)<<6|63&u)):240>a?o>=i-1?l.push(65533):128!=(192&(u=t[o++]))||224===a&&160>u||237===a&&160<=u||128!=(192&(r=t[o++]))?(o--,l.push(65533)):l.push((15&a)<<12|(63&u)<<6|63&r):244>=a?o>=i-2?l.push(65533):128!=(192&(u=t[o++]))||0!=u-144+(a<<28)>>30||128!=(192&(r=t[o++]))||128!=(192&(s=t[o++]))?(o--,l.push(65533)):(a=(7&a)<<18|(63&u)<<12|(63&r)<<6|63&s,a-=65536,l.push(55296+(a>>10&1023),56320+(1023&a))):l.push(65533),8192<=l.length&&(c=F(c,l),l.length=0);r=F(c,l)}return Tt(e,n,r),!0}function Wt(t,e,n,r,i){if(2!==t.h)return!1;var o=new r,a=t.g.i,u=$(t.g),s=t.g.g+u;if(t.g.i=s,i(o,t),0!==(i=s-t.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+u+" bytes, instead read "+(u-i)+" bytes, either the data ended unexpectedly or the message misreported its own length");return t.g.g=s,t.g.i=a,St(e,n,o,r,void 0),!0}function Vt(t){bt.call(this,t)}function Xt(t,e){var n=_t(t,1);if(null!=n&&null!=n){tt(e.g,8);var r=e.g;if(0<=n)tt(r,n);else{for(var i=0;9>i;i++)Q(r,127&n|128),n>>=7;Q(r,1)}}Nt(e,t,2),null!=(r=_t(t,3))&&st(e,3,B(r)),null!=(r=_t(t,4))&&st(e,4,B(r)),Ut(t,e)}function zt(t,e){return Bt(t,e,wt||(wt={1:Gt,2:It,3:Ht,4:Ht}))}function Yt(t){bt.call(this,t,-1,qt)}function Jt(t,e){return Bt(t,e,At||(At={1:[Wt,Vt,zt]}))}bt.prototype.toJSON=function(){return mt(Ft(this),vt)},bt.prototype.toString=function(){return Ft(this).toString()},d(Vt,bt),d(Yt,bt),Yt.prototype.addClassification=function(t,e){return St(this,1,t,Vt,e),this};var Kt,$t,qt=[1];function Zt(t){bt.call(this,t)}function Qt(t,e){Nt(e,t,1),Nt(e,t,2),Nt(e,t,3),Nt(e,t,4),Nt(e,t,5),Ut(t,e)}function te(t,e){return Bt(t,e,Kt||(Kt={1:It,2:It,3:It,4:It,5:It}))}function ee(t){bt.call(this,t,-1,ie)}function ne(t,e){return Bt(t,e,$t||($t={1:[Wt,Zt,te]}))}d(Zt,bt),d(ee,bt);var re,ie=[1];function oe(t){bt.call(this,t)}function ae(t,e){Nt(e,t,1),Nt(e,t,2),Nt(e,t,3),Nt(e,t,4),Nt(e,t,5);var n=_t(t,6);if(null!=n&&null!=n){tt(e.g,48);var r=e.g,i=n;n=0>i;var o=(i=Math.abs(i))>>>0;for(i=Math.floor((i-o)/4294967296),i>>>=0,n&&(i=~i>>>0,4294967295<(o=1+(~o>>>0))&&(o=0,4294967295<++i&&(i=0))),n=z=o,o=i;0<o||127<n;)Q(r,127&n|128),n=(n>>>7|o<<25)>>>0,o>>>=7;Q(r,n)}Ut(t,e)}function ue(t,e){return Bt(t,e,re||(re={1:It,2:It,3:It,4:It,5:It,6:Dt}))}function se(t,e,n){if(n=t.createShader(0===n?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+t.getShaderInfoLog(n));return n}function le(t){return kt(t,Vt,1).map(function(t){return{index:Ct(t,1),score:Et(t,2),label:null!=_t(t,3)?Rt(t,3):void 0,displayName:null!=_t(t,4)?Rt(t,4):void 0}})}function ce(t){return{x:Et(t,1),y:Et(t,2),z:Et(t,3),visibility:null!=_t(t,4)?Et(t,4):void 0}}function fe(t){return t.map(function(t){return kt(Mt(t,ee,ne),Zt,1).map(ce)})}function he(t,e){this.h=t,this.g=e,this.l=0}function ge(t,e,n){return function(t,e){var n=t.g;if(void 0===t.m){var r=se(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=se(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));r=t.m=o,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),ca:i},t.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.enableVertexAttribArray(t.j.I),n.vertexAttribPointer(t.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.enableVertexAttribArray(t.j.H),n.vertexAttribPointer(t.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.j,n.useProgram(t.m),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.h.bindTexture2d(e.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),t.h.bindTexture2d(0)}(t,e),"function"==typeof t.g.canvas.transferToImageBitmap?Promise.resolve(t.g.canvas.transferToImageBitmap()):n?Promise.resolve(t.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(t.g.canvas):(void 0===t.i&&(t.i=document.createElement("canvas")),new Promise(function(e){t.i.height=t.g.canvas.height,t.i.width=t.g.canvas.width,t.i.getContext("2d",{}).drawImage(t.g.canvas,0,0,t.g.canvas.width,t.g.canvas.height),e(t.i)}))}function de(t){this.g=t}d(oe,bt);var pe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ve(t,e){return e+t}function ye(t,e){window[t]=e}function me(t){if(this.g=t,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=t&&t.locateFile||ve,"object"==typeof window)var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=e,t.options)for(var n=(e=u(Object.keys(t.options))).next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;void 0!==r&&(this.j[n]="function"==typeof r?r():r)}}function be(t){var e,n,r,i,o,a,u,l,c,f,h;return x(function(g){switch(g.g){case 1:return t.R?(e=void 0===t.g.files?[]:"function"==typeof t.g.files?t.g.files(t.j):t.g.files,m(g,x(function(t){switch(t.g){case 1:return t.m=2,m(t,WebAssembly.instantiate(pe),4);case 4:t.g=3,t.m=0;break;case 2:return t.m=0,t.j=null,t.return(!1);case 3:return t.return(!0)}}),2)):g.return();case 2:if(n=g.h,"object"==typeof window)return ye("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),ye("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),a=e.filter(function(t){return void 0!==t.data}),u=e.filter(function(t){return void 0===t.data}),l=Promise.all(a.map(function(e){var n=we(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then(function(e){return t.overrideFile(r,e),Promise.resolve(e)})}return n})),c=Promise.all(u.map(function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n?function(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise(function(t){e.addEventListener("load",function(){t()},!1),e.addEventListener("error",function(){t()},!1),document.body.appendChild(e)})}(t.locateFile(e.url,t.S)):Promise.resolve()})).then(function(){var e,n,r;return x(function(i){if(1==i.g)return e=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=t,m(i,e(n),2);r.h=i.h,i.g=0})}),f=x(function(e){return t.g.graph&&t.g.graph.url?e=m(e,we(t,t.g.graph.url),0):(e.g=0,e=void 0),e}),m(g,Promise.all([c,l,f]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=e.filter(function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n}).map(function(e){return t.locateFile(e.url,t.S)}),importScripts.apply(null,s(r)),i=t,m(g,createMediapipeSolutionsWasm(Module),6);case 6:i.h=g.h,t.l=new OffscreenCanvas(1,1),t.h.canvas=t.l,o=t.h.GL.createContext(t.l,{antialias:!1,alpha:!1,aa:"undefined"!=typeof WebGL2RenderingContext?2:1}),t.h.GL.makeContextCurrent(o),g.g=4;break;case 7:if(t.l=document.createElement("canvas"),!(h=t.l.getContext("webgl2",{}))&&!(h=t.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),g.return();t.D=h,t.h.canvas=t.l,t.h.createContext(t.l,!0,!0,{});case 4:t.i=new t.h.SolutionWasm,t.R=!1,g.g=0}})}function we(t,e){var n,r;return x(function(i){return e in t.F?i.return(t.F[e]):(n=t.locateFile(e,""),r=fetch(n).then(function(t){return t.arrayBuffer()}),t.F[e]=r,i.return(r))})}function Ae(t,e,n){var r,i,o,a,s,l,c,f,h,g,d,p,v,y;return x(function(b){switch(b.g){case 1:if(!n)return b.return(e);for(r={},i=0,o=u(Object.keys(n)),a=o.next();!a.done;a=o.next())s=a.value,"string"!=typeof(l=n[s])&&"texture"===l.type&&void 0!==e[l.stream]&&++i;1<i&&(t.G=!1),c=u(Object.keys(n)),a=c.next();case 2:if(a.done){b.g=4;break}if(f=a.value,"string"==typeof(h=n[f]))return v=r,y=f,m(b,function(t,e,n){var r;return x(function(i){return"number"==typeof n||n instanceof Uint8Array||n instanceof t.h.Uint8BlobList?i.return(n):n instanceof t.h.Texture2dDataOut?((r=t.s[e])||(r=new he(t.h,t.D),t.s[e]=r),i.return(ge(r,n,t.G))):i.return(void 0)})}(t,f,e[h]),14);if(g=e[h.stream],"detection_list"===h.type){if(g){for(var w=g.getRectList(),A=g.getLandmarksList(),j=g.getClassificationsList(),_=[],O=0;O<w.size();++O){var E=Mt(w.get(O),oe,ue);E={T:{X:Et(E,1),Y:Et(E,2),height:Et(E,3),width:Et(E,4),rotation:Et(E,5,0),W:Ct(E,6)},O:kt(Mt(A.get(O),ee,ne),Zt,1).map(ce),M:le(Mt(j.get(O),Yt,Jt))},_.push(E)}w=_}else w=[];r[f]=w,b.g=7;break}if("proto_list"===h.type){if(g){for(w=Array(g.size()),A=0;A<g.size();A++)w[A]=g.get(A);g.delete()}else w=[];r[f]=w,b.g=7;break}if(void 0===g){b.g=3;break}if("float_list"===h.type){r[f]=g,b.g=7;break}if("proto"===h.type){r[f]=g,b.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(d=t.s[f])||(d=new he(t.h,t.D),t.s[f]=d),m(b,ge(d,g,t.G),13);case 13:p=b.h,r[f]=p;case 7:h.transform&&r[f]&&(r[f]=h.transform(r[f])),b.g=3;break;case 14:v[y]=b.h;case 3:a=c.next(),b.g=2;break;case 4:return b.return(r)}})}function je(t,e){for(var n=e.name||"$",r=[].concat(s(e.wants)),i=new t.h.StringList,o=u(e.wants),a=o.next();!a.done;a=o.next())i.push_back(a.value);o=t.h.PacketListener.implement({onResults:function(i){for(var o={},a=0;a<e.wants.length;++a)o[r[a]]=i.get(a);var u=t.listeners[n];u&&(t.C=Ae(t,o,e.outs).then(function(n){n=u(n);for(var i=0;i<e.wants.length;++i){var a=o[r[i]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(t.C=n)}))}}),t.i.attachMultiListener(i,o),i.delete()}function xe(t){return void 0===t&&(t=0),1===t?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function _e(t){var e=this;t=t||{},this.g=new me({locateFile:t.locateFile,files:function(t){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:xe(t.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:fe},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:fe},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(t){return t.map(function(t){return le(Mt(t,Yt,Jt))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(t){var n,r,i;return x(function(o){return 1==o.g?(n=xe(t),r="third_party/mediapipe/modules/hand_landmark/"+n,m(o,we(e.g,n),2)):(i=o.h,e.g.overrideFile(r,i),o.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}(e=me.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){var t=this;return x(function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0})},e.setOptions=function(t,e){var n=this;if(e=e||this.g.options){for(var r=[],i=[],o={},a=u(Object.keys(t)),s=a.next();!s.done;o={K:o.K,L:o.L},s=a.next()){var l=s.value;l in this.j&&this.j[l]===t[l]||(this.j[l]=t[l],void 0!==(s=e[l])&&(s.onChange&&(o.K=s.onChange,o.L=t[l],r.push(function(t){return function(){return x(function(e){if(1==e.g)return m(e,t.K(t.L),2);!0===e.h&&(n.o=!0),e.g=0})}}(o))),s.graphOptionXref&&(l={valueNumber:1===s.type?t[l]:0,valueBoolean:0===s.type&&t[l],valueString:2===s.type?t[l]:""},s=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),s.graphOptionXref),l),i.push(s))))}0===r.length&&0===i.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(i),this.v=(void 0===this.v?[]:this.v).concat(r))}},e.initialize=function(){var t=this;return x(function(e){return 1==e.g?m(e,be(t),2):3!=e.g?m(e,function(t){var e,n,r,i,o,a,s,l;return x(function(c){if(1==c.g)return t.g.graph&&t.g.graph.url&&t.P===t.g.graph.url?c.return():(t.o=!0,t.g.graph&&t.g.graph.url?(t.P=t.g.graph.url,m(c,we(t,t.g.graph.url),3)):void(c.g=2));for(2!=c.g&&(e=c.h,t.i.loadGraph(e)),n=u(Object.keys(t.B)),r=n.next();!r.done;r=n.next())i=r.value,t.i.overrideFile(i,t.B[i]);if(t.B={},t.g.listeners)for(o=u(t.g.listeners),a=o.next();!a.done;a=o.next())s=a.value,je(t,s);l=t.j,t.j={},t.setOptions(l),c.g=0})}(t),3):m(e,function(t){var e,n,r,i,o,a;return x(function(s){switch(s.g){case 1:if(!t.o)return s.return();if(!t.v){s.g=2;break}e=u(t.v),n=e.next();case 3:if(n.done){s.g=5;break}return m(s,(0,n.value)(),4);case 4:n=e.next(),s.g=3;break;case 5:t.v=void 0;case 2:if(t.A){for(r=new t.h.GraphOptionChangeRequestList,i=u(t.A),o=i.next();!o.done;o=i.next())a=o.value,r.push_back(a);t.i.changeOptions(r),r.delete(),t.A=void 0}t.o=!1,s.g=0}})}(t),0)})},e.overrideFile=function(t,e){this.i?this.i.overrideFile(t,e):this.B[t]=e},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(t,e){var n,r,i,o,a,s,l,c,f,h=this;return x(function(g){switch(g.g){case 1:return h.g.inputs?(n=1e3*(null==e?performance.now():e),m(g,h.C,2)):g.return();case 2:return m(g,h.initialize(),3);case 3:for(r=new h.h.PacketDataList,i=u(Object.keys(t)),o=i.next();!o.done;o=i.next())if(a=o.value,s=h.g.inputs[a]){t:{var d=t[a];switch(s.type){case"video":var p=h.m[s.stream];if(p||(p=new he(h.h,h.D),h.m[s.stream]=p),0===p.l&&(p.l=p.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&d instanceof HTMLVideoElement)var v=d.videoWidth,y=d.videoHeight;else"undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement?(v=d.naturalWidth,y=d.naturalHeight):(v=d.width,y=d.height);y={glName:p.l,width:v,height:y},(v=p.g).canvas.width=y.width,v.canvas.height=y.height,v.activeTexture(v.TEXTURE0),p.h.bindTexture2d(p.l),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,d),p.h.bindTexture2d(0),p=y;break t;case"detections":for((p=h.m[s.stream])||(p=new de(h.h),h.m[s.stream]=p),p.data||(p.data=new p.g.DetectionListData),p.data.reset(d.length),y=0;y<d.length;++y){v=d[y];var b=p.data,w=b.setBoundingBox,A=y,j=v.T,x=new oe;if(Tt(x,1,j.X),Tt(x,2,j.Y),Tt(x,3,j.height),Tt(x,4,j.width),Tt(x,5,j.rotation),Tt(x,6,j.W),j=Lt(x,ae),w.call(b,A,j),v.O)for(b=0;b<v.O.length;++b){var _=!!(x=v.O[b]).visibility;A=(w=p.data).addNormalizedLandmark,j=y,x=Object.assign(Object.assign({},x),{visibility:_?x.visibility:0}),Tt(_=new Zt,1,x.x),Tt(_,2,x.y),Tt(_,3,x.z),x.visibility&&Tt(_,4,x.visibility),x=Lt(_,Qt),A.call(w,j,x)}if(v.M)for(b=0;b<v.M.length;++b)A=(w=p.data).addClassification,j=y,x=v.M[b],Tt(_=new Vt,2,x.score),x.index&&Tt(_,1,x.index),x.label&&Tt(_,3,x.label),x.displayName&&Tt(_,4,x.displayName),x=Lt(_,Xt),A.call(w,j,x)}p=p.data;break t;default:p={}}}switch(l=p,c=s.stream,s.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},l),{stream:c,timestamp:n}));break;case"detections":(f=l).stream=c,f.timestamp=n,r.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+s.type+"'")}}return h.i.send(r),m(g,h.C,4);case 4:r.delete(),g.g=0}})},e.onResults=function(t,e){this.listeners[e||"$"]=t},E("Solution",me),E("OptionType",{BOOL:0,NUMBER:1,Z:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=_e.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(t){this.g.onResults(t)},e.initialize=function(){var t=this;return x(function(e){return m(e,t.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(t){var e=this;return x(function(n){return m(n,e.g.send(t),0)})},e.setOptions=function(t){this.g.setOptions(t)},E("Hands",_e),E("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),E("VERSION","0.4.1635986972")}).call(this);
},{}],"aMq5":[function(require,module,exports) {
"use strict";var e,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.FusableActivation=exports.CppDType=void 0,exports.CppDType=e,function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(e||(exports.CppDType=e={})),exports.FusableActivation=l,function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(l||(exports.FusableActivation=l={}));
},{}],"FXlS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let a;function n(t){a=t.wasm.cwrap(e._FusedMatMul,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function r(e){const{inputs:n,backend:r,attrs:s}=e,{a:u,b:o,bias:d,preluActivationWeights:p}=n;if("float32"!==u.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:l,transposeB:i,activation:b,leakyreluAlpha:f}=s,c=r.dataIdMap.get(u.dataId).id,h=r.dataIdMap.get(o.dataId).id;let M=0;if(null!=d){const e=r.dataIdMap.get(d.dataId);if(1!==e.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got "+`rank ${e.shape.length}.`);M=e.id}const m=null==p?0:r.dataIdMap.get(p.dataId).id,w=t.FusableActivation[b];if(null==w)throw new Error(`${b} activation not yet supported for FusedConv2D `+"in the wasm backend.");const y=l?u.shape[2]:u.shape[1],g=i?o.shape[1]:o.shape[2],I=u.shape[0],k=r.makeOutput([I,y,g],u.dtype),v=r.dataIdMap.get(k.dataId).id,A=new Uint8Array(new Int32Array(u.shape).buffer),F=new Uint8Array(new Int32Array(o.shape).buffer);return a(c,A,u.shape.length,h,F,o.shape.length,l,i,w,M,m,f||0,v),k}const s={kernelName:e._FusedMatMul,backendName:"wasm",setupFunc:n,kernelFunc:r};exports.fusedMatMulConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"yRDY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnaryKernelConfig=r;var e=require("@tensorflow/tfjs-core"),t=require("./types");function r(r,a){let n;return{kernelName:r,backendName:"wasm",setupFunc:function(e){n=e.wasm.cwrap(r,null,["number","number","number"])},kernelFunc:function(r){const{backend:u,inputs:{x:p}}=r,d=u.dataIdMap.get(p.dataId).id,s=u.makeOutput(p.shape,a||p.dtype),c=u.dataIdMap.get(s.dataId).id;return 0===e.util.sizeFromShape(s.shape)?s:(n(d,t.CppDType[p.dtype],c),s)}}}
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"gk2a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Abs);exports.absConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"dLQW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBinaryKernelConfig=r;var e=require("@tensorflow/tfjs-core"),t=require("./types");function r(r,a,n){let s;return{kernelName:r,backendName:"wasm",setupFunc:function(e){s=e.wasm.cwrap(r,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(u){const{backend:d,inputs:p}=u,{a:i,b:o}=p,c=d.dataIdMap.get(i.dataId).id,l=d.dataIdMap.get(o.dataId).id,y=null!=n?n:i.dtype,f=e.backend_util.assertAndGetBroadcastShape(i.shape,o.shape),b=d.makeOutput(f,y);if(0===e.util.sizeFromShape(f))return b;const m=new Uint8Array(new Int32Array(i.shape).buffer),h=new Uint8Array(new Int32Array(o.shape).buffer),g=d.dataIdMap.get(b.dataId).id,w=()=>s(c,m,i.shape.length,l,h,o.shape.length,t.CppDType[i.dtype],g);if(a&&"float32"===i.dtype)return w(),b;const k=e.backend_util.getBroadcastDims(i.shape,f),I=e.backend_util.getBroadcastDims(o.shape,f),A=k.every((e,t)=>e===t),B=I.every((e,t)=>e===t);if(A&&B)return w(),b;throw new Error("Broadcasting along outer dims is not yet "+`supported for ${i.dtype} ${r}.`)}}}
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"Wopl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!0,t=(0,r.createBinaryKernelConfig)(e.Add,!0);exports.addConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"gVHm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addNConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let r;function a(t){r=t.wasm.cwrap(e.AddN,null,["array","number","number","number"])}function n(a){const{inputs:n,backend:d}=a,u=d.makeOutput(n[0].shape,n[0].dtype);if(0===e.util.sizeFromShape(u.shape))return u;const p=n.map(e=>d.dataIdMap.get(e.dataId).id),s=new Uint8Array(new Int32Array(p).buffer),o=d.dataIdMap.get(u.dataId).id;return r(s,p.length,t.CppDType[u.dtype],o),u}const d={kernelName:e.AddN,backendName:"wasm",setupFunc:a,kernelFunc:n};exports.addNConfig=d;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"Utw2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:{x:t},backend:r}=e,n=r.makeOutput(t.shape,t.dtype),o=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(n).set(o),n}const r={kernelName:e.Identity,backendName:"wasm",kernelFunc:t};exports.identityConfig=r;
},{"@tensorflow/tfjs-core":"tc6m"}],"DwTu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=s,exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity"),n=require("./types");let r;function a(t){r=t.wasm.cwrap(e.Transpose,null,["number","array","number","number","number","array","number"])}function s(e){const{inputs:a,backend:s,attrs:u}=e,[d,l]=o(a.x.shape,u.perm);let i=!0;for(let t=0;t<l.length;t++)l[t]!==t&&(i=!1);const c=p(a.x.shape,u.perm),f={dataId:a.x.dataId,shape:d,dtype:a.x.dtype};if(i){const e=(0,t.identity)({inputs:a,backend:s});return e.shape=c,e}const h=s.makeOutput(c,f.dtype),y=s.dataIdMap.get(f.dataId).id,g=s.dataIdMap.get(h.dataId).id,m=new Uint8Array(new Int32Array(l).buffer),b=new Uint8Array(new Int32Array(f.shape).buffer);return r(y,b,f.shape.length,n.CppDType[f.dtype],g,m,l.length),h}function p(e,t){const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}function o(e,t){const n=[],r=[];for(let a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(let a=0;a<r.length;++a){let e=-1;for(let t=0;t<r.length;++t)r[t]>=a&&(-1===e||r[e]>r[t])&&(e=t);r[e]=a}return[n,r]}const u={kernelName:e.Transpose,backendName:"wasm",kernelFunc:s,setupFunc:a};exports.transposeConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","./Identity":"Utw2","./types":"aMq5"}],"njnR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.permuteAxesAndTranspose=s;var e=require("@tensorflow/tfjs-core"),t=require("./Transpose");function s(s,a,n){const r=s.shape,o=s.shape.length,d=e.util.parseAxisParam(a,r);let i=d;const l=e.backend_util.getAxesPermutation(i,o);let p=null,u=!1;if(null!=l){const a=new Array(o);for(let e=0;e<a.length;e++)a[e]=r[l[e]];i=e.backend_util.getInnerMostAxes(i.length,o),p=(0,t.transpose)({inputs:{x:s},attrs:{perm:l},backend:n});const d=n.dataIdMap.get(s.dataId).id;n.dataIdMap.get(p.dataId).id!==d&&(u=!0)}return{transposed:p,originalAxes:d,axes:i,inputWasTransposed:u}}
},{"@tensorflow/tfjs-core":"tc6m","./Transpose":"DwTu"}],"rWjF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.allConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./kernel_utils");let t;function s(a){t=a.wasm.cwrap(e.All,null,["number, number, number"])}function n(s){const{backend:n,inputs:d,attrs:r}=s,{axis:i,keepDims:p}=r,{x:o}=d;let u=n.dataIdMap.get(o.dataId).id,l=o;const{transposed:c,axes:m,originalAxes:f,inputWasTransposed:h}=(0,a.permuteAxesAndTranspose)(o,i,n);if(h){l=c,u=n.dataIdMap.get(c.dataId).id}const k=l.shape.length;e.backend_util.assertAxesAreInnerMostDims("all",m,k);const[x,b]=e.backend_util.computeOutAndReduceShapes(l.shape,m),A=e.util.sizeFromShape(b),I=n.makeOutput(x,o.dtype);if(0!==e.util.sizeFromShape(l.shape)){const e=n.dataIdMap.get(I.dataId).id;t(u,A,e)}if(h&&n.disposeData(c.dataId),p){const a=e.backend_util.expandShapeToKeepDim(I.shape,f);I.shape=a}return I}const d={kernelName:e.All,backendName:"wasm",setupFunc:s,kernelFunc:n};exports.allConfig=d;
},{"@tensorflow/tfjs-core":"tc6m","./kernel_utils":"njnR"}],"dGSu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.anyConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./kernel_utils");let t;function s(a){t=a.wasm.cwrap(e.Any,null,["number, number, number"])}function n(s){const{backend:n,inputs:d,attrs:r}=s,{axis:i,keepDims:p}=r,{x:o}=d;let u=n.dataIdMap.get(o.dataId).id,c=o;const{transposed:l,axes:m,originalAxes:f,inputWasTransposed:h}=(0,a.permuteAxesAndTranspose)(o,i,n);if(h){c=l,u=n.dataIdMap.get(l.dataId).id}const k=c.shape.length;e.backend_util.assertAxesAreInnerMostDims("any",m,k);const[x,b]=e.backend_util.computeOutAndReduceShapes(c.shape,m),A=e.util.sizeFromShape(b),I=n.makeOutput(x,o.dtype);if(0!==e.util.sizeFromShape(c.shape)){const e=n.dataIdMap.get(I.dataId).id;t(u,A,e)}if(h&&n.disposeData(l.dataId),p){const a=e.backend_util.expandShapeToKeepDim(I.shape,f);I.shape=a}return I}const d={kernelName:e.Any,backendName:"wasm",setupFunc:s,kernelFunc:n};exports.anyConfig=d;
},{"@tensorflow/tfjs-core":"tc6m","./kernel_utils":"njnR"}],"VpIU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./kernel_utils"),t=require("./types");let s;function r(a){s=a.wasm.cwrap(e.ArgMax,null,["number","number","number","number","number"])}function n(r){const{backend:n,inputs:d,attrs:p}=r,{axis:u}=p,{x:i}=d,o=n.dataIdMap.get(i.dataId).id;let c=o,l=i;const{transposed:m,axes:x,inputWasTransposed:g}=(0,a.permuteAxesAndTranspose)(i,u,n);if(g){const e=n.dataIdMap.get(m.dataId).id;e!==o&&(l=m,c=e)}const b=l.shape.slice(0,-1),f=n.makeOutput(b,"int32"),M=n.dataIdMap.get(f.dataId).id,I=e.util.sizeFromShape(f.shape),k=l.shape[x[0]];return s(c,t.CppDType[l.dtype],I,k,M),g&&n.disposeData(m.dataId),f}const d={kernelName:e.ArgMax,backendName:"wasm",kernelFunc:n,setupFunc:r};exports.argMaxConfig=d;
},{"@tensorflow/tfjs-core":"tc6m","./kernel_utils":"njnR","./types":"aMq5"}],"HwXs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function a(a){t=a.wasm.cwrap(e.AvgPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function n(a){const{inputs:n,attrs:o,backend:r}=a,i=n.x,d=r.dataIdMap.get(i.dataId).id,{filterSize:s,strides:u,pad:l,dimRoundingMode:p}=o,m=e.backend_util.computePool2DInfo(i.shape,s,u,1,l,p),b=m.filterHeight,h=m.filterWidth,c=m.padInfo.top,f=m.padInfo.right,g=m.padInfo.bottom,w=m.padInfo.left,I=m.strideHeight,k=m.strideWidth,v=m.inChannels;if("channelsLast"!==m.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+`${m.dataFormat}'. Please use 'channelsLast'.`);if(1!==m.dilationWidth||1!==m.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], "+`got [${m.dilationHeight}, ${m.dilationWidth}].`);const P=r.makeOutput(m.outShape,"float32"),F=r.dataIdMap.get(P.dataId).id;return t(d,i.shape[0],i.shape[1],i.shape[2],b,h,c,f,g,w,I,k,v,F),P}const o={kernelName:e.AvgPool,backendName:"wasm",setupFunc:a,kernelFunc:n};exports.avgPoolConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"neeS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=a,exports.reshapeConfig=void 0;var e=require("@tensorflow/tfjs-core");function a(a){const{inputs:s,attrs:t}=a,{x:r}=s,{shape:p}=t,n=e.util.sizeFromShape(r.shape),o=e.util.inferFromImplicitShape(p,n);return e.util.assert(n===e.util.sizeFromShape(o),()=>`new shape: ${o}, old shape: ${r.shape}. New shape and old `+"shape must have the same number of elements."),a.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}const s={kernelName:e.Reshape,backendName:"wasm",kernelFunc:a};exports.reshapeConfig=s;
},{"@tensorflow/tfjs-core":"tc6m"}],"LRzH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./Reshape");let t;function s(a){t=a.wasm.cwrap(e.BatchMatMul,null,["number","array","number","number","array","number","number","number","number"])}function n(s){const{inputs:n,backend:r,attrs:p}=s,{a:h,b:o}=n,{transposeA:i,transposeB:u}=p;if("float32"!==h.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const d=h.shape.length,c=o.shape.length,l=i?h.shape[d-2]:h.shape[d-1],m=u?o.shape[c-1]:o.shape[c-2],b=i?h.shape[d-1]:h.shape[d-2],f=u?o.shape[c-2]:o.shape[c-1],M=h.shape.slice(0,-2),w=o.shape.slice(0,-2),y=e.util.sizeFromShape(M),I=e.util.sizeFromShape(w),g=y===I||1===y||1===I;e.util.assert(d>=2&&c>=2&&g,()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${M}) and (${w}).`);const $=(y>I?h.shape.slice(0,-2):o.shape.slice(0,-2)).concat([b,f]);e.util.assert(l===m,()=>`Error in matMul: inner shapes (${l}) and (`+`${m}) of Tensors with shapes ${h.shape} and `+`${o.shape} and transposeA=${i}`+` and transposeB=${u} must match.`);const k=i?[y,l,b]:[y,b,l],x=u?[I,f,m]:[I,m,f],A=(0,a.reshape)({inputs:{x:h},backend:r,attrs:{shape:k}}),B=(0,a.reshape)({inputs:{x:o},backend:r,attrs:{shape:x}}),F=r.dataIdMap.get(A.dataId).id,v=r.dataIdMap.get(B.dataId).id,E=i?A.shape[2]:A.shape[1],j=u?B.shape[1]:B.shape[2],q=Math.max(y,I),z=r.makeOutput([q,E,j],A.dtype),C=r.dataIdMap.get(z.dataId).id,D=new Uint8Array(new Int32Array(A.shape).buffer),N=new Uint8Array(new Int32Array(B.shape).buffer);return t(F,D,A.shape.length,v,N,B.shape.length,i,u,C),r.disposeData(A.dataId),r.disposeData(B.dataId),z.shape=$,z}const r={kernelName:e.BatchMatMul,backendName:"wasm",setupFunc:s,kernelFunc:n};exports.batchMatMulConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"neeS"}],"mieG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"concatImplCPU",{enumerable:!0,get:function(){return e.concatImpl}}),Object.defineProperty(exports,"rangeImplCPU",{enumerable:!0,get:function(){return e.rangeImpl}}),Object.defineProperty(exports,"sliceImplCPU",{enumerable:!0,get:function(){return e.sliceImpl}});var e=require("@tensorflow/tfjs-backend-cpu/dist/shared");
},{"@tensorflow/tfjs-backend-cpu/dist/shared":"X8ov"}],"lm7K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=s,exports.sliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared");function s(s){const{inputs:{x:l},attrs:{begin:o,size:a},backend:c}=s,[u,p]=e.slice_util.parseSliceParams(l,o,a),f=e.slice_util.isSliceContinous(l.shape,u,p),d=c.readSync(l.dataId),y=c.makeOutput(p,l.dtype),m=e.util.computeStrides(l.shape),g=c.dataIdMap.get(y.dataId);if(f){const t=e.slice_util.computeFlatOffset(u,m);if("string"===l.dtype)g.stringBytes=d.slice(t,t+e.util.sizeFromShape(p));else{c.typedArrayFromHeap(y).set(d.subarray(t,t+e.util.sizeFromShape(p)))}return y}if("string"===l.dtype){const e=(0,t.sliceImplCPU)(d,u,p,l.shape,l.dtype);return g.stringBytes=e,y}const h=c.typedArrayFromHeap(y),b=l.shape.length;if(2===b)r(d,m[0],h,u,p);else if(3===b)i(d,m[0],m[1],h,u,p);else if(4===b)n(d,m[0],m[1],m[2],h,u,p);else{const e=(0,t.sliceImplCPU)(d,u,p,l.shape,l.dtype);h.set(e)}return y}function r(e,t,s,r,i){let n=0;const l=r[0],o=r[1],a=l+i[0];for(let c=l;c<a;c++){const r=c*t+o;s.set(e.subarray(r,r+i[1]),n),n+=i[1]}}function i(e,t,s,r,i,n){let l=0;const o=i[0],a=i[1],c=i[2],u=o+n[0],p=a+n[1];for(let f=o;f<u;f++)for(let i=a;i<p;i++){const o=f*t+i*s+c;r.set(e.subarray(o,o+n[2]),l),l+=n[2]}}function n(e,t,s,r,i,n,l){let o=0;const a=n[0],c=n[1],u=n[2],p=a+l[0],f=c+l[1],d=u+l[2],y=n[3];for(let m=a;m<p;m++)for(let n=c;n<f;n++)for(let a=u;a<d;a++){const c=m*t+n*s+a*r+y;i.set(e.subarray(c,c+l[3]),o),o+=l[3]}}const l={kernelName:e.Slice,backendName:"wasm",kernelFunc:s};exports.sliceConfig=l;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"mieG"}],"jEPl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceNDConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Reshape"),a=require("./Slice"),s=require("./Transpose");function n(n){const{inputs:r,backend:c,attrs:i}=n,{x:d}=r,{blockShape:p,crops:o}=i,u=p.reduce((e,t)=>e*t),l=e.backend_util.getReshaped(d.shape,p,u),h=e.backend_util.getPermuted(l.length,p.length),b=e.backend_util.getReshapedPermuted(d.shape,p,u),k=e.backend_util.getSliceBeginCoords(o,p.length),g=e.backend_util.getSliceSize(b,o,p.length),x=(0,t.reshape)({inputs:{x:d},backend:c,attrs:{shape:l}}),S=(0,s.transpose)({inputs:{x:x},backend:c,attrs:{perm:h}}),_=(0,t.reshape)({inputs:{x:S},backend:c,attrs:{shape:b}}),f=(0,a.slice)({inputs:{x:_},backend:c,attrs:{begin:k,size:g}});return c.disposeData(x.dataId),c.disposeData(S.dataId),c.disposeData(x.dataId),f}const r={kernelName:e.BatchToSpaceND,backendName:"wasm",kernelFunc:n};exports.batchToSpaceNDConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"neeS","./Slice":"lm7K","./Transpose":"DwTu"}],"izP8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=t,exports.castConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:{x:t},attrs:{dtype:r},backend:s}=e,a=s.makeOutput(t.shape,r),o=s.typedArrayFromHeap(t);return s.typedArrayFromHeap(a).set(o),a}const r={kernelName:e.Cast,backendName:"wasm",kernelFunc:t};exports.castConfig=r;
},{"@tensorflow/tfjs-core":"tc6m"}],"eI3T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Ceil);exports.ceilConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"ktHE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValueConfig=void 0;var e=require("@tensorflow/tfjs-core");let a;function t(t){a=t.wasm.cwrap(e.ClipByValue,null,["number","number","number","number"])}function n(e){const{inputs:t,backend:n,attrs:u}=e,{x:r}=t,{clipValueMin:l,clipValueMax:i}=u,p=n.dataIdMap.get(r.dataId).id,c=n.makeOutput(r.shape,r.dtype),d=n.dataIdMap.get(c.dataId).id;return a(p,l,i,d),c}const u={kernelName:e.ClipByValue,backendName:"wasm",setupFunc:t,kernelFunc:n};exports.clipByValueConfig=u;
},{"@tensorflow/tfjs-core":"tc6m"}],"sUBZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=r,exports.concatConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),a=require("./Identity"),s=require("./Reshape");function r(r){const{inputs:n,backend:p}=r,i=e.util.parseAxisParam(r.attrs.axis,n[0].shape)[0];let o=e.backend_util.computeOutShape(n.map(e=>e.shape),i);const c=n.filter(t=>e.util.sizeFromShape(t.shape)>0);if(1===c.length)return(0,a.identity)({inputs:{x:c[0]},backend:p});const u=p.makeOutput(o,n[0].dtype);if(0===e.util.sizeFromShape(o))return u;const l=c.map(e=>e.shape);if(e.backend_util.assertParamsConsistent(l,i),"string"===c[0].dtype){const a=c.map(t=>{const a=[-1,e.util.sizeFromShape(t.shape.slice(i))];return(0,s.reshape)({inputs:{x:t},backend:p,attrs:{shape:a}})}),r=a.map(e=>({vals:p.readSync(e.dataId),shape:e.shape}));o=e.backend_util.computeOutShape(a.map(e=>e.shape),1);const l=1===a[0].shape[0],d=(0,t.concatImplCPU)(r,o,n[0].dtype,l),h=e.backend_util.computeOutShape(c.map(e=>e.shape),i);return u.shape=h,p.dataIdMap.get(u.dataId).stringBytes=e.backend_util.fromStringArrayToUint8(d),a.forEach(e=>p.disposeData(e.dataId)),u}const d=e.util.sizeFromShape(c[0].shape.slice(0,i));let h=0;const m=c.map(t=>{const a=e.util.sizeFromShape(t.shape.slice(i));return h+=a,a}),f=c.map(e=>p.typedArrayFromHeap(e)),y=p.typedArrayFromHeap(u);for(let e=0;e<d;e++){let t=e*h;for(let a=0;a<f.length;a++){const s=m[a],r=e*s,n=f[a].subarray(r,r+s);y.set(n,t),t+=s}}return u}const n={kernelName:e.Concat,backendName:"wasm",kernelFunc:r};exports.concatConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"mieG","./Identity":"Utw2","./Reshape":"neeS"}],"JBir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function n(n){t=n.wasm.cwrap(e.Conv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function a(n){const{inputs:a,attrs:r,backend:o}=n,{x:d,filter:u}=a,i=o.dataIdMap.get(d.dataId).id,s=o.dataIdMap.get(u.dataId).id,{strides:m,dilations:p,pad:b,dimRoundingMode:l,dataFormat:c}=r,f=e.backend_util.convertConv2DDataFormat(c),h=e.backend_util.computeConv2DInfo(d.shape,u.shape,m,p,b,l,!1,f),I=h.filterHeight,v=h.filterWidth,g=h.padInfo.top,C=h.padInfo.right,k=h.padInfo.bottom,D=h.padInfo.left,w=h.dilationHeight,F=h.dilationWidth,M=h.strideHeight,x=h.strideWidth,_=h.inChannels,H=h.outChannels,W="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'"+`${h.dataFormat}'. Please use 'channelsLast'.`);const j=o.makeOutput(h.outShape,"float32"),y=o.dataIdMap.get(j.dataId).id;return t(i,d.shape[0],d.shape[1],d.shape[2],s,I,v,g,C,k,D,W,w,F,M,x,_,H,y),j}const r={kernelName:e.Conv2D,backendName:"wasm",setupFunc:n,kernelFunc:a};exports.conv2DConfig=r;
},{"@tensorflow/tfjs-core":"tc6m"}],"PwzO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core");let n;function t(t){n=t.wasm.cwrap(e.Conv2DBackpropInput,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function r(t){const{backend:r,inputs:u,attrs:a}=t,{dy:i,filter:o}=u,{strides:d,pad:m,dataFormat:p,dimRoundingMode:b,inputShape:s}=a,c=e.backend_util.convertConv2DDataFormat(p),l=e.backend_util.computeConv2DInfo(s,o.shape,d,1,m,b,!1,c),{batchSize:h,filterHeight:f,filterWidth:I,inChannels:k,inHeight:g,inWidth:v,outChannels:C,outHeight:D,outWidth:S,strideHeight:F,strideWidth:M}=l,w=f-1-l.padInfo.top,B=I-1-l.padInfo.left,H="channelsLast"===l.dataFormat,W=e.util.computeStrides(l.inShape),_=e.util.computeStrides(i.shape),[x,j,y]=e.util.computeStrides(o.shape),N=W[0],O=H?W[1]:W[2],q=H?W[2]:1,z=H?1:W[1],L=_[0],P=H?_[1]:_[2],R=H?_[2]:1,A=H?1:_[1],E=r.makeOutput(l.inShape,"float32"),G=r.dataIdMap.get(E.dataId).id,J=r.dataIdMap.get(i.dataId).id,K=r.dataIdMap.get(o.dataId).id;return n(J,K,h,f,I,g,v,k,D,S,C,F,M,w,B,x,j,y,N,O,q,z,L,P,R,A,G),E}const u={kernelName:e.Conv2DBackpropInput,backendName:"wasm",setupFunc:t,kernelFunc:r};exports.conv2DBackpropInputConfig=u;
},{"@tensorflow/tfjs-core":"tc6m"}],"wN8z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Cos);exports.cosConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"zqlm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Cosh);exports.coshConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"uATv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResizeConfig=void 0;var e,a=require("@tensorflow/tfjs-core"),t=require("./Cast");let n;function r(e){n=e.wasm.cwrap(a.CropAndResize,null,["number","number","number","number","array","number","number","number","number","number"])}function d(a){const{backend:r,inputs:d,attrs:s}=a,{method:o,extrapolationValue:i,cropSize:u}=s,{image:p,boxes:c,boxInd:b}=d,l=c.shape[0],[m,f]=u,I=[l,m,f,p.shape[3]];let g,x=r.dataIdMap.get(p.dataId);"float32"!==p.dtype&&(g=(0,t.cast)({backend:r,inputs:{x:p},attrs:{dtype:"float32"}}),x=r.dataIdMap.get(g.dataId));const k=x.id,w=r.dataIdMap.get(c.dataId).id,y=r.dataIdMap.get(b.dataId).id,A=r.makeOutput(I,"float32"),M=r.dataIdMap.get(A.dataId).id,z=new Uint8Array(new Int32Array(p.shape).buffer);return n(k,w,y,l,z,m,f,e[o],i,M),null!=g&&r.disposeData(g.dataId),A}!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(e||(e={}));const s={kernelName:a.CropAndResize,backendName:"wasm",setupFunc:r,kernelFunc:d};exports.cropAndResizeConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./Cast":"izP8"}],"pLr8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=u,exports.cumsumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types"),s=require("./Transpose");let n;function a(t){n=t.wasm.cwrap(e.Cumsum,null,["number","number","number","number","number","number"])}function u(a){const{inputs:u,backend:r,attrs:d}=a,{x:o}=u,{axis:p,exclusive:i,reverse:m}=d,c=o.shape.length;e.util.assert("float32"===o.dtype||"int32"===o.dtype,()=>`cumsum does not support ${o.dtype} tensors in the WASM backend`);const l=e.backend_util.getAxesPermutation([p],c);let b=o;null!==l&&(b=(0,s.transpose)({inputs:{x:o},attrs:{perm:l},backend:r}));const x=e.backend_util.getInnerMostAxes(1,c)[0];e.backend_util.assertAxesAreInnerMostDims("cumsum",[x],c);const k=r.makeOutput(b.shape,b.dtype),f=b.shape[x],g=r.dataIdMap.get(b.dataId).id,y=r.dataIdMap.get(k.dataId).id;n(g,i?1:0,m?1:0,f,y,t.CppDType[o.dtype]);let I=k;if(null!==l){const t=e.backend_util.getUndoAxesPermutation(l);I=(0,s.transpose)({inputs:{x:k},attrs:{perm:t},backend:r}),r.disposeData(b.dataId),r.disposeData(k.dataId)}return I}const r={kernelName:e.Cumsum,backendName:"wasm",setupFunc:a,kernelFunc:u};exports.cumsumConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5","./Transpose":"DwTu"}],"H6Cw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=r,exports.depthToSpaceConfig=void 0;var e=require("@tensorflow/tfjs-core");let a;function t(t){a=t.wasm.cwrap(e.DepthToSpace,null,["number","number","number","array","number","array","array","number","number"])}function r(t){const{backend:r,inputs:n,attrs:p}=t,{x:s}=n,{blockSize:u,dataFormat:o}=p,d=s.shape[0],c=("NHWC"===o?s.shape[1]:s.shape[2])*u,i=("NHWC"===o?s.shape[2]:s.shape[3])*u,h=("NHWC"===o?s.shape[3]:s.shape[1])/(u*u),f="NHWC"===o?[d,c,i,h]:[d,h,c,i],l=r.makeOutput(f,"float32"),m=r.dataIdMap.get(s.dataId).id,b=new Uint8Array(new Int32Array(e.util.computeStrides(s.shape)).buffer),w=new Uint8Array(new Int32Array(f).buffer),y=new Uint8Array(new Int32Array(e.util.computeStrides(f)).buffer),S=r.dataIdMap.get(l.dataId).id;return a(m,u,"NHWC"===o?1:0,b,s.shape.length-1,w,y,f.length,S),l}const n={kernelName:e.DepthToSpace,backendName:"wasm",setupFunc:t,kernelFunc:r};exports.depthToSpaceConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"dbib":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function n(n){t=n.wasm.cwrap(e.DepthwiseConv2dNative,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function a(n){const{inputs:a,attrs:d,backend:r}=n,{x:o,filter:i}=a,s=r.dataIdMap.get(o.dataId).id,u=r.dataIdMap.get(i.dataId).id,{strides:p,dilations:m,pad:b,dimRoundingMode:l}=d,h=null==m?[1,1]:m,f=e.backend_util.computeConv2DInfo(o.shape,i.shape,p,h,b,l,!0),c=f.filterHeight,v=f.filterWidth,w=f.padInfo.top,I=f.padInfo.right,g=f.padInfo.bottom,C=f.padInfo.left,k=f.dilationHeight,N=f.dilationWidth,M=f.strideHeight,F=f.strideWidth,x=f.inChannels,D=f.outChannels,H="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'"+`${f.dataFormat}'. Please use 'channelsLast'.`);const W=r.makeOutput(f.outShape,"float32"),_=r.dataIdMap.get(W.dataId).id;return t(s,o.shape[0],o.shape[1],o.shape[2],u,c,v,w,I,g,C,H,k,N,M,F,x,D,_),W}const d={kernelName:e.DepthwiseConv2dNative,backendName:"wasm",setupFunc:n,kernelFunc:a};exports.depthwiseConv2dNativeConfig=d;
},{"@tensorflow/tfjs-core":"tc6m"}],"BEAy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Elu);exports.eluConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"sJAt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!1,t=(0,r.createBinaryKernelConfig)(e.Equal,!1,"bool");exports.equalConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"VR2B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Exp,"float32");exports.expConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"QfDi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=t,exports.expandDimsConfig=void 0;var e=require("@tensorflow/tfjs-core"),s=require("./Reshape");function t(t){const{inputs:n,attrs:r,backend:i}=t,{input:a}=n,{dim:p}=r,o=a.shape.length,u=a.shape.slice();let c=p;return p<0&&(e.util.assert(-(o+1)<=p,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+p+1),u.splice(c,0,1),(0,s.reshape)({inputs:{x:a},backend:i,attrs:{shape:u}})}const n={kernelName:e.ExpandDims,backendName:"wasm",kernelFunc:t};exports.expandDimsConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"neeS"}],"LV6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=r,exports.fillConfig=void 0;var e=require("@tensorflow/tfjs-core");function r(e){const{attrs:{shape:r,value:t,dtype:l},backend:o}=e,n=o.makeOutput(r,l);return o.typedArrayFromHeap(n).fill(t),n}const t={kernelName:e.Fill,backendName:"wasm",kernelFunc:r};exports.fillConfig=t;
},{"@tensorflow/tfjs-core":"tc6m"}],"stjm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRight=a,exports.flipLeftRightConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function n(n){t=n.wasm.cwrap(e.FlipLeftRight,null,["number","number","number","number","number","number"])}function a(e){const{inputs:n,backend:a}=e,{image:r}=n,i=a.makeOutput(r.shape,r.dtype),u=a.dataIdMap.get(r.dataId).id,p=a.dataIdMap.get(i.dataId).id,[s,d,o,f]=r.shape;return t(u,s,d,o,f,p),i}const r={kernelName:e.FlipLeftRight,backendName:"wasm",kernelFunc:a,setupFunc:n};exports.flipLeftRightConfig=r;
},{"@tensorflow/tfjs-core":"tc6m"}],"X91p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Floor);exports.floorConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"nmIi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!1,i=(0,r.createBinaryKernelConfig)(e.FloorDiv,!1);exports.floorDivConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"TqmA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedBatchNormConfig=void 0;var e=require("@tensorflow/tfjs-core");let a;function t(t){a=t.wasm.cwrap(e.FusedBatchNorm,null,["number","number","number","number","number","number","number"])}function d(t){const{backend:d,inputs:n,attrs:r}=t,{varianceEpsilon:u}=r,{x:s,mean:o,variance:i,offset:c,scale:p}=n,m=d.dataIdMap.get(s.dataId).id,l=d.dataIdMap.get(o.dataId).id,f=d.dataIdMap.get(i.dataId).id,I=null!=c?d.dataIdMap.get(c.dataId).id:0,b=null!=p?d.dataIdMap.get(p.dataId).id:0,g=d.makeOutput(s.shape,s.dtype);if(0===e.util.sizeFromShape(s.shape))return g;const h=d.dataIdMap.get(g.dataId).id;return a(m,l,f,I,b,u,h),g}const n={kernelName:e.FusedBatchNorm,backendName:"wasm",setupFunc:t,kernelFunc:d};exports.fusedBatchNormConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"bhEZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let n;function a(t){n=t.wasm.cwrap(e.FusedConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function r(a){const{inputs:r,attrs:o,backend:d}=a,{x:u,filter:i,bias:s,preluActivationWeights:p}=r,{strides:b,pad:m,dilations:l,dataFormat:h,dimRoundingMode:c,activation:f,leakyreluAlpha:g}=o,v=e.backend_util.computeConv2DInfo(u.shape,i.shape,b,l,m,c),I=t.FusableActivation[f];if(null==I)throw new Error(`${f} activation not yet supported for FusedConv2D `+"in the wasm backend.");const C=d.dataIdMap.get(u.dataId).id,w=d.dataIdMap.get(i.dataId).id,k=v.outChannels;let F=0;if(null!=s){const e=d.dataIdMap.get(s.dataId);if(1!==e.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got "+`rank ${e.shape.length}.`);if(e.shape[0]!==k)throw new Error(`FusedConv2D bias shape (${e.shape}) does not `+`match the number of output channels (${k})`);F=e.id}const D=v.filterHeight,M=v.filterWidth,W=v.padInfo.top,y=v.padInfo.right,H=v.padInfo.bottom,E=v.padInfo.left,$=v.dilationHeight,x=v.dilationWidth,A=v.strideHeight,N=v.strideWidth,S=v.inChannels,_="SAME"===v.padInfo.type?1:0,j=v.batchSize,q=v.inHeight,O=v.inWidth;if("NHWC"!==h)throw new Error("wasm backend FusedConv2D does not support dataFormat:'"+`${h}'. Please use 'NHWC'.`);const P=d.makeOutput(v.outShape,"float32"),z=d.dataIdMap.get(P.dataId).id,R=null==p?0:d.dataIdMap.get(p.dataId).id;return n(C,j,q,O,w,D,M,F,W,y,H,E,_,$,x,A,N,S,k,I,R,g||0,z),P}const o={kernelName:e.FusedConv2D,backendName:"wasm",setupFunc:a,kernelFunc:r};exports.fusedConv2DConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"Va4V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedDepthwiseConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let n;function a(t){n=t.wasm.cwrap(e.FusedDepthwiseConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function r(a){const{inputs:r,attrs:o,backend:i}=a,{x:s,filter:d,bias:u,preluActivationWeights:p}=r,{strides:h,pad:b,dilations:m,dataFormat:l,dimRoundingMode:c,activation:f,leakyreluAlpha:w}=o,g=e.backend_util.computeConv2DInfo(s.shape,d.shape,h,m,b,c,!0),D=t.FusableActivation[f];if(null==D)throw new Error(`${f} activation not yet supported for FusedDepthwiseConv2D `+"in the wasm backend.");const v=i.dataIdMap.get(s.dataId).id,I=i.dataIdMap.get(d.dataId).id,C=g.outChannels;let k=0;if(null!=u){const e=i.dataIdMap.get(u.dataId);if(1!==e.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got "+`rank ${e.shape.length}.`);if(e.shape[0]!==C)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not `+`match the number of output channels (${C})`);k=e.id}const F=g.filterHeight,M=g.filterWidth,W=g.padInfo.top,y=g.padInfo.right,H=g.padInfo.bottom,E=g.padInfo.left,$=g.dilationHeight,x=g.dilationWidth,A=g.strideHeight,N=g.strideWidth,S=g.inChannels,_="SAME"===g.padInfo.type?1:0,j=g.batchSize,q=g.inHeight,O=g.inWidth;if("NHWC"!==l)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'"+`${l}'. Please use 'NHWC'.`);const P=i.makeOutput(g.outShape,"float32"),z=i.dataIdMap.get(P.dataId).id,R=null==p?0:i.dataIdMap.get(p.dataId).id;return n(v,j,q,O,I,F,M,k,W,y,H,E,_,$,x,A,N,S,C,D,R,w||0,z),P}const o={kernelName:e.FusedDepthwiseConv2D,backendName:"wasm",setupFunc:a,kernelFunc:r};exports.fusedDepthwiseConv2DConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"BBQw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let r;function a(t){r=t.wasm.cwrap(e.GatherNd,null,["number","number","number","number","number","number","array","number"])}function n(a){const{backend:n,inputs:d}=a,{params:u,indices:p}=d,[i,s,o,c]=e.gather_util.prepareAndValidate(u,p),m=n.makeOutput(i,u.dtype);if(0===s)return m;const b=p.shape,l=b[b.length-1],f=n.dataIdMap.get(u.dataId).id,g=n.dataIdMap.get(p.dataId).id,y=new Uint8Array(new Int32Array(c).buffer),h=n.dataIdMap.get(m.dataId).id;return r(f,t.CppDType[u.dtype],g,s,l,o,y,h),m}const d={kernelName:e.GatherNd,backendName:"wasm",setupFunc:a,kernelFunc:n};exports.gatherNdConfig=d;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"diU4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Reshape"),a=require("./types");let r;function i(e){r=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function s(i){const{backend:s,inputs:n,attrs:p}=i,{x:u,indices:d}=n,{axis:c,batchDims:h}=p,o=e.util.parseAxisParam(c,u.shape)[0],l=s.readSync(d.dataId),b=u.shape[o];for(let t=0;t<l.length;++t){const a=l[t];e.util.assert(a<=b-1&&a>=0,()=>`GatherV2: the index value ${a} is not in [0, ${b-1}]`)}const m=e.backend_util.segment_util.collectGatherOpShapeInfo(u,d,o,h),S=(0,t.reshape)({inputs:{x:u},attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]},backend:s}),f=e.util.sizeFromShape(d.shape),z=(0,t.reshape)({inputs:{x:d},attrs:{shape:[m.batchSize,f/m.batchSize]},backend:s}),y=[m.batchSize,m.outerSize,f/m.batchSize,m.sliceSize],I=s.makeOutput(y,u.dtype);if(0===e.util.sizeFromShape(u.shape))return I;const g=S.shape.length-1,x=s.dataIdMap.get(S.dataId).id,k=s.dataIdMap.get(z.dataId).id,w=s.dataIdMap.get(I.dataId).id,A=new Uint8Array(new Int32Array(e.util.computeStrides(S.shape)).buffer),v=new Uint8Array(new Int32Array(e.util.computeStrides(y)).buffer);return r(x,a.CppDType[u.dtype],A,g,k,m.batchSize,v,w),s.disposeData(S.dataId),s.disposeData(z.dataId),I.shape=m.outputShape,I}const n={kernelName:e.GatherV2,backendName:"wasm",setupFunc:i,kernelFunc:s};exports.gatherV2Config=n;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"neeS","./types":"aMq5"}],"D3cq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!1,t=(0,r.createBinaryKernelConfig)(e.Greater,!1,"bool");exports.greaterConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"VtQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!1,t=(0,r.createBinaryKernelConfig)(e.GreaterEqual,!1,"bool");exports.greaterEqualConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"IYUE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=u,exports.leakyReluConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let a;function r(t){a=t.wasm.cwrap(e.LeakyRelu,null,["number","number","number","number"])}function u(r){const{inputs:{x:u},attrs:{alpha:n},backend:s}=r,p=s.dataIdMap.get(u.dataId).id,l=s.makeOutput(u.shape,"float32");if(0!==e.util.sizeFromShape(u.shape)){const e=s.dataIdMap.get(l.dataId).id;a(p,t.CppDType[u.dtype],n,e)}return l}const n={kernelName:e.LeakyRelu,backendName:"wasm",setupFunc:r,kernelFunc:u};exports.leakyReluConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"GKZ2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!1,s=(0,r.createBinaryKernelConfig)(e.Less,!1,"bool");exports.lessConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"uJgd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqualConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!1,s=(0,r.createBinaryKernelConfig)(e.LessEqual,!1,"bool");exports.lessEqualConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"vLBg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Log);exports.logConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"tNjt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAndConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("./binary_kernel");const r=!1,i=(0,o.createBinaryKernelConfig)(e.LogicalAnd,!1,"bool");exports.logicalAndConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"eNWP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./kernel_utils"),a=require("./types");let s;function n(t){s=t.wasm.cwrap(e.Max,null,["number","number","number","number"])}function r(n){const{backend:r,inputs:d,attrs:p}=n,{reductionIndices:i,keepDims:u}=p,{x:o}=d;let c=r.dataIdMap.get(o.dataId).id,m=o;const{transposed:l,axes:x,originalAxes:b,inputWasTransposed:f}=(0,t.permuteAxesAndTranspose)(o,i,r);if(f){m=l,c=r.dataIdMap.get(l.dataId).id}const h=m.shape.length;e.backend_util.assertAxesAreInnerMostDims("max",x,h);const[k,I]=e.backend_util.computeOutAndReduceShapes(m.shape,x),g=e.util.sizeFromShape(I),M=r.makeOutput(k,o.dtype);if(0!==e.util.sizeFromShape(m.shape)){const e=r.dataIdMap.get(M.dataId).id;s(c,a.CppDType[o.dtype],g,e)}if(f&&r.disposeData(l.dataId),u){const t=e.backend_util.expandShapeToKeepDim(M.shape,b);M.shape=t}return M}const d={kernelName:e.Max,backendName:"wasm",setupFunc:n,kernelFunc:r};exports.maxConfig=d;
},{"@tensorflow/tfjs-core":"tc6m","./kernel_utils":"njnR","./types":"aMq5"}],"aVPR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const i=!1,o=(0,r.createBinaryKernelConfig)(e.Maximum,!1);exports.maximumConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"ZbDC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function n(n){t=n.wasm.cwrap(e.MaxPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function a(n){const{inputs:a,attrs:o,backend:r}=n,u=a.x,d=r.dataIdMap.get(u.dataId).id;e.util.assert("float32"===u.dtype,()=>`Error in MaxPool: only float32 input is supported. Got ${u.dtype}.`);const{filterSize:s,strides:i,pad:l,dimRoundingMode:m}=o,p=e.backend_util.computePool2DInfo(u.shape,s,i,1,l,m),b=p.filterHeight,f=p.filterWidth,c=p.padInfo.top,h=p.padInfo.right,g=p.padInfo.bottom,x=p.padInfo.left,I=p.dilationHeight,P=p.dilationWidth,k=p.strideHeight,w=p.strideWidth,M=p.inChannels,F=p.outChannels;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+`${p.dataFormat}'. Please use 'channelsLast'.`);const y=r.makeOutput(p.outShape,"float32"),C=r.dataIdMap.get(y.dataId).id;return t(d,u.shape[0],u.shape[1],u.shape[2],b,f,c,h,g,x,I,P,k,w,M,F,C),y}const o={kernelName:e.MaxPool,backendName:"wasm",setupFunc:n,kernelFunc:a};exports.maxPoolConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"M2N2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mean=d,exports.meanConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Cast"),a=require("./kernel_utils");let s;function n(t){s=t.wasm.cwrap(e.Mean,null,["number, number, number"])}function d(n){const{backend:d,inputs:o,attrs:p}=n,{axis:r,keepDims:i}=p,{x:u}=o,l=d.dataIdMap.get(u.dataId).id;let c=l,m=u;const{transposed:f,axes:h,originalAxes:x,inputWasTransposed:k}=(0,a.permuteAxesAndTranspose)(u,r,d);let I=h;if(k){const t=d.dataIdMap.get(f.dataId).id;t!==l&&(m=f,c=t,I=e.backend_util.getInnerMostAxes(I.length,m.shape.length))}e.backend_util.assertAxesAreInnerMostDims("mean",I,m.shape.length);const[b,g]=e.backend_util.computeOutAndReduceShapes(m.shape,I),M=e.util.sizeFromShape(g);let A=m;"float32"!==m.dtype&&(A=(0,t.cast)({backend:d,inputs:{x:m},attrs:{dtype:"float32"}}),c=d.dataIdMap.get(A.dataId).id);const _=d.makeOutput(b,"float32");if(0!==e.util.sizeFromShape(m.shape)){const e=d.dataIdMap.get(_.dataId).id;s(c,M,e)}if(k&&d.disposeData(f.dataId),i){const t=e.backend_util.expandShapeToKeepDim(_.shape,x);_.shape=t}return"float32"!==m.dtype&&d.disposeData(A.dataId),_}const o={kernelName:e.Mean,backendName:"wasm",setupFunc:n,kernelFunc:d};exports.meanConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./Cast":"izP8","./kernel_utils":"njnR"}],"OR3i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./kernel_utils"),a=require("./types");let s;function n(t){s=t.wasm.cwrap(e.Min,null,["number","number","number","number"])}function i(n){const{backend:i,inputs:p,attrs:r}=n,{axis:d,keepDims:o}=r,{x:u}=p,c=i.dataIdMap.get(u.dataId).id;let m=c,l=u;const{transposed:b,axes:f,originalAxes:h,inputWasTransposed:k}=(0,t.permuteAxesAndTranspose)(u,d,i);if(k){const e=i.dataIdMap.get(b.dataId).id;e!==c&&(l=b,m=e)}const x=l.shape.length;e.backend_util.assertAxesAreInnerMostDims("min",f,x);const[I,g]=e.backend_util.computeOutAndReduceShapes(l.shape,f),M=e.util.sizeFromShape(g),A=i.makeOutput(I,l.dtype);if(0!==e.util.sizeFromShape(l.shape)){const e=i.dataIdMap.get(A.dataId).id;s(m,a.CppDType[u.dtype],M,e)}if(k&&i.disposeData(b.dataId),o){const t=e.backend_util.expandShapeToKeepDim(A.shape,h);A.shape=t}return A}const p={kernelName:e.Min,backendName:"wasm",setupFunc:n,kernelFunc:i};exports.minConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./kernel_utils":"njnR","./types":"aMq5"}],"dNun":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const i=!1,n=(0,r.createBinaryKernelConfig)(e.Minimum,!1);exports.minimumConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"WtkM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPadConfig=void 0;var r,e=require("@tensorflow/tfjs-core"),a=require("./types");let t;function n(r){t=r.wasm.cwrap(e.MirrorPad,null,["number","array","number","number","array","array","number","number"])}function d(e){const{inputs:{x:n},backend:d,attrs:{paddings:u,mode:i}}=e,p=u.map((r,e)=>r[0]+n.shape[e]+r[1]),s=d.dataIdMap.get(n.dataId).id,o=d.makeOutput(p,n.dtype),m=d.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(n.shape).buffer),f=u.map(r=>r[0]),y=u.map(r=>r[1]),b=new Uint8Array(new Int32Array(f).buffer),l=new Uint8Array(new Int32Array(y).buffer);return t(s,c,n.shape.length,a.CppDType[n.dtype],b,l,r[i],m),o}!function(r){r[r.reflect=0]="reflect",r[r.symmetric=1]="symmetric"}(r||(r={}));const u={kernelName:e.MirrorPad,backendName:"wasm",kernelFunc:d,setupFunc:n};exports.mirrorPadConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"H9C8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const t=!0,i=(0,r.createBinaryKernelConfig)(e.Multiply,!0);exports.multiplyConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"mUBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.negConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Neg);exports.negConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"YwON":[function(require,module,exports) {
"use strict";function e(e,t){const r=new Int32Array(e.wasm.HEAPU8.buffer,t,4),s=r[0],c=r[1],u=r[2],n=r[3];return e.wasm._free(t),{pSelectedIndices:s,selectedSize:c,pSelectedScores:u,pValidOutputs:n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseResultStruct=e;
},{}],"jqP7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3Config=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./NonMaxSuppression_util");let s;function t(r){s=r.wasm.cwrap(e.NonMaxSuppressionV3,"number",["number","number","number","number","number"])}function n(e){const{backend:t,inputs:n,attrs:u}=e,{iouThreshold:o,maxOutputSize:a,scoreThreshold:p}=u,{boxes:i,scores:d}=n,c=t.dataIdMap.get(i.dataId).id,l=t.dataIdMap.get(d.dataId).id,m=s(c,l,a,o,p),{pSelectedIndices:S,selectedSize:b,pSelectedScores:x,pValidOutputs:f}=(0,r.parseResultStruct)(t,m);return t.wasm._free(x),t.wasm._free(f),t.makeOutput([b],"int32",S)}const u={kernelName:e.NonMaxSuppressionV3,backendName:"wasm",setupFunc:t,kernelFunc:n};exports.nonMaxSuppressionV3Config=u;
},{"@tensorflow/tfjs-core":"tc6m","./NonMaxSuppression_util":"YwON"}],"QEVV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV4Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./NonMaxSuppression_util");let n;function r(t){n=t.wasm.cwrap(e.NonMaxSuppressionV4,"number",["number","number","number","number","number","bool"])}function s(e){const{backend:r,inputs:s,attrs:u}=e,{iouThreshold:o,maxOutputSize:a,scoreThreshold:p,padToMaxOutputSize:i}=u,{boxes:d,scores:c}=s,l=r.dataIdMap.get(d.dataId).id,m=r.dataIdMap.get(c.dataId).id,S=n(l,m,a,o,p,i),{pSelectedIndices:b,selectedSize:x,pSelectedScores:M,pValidOutputs:f}=(0,t.parseResultStruct)(r,S);return r.wasm._free(M),[r.makeOutput([x],"int32",b),r.makeOutput([],"int32",f)]}const u={kernelName:e.NonMaxSuppressionV4,backendName:"wasm",setupFunc:r,kernelFunc:s};exports.nonMaxSuppressionV4Config=u;
},{"@tensorflow/tfjs-core":"tc6m","./NonMaxSuppression_util":"YwON"}],"xoKX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV5Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./NonMaxSuppression_util");let s;function n(t){s=t.wasm.cwrap(e.NonMaxSuppressionV5,"number",["number","number","number","number","number","number"])}function r(e){const{backend:n,inputs:r,attrs:u}=e,{iouThreshold:o,maxOutputSize:a,scoreThreshold:p,softNmsSigma:i}=u,{boxes:d,scores:c}=r,m=n.dataIdMap.get(d.dataId).id,l=n.dataIdMap.get(c.dataId).id,S=s(m,l,a,o,p,i),{pSelectedIndices:b,selectedSize:f,pSelectedScores:x,pValidOutputs:M}=(0,t.parseResultStruct)(n,S);return n.wasm._free(M),[n.makeOutput([f],"int32",b),n.makeOutput([f],"float32",x)]}const u={kernelName:e.NonMaxSuppressionV5,backendName:"wasm",setupFunc:n,kernelFunc:r};exports.nonMaxSuppressionV5Config=u;
},{"@tensorflow/tfjs-core":"tc6m","./NonMaxSuppression_util":"YwON"}],"MYWz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualConfig=void 0;var e=require("@tensorflow/tfjs-core"),o=require("./binary_kernel");const r=!1,t=(0,o.createBinaryKernelConfig)(e.NotEqual,!1,"bool");exports.notEqualConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"JOtu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHotConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function n(n){t=n.wasm.cwrap(e.OneHot,null,["number","number","number","number","number"])}function a(e){const{inputs:n,backend:a,attrs:o}=e,{indices:r}=n,{depth:u,onValue:d,offValue:s}=o,i=a.makeOutput([...r.shape,u],"int32"),c=a.dataIdMap.get(i.dataId).id,p=a.dataIdMap.get(r.dataId).id;return t(p,u,d,s,c),i}const o={kernelName:e.OneHot,backendName:"wasm",setupFunc:n,kernelFunc:a};exports.oneHotConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"WJLk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLikeConfig=void 0;var e=require("@tensorflow/tfjs-core");function n(e){const{inputs:{x:n},backend:r}=e,t=r.makeOutput(n.shape,n.dtype);return r.typedArrayFromHeap(t).fill(1),t}const r={kernelName:e.OnesLike,backendName:"wasm",kernelFunc:n};exports.onesLikeConfig=r;
},{"@tensorflow/tfjs-core":"tc6m"}],"lzsM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pack=a,exports.packConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./Concat"),s=require("./ExpandDims");function a(a){const{inputs:n,backend:r,attrs:c}=a,{axis:p}=c;if(1===n.length)return(0,s.expandDims)({inputs:{input:n[0]},backend:r,attrs:{dim:p}});const i=n[0].shape,o=n[0].dtype;n.forEach(e=>{t.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),t.util.assert(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],d=n.map(t=>{const e=(0,s.expandDims)({inputs:{input:t},backend:r,attrs:{dim:p}});return u.push(e),e}),h=(0,e.concat)({inputs:d,backend:r,attrs:{axis:p}});return u.forEach(t=>r.disposeData(t.dataId)),h}const n={kernelName:t.Pack,backendName:"wasm",kernelFunc:a};exports.packConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Concat":"sUBZ","./ExpandDims":"QfDi"}],"vsAd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2Config=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./Fill"),r=require("./types");let t;function n(a){t=a.wasm.cwrap(e.PadV2,null,["number","array","number","number","array","array","number","number"])}function p(n){const{inputs:{x:p},backend:u,attrs:{paddings:d,constantValue:s}}=n,i=d.map((e,a)=>e[0]+p.shape[a]+e[1]);if(0===e.util.sizeFromShape(p.shape))return(0,a.fill)({backend:u,attrs:{shape:i,value:s,dtype:p.dtype}});const o=u.dataIdMap.get(p.dataId).id,l=u.makeOutput(i,p.dtype),y=u.dataIdMap.get(l.dataId).id,c=new Uint8Array(new Int32Array(p.shape).buffer),f=d.map(e=>e[0]),m=d.map(e=>e[1]),b=new Uint8Array(new Int32Array(f).buffer),w=new Uint8Array(new Int32Array(m).buffer);return t(o,c,p.shape.length,r.CppDType[p.dtype],b,w,s,y),l}const u={kernelName:e.PadV2,backendName:"wasm",kernelFunc:p,setupFunc:n};exports.padV2Config=u;
},{"@tensorflow/tfjs-core":"tc6m","./Fill":"LV6k","./types":"aMq5"}],"jot5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!1,t=(0,r.createBinaryKernelConfig)(e.Pow,!1);exports.powConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"IA2D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preluConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./Cast");let a;function d(e){a=e.wasm.cwrap(t.Prelu,null,["number","number","number"])}function n(t){const{inputs:d,backend:n}=t,{x:r,alpha:s}=d,u=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(s.dataId).id;let p=u;const l=r;let c=l;"float32"!==l.dtype&&(c=(0,e.cast)({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),p=n.dataIdMap.get(c.dataId).id);const i=n.makeOutput(r.shape,"float32"),f=n.dataIdMap.get(i.dataId).id;return a(p,o,f),"float32"!==l.dtype&&n.disposeData(c.dataId),i}const r={kernelName:t.Prelu,backendName:"wasm",setupFunc:d,kernelFunc:n};exports.preluConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Cast":"izP8"}],"HOvM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prodConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./kernel_utils"),a=require("./types");let s;function n(t){s=t.wasm.cwrap(e.Prod,null,["number","number","number","number"])}function r(n){const{backend:r,inputs:d,attrs:p}=n,{axis:o,keepDims:i}=p,{x:u}=d,c=r.dataIdMap.get(u.dataId).id;let l=c,m=u;const{transposed:h,axes:b,originalAxes:k,inputWasTransposed:x}=(0,t.permuteAxesAndTranspose)(u,o,r);let f=b;if(x){const t=r.dataIdMap.get(h.dataId).id;t!==c&&(m=h,l=t,f=e.backend_util.getInnerMostAxes(f.length,m.shape.length))}e.backend_util.assertAxesAreInnerMostDims("prod",f,m.shape.length);const[g,I]=e.backend_util.computeOutAndReduceShapes(m.shape,f),A=e.util.sizeFromShape(I),_=r.makeOutput(g,m.dtype);if(0!==e.util.sizeFromShape(m.shape)){const e=r.dataIdMap.get(_.dataId).id;s(l,A,a.CppDType[_.dtype],e)}if(x&&r.disposeData(h.dataId),i){const t=e.backend_util.expandShapeToKeepDim(_.shape,k);_.shape=t}return _}const d={kernelName:e.Prod,backendName:"wasm",setupFunc:n,kernelFunc:r};exports.prodConfig=d;
},{"@tensorflow/tfjs-core":"tc6m","./kernel_utils":"njnR","./types":"aMq5"}],"Piw1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rangeConfig=exports.range=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared");const t=e=>{const{backend:t,attrs:n}=e,{start:s,stop:a,step:o,dtype:p}=n,u=(0,r.rangeImplCPU)(s,a,o,p),c=t.makeOutput([u.length],p);return t.typedArrayFromHeap(c).set(u),c};exports.range=t;const n={kernelName:e.Range,backendName:"wasm",kernelFunc:t};exports.rangeConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","../kernel_utils/shared":"mieG"}],"nPhY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.realDivConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const i=!0,o=(0,r.createBinaryKernelConfig)(e.RealDiv,!0);exports.realDivConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"eGIa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Relu);exports.reluConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"Nh5D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6Config=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Relu6);exports.relu6Config=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"oBa4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Cast");let a;function n(t){a=t.wasm.cwrap(e.ResizeBilinear,null,["number","number","number","number","number","number","number","number","number","number"])}function r(n){const{backend:r,inputs:s,attrs:i}=n,{images:u}=s,{alignCorners:d,halfPixelCenters:o,size:l}=i,[p,m]=l,[c,b,f,g]=u.shape,I=[c,p,m,g];let k,z=r.dataIdMap.get(u.dataId);"float32"!==z.dtype&&(k=(0,t.cast)({backend:r,inputs:{x:u},attrs:{dtype:"float32"}}),z=r.dataIdMap.get(k.dataId));const x=z.id,C=r.makeOutput(I,"float32");if(0===e.util.sizeFromShape(u.shape))return C;const h=r.dataIdMap.get(C.dataId).id;return a(x,c,b,f,g,p,m,d?1:0,o?1:0,h),null!=k&&r.disposeData(k.dataId),C}const s={kernelName:e.ResizeBilinear,backendName:"wasm",setupFunc:n,kernelFunc:r};exports.resizeBilinearConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./Cast":"izP8"}],"xhnX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=s,exports.reverseConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./Identity"),t=require("./Reshape");let a;function n(r){a=r.wasm.cwrap(e.Reverse,null,["number","array","number","array","number","number"])}function s(n){const{inputs:s,backend:u,attrs:i}=n,{x:p}=s,{dims:d}=i,o=e.util.parseAxisParam(d,p.shape);if(0===p.shape.length)return(0,r.identity)({inputs:{x:p},backend:u});const c=u.makeOutput(p.shape,p.dtype),f=u.dataIdMap.get(p.dataId).id,h=u.dataIdMap.get(c.dataId).id,l=new Uint8Array(new Int32Array(o).buffer),b=new Uint8Array(new Int32Array(p.shape).buffer);a(f,l,o.length,b,p.shape.length,h);const m=(0,t.reshape)({inputs:{x:c},attrs:{shape:p.shape},backend:u});return u.disposeData(c.dataId),m}const u={kernelName:e.Reverse,backendName:"wasm",kernelFunc:s,setupFunc:n};exports.reverseConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","./Identity":"Utw2","./Reshape":"neeS"}],"bDUI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffset=n,exports.rotateWithOffsetConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function r(r){t=r.wasm.cwrap(e.RotateWithOffset,null,["number","number","number","number","number","number","number","number","array","number","number"])}function n(r){const{inputs:n,backend:a,attrs:u}=r,{image:s}=n,{radians:o,fillValue:f,center:i}=u,d=a.makeOutput(s.shape,s.dtype),m=a.dataIdMap.get(s.dataId).id,b=a.dataIdMap.get(d.dataId).id,[p,c,l,g]=s.shape,[h,O]=e.backend_util.getImageCenter(i,c,l),k="number"==typeof f?[f,f,f,0===f?0:255]:[...f,255],w=new Uint8Array(new Int32Array(k).buffer);return t(m,p,c,l,g,o,h,O,w,k.length,b),d}const a={kernelName:e.RotateWithOffset,backendName:"wasm",kernelFunc:n,setupFunc:r};exports.rotateWithOffsetConfig=a;
},{"@tensorflow/tfjs-core":"tc6m"}],"Asur":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Round);exports.roundConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"Twm7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const t=(0,r.createUnaryKernelConfig)(e.Rsqrt);exports.rsqrtConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"jVTf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterNdConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let a;function r(t){a=t.wasm.cwrap(e.ScatterNd,null,["number","number","number","number","number","number","array","number","number"])}function n(r){const{backend:n,inputs:u,attrs:d}=r,{indices:s,updates:i}=u,{shape:c}=d,p=n.makeOutput(c,i.dtype);if(0===e.util.sizeFromShape(c))return p;const{sliceRank:o,numUpdates:m,sliceSize:l,strides:b,outputSize:f}=e.scatter_util.calculateShapes(i,s,c),y=n.dataIdMap.get(s.dataId).id,I=n.dataIdMap.get(i.dataId).id,k=new Uint8Array(new Int32Array(b).buffer),w=n.dataIdMap.get(p.dataId).id;return a(y,I,t.CppDType[i.dtype],o,m,l,k,f,w),p}const u={kernelName:e.ScatterNd,backendName:"wasm",setupFunc:r,kernelFunc:n};exports.scatterNdConfig=u;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"nFW0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function a(e){t=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function n(a){const{inputs:n,backend:d}=a,{condition:r,t:s,e:u}=n,c=d.dataIdMap.get(r.dataId).id,i=d.dataIdMap.get(s.dataId).id,o=d.dataIdMap.get(u.dataId).id,p=d.makeOutput(s.shape,s.dtype),l=d.dataIdMap.get(p.dataId).id,m=r.shape.length,b=s.shape.length,g=0===m||m>1||1===b?1:e.util.sizeFromShape(s.shape.slice(1));return t(c,i,o,g,l),p}const d={kernelName:e.Select,backendName:"wasm",kernelFunc:n,setupFunc:a};exports.selectConfig=d;
},{"@tensorflow/tfjs-core":"tc6m"}],"Ihp8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function a(a){t=a.wasm.cwrap(e.Sigmoid,null,["number","number"])}function i(a){const{backend:i,inputs:{x:n}}=a,d=i.dataIdMap.get(n.dataId).id,o=i.makeOutput(n.shape,n.dtype),r=i.dataIdMap.get(o.dataId).id;return 0===e.util.sizeFromShape(o.shape)?o:(t(d,r),o)}const n={kernelName:"Sigmoid",backendName:"wasm",setupFunc:a,kernelFunc:i};exports.sigmoidConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"ymB1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const n=(0,r.createUnaryKernelConfig)(e.Sin);exports.sinConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"gPWk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxConfig=void 0;var e=require("@tensorflow/tfjs-core");let t;function a(a){t=a.wasm.cwrap(e.Softmax,null,["number","number","number","number"])}function s(a){const{backend:s,inputs:{logits:n},attrs:{dim:r}}=a,o=s.dataIdMap.get(n.dataId).id,u=s.makeOutput(n.shape,n.dtype),d=s.dataIdMap.get(u.dataId).id,i=n.shape[r],p=e.util.sizeFromShape(n.shape)/i;return 0===e.util.sizeFromShape(u.shape)?u:(t(o,d,i,p),u)}const n={kernelName:e.Softmax,backendName:"wasm",setupFunc:a,kernelFunc:s};exports.softmaxConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"a8iM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchNDConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("./PadV2"),t=require("./Reshape"),s=require("./Transpose");function n(n){const{inputs:r,backend:p,attrs:d}=n,{x:o}=r,{blockShape:c,paddings:i}=d,u=e.util.sizeFromShape(c),h=[[0,0]];h.push(...i);for(let e=1+c.length;e<o.shape.length;++e)h.push([0,0]);const l=a.padV2Config.kernelFunc({inputs:{x:o},backend:p,attrs:{paddings:h,constantValue:0}}),k=e.backend_util.getReshaped(l.shape,c,u,!1),g=e.backend_util.getPermuted(k.length,c.length,!1),b=e.backend_util.getReshapedPermuted(l.shape,c,u,!1),f={x:l},x={shape:k},m=(0,t.reshape)({inputs:f,backend:p,attrs:x}),D={x:m},N={perm:g},_=(0,s.transpose)({inputs:D,backend:p,attrs:N}),q={x:_},P={shape:b},T=(0,t.reshape)({inputs:q,backend:p,attrs:P});return p.disposeData(l.dataId),p.disposeData(m.dataId),p.disposeData(_.dataId),T}const r={kernelName:e.SpaceToBatchND,backendName:"wasm",kernelFunc:n};exports.spaceToBatchNDConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./PadV2":"vsAd","./Reshape":"neeS","./Transpose":"DwTu"}],"ThII":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitV=s,exports.splitVConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Slice");function s(s){const{inputs:r,attrs:i,backend:n}=s,{x:a}=r,{numOrSizeSplits:p,axis:l}=i,o=e.util.parseAxisParam(l,a.shape)[0],c=e.backend_util.prepareSplitSize(a,p,o),u=new Array(a.shape.length).fill(0),x=a.shape.slice();return c.map(e=>{const s=[...x];s[o]=e;const r=(0,t.slice)({inputs:{x:a},attrs:{begin:u,size:s},backend:n});return u[o]+=e,r})}const r={kernelName:e.SplitV,backendName:"wasm",kernelFunc:s};exports.splitVConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./Slice":"lm7K"}],"us8L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const t=(0,r.createUnaryKernelConfig)(e.Sqrt);exports.sqrtConfig=t;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"tgbW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const o=(0,r.createUnaryKernelConfig)(e.Square);exports.squareConfig=o;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"u8Tk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const i=!0,n=(0,r.createBinaryKernelConfig)(e.SquaredDifference,!0);exports.squaredDifferenceConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"gwpu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stepConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let a;function n(t){a=t.wasm.cwrap(e.Step,null,["number","number","number","number"])}function r(e){const{backend:n,inputs:r,attrs:p}=e,{alpha:s}=p,{x:u}=r,d=n.dataIdMap.get(u.dataId).id,o=n.makeOutput(u.shape,u.dtype),c=n.dataIdMap.get(o.dataId).id;return a(d,s,t.CppDType[u.dtype],c),o}const p={kernelName:e.Step,backendName:"wasm",setupFunc:n,kernelFunc:r};exports.stepConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"ZFzE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=n,exports.stridedSliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Reshape"),s=require("./Slice");let r;function a(t){r=t.wasm.cwrap(e.StridedSlice,null,["number","array","number","array","array","array","array","array","number","number"])}function n(a){const{backend:n,inputs:i,attrs:d}=a,{x:l}=i;let{begin:o,end:c,strides:u}=d;null==u&&(u=new Array(o.length));const{beginMask:p,endMask:f,ellipsisMask:b,newAxisMask:h,shrinkAxisMask:k}=d,w=e.backend_util.slice_util.maskToAxes(b);if(w.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==b&&0!==h)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==b&&0!==k)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const y=l.shape.length-o.length,A=e.backend_util.slice_util.maskToAxes(h),x=l.shape.slice();A.forEach(e=>{o[e]=0,c[e]=1,x.splice(e,0,1)});const g=(0,t.reshape)({inputs:{x:l},attrs:{shape:x},backend:n}),{begin:m,end:I,strides:M}=e.backend_util.slice_util.getNormalizedAxes(g.shape,w,y,o,c,u,p,f,b);o=m,c=I,u=M;const _=e.backend_util.slice_util.maskToAxes(k);_.forEach(e=>{c[e]=o[e]+1,u[e]=1});const S=e.backend_util.slice_util.computeOutShape(o,c,u),U=S.filter((e,t)=>-1===_.indexOf(t));if(u.every(e=>1===e)){const e=(0,s.slice)({inputs:{x:g},attrs:{begin:o,size:S},backend:n});n.disposeData(g.dataId);const r=(0,t.reshape)({inputs:{x:e},attrs:{shape:U},backend:n});return n.disposeData(e.dataId),r}const E=n.makeOutput(U,"float32");if(!U.some(e=>0===e)){const t=n.dataIdMap.get(g.dataId).id,s=new Uint8Array(new Int32Array(e.util.computeStrides(g.shape)).buffer),a=new Uint8Array(new Int32Array(o).buffer),i=new Uint8Array(new Int32Array(c).buffer),d=new Uint8Array(new Int32Array(u).buffer),l=new Uint8Array(new Int32Array(U).buffer),p=new Uint8Array(new Int32Array(e.util.computeStrides(U)).buffer),f=n.dataIdMap.get(E.dataId).id;r(t,s,g.shape.length,a,i,d,l,p,U.length,f)}n.disposeData(g.dataId);const v=(0,t.reshape)({inputs:{x:E},attrs:{shape:U},backend:n});return n.disposeData(E.dataId),v}const i={kernelName:e.StridedSlice,backendName:"wasm",setupFunc:a,kernelFunc:n};exports.stridedSliceConfig=i;
},{"@tensorflow/tfjs-core":"tc6m","./Reshape":"neeS","./Slice":"lm7K"}],"CKYn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./binary_kernel");const o=!0,s=(0,r.createBinaryKernelConfig)(e.Sub,!0);exports.subConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./binary_kernel":"dLQW"}],"VxEb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./kernel_utils"),s=require("./types");let a;function n(t){a=t.wasm.cwrap(e.Sum,null,["number","number","number","number"])}function p(n){const{backend:p,inputs:r,attrs:u}=n,{axis:d,keepDims:i}=u,{x:o}=r,c=p.dataIdMap.get(o.dataId).id;let l=c,m=o;const{transposed:h,axes:b,originalAxes:k,inputWasTransposed:x}=(0,t.permuteAxesAndTranspose)(o,d,p);let f=b;if(x){const t=p.dataIdMap.get(h.dataId).id;t!==c&&(m=h,l=t,f=e.backend_util.getInnerMostAxes(f.length,m.shape.length))}e.backend_util.assertAxesAreInnerMostDims("sum",f,m.shape.length);const[g,I]=e.backend_util.computeOutAndReduceShapes(m.shape,f),A=e.util.sizeFromShape(I),_=p.makeOutput(g,m.dtype);if(0!==e.util.sizeFromShape(m.shape)){const e=p.dataIdMap.get(_.dataId).id;a(l,A,s.CppDType[_.dtype],e)}if(x&&p.disposeData(h.dataId),i){const t=e.backend_util.expandShapeToKeepDim(_.shape,k);_.shape=t}return _}const r={kernelName:e.Sum,backendName:"wasm",setupFunc:n,kernelFunc:p};exports.sumConfig=r;
},{"@tensorflow/tfjs-core":"tc6m","./kernel_utils":"njnR","./types":"aMq5"}],"kRwU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const n=(0,r.createUnaryKernelConfig)(e.Tan);exports.tanConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"XDwR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./unary_kernel");const n=(0,r.createUnaryKernelConfig)(e.Tanh);exports.tanhConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./unary_kernel":"yRDY"}],"VJ1o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tileConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let r;function n(t){r=t.wasm.cwrap(e.Tile,null,["number","array","number","array","number","number"])}function a(e){const{inputs:n,backend:a,attrs:s}=e,{x:p}=n,u=a.dataIdMap.get(p.dataId).id,{reps:i}=s,d=new Array(p.shape.length);for(let t=0;t<d.length;t++)d[t]=p.shape[t]*i[t];const l=new Uint8Array(new Int32Array(p.shape).buffer),o=new Uint8Array(new Int32Array(d).buffer),c=a.makeOutput(d,p.dtype),f=a.dataIdMap.get(c.dataId).id;return r(u,l,p.shape.length,o,d.length,t.CppDType[c.dtype],f),c}const s={kernelName:e.Tile,backendName:"wasm",setupFunc:n,kernelFunc:a};exports.tileConfig=s;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"aBtQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topk=exports.topKConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./types");let r;function a(t){r=t.wasm.cwrap(e.TopK,null,["number","array","number","number","number","bool","number","number"])}const n=({inputs:e,backend:a,attrs:n})=>{const{x:p}=e,{k:o,sorted:s}=n,d=a.dataIdMap.get(p.dataId).id,u=new Uint8Array(new Int32Array(p.shape).buffer),i=p.shape.slice();i[i.length-1]=o;const c=a.makeOutput(i,p.dtype),l=a.dataIdMap.get(c.dataId).id,m=a.makeOutput(i,"int32"),b=a.dataIdMap.get(m.dataId).id;return r(d,u,p.shape.length,t.CppDType[p.dtype],o,s,l,b),[c,m]};exports.topk=n;const p={kernelName:e.TopK,backendName:"wasm",setupFunc:a,kernelFunc:n};exports.topKConfig=p;
},{"@tensorflow/tfjs-core":"tc6m","./types":"aMq5"}],"dnmi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformConfig=void 0;var e=require("@tensorflow/tfjs-core");let r;function a(a){r=a.wasm.cwrap(e.Transform,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])}function t(a){const{backend:t,inputs:n,attrs:u}=a,{image:s,transforms:o}=n,{interpolation:m,fillMode:d,fillValue:b,outputShape:l}=u,[i,p,c,f]=s.shape,[k,w]=null!=l?l:[p,c],g=[i,k,w,f],h=new Uint8Array(new Int32Array(e.util.computeStrides(s.shape)).buffer),I=t.makeOutput(g,s.dtype),y=t.dataIdMap.get(I.dataId).id,M=t.dataIdMap.get(s.dataId).id,v=t.dataIdMap.get(o.dataId).id,x="nearest"===m?1:2;let j;switch(d){case"constant":j=1;break;case"reflect":j=2;break;case"wrap":j=3;break;case"nearest":j=4;break;default:j=1}return r(M,v,o.shape[0]>1,i,k,w,f,c,p,h,s.shape.length-1,x,j,b,y),I}const n={kernelName:e.Transform,backendName:"wasm",setupFunc:a,kernelFunc:t};exports.transformConfig=n;
},{"@tensorflow/tfjs-core":"tc6m"}],"Oyvy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpackConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Slice");function a(e){const{inputs:a,backend:n,attrs:r}=e,{value:s}=a;let{axis:c}=r;c<0&&(c+=s.shape.length);const l=s.shape[c],o=s.shape.length,p=new Array(o-1);let i=0;for(let t=0;t<o;t++)t!==c&&(p[i++]=s.shape[t]);const u=new Array(l),d=new Array(o).fill(0),f=s.shape.slice();f[c]=1;for(let h=0;h<u.length;h++)d[c]=h,u[h]=(0,t.slice)({inputs:{x:s},attrs:{begin:d,size:f},backend:n});return u.map(({dataId:e,dtype:t})=>({dataId:e,dtype:t,shape:p}))}const n={kernelName:e.Unpack,backendName:"wasm",kernelFunc:a};exports.unpackConfig=n;
},{"@tensorflow/tfjs-core":"tc6m","./Slice":"lm7K"}],"uOYL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLikeConfig=void 0;var e=require("@tensorflow/tfjs-core");function r(e){const{inputs:{x:r},backend:o}=e,t=o.makeOutput(r.shape,r.dtype);return o.typedArrayFromHeap(t).fill(0),t}const o={kernelName:e.ZerosLike,backendName:"wasm",kernelFunc:r};exports.zerosLikeConfig=o;
},{"@tensorflow/tfjs-core":"tc6m"}],"Xqqo":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),r=require("./kernels/_FusedMatMul"),i=require("./kernels/Abs"),n=require("./kernels/Add"),o=require("./kernels/AddN"),s=require("./kernels/All"),l=require("./kernels/Any"),u=require("./kernels/ArgMax"),f=require("./kernels/AvgPool"),g=require("./kernels/BatchMatMul"),q=require("./kernels/BatchToSpaceND"),C=require("./kernels/Cast"),a=require("./kernels/Ceil"),k=require("./kernels/ClipByValue"),t=require("./kernels/Concat"),p=require("./kernels/Conv2D"),c=require("./kernels/Conv2DBackpropInput"),d=require("./kernels/Cos"),m=require("./kernels/Cosh"),h=require("./kernels/CropAndResize"),S=require("./kernels/Cumsum"),D=require("./kernels/DepthToSpace"),M=require("./kernels/DepthwiseConv2dNative"),v=require("./kernels/Elu"),x=require("./kernels/Equal"),N=require("./kernels/Exp"),R=require("./kernels/ExpandDims"),V=require("./kernels/Fill"),B=require("./kernels/FlipLeftRight"),T=require("./kernels/Floor"),A=require("./kernels/FloorDiv"),L=require("./kernels/FusedBatchNorm"),P=require("./kernels/FusedConv2D"),y=require("./kernels/FusedDepthwiseConv2D"),E=require("./kernels/GatherNd"),F=require("./kernels/GatherV2"),w=require("./kernels/Greater"),b=require("./kernels/GreaterEqual"),z=require("./kernels/Identity"),G=require("./kernels/LeakyRelu"),O=require("./kernels/Less"),I=require("./kernels/LessEqual"),K=require("./kernels/Log"),H=require("./kernels/LogicalAnd"),W=require("./kernels/Max"),j=require("./kernels/Maximum"),U=require("./kernels/MaxPool"),Z=require("./kernels/Mean"),_=require("./kernels/Min"),J=require("./kernels/Minimum"),Q=require("./kernels/MirrorPad"),X=require("./kernels/Multiply"),Y=require("./kernels/Neg"),$=require("./kernels/NonMaxSuppressionV3"),ee=require("./kernels/NonMaxSuppressionV4"),re=require("./kernels/NonMaxSuppressionV5"),ie=require("./kernels/NotEqual"),ne=require("./kernels/OneHot"),oe=require("./kernels/OnesLike"),se=require("./kernels/Pack"),le=require("./kernels/PadV2"),ue=require("./kernels/Pow"),fe=require("./kernels/Prelu"),ge=require("./kernels/Prod"),qe=require("./kernels/Range"),Ce=require("./kernels/RealDiv"),ae=require("./kernels/Relu"),ke=require("./kernels/Relu6"),te=require("./kernels/Reshape"),pe=require("./kernels/ResizeBilinear"),ce=require("./kernels/Reverse"),de=require("./kernels/RotateWithOffset"),me=require("./kernels/Round"),he=require("./kernels/Rsqrt"),Se=require("./kernels/ScatterNd"),De=require("./kernels/Select"),Me=require("./kernels/Sigmoid"),ve=require("./kernels/Sin"),xe=require("./kernels/Slice"),Ne=require("./kernels/Softmax"),Re=require("./kernels/SpaceToBatchND"),Ve=require("./kernels/SplitV"),Be=require("./kernels/Sqrt"),Te=require("./kernels/Square"),Ae=require("./kernels/SquaredDifference"),Le=require("./kernels/Step"),Pe=require("./kernels/StridedSlice"),ye=require("./kernels/Sub"),Ee=require("./kernels/Sum"),Fe=require("./kernels/Tan"),we=require("./kernels/Tanh"),be=require("./kernels/Tile"),ze=require("./kernels/TopK"),Ge=require("./kernels/Transform"),Oe=require("./kernels/Transpose"),Ie=require("./kernels/Unpack"),Ke=require("./kernels/ZerosLike");const He=[i.absConfig,n.addConfig,o.addNConfig,s.allConfig,l.anyConfig,u.argMaxConfig,f.avgPoolConfig,g.batchMatMulConfig,q.batchToSpaceNDConfig,C.castConfig,a.ceilConfig,k.clipByValueConfig,t.concatConfig,p.conv2DConfig,c.conv2DBackpropInputConfig,d.cosConfig,m.coshConfig,h.cropAndResizeConfig,S.cumsumConfig,D.depthToSpaceConfig,M.depthwiseConv2dNativeConfig,v.eluConfig,x.equalConfig,N.expConfig,R.expandDimsConfig,V.fillConfig,B.flipLeftRightConfig,T.floorConfig,A.floorDivConfig,r.fusedMatMulConfig,L.fusedBatchNormConfig,P.fusedConv2DConfig,y.fusedDepthwiseConv2DConfig,E.gatherNdConfig,F.gatherV2Config,w.greaterConfig,b.greaterEqualConfig,z.identityConfig,G.leakyReluConfig,O.lessConfig,I.lessEqualConfig,K.logConfig,H.logicalAndConfig,W.maxConfig,j.maximumConfig,U.maxPoolConfig,Z.meanConfig,_.minConfig,J.minimumConfig,Q.mirrorPadConfig,X.multiplyConfig,Y.negConfig,$.nonMaxSuppressionV3Config,ee.nonMaxSuppressionV4Config,re.nonMaxSuppressionV5Config,ie.notEqualConfig,ne.oneHotConfig,oe.onesLikeConfig,se.packConfig,le.padV2Config,ue.powConfig,fe.preluConfig,ge.prodConfig,qe.rangeConfig,Ce.realDivConfig,ae.reluConfig,ke.relu6Config,te.reshapeConfig,pe.resizeBilinearConfig,ce.reverseConfig,de.rotateWithOffsetConfig,he.rsqrtConfig,me.roundConfig,Se.scatterNdConfig,De.selectConfig,Me.sigmoidConfig,ve.sinConfig,xe.sliceConfig,Ne.softmaxConfig,Re.spaceToBatchNDConfig,Ve.splitVConfig,Be.sqrtConfig,Te.squareConfig,Ae.squaredDifferenceConfig,Le.stepConfig,Pe.stridedSliceConfig,ye.subConfig,Ee.sumConfig,Fe.tanConfig,we.tanhConfig,be.tileConfig,ze.topKConfig,Ge.transformConfig,Oe.transposeConfig,Ie.unpackConfig,Ke.zerosLikeConfig];for(const We of He)(0,e.registerKernel)(We);
},{"@tensorflow/tfjs-core":"tc6m","./kernels/_FusedMatMul":"FXlS","./kernels/Abs":"gk2a","./kernels/Add":"Wopl","./kernels/AddN":"gVHm","./kernels/All":"rWjF","./kernels/Any":"dGSu","./kernels/ArgMax":"VpIU","./kernels/AvgPool":"HwXs","./kernels/BatchMatMul":"LRzH","./kernels/BatchToSpaceND":"jEPl","./kernels/Cast":"izP8","./kernels/Ceil":"eI3T","./kernels/ClipByValue":"ktHE","./kernels/Concat":"sUBZ","./kernels/Conv2D":"JBir","./kernels/Conv2DBackpropInput":"PwzO","./kernels/Cos":"wN8z","./kernels/Cosh":"zqlm","./kernels/CropAndResize":"uATv","./kernels/Cumsum":"pLr8","./kernels/DepthToSpace":"H6Cw","./kernels/DepthwiseConv2dNative":"dbib","./kernels/Elu":"BEAy","./kernels/Equal":"sJAt","./kernels/Exp":"VR2B","./kernels/ExpandDims":"QfDi","./kernels/Fill":"LV6k","./kernels/FlipLeftRight":"stjm","./kernels/Floor":"X91p","./kernels/FloorDiv":"nmIi","./kernels/FusedBatchNorm":"TqmA","./kernels/FusedConv2D":"bhEZ","./kernels/FusedDepthwiseConv2D":"Va4V","./kernels/GatherNd":"BBQw","./kernels/GatherV2":"diU4","./kernels/Greater":"D3cq","./kernels/GreaterEqual":"VtQY","./kernels/Identity":"Utw2","./kernels/LeakyRelu":"IYUE","./kernels/Less":"GKZ2","./kernels/LessEqual":"uJgd","./kernels/Log":"vLBg","./kernels/LogicalAnd":"tNjt","./kernels/Max":"eNWP","./kernels/Maximum":"aVPR","./kernels/MaxPool":"ZbDC","./kernels/Mean":"M2N2","./kernels/Min":"OR3i","./kernels/Minimum":"dNun","./kernels/MirrorPad":"WtkM","./kernels/Multiply":"H9C8","./kernels/Neg":"mUBj","./kernels/NonMaxSuppressionV3":"jqP7","./kernels/NonMaxSuppressionV4":"QEVV","./kernels/NonMaxSuppressionV5":"xoKX","./kernels/NotEqual":"MYWz","./kernels/OneHot":"JOtu","./kernels/OnesLike":"WJLk","./kernels/Pack":"lzsM","./kernels/PadV2":"vsAd","./kernels/Pow":"jot5","./kernels/Prelu":"IA2D","./kernels/Prod":"HOvM","./kernels/Range":"Piw1","./kernels/RealDiv":"nPhY","./kernels/Relu":"eGIa","./kernels/Relu6":"Nh5D","./kernels/Reshape":"neeS","./kernels/ResizeBilinear":"oBa4","./kernels/Reverse":"xhnX","./kernels/RotateWithOffset":"bDUI","./kernels/Round":"Asur","./kernels/Rsqrt":"Twm7","./kernels/ScatterNd":"jVTf","./kernels/Select":"nFW0","./kernels/Sigmoid":"Ihp8","./kernels/Sin":"ymB1","./kernels/Slice":"lm7K","./kernels/Softmax":"gPWk","./kernels/SpaceToBatchND":"a8iM","./kernels/SplitV":"ThII","./kernels/Sqrt":"us8L","./kernels/Square":"tgbW","./kernels/SquaredDifference":"u8Tk","./kernels/Step":"gwpu","./kernels/StridedSlice":"ZFzE","./kernels/Sub":"CKYn","./kernels/Sum":"VxEb","./kernels/Tan":"kRwU","./kernels/Tanh":"XDwR","./kernels/Tile":"VJ1o","./kernels/TopK":"aBtQ","./kernels/Transform":"dnmi","./kernels/Transpose":"DwTu","./kernels/Unpack":"Oyvy","./kernels/ZerosLike":"uOYL"}],"VuFc":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core");const r=(0,e.env)();r.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))),r.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(r.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}});
},{"@tensorflow/tfjs-core":"tc6m"}],"qCN2":[function(require,module,exports) {
var __filename = "/home/sebastian/sebastian_workspace/gesture_recogntion/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm-threaded-simd.js";
var process = require("process");
var __dirname = "/home/sebastian/sebastian_workspace/gesture_recogntion/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out";
var global = arguments[3];
var define;
var e,r="/home/sebastian/sebastian_workspace/gesture_recogntion/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm-threaded-simd.js",n=require("process"),t="/home/sebastian/sebastian_workspace/gesture_recogntion/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out",a=arguments[3],o=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return void 0!==r&&(e=e||r),function(r){function o(){return M.buffer!=I&&X(M.buffer),W}function i(){return M.buffer!=I&&X(M.buffer),B}function u(){return M.buffer!=I&&X(M.buffer),H}function s(){return M.buffer!=I&&X(M.buffer),U}function c(){return M.buffer!=I&&X(M.buffer),F}var l,f,d=void 0!==(r=r||{})?r:{};d.ready=new Promise(function(e,r){l=e,f=r});var p,m={};for(p in d)d.hasOwnProperty(p)&&(m[p]=d[p]);var _,h=[],E=function(e,r){throw r},v=!1,y=!1,g=!1;v="object"==typeof window,y="function"==typeof importScripts,g="object"==typeof n&&"object"==typeof n.versions&&"string"==typeof n.versions.node,_=!v&&!g&&!y;var w=d.ENVIRONMENT_IS_PTHREAD||!1;w&&(I=d.buffer);var A,b,S,T,x,k="";function O(e){return d.locateFile?d.locateFile(e,k):k+e}if(g){var C;k=y?require("path").dirname(k)+"/":t+"/",A=function(e,r){return T||(T=require("fs")),x||(x=require("path")),e=x.normalize(e),T.readFileSync(e,r?null:"utf8")},S=function(e){var r=A(e,!0);return r.buffer||(r=new Uint8Array(r)),q(r.buffer),r},n.argv.length>1&&n.argv[1].replace(/\\/g,"/"),h=n.argv.slice(2),n.on("uncaughtException",function(e){if(!(e instanceof hr))throw e}),n.on("unhandledRejection",ue),E=function(e){n.exit(e)},d.inspect=function(){return"[Emscripten Module object]"};try{C=require("worker_threads")}catch(vr){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),vr}a.Worker=C.Worker}else _?("undefined"!=typeof read&&(A=function(e){return read(e)}),S=function(e){var r;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(q("object"==typeof(r=read(e,"binary"))),r)},"undefined"!=typeof scriptArgs?h=scriptArgs:void 0!==arguments&&(h=arguments),"function"==typeof quit&&(E=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(v||y)&&(y?k=self.location.href:"undefined"!=typeof document&&document.currentScript&&(k=document.currentScript.src),void 0!==e&&e&&(k=e),k=0!==k.indexOf("blob:")?k.substr(0,k.lastIndexOf("/")+1):"",g?(A=function(e,r){return T||(T=require("fs")),x||(x=require("path")),e=x.normalize(e),T.readFileSync(e,r?null:"utf8")},S=function(e){var r=A(e,!0);return r.buffer||(r=new Uint8Array(r)),q(r.buffer),r}):(A=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},y&&(S=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),b=function(e,r,n){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){200==t.status||0==t.status&&t.response?r(t.response):n()},t.onerror=n,t.send(null)}),function(e){document.title=e});g&&"undefined"==typeof performance&&(a.performance=require("perf_hooks").performance);var N=d.print||console.log.bind(console),R=d.printErr||console.warn.bind(console);for(p in m)m.hasOwnProperty(p)&&(d[p]=m[p]);m=null,d.arguments&&(h=d.arguments),d.thisProgram&&d.thisProgram,d.quit&&(E=d.quit);var L;Atomics.load,Atomics.store,Atomics.compareExchange;d.wasmBinary&&(L=d.wasmBinary);var M,D,P=d.noExitRuntime||!0;"object"!=typeof WebAssembly&&ue("no native wasm support detected");var I,W,B,H,U,F,G=!1;function q(e,r){e||ue("Assertion failed: "+r)}function j(e){var r=d["_"+e];return q(r,"Cannot call unknown function "+e+", make sure it is exported"),r}function V(e,r,n,t,a){var i={string:function(e){var r=0;if(null!=e&&0!==e){var n=1+(e.length<<2);Q(e,r=fr(n),n)}return r},array:function(e){var r,n,t=fr(e.length);return r=e,n=t,o().set(r,n),t}};var u=j(e),s=[],c=0;if(t)for(var l=0;l<t.length;l++){var f=i[n[l]];f?(0===c&&(c=cr()),s[l]=f(t[l])):s[l]=t[l]}var d=u.apply(null,s);return d=function(e){return"string"===r?K(e):"boolean"===r?Boolean(e):e}(d),0!==c&&lr(c),d}function z(e,r,n){for(var t=r+n,a="";!(r>=t);){var o=e[r++];if(!o)return a;if(128&o){var i=63&e[r++];if(192!=(224&o)){var u=63&e[r++];if((o=224==(240&o)?(15&o)<<12|i<<6|u:(7&o)<<18|i<<12|u<<6|63&e[r++])<65536)a+=String.fromCharCode(o);else{var s=o-65536;a+=String.fromCharCode(55296|s>>10,56320|1023&s)}}else a+=String.fromCharCode((31&o)<<6|i)}else a+=String.fromCharCode(o)}return a}function K(e,r){return e?z(i(),e,r):""}function Q(e,r,n){return function(e,r,n,t){if(!(t>0))return 0;for(var a=n,o=n+t-1,i=0;i<e.length;++i){var u=e.charCodeAt(i);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&e.charCodeAt(++i)),u<=127){if(n>=o)break;r[n++]=u}else if(u<=2047){if(n+1>=o)break;r[n++]=192|u>>6,r[n++]=128|63&u}else if(u<=65535){if(n+2>=o)break;r[n++]=224|u>>12,r[n++]=128|u>>6&63,r[n++]=128|63&u}else{if(n+3>=o)break;r[n++]=240|u>>18,r[n++]=128|u>>12&63,r[n++]=128|u>>6&63,r[n++]=128|63&u}}return r[n]=0,n-a}(e,i(),r,n)}function X(e){I=e,d.HEAP8=W=new Int8Array(e),d.HEAP16=new Int16Array(e),d.HEAP32=H=new Int32Array(e),d.HEAPU8=B=new Uint8Array(e),d.HEAPU16=new Uint16Array(e),d.HEAPU32=U=new Uint32Array(e),d.HEAPF32=new Float32Array(e),d.HEAPF64=F=new Float64Array(e)}var Y,Z=d.INITIAL_MEMORY||16777216;if(w)M=d.wasmMemory,I=d.buffer;else if(d.wasmMemory)M=d.wasmMemory;else if(!((M=new WebAssembly.Memory({initial:Z/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw R("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),g&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");M&&(I=M.buffer),Z=I.byteLength,X(I);var J=[],$=[],ee=[],re=[],ne=[];function te(){!0,w||he($)}w||$.push({func:function(){Qe()}});var ae=0,oe=null,ie=null;function ue(e){d.onAbort&&d.onAbort(e),w&&console.error("Pthread aborting at "+(new Error).stack),R(e+=""),G=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var r=new WebAssembly.RuntimeError(e);throw f(r),r}function se(e,r){return String.prototype.startsWith?e.startsWith(r):0===e.indexOf(r)}d.preloadedImages={},d.preloadedAudios={};var ce="data:application/octet-stream;base64,";function le(e){return se(e,ce)}var fe="file://";function de(e){return se(e,fe)}var pe="tfjs-backend-wasm-threaded-simd.wasm";function me(e){try{if(e==pe&&L)return new Uint8Array(L);if(S)return S(e);throw"both async and sync fetching of the wasm failed"}catch(R){ue(R)}}le(pe)||(pe=O(pe));var _e={10520:function(){throw"Canceled!"},10538:function(e,r){setTimeout(function(){ar(e,r)},0)}};function he(e){for(;e.length>0;){var r=e.shift();if("function"!=typeof r){var n=r.func;"number"==typeof n?void 0===r.arg?Y.get(n)():Y.get(n)(r.arg):n(void 0===r.arg?null:r.arg)}else r(d)}}var Ee={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function ve(e,r){if(e<=0||e>o().length||!0&e||r<0)return-28;if(0==r)return 0;r>=2147483647&&(r=1/0);var n=Atomics.load(u(),_r>>2),t=0;if(n==e&&(Atomics.compareExchange(u(),_r>>2,n,0)==n&&(t=1,--r<=0)))return 1;var a=Atomics.notify(u(),e>>2,r);if(a>=0)return a+t;throw"Atomics.notify returned an unexpected value "+a}function ye(e){if(w)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var r=we.pthreads[e];if(r){u()[e+12>>2]=0;var n=r.worker;we.returnWorkerToPool(n)}}d._emscripten_futex_wake=ve;var ge,we={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=0;e<8;++e)we.allocateUnusedWorker()},initRuntime:function(){for(var e=Xe(228),r=0;r<57;++r)s()[e/4+r]=0;u()[e+12>>2]=e;var n=e+152;u()[n>>2]=n;var t=Xe(512);for(r=0;r<128;++r)s()[t/4+r]=0;Atomics.store(s(),e+100>>2,t),Atomics.store(s(),e+40>>2,e),sr(e,!y,1),nr(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;we.threadExitHandlers.length>0;)we.threadExitHandlers.pop()();w&&$e()&&er()},runExitHandlersAndDeinitThread:function(e,r){Atomics.store(s(),e+56>>2,1),Atomics.store(s(),e+60>>2,0),we.runExitHandlers(),Atomics.store(s(),e+4>>2,r),Atomics.store(s(),e+0>>2,1),ve(e+0,2147483647),sr(0,0,0)},threadExit:function(e){var r=$e();r&&(we.runExitHandlersAndDeinitThread(r,e),w&&postMessage({cmd:"exit"}))},threadCancel:function(){we.runExitHandlersAndDeinitThread($e(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in we.pthreads){(t=we.pthreads[e])&&t.worker&&we.returnWorkerToPool(t.worker)}we.pthreads={};for(var r=0;r<we.unusedWorkers.length;++r){(n=we.unusedWorkers[r]).terminate()}we.unusedWorkers=[];for(r=0;r<we.runningWorkers.length;++r){var n,t=(n=we.runningWorkers[r]).pthread;we.freeThreadData(t),n.terminate()}we.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var r=u()[e.threadInfoStruct+100>>2];u()[e.threadInfoStruct+100>>2]=0,Ye(r),Ye(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&Ye(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){we.runWithoutMainThreadQueuedCalls(function(){delete we.pthreads[e.pthread.threadInfoStruct],we.unusedWorkers.push(e),we.runningWorkers.splice(we.runningWorkers.indexOf(e),1),we.freeThreadData(e.pthread),e.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(e){u()[mr>>2]=0;try{e()}finally{u()[mr>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(r,n){r.onmessage=function(e){var t=e.data,a=t.cmd;if(r.pthread&&(we.currentProxiedOperationCallerThread=r.pthread.threadInfoStruct),t.targetThread&&t.targetThread!=$e()){var o=we.pthreads[t.targetThread];return o?o.worker.postMessage(e.data,t.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+t.targetThread+", but that thread no longer exists!"),void(we.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===a)rr();else if("spawnThread"===a)Fe(e.data);else if("cleanupThread"===a)ye(t.thread);else if("killThread"===a)!function(e){if(w)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";u()[e+12>>2]=0;var r=we.pthreads[e];r.worker.terminate(),we.freeThreadData(r),we.runningWorkers.splice(we.runningWorkers.indexOf(r.worker),1),r.worker.pthread=void 0}(t.thread);else if("cancelThread"===a)!function(e){if(w)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";we.pthreads[e].worker.postMessage({cmd:"cancel"})}(t.thread);else if("loaded"===a)r.loaded=!0,n&&n(r),r.runPthread&&(r.runPthread(),delete r.runPthread);else if("print"===a)N("Thread "+t.threadId+": "+t.text);else if("printErr"===a)R("Thread "+t.threadId+": "+t.text);else if("alert"===a)alert("Thread "+t.threadId+": "+t.text);else if("exit"===a){r.pthread&&Atomics.load(s(),r.pthread.threadInfoStruct+64>>2)&&we.returnWorkerToPool(r)}else if("exitProcess"===a)try{!function(e,r){if(r&&P&&0===e)return;if(!r&&w)throw postMessage({cmd:"exitProcess",returnCode:e}),new hr(e);P||(we.terminateAllThreads(),e,w||!0,d.onExit&&d.onExit(e),G=!0);E(e,new hr(e))}(t.returnCode)}catch(e){if(e instanceof hr)return;throw e}else"cancelDone"===a?we.returnWorkerToPool(r):"objectTransfer"===a?we.receiveObjectTransfer(e.data):"setimmediate"===e.data.target?r.postMessage(e.data):R("worker sent an unknown command "+a);we.currentProxiedOperationCallerThread=void 0},r.onerror=function(e){R("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},g&&(r.on("message",function(e){r.onmessage({data:e})}),r.on("error",function(e){r.onerror(e)}),r.on("exit",function(e){})),r.postMessage({cmd:"load",urlOrBlob:d.mainScriptUrlOrBlob||e,wasmMemory:M,wasmModule:D})},allocateUnusedWorker:function(){var e=O("tfjs-backend-wasm-threaded-simd.worker.js");we.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==we.unusedWorkers.length&&(we.allocateUnusedWorker(),we.loadWasmModuleToWorker(we.unusedWorkers[0])),we.unusedWorkers.length>0?we.unusedWorkers.pop():null},busySpinWait:function(e){for(var r=performance.now()+e;performance.now()<r;);}};function Ae(e,r,n){if(e<=0||e>o().length||!0&e)return-28;if(v){if(Atomics.load(u(),e>>2)!=r)return-6;var t=performance.now(),a=t+n;for(Atomics.exchange(u(),_r>>2,e);;){if((t=performance.now())>a)return Atomics.exchange(u(),_r>>2,0),-73;if(0==Atomics.exchange(u(),_r>>2,0))break;if(rr(),Atomics.load(u(),e>>2)!=r)return-6;Atomics.exchange(u(),_r>>2,e)}return 0}var i=Atomics.wait(u(),e>>2,r,n);if("timed-out"===i)return-73;if("not-equal"===i)return-6;if("ok"===i)return 0;throw"Atomics.wait returned an unexpected value "+i}function be(e,r){for(var n=arguments.length-2,t=cr(),a=n,o=fr(8*a),i=o>>3,u=0;u<n;u++){var s=arguments[2+u];c()[i+u]=s}var l=ir(e,a,o,r);return lr(t),l}d.establishStackSpace=function(e,r){dr(e,r),lr(e)},d.getNoExitRuntime=function(){return P},d.invokeEntryPoint=function(e,r){return Y.get(e)(r)},ge=g?function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6}:w?function(){return performance.now()-d.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var Se=[],Te=[];function xe(e){try{return M.grow(e-I.byteLength+65535>>>16),X(M.buffer),1}catch(vr){}}var ke={inEventHandler:0,removeAllEventListeners:function(){for(var e=ke.eventHandlers.length-1;e>=0;--e)ke._removeHandler(e);ke.eventHandlers=[],ke.deferredCalls=[]},registerRemoveEventListeners:function(){ke.removeEventListenersRegistered||(re.push(ke.removeAllEventListeners),ke.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,r,n){function t(e,r){if(e.length!=r.length)return!1;for(var n in e)if(e[n]!=r[n])return!1;return!0}for(var a in ke.deferredCalls){var o=ke.deferredCalls[a];if(o.targetFunction==e&&t(o.argsList,n))return}ke.deferredCalls.push({targetFunction:e,precedence:r,argsList:n}),ke.deferredCalls.sort(function(e,r){return e.precedence<r.precedence})},removeDeferredCalls:function(e){for(var r=0;r<ke.deferredCalls.length;++r)ke.deferredCalls[r].targetFunction==e&&(ke.deferredCalls.splice(r,1),--r)},canPerformEventHandlerRequests:function(){return ke.inEventHandler&&ke.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(ke.canPerformEventHandlerRequests())for(var e=0;e<ke.deferredCalls.length;++e){var r=ke.deferredCalls[e];ke.deferredCalls.splice(e,1),--e,r.targetFunction.apply(null,r.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,r){for(var n=0;n<ke.eventHandlers.length;++n)ke.eventHandlers[n].target!=e||r&&r!=ke.eventHandlers[n].eventTypeString||ke._removeHandler(n--)},_removeHandler:function(e){var r=ke.eventHandlers[e];r.target.removeEventListener(r.eventTypeString,r.eventListenerFunc,r.useCapture),ke.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var r=function(r){++ke.inEventHandler,ke.currentEventHandler=e,ke.runDeferredCalls(),e.handlerFunc(r),ke.runDeferredCalls(),--ke.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=r,e.target.addEventListener(e.eventTypeString,r,e.useCapture),ke.eventHandlers.push(e),ke.registerRemoveEventListeners();else for(var n=0;n<ke.eventHandlers.length;++n)ke.eventHandlers[n].target==e.target&&ke.eventHandlers[n].eventTypeString==e.eventTypeString&&ke._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,r,n,t,a){var o=cr(),i=fr(12);u()[i>>2]=n,u()[i+4>>2]=t,u()[i+8>>2]=a,ur(0,e,637534208,r,t,i),lr(o)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return we.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Oe(e,r,n,t){var a,o,i,s=cr(),c=fr(12),l=0;r&&(o=function(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++n)),t<=127?++r:r+=t<=2047?2:t<=65535?3:4}return r}(a=r)+1,i=Xe(o),Q(a,i,o),l=i),u()[c>>2]=l,u()[c+4>>2]=n,u()[c+8>>2]=t,ur(0,e,657457152,0,l,c),lr(s)}var Ce=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Ne(e){var r;return e=(r=e)>2?K(r):r,Ce[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function Re(e){return Ne(e)}function Le(e,r,n){var t=Re(e);if(!t)return-4;if(t.canvasSharedPtr&&(u()[t.canvasSharedPtr>>2]=r,u()[t.canvasSharedPtr+4>>2]=n),!t.offscreenCanvas&&t.controlTransferredOffscreen)return t.canvasSharedPtr?(function(e,r,n,t){Oe(e,r=r?K(r):"",n,t)}(u()[t.canvasSharedPtr+8>>2],e,r,n),1):-4;t.offscreenCanvas&&(t=t.offscreenCanvas);var a=!1;if(t.GLctxObject&&t.GLctxObject.GLctx){var o=t.GLctxObject.GLctx.getParameter(2978);a=0===o[0]&&0===o[1]&&o[2]===t.width&&o[3]===t.height}return t.width=r,t.height=n,a&&t.GLctxObject.GLctx.viewport(0,0,r,n),0}function Me(e,r,n){return w?be(2,1,e,r,n):Le(e,r,n)}var De={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){De.lastError||(De.lastError=e)},getNewId:function(e){for(var r=De.counter++,n=e.length;n<r;n++)e[n]=null;return r},getSource:function(e,r,n,t){for(var a="",o=0;o<r;++o){var i=t?u()[t+4*o>>2]:-1;a+=K(u()[n+4*o>>2],i<0?void 0:i)}return a},createContext:function(e,r){var n=e.getContext("webgl",r);return n?De.registerContext(n,r):0},registerContext:function(e,r){var n=Xe(8);u()[n+4>>2]=$e();var t={handle:n,attributes:r,version:r.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=t),De.contexts[n]=t,(void 0===r.enableExtensionsByDefault||r.enableExtensionsByDefault)&&De.initExtensions(t),n},makeContextCurrent:function(e){return De.currentContext=De.contexts[e],d.ctx=Ie=De.currentContext&&De.currentContext.GLctx,!(e&&!Ie)},getContext:function(e){return De.contexts[e]},deleteContext:function(e){De.currentContext===De.contexts[e]&&(De.currentContext=null),"object"==typeof ke&&ke.removeAllHandlersOnTarget(De.contexts[e].GLctx.canvas),De.contexts[e]&&De.contexts[e].GLctx.canvas&&(De.contexts[e].GLctx.canvas.GLctxObject=void 0),Ye(De.contexts[e].handle),De.contexts[e]=null},initExtensions:function(e){if(e||(e=De.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var r,n=e.GLctx;!function(e){var r=e.getExtension("ANGLE_instanced_arrays");if(r)e.vertexAttribDivisor=function(e,n){r.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,t,a){r.drawArraysInstancedANGLE(e,n,t,a)},e.drawElementsInstanced=function(e,n,t,a,o){r.drawElementsInstancedANGLE(e,n,t,a,o)}}(n),function(e){var r=e.getExtension("OES_vertex_array_object");if(r)e.createVertexArray=function(){return r.createVertexArrayOES()},e.deleteVertexArray=function(e){r.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){r.bindVertexArrayOES(e)},e.isVertexArray=function(e){return r.isVertexArrayOES(e)}}(n),function(e){var r=e.getExtension("WEBGL_draw_buffers");if(r)e.drawBuffers=function(e,n){r.drawBuffersWEBGL(e,n)}}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(r=n).multiDrawWebgl=r.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach(function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&n.getExtension(e)})}},populateUniformTable:function(e){for(var r=De.programs[e],n=De.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},t=n.uniforms,a=Ie.getProgramParameter(r,35718),o=0;o<a;++o){var i=Ie.getActiveUniform(r,o),u=i.name;n.maxUniformLength=Math.max(n.maxUniformLength,u.length+1),"]"==u.slice(-1)&&(u=u.slice(0,u.lastIndexOf("[")));var s=Ie.getUniformLocation(r,u);if(s){var c=De.getNewId(De.uniforms);t[u]=[i.size,c],De.uniforms[c]=s;for(var l=1;l<i.size;++l){var f=u+"["+l+"]";s=Ie.getUniformLocation(r,f),c=De.getNewId(De.uniforms),De.uniforms[c]=s}}}}},Pe=["default","low-power","high-performance"];var Ie,We={mappings:{},buffers:[null,[],[]],printChar:function(e,r){var n=We.buffers[e];0===r||10===r?((1===e?N:R)(z(n,0)),n.length=0):n.push(r)},varargs:void 0,get:function(){return We.varargs+=4,u()[We.varargs-4>>2]},getStr:function(e){return K(e)},get64:function(e,r){return e}};function Be(e){return w?be(3,1,e):0}function He(e,r,n,t,a){if(w)return be(4,1,e,r,n,t,a)}function Ue(e,r,n,t){if(w)return be(5,1,e,r,n,t);for(var a=0,o=0;o<n;o++){for(var s=u()[r+8*o>>2],c=u()[r+(8*o+4)>>2],l=0;l<c;l++)We.printChar(e,i()[s+l]);a+=c}return u()[t>>2]=a,0}function Fe(e){if(w)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var r=we.getNewWorker();if(void 0!==r.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";we.runningWorkers.push(r);for(var n=Xe(512),t=0;t<128;++t)u()[n+4*t>>2]=0;var a=e.stackBase+e.stackSize,o=we.pthreads[e.pthread_ptr]={worker:r,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},i=o.threadInfoStruct>>2;Atomics.store(s(),i+16,e.detached),Atomics.store(s(),i+25,n),Atomics.store(s(),i+10,o.threadInfoStruct),Atomics.store(s(),i+20,e.stackSize),Atomics.store(s(),i+19,a),Atomics.store(s(),i+26,e.stackSize),Atomics.store(s(),i+28,a),Atomics.store(s(),i+29,e.detached);var c=Je()+40;Atomics.store(s(),i+43,c),r.pthread=o;var l={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};r.runPthread=function(){l.time=performance.now(),r.postMessage(l,e.transferList)},r.loaded&&(r.runPthread(),delete r.runPthread)}function Ge(){if(w){var e=$e();if(e)if(!Atomics.load(s(),e+56>>2))if(2==Atomics.load(s(),e+0>>2))throw"Canceled!"}}function qe(){g||y||function e(r){e.shown||(e.shown={}),e.shown[r]||(e.shown[r]=1,R(r))}("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function je(e){if(w)return be(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}var r;return r=28,u()[Ze()>>2]=r,-1}w||we.initMainThreadBlock();var Ve,ze=[null,function(e,r){if(w)return be(1,1,e,r)},Me,Be,He,Ue,je],Ke={e:function(e,r,n,t){ue("Assertion failed: "+K(e)+", at: "+[r?K(r):"unknown filename",n,t?K(t):"unknown function"])},r:function(e,r){_main(e,r)},x:function(e,r){if(e==r)postMessage({cmd:"processQueuedMainThreadWork"});else if(w)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=we.pthreads[e],t=n&&n.worker;if(!t)return;t.postMessage({cmd:"processThreadQueue"})}return 1},b:function(){ue()},y:function(e,r,n){var t=function(e,r){var n;for(Te.length=0,r>>=2;n=i()[e++];){var t=n<105;t&&1&r&&r++,Te.push(t?c()[r++>>1]:u()[r]),++r}return Te}(r,n);return _e[e].apply(null,t)},j:function(e,r){},d:Ae,c:ve,f:ge,p:function(e,r,n){i().copyWithin(e,r,r+n)},A:function(){return g?require("os").cpus().length:navigator.hardwareConcurrency},u:function(e,r,n){Se.length=r;for(var t=n>>3,a=0;a<r;a++)Se[a]=c()[t+a];return(e<0?_e[-e-1]:ze[e]).apply(null,Se)},q:function(e){var r,n,t=i().length;if(e<=t)return!1;if(e>2147483648)return!1;for(var a=1;a<=4;a*=2){var o=t*(1+.2/a);if(o=Math.min(o,e+100663296),xe(Math.min(2147483648,((r=Math.max(e,o))%(n=65536)>0&&(r+=n-r%n),r))))return!0}return!1},v:function(e,r,n){return Re(e)?Le(e,r,n):Me(e,r,n)},i:function(e){},s:function(e,r){},w:function(e,r){return n=e,t=r>>2,a=u()[t+6],o={alpha:!!u()[t+0],depth:!!u()[t+1],stencil:!!u()[t+2],antialias:!!u()[t+3],premultipliedAlpha:!!u()[t+4],preserveDrawingBuffer:!!u()[t+5],powerPreference:Pe[a],failIfMajorPerformanceCaveat:!!u()[t+7],majorVersion:u()[t+8],minorVersion:u()[t+9],enableExtensionsByDefault:u()[t+10],explicitSwapControl:u()[t+11],proxyContextToMainThread:u()[t+12],renderViaOffscreenBackBuffer:u()[t+13]},(i=Re(n))?o.explicitSwapControl?0:De.createContext(i,o):0;var n,t,a,o,i},l:Be,n:He,g:Ue,o:function(){we.initRuntime()},a:M||d.wasmMemory,z:function(e){var r=we.threadExitHandlers.pop();e&&r()},k:function(e,r){we.threadExitHandlers.push(function(){Y.get(e)(r)})},h:function(e,r,n,t){if("undefined"==typeof SharedArrayBuffer)return R("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return R("pthread_create called with a null thread pointer!"),28;var a=[];if(w&&0===a.length)return or(687865856,e,r,n,t);var o=0,i=0,c=0;r&&-1!=r?(o=u()[r>>2],o+=81920,i=u()[r+8>>2],c=0!==u()[r+12>>2]):o=2097152;var l=0==i;l?i=pr(16,o):q((i-=o)>0);for(var f=Xe(228),d=0;d<57;++d)s()[(f>>2)+d]=0;u()[e>>2]=f,u()[f+12>>2]=f;var p=f+152;u()[p>>2]=p;var m={stackBase:i,stackSize:o,allocatedOwnStack:l,detached:c,startRoutine:n,pthread_ptr:f,arg:t,transferList:a};return w?(m.cmd="spawnThread",postMessage(m,a)):Fe(m),0},m:function(e,r){return function(e,r,n){if(!e)return R("pthread_join attempted on a null thread pointer!"),Ee.ESRCH;if(w&&$e()==e)return R("PThread "+e+" is attempting to join to itself!"),Ee.EDEADLK;if(!w&&tr()==e)return R("Main thread "+e+" is attempting to join to itself!"),Ee.EDEADLK;if(u()[e+12>>2]!==e)return R("pthread_join attempted on thread "+e+", which does not point to a valid thread, or does not exist anymore!"),Ee.ESRCH;if(Atomics.load(s(),e+64>>2))return R("Attempted to join thread "+e+", which was already detached!"),Ee.EINVAL;for(n&&qe();;){var t=Atomics.load(s(),e+0>>2);if(1==t){var a=Atomics.load(s(),e+4>>2);return r&&(u()[r>>2]=a),Atomics.store(s(),e+64>>2,1),w?postMessage({cmd:"cleanupThread",thread:e}):ye(e),0}if(!n)return Ee.EBUSY;Ge(),w||rr(),Ae(e+0,t,w?100:1)}}(e,r,!0)},t:je},Qe=(function(){var e={a:Ke};function r(e,r){var n=e.exports;if(d.asm=n,Y=d.asm.I,D=r,!w){var t=we.unusedWorkers.length;we.unusedWorkers.forEach(function(e){we.loadWasmModuleToWorker(e,function(){--t||function(e){if(ae--,d.monitorRunDependencies&&d.monitorRunDependencies(ae),0==ae&&(null!==oe&&(clearInterval(oe),oe=null),ie)){var r=ie;ie=null,r()}}()})})}}function n(e){r(e.instance,e.module)}function t(r){return function(){if(!L&&(v||y)){if("function"==typeof fetch&&!de(pe))return fetch(pe,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+pe+"'";return e.arrayBuffer()}).catch(function(){return me(pe)});if(b)return new Promise(function(e,r){b(pe,function(r){e(new Uint8Array(r))},r)})}return Promise.resolve().then(function(){return me(pe)})}().then(function(r){return WebAssembly.instantiate(r,e)}).then(r,function(e){R("failed to asynchronously prepare wasm: "+e),ue(e)})}if(w||(q(!w,"addRunDependency cannot be used in a pthread worker"),ae++,d.monitorRunDependencies&&d.monitorRunDependencies(ae)),d.instantiateWasm)try{return d.instantiateWasm(e,r)}catch(vr){return R("Module.instantiateWasm callback failed with error: "+vr),!1}(L||"function"!=typeof WebAssembly.instantiateStreaming||le(pe)||de(pe)||"function"!=typeof fetch?t(n):fetch(pe,{credentials:"same-origin"}).then(function(r){return WebAssembly.instantiateStreaming(r,e).then(n,function(e){return R("wasm streaming compile failed: "+e),R("falling back to ArrayBuffer instantiation"),t(n)})})).catch(f)}(),d.___wasm_call_ctors=function(){return(Qe=d.___wasm_call_ctors=d.asm.B).apply(null,arguments)}),Xe=(d._init=function(){return(d._init=d.asm.C).apply(null,arguments)},d._init_with_threads_count=function(){return(d._init_with_threads_count=d.asm.D).apply(null,arguments)},d._get_threads_count=function(){return(d._get_threads_count=d.asm.E).apply(null,arguments)},d._register_tensor=function(){return(d._register_tensor=d.asm.F).apply(null,arguments)},d._dispose_data=function(){return(d._dispose_data=d.asm.G).apply(null,arguments)},d._dispose=function(){return(d._dispose=d.asm.H).apply(null,arguments)},d._Abs=function(){return(d._Abs=d.asm.J).apply(null,arguments)},d._Add=function(){return(d._Add=d.asm.K).apply(null,arguments)},d._AddN=function(){return(d._AddN=d.asm.L).apply(null,arguments)},d._All=function(){return(d._All=d.asm.M).apply(null,arguments)},d._Any=function(){return(d._Any=d.asm.N).apply(null,arguments)},d._ArgMax=function(){return(d._ArgMax=d.asm.O).apply(null,arguments)},d._AvgPool=function(){return(d._AvgPool=d.asm.P).apply(null,arguments)},d._BatchMatMul=function(){return(d._BatchMatMul=d.asm.Q).apply(null,arguments)},d._Ceil=function(){return(d._Ceil=d.asm.R).apply(null,arguments)},d._ClipByValue=function(){return(d._ClipByValue=d.asm.S).apply(null,arguments)},d._Conv2D=function(){return(d._Conv2D=d.asm.T).apply(null,arguments)},d._Conv2DBackpropInput=function(){return(d._Conv2DBackpropInput=d.asm.U).apply(null,arguments)},d._Cos=function(){return(d._Cos=d.asm.V).apply(null,arguments)},d._Cosh=function(){return(d._Cosh=d.asm.W).apply(null,arguments)},d._CropAndResize=function(){return(d._CropAndResize=d.asm.X).apply(null,arguments)},d._Cumsum=function(){return(d._Cumsum=d.asm.Y).apply(null,arguments)},d._DepthToSpace=function(){return(d._DepthToSpace=d.asm.Z).apply(null,arguments)},d._DepthwiseConv2dNative=function(){return(d._DepthwiseConv2dNative=d.asm._).apply(null,arguments)},d._Elu=function(){return(d._Elu=d.asm.$).apply(null,arguments)},d._Equal=function(){return(d._Equal=d.asm.aa).apply(null,arguments)},d._Exp=function(){return(d._Exp=d.asm.ba).apply(null,arguments)},d._FlipLeftRight=function(){return(d._FlipLeftRight=d.asm.ca).apply(null,arguments)},d._Floor=function(){return(d._Floor=d.asm.da).apply(null,arguments)},d._FloorDiv=function(){return(d._FloorDiv=d.asm.ea).apply(null,arguments)},d._FusedBatchNorm=function(){return(d._FusedBatchNorm=d.asm.fa).apply(null,arguments)},d._FusedConv2D=function(){return(d._FusedConv2D=d.asm.ga).apply(null,arguments)},d._FusedDepthwiseConv2D=function(){return(d._FusedDepthwiseConv2D=d.asm.ha).apply(null,arguments)},d._Gather=function(){return(d._Gather=d.asm.ia).apply(null,arguments)},d._GatherNd=function(){return(d._GatherNd=d.asm.ja).apply(null,arguments)},d._Greater=function(){return(d._Greater=d.asm.ka).apply(null,arguments)},d._GreaterEqual=function(){return(d._GreaterEqual=d.asm.la).apply(null,arguments)},d._LeakyRelu=function(){return(d._LeakyRelu=d.asm.ma).apply(null,arguments)},d._Less=function(){return(d._Less=d.asm.na).apply(null,arguments)},d._LessEqual=function(){return(d._LessEqual=d.asm.oa).apply(null,arguments)},d._Log=function(){return(d._Log=d.asm.pa).apply(null,arguments)},d._LogicalAnd=function(){return(d._LogicalAnd=d.asm.qa).apply(null,arguments)},d._Max=function(){return(d._Max=d.asm.ra).apply(null,arguments)},d._MaxPool=function(){return(d._MaxPool=d.asm.sa).apply(null,arguments)},d._Maximum=function(){return(d._Maximum=d.asm.ta).apply(null,arguments)},d._Mean=function(){return(d._Mean=d.asm.ua).apply(null,arguments)},d._Min=function(){return(d._Min=d.asm.va).apply(null,arguments)},d._Minimum=function(){return(d._Minimum=d.asm.wa).apply(null,arguments)},d._MirrorPad=function(){return(d._MirrorPad=d.asm.xa).apply(null,arguments)},d._Multiply=function(){return(d._Multiply=d.asm.ya).apply(null,arguments)},d._Neg=function(){return(d._Neg=d.asm.za).apply(null,arguments)},d._NonMaxSuppressionV3=function(){return(d._NonMaxSuppressionV3=d.asm.Aa).apply(null,arguments)},d._NonMaxSuppressionV4=function(){return(d._NonMaxSuppressionV4=d.asm.Ba).apply(null,arguments)},d._NonMaxSuppressionV5=function(){return(d._NonMaxSuppressionV5=d.asm.Ca).apply(null,arguments)},d._NotEqual=function(){return(d._NotEqual=d.asm.Da).apply(null,arguments)},d._OneHot=function(){return(d._OneHot=d.asm.Ea).apply(null,arguments)},d._PadV2=function(){return(d._PadV2=d.asm.Fa).apply(null,arguments)},d._Pow=function(){return(d._Pow=d.asm.Ga).apply(null,arguments)},d._Prelu=function(){return(d._Prelu=d.asm.Ha).apply(null,arguments)},d._Prod=function(){return(d._Prod=d.asm.Ia).apply(null,arguments)},d._RealDiv=function(){return(d._RealDiv=d.asm.Ja).apply(null,arguments)},d._Relu=function(){return(d._Relu=d.asm.Ka).apply(null,arguments)},d._Relu6=function(){return(d._Relu6=d.asm.La).apply(null,arguments)},d._ResizeBilinear=function(){return(d._ResizeBilinear=d.asm.Ma).apply(null,arguments)},d._Reverse=function(){return(d._Reverse=d.asm.Na).apply(null,arguments)},d._RotateWithOffset=function(){return(d._RotateWithOffset=d.asm.Oa).apply(null,arguments)},d._Round=function(){return(d._Round=d.asm.Pa).apply(null,arguments)},d._Rsqrt=function(){return(d._Rsqrt=d.asm.Qa).apply(null,arguments)},d._ScatterNd=function(){return(d._ScatterNd=d.asm.Ra).apply(null,arguments)},d._SelectV2=function(){return(d._SelectV2=d.asm.Sa).apply(null,arguments)},d._Sigmoid=function(){return(d._Sigmoid=d.asm.Ta).apply(null,arguments)},d._Sin=function(){return(d._Sin=d.asm.Ua).apply(null,arguments)},d._Softmax=function(){return(d._Softmax=d.asm.Va).apply(null,arguments)},d._Sqrt=function(){return(d._Sqrt=d.asm.Wa).apply(null,arguments)},d._Square=function(){return(d._Square=d.asm.Xa).apply(null,arguments)},d._SquaredDifference=function(){return(d._SquaredDifference=d.asm.Ya).apply(null,arguments)},d._Step=function(){return(d._Step=d.asm.Za).apply(null,arguments)},d._StridedSlice=function(){return(d._StridedSlice=d.asm._a).apply(null,arguments)},d._Sub=function(){return(d._Sub=d.asm.$a).apply(null,arguments)},d._Sum=function(){return(d._Sum=d.asm.ab).apply(null,arguments)},d._Tan=function(){return(d._Tan=d.asm.bb).apply(null,arguments)},d._Tanh=function(){return(d._Tanh=d.asm.cb).apply(null,arguments)},d._Tile=function(){return(d._Tile=d.asm.db).apply(null,arguments)},d._TopK=function(){return(d._TopK=d.asm.eb).apply(null,arguments)},d._Transform=function(){return(d._Transform=d.asm.fb).apply(null,arguments)},d._Transpose=function(){return(d._Transpose=d.asm.gb).apply(null,arguments)},d.__FusedMatMul=function(){return(d.__FusedMatMul=d.asm.hb).apply(null,arguments)},d._malloc=function(){return(Xe=d._malloc=d.asm.ib).apply(null,arguments)}),Ye=d._free=function(){return(Ye=d._free=d.asm.jb).apply(null,arguments)},Ze=d.___errno_location=function(){return(Ze=d.___errno_location=d.asm.kb).apply(null,arguments)},Je=d._emscripten_get_global_libc=function(){return(Je=d._emscripten_get_global_libc=d.asm.lb).apply(null,arguments)},$e=d._pthread_self=function(){return($e=d._pthread_self=d.asm.mb).apply(null,arguments)},er=d.___pthread_tsd_run_dtors=function(){return(er=d.___pthread_tsd_run_dtors=d.asm.nb).apply(null,arguments)},rr=d._emscripten_main_thread_process_queued_calls=function(){return(rr=d._emscripten_main_thread_process_queued_calls=d.asm.ob).apply(null,arguments)},nr=(d._emscripten_current_thread_process_queued_calls=function(){return(d._emscripten_current_thread_process_queued_calls=d.asm.pb).apply(null,arguments)},d._emscripten_register_main_browser_thread_id=function(){return(nr=d._emscripten_register_main_browser_thread_id=d.asm.qb).apply(null,arguments)}),tr=d._emscripten_main_browser_thread_id=function(){return(tr=d._emscripten_main_browser_thread_id=d.asm.rb).apply(null,arguments)},ar=d.__emscripten_do_dispatch_to_thread=function(){return(ar=d.__emscripten_do_dispatch_to_thread=d.asm.sb).apply(null,arguments)},or=d._emscripten_sync_run_in_main_thread_4=function(){return(or=d._emscripten_sync_run_in_main_thread_4=d.asm.tb).apply(null,arguments)},ir=d._emscripten_run_in_main_runtime_thread_js=function(){return(ir=d._emscripten_run_in_main_runtime_thread_js=d.asm.ub).apply(null,arguments)},ur=d.__emscripten_call_on_thread=function(){return(ur=d.__emscripten_call_on_thread=d.asm.vb).apply(null,arguments)},sr=(d._emscripten_tls_init=function(){return(d._emscripten_tls_init=d.asm.wb).apply(null,arguments)},d.__emscripten_thread_init=function(){return(sr=d.__emscripten_thread_init=d.asm.xb).apply(null,arguments)}),cr=d.stackSave=function(){return(cr=d.stackSave=d.asm.yb).apply(null,arguments)},lr=d.stackRestore=function(){return(lr=d.stackRestore=d.asm.zb).apply(null,arguments)},fr=d.stackAlloc=function(){return(fr=d.stackAlloc=d.asm.Ab).apply(null,arguments)},dr=d._emscripten_stack_set_limits=function(){return(dr=d._emscripten_stack_set_limits=d.asm.Bb).apply(null,arguments)},pr=d._memalign=function(){return(pr=d._memalign=d.asm.Cb).apply(null,arguments)},mr=d.__emscripten_allow_main_runtime_queued_calls=10512,_r=d.__emscripten_main_thread_futex=12148;function hr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Er(e){if(e=e||h,!(ae>0)){if(w)return l(d),te(),void postMessage({cmd:"loaded"});!function(){if(!w){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)e=d.preRun.shift(),J.unshift(e);var e;he(J)}}(),ae>0||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),r()},1)):r())}function r(){Ve||(Ve=!0,d.calledRun=!0,G||(te(),w||he(ee),l(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),function(){if(!w){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;)e=d.postRun.shift(),ne.unshift(e);var e;he(ne)}}()))}}if(d.cwrap=function(e,r,n,t){var a=(n=n||[]).every(function(e){return"number"===e});return"string"!==r&&a&&!t?j(e):function(){return V(e,r,n,arguments)}},d.PThread=we,d.PThread=we,d.wasmMemory=M,d.ExitStatus=hr,ie=function e(){Ve||Er(),Ve||(ie=e)},d.run=Er,d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();return w&&(P=!1,we.initWorker()),Er(),r.ready}}();"object"==typeof exports&&"object"==typeof module?module.exports=o:"function"==typeof e&&e.amd?e([],function(){return o}):"object"==typeof exports&&(exports.WasmBackendModuleThreadedSimd=o);
},{"path":"sC8V","fs":"sC8V","worker_threads":"sC8V","perf_hooks":"sC8V","os":"sC8V","process":"g5IB"}],"qKq4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wasmWorkerContents=void 0;const e='var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}';exports.wasmWorkerContents=e;
},{}],"ohpu":[function(require,module,exports) {
var __filename = "/home/sebastian/sebastian_workspace/gesture_recogntion/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm.js";
var process = require("process");
var __dirname = "/home/sebastian/sebastian_workspace/gesture_recogntion/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out";
var define;
var n,e="/home/sebastian/sebastian_workspace/gesture_recogntion/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm.js",r=require("process"),t="/home/sebastian/sebastian_workspace/gesture_recogntion/node_modules/@tensorflow/tfjs-backend-wasm/wasm-out",a=function(){var n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return void 0!==e&&(n=n||e),function(e){var a,u,o=void 0!==(e=e||{})?e:{};o.ready=new Promise(function(n,e){a=n,u=e});var s,i={};for(s in o)o.hasOwnProperty(s)&&(i[s]=o[s]);var l,c,p=[],f=!1,_=!1;f="object"==typeof window,_="function"==typeof importScripts,l="object"==typeof r&&"object"==typeof r.versions&&"string"==typeof r.versions.node,c=!f&&!l&&!_;var m,y,d,h,v,g="";l?(g=_?require("path").dirname(g)+"/":t+"/",m=function(n,e){return h||(h=require("fs")),v||(v=require("path")),n=v.normalize(n),h.readFileSync(n,e?null:"utf8")},d=function(n){var e=m(n,!0);return e.buffer||(e=new Uint8Array(e)),M(e.buffer),e},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),p=r.argv.slice(2),r.on("uncaughtException",function(n){if(!(n instanceof function(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}))throw n}),r.on("unhandledRejection",O),function(n){r.exit(n)},o.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(m=function(n){return read(n)}),d=function(n){var e;return"function"==typeof readbuffer?new Uint8Array(readbuffer(n)):(M("object"==typeof(e=read(n,"binary"))),e)},"undefined"!=typeof scriptArgs?p=scriptArgs:void 0!==arguments&&(p=arguments),"function"==typeof quit&&function(n){quit(n)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(f||_)&&(_?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),n&&(g=n),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",m=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},_&&(d=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),y=function(n,e,r){var t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="arraybuffer",t.onload=function(){200==t.status||0==t.status&&t.response?e(t.response):r()},t.onerror=r,t.send(null)});var b,w=o.print||console.log.bind(console),A=o.printErr||console.warn.bind(console);for(s in i)i.hasOwnProperty(s)&&(o[s]=i[s]);i=null,o.arguments&&(p=o.arguments),o.thisProgram&&o.thisProgram,o.quit&&o.quit,o.wasmBinary&&(b=o.wasmBinary);var S;o.noExitRuntime;"object"!=typeof WebAssembly&&O("no native wasm support detected");var R=!1;function M(n,e){n||O("Assertion failed: "+e)}function x(n){var e=o["_"+n];return M(e,"Cannot call unknown function "+n+", make sure it is exported"),e}function C(n,e,r,t,a){var u={string:function(n){var e=0;if(null!=n&&0!==n){var r=1+(n.length<<2);(function(n,e,r){(function(n,e,r,t){if(!(t>0))return 0;for(var a=r,u=r+t-1,o=0;o<n.length;++o){var s=n.charCodeAt(o);if(s>=55296&&s<=57343){var i=n.charCodeAt(++o);s=65536+((1023&s)<<10)|1023&i}if(s<=127){if(r>=u)break;e[r++]=s}else if(s<=2047){if(r+1>=u)break;e[r++]=192|s>>6,e[r++]=128|63&s}else if(s<=65535){if(r+2>=u)break;e[r++]=224|s>>12,e[r++]=128|s>>6&63,e[r++]=128|63&s}else{if(r+3>=u)break;e[r++]=240|s>>18,e[r++]=128|s>>12&63,e[r++]=128|s>>6&63,e[r++]=128|63&s}}e[r]=0})(n,q,e,r)})(n,e=ln(r),r)}return e},array:function(n){var e,r,t=ln(n.length);return e=n,r=t,P.set(e,r),t}};var o=x(n),s=[],i=0;if(t)for(var l=0;l<t.length;l++){var c=u[r[l]];c?(0===i&&(i=on()),s[l]=c(t[l])):s[l]=t[l]}var p=o.apply(null,s);return p=function(n){return"string"===e?N(n):"boolean"===e?Boolean(n):n}(p),0!==i&&sn(i),p}var E,P,q,k,D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(n,e,r){for(var t=e+r,a=e;n[a]&&!(a>=t);)++a;if(a-e>16&&n.subarray&&D)return D.decode(n.subarray(e,a));for(var u="";e<a;){var o=n[e++];if(128&o){var s=63&n[e++];if(192!=(224&o)){var i=63&n[e++];if((o=224==(240&o)?(15&o)<<12|s<<6|i:(7&o)<<18|s<<12|i<<6|63&n[e++])<65536)u+=String.fromCharCode(o);else{var l=o-65536;u+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else u+=String.fromCharCode((31&o)<<6|s)}else u+=String.fromCharCode(o)}return u}function N(n,e){return n?T(q,n,e):""}function F(n){E=n,o.HEAP8=P=new Int8Array(n),o.HEAP16=new Int16Array(n),o.HEAP32=k=new Int32Array(n),o.HEAPU8=q=new Uint8Array(n),o.HEAPU16=new Uint16Array(n),o.HEAPU32=new Uint32Array(n),o.HEAPF32=new Float32Array(n),o.HEAPF64=new Float64Array(n)}o.INITIAL_MEMORY;var I,B=[],L=[],j=[],W=[];L.push({func:function(){an()}});var H=0,V=null,G=null;function O(n){o.onAbort&&o.onAbort(n),A(n+=""),R=!0,1,n="abort("+n+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(n);throw u(e),e}function U(n,e){return String.prototype.startsWith?n.startsWith(e):0===n.indexOf(e)}o.preloadedImages={},o.preloadedAudios={};var z="data:application/octet-stream;base64,";function X(n){return U(n,z)}var K="file://";function Y(n){return U(n,K)}var J,Q="tfjs-backend-wasm.wasm";function Z(n){try{if(n==Q&&b)return new Uint8Array(b);if(d)return d(n);throw"both async and sync fetching of the wasm failed"}catch(A){O(A)}}function $(n){for(;n.length>0;){var e=n.shift();if("function"!=typeof e){var r=e.func;"number"==typeof r?void 0===e.arg?I.get(r)():I.get(r)(e.arg):r(void 0===e.arg?null:e.arg)}else e(o)}}function nn(n){try{return S.grow(n-E.byteLength+65535>>>16),F(S.buffer),1}catch(e){}}X(Q)||(J=Q,Q=o.locateFile?o.locateFile(J,g):g+J);var en={mappings:{},buffers:[null,[],[]],printChar:function(n,e){var r=en.buffers[n];0===e||10===e?((1===n?w:A)(T(r,0)),r.length=0):r.push(e)},varargs:void 0,get:function(){return en.varargs+=4,k[en.varargs-4>>2]},getStr:function(n){return N(n)},get64:function(n,e){return n}};var rn,tn={a:function(){O()},d:function(n,e,r){q.copyWithin(n,e,e+r)},e:function(n){var e,r,t=q.length;if(n>2147483648)return!1;for(var a=1;a<=4;a*=2){var u=t*(1+.2/a);if(u=Math.min(u,n+100663296),nn(Math.min(2147483648,((e=Math.max(n,u))%(r=65536)>0&&(e+=r-e%r),e))))return!0}return!1},f:function(n){return 0},c:function(n,e,r,t,a){},b:function(n,e,r,t){for(var a=0,u=0;u<r;u++){for(var o=k[e+8*u>>2],s=k[e+(8*u+4)>>2],i=0;i<s;i++)en.printChar(n,q[o+i]);a+=s}return k[t>>2]=a,0},h:function(){return 6},g:function(){return 28},i:function(n){switch(n){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}var e;return e=28,k[un()>>2]=e,-1}},an=(function(){var n={a:tn};function e(n,e){var r=n.exports;o.asm=r,F((S=o.asm.j).buffer),I=o.asm.r,function(n){if(H--,o.monitorRunDependencies&&o.monitorRunDependencies(H),0==H&&(null!==V&&(clearInterval(V),V=null),G)){var e=G;G=null,e()}}()}function r(n){e(n.instance)}function t(e){return function(){if(!b&&(f||_)){if("function"==typeof fetch&&!Y(Q))return fetch(Q,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Q+"'";return n.arrayBuffer()}).catch(function(){return Z(Q)});if(y)return new Promise(function(n,e){y(Q,function(e){n(new Uint8Array(e))},e)})}return Promise.resolve().then(function(){return Z(Q)})}().then(function(e){return WebAssembly.instantiate(e,n)}).then(e,function(n){A("failed to asynchronously prepare wasm: "+n),O(n)})}if(H++,o.monitorRunDependencies&&o.monitorRunDependencies(H),o.instantiateWasm)try{return o.instantiateWasm(n,e)}catch(a){return A("Module.instantiateWasm callback failed with error: "+a),!1}(b||"function"!=typeof WebAssembly.instantiateStreaming||X(Q)||Y(Q)||"function"!=typeof fetch?t(r):fetch(Q,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,n).then(r,function(n){return A("wasm streaming compile failed: "+n),A("falling back to ArrayBuffer instantiation"),t(r)})})).catch(u)}(),o.___wasm_call_ctors=function(){return(an=o.___wasm_call_ctors=o.asm.k).apply(null,arguments)}),un=(o._init=function(){return(o._init=o.asm.l).apply(null,arguments)},o._init_with_threads_count=function(){return(o._init_with_threads_count=o.asm.m).apply(null,arguments)},o._get_threads_count=function(){return(o._get_threads_count=o.asm.n).apply(null,arguments)},o._register_tensor=function(){return(o._register_tensor=o.asm.o).apply(null,arguments)},o._dispose_data=function(){return(o._dispose_data=o.asm.p).apply(null,arguments)},o._dispose=function(){return(o._dispose=o.asm.q).apply(null,arguments)},o._Abs=function(){return(o._Abs=o.asm.s).apply(null,arguments)},o._Add=function(){return(o._Add=o.asm.t).apply(null,arguments)},o._AddN=function(){return(o._AddN=o.asm.u).apply(null,arguments)},o._All=function(){return(o._All=o.asm.v).apply(null,arguments)},o._Any=function(){return(o._Any=o.asm.w).apply(null,arguments)},o._ArgMax=function(){return(o._ArgMax=o.asm.x).apply(null,arguments)},o._AvgPool=function(){return(o._AvgPool=o.asm.y).apply(null,arguments)},o._BatchMatMul=function(){return(o._BatchMatMul=o.asm.z).apply(null,arguments)},o._Ceil=function(){return(o._Ceil=o.asm.A).apply(null,arguments)},o._ClipByValue=function(){return(o._ClipByValue=o.asm.B).apply(null,arguments)},o._Conv2D=function(){return(o._Conv2D=o.asm.C).apply(null,arguments)},o._Conv2DBackpropInput=function(){return(o._Conv2DBackpropInput=o.asm.D).apply(null,arguments)},o._Cos=function(){return(o._Cos=o.asm.E).apply(null,arguments)},o._Cosh=function(){return(o._Cosh=o.asm.F).apply(null,arguments)},o._CropAndResize=function(){return(o._CropAndResize=o.asm.G).apply(null,arguments)},o._Cumsum=function(){return(o._Cumsum=o.asm.H).apply(null,arguments)},o._DepthToSpace=function(){return(o._DepthToSpace=o.asm.I).apply(null,arguments)},o._DepthwiseConv2dNative=function(){return(o._DepthwiseConv2dNative=o.asm.J).apply(null,arguments)},o._Elu=function(){return(o._Elu=o.asm.K).apply(null,arguments)},o._Equal=function(){return(o._Equal=o.asm.L).apply(null,arguments)},o._Exp=function(){return(o._Exp=o.asm.M).apply(null,arguments)},o._FlipLeftRight=function(){return(o._FlipLeftRight=o.asm.N).apply(null,arguments)},o._Floor=function(){return(o._Floor=o.asm.O).apply(null,arguments)},o._FloorDiv=function(){return(o._FloorDiv=o.asm.P).apply(null,arguments)},o._FusedBatchNorm=function(){return(o._FusedBatchNorm=o.asm.Q).apply(null,arguments)},o._FusedConv2D=function(){return(o._FusedConv2D=o.asm.R).apply(null,arguments)},o._FusedDepthwiseConv2D=function(){return(o._FusedDepthwiseConv2D=o.asm.S).apply(null,arguments)},o._Gather=function(){return(o._Gather=o.asm.T).apply(null,arguments)},o._GatherNd=function(){return(o._GatherNd=o.asm.U).apply(null,arguments)},o._Greater=function(){return(o._Greater=o.asm.V).apply(null,arguments)},o._GreaterEqual=function(){return(o._GreaterEqual=o.asm.W).apply(null,arguments)},o._LeakyRelu=function(){return(o._LeakyRelu=o.asm.X).apply(null,arguments)},o._Less=function(){return(o._Less=o.asm.Y).apply(null,arguments)},o._LessEqual=function(){return(o._LessEqual=o.asm.Z).apply(null,arguments)},o._Log=function(){return(o._Log=o.asm._).apply(null,arguments)},o._LogicalAnd=function(){return(o._LogicalAnd=o.asm.$).apply(null,arguments)},o._Max=function(){return(o._Max=o.asm.aa).apply(null,arguments)},o._MaxPool=function(){return(o._MaxPool=o.asm.ba).apply(null,arguments)},o._Maximum=function(){return(o._Maximum=o.asm.ca).apply(null,arguments)},o._Mean=function(){return(o._Mean=o.asm.da).apply(null,arguments)},o._Min=function(){return(o._Min=o.asm.ea).apply(null,arguments)},o._Minimum=function(){return(o._Minimum=o.asm.fa).apply(null,arguments)},o._MirrorPad=function(){return(o._MirrorPad=o.asm.ga).apply(null,arguments)},o._Multiply=function(){return(o._Multiply=o.asm.ha).apply(null,arguments)},o._Neg=function(){return(o._Neg=o.asm.ia).apply(null,arguments)},o._NonMaxSuppressionV3=function(){return(o._NonMaxSuppressionV3=o.asm.ja).apply(null,arguments)},o._NonMaxSuppressionV4=function(){return(o._NonMaxSuppressionV4=o.asm.ka).apply(null,arguments)},o._NonMaxSuppressionV5=function(){return(o._NonMaxSuppressionV5=o.asm.la).apply(null,arguments)},o._NotEqual=function(){return(o._NotEqual=o.asm.ma).apply(null,arguments)},o._OneHot=function(){return(o._OneHot=o.asm.na).apply(null,arguments)},o._PadV2=function(){return(o._PadV2=o.asm.oa).apply(null,arguments)},o._Pow=function(){return(o._Pow=o.asm.pa).apply(null,arguments)},o._Prelu=function(){return(o._Prelu=o.asm.qa).apply(null,arguments)},o._Prod=function(){return(o._Prod=o.asm.ra).apply(null,arguments)},o._RealDiv=function(){return(o._RealDiv=o.asm.sa).apply(null,arguments)},o._Relu=function(){return(o._Relu=o.asm.ta).apply(null,arguments)},o._Relu6=function(){return(o._Relu6=o.asm.ua).apply(null,arguments)},o._ResizeBilinear=function(){return(o._ResizeBilinear=o.asm.va).apply(null,arguments)},o._Reverse=function(){return(o._Reverse=o.asm.wa).apply(null,arguments)},o._RotateWithOffset=function(){return(o._RotateWithOffset=o.asm.xa).apply(null,arguments)},o._Round=function(){return(o._Round=o.asm.ya).apply(null,arguments)},o._Rsqrt=function(){return(o._Rsqrt=o.asm.za).apply(null,arguments)},o._ScatterNd=function(){return(o._ScatterNd=o.asm.Aa).apply(null,arguments)},o._SelectV2=function(){return(o._SelectV2=o.asm.Ba).apply(null,arguments)},o._Sigmoid=function(){return(o._Sigmoid=o.asm.Ca).apply(null,arguments)},o._Sin=function(){return(o._Sin=o.asm.Da).apply(null,arguments)},o._Softmax=function(){return(o._Softmax=o.asm.Ea).apply(null,arguments)},o._Sqrt=function(){return(o._Sqrt=o.asm.Fa).apply(null,arguments)},o._Square=function(){return(o._Square=o.asm.Ga).apply(null,arguments)},o._SquaredDifference=function(){return(o._SquaredDifference=o.asm.Ha).apply(null,arguments)},o._Step=function(){return(o._Step=o.asm.Ia).apply(null,arguments)},o._StridedSlice=function(){return(o._StridedSlice=o.asm.Ja).apply(null,arguments)},o._Sub=function(){return(o._Sub=o.asm.Ka).apply(null,arguments)},o._Sum=function(){return(o._Sum=o.asm.La).apply(null,arguments)},o._Tan=function(){return(o._Tan=o.asm.Ma).apply(null,arguments)},o._Tanh=function(){return(o._Tanh=o.asm.Na).apply(null,arguments)},o._Tile=function(){return(o._Tile=o.asm.Oa).apply(null,arguments)},o._TopK=function(){return(o._TopK=o.asm.Pa).apply(null,arguments)},o._Transform=function(){return(o._Transform=o.asm.Qa).apply(null,arguments)},o._Transpose=function(){return(o._Transpose=o.asm.Ra).apply(null,arguments)},o.__FusedMatMul=function(){return(o.__FusedMatMul=o.asm.Sa).apply(null,arguments)},o._malloc=function(){return(o._malloc=o.asm.Ta).apply(null,arguments)},o._free=function(){return(o._free=o.asm.Ua).apply(null,arguments)},o.___errno_location=function(){return(un=o.___errno_location=o.asm.Va).apply(null,arguments)}),on=o.stackSave=function(){return(on=o.stackSave=o.asm.Wa).apply(null,arguments)},sn=o.stackRestore=function(){return(sn=o.stackRestore=o.asm.Xa).apply(null,arguments)},ln=o.stackAlloc=function(){return(ln=o.stackAlloc=o.asm.Ya).apply(null,arguments)};function cn(n){function e(){rn||(rn=!0,o.calledRun=!0,R||(!0,$(L),$(j),a(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)n=o.postRun.shift(),W.unshift(n);var n;$(W)}()))}n=n||p,H>0||(!function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)n=o.preRun.shift(),B.unshift(n);var n;$(B)}(),H>0||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()))}if(o.cwrap=function(n,e,r,t){var a=(r=r||[]).every(function(n){return"number"===n});return"string"!==e&&a&&!t?x(n):function(){return C(n,e,r,arguments)}},G=function n(){rn||cn(),rn||(G=n)},o.run=cn,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return cn(),e.ready}}();"object"==typeof exports&&"object"==typeof module?module.exports=a:"function"==typeof n&&n.amd?n([],function(){return a}):"object"==typeof exports&&(exports.WasmBackendModule=a);
},{"path":"sC8V","fs":"sC8V","process":"g5IB"}],"TpM9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackendWasm=void 0,exports.getThreadsCount=j,exports.init=d,exports.resetWasmPath=b,exports.setThreadsCount=M,exports.setWasmPath=p,exports.setWasmPaths=y,require("./flags_wasm");var e=require("@tensorflow/tfjs-core"),t=r(require("../wasm-out/tfjs-backend-wasm-threaded-simd.js")),a=require("../wasm-out/tfjs-backend-wasm-threaded-simd.worker.js"),s=r(require("../wasm-out/tfjs-backend-wasm.js"));function r(e){return e&&e.__esModule?e:{default:e}}class n extends e.KernelBackend{constructor(t){super(),this.wasm=t,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(g),k=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new e.DataStorage(this,(0,e.engine)())}write(e,t,a){const s={id:this.dataIdNextNumber++};return this.move(s,e,t,a,1),s}numDataIds(){return this.dataIdMap.numDataIds()}async time(t){const a=e.util.now();return t(),{kernelMs:e.util.now()-a}}move(t,a,s,r,n){const i=this.dataIdNextNumber++;if("string"===r){const e=a;return void this.dataIdMap.set(t,{id:i,stringBytes:e,shape:s,dtype:r,memoryOffset:null,refCount:n})}const o=e.util.sizeFromShape(s),d=o*e.util.bytesPerElement(r),u=this.wasm._malloc(d);this.dataIdMap.set(t,{id:i,memoryOffset:u,shape:s,dtype:r,refCount:n}),this.wasm.tfjs.registerTensor(i,o,u),null!=a&&this.wasm.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,d),u)}async read(e){return this.readSync(e)}readSync(t){const{memoryOffset:a,dtype:s,shape:r,stringBytes:n}=this.dataIdMap.get(t);return"string"===s?n:u(this.wasm.HEAPU8.slice(a,a+e.util.sizeFromShape(r)*e.util.bytesPerElement(s)).buffer,s)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){const a=this.dataIdMap.get(e);if(a.refCount--,!t&&a.refCount>0)return!1;this.wasm._free(a.memoryOffset),this.wasm.tfjs.disposeData(a.id),this.dataIdMap.delete(e)}return!0}refCount(e){if(this.dataIdMap.has(e)){return this.dataIdMap.get(e).refCount}return 0}incRef(e){const t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(t,a,s){let r;if(null==s)r=this.write(null,t,a);else{const n=this.dataIdNextNumber++;r={id:n},this.dataIdMap.set(r,{id:n,memoryOffset:s,shape:t,dtype:a,refCount:1});const i=e.util.sizeFromShape(t);this.wasm.tfjs.registerTensor(n,i,s)}return{dataId:r,shape:t,dtype:a}}typedArrayFromHeap({shape:t,dtype:a,dataId:s}){const r=this.wasm.HEAPU8.buffer,{memoryOffset:n}=this.dataIdMap.get(s),i=e.util.sizeFromShape(t);switch(a){case"float32":return new Float32Array(r,n,i);case"int32":return new Int32Array(r,n,i);case"bool":return new Uint8Array(r,n,i);default:throw new Error(`Unknown dtype ${a}`)}}}function i(t){return(a,s)=>(e.util.fetch(t,{credentials:"same-origin"}).then(e=>{e.ok||a.env.a(`failed to load wasm binary file at '${t}'`),e.arrayBuffer().then(e=>{WebAssembly.instantiate(e,a).then(e=>{s(e.instance,e.module)})})}),{})}function o(e,t,a){if(null!=m)return m;let s="tfjs-backend-wasm.wasm";return e&&t?s="tfjs-backend-wasm-threaded-simd.wasm":e&&(s="tfjs-backend-wasm-simd.wasm"),null!=h&&null!=h[s]?h[s]:a+s}async function d(){const[r,n]=await Promise.all([(0,e.env)().getAsync("WASM_HAS_SIMD_SUPPORT"),(0,e.env)().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((e,d)=>{const u={locateFile:(e,t)=>{if(e.endsWith(".worker.js")){const e=a.wasmWorkerContents,t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}return e.endsWith(".wasm")?o(r,n,null!=f?f:t):t+e}};w&&(u.instantiateWasm=i(o(r,n,null!=f?f:"")));let l,h=!1;u.onAbort=(()=>{if(h)return;if(c)return;c=!0;d({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})}),n&&r&&null==m?(u.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+t.default.toString()],{type:"text/javascript"}),l=(0,t.default)(u)):l=(0,s.default)(u),l.then(t=>{h=!0,c=!1;t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})})})}function u(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${t}`)}}exports.BackendWasm=n;const l=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let m=null,f=null,h={},c=!1,w=!1;function p(t,a=!1){if((0,e.deprecationWarn)("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),c)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");m=t,w=a}function y(e,t=!1){if(c)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)f=e;else{h=e;const t=l.filter(e=>null==h[e]);if(t.length>0)throw new Error("There were no entries found for the following binaries: "+`${t.join(",")}. Please either call setWasmPaths with a `+"map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.")}w=t}function b(){m=null,f=null,h={},w=!1,c=!1}let g=-1,k=-1;function M(e){g=e}function j(){if(-1===k)throw new Error("WASM backend not initialized.");return k}
},{"./flags_wasm":"VuFc","@tensorflow/tfjs-core":"tc6m","../wasm-out/tfjs-backend-wasm-threaded-simd.js":"qCN2","../wasm-out/tfjs-backend-wasm-threaded-simd.worker.js":"qKq4","../wasm-out/tfjs-backend-wasm.js":"ohpu"}],"H57Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BackendWasm",{enumerable:!0,get:function(){return t.BackendWasm}}),Object.defineProperty(exports,"getThreadsCount",{enumerable:!0,get:function(){return t.getThreadsCount}}),Object.defineProperty(exports,"setThreadsCount",{enumerable:!0,get:function(){return t.setThreadsCount}}),Object.defineProperty(exports,"setWasmPath",{enumerable:!0,get:function(){return t.setWasmPath}}),Object.defineProperty(exports,"setWasmPaths",{enumerable:!0,get:function(){return t.setWasmPaths}}),Object.defineProperty(exports,"version_wasm",{enumerable:!0,get:function(){return r.version}}),require("./flags_wasm");var e=require("@tensorflow/tfjs-core"),t=require("./backend_wasm"),r=require("./version");const n=2;(0,e.registerBackend)("wasm",async()=>{const{wasm:e}=await(0,t.init)();return new t.BackendWasm(e)},2);
},{"./flags_wasm":"VuFc","@tensorflow/tfjs-core":"tc6m","./backend_wasm":"TpM9","./version":"SdA6"}],"Tlvt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./register_all_kernels");var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"./register_all_kernels":"Xqqo","./base":"H57Z"}],"pKMt":[function(require,module,exports) {
"use strict";var T,_;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SaverDef=exports.DataType=void 0,exports.DataType=T,function(T){T[T.DT_INVALID=0]="DT_INVALID",T[T.DT_FLOAT=1]="DT_FLOAT",T[T.DT_DOUBLE=2]="DT_DOUBLE",T[T.DT_INT32=3]="DT_INT32",T[T.DT_UINT8=4]="DT_UINT8",T[T.DT_INT16=5]="DT_INT16",T[T.DT_INT8=6]="DT_INT8",T[T.DT_STRING=7]="DT_STRING",T[T.DT_COMPLEX64=8]="DT_COMPLEX64",T[T.DT_INT64=9]="DT_INT64",T[T.DT_BOOL=10]="DT_BOOL",T[T.DT_QINT8=11]="DT_QINT8",T[T.DT_QUINT8=12]="DT_QUINT8",T[T.DT_QINT32=13]="DT_QINT32",T[T.DT_BFLOAT16=14]="DT_BFLOAT16",T[T.DT_FLOAT_REF=101]="DT_FLOAT_REF",T[T.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",T[T.DT_INT32_REF=103]="DT_INT32_REF",T[T.DT_UINT8_REF=104]="DT_UINT8_REF",T[T.DT_INT16_REF=105]="DT_INT16_REF",T[T.DT_INT8_REF=106]="DT_INT8_REF",T[T.DT_STRING_REF=107]="DT_STRING_REF",T[T.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",T[T.DT_INT64_REF=109]="DT_INT64_REF",T[T.DT_BOOL_REF=110]="DT_BOOL_REF",T[T.DT_QINT8_REF=111]="DT_QINT8_REF",T[T.DT_QUINT8_REF=112]="DT_QUINT8_REF",T[T.DT_QINT32_REF=113]="DT_QINT32_REF",T[T.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(T||(exports.DataType=T={})),exports.SaverDef=_,function(T){let _;!function(T){T[T.LEGACY=0]="LEGACY",T[T.V1=1]="V1",T[T.V2=2]="V2"}(_=T.CheckpointFormatVersion||(T.CheckpointFormatVersion={}))}(_||(exports.SaverDef=_={}));
},{}],"w10i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTensor=d,exports.getNodeNameAndIndex=o,exports.getPadding=c,exports.getParamValue=e,exports.getTensor=n,exports.getTensorsForCurrentContenxt=r,exports.parseNodeName=u,exports.split=i;var t=require("@tensorflow/tfjs-core");function e(e,r,o,s,u){const i=r.inputParams[e];if(i&&void 0!==i.inputIndexStart){const e=i.inputIndexStart,c=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd;if("tensor"===i.type)return n(r.inputNames[i.inputIndexStart],o,s,u);if("tensors"===i.type){return r.inputNames.slice(e,c).map(t=>n(t,o,s,u))}const d=n(r.inputNames.slice(e)[0],o,s,u),p=d.dataSync();return"number"===i.type?p[0]:t.util.toNestedArray(d.shape,p)}const c=r.attrParams[e];return c&&c.value}function n(t,e,n,r){const[o,i]=u(t);if(null!=r){const t=r.getHashTableHandleByName(o);if(null!=t)return t}const c=n.currentContextIds.find(t=>!!e[s(o,t)]);return void 0!==c?e[s(o,c)][i]:void 0}function r(t,e,n){return e[s(t,n.currentContextId)]}function o(t,e){const[n,r,o]=u(t);return[s(n,e&&e.currentContextId),r,o]}function s(t,e){return e?`${t}-${e}`:t}function u(t){const e=t.split(":");if(1===e.length)return[t,0,void 0];const n=e[0],r=3===e.length?e[1]:void 0;return[n,Number(e[e.length-1]),r]}function i(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function c(t,n,r){let o=e("pad",t,n,r);if("explicit"===o){o=e("explicitPaddings",t,n,r);const s=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)s[t][0]=o[2*t],s[t][1]=o[2*t+1];return s}return o}function d(e){return e.kept?e:(0,t.clone)(e)}
},{"@tensorflow/tfjs-core":"tc6m"}],"sRrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}];exports.json=e;
},{}],"GT2x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];exports.json=t;
},{}],"A4xH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];exports.json=e;
},{}],"gtBU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];exports.json=t;
},{}],"ooyd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}];exports.json=e;
},{}],"vBB5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}];exports.json=e;
},{}],"VBGq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}];exports.json=t;
},{}],"tqog":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];exports.json=e;
},{}],"SpEM":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var e=arguments[3],t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.OperationMapper=void 0,exports.decodeBase64=q,exports.getBoolArrayParam=F,exports.getBoolParam=I,exports.getDtypeArrayParam=M,exports.getDtypeParam=S,exports.getFuncParam=E,exports.getNumberParam=w,exports.getNumericArrayParam=C,exports.getStringArrayParam=W,exports.getStringParam=V,exports.getTensorShapeArrayParam=z,exports.getTensorShapeParam=$,exports.parseDtypeParam=j,exports.parseStringParam=A,exports.parseTensorShapeParam=B;var a=require("@tensorflow/tfjs-core"),r=O(require("../data/compiled_api")),n=require("./custom_op/register"),s=require("./executors/utils"),u=O(require("./op_list/arithmetic")),o=O(require("./op_list/basic_math")),i=O(require("./op_list/control")),p=O(require("./op_list/convolution")),l=O(require("./op_list/creation")),c=O(require("./op_list/dynamic")),f=O(require("./op_list/evaluation")),d=O(require("./op_list/graph")),m=O(require("./op_list/hash_table")),h=O(require("./op_list/image")),g=O(require("./op_list/logical")),y=O(require("./op_list/matrices")),N=O(require("./op_list/normalization")),b=O(require("./op_list/reduction")),D=O(require("./op_list/slice_join")),_=O(require("./op_list/sparse")),T=O(require("./op_list/spectral")),v=O(require("./op_list/string")),x=O(require("./op_list/transformation"));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(P=function(e){return e?a:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=P(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=n?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}class k{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[u,o,i,p,l,c,f,d,m,h,g,y,N,b,D,_,T,v,x].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){const a=e.node,r=[],n=[],u=[],o=a.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?n.push(e[t.name]):null!=t.input&&0!==t.input.length||u.push(e[t.name]),e),{});let i=[];const p=[];let l={},c={};null!=t&&(l=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));const f=Object.keys(o);f.forEach(e=>{const t=o[e];t.inputNames.forEach((e,a)=>{const[r,,n]=(0,s.getNodeNameAndIndex)(e),u=o[r];if(null!=u.outputs){const e=u.outputs.indexOf(n);if(-1!==e){const n=`${r}:${e}`;t.inputNames[a]=n}}t.inputs.push(u),u.children.push(t)})}),0===Object.keys(c).length?f.forEach(e=>{const t=o[e];0===t.children.length&&p.push(t)}):Object.keys(c).forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e),a=o[t];null!=a&&(a.signatureKey=c[e],p.push(a))}),Object.keys(l).length>0?Object.keys(l).forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e),a=o[t];a&&(a.signatureKey=l[e],i.push(a))}):i=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const m={nodes:o,inputs:i,outputs:p,weights:n,placeholders:r,signature:t,functions:d};return u.length>0&&(m.initNodes=u),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,a)=>(t[e[a].name]=a,t),{})}mapNode(e){const t=(0,n.getRegisteredOp)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const a={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.substr(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(a.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(a.attrParams=t.attrs.reduce((t,a)=>{const r=a.type;let n=void 0;switch(a.type){case"string":void 0===(n=V(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=V(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":void 0===(n=W(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=W(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":void 0===(n=w(e.attr,a.tfName,a.defaultValue||0))&&a.tfDeprecatedName&&(n=w(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":void 0===(n=C(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=C(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":void 0===(n=I(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=I(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":void 0===(n=F(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=F(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":void 0===(n=$(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=$(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":void 0===(n=z(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=z(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":void 0===(n=S(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=S(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":void 0===(n=M(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=M(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":void 0===(n=E(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=E(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return t[a.name]={value:n,type:r},t},{})),a}mapFunction(e){const t=e.nodeDef,a=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&a.push(e[t.name]),e),{}));const n=[],u=[];e.signature.inputArg.forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e.name),a={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:j(e.type),type:"dtype"}},children:[]};a.signatureKey=e.name,n.push(a),r[t]=a}),Object.keys(r).forEach(e=>{const t=r[e];t.inputNames.forEach((e,a)=>{const[n,,u]=(0,s.getNodeNameAndIndex)(e),o=r[n];if(null!=o.outputs){const e=o.outputs.indexOf(u);if(-1!==e){const r=`${n}:${e}`;t.inputNames[a]=r}}t.inputs.push(o),o.children.push(t)})});const o=e.ret;e.signature.outputArg.forEach(e=>{const[t,a]=(0,s.getNodeNameAndIndex)(o[e.name]),n=r[t];null!=n&&(n.defaultOutput=a,u.push(n))});const i=this.mapArgsToSignature(e);return{nodes:r,inputs:n,outputs:u,weights:a,placeholders:[],signature:i}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,a)=>(t[a.name]=this.mapArgToTensorInfo(a,e.ret),t),{})}}mapArgToTensorInfo(e,t){let a=e.name;return null!=t&&(a=t[a]),{name:a,dtype:e.type}}}function q(e){const r=(0,a.env)().global;if(void 0!==r.atob)return r.atob(e);if(void 0!==t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function A(e,t){const a=Array.isArray(e)?String.fromCharCode.apply(null,e):q(e);return t?a:a.toLowerCase()}function V(e,t,a,r=!1){const n=e[t];return null!=n?A(n.s,r):a}function I(e,t,a){const r=e[t];return r?r.b:a}function w(e,t,a){const r=e[t]||{},n=null!=r.i?r.i:null!=r.f?r.f:a;return"number"==typeof n?n:parseInt(n,10)}function j(e){switch("string"==typeof e&&(e=r.DataType[e]),e){case r.DataType.DT_FLOAT:return"float32";case r.DataType.DT_INT32:case r.DataType.DT_INT64:case r.DataType.DT_INT8:case r.DataType.DT_UINT8:return"int32";case r.DataType.DT_BOOL:return"bool";case r.DataType.DT_DOUBLE:return"float32";case r.DataType.DT_STRING:return"string";default:return null}}function E(e,t,a){const r=e[t];return r&&r.func?r.func.name:a}function S(e,t,a){const r=e[t];return r&&r.type?j(r.type):a}function M(e,t,a){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>j(e)):a}function B(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function $(e,t,a){const r=e[t];return r&&r.shape?B(r.shape):a}function C(e,t,a){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):a}function W(e,t,a,r=!1){const n=e[t];return n&&n.list&&n.list.s?n.list.s.map(e=>A(e,r)):a}function z(e,t,a){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>B(e)):a}function F(e,t,a){const r=e[t];return r&&r.list&&r.list.b?r.list.b:a}exports.OperationMapper=k;
},{"@tensorflow/tfjs-core":"tc6m","../data/compiled_api":"pKMt","./custom_op/register":"c1gB","./executors/utils":"w10i","./op_list/arithmetic":"bHNY","./op_list/basic_math":"qGJM","./op_list/control":"sRrn","./op_list/convolution":"GT2x","./op_list/creation":"A4xH","./op_list/dynamic":"OPSM","./op_list/evaluation":"gtBU","./op_list/graph":"kyno","./op_list/hash_table":"ssjH","./op_list/image":"ooyd","./op_list/logical":"LgUZ","./op_list/matrices":"vBB5","./op_list/normalization":"VBGq","./op_list/reduction":"tqog","./op_list/slice_join":"uMPy","./op_list/sparse":"WJlx","./op_list/spectral":"kpuq","./op_list/string":"snOi","./op_list/transformation":"hNiy","buffer":"aMB2"}],"lSvz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeValueImpl=void 0;var t=require("../executors/utils"),r=require("../operation_mapper");class e{constructor(t,r,e){this.node=t,this.tensorMap=r,this.context=e,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,r)=>(t[r]=this.getAttr(r),t),{}))}getInput(r){return(0,t.getTensor)(r,this.tensorMap,this.context)}getAttr(e,s){const n=this.node.rawAttrs[e];if(null!=n.tensor)return(0,t.getTensor)(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return(0,r.getNumberParam)(this.node.rawAttrs,e,s);if(null!=n.s)return(0,r.getStringParam)(this.node.rawAttrs,e,s);if(null!=n.b)return(0,r.getBoolParam)(this.node.rawAttrs,e,s);if(null!=n.shape)return(0,r.getTensorShapeParam)(this.node.rawAttrs,e,s);if(null!=n.type)return(0,r.getDtypeParam)(this.node.rawAttrs,e,s);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return(0,r.getNumericArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.s)return(0,r.getStringArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.shape)return(0,r.getTensorShapeArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.b)return(0,r.getBoolArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.type)return(0,r.getDtypeArrayParam)(this.node.rawAttrs,e,s)}return s}}exports.NodeValueImpl=e;
},{"../executors/utils":"w10i","../operation_mapper":"SpEM"}],"o43B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ops");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"./ops":"R1mJ"}],"IGj9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=o?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(u,n,l):u[n]=e[n]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u)=>{switch(r.op){case"BiasAdd":case"AddV2":case"Add":return[e.add((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"AddN":return[e.addN((0,a.getParamValue)("tensors",r,t,u))];case"FloorMod":case"Mod":return[e.mod((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Mul":return[e.mul((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"RealDiv":case"Div":return[e.div((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"DivNoNan":return[e.divNoNan((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"FloorDiv":return[e.floorDiv((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Sub":return[e.sub((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Minimum":return[e.minimum((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Maximum":return[e.maximum((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Pow":return[e.pow((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"SquaredDifference":return[e.squaredDifference((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const o="arithmetic";exports.CATEGORY=o;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"dVEs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=n?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(u,l,s):u[l]=e[l]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u)=>{switch(r.op){case"Abs":case"ComplexAbs":return[e.abs((0,a.getParamValue)("x",r,t,u))];case"Acos":return[e.acos((0,a.getParamValue)("x",r,t,u))];case"Acosh":return[e.acosh((0,a.getParamValue)("x",r,t,u))];case"Asin":return[e.asin((0,a.getParamValue)("x",r,t,u))];case"Asinh":return[e.asinh((0,a.getParamValue)("x",r,t,u))];case"Atan":return[e.atan((0,a.getParamValue)("x",r,t,u))];case"Atan2":return[e.atan2((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("y",r,t,u))];case"Atanh":return[e.atanh((0,a.getParamValue)("x",r,t,u))];case"Ceil":return[e.ceil((0,a.getParamValue)("x",r,t,u))];case"Complex":return[e.complex((0,a.getParamValue)("real",r,t,u),(0,a.getParamValue)("imag",r,t,u))];case"Cos":return[e.cos((0,a.getParamValue)("x",r,t,u))];case"Cosh":return[e.cosh((0,a.getParamValue)("x",r,t,u))];case"Elu":return[e.elu((0,a.getParamValue)("x",r,t,u))];case"Erf":return[e.erf((0,a.getParamValue)("x",r,t,u))];case"Exp":return[e.exp((0,a.getParamValue)("x",r,t,u))];case"Expm1":return[e.expm1((0,a.getParamValue)("x",r,t,u))];case"Floor":return[e.floor((0,a.getParamValue)("x",r,t,u))];case"Log":return[e.log((0,a.getParamValue)("x",r,t,u))];case"Log1p":return[e.log1p((0,a.getParamValue)("x",r,t,u))];case"Imag":return[e.imag((0,a.getParamValue)("x",r,t,u))];case"Neg":return[e.neg((0,a.getParamValue)("x",r,t,u))];case"Reciprocal":return[e.reciprocal((0,a.getParamValue)("x",r,t,u))];case"Real":return[e.real((0,a.getParamValue)("x",r,t,u))];case"Relu":return[e.relu((0,a.getParamValue)("x",r,t,u))];case"Round":return[e.round((0,a.getParamValue)("x",r,t,u))];case"Selu":return[e.selu((0,a.getParamValue)("x",r,t,u))];case"Sigmoid":return[e.sigmoid((0,a.getParamValue)("x",r,t,u))];case"Sin":return[e.sin((0,a.getParamValue)("x",r,t,u))];case"Sign":return[e.sign((0,a.getParamValue)("x",r,t,u))];case"Sinh":return[e.sinh((0,a.getParamValue)("x",r,t,u))];case"Softplus":return[e.softplus((0,a.getParamValue)("x",r,t,u))];case"Sqrt":return[e.sqrt((0,a.getParamValue)("x",r,t,u))];case"Square":return[e.square((0,a.getParamValue)("x",r,t,u))];case"Tanh":return[e.tanh((0,a.getParamValue)("x",r,t,u))];case"Tan":return[e.tan((0,a.getParamValue)("x",r,t,u))];case"ClipByValue":return[e.clipByValue((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("clipValueMin",r,t,u),(0,a.getParamValue)("clipValueMax",r,t,u))];case"Relu6":return[e.relu6((0,a.getParamValue)("x",r,t,u))];case"Rsqrt":return[e.rsqrt((0,a.getTensor)(r.inputNames[0],t,u))];case"Prod":return[e.prod((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("axes",r,t,u))];case"LeakyRelu":return[e.leakyRelu((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("alpha",r,t,u))];case"Prelu":return[e.prelu((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("alpha",r,t,u))];case"IsNan":return[e.isNaN((0,a.getTensor)(r.inputNames[0],t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const n="basic_math";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"QSgK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertShapesMatchAllowUndefinedSize=t,exports.fullDefinedShape=r,exports.inferElementShape=n,exports.mergeElementShape=o;var e=require("@tensorflow/tfjs-core");function t(t,r,n=""){if("number"!=typeof t&&"number"!=typeof r){e.util.assert(t.length===r.length,()=>n+` Shapes ${t} and ${r} must match`);for(let o=0;o<t.length;o++){const l=t[o],s=r[o];e.util.assert(l<0||s<0||l===s,()=>n+` Shapes ${t} and ${r} must match`)}}}function r(e){return"number"!=typeof e&&!e.some(e=>e<0)}function n(e,t,n){let l=o(e,n);const s=!r(l);if(s&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+` with non-fully-defined elementShape: ${l}`);if(s&&t.forEach(e=>{l=o(e.shape,l)}),!r(l))throw new Error(`Non-fully-defined elementShape: ${l}`);return l}function o(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const r=[];for(let n=0;n<e.length;++n){const o=e[n],l=t[n];if(o>=0&&l>=0&&o!==l)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);r[n]=o>=0?o:l}return r}
},{"@tensorflow/tfjs-core":"tc6m"}],"lFaL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TensorArray=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./tensor_utils");class s{constructor(t,s,r,i,n,a,h){this.name=t,this.dtype=s,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=n,this.dynamicSize=a,this.clearAfterRead=h,this.tensors=[],this.closed_=!1,this.idTensor=(0,e.scalar)(0),(0,e.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read `+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(s,r){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(s<0||!this.dynamicSize&&s>=this.maxSize)throw new Error(`Tried to write to index ${s}, but array is not resizeable and size is: ${this.maxSize}`);const i=this.tensors[s]||{};if(r.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s},\n          because the value dtype is ${r.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=r.shape),(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,r.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${s}.`),i.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s}, because it has already been read.`);if(i.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s}, because it has already been written.`);i.tensor=r,(0,e.keep)(r),i.written=!0,this.tensors[s]=i}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,`+`because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,s)=>this.write(e,t[s]))}gather(s,r){if(r&&r!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${r}`);if(s)s=s.slice(0,this.size());else{s=[];for(let e=0;e<this.size();e++)s.push(e)}if(0===s.length)return(0,e.tensor)([],[0].concat(this.elementShape));const i=this.readMany(s);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),(0,e.stack)(i,0)}concat(s){if(s&&s!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${s}`);if(0===this.size())return(0,e.tensor)([],[0].concat(this.elementShape));const r=[];for(let e=0;e<this.size();e++)r.push(e);const i=this.readMany(r);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,i[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${i[0].shape})`),(0,e.concat)(i,0)}scatter(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);if(t.length!==s.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${s.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,(0,e.unstack)(s,0))}split(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);let r=0;const i=t.map(e=>r+=e);if(r!==s.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${s.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), `+"and the TensorArray is not marked as dynamically resizeable");const n=0===r?0:s.size/r,a=[];(0,e.tidy)(()=>{s=(0,e.reshape)(s,[1,r,n]);for(let r=0;r<t.length;++r){const h=[0,0===r?0:i[r-1],0],o=[1,t[r],n];a[r]=(0,e.reshape)((0,e.slice)(s,h,o),this.elementShape)}return a});const h=[];for(let e=0;e<t.length;e++)h[e]=e;this.writeMany(h,a)}}exports.TensorArray=s;
},{"@tensorflow/tfjs-core":"tc6m","./tensor_utils":"QSgK"}],"txuj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TensorList=void 0,exports.fromTensor=n,exports.reserve=r,exports.scatter=i,exports.split=h;var e=require("@tensorflow/tfjs-core"),t=require("./tensor_utils");class s{constructor(s,n,r,i=-1){this.tensors=s,this.elementShape=n,this.elementDtype=r,null!=s&&s.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);(0,t.assertShapesMatchAllowUndefinedSize)(n,s.shape,"TensorList shape mismatch: "),(0,e.keep)(s)}),this.idTensor=(0,e.scalar)(0),this.maxNumElements=i,(0,e.keep)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new s([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(s,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(-1!==r&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);(0,t.assertShapesMatchAllowUndefinedSize)(s,this.elementShape,"TensorList shape mismatch: ");const i=(0,t.inferElementShape)(this.elementShape,this.tensors,s);return(0,e.tidy)(()=>{const t=this.tensors.map(t=>(0,e.reshape)(t,i));return(0,e.stack)(t,0)})}popBack(s,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const r=(0,t.inferElementShape)(this.elementShape,this.tensors,s),i=this.tensors.pop();return(0,t.assertShapesMatchAllowUndefinedSize)(i.shape,s,"TensorList shape mismatch: "),(0,e.reshape)(i,r)}pushBack(s){if(s.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s.dtype}, but list elements ${this.elementDtype}`);if((0,t.assertShapesMatchAllowUndefinedSize)(s.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,e.keep)(s),this.tensors.push(s)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(s,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(s<0||s>this.tensors.length)throw new Error(`Trying to access element ${s} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[s])throw new Error(`element at index ${s} is null.`);(0,t.assertShapesMatchAllowUndefinedSize)(this.tensors[s].shape,n,"TensorList shape mismatch: ");const i=(0,t.inferElementShape)(this.elementShape,this.tensors,n);return(0,e.reshape)(this.tensors[s],i)}setItem(s,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(s<0||-1!==this.maxNumElements&&s>=this.maxNumElements)throw new Error(`Trying to set element ${s} in a list with max ${this.maxNumElements} elements.`);(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,n.shape,"TensorList shape mismatch: "),(0,e.keep)(n),this.tensors[s]=n}gather(s,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,r,"TensorList shape mismatch: "),s=s.slice(0,this.size());const i=(0,t.inferElementShape)(this.elementShape,this.tensors,r);return 0===s.length?(0,e.tensor)([],[0].concat(i)):(0,e.tidy)(()=>{const t=s.map(t=>(0,e.reshape)(this.tensors[t],i));return(0,e.stack)(t,0)})}concat(s,n){if(s&&s!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${s}`);(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,n,"TensorList shape mismatch: ");const r=(0,t.inferElementShape)(this.elementShape,this.tensors,n);return 0===this.size()?(0,e.tensor)([],[0].concat(r)):(0,e.tidy)(()=>{const t=this.tensors.map(t=>(0,e.reshape)(t,r));return(0,e.concat)(t,0)})}}function n(n,r,i){const h=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==i)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${i}`);const o=n.shape.slice(1);(0,t.assertShapesMatchAllowUndefinedSize)(o,r,"TensorList shape mismatch: ");const a=(0,e.unstack)(n);return new s(a,r,h)}function r(e,t,n){return new s([],e,t,n)}function i(t,n,r,i){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);const h=Math.max(...n);if(null!=i&&-1!==i&&h>=i)throw new Error(`Max index must be < array size (${h}  vs. ${i})`);const o=new s([],r,t.dtype,i),a=(0,e.unstack)(t,0);return n.forEach((e,t)=>{o.setItem(e,a[t])}),o}function h(n,r,i){let h=0;const o=r.map(e=>h+=e);if(h!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${h}, and tensor's shape is: ${n.shape}`);const a=n.shape.slice(1),l=(0,t.mergeElementShape)(a,i),p=0===h?0:n.size/h,m=(0,e.tidy)(()=>{const t=[];n=(0,e.reshape)(n,[1,h,p]);for(let s=0;s<r.length;++s){const i=[0,0===s?0:o[s-1],0],h=[1,r[s],p];t[s]=(0,e.reshape)((0,e.slice)(n,i,h),l)}return n.dispose(),t}),c=new s([],i,n.dtype,r.length);for(let e=0;e<m.length;e++)c.setItem(e,m[e]);return c}exports.TensorList=s;
},{"@tensorflow/tfjs-core":"tc6m","./tensor_utils":"QSgK"}],"NqZC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../../executor/tensor_array"),t=require("../../executor/tensor_list"),r=require("./utils");const s=async(s,n,o)=>{switch(s.op){case"If":case"StatelessIf":{const e=(0,r.getParamValue)("thenBranch",s,n,o),a=(0,r.getParamValue)("elseBranch",s,n,o),t=(0,r.getParamValue)("cond",s,n,o),i=(0,r.getParamValue)("args",s,n,o);return(await t.data())[0]?o.functionMap[e].executeFunctionAsync(i,o.tensorArrayMap,o.tensorListMap):o.functionMap[a].executeFunctionAsync(i,o.tensorArrayMap,o.tensorListMap)}case"While":case"StatelessWhile":{const e=(0,r.getParamValue)("body",s,n,o),a=(0,r.getParamValue)("cond",s,n,o),t=(0,r.getParamValue)("args",s,n,o),i=await o.functionMap[a].executeFunctionAsync(t,o.tensorArrayMap,o.tensorListMap),u=t.map(e=>e.id);let c=await i[0].data();i.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||e.dispose()});let l=t;for(;c[0];){const t=l,r=(l=await o.functionMap[e].executeFunctionAsync(l,o.tensorArrayMap,o.tensorListMap)).map(e=>e.id);t.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||-1!==r.indexOf(e.id)||e.dispose()});const s=await o.functionMap[a].executeFunctionAsync(l,o.tensorArrayMap,o.tensorListMap);c=await s[0].data(),s.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||-1!==r.indexOf(e.id)||e.dispose()})}return l}case"LoopCond":{const e=(0,r.getParamValue)("pred",s,n,o);return[(0,r.cloneTensor)(e)]}case"Switch":{const e=(0,r.getParamValue)("pred",s,n,o);let a=(0,r.getParamValue)("data",s,n,o);return a.kept||(a=(0,r.cloneTensor)(a)),(await e.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const e=s.inputNames.find(e=>void 0!==(0,r.getTensor)(e,n,o));if(e){const a=(0,r.getTensor)(e,n,o);return[(0,r.cloneTensor)(a)]}return}case"Enter":{const e=(0,r.getParamValue)("frameName",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o);return o.enterFrame(e),[(0,r.cloneTensor)(a)]}case"Exit":{const e=(0,r.getParamValue)("tensor",s,n,o);return o.exitFrame(),[(0,r.cloneTensor)(e)]}case"NextIteration":{const e=(0,r.getParamValue)("tensor",s,n,o);return o.nextIteration(),[(0,r.cloneTensor)(e)]}case"TensorArrayV3":{const t=(0,r.getParamValue)("size",s,n,o),i=(0,r.getParamValue)("dtype",s,n,o),u=(0,r.getParamValue)("elementShape",s,n,o),c=(0,r.getParamValue)("dynamicSize",s,n,o),l=(0,r.getParamValue)("clearAfterRead",s,n,o),m=(0,r.getParamValue)("identicalElementShapes",s,n,o),d=(0,r.getParamValue)("name",s,n,o),g=new a.TensorArray(d,i,t,u,m,c,l);return o.addTensorArray(g),[g.idTensor,(0,e.scalar)(1)]}case"TensorArrayWriteV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorArray(e.id);return i.write(a,t),[i.idTensor]}case"TensorArrayReadV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("index",s,n,o);return[o.getTensorArray(e.id).read(a)]}case"TensorArrayGatherV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("dtype",s,n,o);return[o.getTensorArray(e.id).gather(a,t)]}case"TensorArrayScatterV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorArray(e.id);return i.scatter(a,t),[i.idTensor]}case"TensorArrayConcatV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=o.getTensorArray(e.id),t=(0,r.getParamValue)("dtype",s,n,o);return[a.concat(t)]}case"TensorArraySplitV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),t=(0,r.getParamValue)("lengths",s,n,o),i=o.getTensorArray(e.id);return i.split(t,a),[i.idTensor]}case"TensorArraySizeV3":{const a=(0,r.getParamValue)("tensorArrayId",s,n,o),t=o.getTensorArray(a.id);return[(0,e.scalar)(t.size(),"int32")]}case"TensorArrayCloseV3":{const e=(0,r.getParamValue)("tensorArrayId",s,n,o),a=o.getTensorArray(e.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("tensor",s,n,o),i=o.getTensorList(e.id);return i.setItem(a,t),[i.idTensor]}case"TensorListGetItem":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("index",s,n,o),t=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).getItem(a,t,i)]}case"TensorListScatterV2":case"TensorListScatter":{const e=(0,r.getParamValue)("indices",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),i=(0,r.getParamValue)("elementShape",s,n,o),u=(0,r.getParamValue)("numElements",s,n,o),c=(0,t.scatter)(a,e,i,u);return o.addTensorList(c),[c.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const e=(0,r.getParamValue)("elementShape",s,n,o),a=(0,r.getParamValue)("elementDType",s,n,o);let i;i="TensorListReserve"===s.op?"numElements":"maxNumElements";const u=(0,r.getParamValue)(i,s,n,o),c=(0,t.reserve)(e,a,u);return o.addTensorList(c),[c.idTensor]}case"TensorListGather":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("indices",s,n,o),t=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).gather(a,i,t)]}case"TensorListStack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),t=(0,r.getParamValue)("elementDType",s,n,o),i=(0,r.getParamValue)("numElements",s,n,o);return[o.getTensorList(e.id).stack(a,t,i)]}case"TensorListFromTensor":{const e=(0,r.getParamValue)("tensor",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("elementDType",s,n,o),u=(0,t.fromTensor)(e,a,i);return o.addTensorList(u),[u.idTensor]}case"TensorListConcat":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=o.getTensorList(e.id),t=(0,r.getParamValue)("dtype",s,n,o),i=(0,r.getParamValue)("elementShape",s,n,o);return[a.concat(t,i)]}case"TensorListPushBack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("tensor",s,n,o),t=o.getTensorList(e.id);return t.pushBack(a),[t.idTensor]}case"TensorListPopBack":{const e=(0,r.getParamValue)("tensorListId",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),t=(0,r.getParamValue)("elementDType",s,n,o);return[o.getTensorList(e.id).popBack(a,t)]}case"TensorListSplit":{const e=(0,r.getParamValue)("tensor",s,n,o),a=(0,r.getParamValue)("elementShape",s,n,o),i=(0,r.getParamValue)("lengths",s,n,o),u=(0,t.split)(e,i,a);return o.addTensorList(u),[u.idTensor]}default:throw TypeError(`Node type ${s.op} is not implemented`)}};exports.executeOp=s;const n="control";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core":"tc6m","../../executor/tensor_array":"lFaL","../../executor/tensor_list":"txuj","./utils":"w10i"}],"Gr2b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var n=l?Object.getOwnPropertyDescriptor(e,u):null;n&&(n.get||n.set)?Object.defineProperty(o,u,n):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}function o(e,t,r){const[o,l]=(0,a.getParamValue)("fusedOps",e,t,r),u="biasadd"===o,n=!u,s="prelu"===l,i="fusedbatchnorm"===o,d=(0,a.getParamValue)("numArgs",e,t,r);if(u){if(s&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&u&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(i)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const g=(0,a.getParamValue)("strides",e,t,r),m=(0,a.getPadding)(e,t,r),p=(0,a.getParamValue)("dataFormat",e,t,r).toUpperCase(),P=(0,a.getParamValue)("dilations",e,t,r);let[c,V]=(0,a.getParamValue)("args",e,t,r);return n&&(V=c,c=void 0),{stride:g,pad:m,dataFormat:p,dilations:P,biasArg:c,preluArg:V,activationFunc:l,leakyreluAlpha:(0,a.getParamValue)("leakyreluAlpha",e,t,r)}}const l=(t,r,l)=>{switch(t.op){case"Conv1D":{const o=(0,a.getParamValue)("stride",t,r,l),u=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,a.getParamValue)("dilation",t,r,l);return[e.conv1d((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),o,u,n,s)]}case"Conv2D":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getPadding)(t,r,l),n=(0,a.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,a.getParamValue)("dilations",t,r,l);return[e.conv2d((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),[o[1],o[2]],u,n,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:u,pad:n,dataFormat:s,dilations:i,biasArg:d,preluArg:g,activationFunc:m,leakyreluAlpha:p}=o(t,r,l);return[e.fused.conv2d({x:(0,a.getParamValue)("x",t,r,l),filter:(0,a.getParamValue)("filter",t,r,l),strides:[u[1],u[2]],pad:n,dataFormat:s,dilations:[i[1],i[2]],bias:d,activation:m,preluActivationWeights:g,leakyreluAlpha:p})]}case"FusedDepthwiseConv2dNative":{const{stride:u,pad:n,dataFormat:s,dilations:i,biasArg:d,preluArg:g,activationFunc:m,leakyreluAlpha:p}=o(t,r,l);return[e.fused.depthwiseConv2d({x:(0,a.getParamValue)("x",t,r,l),filter:(0,a.getParamValue)("filter",t,r,l),strides:[u[1],u[2]],pad:n,dataFormat:s,dilations:[i[1],i[2]],bias:d,activation:m,preluActivationWeights:g,leakyreluAlpha:p})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=(0,a.getParamValue)("outputShape",t,r,l),u=(0,a.getParamValue)("strides",t,r,l),n=(0,a.getPadding)(t,r,l);return[e.conv2dTranspose((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),o,[u[1],u[2]],n)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getPadding)(t,r,l),n=(0,a.getParamValue)("dilations",t,r,l),s=(0,a.getParamValue)("dataFormat",t,r,l).toUpperCase();return[e.depthwiseConv2d((0,a.getParamValue)("input",t,r,l),(0,a.getParamValue)("filter",t,r,l),[o[1],o[2]],u,s,[n[1],n[2]])]}case"Conv3D":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("dataFormat",t,r,l).toUpperCase(),s=(0,a.getParamValue)("dilations",t,r,l);return[e.conv3d((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),[o[1],o[2],o[3]],u,n,[s[1],s[2],s[3]])]}case"AvgPool":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l);return[e.avgPool((0,a.getParamValue)("x",t,r,l),[n[1],n[2]],[o[1],o[2]],u)]}case"MaxPool":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l);return[e.maxPool((0,a.getParamValue)("x",t,r,l),[n[1],n[2]],[o[1],o[2]],u)]}case"MaxPoolWithArgmax":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l),s=(0,a.getParamValue)("includeBatchInIndex",t,r,l),{result:i,indexes:d}=e.maxPoolWithArgmax((0,a.getParamValue)("x",t,r,l),[n[1],n[2]],[o[1],o[2]],u,s);return[i,d]}case"AvgPool3D":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l);return[e.avgPool3d((0,a.getParamValue)("x",t,r,l),[n[1],n[2],n[3]],[o[1],o[2],o[3]],u)]}case"MaxPool3D":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("kernelSize",t,r,l);return[e.maxPool3d((0,a.getParamValue)("x",t,r,l),[n[1],n[2],n[3]],[o[1],o[2],o[3]],u)]}case"Dilation2D":{const o=(0,a.getParamValue)("strides",t,r,l),u=(0,a.getParamValue)("pad",t,r,l),n=(0,a.getParamValue)("dilations",t,r,l),s=o[1],i=o[2],d=n[1],g=n[2];return[e.dilation2d((0,a.getParamValue)("x",t,r,l),(0,a.getParamValue)("filter",t,r,l),[s,i],u,[d,g],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=l;const u="convolution";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"BxKJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(u,o,l):u[o]=e[o]}return u.default=e,r&&r.set(e,u),u}const u=(t,r,u)=>{switch(t.op){case"Fill":{const n=(0,a.getParamValue)("shape",t,r,u),o=(0,a.getParamValue)("dtype",t,r,u),l=(0,a.getParamValue)("value",t,r,u);return[e.fill(n,l,o)]}case"LinSpace":{const n=(0,a.getParamValue)("start",t,r,u),o=(0,a.getParamValue)("stop",t,r,u),l=(0,a.getParamValue)("num",t,r,u);return[e.linspace(n,o,l)]}case"Multinomial":{const n=(0,a.getParamValue)("logits",t,r,u),o=(0,a.getParamValue)("numSamples",t,r,u),l=(0,a.getParamValue)("seed",t,r,u);return[e.multinomial(n,o,l)]}case"OneHot":{const n=(0,a.getParamValue)("indices",t,r,u),o=(0,a.getParamValue)("depth",t,r,u),l=(0,a.getParamValue)("onValue",t,r,u),s=(0,a.getParamValue)("offValue",t,r,u);return[e.oneHot(n,o,l,s)]}case"Ones":return[e.ones((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"OnesLike":return[e.onesLike((0,a.getParamValue)("x",t,r,u))];case"RandomUniform":return[e.randomUniform((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("minval",t,r,u),(0,a.getParamValue)("maxval",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"Range":{const n=(0,a.getParamValue)("start",t,r,u),o=(0,a.getParamValue)("stop",t,r,u),l=(0,a.getParamValue)("step",t,r,u);return[e.range(n,o,l,(0,a.getParamValue)("dtype",t,r,u))]}case"TruncatedNormal":{const n=(0,a.getParamValue)("shape",t,r,u),o=(0,a.getParamValue)("mean",t,r,u),l=(0,a.getParamValue)("stdDev",t,r,u),s=(0,a.getParamValue)("seed",t,r,u);return[e.truncatedNormal(n,o,l,(0,a.getParamValue)("dtype",t,r,u),s)]}case"Zeros":return[e.zeros((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"ZerosLike":return[e.zerosLike((0,a.getParamValue)("x",t,r,u))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const n="creation";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"QjK5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=a?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(s,n,u):s[n]=e[n]}return s.default=e,o&&o.set(e,s),s}function s(e,r,o){return{boxes:(0,t.getParamValue)("boxes",e,r,o),scores:(0,t.getParamValue)("scores",e,r,o),maxOutputSize:(0,t.getParamValue)("maxOutputSize",e,r,o),iouThreshold:(0,t.getParamValue)("iouThreshold",e,r,o),scoreThreshold:(0,t.getParamValue)("scoreThreshold",e,r,o),softNmsSigma:(0,t.getParamValue)("softNmsSigma",e,r,o)}}const a=async(r,o,a)=>{switch(r.op){case"NonMaxSuppressionV5":{const{boxes:t,scores:n,maxOutputSize:u,iouThreshold:i,scoreThreshold:c,softNmsSigma:p}=s(r,o,a),l=await e.image.nonMaxSuppressionWithScoreAsync(t,n,u,i,c,p);return[l.selectedIndices,l.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:n,scores:u,maxOutputSize:i,iouThreshold:c,scoreThreshold:p}=s(r,o,a),l=(0,t.getParamValue)("padToMaxOutputSize",r,o,a),d=await e.image.nonMaxSuppressionPaddedAsync(n,u,i,c,p,l);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:t,scores:n,maxOutputSize:u,iouThreshold:i,scoreThreshold:c}=s(r,o,a);return[await e.image.nonMaxSuppressionAsync(t,n,u,i,c)]}case"Where":{const s=e.cast((0,t.getParamValue)("condition",r,o,a),"bool"),n=[await e.whereAsync(s)];return s.dispose(),n}case"ListDiff":return e.setdiff1dAsync((0,t.getParamValue)("x",r,o,a),(0,t.getParamValue)("y",r,o,a));default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=a;const n="dynamic";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"AFyh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=a?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,o&&o.set(e,n),n}const n=(r,o,n)=>{switch(r.op){case"TopKV2":{const a=(0,t.getParamValue)("x",r,o,n),u=(0,t.getParamValue)("k",r,o,n),s=(0,t.getParamValue)("sorted",r,o,n),i=e.topk(a,u,s);return[i.values,i.indices]}case"Unique":{const a=(0,t.getParamValue)("x",r,o,n),u=e.unique(a);return[u.values,u.indices]}case"UniqueV2":{const a=(0,t.getParamValue)("x",r,o,n),u=(0,t.getParamValue)("axis",r,o,n),s=e.unique(a,u);return[s.values,s.indices]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const a="evaluation";exports.CATEGORY=a;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"jyBO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),r=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}const n=(t,a,n)=>{switch(t.op){case"Const":return a[t.name];case"PlaceholderWithDefault":const o=(0,r.getParamValue)("default",t,a,n);return[(0,r.getTensor)(t.name,a,n)||o];case"Placeholder":return[(0,r.getTensor)(t.name,a,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const e=(0,r.getParamValue)("x",t,a,n);return[(0,r.cloneTensor)(e)]}case"IdentityN":return(0,r.getParamValue)("x",t,a,n).map(e=>(0,r.cloneTensor)(e));case"Snapshot":const s=(0,r.getParamValue)("x",t,a,n);return[(0,r.cloneTensor)(s)];case"Shape":return[e.tensor1d((0,r.getParamValue)("x",t,a,n).shape,"int32")];case"ShapeN":return(0,r.getParamValue)("x",t,a,n).map(r=>e.tensor1d(r.shape));case"Size":return[e.scalar((0,r.getParamValue)("x",t,a,n).size,"int32")];case"Rank":return[e.scalar((0,r.getParamValue)("x",t,a,n).rank,"int32")];case"NoOp":return[e.scalar(1)];case"Print":const u=(0,r.getParamValue)("x",t,a,n),c=(0,r.getParamValue)("data",t,a,n),l=(0,r.getParamValue)("message",t,a,n),p=(0,r.getParamValue)("summarize",t,a,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let e=0;e<c.length;e++)console.log(Array.prototype.slice.call(c[e].dataSync()).slice(0,p));return[u];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=n;const o="graph";exports.CATEGORY="graph";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"GkVb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HashTable=void 0;var e=require("@tensorflow/tfjs-core"),t=s(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(r=function(e){return e?s:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=r(t);if(s&&s.has(e))return s.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,s&&s.set(e,n),n}class n{constructor(t,r){this.keyDType=t,this.valueDType=r,this.handle=(0,e.scalar)(0),this.tensorMap=new Map,(0,e.keep)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return t.scalar(this.size(),"int32")}async import(t,r){this.checkKeyAndValueTensor(t,r);const s=await t.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),(0,e.tidy)(()=>{const t=(0,e.unstack)(r),n=s.length,o=t.length;e.util.assert(n===o,()=>"The number of elements doesn't match, keys has "+`${n} elements, the values has ${o} `+"elements.");for(let r=0;r<n;r++){const n=s[r],o=t[r];(0,e.keep)(o),this.tensorMap.set(n,o)}return this.handle})}async find(t,r){this.checkKeyAndValueTensor(t,r);const s=await t.data();return(0,e.tidy)(()=>{const t=[];for(let e=0;e<s.length;e++){const n=s[e],o=this.findWithDefault(n,r);t.push(o)}return(0,e.stack)(t)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return null!=r?r:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got `+`${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got `+`${t.dtype}`)}}exports.HashTable=n;
},{"@tensorflow/tfjs-core":"tc6m","@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B"}],"QUYr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=require("../../executor/hash_table"),a=require("./utils");const t=async(t,l,r,s)=>{switch(t.op){case"HashTable":case"HashTableV2":{const o=(0,a.getParamValue)("keyDType",t,l,r),u=(0,a.getParamValue)("valueDType",t,l,r),n=new e.HashTable(o,u);return s.addHashTable(t.name,n),[n.handle]}case"LookupTableImport":case"LookupTableImportV2":{const e=(0,a.getParamValue)("tableHandle",t,l,r,s),o=(0,a.getParamValue)("keys",t,l,r),u=(0,a.getParamValue)("values",t,l,r),n=s.getHashTableById(e.id);return[await n.import(o,u)]}case"LookupTableFind":case"LookupTableFindV2":{const e=(0,a.getParamValue)("tableHandle",t,l,r,s),o=(0,a.getParamValue)("keys",t,l,r),u=(0,a.getParamValue)("defaultValue",t,l,r),n=s.getHashTableById(e.id);return[await n.find(o,u)]}case"LookupTableSize":case"LookupTableSizeV2":{const e=(0,a.getParamValue)("tableHandle",t,l,r,s);return[s.getHashTableById(e.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=t;const l="hash_table";exports.CATEGORY=l;
},{"../../executor/hash_table":"GkVb","./utils":"w10i"}],"KNLe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),r=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,a=new WeakMap;return(t=function(e){return e?a:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t(r);if(a&&a.has(e))return a.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(o,n,s):o[n]=e[n]}return o.default=e,a&&a.set(e,o),o}const o=(t,a,o)=>{switch(t.op){case"ResizeBilinear":{const i=(0,r.getParamValue)("images",t,a,o),n=(0,r.getParamValue)("size",t,a,o),s=(0,r.getParamValue)("alignCorners",t,a,o),u=(0,r.getParamValue)("halfPixelCenters",t,a,o);return[e.image.resizeBilinear(i,[n[0],n[1]],s,u)]}case"ResizeNearestNeighbor":{const i=(0,r.getParamValue)("images",t,a,o),n=(0,r.getParamValue)("size",t,a,o),s=(0,r.getParamValue)("alignCorners",t,a,o),u=(0,r.getParamValue)("halfPixelCenters",t,a,o);return[e.image.resizeNearestNeighbor(i,[n[0],n[1]],s,u)]}case"CropAndResize":{const i=(0,r.getParamValue)("image",t,a,o),n=(0,r.getParamValue)("boxes",t,a,o),s=(0,r.getParamValue)("boxInd",t,a,o),u=(0,r.getParamValue)("cropSize",t,a,o),l=(0,r.getParamValue)("method",t,a,o),p=(0,r.getParamValue)("extrapolationValue",t,a,o);return[e.image.cropAndResize(i,n,s,u,l,p)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const i="image";exports.CATEGORY="image";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"Ehox":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function t(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var n=l?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(u,o,n):u[o]=e[o]}return u.default=e,t&&t.set(e,u),u}const u=(r,t,u)=>{switch(r.op){case"Equal":return[e.equal((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"NotEqual":return[e.notEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Greater":return[e.greater((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"GreaterEqual":return[e.greaterEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Less":return[e.less((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LessEqual":return[e.lessEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LogicalAnd":return[e.logicalAnd((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LogicalNot":return[e.logicalNot((0,a.getParamValue)("a",r,t,u))];case"LogicalOr":return[e.logicalOr((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Select":case"SelectV2":return[e.where((0,a.getParamValue)("condition",r,t,u),(0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const l="logical";exports.CATEGORY=l;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"lcpM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var u={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(u,n,o):u[n]=e[n]}return u.default=e,r&&r.set(e,u),u}const u=(t,r,u)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[e.matMul((0,a.getParamValue)("a",t,r,u),(0,a.getParamValue)("b",t,r,u),(0,a.getParamValue)("transposeA",t,r,u),(0,a.getParamValue)("transposeB",t,r,u))];case"Einsum":return[e.einsum((0,a.getParamValue)("equation",t,r,u),...(0,a.getParamValue)("tensors",t,r,u))];case"Transpose":return[e.transpose((0,a.getParamValue)("x",t,r,u),(0,a.getParamValue)("perm",t,r,u))];case"_FusedMatMul":const[s,n]=(0,a.getParamValue)("fusedOps",t,r,u),o="biasadd"===s,l="prelu"===n,i=(0,a.getParamValue)("numArgs",t,r,u),p=(0,a.getParamValue)("leakyreluAlpha",t,r,u);if(o){if(l&&2!==i)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&1!==i)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=(0,a.getParamValue)("args",t,r,u);return[e.fused.matMul({a:(0,a.getParamValue)("a",t,r,u),b:(0,a.getParamValue)("b",t,r,u),transposeA:(0,a.getParamValue)("transposeA",t,r,u),transposeB:(0,a.getParamValue)("transposeB",t,r,u),bias:c,activation:n,preluActivationWeights:f,leakyreluAlpha:p})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const s="matrices";exports.CATEGORY=s;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"kX2x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=u?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}const o=(t,r,o)=>{switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[e.batchNorm((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("mean",t,r,o),(0,a.getParamValue)("variance",t,r,o),(0,a.getParamValue)("offset",t,r,o),(0,a.getParamValue)("scale",t,r,o),(0,a.getParamValue)("epsilon",t,r,o))];case"LRN":return[e.localResponseNormalization((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("radius",t,r,o),(0,a.getParamValue)("bias",t,r,o),(0,a.getParamValue)("alpha",t,r,o),(0,a.getParamValue)("beta",t,r,o))];case"Softmax":return[e.softmax((0,a.getParamValue)("x",t,r,o))];case"LogSoftmax":return[e.logSoftmax((0,a.getParamValue)("x",t,r,o))];case"SparseToDense":return[e.sparseToDense((0,a.getParamValue)("sparseIndices",t,r,o),(0,a.getParamValue)("outputShape",t,r,o),(0,a.getParamValue)("sparseValues",t,r,o),(0,a.getParamValue)("defaultValue",t,r,o))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const u="normalization";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"qW2A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(u,s,o):u[s]=e[s]}return u.default=e,r&&r.set(e,u),u}const u=(t,r,u)=>{switch(t.op){case"Max":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.max((0,a.getParamValue)("x",t,r,u),n,s)]}case"Mean":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.mean((0,a.getParamValue)("x",t,r,u),n,s)]}case"Min":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.min((0,a.getParamValue)("x",t,r,u),n,s)]}case"Sum":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.sum((0,a.getParamValue)("x",t,r,u),n,s)]}case"All":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.all((0,a.getParamValue)("x",t,r,u),n,s)]}case"Any":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.any((0,a.getParamValue)("x",t,r,u),n,s)]}case"ArgMax":{const n=(0,a.getParamValue)("axis",t,r,u);return[e.argMax((0,a.getParamValue)("x",t,r,u),n)]}case"ArgMin":{const n=(0,a.getParamValue)("axis",t,r,u);return[e.argMin((0,a.getParamValue)("x",t,r,u),n)]}case"Prod":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("keepDims",t,r,u);return[e.prod((0,a.getParamValue)("x",t,r,u),n,s)]}case"Cumsum":{const n=(0,a.getParamValue)("axis",t,r,u),s=(0,a.getParamValue)("exclusive",t,r,u),o=(0,a.getParamValue)("reverse",t,r,u);return[e.cumsum((0,a.getParamValue)("x",t,r,u),n,s,o)]}case"Bincount":const n=(0,a.getParamValue)("x",t,r,u),s=(0,a.getParamValue)("weights",t,r,u),o=(0,a.getParamValue)("size",t,r,u);return[e.bincount(n,s,o)];case"DenseBincount":{const n=(0,a.getParamValue)("x",t,r,u),s=(0,a.getParamValue)("weights",t,r,u),o=(0,a.getParamValue)("size",t,r,u),l=(0,a.getParamValue)("binaryOutput",t,r,u);return[e.denseBincount(n,s,o,l)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const n="reduction";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"Jy49":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=require("@tensorflow/tfjs-core"),a=s(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:a})(e)}function s(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r(a);if(t&&t.has(e))return t.get(e);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=u?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(s,n,l):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}const u=(r,s,u)=>{switch(r.op){case"ConcatV2":case"Concat":{const e=(0,t.getParamValue)("n",r,s,u),n=(0,t.getParamValue)("axis",r,s,u);let l=(0,t.getParamValue)("tensors",r,s,u);return l=l.slice(0,e),[a.concat(l,n)]}case"Gather":{const e=(0,t.getParamValue)("x",r,s,u),n=(0,t.getParamValue)("indices",r,s,u);return[a.gather(e,a.cast(n,"int32"),0)]}case"GatherV2":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("batchDims",r,s,u),l=(0,t.getParamValue)("x",r,s,u),c=(0,t.getParamValue)("indices",r,s,u);return[a.gather(l,a.cast(c,"int32"),e,n)]}case"Reverse":{const e=(0,t.getParamValue)("dims",r,s,u),n=[];for(let a=0;a<e.length;a++)e[a]&&n.push(a);const l=(0,t.getParamValue)("x",r,s,u);return[a.reverse(l,n)]}case"ReverseV2":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("x",r,s,u);return[a.reverse(n,e)]}case"Slice":{const e=(0,t.getParamValue)("begin",r,s,u),n=(0,t.getParamValue)("size",r,s,u);return[a.slice((0,t.getParamValue)("x",r,s,u),e,n)]}case"StridedSlice":{const e=(0,t.getParamValue)("begin",r,s,u),n=(0,t.getParamValue)("end",r,s,u),l=(0,t.getParamValue)("strides",r,s,u),c=(0,t.getParamValue)("beginMask",r,s,u),o=(0,t.getParamValue)("endMask",r,s,u),i=(0,t.getParamValue)("ellipsisMask",r,s,u),p=(0,t.getParamValue)("newAxisMask",r,s,u),g=(0,t.getParamValue)("shrinkAxisMask",r,s,u),m=(0,t.getParamValue)("x",r,s,u);return[a.stridedSlice(m,e,n,l,c,o,i,p,g)]}case"Pack":return(0,e.tidy)(()=>{const n=(0,t.getParamValue)("axis",r,s,u),l=(0,t.getParamValue)("tensors",r,s,u),c=l[0].shape,o=a.squeeze(l[0]).shape,i=l.map(t=>{const r=e.util.arraysEqual(t.shape,c);if(!r&&!e.util.arraysEqual(a.squeeze(t).shape,o))throw new Error("the input tensors shape does not match");return r?t:a.reshape(t,c)});return[a.stack(i,n)]});case"Unpack":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("tensor",r,s,u);return a.unstack(n,e)}case"Tile":{const e=(0,t.getParamValue)("reps",r,s,u);return[a.tile((0,t.getParamValue)("x",r,s,u),e)]}case"Split":case"SplitV":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("numOrSizeSplits",r,s,u),l=(0,t.getParamValue)("x",r,s,u);return a.split(l,n,e)}case"ScatterNd":{const e=(0,t.getParamValue)("indices",r,s,u),n=(0,t.getParamValue)("values",r,s,u),l=(0,t.getParamValue)("shape",r,s,u);return[a.scatterND(e,n,l)]}case"GatherNd":{const e=(0,t.getParamValue)("x",r,s,u),n=(0,t.getParamValue)("indices",r,s,u);return[a.gatherND(e,n)]}case"SparseToDense":{const e=(0,t.getParamValue)("sparseIndices",r,s,u),n=(0,t.getParamValue)("outputShape",r,s,u),l=(0,t.getParamValue)("sparseValues",r,s,u),c=(0,t.getParamValue)("defaultValue",r,s,u);return[a.sparseToDense(e,l,n,l.dtype===c.dtype?c:a.cast(c,l.dtype))]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const n="slice_join";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core":"tc6m","@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"AnQl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var p=n?Object.getOwnPropertyDescriptor(e,u):null;p&&(p.get||p.set)?Object.defineProperty(s,u,p):s[u]=e[u]}return s.default=e,r&&r.set(e,s),s}const s=(a,r,s)=>{switch(a.op){case"SparseFillEmptyRows":{const{outputIndices:n,outputValues:u,emptyRowIndicator:p,reverseIndexMap:o}=e.sparse.sparseFillEmptyRows((0,t.getParamValue)("indices",a,r,s),(0,t.getParamValue)("values",a,r,s),(0,t.getParamValue)("denseShape",a,r,s),(0,t.getParamValue)("defaultValue",a,r,s));return[n,u,p,o]}case"SparseReshape":{const{outputIndices:n,outputShape:u}=e.sparse.sparseReshape((0,t.getParamValue)("inputIndices",a,r,s),(0,t.getParamValue)("inputShape",a,r,s),(0,t.getParamValue)("newShape",a,r,s));return[n,u]}case"SparseSegmentMean":return[e.sparse.sparseSegmentMean((0,t.getParamValue)("data",a,r,s),(0,t.getParamValue)("indices",a,r,s),(0,t.getParamValue)("segmentIds",a,r,s))];case"SparseSegmentSum":return[e.sparse.sparseSegmentSum((0,t.getParamValue)("data",a,r,s),(0,t.getParamValue)("indices",a,r,s),(0,t.getParamValue)("segmentIds",a,r,s))];default:throw TypeError(`Node type ${a.op} is not implemented`)}};exports.executeOp=s;const n="sparse";exports.CATEGORY="sparse";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"A7QN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var f=a?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,o&&o.set(e,n),n}const n=(r,o,n)=>{switch(r.op){case"FFT":return[e.fft((0,t.getParamValue)("x",r,o,n))];case"IFFT":return[e.ifft((0,t.getParamValue)("x",r,o,n))];case"RFFT":return[e.rfft((0,t.getParamValue)("x",r,o,n))];case"IRFFT":return[e.irfft((0,t.getParamValue)("x",r,o,n))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const a="spectral";exports.CATEGORY=a;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"fTMz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=s?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,a&&a.set(e,n),n}const n=(r,a,n)=>{switch(r.op){case"StringNGrams":{const{nGrams:s,nGramsSplits:u}=e.string.stringNGrams((0,t.getParamValue)("data",r,a,n),(0,t.getParamValue)("dataSplits",r,a,n),(0,t.getParamValue)("separator",r,a,n),(0,t.getParamValue)("nGramWidths",r,a,n),(0,t.getParamValue)("leftPad",r,a,n),(0,t.getParamValue)("rightPad",r,a,n),(0,t.getParamValue)("padWidth",r,a,n),(0,t.getParamValue)("preserveShortSequences",r,a,n));return[s,u]}case"StringSplit":{const{indices:s,values:u,shape:i}=e.string.stringSplit((0,t.getParamValue)("input",r,a,n),(0,t.getParamValue)("delimiter",r,a,n),(0,t.getParamValue)("skipEmpty",r,a,n));return[s,u,i]}case"StringToHashBucketFast":return[e.string.stringToHashBucketFast((0,t.getParamValue)("input",r,a,n),(0,t.getParamValue)("numBuckets",r,a,n))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const s="string";exports.CATEGORY="string";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"oReL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=exports.CATEGORY=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:a})(e)}function r(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(a);if(r&&r.has(e))return r.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=u?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}const o=(t,r,o)=>{switch(t.op){case"Cast":return[e.cast((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("dtype",t,r,o))];case"ExpandDims":{const u=(0,a.getParamValue)("axis",t,r,o);return[e.expandDims((0,a.getParamValue)("x",t,r,o),u)]}case"Squeeze":{const u=(0,a.getParamValue)("axis",t,r,o);return[e.squeeze((0,a.getParamValue)("x",t,r,o),u)]}case"Reshape":return[e.reshape((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("shape",t,r,o))];case"MirrorPad":return[e.mirrorPad((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("padding",t,r,o),(0,a.getParamValue)("mode",t,r,o))];case"PadV2":case"Pad":return[e.pad((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("padding",t,r,o),(0,a.getParamValue)("constantValue",t,r,o))];case"SpaceToBatchND":{const u=(0,a.getParamValue)("blockShape",t,r,o),s=(0,a.getParamValue)("paddings",t,r,o);return[e.spaceToBatchND((0,a.getParamValue)("x",t,r,o),u,s)]}case"BatchToSpaceND":{const u=(0,a.getParamValue)("blockShape",t,r,o),s=(0,a.getParamValue)("crops",t,r,o);return[e.batchToSpaceND((0,a.getParamValue)("x",t,r,o),u,s)]}case"DepthToSpace":{const u=(0,a.getParamValue)("blockSize",t,r,o),s=(0,a.getParamValue)("dataFormat",t,r,o).toUpperCase();return[e.depthToSpace((0,a.getParamValue)("x",t,r,o),u,s)]}case"BroadcastTo":return[e.broadcastTo((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("shape",t,r,o))];case"BroadcastArgs":return[e.broadcastArgs((0,a.getParamValue)("s0",t,r,o),(0,a.getParamValue)("s1",t,r,o))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const u="transformation";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"o43B","./utils":"w10i"}],"aGmR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=v;var e=b(require("@tensorflow/tfjs-core")),r=require("./custom_op/node_value_impl"),t=require("./custom_op/register"),u=b(require("./executors/arithmetic_executor")),c=b(require("./executors/basic_math_executor")),o=b(require("./executors/control_executor")),i=b(require("./executors/convolution_executor")),s=b(require("./executors/creation_executor")),n=b(require("./executors/dynamic_executor")),a=b(require("./executors/evaluation_executor")),x=b(require("./executors/graph_executor")),p=b(require("./executors/hash_table_executor")),l=b(require("./executors/image_executor")),d=b(require("./executors/logical_executor")),_=b(require("./executors/matrices_executor")),y=b(require("./executors/normalization_executor")),O=b(require("./executors/reduction_executor")),f=b(require("./executors/slice_join_executor")),m=b(require("./executors/sparse_executor")),q=b(require("./executors/spectral_executor")),g=b(require("./executors/string_executor")),h=b(require("./executors/transformation_executor"));function w(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(w=function(e){return e?t:r})(e)}function b(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=w(r);if(t&&t.has(e))return t.get(e);var u={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=c?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(u,o,i):u[o]=e[o]}return u.default=e,t&&t.set(e,u),u}function v(w,b,v,j){const P=((w,b,v)=>{switch(w.category){case"arithmetic":return e.tidy(()=>u.executeOp(w,b,v));case"basic_math":return e.tidy(()=>c.executeOp(w,b,v));case"control":return o.executeOp(w,b,v);case"convolution":return e.tidy(()=>i.executeOp(w,b,v));case"creation":return e.tidy(()=>s.executeOp(w,b,v));case"dynamic":return n.executeOp(w,b,v);case"evaluation":return e.tidy(()=>a.executeOp(w,b,v));case"image":return e.tidy(()=>l.executeOp(w,b,v));case"graph":return e.tidy(()=>x.executeOp(w,b,v));case"logical":return e.tidy(()=>d.executeOp(w,b,v));case"matrices":return e.tidy(()=>_.executeOp(w,b,v));case"normalization":return e.tidy(()=>y.executeOp(w,b,v));case"reduction":return e.tidy(()=>O.executeOp(w,b,v));case"slice_join":return e.tidy(()=>f.executeOp(w,b,v));case"sparse":return e.tidy(()=>m.executeOp(w,b,v));case"spectral":return e.tidy(()=>q.executeOp(w,b,v));case"string":return e.tidy(()=>g.executeOp(w,b,v));case"transformation":return e.tidy(()=>h.executeOp(w,b,v));case"hash_table":return p.executeOp(w,b,v,j);case"custom":const P=(0,t.getRegisteredOp)(w.op);if(P&&P.customExecutor)return P.customExecutor(new r.NodeValueImpl(w,b,v));throw TypeError(`Custom op ${w.op} is not registered.`);default:throw TypeError(`Unknown op '${w.op}'. File an issue at `+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(w,b,v);return e.util.isPromise(P)?P.then(e=>[].concat(e)):[].concat(P)}
},{"@tensorflow/tfjs-core":"tc6m","./custom_op/node_value_impl":"lSvz","./custom_op/register":"c1gB","./executors/arithmetic_executor":"IGj9","./executors/basic_math_executor":"dVEs","./executors/control_executor":"NqZC","./executors/convolution_executor":"Gr2b","./executors/creation_executor":"BxKJ","./executors/dynamic_executor":"QjK5","./executors/evaluation_executor":"AFyh","./executors/graph_executor":"jyBO","./executors/hash_table_executor":"QUYr","./executors/image_executor":"KNLe","./executors/logical_executor":"Ehox","./executors/matrices_executor":"lcpM","./executors/normalization_executor":"kX2x","./executors/reduction_executor":"qW2A","./executors/slice_join_executor":"Jy49","./executors/sparse_executor":"AnQl","./executors/spectral_executor":"A7QN","./executors/string_executor":"fTMz","./executors/transformation_executor":"oReL"}],"pWc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExecutionSubgraph=n,exports.getNodesInTopologicalOrder=s,exports.isControlFlow=p,exports.isDynamicShape=r,exports.isHashTable=u;var e=require("../operations/executors/utils");function n(n,s,o,a){const t=new Set,i=[];let l=null,h=null;const c=new Set,d=Object.keys(n).map(n=>(0,e.parseNodeName)(n)[0]);let m=[];null!=a&&(m=a.map(n=>(0,e.parseNodeName)(n.name)[0]));const f=[...s];for(;f.length>0;){const e=f.pop();(p(e)||r(e)||u(e))&&null==l&&(h=(l=e).children.map(e=>e.name).filter(e=>t.has(e))),t.add(e.name),null==o[e.name]&&(-1===d.indexOf(e.name)&&-1===m.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach(e=>{c.has(e.name)||(c.add(e.name),f.push(e))}):i.push(e.name)))}return{inputs:n,outputs:s,usedNodes:t,missingInputs:i,dynamicNode:l,syncInputs:h}}function s(n,s,o){const{usedNodes:a,inputs:t}=o,p=[],r=Object.keys(t).map(n=>(0,e.parseNodeName)(n)[0]).map(e=>n.nodes[e]),u=n.initNodes;r.forEach(e=>{a.has(e.name)&&p.push(e)}),n.weights.forEach(e=>{a.has(e.name)&&p.push(e)}),null!=u&&u.forEach(e=>{a.has(e.name)&&p.push(e)});const i=new Set,l=[];for(;p.length>0;){const e=p.pop();i.add(e.name),s[e.name]||l.push(e),e.children.forEach(e=>{!i.has(e.name)&&a.has(e.name)&&e.inputs.every(e=>i.has(e.name))&&p.push(e)})}return l}const o=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],a=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],t=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function p(e){return o.indexOf(e.op)>=0}function r(e){return a.indexOf(e.op)>=0}function u(e){return t.indexOf(e.op)>=0}
},{"../operations/executors/utils":"w10i"}],"X0ED":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GraphExecutor=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../operations/executors/utils"),s=require("../operations/operation_executor"),n=require("./execution_context"),o=require("./model_analysis");class i{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new i(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map(e=>t[e].map(t=>t.id));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}getCompilationKey(t,e){const s=t.map(t=>t.name).sort(),n=e.map(t=>t.name).sort();return s.join(this.SEPERATOR)+"--"+n.join(this.SEPERATOR)}compile(t,e){const s=(0,o.getExecutionSubgraph)(t,e,this.weightMap,this._initNodes),{missingInputs:n,dynamicNode:i,syncInputs:a}=s;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has `+`the dynamic op '${i.op}'. Please use `+"model.executeAsync() instead. Alternatively, to avoid the "+`dynamic ops, specify the inputs [${a}]`);if(n.length>0){const s=e.map(t=>t.name),o=Object.keys(t);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs `+`[${o}]. Missing the following inputs: [${n}]`)}return(0,o.getNodesInTopologicalOrder)(this.graph,this.weightMap,s)}execute(o,i){o=this.mapInputs(o);const a=Object.keys(o).sort();this.checkInputs(o),this.checkInputShapeAndType(o),i=this.mapOutputs(i),this.checkOutputs(i);const r=a.map(t=>this.graph.nodes[(0,e.parseNodeName)(t)[0]]),u=i.map(t=>(0,e.parseNodeName)(t)[0]);let p=u.map(t=>this.graph.nodes[t]);0===p.length&&(p=this._outputs);const h=this.getCompilationKey(r,p);let c=this.compiledMap.get(h);null==c&&(c=this.compile(o,p),this.compiledMap.set(h,c));const d={},l={};return(0,t.tidy)(()=>{const a=new n.ExecutionContext(this.weightMap,d,l,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(o).forEach(t=>{const[s,n]=(0,e.parseNodeName)(t),i=[];i[n]=o[t],r[s]=i});const p=this.getFrozenTensorIds(r),h={};for(let e=0;e<c.length;e++){const n=c[e];if(!r[n.name]){const e=(0,s.executeOp)(n,r,a,this._resourceManager);if(t.util.isPromise(e))throw new Error(`The execution of the op '${n.op}' returned a promise. `+"Please use model.executeAsync() instead.");r[n.name]=e,this.checkTensorForDisposal(n.name,n,r,a,p,u,h)}}return null==this.parent&&a.dispose(p),i.map(t=>(0,e.getTensor)(t,r,a))})}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(t=>t.map(t=>t.id)));return new Set(e)}checkTensorForDisposal(t,s,n,o,i,a,r){"control"!==s.category&&-1===a.indexOf(t)&&(n[t].forEach(t=>{null!=t&&(r[t.id]=(r[t.id]||0)+s.children.length)}),s.inputs.forEach(t=>{if("control"!==t.category){const s=(0,e.getTensorsForCurrentContenxt)(t.name,n,o);null!=s&&s.forEach(t=>{if(t&&!t.kept&&!i.has(t.id)){const e=r[t.id];1===e?(t.dispose(),delete r[t.id]):null!=e&&r[t.id]--}})}}))}async executeAsync(t,e){return this._executeAsync(t,e)}async _executeAsync(t,s,o=!1,i={},a={}){o||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),s=this.mapOutputs(s),this.checkOutputs(s));const r=new n.ExecutionContext(this.weightMap,i,a,this.functionExecutorMap),u=await this.executeWithControlFlow(t,r,s,o),p=s.map(t=>(0,e.getTensor)(t,u,r)),h=p.map(t=>t.id),c=Object.keys(t).map(e=>t[e].id),d=new Set([...h,...c,...this.weightIds]);return Object.keys(u).forEach(t=>{u[t].forEach(t=>{!t||t.kept||t.isDisposed||d.has(t.id)||t.dispose()})}),null==this.parent&&r.dispose(d),p}async executeFunctionAsync(t,e,s){const n=t.reduce((t,e,s)=>(t[this.inputs[s].name]=e,t),{});return this._executeAsync(n,this.outputNodes,!0,e,s)}async executeWithControlFlow(t,s,n,i){const a=Object.keys(t),r=a.map(t=>this.graph.nodes[(0,e.parseNodeName)(t)[0]]),u=n.map(t=>(0,e.parseNodeName)(t)[0]);let p=u.map(t=>this.graph.nodes[t]);0===p.length&&(p=this._outputs);const{usedNodes:h,missingInputs:c,dynamicNode:d,syncInputs:l}=(0,o.getExecutionSubgraph)(t,p,this.weightMap,this._initNodes),m=[...r,...this.graph.weights,...this._initNodes||[]].map(t=>({node:t,contexts:s.currentContext})),g=Object.assign({},this.weightMap);Object.keys(t).forEach(s=>{const[n,o]=(0,e.parseNodeName)(s),i=[];i[o]=t[s],g[n]=i});const y={},f=this.getFrozenTensorIds(g),x={};for(;m.length>0;){const t=this.processStack(r,m,s,g,x,f,u,y,h);await Promise.all(t)}null!=d||i||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=p.filter(t=>!(0,o.isControlFlow)(t)&&!(0,e.getTensor)(t.name,g,s)).map(t=>t.name);if(w.length>0){let t="";throw null!=d&&(t="Alternatively, to avoid the dynamic ops, use model.execute() "+`and specify the inputs [${l}]`),new Error(`Cannot compute the outputs [${w}] from the provided `+`inputs [${a}]. Consider providing the following inputs: `+`[${c}]. ${t}`)}return g}processStack(n,o,i,a,r,u,p,h,c){const d=[];for(;o.length>0;){const n=o.pop();i.currentContext=n.contexts;let l="";if("Enter"===n.node.op&&(0,e.getParamValue)("isConstant",n.node,a,i)&&([l]=(0,e.getNodeNameAndIndex)(n.node.name,i)),null==a[n.node.name]){const m=(0,s.executeOp)(n.node,a,i,this._resourceManager);l||([l]=(0,e.getNodeNameAndIndex)(n.node.name,i));const g=i.currentContext;t.util.isPromise(m)?d.push(m.then(t=>(a[l]=t,i.currentContext=g,this.checkTensorForDisposal(l,n.node,a,i,u,p,h),this.processChildNodes(n.node,o,i,a,r,c),t))):(a[l]=m,this.checkTensorForDisposal(l,n.node,a,i,u,p,h),this.processChildNodes(n.node,o,i,a,r,c))}else this.processChildNodes(n.node,o,i,a,r,c)}return d}processChildNodes(t,s,n,o,i,a){t.children.forEach(t=>{const[r]=(0,e.getNodeNameAndIndex)(t.name,n);!i[r]&&a.has(t.name)&&("Merge"===t.op?t.inputNames.some(t=>!!(0,e.getTensor)(t,o,n))&&(i[r]=!0,s.push({contexts:n.currentContext,node:t})):t.inputNames.every(t=>!!(0,e.getTensor)(t,o,n))&&(i[r]=!0,s.push({contexts:n.currentContext,node:t})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(t=>t.dispose()))}checkInputShapeAndType(s){Object.keys(s).forEach(n=>{const o=s[n],[i]=(0,e.parseNodeName)(n),a=this.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){const e=a.attrParams.shape.value,s=e.length===o.shape.length&&o.shape.every((t,s)=>-1===e[s]||e[s]===t);t.util.assert(s,()=>`The shape of dict['${a.name}'] provided in `+`model.execute(dict) must be [${e}], but was `+`[${o.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&t.util.assert(o.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in `+"model.execute(dict) must be "+`${a.attrParams.dtype.value}, but was ${o.dtype}`)})}mapInputs(t){const e={};for(const s in t)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[s]){e[this._signature.inputs[s].name]=t[s]}else e[s]=t[s];return e}checkInputs(t){const s=Object.keys(t).filter(t=>{const[s]=(0,e.parseNodeName)(t);return null==this.graph.nodes[s]});if(s.length>0)throw new Error("The dict provided in model.execute(dict) has "+`keys: [${s}] that are not part of graph`)}mapOutputs(t){return t.map(t=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[t]){return this._signature.outputs[t].name}return t},{})}checkOutputs(t){t.forEach(t=>{const[s]=(0,e.parseNodeName)(t);if(!this.graph.nodes[s])throw new Error(`The output '${t}' is not found in the graph`)})}}exports.GraphExecutor=i;
},{"@tensorflow/tfjs-core":"tc6m","../operations/executors/utils":"w10i","../operations/operation_executor":"aGmR","./execution_context":"vg1e","./model_analysis":"pWc7"}],"JWGp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TFHUB_SEARCH_PARAM=exports.GraphModel=exports.DEFAULT_MODEL_NAME=void 0,exports.loadGraphModel=a;var e=require("@tensorflow/tfjs-core"),t=require("../operations/operation_mapper"),r=require("./graph_executor"),s=require("./resource_manager");const i="?tfjs-format=file";exports.TFHUB_SEARCH_PARAM=i;const n="model.json";exports.DEFAULT_MODEL_NAME=n;class o{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new s.ResourceManager}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=e.io.browserHTTPRequest(t,this.loadOptions);else{const r=e.io.getLoadHandlers(t,this.loadOptions);if(0===r.length)r.push(e.io.browserHTTPRequest(t,this.loadOptions));else if(r.length>1)throw new Error(`Found more than one (${r.length}) load handlers for `+`URL '${[t]}'`);this.handler=r[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(s){this.artifacts=s;const i=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${i.versions.producer}.${i.versions.minConsumer}`;const o=e.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new r.GraphExecutor(t.OperationMapper.Instance.transformGraph(i,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(o),this.executor.resourceManager=this.resourceManager,null!=s.modelInitializer&&null!=s.modelInitializer.node){const e=t.OperationMapper.Instance.transformGraph(s.modelInitializer);this.initializer=new r.GraphExecutor(e),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(t,r){if("string"==typeof t){const r=e.io.getSaveHandlers(t);if(0===r.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for `+`URL '${t}'`);t=r[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(t){if(!(t instanceof e.Tensor||Array.isArray(t)))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+`the graph model has ${this.inputNodes.length} placeholders, `+`while there are ${t.length} input tensors.`);return this.inputNodes.reduce((e,r,s)=>(e[r]=t[s],e),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function a(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}${n}${i}`);const r=new o(e,t);return await r.load(),r}exports.GraphModel=o;
},{"@tensorflow/tfjs-core":"tc6m","../operations/operation_mapper":"SpEM","./graph_executor":"X0ED","./resource_manager":"BlT9"}],"OiNd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GraphModel",{enumerable:!0,get:function(){return e.GraphModel}}),Object.defineProperty(exports,"deregisterOp",{enumerable:!0,get:function(){return r.deregisterOp}}),Object.defineProperty(exports,"loadGraphModel",{enumerable:!0,get:function(){return e.loadGraphModel}}),Object.defineProperty(exports,"registerOp",{enumerable:!0,get:function(){return r.registerOp}}),Object.defineProperty(exports,"version_converter",{enumerable:!0,get:function(){return t.version}});var e=require("./executor/graph_model"),r=require("./operations/custom_op/register"),t=require("./version");
},{"./executor/graph_model":"JWGp","./operations/custom_op/register":"c1gB","./version":"SdA6"}],"iLuu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SupportedModels=void 0,exports.createDetector=W;var e=require("@mediapipe/hands"),t=require("@tensorflow/tfjs-core"),n=require("@tensorflow/tfjs-converter"),i=function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{h(i.next(e))}catch(e){o(e)}}function s(e){try{h(i.throw(e))}catch(e){o(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}h((i=i.apply(e,t||[])).next())})}function o(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var a=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],s={runtime:"mediapipe",maxHands:2,modelType:"full"},h=function(){function n(t){var n,r=this;switch(this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new e.Hands({locateFile:function(e,n){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+e:n+"/"+e}}),t.modelType){case"lite":n=0;break;case"full":default:n=1}this.handsSolution.setOptions({modelComplexity:n,selfieMode:this.selfieMode,maxNumHands:t.maxHands}),this.handsSolution.onResults(function(e){if(r.height=e.image.height,r.width=e.image.width,r.hands=[],null!==e.multiHandLandmarks)for(var t=e.multiHandedness,n=e.multiHandLandmarks,o=e.multiHandWorldLandmarks,a=0;a<t.length;a++)r.hands.push(i(i({},r.translateOutput(n[a],o[a])),{score:t[a].score,handedness:t[a].label}))})}return n.prototype.translateOutput=function(e,t){var n=this;return{keypoints:e.map(function(e,t){return{x:e.x*n.width,y:e.y*n.height,score:e.visibility,name:a[t]}}),keypoints3D:t.map(function(e,t){return{x:e.x,y:e.y,z:e.z,score:e.visibility,name:a[t]}})}},n.prototype.estimateHands=function(e,n){return r(this,void 0,void 0,function(){var i,r;return o(this,function(o){switch(o.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),e instanceof t.Tensor?(r=ImageData.bind,[4,t.browser.toPixels(e)]):[3,2];case 1:return i=new(r.apply(ImageData,[void 0,o.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:i=e,o.label=3;case 3:return e=i,[4,this.handsSolution.send({image:e})];case 4:return o.sent(),[2,this.hands]}})})},n.prototype.dispose=function(){this.handsSolution.close()},n.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},n.prototype.initialize=function(){return this.handsSolution.initialize()},n}();function u(e){return r(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=function(e){if(null==e)return i({},s);var t=i({},e);return t.runtime="mediapipe",null==t.maxHands&&(t.maxHands=s.maxHands),null==t.modelType&&(t.modelType=s.modelType),t}(e),[4,(n=new h(t)).initialize()];case 1:return r.sent(),[2,n]}})})}function l(e){return e.width*e.height}function d(e){var t=e.xCenter-e.width/2,n=t+e.width,i=e.yCenter-e.height/2;return{xMin:t,xMax:n,yMin:i,yMax:i+e.height,width:e.width,height:e.height}}function c(e,t){var n=d(e),i=d(t);if(!function(e,t){return!(e.xMax<t.xMin||t.xMax<e.xMin||e.yMax<t.yMin||t.yMax<e.yMin)}(n,i))return 0;var r=l(function(e,t){var n=Math.max(e.xMin,t.xMin),i=Math.min(e.xMax,t.xMax),r=Math.max(e.yMin,t.yMin),o=Math.min(e.yMax,t.yMax);return{xMin:n,xMax:i,yMin:r,yMax:o,width:Math.max(i-n,0),height:Math.max(o-r,0)}}(n,i)),o=l(n)+l(i)-r;return o>0?r/o:0}function f(e,t,n,i){var r=e.width,o=e.height,a=i?-1:1,s=Math.cos(e.rotation),h=Math.sin(e.rotation),u=e.xCenter,l=e.yCenter,d=1/t,c=1/n,f=new Array(16);return f[0]=r*s*a*d,f[1]=-o*h*d,f[2]=0,f[3]=(-.5*r*s*a+.5*o*h+u)*d,f[4]=r*h*a*c,f[5]=o*s*c,f[6]=0,f[7]=(-.5*o*s-.5*r*h*a+l)*c,f[8]=0,f[9]=0,f[10]=r*d,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,function(e){if(16!==e.length)throw new Error("Array length must be 16 but got "+e.length);return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}(f)}function p(e){return e instanceof t.Tensor?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function m(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function g(e){return e instanceof t.Tensor?e:t.browser.fromPixels(e)}function x(e,n){t.util.assert(0!==e.width,function(){return n+" width cannot be 0."}),t.util.assert(0!==e.height,function(){return n+" height cannot be 0."})}function y(e,n){var i=function(e,t,n,i){var r=(i-n)/255;return{scale:r,offset:n-0*r}}(0,0,n[0],n[1]);return(0,t.tidy)(function(){return(0,t.add)((0,t.mul)(e,i.scale),i.offset)})}function v(e,n,i){var r=n.outputTensorSize,o=n.keepAspectRatio,a=n.borderMode,s=n.outputTensorFloatRange,h=p(e),u=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(h,i),l=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var i=t.height,r=t.width;x(t,"targetSize"),x(e,"roi");var o,a,s=i/r,h=e.height/e.width,u=0,l=0;return s>h?(o=e.width,a=e.width*s,l=(1-h/s)/2):(o=e.height/s,a=e.height,u=(1-s/h)/2),e.width=o,e.height=a,{top:l,left:u,right:u,bottom:l}}(u,r,o),d=f(u,h.width,h.height,!1);return{imageTensor:(0,t.tidy)(function(){var n=g(e),i=(0,t.tensor2d)(function(e,t,n){return x(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}(d,h,r),[1,8]),o="zero"===a?"constant":"nearest",u=t.image.transform((0,t.expandDims)((0,t.cast)(n,"float32")),i,"bilinear",o,0,[r.height,r.width]);return null!=s?y(u,s):u}),padding:l,transformationMatrix:d}}function M(e,t,n,i){return 1===i?.5*(e+t):e+(t-e)*n/(i-1)}function w(e){return{xCenter:e.xMin+e.width/2,yCenter:e.yMin+e.height/2,width:e.width,height:e.height}}function b(e){var t=e.relativeKeypoints;if(t.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MIN_VALUE;return t.forEach(function(e){n=Math.min(n,e.x),r=Math.max(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.y)}),{xCenter:(n+r)/2,yCenter:(i+o)/2,width:r-n,height:o-i}}function I(e,t,n,i,r){var o="rect"===n?function(e,t,n){var i,r=e.locationData;if("boundingbox"===t)i=w(r.boundingBox);else{i=b(r);var o=n.width,a=n.height;i.xCenter=Math.round(i.xCenter*o),i.yCenter=Math.round(i.yCenter*a),i.width=Math.round(i.width*o),i.height=Math.round(i.height*a)}return i}(e,t,i):function(e,t){var n=e.locationData;return"boundingbox"===t?w(n.relativeBoundingBox):b(n)}(e,t);return r&&(o.rotation=function(e,t,n){var i,r=e.locationData,o=n.rotationVectorStartKeypointIndex,a=n.rotationVectorEndKeypointIndex;i=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var s=r.relativeKeypoints[o].x*t.width,h=r.relativeKeypoints[o].y*t.height,u=r.relativeKeypoints[a].x*t.width,l=r.relativeKeypoints[a].y*t.height;return m(i-Math.atan2(-(l-h),u-s))}(e,i,r)),o}function T(e){return(0,t.tidy)(function(){var n=function(e){return(0,t.tidy)(function(){return[(0,t.slice)(e,[0,0,0],[1,-1,1]),(0,t.slice)(e,[0,0,1],[1,-1,-1])]})}(e),i=n[0],r=n[1];return{boxes:(0,t.squeeze)(r),logits:(0,t.squeeze)(i)}})}function S(e,n,i,a){return r(this,void 0,void 0,function(){var r,a,s,h,u;return o(this,function(o){switch(o.label){case 0:return e.sort(function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)}),r=(0,t.tensor2d)(e.map(function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]})),a=(0,t.tensor1d)(e.map(function(e){return e.score[0]})),[4,t.image.nonMaxSuppressionAsync(r,a,n,i)];case 1:return[4,(s=o.sent()).array()];case 2:return h=o.sent(),u=e.filter(function(e,t){return h.indexOf(t)>-1}),(0,t.dispose)([r,a,s]),[2,u]}})})}function z(e,t){return e.map(function(e){var n=i(i({},e),{x:e.x*t.width,y:e.y*t.height});return null!=e.z&&(n.z=e.z*t.width),n})}function _(e,n,i){return r(this,void 0,void 0,function(){var r,a,s,h,u;return o(this,function(o){switch(o.label){case 0:return r=e[0],a=e[1],s=function(e,n,i){return(0,t.tidy)(function(){var r,o,a,s;i.reverseOutputOrder?(o=(0,t.squeeze)((0,t.slice)(e,[0,i.boxCoordOffset+0],[-1,1])),r=(0,t.squeeze)((0,t.slice)(e,[0,i.boxCoordOffset+1],[-1,1])),s=(0,t.squeeze)((0,t.slice)(e,[0,i.boxCoordOffset+2],[-1,1])),a=(0,t.squeeze)((0,t.slice)(e,[0,i.boxCoordOffset+3],[-1,1]))):(r=(0,t.squeeze)((0,t.slice)(e,[0,i.boxCoordOffset+0],[-1,1])),o=(0,t.squeeze)((0,t.slice)(e,[0,i.boxCoordOffset+1],[-1,1])),a=(0,t.squeeze)((0,t.slice)(e,[0,i.boxCoordOffset+2],[-1,1])),s=(0,t.squeeze)((0,t.slice)(e,[0,i.boxCoordOffset+3],[-1,1]))),o=(0,t.add)((0,t.mul)((0,t.div)(o,i.xScale),n.w),n.x),r=(0,t.add)((0,t.mul)((0,t.div)(r,i.yScale),n.h),n.y),i.applyExponentialOnBoxSize?(a=(0,t.mul)((0,t.exp)((0,t.div)(a,i.hScale)),n.h),s=(0,t.mul)((0,t.exp)((0,t.div)(s,i.wScale)),n.w)):(a=(0,t.mul)((0,t.div)(a,i.hScale),n.h),s=(0,t.mul)((0,t.div)(s,i.wScale),n.h));var h=(0,t.sub)(r,(0,t.div)(a,2)),u=(0,t.sub)(o,(0,t.div)(s,2)),l=(0,t.add)(r,(0,t.div)(a,2)),d=(0,t.add)(o,(0,t.div)(s,2)),c=(0,t.concat)([(0,t.reshape)(h,[i.numBoxes,1]),(0,t.reshape)(u,[i.numBoxes,1]),(0,t.reshape)(l,[i.numBoxes,1]),(0,t.reshape)(d,[i.numBoxes,1])],1);if(i.numKeypoints)for(var f=0;f<i.numKeypoints;++f){var p=i.keypointCoordOffset+f*i.numValuesPerKeypoint,m=void 0,g=void 0;i.reverseOutputOrder?(m=(0,t.squeeze)((0,t.slice)(e,[0,p],[-1,1])),g=(0,t.squeeze)((0,t.slice)(e,[0,p+1],[-1,1]))):(g=(0,t.squeeze)((0,t.slice)(e,[0,p],[-1,1])),m=(0,t.squeeze)((0,t.slice)(e,[0,p+1],[-1,1])));var x=(0,t.add)((0,t.mul)((0,t.div)(m,i.xScale),n.w),n.x),y=(0,t.add)((0,t.mul)((0,t.div)(g,i.yScale),n.h),n.y);c=(0,t.concat)([c,(0,t.reshape)(x,[i.numBoxes,1]),(0,t.reshape)(y,[i.numBoxes,1])],1)}return c})}(a,n,i),h=(0,t.tidy)(function(){var e=r;return i.sigmoidScore?(null!=i.scoreClippingThresh&&(e=(0,t.clipByValue)(r,-i.scoreClippingThresh,i.scoreClippingThresh)),e=(0,t.sigmoid)(e)):e}),[4,C(s,h,i)];case 1:return u=o.sent(),(0,t.dispose)([s,h]),[2,u]}})})}function C(e,t,n){return r(this,void 0,void 0,function(){var i,r,a,s,h,u,l,d,c,f,p,m;return o(this,function(o){switch(o.label){case 0:return i=[],[4,e.data()];case 1:return r=o.sent(),[4,t.data()];case 2:for(a=o.sent(),s=0;s<n.numBoxes;++s)if(!(null!=n.minScoreThresh&&a[s]<n.minScoreThresh||(h=s*n.numCoords,u=k(r[h+0],r[h+1],r[h+2],r[h+3],a[s],n.flipVertically,s),(l=u.locationData.relativeBoundingBox).width<0||l.height<0))){if(n.numKeypoints>0)for((d=u.locationData).relativeKeypoints=[],c=n.numKeypoints*n.numValuesPerKeypoint,f=0;f<c;f+=n.numValuesPerKeypoint)p=h+n.keypointCoordOffset+f,m={x:r[p+0],y:n.flipVertically?1-r[p+1]:r[p+1]},d.relativeKeypoints.push(m);i.push(u)}return[2,i]}})})}function k(e,t,n,i,r,o,a){return{score:[r],ind:a,locationData:{relativeBoundingBox:{xMin:t,yMin:o?1-n:e,xMax:i,yMax:o?1-e:n,width:i-t,height:n-e}}}}function H(e,t){return"none"===e?t:function(e){return 1/(1+Math.exp(-e))}(t)}function O(e,t,n,i){return r(this,void 0,void 0,function(){var r,a,s,h,u,l,d,c;return o(this,function(o){switch(o.label){case 0:return n=n||t.flipHorizontally||!1,i=i||t.flipVertically||!1,r=e.size,a=r/t.numLandmarks,[4,e.data()];case 1:for(s=o.sent(),h=[],u=0;u<t.numLandmarks;++u)l=u*a,(c={x:0,y:0}).x=n?t.inputImageWidth-s[l]:s[l],a>1&&(c.y=i?t.inputImageHeight-s[l+1]:s[l+1]),a>2&&(c.z=s[l+2]),a>3&&(c.score=H(t.visibilityActivation,s[l+3])),h.push(c);for(d=0;d<h.length;++d)(c=h[d]).x=c.x/t.inputImageWidth,c.y=c.y/t.inputImageHeight,c.z=c.z/t.inputImageWidth/(t.normalizeZ||1);return[2,h]}})})}function L(e,t,n){var i=e.width,r=e.height,o=e.rotation;if(null==n.rotation&&null==n.rotationDegree||(o=function(e,t){return null!=t.rotation?e+=t.rotation:null!=t.rotationDegree&&(e+=Math.PI*t.rotationDegree/180),m(e)}(o,n)),0===o)e.xCenter=e.xCenter+i*n.shiftX,e.yCenter=e.yCenter+r*n.shiftY;else{var a=(t.width*i*n.shiftX*Math.cos(o)-t.height*r*n.shiftY*Math.sin(o))/t.width,s=(t.width*i*n.shiftX*Math.sin(o)+t.height*r*n.shiftY*Math.cos(o))/t.height;e.xCenter=e.xCenter+a,e.yCenter=e.yCenter+s}if(n.squareLong){var h=Math.max(i*t.width,r*t.height);i=h/t.width,r=h/t.height}else if(n.squareShort){var u=Math.min(i*t.width,r*t.height);i=u/t.width,r=u/t.height}return e.width=i*n.scaleX,e.height=r*n.scaleY,e}function N(e,t){for(var n=function(e,t){var n=e[0].x*t.width,i=e[0].y*t.height,r=(e[4].x+e[8].x)/2,o=(e[4].y+e[8].y)/2;return r=(r+e[6].x)/2*t.width,o=(o+e[6].y)/2*t.height,m(Math.PI/2-Math.atan2(-(o-i),r-n))}(e,t),i=m(-n),r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,h=0,u=e;h<u.length;h++){var l=(x=u[h]).x,d=x.y;r=Math.min(r,l),o=Math.max(o,l),a=Math.min(a,d),s=Math.max(s,d)}var c=(o+r)/2,f=(s+a)/2;r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(var p=0,g=e;p<g.length;p++){var x,y=((x=g[p]).x-c)*t.width,v=(x.y-f)*t.height,M=y*Math.cos(i)-v*Math.sin(i),w=y*Math.sin(i)+v*Math.cos(i);r=Math.min(r,M),o=Math.max(o,M),a=Math.min(a,w),s=Math.max(s,w)}var b=(o+r)/2,I=(s+a)/2,T=b*Math.cos(n)-I*Math.sin(n)+t.width*c,S=b*Math.sin(n)+I*Math.cos(n)+t.height*f,z=(o-r)/t.width,_=(s-a)/t.height;return{xCenter:T/t.width,yCenter:S/t.height,width:z,height:_,rotation:n}}var E,A={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},B={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},V={flipHorizontal:!1,staticImageMode:!1},R={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},P=.3,D={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},q={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},K={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},F={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},Y={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},U={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},j=function(){function e(e,n,i){this.detectorModel=e,this.landmarkModel=n,this.maxHands=i,this.prevHandRectsFromLandmarks=null,this.anchors=function(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var i=[],r=[],o=[],a=[],s=n;s<e.strides.length&&e.strides[s]===e.strides[n];){var h=M(e.minScale,e.maxScale,s,e.strides.length);if(0===s&&e.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),a.push(.1),a.push(h),a.push(h);else{for(var u=0;u<e.aspectRatios.length;++u)o.push(e.aspectRatios[u]),a.push(h);if(e.interpolatedScaleAspectRatio>0){var l=s===e.strides.length-1?1:M(e.minScale,e.maxScale,s+1,e.strides.length);a.push(Math.sqrt(h*l)),o.push(e.interpolatedScaleAspectRatio)}}s++}for(var d=0;d<o.length;++d){var c=Math.sqrt(o[d]);i.push(a[d]/c),r.push(a[d]*c)}var f=0,p=0;if(e.featureMapHeight.length>0)f=e.featureMapHeight[n],p=e.featureMapWidth[n];else{var m=e.strides[n];f=Math.ceil(e.inputSizeHeight/m),p=Math.ceil(e.inputSizeWidth/m)}for(var g=0;g<f;++g)for(var x=0;x<p;++x)for(var y=0;y<i.length;++y){var v={xCenter:(x+e.anchorOffsetX)/p,yCenter:(g+e.anchorOffsetY)/f,width:0,height:0};e.fixedAnchorSize?(v.width=1,v.height=1):(v.width=r[y],v.height=i[y]),t.push(v)}n=s}return t}(A);var r=(0,t.tensor1d)(this.anchors.map(function(e){return e.width})),o=(0,t.tensor1d)(this.anchors.map(function(e){return e.height})),a=(0,t.tensor1d)(this.anchors.map(function(e){return e.xCenter})),s=(0,t.tensor1d)(this.anchors.map(function(e){return e.yCenter}));this.anchorTensor={x:a,y:s,w:r,h:o}}return e.prototype.estimateHands=function(e,n){return r(this,void 0,void 0,function(){var r,s,h,u,l,d,f,m,x,y,v,M,w,b,I,T,S,_,C=this;return o(this,function(o){switch(o.label){case 0:return r=function(e){if(null==e)return i({},V);var t=i({},e);return null==t.flipHorizontal&&(t.flipHorizontal=V.flipHorizontal),null==t.staticImageMode&&(t.staticImageMode=V.staticImageMode),t}(n),null==e?(this.reset(),[2,[]]):(s=p(e),h=(0,t.tidy)(function(){var n=(0,t.cast)(g(e),"float32");return r.flipHorizontal&&(n=(0,t.squeeze)(t.image.flipLeftRight((0,t.expandDims)(n,0)),[0])),n}),u=this.prevHandRectsFromLandmarks,r.staticImageMode||null==u||u.length<this.maxHands?[4,this.detectPalm(h)]:[3,2]);case 1:return 0===(d=o.sent()).length?(this.reset(),h.dispose(),[2,[]]):(f=d.map(function(e){return C.palmDetectionToRoi(e,s)}),l=f,[3,3]);case 2:l=u,o.label=3;case 3:return.5,k=[],[l].forEach(function(e){return e.forEach(function(e){(k=k.filter(function(t){return c(e,t)<=.5})).push(e)})}),l=k,[4,Promise.all(l.map(function(e){return C.handLandmarks(e,h)}))];case 4:for(m=o.sent(),x=[],this.prevHandRectsFromLandmarks=[],y=0,v=m;y<v.length;y++)null!=(M=v[y])&&(w=M.landmarks,b=M.worldLandmarks,I=M.handScore,T=M.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(w,s)),null!=(S=z(w,s))&&S.forEach(function(e,t){delete e.z,e.name=a[t]}),null!=(_=b)&&_.forEach(function(e,t){e.name=a[t]}),x.push({keypoints:S,keypoints3D:_,handedness:T,score:I}));return h.dispose(),[2,x]}var k})})},e.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),(0,t.dispose)([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},e.prototype.detectPalm=function(e){return r(this,void 0,void 0,function(){var n,i,r,a,s,h,u,l,d,c;return o(this,function(o){switch(o.label){case 0:return n=v(e,K),i=n.imageTensor,r=n.padding,a=this.detectorModel.predict(i),s=T(a),h=s.boxes,[4,_([u=s.logits,h],this.anchorTensor,R)];case 1:return 0===(l=o.sent()).length?((0,t.dispose)([i,a,u,h]),[2,l]):[4,S(l,this.maxHands,P)];case 2:return d=o.sent(),c=function(e,t){void 0===e&&(e=[]);for(var n=t.left,i=t.top,r=t.left+t.right,o=t.top+t.bottom,a=0;a<e.length;a++){var s=e[a],h=s.locationData.relativeBoundingBox,u=(h.xMin-n)/(1-r),l=(h.yMin-i)/(1-o),d=h.width/(1-r),c=h.height/(1-o);h.xMin=u,h.yMin=l,h.width=d,h.height=c,h.xMax=u+d,h.yMax=l+c;var f=s.locationData.relativeKeypoints;f&&f.forEach(function(e){var t=(e.x-n)/(1-r),a=(e.y-i)/(1-o);e.x=t,e.y=a})}return e}(d,r),(0,t.dispose)([i,a,u,h]),[2,c]}})})},e.prototype.palmDetectionToRoi=function(e,t){return L(I(e,"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),t,D)},e.prototype.handLandmarks=function(e,n){return r(this,void 0,void 0,function(){var r,a,s,h,u,l,d,c,f,p,m,g,x,y,M,w;return o(this,function(o){switch(o.label){case 0:return r=v(n,F,e),a=r.imageTensor,s=r.padding,h=this.landmarkModel.execute(a,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),u=h[0],l=h[1],d=h[2],c=h[3],[4,l.data()];case 1:return(f=o.sent()[0])<.5?((0,t.dispose)(h),(0,t.dispose)(a),[2,null]):[4,d.data()];case 2:return p=o.sent()[0],m=p>=.5?"Left":"Right",[4,O(u,Y)];case 3:return g=o.sent(),[4,O(c,U)];case 4:return x=o.sent(),y=function(e,t){var n=t.left,r=t.top,o=t.left+t.right,a=t.top+t.bottom;return e.map(function(e){return i(i({},e),{x:(e.x-n)/(1-o),y:(e.y-r)/(1-a),z:e.z/(1-o)})})}(g,s),M=function(e,t,n){void 0===n&&(n={ignoreRotation:!1});for(var r=[],o=0,a=y;o<a.length;o++){var s=a[o],h=s.x-.5,u=s.y-.5,l=n.ignoreRotation?0:t.rotation,d=Math.cos(l)*h-Math.sin(l)*u,c=Math.sin(l)*h+Math.cos(l)*u;d=d*t.width+t.xCenter,c=c*t.height+t.yCenter;var f=s.z*t.width,p=i({},s);p.x=d,p.y=c,p.z=f,r.push(p)}return r}(0,e),w=function(e,t){for(var n=[],r=0,o=x;r<o.length;r++){var a=o[r],s=a.x,h=a.y,u=t.rotation,l=Math.cos(u)*s-Math.sin(u)*h,d=Math.sin(u)*s+Math.cos(u)*h,c=i({},a);c.x=l,c.y=d,n.push(c)}return n}(0,e),(0,t.dispose)(h),(0,t.dispose)(a),[2,{landmarks:M,worldLandmarks:w,handScore:f,handedness:m}]}})})},e.prototype.handLandmarksToRoi=function(e,t){return L(N([].concat(e.slice(0,4),e.slice(5,7),e.slice(9,11),e.slice(13,15),e.slice(17,19)),t),t,q)},e}();function X(e){return r(this,void 0,void 0,function(){var t,r,a,s,h,u;return o(this,function(o){switch(o.label){case 0:return t=function(e){if(null==e)return i({},B);var t=i({},e);if(t.runtime="tfjs",null==t.maxHands&&(t.maxHands=B.maxHands),null==t.modelType&&(t.modelType=B.modelType),"lite"!==t.modelType&&"full"!==t.modelType)throw new Error("Model type must be one of lite or full, but got "+t.modelType);if(null==t.detectorModelUrl)switch(t.modelType){case"lite":t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1";break;case"full":default:t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"}if(null==t.landmarkModelUrl)switch(t.modelType){case"lite":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1";break;case"full":default:t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"}return t}(e),r=t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,a=t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([(0,n.loadGraphModel)(t.detectorModelUrl,{fromTFHub:r}),(0,n.loadGraphModel)(t.landmarkModelUrl,{fromTFHub:a})])];case 1:return s=o.sent(),h=s[0],u=s[1],[2,new j(h,u,t.maxHands)]}})})}function W(e,t){return r(this,void 0,void 0,function(){var n,i;return o(this,function(r){switch(e){case E.MediaPipeHands:if(i=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,X(n)];if("mediapipe"===n.runtime)return[2,u(n)];i=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+i);default:throw new Error(e+" is not a supported model name.")}})})}exports.SupportedModels=E,(E||(exports.SupportedModels=E={})).MediaPipeHands="MediaPipeHands";
},{"@mediapipe/hands":"bfxE","@tensorflow/tfjs-core":"tc6m","@tensorflow/tfjs-converter":"OiNd"}],"gBK8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AlwaysStencilFunc=exports.AlwaysDepth=exports.AlphaFormat=exports.AdditiveBlending=exports.AddOperation=exports.AddEquation=exports.ACESFilmicToneMapping=void 0,exports.AmbientLight=jd,exports.AmbientLightProbe=mf,exports.AnimationClip=kp,exports.AnimationLoader=Kp,exports.AnimationMixer=Xf,exports.AnimationObjectGroup=Wf,exports.AnimationUtils=void 0,exports.ArcCurve=od,exports.ArrayCamera=Xl,exports.ArrowHelper=Fm,exports.Audio=Tf,exports.AudioAnalyser=Pf,exports.AudioContext=void 0,exports.AudioListener=Sf,exports.AudioLoader=uf,exports.AxesHelper=Bm,exports.AxisHelper=qv,exports.BasicShadowMap=exports.BasicDepthPacking=exports.BackSide=void 0,exports.BinaryTextureLoader=Qv,exports.Bone=Th,exports.BooleanKeyframeTrack=Fp,exports.BoundingBoxHelper=Xv,exports.Box2=rm,exports.Box3=_n,exports.Box3Helper=Pm,exports.BoxGeometry=exports.BoxBufferGeometry=void 0,exports.BoxHelper=Cm,exports.BufferAttribute=oi,exports.BufferGeometry=Ti,exports.BufferGeometryLoader=Jd,exports.Cache=exports.ByteType=void 0,exports.Camera=aa,exports.CameraHelper=Am,exports.CanvasRenderer=eg,exports.CanvasTexture=Qh,exports.CatmullRomCurve3=pd,exports.CineonToneMapping=void 0,exports.CircleBufferGeometry=gp,exports.CircleGeometry=vp,exports.ClampToEdgeWrapping=void 0,exports.Clock=xf,exports.ClosedSplineCurve3=kv,exports.Color=Qn,exports.ColorKeyframeTrack=Bp,exports.CompressedTexture=Jh,exports.CompressedTextureLoader=$p,exports.ConeBufferGeometry=mp,exports.ConeGeometry=fp,exports.CubeCamera=la,exports.CubeRefractionMapping=exports.CubeReflectionMapping=exports.CubeGeometry=void 0,exports.CubeTexture=$s,exports.CubeTextureLoader=rd,exports.CubeUVRefractionMapping=exports.CubeUVReflectionMapping=void 0,exports.CubicBezierCurve=Md,exports.CubicBezierCurve3=Sd,exports.CubicInterpolant=Op,exports.CullFaceNone=exports.CullFaceFrontBack=exports.CullFaceFront=exports.CullFaceBack=void 0,exports.Curve=id,exports.CurvePath=Pd,exports.CustomBlending=void 0,exports.CylinderBufferGeometry=dp,exports.CylinderGeometry=pp,exports.Cylindrical=em,exports.DataTexture=ua,exports.DataTexture2DArray=ec,exports.DataTexture3D=tc,exports.DataTextureLoader=ed,exports.DepthStencilFormat=exports.DepthFormat=exports.DefaultLoadingManager=exports.DecrementWrapStencilOp=exports.DecrementStencilOp=void 0,exports.DepthTexture=Kh,exports.DirectionalLight=kd,exports.DirectionalLightHelper=Sm,exports.DirectionalLightShadow=Vd,exports.DiscreteInterpolant=Ip,exports.DodecahedronBufferGeometry=uu,exports.DodecahedronGeometry=hu,exports.DstColorFactor=exports.DstAlphaFactor=exports.DoubleSide=void 0,exports.DynamicBufferAttribute=Dv,exports.DynamicReadUsage=exports.DynamicDrawUsage=exports.DynamicCopyUsage=void 0,exports.EdgesGeometry=up,exports.EdgesHelper=Yv,exports.EllipseCurve=ad,exports.EquirectangularRefractionMapping=exports.EquirectangularReflectionMapping=exports.EqualStencilFunc=exports.EqualDepth=void 0,exports.Euler=jr,exports.EventDispatcher=gr,exports.ExtrudeBufferGeometry=Qu,exports.ExtrudeGeometry=Ju,exports.Face3=ti,exports.Face4=_v,exports.FaceColors=void 0,exports.FileLoader=Qp,exports.FlatShading=void 0,exports.Float32Attribute=Hv,exports.Float32BufferAttribute=fi,exports.Float64Attribute=Vv,exports.Float64BufferAttribute=mi,exports.FloatType=void 0,exports.Fog=Kl,exports.FogExp2=Ql,exports.Font=of,exports.FontLoader=lf,exports.FrontSide=exports.FrontFaceDirectionCW=exports.FrontFaceDirectionCCW=void 0,exports.Frustum=fa,exports.GammaEncoding=void 0,exports.Geometry=Ji,exports.GreaterStencilFunc=exports.GreaterEqualStencilFunc=exports.GreaterEqualDepth=exports.GreaterDepth=exports.GeometryUtils=void 0,exports.GridHelper=xm,exports.Group=Yl,exports.HalfFloatType=void 0,exports.HemisphereLight=Nd,exports.HemisphereLightHelper=ym,exports.HemisphereLightProbe=ff,exports.IcosahedronBufferGeometry=lu,exports.IcosahedronGeometry=cu,exports.ImageBitmapLoader=nf,exports.ImageLoader=td,exports.ImageUtils=void 0,exports.ImmediateRenderObject=om,exports.IncrementWrapStencilOp=exports.IncrementStencilOp=void 0,exports.InstancedBufferAttribute=Zd,exports.InstancedBufferGeometry=Yd,exports.InstancedInterleavedBuffer=Zf,exports.InstancedMesh=Ch,exports.Int16Attribute=Bv,exports.Int16BufferAttribute=hi,exports.Int32Attribute=Uv,exports.Int32BufferAttribute=pi,exports.Int8Attribute=Iv,exports.Int8BufferAttribute=si,exports.IntType=void 0,exports.InterleavedBuffer=$l,exports.InterleavedBufferAttribute=rh,exports.Interpolant=Pp,exports.InvertStencilOp=exports.InterpolateSmooth=exports.InterpolateLinear=exports.InterpolateDiscrete=void 0,exports.JSONLoader=tg,exports.KeepStencilOp=void 0,exports.KeyframeTrack=Np,exports.LOD=bh,exports.LatheBufferGeometry=sp,exports.LatheGeometry=op,exports.Layers=Wr,exports.LensFlare=ng,exports.LessStencilFunc=exports.LessEqualStencilFunc=exports.LessEqualDepth=exports.LessDepth=void 0,exports.Light=Id,exports.LightProbe=df,exports.LightShadow=Fd,exports.Line=Bh,exports.Line3=am,exports.LineBasicMaterial=Ph,exports.LineCurve=Td,exports.LineCurve3=Ed,exports.LineDashedMaterial=Lp,exports.LineLoop=Hh,exports.LinePieces=void 0,exports.LineSegments=Gh,exports.LinearFilter=exports.LinearEncoding=exports.LineStrip=void 0,exports.LinearInterpolant=Dp,exports.LinearMipMapLinearFilter=void 0,exports.LinearToneMapping=exports.LinearMipmapNearestFilter=exports.LinearMipmapLinearFilter=exports.LinearMipMapNearestFilter=exports.LinearMipMapLinearFilter=void 0,exports.Loader=Zp,exports.LoaderUtils=void 0,exports.LoadingManager=Xp,exports.MOUSE=exports.LuminanceFormat=exports.LuminanceAlphaFormat=exports.LoopRepeat=exports.LoopPingPong=exports.LoopOnce=exports.LogLuvEncoding=void 0,exports.Material=ni,exports.MaterialLoader=qd,exports.MathUtils=exports.Math=void 0,exports.Matrix3=Mr,exports.Matrix4=Hr,exports.MaxEquation=void 0,exports.Mesh=ki,exports.MeshBasicMaterial=ii,exports.MeshDepthMaterial=Bl,exports.MeshDistanceMaterial=zl,exports.MeshFaceMaterial=Sv,exports.MeshLambertMaterial=Ep,exports.MeshMatcapMaterial=Ap,exports.MeshNormalMaterial=Tp,exports.MeshPhongMaterial=Mp,exports.MeshPhysicalMaterial=wp,exports.MeshStandardMaterial=_p,exports.MeshToonMaterial=Sp,exports.MixOperation=exports.MirroredRepeatWrapping=exports.MinEquation=void 0,exports.MultiMaterial=Tv,exports.NotEqualStencilFunc=exports.NotEqualDepth=exports.NormalBlending=exports.NoToneMapping=exports.NoColors=exports.NoBlending=exports.NeverStencilFunc=exports.NeverDepth=exports.NearestMipmapNearestFilter=exports.NearestMipmapLinearFilter=exports.NearestMipMapNearestFilter=exports.NearestMipMapLinearFilter=exports.NearestFilter=exports.MultiplyOperation=exports.MultiplyBlending=void 0,exports.NumberKeyframeTrack=zp,exports.Object3D=on,exports.ObjectLoader=Kd,exports.ObjectSpaceNormalMap=void 0,exports.OctahedronBufferGeometry=su,exports.OctahedronGeometry=ou,exports.OneMinusSrcColorFactor=exports.OneMinusSrcAlphaFactor=exports.OneMinusDstColorFactor=exports.OneMinusDstAlphaFactor=exports.OneFactor=void 0,exports.OrthographicCamera=Hd,exports.PCFSoftShadowMap=exports.PCFShadowMap=void 0,exports.PMREMGenerator=iv,exports.ParametricBufferGeometry=tu,exports.ParametricGeometry=eu,exports.Particle=Av,exports.ParticleBasicMaterial=Cv,exports.ParticleSystem=Lv,exports.ParticleSystemMaterial=Pv,exports.Path=Od,exports.PerspectiveCamera=oa,exports.Plane=Fn,exports.PlaneBufferGeometry=xa,exports.PlaneGeometry=ya,exports.PlaneHelper=Om,exports.PointCloud=Ev,exports.PointCloudMaterial=Rv,exports.PointLight=Gd,exports.PointLightHelper=fm,exports.Points=Xh,exports.PointsMaterial=Vh,exports.PolarGridHelper=bm,exports.PolyhedronBufferGeometry=nu,exports.PolyhedronGeometry=ru,exports.PositionalAudio=Cf,exports.PropertyBinding=jf,exports.PropertyMixer=Of,exports.QuadraticBezierCurve=Ad,exports.QuadraticBezierCurve3=Ld,exports.Quaternion=Cr,exports.QuaternionKeyframeTrack=Gp,exports.QuaternionLinearInterpolant=Up,exports.RGBAIntegerFormat=exports.RGBAFormat=exports.RGBADepthPacking=exports.REVISION=void 0,exports.RGIntegerFormat=exports.RGFormat=exports.RGB_S3TC_DXT1_Format=exports.RGB_PVRTC_4BPPV1_Format=exports.RGB_PVRTC_2BPPV1_Format=exports.RGB_ETC1_Format=exports.RGBM7Encoding=exports.RGBM16Encoding=exports.RGBIntegerFormat=exports.RGBFormat=exports.RGBEFormat=exports.RGBEEncoding=exports.RGBDEncoding=exports.RGBA_S3TC_DXT5_Format=exports.RGBA_S3TC_DXT3_Format=exports.RGBA_S3TC_DXT1_Format=exports.RGBA_PVRTC_4BPPV1_Format=exports.RGBA_PVRTC_2BPPV1_Format=exports.RGBA_ASTC_8x8_Format=exports.RGBA_ASTC_8x6_Format=exports.RGBA_ASTC_8x5_Format=exports.RGBA_ASTC_6x6_Format=exports.RGBA_ASTC_6x5_Format=exports.RGBA_ASTC_5x5_Format=exports.RGBA_ASTC_5x4_Format=exports.RGBA_ASTC_4x4_Format=exports.RGBA_ASTC_12x12_Format=exports.RGBA_ASTC_12x10_Format=exports.RGBA_ASTC_10x8_Format=exports.RGBA_ASTC_10x6_Format=exports.RGBA_ASTC_10x5_Format=exports.RGBA_ASTC_10x10_Format=exports.RGBAIntegerFormat=exports.RGBAFormat=exports.RGBADepthPacking=exports.REVISION=void 0,exports.RawShaderMaterial=bp,exports.Ray=On,exports.Raycaster=Jf,exports.RectAreaLight=Wd,exports.ReverseSubtractEquation=exports.ReplaceStencilOp=exports.RepeatWrapping=exports.ReinhardToneMapping=exports.RedIntegerFormat=exports.RedFormat=void 0,exports.RingBufferGeometry=ap,exports.RingGeometry=ip,exports.Scene=sn,exports.ShaderLib=exports.ShaderChunk=exports.SceneUtils=void 0,exports.ShaderMaterial=ia,exports.ShadowMaterial=xp,exports.Shape=Dd,exports.ShapeBufferGeometry=lp,exports.ShapeGeometry=cp,exports.ShapePath=af,exports.ShortType=exports.ShapeUtils=void 0,exports.Skeleton=Sh,exports.SkeletonHelper=dm,exports.SkinnedMesh=_h,exports.SmoothShading=void 0,exports.Sphere=Sn,exports.SphereBufferGeometry=np,exports.SphereGeometry=rp,exports.Spherical=$f,exports.SphericalHarmonics3=pf,exports.SphericalReflectionMapping=void 0,exports.Spline=Wv,exports.SplineCurve=Rd,exports.SplineCurve3=jv,exports.SpotLight=zd,exports.SpotLightHelper=cm,exports.SpotLightShadow=Bd,exports.Sprite=vh,exports.SpriteMaterial=nh,exports.StaticReadUsage=exports.StaticDrawUsage=exports.StaticCopyUsage=exports.SrcColorFactor=exports.SrcAlphaSaturateFactor=exports.SrcAlphaFactor=void 0,exports.StereoCamera=yf,exports.StreamReadUsage=exports.StreamDrawUsage=exports.StreamCopyUsage=void 0,exports.StringKeyframeTrack=Hp,exports.TangentSpaceNormalMap=exports.TOUCH=exports.SubtractiveBlending=exports.SubtractEquation=void 0,exports.TetrahedronBufferGeometry=au,exports.TetrahedronGeometry=iu,exports.TextBufferGeometry=tp,exports.TextGeometry=ep,exports.Texture=Er,exports.TextureLoader=nd,exports.TorusBufferGeometry=gu,exports.TorusGeometry=vu,exports.TorusKnotBufferGeometry=mu,exports.TorusKnotGeometry=fu,exports.Triangle=Xn,exports.TrianglesDrawMode=exports.TriangleStripDrawMode=exports.TriangleFanDrawMode=void 0,exports.TubeBufferGeometry=du,exports.TubeGeometry=pu,exports.UVMapping=void 0,exports.Uint16Attribute=zv,exports.Uint16BufferAttribute=ui,exports.Uint32Attribute=Gv,exports.Uint32BufferAttribute=di,exports.Uint8Attribute=Nv,exports.Uint8BufferAttribute=ci,exports.Uint8ClampedAttribute=Fv,exports.Uint8ClampedBufferAttribute=li,exports.Uncharted2ToneMapping=void 0,exports.Uniform=Yf,exports.VSMShadowMap=exports.UnsignedShortType=exports.UnsignedShort565Type=exports.UnsignedShort5551Type=exports.UnsignedShort4444Type=exports.UnsignedIntType=exports.UnsignedInt248Type=exports.UnsignedByteType=exports.UniformsUtils=exports.UniformsLib=void 0,exports.Vector2=wr,exports.Vector3=Dr,exports.Vector4=Ar,exports.VectorKeyframeTrack=Vp,exports.Vertex=Ov,exports.VertexColors=void 0,exports.VideoTexture=Zh,exports.WebGLCubeRenderTarget=ha,exports.WebGLMultisampleRenderTarget=Rr,exports.WebGLRenderTarget=Lr,exports.WebGLRenderTargetCube=Kv,exports.WebGLRenderer=Jl,exports.WebGLUtils=jl,exports.WireframeGeometry=$h,exports.WireframeHelper=Zv,exports.WrapAroundEnding=void 0,exports.XHRLoader=Jv,exports.sRGBEncoding=exports.ZeroStencilOp=exports.ZeroSlopeEnding=exports.ZeroFactor=exports.ZeroCurvatureEnding=void 0,void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t});var e="113";exports.REVISION=e;var t={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};exports.MOUSE=t;var r={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};exports.TOUCH=r;var n=0;exports.CullFaceNone=n;var i=1;exports.CullFaceBack=i;var a=2;exports.CullFaceFront=a;var o=3;exports.CullFaceFrontBack=o;var s=0;exports.FrontFaceDirectionCW=s;var c=1;exports.FrontFaceDirectionCCW=c;var l=0;exports.BasicShadowMap=l;var h=1;exports.PCFShadowMap=h;var u=2;exports.PCFSoftShadowMap=u;var p=3;exports.VSMShadowMap=p;var d=0;exports.FrontSide=d;var f=1;exports.BackSide=f;var m=2;exports.DoubleSide=m;var v=1;exports.FlatShading=v;var g=2;exports.SmoothShading=g;var y=0;exports.NoColors=y;var x=1;exports.FaceColors=x;var b=2;exports.VertexColors=b;var _=0;exports.NoBlending=_;var w=1;exports.NormalBlending=w;var M=2;exports.AdditiveBlending=M;var S=3;exports.SubtractiveBlending=S;var T=4;exports.MultiplyBlending=T;var E=5;exports.CustomBlending=E;var A=100;exports.AddEquation=A;var L=101;exports.SubtractEquation=L;var R=102;exports.ReverseSubtractEquation=R;var C=103;exports.MinEquation=C;var P=104;exports.MaxEquation=P;var O=200;exports.ZeroFactor=O;var D=201;exports.OneFactor=D;var I=202;exports.SrcColorFactor=I;var N=203;exports.OneMinusSrcColorFactor=N;var F=204;exports.SrcAlphaFactor=F;var B=205;exports.OneMinusSrcAlphaFactor=B;var z=206;exports.DstAlphaFactor=z;var U=207;exports.OneMinusDstAlphaFactor=U;var G=208;exports.DstColorFactor=G;var H=209;exports.OneMinusDstColorFactor=H;var V=210;exports.SrcAlphaSaturateFactor=V;var k=0;exports.NeverDepth=k;var j=1;exports.AlwaysDepth=j;var W=2;exports.LessDepth=W;var q=3;exports.LessEqualDepth=q;var X=4;exports.EqualDepth=X;var Y=5;exports.GreaterEqualDepth=Y;var Z=6;exports.GreaterDepth=Z;var J=7;exports.NotEqualDepth=J;var Q=0;exports.MultiplyOperation=Q;var K=1;exports.MixOperation=K;var $=2;exports.AddOperation=$;var ee=0;exports.NoToneMapping=ee;var te=1;exports.LinearToneMapping=te;var re=2;exports.ReinhardToneMapping=re;var ne=3;exports.Uncharted2ToneMapping=ne;var ie=4;exports.CineonToneMapping=ie;var ae=5;exports.ACESFilmicToneMapping=ae;var oe=300;exports.UVMapping=oe;var se=301;exports.CubeReflectionMapping=se;var ce=302;exports.CubeRefractionMapping=ce;var le=303;exports.EquirectangularReflectionMapping=le;var he=304;exports.EquirectangularRefractionMapping=he;var ue=305;exports.SphericalReflectionMapping=ue;var pe=306;exports.CubeUVReflectionMapping=pe;var de=307;exports.CubeUVRefractionMapping=de;var fe=1e3;exports.RepeatWrapping=fe;var me=1001;exports.ClampToEdgeWrapping=me;var ve=1002;exports.MirroredRepeatWrapping=ve;var ge=1003;exports.NearestFilter=ge;var ye=1004;exports.NearestMipmapNearestFilter=ye;var xe=1004;exports.NearestMipMapNearestFilter=xe;var be=1005;exports.NearestMipmapLinearFilter=be;var _e=1005;exports.NearestMipMapLinearFilter=_e;var we=1006;exports.LinearFilter=we;var Me=1007;exports.LinearMipmapNearestFilter=Me;var Se=1007;exports.LinearMipMapNearestFilter=Se;var Te=1008;exports.LinearMipmapLinearFilter=Te;var Ee=1008;exports.LinearMipMapLinearFilter=Ee;var Ae=1009;exports.UnsignedByteType=Ae;var Le=1010;exports.ByteType=Le;var Re=1011;exports.ShortType=Re;var Ce=1012;exports.UnsignedShortType=Ce;var Pe=1013;exports.IntType=Pe;var Oe=1014;exports.UnsignedIntType=Oe;var De=1015;exports.FloatType=De;var Ie=1016;exports.HalfFloatType=Ie;var Ne=1017;exports.UnsignedShort4444Type=Ne;var Fe=1018;exports.UnsignedShort5551Type=Fe;var Be=1019;exports.UnsignedShort565Type=Be;var ze=1020;exports.UnsignedInt248Type=ze;var Ue=1021;exports.AlphaFormat=Ue;var Ge=1022;exports.RGBFormat=Ge;var He=1023;exports.RGBAFormat=He;var Ve=1024;exports.LuminanceFormat=Ve;var ke=1025;exports.LuminanceAlphaFormat=ke;var je=He;exports.RGBEFormat=je;var We=1026;exports.DepthFormat=We;var qe=1027;exports.DepthStencilFormat=qe;var Xe=1028;exports.RedFormat=Xe;var Ye=1029;exports.RedIntegerFormat=Ye;var Ze=1030;exports.RGFormat=Ze;var Je=1031;exports.RGIntegerFormat=Je;var Qe=1032;exports.RGBIntegerFormat=Qe;var Ke=1033;exports.RGBAIntegerFormat=Ke;var $e=33776;exports.RGB_S3TC_DXT1_Format=$e;var et=33777;exports.RGBA_S3TC_DXT1_Format=et;var tt=33778;exports.RGBA_S3TC_DXT3_Format=tt;var rt=33779;exports.RGBA_S3TC_DXT5_Format=rt;var nt=35840;exports.RGB_PVRTC_4BPPV1_Format=nt;var it=35841;exports.RGB_PVRTC_2BPPV1_Format=it;var at=35842;exports.RGBA_PVRTC_4BPPV1_Format=at;var ot=35843;exports.RGBA_PVRTC_2BPPV1_Format=ot;var st=36196;exports.RGB_ETC1_Format=st;var ct=37808;exports.RGBA_ASTC_4x4_Format=ct;var lt=37809;exports.RGBA_ASTC_5x4_Format=lt;var ht=37810;exports.RGBA_ASTC_5x5_Format=ht;var ut=37811;exports.RGBA_ASTC_6x5_Format=ut;var pt=37812;exports.RGBA_ASTC_6x6_Format=pt;var dt=37813;exports.RGBA_ASTC_8x5_Format=dt;var ft=37814;exports.RGBA_ASTC_8x6_Format=ft;var mt=37815;exports.RGBA_ASTC_8x8_Format=mt;var vt=37816;exports.RGBA_ASTC_10x5_Format=vt;var gt=37817;exports.RGBA_ASTC_10x6_Format=gt;var yt=37818;exports.RGBA_ASTC_10x8_Format=yt;var xt=37819;exports.RGBA_ASTC_10x10_Format=xt;var bt=37820;exports.RGBA_ASTC_12x10_Format=bt;var _t=37821;exports.RGBA_ASTC_12x12_Format=_t;var wt=2200;exports.LoopOnce=wt;var Mt=2201;exports.LoopRepeat=Mt;var St=2202;exports.LoopPingPong=St;var Tt=2300;exports.InterpolateDiscrete=Tt;var Et=2301;exports.InterpolateLinear=Et;var At=2302;exports.InterpolateSmooth=At;var Lt=2400;exports.ZeroCurvatureEnding=Lt;var Rt=2401;exports.ZeroSlopeEnding=Rt;var Ct=2402;exports.WrapAroundEnding=Ct;var Pt=0;exports.TrianglesDrawMode=Pt;var Ot=1;exports.TriangleStripDrawMode=Ot;var Dt=2;exports.TriangleFanDrawMode=Dt;var It=3e3;exports.LinearEncoding=It;var Nt=3001;exports.sRGBEncoding=Nt;var Ft=3007;exports.GammaEncoding=Ft;var Bt=3002;exports.RGBEEncoding=Bt;var zt=3003;exports.LogLuvEncoding=zt;var Ut=3004;exports.RGBM7Encoding=Ut;var Gt=3005;exports.RGBM16Encoding=Gt;var Ht=3006;exports.RGBDEncoding=Ht;var Vt=3200;exports.BasicDepthPacking=Vt;var kt=3201;exports.RGBADepthPacking=kt;var jt=0;exports.TangentSpaceNormalMap=jt;var Wt=1;exports.ObjectSpaceNormalMap=Wt;var qt=0;exports.ZeroStencilOp=qt;var Xt=7680;exports.KeepStencilOp=Xt;var Yt=7681;exports.ReplaceStencilOp=Yt;var Zt=7682;exports.IncrementStencilOp=Zt;var Jt=7683;exports.DecrementStencilOp=Jt;var Qt=34055;exports.IncrementWrapStencilOp=Qt;var Kt=34056;exports.DecrementWrapStencilOp=Kt;var $t=5386;exports.InvertStencilOp=$t;var er=512;exports.NeverStencilFunc=er;var tr=513;exports.LessStencilFunc=tr;var rr=514;exports.EqualStencilFunc=rr;var nr=515;exports.LessEqualStencilFunc=nr;var ir=516;exports.GreaterStencilFunc=ir;var ar=517;exports.NotEqualStencilFunc=ar;var or=518;exports.GreaterEqualStencilFunc=or;var sr=519;exports.AlwaysStencilFunc=sr;var cr=35044;exports.StaticDrawUsage=cr;var lr=35048;exports.DynamicDrawUsage=lr;var hr=35040;exports.StreamDrawUsage=hr;var ur=35045;exports.StaticReadUsage=ur;var pr=35049;exports.DynamicReadUsage=pr;var dr=35041;exports.StreamReadUsage=dr;var fr=35046;exports.StaticCopyUsage=fr;var mr=35050;exports.DynamicCopyUsage=mr;var vr=35042;function gr(){}exports.StreamCopyUsage=vr,Object.assign(gr.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),n=0,i=r.length;n<i;n++)r[n].call(this,e)}}}});for(var yr=[],xr=0;xr<256;xr++)yr[xr]=(xr<16?"0":"")+xr.toString(16);var br,_r={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(yr[255&e]+yr[e>>8&255]+yr[e>>16&255]+yr[e>>24&255]+"-"+yr[255&t]+yr[t>>8&255]+"-"+yr[t>>16&15|64]+yr[t>>24&255]+"-"+yr[63&r|128]+yr[r>>8&255]+"-"+yr[r>>16&255]+yr[r>>24&255]+yr[255&n]+yr[n>>8&255]+yr[n>>16&255]+yr[n>>24&255]).toUpperCase()},clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*_r.DEG2RAD},radToDeg:function(e){return e*_r.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,r,n,i){var a=Math.cos,o=Math.sin,s=a(r/2),c=o(r/2),l=a((t+n)/2),h=o((t+n)/2),u=a((t-n)/2),p=o((t-n)/2),d=a((n-t)/2),f=o((n-t)/2);"XYX"===i?e.set(s*h,c*u,c*p,s*l):"YZY"===i?e.set(c*p,s*h,c*u,s*l):"ZXZ"===i?e.set(c*u,c*p,s*h,s*l):"XZX"===i?e.set(s*h,c*f,c*d,s*l):"YXY"===i?e.set(c*d,s*h,c*f,s*l):"ZYZ"===i?e.set(c*f,c*d,s*h,s*l):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function wr(e,t){this.x=e||0,this.y=t||0}function Mr(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}exports.MathUtils=exports.Math=_r,Object.defineProperties(wr.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(wr.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*r-a*n+e.x,this.y=i*n+a*r+e.y,this}}),Object.assign(Mr.prototype,{isMatrix3:!0,set:function(e,t,r,n,i,a,o,s,c){var l=this.elements;return l[0]=e,l[1]=n,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=r,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[3],s=r[6],c=r[1],l=r[4],h=r[7],u=r[2],p=r[5],d=r[8],f=n[0],m=n[3],v=n[6],g=n[1],y=n[4],x=n[7],b=n[2],_=n[5],w=n[8];return i[0]=a*f+o*g+s*b,i[3]=a*m+o*y+s*_,i[6]=a*v+o*x+s*w,i[1]=c*f+l*g+h*b,i[4]=c*m+l*y+h*_,i[7]=c*v+l*x+h*w,i[2]=u*f+p*g+d*b,i[5]=u*m+p*y+d*_,i[8]=u*v+p*x+d*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*a*l-t*o*c-r*i*l+r*o*s+n*i*c-n*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],c=r[4],l=r[5],h=r[6],u=r[7],p=r[8],d=p*c-l*u,f=l*h-p*s,m=u*s-c*h,v=i*d+a*f+o*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return n[0]=d*y,n[1]=(o*u-p*a)*y,n[2]=(l*a-o*c)*y,n[3]=f*y,n[4]=(p*i-o*h)*y,n[5]=(o*s-l*i)*y,n[6]=m*y,n[7]=(a*h-u*i)*y,n[8]=(c*i-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,r,n,i,a,o){var s=Math.cos(i),c=Math.sin(i);this.set(r*s,r*c,-r*(s*a+c*o)+a+e,-n*c,n*s,-n*(-c*a+s*o)+o+t,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.elements,i=n[0],a=n[3],o=n[6],s=n[1],c=n[4],l=n[7];return n[0]=t*i+r*s,n[3]=t*a+r*c,n[6]=t*o+r*l,n[1]=-r*i+t*s,n[4]=-r*a+t*c,n[7]=-r*o+t*l,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var Sr={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===br&&(br=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),br.width=e.width,br.height=e.height;var r=br.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=br}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};exports.ImageUtils=Sr;var Tr=0;function Er(e,t,r,n,i,a,o,s,c,l){Object.defineProperty(this,"id",{value:Tr++}),this.uuid=_r.generateUUID(),this.name="",this.image=void 0!==e?e:Er.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Er.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:me,this.wrapT=void 0!==n?n:me,this.magFilter=void 0!==i?i:we,this.minFilter=void 0!==a?a:Te,this.anisotropy=void 0!==c?c:1,this.format=void 0!==o?o:He,this.internalFormat=null,this.type=void 0!==s?s:Ae,this.offset=new wr(0,0),this.repeat=new wr(1,1),this.center=new wr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:It,this.version=0,this.onUpdate=null}function Ar(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function Lr(e,t,r){this.width=e,this.height=t,this.scissor=new Ar(0,0,e,t),this.scissorTest=!1,this.viewport=new Ar(0,0,e,t),r=r||{},this.texture=new Er(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:we,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function Rr(e,t,r){Lr.call(this,e,t,r),this.samples=4}function Cr(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}Er.DEFAULT_IMAGE=void 0,Er.DEFAULT_MAPPING=oe,Er.prototype=Object.assign(Object.create(gr.prototype),{constructor:Er,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=_r.generateUUID()),!t&&void 0===e.images[n.uuid]){var i;if(Array.isArray(n)){i=[];for(var a=0,o=n.length;a<o;a++)i.push(Sr.getDataURL(n[a]))}else i=Sr.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:i}}r.image=n.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==oe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case fe:e.x=e.x-Math.floor(e.x);break;case me:e.x=e.x<0?0:1;break;case ve:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case fe:e.y=e.y-Math.floor(e.y);break;case me:e.y=e.y<0?0:1;break;case ve:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Er.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Ar.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Ar.prototype,{isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,a=e.elements,o=a[0],s=a[4],c=a[8],l=a[1],h=a[5],u=a[9],p=a[2],d=a[6],f=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-p)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+p)<.1&&Math.abs(u+d)<.1&&Math.abs(o+h+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,v=(h+1)/2,g=(f+1)/2,y=(s+l)/4,x=(c+p)/4,b=(u+d)/4;return m>v&&m>g?m<.01?(r=0,n=.707106781,i=.707106781):(n=y/(r=Math.sqrt(m)),i=x/r):v>g?v<.01?(r=.707106781,n=0,i=.707106781):(r=y/(n=Math.sqrt(v)),i=b/n):g<.01?(r=.707106781,n=.707106781,i=0):(r=x/(i=Math.sqrt(g)),n=b/i),this.set(r,n,i,t),this}var _=Math.sqrt((d-u)*(d-u)+(c-p)*(c-p)+(l-s)*(l-s));return Math.abs(_)<.001&&(_=1),this.x=(d-u)/_,this.y=(c-p)/_,this.z=(l-s)/_,this.w=Math.acos((o+h+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Lr.prototype=Object.assign(Object.create(gr.prototype),{constructor:Lr,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Rr.prototype=Object.assign(Object.create(Lr.prototype),{constructor:Rr,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Lr.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(Cr,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,a,o){var s=r[n+0],c=r[n+1],l=r[n+2],h=r[n+3],u=i[a+0],p=i[a+1],d=i[a+2],f=i[a+3];if(h!==f||s!==u||c!==p||l!==d){var m=1-o,v=s*u+c*p+l*d+h*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,v*g);m=Math.sin(m*b)/x,o=Math.sin(o*b)/x}var _=o*g;if(s=s*m+u*_,c=c*m+p*_,l=l*m+d*_,h=h*m+f*_,m===1-o){var w=1/Math.sqrt(s*s+c*c+l*l+h*h);s*=w,c*=w,l*=w,h*=w}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=h}}),Object.defineProperties(Cr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(Cr.prototype,{isQuaternion:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z,a=e.order,o=Math.cos,s=Math.sin,c=o(r/2),l=o(n/2),h=o(i/2),u=s(r/2),p=s(n/2),d=s(i/2);return"XYZ"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h-u*p*d):"YXZ"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h+u*p*d):"ZXY"===a?(this._x=u*l*h-c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h-u*p*d):"ZYX"===a?(this._x=u*l*h-c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h+u*p*d):"YZX"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h-u*p*d):"XZY"===a&&(this._x=u*l*h-c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h+u*p*d),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],c=r[9],l=r[2],h=r[6],u=r[10],p=n+s+u;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(h-c)*t,this._y=(a-l)*t,this._z=(o-i)*t):n>s&&n>u?(t=2*Math.sqrt(1+n-s-u),this._w=(h-c)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+l)/t):s>u?(t=2*Math.sqrt(1+s-n-u),this._w=(a-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(c+h)/t):(t=2*Math.sqrt(1+u-n-s),this._w=(o-i)/t,this._x=(a+l)/t,this._y=(c+h)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(_r.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var r=this.angleTo(e);if(0===r)return this;var n=Math.min(1,t/r);return this.slerp(e,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,a=e._w,o=t._x,s=t._y,c=t._z,l=t._w;return this._x=r*l+a*o+n*c-i*s,this._y=n*l+a*s+i*o-r*c,this._z=i*l+a*c+r*s-n*o,this._w=a*l-r*o-n*s-i*c,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var c=1-t;return this._w=c*a+t*this._w,this._x=c*r+t*this._x,this._y=c*n+t*this._y,this._z=c*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),h=Math.atan2(l,o),u=Math.sin((1-t)*h)/l,p=Math.sin(t*h)/l;return this._w=a*u+this._w*p,this._x=r*u+this._x*p,this._y=n*u+this._y*p,this._z=i*u+this._z*p,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Pr=new Dr,Or=new Cr;function Dr(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}Object.assign(Dr.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Or.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Or.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,a=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*a,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*a,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*a,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*n-o*r,l=s*r+o*t-i*n,h=s*n+i*r-a*t,u=-i*t-a*r-o*n;return this.x=c*s+u*-i+l*-o-h*-a,this.y=l*s+u*-a+h*-i-c*-o,this.z=h*s+u*-o+c*-a-l*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)},projectOnPlane:function(e){return Pr.copy(this).projectOnVector(e),this.sub(Pr)},reflect:function(e){return this.sub(Pr.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var r=this.dot(e)/t;return Math.acos(_r.clamp(r,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,r){var n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var Ir=new Dr,Nr=new Hr,Fr=new Dr(0,0,0),Br=new Dr(1,1,1),zr=new Dr,Ur=new Dr,Gr=new Dr;function Hr(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Hr.prototype,{isMatrix4:!0,set:function(e,t,r,n,i,a,o,s,c,l,h,u,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=n,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=c,v[6]=l,v[10]=h,v[14]=u,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Hr).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,r=e.elements,n=1/Ir.setFromMatrixColumn(e,0).length(),i=1/Ir.setFromMatrixColumn(e,1).length(),a=1/Ir.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),c=Math.sin(n),l=Math.cos(i),h=Math.sin(i);if("XYZ"===e.order){var u=a*l,p=a*h,d=o*l,f=o*h;t[0]=s*l,t[4]=-s*h,t[8]=c,t[1]=p+d*c,t[5]=u-f*c,t[9]=-o*s,t[2]=f-u*c,t[6]=d+p*c,t[10]=a*s}else if("YXZ"===e.order){var m=s*l,v=s*h,g=c*l,y=c*h;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*c,t[1]=a*h,t[5]=a*l,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*l,v=s*h,g=c*l,y=c*h;t[0]=m-y*o,t[4]=-a*h,t[8]=g+v*o,t[1]=v+g*o,t[5]=a*l,t[9]=y-m*o,t[2]=-a*c,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){u=a*l,p=a*h,d=o*l,f=o*h;t[0]=s*l,t[4]=d*c-p,t[8]=u*c+f,t[1]=s*h,t[5]=f*c+u,t[9]=p*c-d,t[2]=-c,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var x=a*s,b=a*c,_=o*s,w=o*c;t[0]=s*l,t[4]=w-x*h,t[8]=_*h+b,t[1]=h,t[5]=a*l,t[9]=-o*l,t[2]=-c*l,t[6]=b*h+_,t[10]=x-w*h}else if("XZY"===e.order){x=a*s,b=a*c,_=o*s,w=o*c;t[0]=s*l,t[4]=-h,t[8]=c*l,t[1]=x*h+w,t[5]=a*l,t[9]=b*h-_,t[2]=_*h-b,t[6]=o*l,t[10]=w*h+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Fr,e,Br)},lookAt:function(e,t,r){var n=this.elements;return Gr.subVectors(e,t),0===Gr.lengthSq()&&(Gr.z=1),Gr.normalize(),zr.crossVectors(r,Gr),0===zr.lengthSq()&&(1===Math.abs(r.z)?Gr.x+=1e-4:Gr.z+=1e-4,Gr.normalize(),zr.crossVectors(r,Gr)),zr.normalize(),Ur.crossVectors(Gr,zr),n[0]=zr.x,n[4]=Ur.x,n[8]=Gr.x,n[1]=zr.y,n[5]=Ur.y,n[9]=Gr.y,n[2]=zr.z,n[6]=Ur.z,n[10]=Gr.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[4],s=r[8],c=r[12],l=r[1],h=r[5],u=r[9],p=r[13],d=r[2],f=r[6],m=r[10],v=r[14],g=r[3],y=r[7],x=r[11],b=r[15],_=n[0],w=n[4],M=n[8],S=n[12],T=n[1],E=n[5],A=n[9],L=n[13],R=n[2],C=n[6],P=n[10],O=n[14],D=n[3],I=n[7],N=n[11],F=n[15];return i[0]=a*_+o*T+s*R+c*D,i[4]=a*w+o*E+s*C+c*I,i[8]=a*M+o*A+s*P+c*N,i[12]=a*S+o*L+s*O+c*F,i[1]=l*_+h*T+u*R+p*D,i[5]=l*w+h*E+u*C+p*I,i[9]=l*M+h*A+u*P+p*N,i[13]=l*S+h*L+u*O+p*F,i[2]=d*_+f*T+m*R+v*D,i[6]=d*w+f*E+m*C+v*I,i[10]=d*M+f*A+m*P+v*N,i[14]=d*S+f*L+m*O+v*F,i[3]=g*_+y*T+x*R+b*D,i[7]=g*w+y*E+x*C+b*I,i[11]=g*M+y*A+x*P+b*N,i[15]=g*S+y*L+x*O+b*F,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],a=e[1],o=e[5],s=e[9],c=e[13],l=e[2],h=e[6],u=e[10],p=e[14];return e[3]*(+i*s*h-n*c*h-i*o*u+r*c*u+n*o*p-r*s*p)+e[7]*(+t*s*p-t*c*u+i*a*u-n*a*p+n*c*l-i*s*l)+e[11]*(+t*c*h-t*o*p-i*a*h+r*a*p+i*o*l-r*c*l)+e[15]*(-n*o*l-t*s*h+t*o*u+n*a*h-r*a*u+r*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,r){var n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],h=n[6],u=n[7],p=n[8],d=n[9],f=n[10],m=n[11],v=n[12],g=n[13],y=n[14],x=n[15],b=d*y*u-g*f*u+g*h*m-l*y*m-d*h*x+l*f*x,_=v*f*u-p*y*u-v*h*m+c*y*m+p*h*x-c*f*x,w=p*g*u-v*d*u+v*l*m-c*g*m-p*l*x+c*d*x,M=v*d*h-p*g*h-v*l*f+c*g*f+p*l*y-c*d*y,S=i*b+a*_+o*w+s*M;if(0===S){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var E=1/S;return r[0]=b*E,r[1]=(g*f*s-d*y*s-g*o*m+a*y*m+d*o*x-a*f*x)*E,r[2]=(l*y*s-g*h*s+g*o*u-a*y*u-l*o*x+a*h*x)*E,r[3]=(d*h*s-l*f*s-d*o*u+a*f*u+l*o*m-a*h*m)*E,r[4]=_*E,r[5]=(p*y*s-v*f*s+v*o*m-i*y*m-p*o*x+i*f*x)*E,r[6]=(v*h*s-c*y*s-v*o*u+i*y*u+c*o*x-i*h*x)*E,r[7]=(c*f*s-p*h*s+p*o*u-i*f*u-c*o*m+i*h*m)*E,r[8]=w*E,r[9]=(v*d*s-p*g*s-v*a*m+i*g*m+p*a*x-i*d*x)*E,r[10]=(c*g*s-v*l*s+v*a*u-i*g*u-c*a*x+i*l*x)*E,r[11]=(p*l*s-c*d*s-p*a*u+i*d*u+c*a*m-i*l*m)*E,r[12]=M*E,r[13]=(p*g*o-v*d*o+v*a*f-i*g*f-p*a*y+i*d*y)*E,r[14]=(v*l*o-c*g*o-v*a*h+i*g*h+c*a*y-i*l*y)*E,r[15]=(c*d*o-p*l*o+p*a*h-i*d*h-c*a*f+i*l*f)*E,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,a=e.x,o=e.y,s=e.z,c=i*a,l=i*o;return this.set(c*a+r,c*o-n*s,c*s+n*o,0,c*o+n*s,l*o+r,l*s-n*a,0,c*s-n*o,l*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){var n=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,c=i+i,l=a+a,h=o+o,u=i*c,p=i*l,d=i*h,f=a*l,m=a*h,v=o*h,g=s*c,y=s*l,x=s*h,b=r.x,_=r.y,w=r.z;return n[0]=(1-(f+v))*b,n[1]=(p+x)*b,n[2]=(d-y)*b,n[3]=0,n[4]=(p-x)*_,n[5]=(1-(u+v))*_,n[6]=(m+g)*_,n[7]=0,n[8]=(d+y)*w,n[9]=(m-g)*w,n[10]=(1-(u+f))*w,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:function(e,t,r){var n=this.elements,i=Ir.set(n[0],n[1],n[2]).length(),a=Ir.set(n[4],n[5],n[6]).length(),o=Ir.set(n[8],n[9],n[10]).length();this.determinant()<0&&(i=-i),e.x=n[12],e.y=n[13],e.z=n[14],Nr.copy(this);var s=1/i,c=1/a,l=1/o;return Nr.elements[0]*=s,Nr.elements[1]*=s,Nr.elements[2]*=s,Nr.elements[4]*=c,Nr.elements[5]*=c,Nr.elements[6]*=c,Nr.elements[8]*=l,Nr.elements[9]*=l,Nr.elements[10]*=l,t.setFromRotationMatrix(Nr),r.x=i,r.y=a,r.z=o,this},makePerspective:function(e,t,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),c=2*i/(r-n),l=(t+e)/(t-e),h=(r+n)/(r-n),u=-(a+i)/(a-i),p=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,r,n,i,a){var o=this.elements,s=1/(t-e),c=1/(r-n),l=1/(a-i),h=(t+e)*s,u=(r+n)*c,p=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}});var Vr=new Hr,kr=new Cr;function jr(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||jr.DefaultOrder}function Wr(){this.mask=1}jr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],jr.DefaultOrder="XYZ",Object.defineProperties(jr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(jr.prototype,{isEuler:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=_r.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],c=i[1],l=i[5],h=i[9],u=i[2],p=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-u,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===t?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,r){return Vr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Vr,t,r)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return kr.setFromEuler(this),this.setFromQuaternion(kr,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Dr(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Wr.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var qr=0,Xr=new Dr,Yr=new Cr,Zr=new Hr,Jr=new Dr,Qr=new Dr,Kr=new Dr,$r=new Cr,en=new Dr(1,0,0),tn=new Dr(0,1,0),rn=new Dr(0,0,1),nn={type:"added"},an={type:"removed"};function on(){Object.defineProperty(this,"id",{value:qr++}),this.uuid=_r.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=on.DefaultUp.clone();var e=new Dr,t=new jr,r=new Cr,n=new Dr(1,1,1);t._onChange(function(){r.setFromEuler(t,!1)}),r._onChange(function(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Hr},normalMatrix:{value:new Mr}}),this.matrix=new Hr,this.matrixWorld=new Hr,this.matrixAutoUpdate=on.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Wr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function sn(){on.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}on.DefaultUp=new Dr(0,1,0),on.DefaultMatrixAutoUpdate=!0,on.prototype=Object.assign(Object.create(gr.prototype),{constructor:on,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Yr.setFromAxisAngle(e,t),this.quaternion.multiply(Yr),this},rotateOnWorldAxis:function(e,t){return Yr.setFromAxisAngle(e,t),this.quaternion.premultiply(Yr),this},rotateX:function(e){return this.rotateOnAxis(en,e)},rotateY:function(e){return this.rotateOnAxis(tn,e)},rotateZ:function(e){return this.rotateOnAxis(rn,e)},translateOnAxis:function(e,t){return Xr.copy(e).applyQuaternion(this.quaternion),this.position.add(Xr.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(en,e)},translateY:function(e){return this.translateOnAxis(tn,e)},translateZ:function(e){return this.translateOnAxis(rn,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Zr.getInverse(this.matrixWorld))},lookAt:function(e,t,r){e.isVector3?Jr.copy(e):Jr.set(e,t,r);var n=this.parent;this.updateWorldMatrix(!0,!1),Qr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Zr.lookAt(Qr,Jr,this.up):Zr.lookAt(Jr,Qr,this.up),this.quaternion.setFromRotationMatrix(Zr),n&&(Zr.extractRotation(n.matrixWorld),Yr.setFromRotationMatrix(Zr),this.quaternion.premultiply(Yr.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(nn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(an)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Zr.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Zr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Zr),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Dr),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Cr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Qr,e,Kr),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Dr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Qr,$r,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Dr),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var n=this.children,i=0,a=n.length;i<a;i++)n[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function i(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,c=o.length;s<c;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var h=[];for(s=0,c=this.material.length;s<c;s++)h.push(i(e.materials,this.material[s]));n.material=h}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(e).object)}if(t){var u=m(e.geometries),p=m(e.materials),d=m(e.textures),f=m(e.images);o=m(e.shapes);u.length>0&&(r.geometries=u),p.length>0&&(r.materials=p),d.length>0&&(r.textures=d),f.length>0&&(r.images=f),o.length>0&&(r.shapes=o)}return r.object=n,r;function m(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}}),sn.prototype=Object.assign(Object.create(on.prototype),{constructor:sn,isScene:!0,copy:function(e,t){return on.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=on.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var cn=[new Dr,new Dr,new Dr,new Dr,new Dr,new Dr,new Dr,new Dr],ln=new Dr,hn=new _n,un=new Dr,pn=new Dr,dn=new Dr,fn=new Dr,mn=new Dr,vn=new Dr,gn=new Dr,yn=new Dr,xn=new Dr,bn=new Dr;function _n(e,t){this.min=void 0!==e?e:new Dr(1/0,1/0,1/0),this.max=void 0!==t?t:new Dr(-1/0,-1/0,-1/0)}function wn(e,t,r,n,i){var a,o;for(a=0,o=e.length-3;a<=o;a+=3){bn.fromArray(e,a);var s=i.x*Math.abs(bn.x)+i.y*Math.abs(bn.y)+i.z*Math.abs(bn.z),c=t.dot(bn),l=r.dot(bn),h=n.dot(bn);if(Math.max(-Math.max(c,l,h),Math.min(c,l,h))>s)return!1}return!0}Object.assign(_n.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],h=e[s+1],u=e[s+2];l<t&&(t=l),h<r&&(r=h),u<n&&(n=u),l>i&&(i=l),h>a&&(a=h),u>o&&(o=u)}return this.min.set(t,r,n),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),h=e.getY(s),u=e.getZ(s);l<t&&(t=l),h<r&&(r=h),u<n&&(n=u),l>i&&(i=l),h>a&&(a=h),u>o&&(o=u)}return this.min.set(t,r,n),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var r=ln.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Dr),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Dr),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),hn.copy(t.boundingBox),hn.applyMatrix4(e.matrixWorld),this.expandByPoint(hn.min),this.expandByPoint(hn.max));for(var r=e.children,n=0,i=r.length;n<i;n++)this.expandByObject(r[n]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Dr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,ln),ln.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(gn),yn.subVectors(this.max,gn),un.subVectors(e.a,gn),pn.subVectors(e.b,gn),dn.subVectors(e.c,gn),fn.subVectors(pn,un),mn.subVectors(dn,pn),vn.subVectors(un,dn);var t=[0,-fn.z,fn.y,0,-mn.z,mn.y,0,-vn.z,vn.y,fn.z,0,-fn.x,mn.z,0,-mn.x,vn.z,0,-vn.x,-fn.y,fn.x,0,-mn.y,mn.x,0,-vn.y,vn.x,0];return!!wn(t,un,pn,dn,yn)&&(!!wn(t=[1,0,0,0,1,0,0,0,1],un,pn,dn,yn)&&(xn.crossVectors(fn,mn),wn(t=[xn.x,xn.y,xn.z],un,pn,dn,yn)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Dr),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return ln.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(ln).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(cn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),cn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),cn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),cn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),cn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),cn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),cn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),cn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(cn),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Mn=new _n;function Sn(e,t){this.center=void 0!==e?e:new Dr,this.radius=void 0!==t?t:0}Object.assign(Sn.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var r=this.center;void 0!==t?r.copy(t):Mn.setFromPoints(e).getCenter(r);for(var n=0,i=0,a=e.length;i<a;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Dr),t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new _n),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Tn=new Dr,En=new Dr,An=new Dr,Ln=new Dr,Rn=new Dr,Cn=new Dr,Pn=new Dr;function On(e,t){this.origin=void 0!==e?e:new Dr,this.direction=void 0!==t?t:new Dr(0,0,-1)}Object.assign(On.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Dr),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Tn)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Dr),t.subVectors(e,this.origin);var r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=Tn.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tn.copy(this.direction).multiplyScalar(t).add(this.origin),Tn.distanceToSquared(e))},distanceSqToSegment:function(e,t,r,n){En.copy(e).add(t).multiplyScalar(.5),An.copy(t).sub(e).normalize(),Ln.copy(this.origin).sub(En);var i,a,o,s,c=.5*e.distanceTo(t),l=-this.direction.dot(An),h=Ln.dot(this.direction),u=-Ln.dot(An),p=Ln.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*h-u,s=c*d,(i=l*u-h)>=0)if(a>=-s)if(a<=s){var f=1/d;o=(i*=f)*(i+l*(a*=f)+2*h)+a*(l*i+a+2*u)+p}else a=c,o=-(i=Math.max(0,-(l*a+h)))*i+a*(a+2*u)+p;else a=-c,o=-(i=Math.max(0,-(l*a+h)))*i+a*(a+2*u)+p;else a<=-s?o=-(i=Math.max(0,-(-l*c+h)))*i+(a=i>0?-c:Math.min(Math.max(-c,-u),c))*(a+2*u)+p:a<=s?(i=0,o=(a=Math.min(Math.max(-c,-u),c))*(a+2*u)+p):o=-(i=Math.max(0,-(l*c+h)))*i+(a=i>0?c:Math.min(Math.max(-c,-u),c))*(a+2*u)+p;else a=l>0?-c:c,o=-(i=Math.max(0,-(l*a+h)))*i+a*(a+2*u)+p;return r&&r.copy(this.direction).multiplyScalar(i).add(this.origin),n&&n.copy(An).multiplyScalar(a).add(En),o},intersectSphere:function(e,t){Tn.subVectors(e.center,this.origin);var r=Tn.dot(this.direction),n=Tn.dot(Tn)-r*r,i=e.radius*e.radius;if(n>i)return null;var a=Math.sqrt(i-n),o=r-a,s=r+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,a,o,s,c=1/this.direction.x,l=1/this.direction.y,h=1/this.direction.z,u=this.origin;return c>=0?(r=(e.min.x-u.x)*c,n=(e.max.x-u.x)*c):(r=(e.max.x-u.x)*c,n=(e.min.x-u.x)*c),l>=0?(i=(e.min.y-u.y)*l,a=(e.max.y-u.y)*l):(i=(e.max.y-u.y)*l,a=(e.min.y-u.y)*l),r>a||i>n?null:((i>r||r!=r)&&(r=i),(a<n||n!=n)&&(n=a),h>=0?(o=(e.min.z-u.z)*h,s=(e.max.z-u.z)*h):(o=(e.max.z-u.z)*h,s=(e.min.z-u.z)*h),r>s||o>n?null:((o>r||r!=r)&&(r=o),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Tn)},intersectTriangle:function(e,t,r,n,i){Rn.subVectors(t,e),Cn.subVectors(r,e),Pn.crossVectors(Rn,Cn);var a,o=this.direction.dot(Pn);if(o>0){if(n)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ln.subVectors(this.origin,e);var s=a*this.direction.dot(Cn.crossVectors(Ln,Cn));if(s<0)return null;var c=a*this.direction.dot(Rn.cross(Ln));if(c<0)return null;if(s+c>o)return null;var l=-a*Ln.dot(Pn);return l<0?null:this.at(l/o,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Dn=new Dr,In=new Dr,Nn=new Mr;function Fn(e,t){this.normal=void 0!==e?e:new Dr(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Fn.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,r){var n=Dn.subVectors(r,t).cross(In.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Dr),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Dr);var r=e.delta(Dn),n=this.normal.dot(r);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/n;return i<0||i>1?void 0:t.copy(r).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Dr),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var r=t||Nn.getNormalMatrix(e),n=this.coplanarPoint(Dn).applyMatrix4(e),i=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Bn=new Dr,zn=new Dr,Un=new Dr,Gn=new Dr,Hn=new Dr,Vn=new Dr,kn=new Dr,jn=new Dr,Wn=new Dr,qn=new Dr;function Xn(e,t,r){this.a=void 0!==e?e:new Dr,this.b=void 0!==t?t:new Dr,this.c=void 0!==r?r:new Dr}Object.assign(Xn,{getNormal:function(e,t,r,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new Dr),n.subVectors(r,t),Bn.subVectors(e,t),n.cross(Bn);var i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)},getBarycoord:function(e,t,r,n,i){Bn.subVectors(n,t),zn.subVectors(r,t),Un.subVectors(e,t);var a=Bn.dot(Bn),o=Bn.dot(zn),s=Bn.dot(Un),c=zn.dot(zn),l=zn.dot(Un),h=a*c-o*o;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Dr),0===h)return i.set(-2,-1,-1);var u=1/h,p=(c*s-o*l)*u,d=(a*l-o*s)*u;return i.set(1-p-d,d,p)},containsPoint:function(e,t,r,n){return Xn.getBarycoord(e,t,r,n,Gn),Gn.x>=0&&Gn.y>=0&&Gn.x+Gn.y<=1},getUV:function(e,t,r,n,i,a,o,s){return this.getBarycoord(e,t,r,n,Gn),s.set(0,0),s.addScaledVector(i,Gn.x),s.addScaledVector(a,Gn.y),s.addScaledVector(o,Gn.z),s},isFrontFacing:function(e,t,r,n){return Bn.subVectors(r,t),zn.subVectors(e,t),Bn.cross(zn).dot(n)<0}}),Object.assign(Xn.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Bn.subVectors(this.c,this.b),zn.subVectors(this.a,this.b),.5*Bn.cross(zn).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Dr),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Xn.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Fn),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Xn.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,r,n,i){return Xn.getUV(e,this.a,this.b,this.c,t,r,n,i)},containsPoint:function(e){return Xn.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Xn.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Dr);var r,n,i=this.a,a=this.b,o=this.c;Hn.subVectors(a,i),Vn.subVectors(o,i),jn.subVectors(e,i);var s=Hn.dot(jn),c=Vn.dot(jn);if(s<=0&&c<=0)return t.copy(i);Wn.subVectors(e,a);var l=Hn.dot(Wn),h=Vn.dot(Wn);if(l>=0&&h<=l)return t.copy(a);var u=s*h-l*c;if(u<=0&&s>=0&&l<=0)return r=s/(s-l),t.copy(i).addScaledVector(Hn,r);qn.subVectors(e,o);var p=Hn.dot(qn),d=Vn.dot(qn);if(d>=0&&p<=d)return t.copy(o);var f=p*c-s*d;if(f<=0&&c>=0&&d<=0)return n=c/(c-d),t.copy(i).addScaledVector(Vn,n);var m=l*d-p*h;if(m<=0&&h-l>=0&&p-d>=0)return kn.subVectors(o,a),n=(h-l)/(h-l+(p-d)),t.copy(a).addScaledVector(kn,n);var v=1/(m+f+u);return r=f*v,n=u*v,t.copy(i).addScaledVector(Hn,r).addScaledVector(Vn,n)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Yn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zn={h:0,s:0,l:0},Jn={h:0,s:0,l:0};function Qn(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function Kn(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}function $n(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ei(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function ti(e,t,r,n,i,a){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new Dr,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new Qn,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}Object.assign(Qn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(e,t,r){if(e=_r.euclideanModulo(e,1),t=_r.clamp(t,0,1),r=_r.clamp(r,0,1),0===t)this.r=this.g=this.b=r;else{var n=r<=.5?r*(1+t):r+t-r*t,i=2*r-n;this.r=Kn(i,n,e+1/3),this.g=Kn(i,n,e),this.b=Kn(i,n,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(o,s,c)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=r[1],h=l.length;if(3===h)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=Yn[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=$n(e.r),this.g=$n(e.g),this.b=$n(e.b),this},copyLinearToSRGB:function(e){return this.r=ei(e.r),this.g=ei(e.g),this.b=ei(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,r,n=this.r,i=this.g,a=this.b,o=Math.max(n,i,a),s=Math.min(n,i,a),c=(s+o)/2;if(s===o)t=0,r=0;else{var l=o-s;switch(r=c<=.5?l/(o+s):l/(2-o-s),o){case n:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-n)/l+2;break;case a:t=(n-i)/l+4}t/=6}return e.h=t,e.s=r,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){return this.getHSL(Zn),Zn.h+=e,Zn.s+=t,Zn.l+=r,this.setHSL(Zn.h,Zn.s,Zn.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Zn),e.getHSL(Jn);var r=_r.lerp(Zn.h,Jn.h,t),n=_r.lerp(Zn.s,Jn.s,t),i=_r.lerp(Zn.l,Jn.l,t);return this.setHSL(r,n,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Qn.NAMES=Yn,Object.assign(ti.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var ri=0;function ni(){Object.defineProperty(this,"id",{value:ri++}),this.uuid=_r.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=w,this.side=d,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=y,this.opacity=1,this.transparent=!1,this.blendSrc=F,this.blendDst=B,this.blendEquation=A,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=q,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Xt,this.stencilZFail=Xt,this.stencilZPass=Xt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function ii(e){ni.call(this),this.type="MeshBasicMaterial",this.color=new Qn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}ni.prototype=Object.assign(Object.create(gr.prototype),{constructor:ni,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r)if("shading"!==t){var n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===v;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==w&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==d&&(r.side=this.side),this.vertexColors!==y&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){var i=n(e.textures),a=n(e.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ni.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),ii.prototype=Object.create(ni.prototype),ii.prototype.constructor=ii,ii.prototype.isMeshBasicMaterial=!0,ii.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var ai=new Dr;function oi(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=cr,this.updateRange={offset:0,count:-1},this.version=0}function si(e,t,r){oi.call(this,new Int8Array(e),t,r)}function ci(e,t,r){oi.call(this,new Uint8Array(e),t,r)}function li(e,t,r){oi.call(this,new Uint8ClampedArray(e),t,r)}function hi(e,t,r){oi.call(this,new Int16Array(e),t,r)}function ui(e,t,r){oi.call(this,new Uint16Array(e),t,r)}function pi(e,t,r){oi.call(this,new Int32Array(e),t,r)}function di(e,t,r){oi.call(this,new Uint32Array(e),t,r)}function fi(e,t,r){oi.call(this,new Float32Array(e),t,r)}function mi(e,t,r){oi.call(this,new Float64Array(e),t,r)}function vi(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function gi(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}Object.defineProperty(oi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(oi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new Qn),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),a=new wr),t[r++]=a.x,t[r++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),a=new Dr),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new Ar),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this},applyMatrix3:function(e){for(var t=0,r=this.count;t<r;t++)ai.x=this.getX(t),ai.y=this.getY(t),ai.z=this.getZ(t),ai.applyMatrix3(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this},applyMatrix4:function(e){for(var t=0,r=this.count;t<r;t++)ai.x=this.getX(t),ai.y=this.getY(t),ai.z=this.getZ(t),ai.applyMatrix4(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this},applyNormalMatrix:function(e){for(var t=0,r=this.count;t<r;t++)ai.x=this.getX(t),ai.y=this.getY(t),ai.z=this.getZ(t),ai.applyNormalMatrix(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this},transformDirection:function(e){for(var t=0,r=this.count;t<r;t++)ai.x=this.getX(t),ai.y=this.getY(t),ai.z=this.getZ(t),ai.transformDirection(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),si.prototype=Object.create(oi.prototype),si.prototype.constructor=si,ci.prototype=Object.create(oi.prototype),ci.prototype.constructor=ci,li.prototype=Object.create(oi.prototype),li.prototype.constructor=li,hi.prototype=Object.create(oi.prototype),hi.prototype.constructor=hi,ui.prototype=Object.create(oi.prototype),ui.prototype.constructor=ui,pi.prototype=Object.create(oi.prototype),pi.prototype.constructor=pi,di.prototype=Object.create(oi.prototype),di.prototype.constructor=di,fi.prototype=Object.create(oi.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(oi.prototype),mi.prototype.constructor=mi,Object.assign(vi.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,r.push(t)),t={start:3*a,materialIndex:n})}void 0!==t&&(t.count=3*a-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,n=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]={name:s[l].name,data:[]};this.morphTargets.position=t}var h,u=e.morphNormals,p=u.length;if(p>0){h=[];for(l=0;l<p;l++)h[l]={name:u[l].name,data:[]};this.morphTargets.normal=h}var d=e.skinIndices,f=e.skinWeights,m=d.length===n.length,v=f.length===n.length;n.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(l=0;l<r.length;l++){var g=r[l];this.vertices.push(n[g.a],n[g.b],n[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var b,_=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===a)void 0!==(b=i[0][l])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new wr,new wr,new wr));if(!0===o)void 0!==(b=i[1][l])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new wr,new wr,new wr));for(var M=0;M<c;M++){var S=s[M].vertices;t[M].data.push(S[g.a],S[g.b],S[g.c])}for(M=0;M<p;M++){var T=u[M].vertexNormals[l];h[M].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var yi=1,xi=new Hr,bi=new on,_i=new Dr,wi=new _n,Mi=new _n,Si=new Dr;function Ti(){Object.defineProperty(this,"id",{value:yi+=2}),this.uuid=_r.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ti.prototype=Object.assign(Object.create(gr.prototype),{constructor:Ti,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(gi(e)>65535?di:ui)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var n=(new Mr).getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return xi.makeRotationX(e),this.applyMatrix4(xi),this},rotateY:function(e){return xi.makeRotationY(e),this.applyMatrix4(xi),this},rotateZ:function(e){return xi.makeRotationZ(e),this.applyMatrix4(xi),this},translate:function(e,t,r){return xi.makeTranslation(e,t,r),this.applyMatrix4(xi),this},scale:function(e,t,r){return xi.makeScale(e,t,r),this.applyMatrix4(xi),this},lookAt:function(e){return bi.lookAt(e),bi.updateMatrix(),this.applyMatrix4(bi.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_i).negate(),this.translate(_i.x,_i.y,_i.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new fi(3*t.vertices.length,3),n=new fi(3*t.colors.length,3);if(this.setAttribute("position",r.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new fi(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new fi(t,3)),this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new vi).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new oi(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.setAttribute("normal",new oi(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.setAttribute("color",new oi(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new oi(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new oi(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[o],l=0,h=c.length;l<h;l++){var u=c[l],p=new fi(3*u.data.length,3);p.name=u.name,s.push(p.copyVector3sArray(u.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var d=new fi(4*e.skinIndices.length,4);this.setAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new fi(4*e.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new _n);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var r=0,n=t.length;r<n;r++){var i=t[r];wi.setFromBufferAttribute(i),this.morphTargetsRelative?(Si.addVectors(this.boundingBox.min,wi.min),this.boundingBox.expandByPoint(Si),Si.addVectors(this.boundingBox.max,wi.max),this.boundingBox.expandByPoint(Si)):(this.boundingBox.expandByPoint(wi.min),this.boundingBox.expandByPoint(wi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Sn);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var r=this.boundingSphere.center;if(wi.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var a=t[n];Mi.setFromBufferAttribute(a),this.morphTargetsRelative?(Si.addVectors(wi.min,Mi.min),wi.expandByPoint(Si),Si.addVectors(wi.max,Mi.max),wi.expandByPoint(Si)):(wi.expandByPoint(Mi.min),wi.expandByPoint(Mi.max))}wi.getCenter(r);var o=0;for(n=0,i=e.count;n<i;n++)Si.fromBufferAttribute(e,n),o=Math.max(o,r.distanceToSquared(Si));if(t)for(n=0,i=t.length;n<i;n++){a=t[n];for(var s=this.morphTargetsRelative,c=0,l=a.count;c<l;c++)Si.fromBufferAttribute(a,c),s&&(_i.fromBufferAttribute(e,c),Si.add(_i)),o=Math.max(o,r.distanceToSquared(Si))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var r=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new oi(new Float32Array(r.length),3));else for(var n=t.normal.array,i=0,a=n.length;i<a;i++)n[i]=0;var o,s,c,l=t.normal.array,h=new Dr,u=new Dr,p=new Dr,d=new Dr,f=new Dr;if(e){var m=e.array;for(i=0,a=e.count;i<a;i+=3)o=3*m[i+0],s=3*m[i+1],c=3*m[i+2],h.fromArray(r,o),u.fromArray(r,s),p.fromArray(r,c),d.subVectors(p,u),f.subVectors(h,u),d.cross(f),l[o]+=d.x,l[o+1]+=d.y,l[o+2]+=d.z,l[s]+=d.x,l[s+1]+=d.y,l[s+2]+=d.z,l[c]+=d.x,l[c+1]+=d.y,l[c+2]+=d.z}else for(i=0,a=r.length;i<a;i+=9)h.fromArray(r,i),u.fromArray(r,i+3),p.fromArray(r,i+6),d.subVectors(p,u),f.subVectors(h,u),d.cross(f),l[i]=d.x,l[i+1]=d.y,l[i+2]=d.z,l[i+3]=d.x,l[i+4]=d.y,l[i+5]=d.z,l[i+6]=d.x,l[i+7]=d.y,l[i+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,a=e.attributes[n],o=a.array,s=a.itemSize*t,c=Math.min(o.length,i.length-s),l=0,h=s;l<c;l++,h++)i[h]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,r=e.count;t<r;t++)Si.x=e.getX(t),Si.y=e.getY(t),Si.z=e.getZ(t),Si.normalize(),e.setXYZ(t,Si.x,Si.y,Si.z)},toNonIndexed:function(){function e(e,t){for(var r=e.array,n=e.itemSize,i=new r.constructor(t.length*n),a=0,o=0,s=0,c=t.length;s<c;s++){a=t[s]*n;for(var l=0;l<n;l++)i[o++]=r[a++]}return new oi(i,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Ti,r=this.index.array,n=this.attributes;for(var i in n){var a=e(n[i],r);t.setAttribute(i,a)}var o=this.morphAttributes;for(i in o){for(var s=[],c=o[i],l=0,h=c.length;l<h;l++){a=e(c[l],r);s.push(a)}t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var u=this.groups,p=(l=0,u.length);l<p;l++){var d=u[l];t.addGroup(d.start,d.count,d.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;null!==n&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var i=this.attributes;for(var r in i){var a=(p=i[r]).toJSON();""!==p.name&&(a.name=p.name),e.data.attributes[r]=a}var o={},s=!1;for(var r in this.morphAttributes){for(var c=this.morphAttributes[r],l=[],h=0,u=c.length;h<u;h++){var p;a=(p=c[h]).toJSON();""!==p.name&&(a.name=p.name),l.push(a)}l.length>0&&(o[r]=l,s=!0)}s&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new Ti).copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.setAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var c=[],l=s[t];for(r=0,n=l.length;r<n;r++)c.push(l[r].clone());this.morphAttributes[t]=c}this.morphTargetsRelative=e.morphTargetsRelative;var h=e.groups;for(r=0,n=h.length;r<n;r++){var u=h[r];this.addGroup(u.start,u.count,u.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ei=new Hr,Ai=new On,Li=new Sn,Ri=new Dr,Ci=new Dr,Pi=new Dr,Oi=new Dr,Di=new Dr,Ii=new Dr,Ni=new Dr,Fi=new Dr,Bi=new Dr,zi=new wr,Ui=new wr,Gi=new wr,Hi=new Dr,Vi=new Dr;function ki(e,t){on.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ti,this.material=void 0!==t?t:new ii,this.updateMorphTargets()}function ji(e,t,r,n,i,a,o,s){if(null===(t.side===f?n.intersectTriangle(o,a,i,!0,s):n.intersectTriangle(i,a,o,t.side!==m,s)))return null;Vi.copy(s),Vi.applyMatrix4(e.matrixWorld);var c=r.ray.origin.distanceTo(Vi);return c<r.near||c>r.far?null:{distance:c,point:Vi.clone(),object:e}}function Wi(e,t,r,n,i,a,o,s,c,l,h,u){Ri.fromBufferAttribute(i,l),Ci.fromBufferAttribute(i,h),Pi.fromBufferAttribute(i,u);var p=e.morphTargetInfluences;if(t.morphTargets&&a&&p){Ni.set(0,0,0),Fi.set(0,0,0),Bi.set(0,0,0);for(var d=0,f=a.length;d<f;d++){var m=p[d],v=a[d];0!==m&&(Oi.fromBufferAttribute(v,l),Di.fromBufferAttribute(v,h),Ii.fromBufferAttribute(v,u),o?(Ni.addScaledVector(Oi,m),Fi.addScaledVector(Di,m),Bi.addScaledVector(Ii,m)):(Ni.addScaledVector(Oi.sub(Ri),m),Fi.addScaledVector(Di.sub(Ci),m),Bi.addScaledVector(Ii.sub(Pi),m)))}Ri.add(Ni),Ci.add(Fi),Pi.add(Bi)}var g=ji(e,t,r,n,Ri,Ci,Pi,Hi);if(g){s&&(zi.fromBufferAttribute(s,l),Ui.fromBufferAttribute(s,h),Gi.fromBufferAttribute(s,u),g.uv=Xn.getUV(Hi,Ri,Ci,Pi,zi,Ui,Gi,new wr)),c&&(zi.fromBufferAttribute(c,l),Ui.fromBufferAttribute(c,h),Gi.fromBufferAttribute(c,u),g.uv2=Xn.getUV(Hi,Ri,Ci,Pi,zi,Ui,Gi,new wr));var y=new ti(l,h,u);Xn.getNormal(Ri,Ci,Pi,y.normal),g.face=y}return g}ki.prototype=Object.assign(Object.create(on.prototype),{constructor:ki,isMesh:!0,copy:function(e){return on.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)r=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var r,n=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),Li.copy(n.boundingSphere),Li.applyMatrix4(a),!1!==e.ray.intersectsSphere(Li)&&(Ei.getInverse(a),Ai.copy(e.ray).applyMatrix4(Ei),null===n.boundingBox||!1!==Ai.intersectsBox(n.boundingBox))))if(n.isBufferGeometry){var o,s,c,l,h,u,p,d,f,m=n.index,v=n.attributes.position,g=n.morphAttributes.position,y=n.morphTargetsRelative,x=n.attributes.uv,b=n.attributes.uv2,_=n.groups,w=n.drawRange;if(null!==m)if(Array.isArray(i))for(l=0,u=_.length;l<u;l++)for(f=i[(d=_[l]).materialIndex],h=Math.max(d.start,w.start),p=Math.min(d.start+d.count,w.start+w.count);h<p;h+=3)o=m.getX(h),s=m.getX(h+1),c=m.getX(h+2),(r=Wi(this,f,e,Ai,v,g,y,x,b,o,s,c))&&(r.faceIndex=Math.floor(h/3),r.face.materialIndex=d.materialIndex,t.push(r));else for(l=Math.max(0,w.start),u=Math.min(m.count,w.start+w.count);l<u;l+=3)o=m.getX(l),s=m.getX(l+1),c=m.getX(l+2),(r=Wi(this,i,e,Ai,v,g,y,x,b,o,s,c))&&(r.faceIndex=Math.floor(l/3),t.push(r));else if(void 0!==v)if(Array.isArray(i))for(l=0,u=_.length;l<u;l++)for(f=i[(d=_[l]).materialIndex],h=Math.max(d.start,w.start),p=Math.min(d.start+d.count,w.start+w.count);h<p;h+=3)(r=Wi(this,f,e,Ai,v,g,y,x,b,o=h,s=h+1,c=h+2))&&(r.faceIndex=Math.floor(h/3),r.face.materialIndex=d.materialIndex,t.push(r));else for(l=Math.max(0,w.start),u=Math.min(v.count,w.start+w.count);l<u;l+=3)(r=Wi(this,i,e,Ai,v,g,y,x,b,o=l,s=l+1,c=l+2))&&(r.faceIndex=Math.floor(l/3),t.push(r))}else if(n.isGeometry){var M,S,T,E,A=Array.isArray(i),L=n.vertices,R=n.faces,C=n.faceVertexUvs[0];C.length>0&&(E=C);for(var P=0,O=R.length;P<O;P++){var D=R[P],I=A?i[D.materialIndex]:i;if(void 0!==I&&(M=L[D.a],S=L[D.b],T=L[D.c],r=ji(this,I,e,Ai,M,S,T,Hi))){if(E&&E[P]){var N=E[P];zi.copy(N[0]),Ui.copy(N[1]),Gi.copy(N[2]),r.uv=Xn.getUV(Hi,M,S,T,zi,Ui,Gi,new wr)}r.face=D,r.faceIndex=P,t.push(r)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var qi=0,Xi=new Hr,Yi=new on,Zi=new Dr;function Ji(){Object.defineProperty(this,"id",{value:qi+=2}),this.uuid=_r.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Ji.prototype=Object.assign(Object.create(gr.prototype),{constructor:Ji,isGeometry:!0,applyMatrix4:function(e){for(var t=(new Mr).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Xi.makeRotationX(e),this.applyMatrix4(Xi),this},rotateY:function(e){return Xi.makeRotationY(e),this.applyMatrix4(Xi),this},rotateZ:function(e){return Xi.makeRotationZ(e),this.applyMatrix4(Xi),this},translate:function(e,t,r){return Xi.makeTranslation(e,t,r),this.applyMatrix4(Xi),this},scale:function(e,t,r){return Xi.makeScale(e,t,r),this.applyMatrix4(Xi),this},lookAt:function(e){return Yi.lookAt(e),Yi.updateMatrix(),this.applyMatrix4(Yi.matrix),this},fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=n.position.array,a=void 0!==n.normal?n.normal.array:void 0,o=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,c=void 0!==n.uv2?n.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=0;l<i.length;l+=3)t.vertices.push((new Dr).fromArray(i,l)),void 0!==o&&t.colors.push((new Qn).fromArray(o,l));function h(e,r,n,i){var l=void 0===o?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()],h=new ti(e,r,n,void 0===a?[]:[(new Dr).fromArray(a,3*e),(new Dr).fromArray(a,3*r),(new Dr).fromArray(a,3*n)],l,i);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([(new wr).fromArray(s,2*e),(new wr).fromArray(s,2*r),(new wr).fromArray(s,2*n)]),void 0!==c&&t.faceVertexUvs[1].push([(new wr).fromArray(c,2*e),(new wr).fromArray(c,2*r),(new wr).fromArray(c,2*n)])}var u=e.groups;if(u.length>0)for(l=0;l<u.length;l++)for(var p=u[l],d=p.start,f=d,m=d+p.count;f<m;f+=3)void 0!==r?h(r[f],r[f+1],r[f+2],p.materialIndex):h(f,f+1,f+2,p.materialIndex);else if(void 0!==r)for(l=0;l<r.length;l+=3)h(r[l],r[l+1],r[l+2]);else for(l=0;l<i.length/3;l+=3)h(l,l+1,l+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zi).negate(),this.translate(Zi.x,Zi.y,Zi.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new Hr;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var e=new Dr,t=new Dr,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,i,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)o[t]=new Dr;if(e){var s,c,l,h=new Dr,u=new Dr;for(n=0,i=this.faces.length;n<i;n++)a=this.faces[n],s=this.vertices[a.a],c=this.vertices[a.b],l=this.vertices[a.c],h.subVectors(l,c),u.subVectors(s,c),h.cross(u),o[a.a].add(h),o[a.b].add(h),o[a.c].add(h)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)o[(a=this.faces[n]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,r=this.vertices.length;t<r;t++)o[t].normalize();for(n=0,i=this.faces.length;n<i;n++){var p=(a=this.faces[n]).vertexNormals;3===p.length?(p[0].copy(o[a.a]),p[1].copy(o[a.b]),p[2].copy(o[a.c])):(p[0]=o[a.a].clone(),p[1]=o[a.b].clone(),p[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(r=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new Ji;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)c=new Dr,l={a:new Dr,b:new Dr,c:new Dr},o.push(c),s.push(l)}var c,l,h=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],c=h.faceNormals[r],l=h.vertexNormals[r],c.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new _n),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Sn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e&&e.isGeometry){var n,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,c=e.faces,l=this.colors,h=e.colors;void 0===r&&(r=0),void 0!==t&&(n=(new Mr).getNormalMatrix(t));for(var u=0,p=o.length;u<p;u++){var d=o[u].clone();void 0!==t&&d.applyMatrix4(t),a.push(d)}for(u=0,p=h.length;u<p;u++)l.push(h[u].clone());for(u=0,p=c.length;u<p;u++){var f,m,v,g=c[u],y=g.vertexNormals,x=g.vertexColors;(f=new ti(g.a+i,g.b+i,g.c+i)).normal.copy(g.normal),void 0!==n&&f.normal.applyMatrix3(n).normalize();for(var b=0,_=y.length;b<_;b++)m=y[b].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),f.vertexNormals.push(m);f.color.copy(g.color);for(b=0,_=x.length;b<_;b++)v=x[b],f.vertexColors.push(v.clone());f.materialIndex=g.materialIndex+r,s.push(f)}for(u=0,p=e.faceVertexUvs.length;u<p;u++){var w=e.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(b=0,_=w.length;b<_;b++){for(var M=w[b],S=[],T=0,E=M.length;T<E;T++)S.push(M[T].clone());this.faceVertexUvs[u].push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,n,i,a,o,s,c={},l=[],h=[],u=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],void 0===c[t=Math.round(e.x*u)+"_"+Math.round(e.y*u)+"_"+Math.round(e.z*u)]?(c[t]=r,l.push(this.vertices[r]),h[r]=l.length-1):h[r]=h[c[t]];var p=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=h[i.a],i.b=h[i.b],i.c=h[i.c],a=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){p.push(r);break}}for(r=p.length-1;r>=0;r--){var f=p[r];for(this.faces.splice(f,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new Dr(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(n=[]),o&&o.length===t&&(i=[]);for(r=0;r<t;r++){var s=e[r]._id;n&&n.push(a[s]),i&&i.push(o[s])}n&&(this.faceVertexUvs[0]=n),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];n.push(a.x,a.y,a.z)}var o=[],s=[],c={},l=[],h={},u=[],p={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,x=0;if(x=M(x,0,0),x=M(x,1,!0),x=M(x,2,!1),x=M(x,3,f),x=M(x,4,m),x=M(x,5,v),x=M(x,6,g),x=M(x,7,y),o.push(x),o.push(d.a,d.b,d.c),o.push(d.materialIndex),f){var b=this.faceVertexUvs[0][i];o.push(E(b[0]),E(b[1]),E(b[2]))}if(m&&o.push(S(d.normal)),v){var _=d.vertexNormals;o.push(S(_[0]),S(_[1]),S(_[2]))}if(g&&o.push(T(d.color)),y){var w=d.vertexColors;o.push(T(w[0]),T(w[1]),T(w[2]))}}function M(e,t,r){return r?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]?h[t]:(h[t]=l.length,l.push(e.getHex()),h[t])}function E(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=u.length/2,u.push(e.x,e.y),p[t])}return e.data={},e.data.vertices=n,e.data.normals=s,l.length>0&&(e.data.colors=l),u.length>0&&(e.data.uvs=[u]),e.data.faces=o,e},clone:function(){return(new Ji).copy(this)},copy:function(e){var t,r,n,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,r=c.length;t<r;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,r=l.length;t<r;t++)this.faces.push(l[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var h=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,i=h.length;n<i;n++){var u=h[n],p=[];for(a=0,o=u.length;a<o;a++){var d=u[a];p.push(d.clone())}this.faceVertexUvs[t].push(p)}}var f=e.morphTargets;for(t=0,r=f.length;t<r;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],n=0,i=f[t].vertices.length;n<i;n++)m.vertices.push(f[t].vertices[n].clone());if(void 0!==f[t].normals)for(m.normals=[],n=0,i=f[t].normals.length;n<i;n++)m.normals.push(f[t].normals[n].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,r=v.length;t<r;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],n=0,i=v[t].vertexNormals.length;n<i;n++){var y=v[t].vertexNormals[n],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),g.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],n=0,i=v[t].faceNormals.length;n<i;n++)g.faceNormals.push(v[t].faceNormals[n].clone());this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,r=b.length;t<r;t++)this.skinWeights.push(b[t].clone());var _=e.skinIndices;for(t=0,r=_.length;t<r;t++)this.skinIndices.push(_[t].clone());var w=e.lineDistances;for(t=0,r=w.length;t<r;t++)this.lineDistances.push(w[t]);var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Qi extends Ji{constructor(e,t,r,n,i,a){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new Ki(e,t,r,n,i,a)),this.mergeVertices()}}exports.CubeGeometry=exports.BoxGeometry=Qi;class Ki extends Ti{constructor(e,t,r,n,i,a){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var o=this;e=e||1,t=t||1,r=r||1,n=Math.floor(n)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var s=[],c=[],l=[],h=[],u=0,p=0;function d(e,t,r,n,i,a,d,f,m,v,g){var y,x,b=a/m,_=d/v,w=a/2,M=d/2,S=f/2,T=m+1,E=v+1,A=0,L=0,R=new Dr;for(x=0;x<E;x++){var C=x*_-M;for(y=0;y<T;y++){var P=y*b-w;R[e]=P*n,R[t]=C*i,R[r]=S,c.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[r]=f>0?1:-1,l.push(R.x,R.y,R.z),h.push(y/m),h.push(1-x/v),A+=1}}for(x=0;x<v;x++)for(y=0;y<m;y++){var O=u+y+T*x,D=u+y+T*(x+1),I=u+(y+1)+T*(x+1),N=u+(y+1)+T*x;s.push(O,D,N),s.push(D,I,N),L+=6}o.addGroup(p,L,g),p+=L,u+=A}d("z","y","x",-1,-1,r,t,e,a,i,0),d("z","y","x",1,-1,r,t,-e,a,i,1),d("x","z","y",1,1,e,r,t,n,a,2),d("x","z","y",1,-1,e,r,-t,n,a,3),d("x","y","z",1,-1,e,t,r,n,i,4),d("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(s),this.setAttribute("position",new fi(c,3)),this.setAttribute("normal",new fi(l,3)),this.setAttribute("uv",new fi(h,2))}}function $i(e){var t={};for(var r in e)for(var n in t[r]={},e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}return t}function ea(e){for(var t={},r=0;r<e.length;r++){var n=$i(e[r]);for(var i in n)t[i]=n[i]}return t}exports.BoxBufferGeometry=Ki;var ta={clone:$i,merge:ea};exports.UniformsUtils=ta;var ra="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",na="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ia(e){ni.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=ra,this.fragmentShader=na,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function aa(){on.call(this),this.type="Camera",this.matrixWorldInverse=new Hr,this.projectionMatrix=new Hr,this.projectionMatrixInverse=new Hr}function oa(e,t,r,n){aa.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ia.prototype=Object.create(ni.prototype),ia.prototype.constructor=ia,ia.prototype.isShaderMaterial=!0,ia.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$i(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},ia.prototype.toJSON=function(e){var t=ni.prototype.toJSON.call(this,e);for(var r in t.uniforms={},this.uniforms){var n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var a in this.extensions)!0===this.extensions[a]&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},aa.prototype=Object.assign(Object.create(on.prototype),{constructor:aa,isCamera:!0,copy:function(e,t){return on.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Dr),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){on.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){on.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),oa.prototype=Object.assign(Object.create(aa.prototype),{constructor:oa,isPerspectiveCamera:!0,copy:function(e,t){return aa.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*_r.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*_r.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*_r.RAD2DEG*Math.atan(Math.tan(.5*_r.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*_r.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o,t-=a.offsetY*r/s,n*=a.width/o,r*=a.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=on.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var sa=90,ca=1;function la(e,t,r,n){on.call(this),this.type="CubeCamera";var i=new oa(sa,ca,e,t);i.up.set(0,-1,0),i.lookAt(new Dr(1,0,0)),this.add(i);var a=new oa(sa,ca,e,t);a.up.set(0,-1,0),a.lookAt(new Dr(-1,0,0)),this.add(a);var o=new oa(sa,ca,e,t);o.up.set(0,0,1),o.lookAt(new Dr(0,1,0)),this.add(o);var s=new oa(sa,ca,e,t);s.up.set(0,0,-1),s.lookAt(new Dr(0,-1,0)),this.add(s);var c=new oa(sa,ca,e,t);c.up.set(0,-1,0),c.lookAt(new Dr(0,0,1)),this.add(c);var l=new oa(sa,ca,e,t);l.up.set(0,-1,0),l.lookAt(new Dr(0,0,-1)),this.add(l),n=n||{format:Ge,magFilter:we,minFilter:we},this.renderTarget=new ha(r,n),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=e.getRenderTarget(),n=this.renderTarget,h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,c),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(r)},this.clear=function(e,t,r,n){for(var i=e.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)e.setRenderTarget(a,o),e.clear(t,r,n);e.setRenderTarget(i)}}function ha(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),Lr.call(this,e,e,t)}function ua(e,t,r,n,i,a,o,s,c,l,h,u){Er.call(this,null,a,o,s,c,l,n,i,h,u),this.image={data:e||null,width:t||1,height:r||1},this.magFilter=void 0!==c?c:ge,this.minFilter=void 0!==l?l:ge,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}la.prototype=Object.create(on.prototype),la.prototype.constructor=la,ha.prototype=Object.create(Lr.prototype),ha.prototype.constructor=ha,ha.prototype.isWebGLCubeRenderTarget=!0,ha.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var r=new sn,n={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new ia({type:"CubemapFromEquirect",uniforms:$i(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:_});i.uniforms.tEquirect.value=t;var a=new ki(new Ki(5,5,5),i);r.add(a);var o=new la(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(e,r),a.geometry.dispose(),a.material.dispose(),this},ua.prototype=Object.create(Er.prototype),ua.prototype.constructor=ua,ua.prototype.isDataTexture=!0;var pa=new Sn,da=new Dr;function fa(e,t,r,n,i,a){this.planes=[void 0!==e?e:new Fn,void 0!==t?t:new Fn,void 0!==r?r:new Fn,void 0!==n?n:new Fn,void 0!==i?i:new Fn,void 0!==a?a:new Fn]}Object.assign(fa.prototype,{set:function(e,t,r,n,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(n),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromProjectionMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],c=r[5],l=r[6],h=r[7],u=r[8],p=r[9],d=r[10],f=r[11],m=r[12],v=r[13],g=r[14],y=r[15];return t[0].setComponents(o-n,h-s,f-u,y-m).normalize(),t[1].setComponents(o+n,h+s,f+u,y+m).normalize(),t[2].setComponents(o+i,h+c,f+p,y+v).normalize(),t[3].setComponents(o-i,h-c,f-p,y-v).normalize(),t[4].setComponents(o-a,h-l,f-d,y-g).normalize(),t[5].setComponents(o+a,h+l,f+d,y+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),pa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(pa)},intersectsSprite:function(e){return pa.center.set(0,0,0),pa.radius=.7071067811865476,pa.applyMatrix4(e.matrixWorld),this.intersectsSphere(pa)},intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,r=0;r<6;r++){var n=t[r];if(da.x=n.normal.x>0?e.max.x:e.min.x,da.y=n.normal.y>0?e.max.y:e.min.y,da.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(da)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}});var ma={common:{diffuse:{value:new Qn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mr},uv2Transform:{value:new Mr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new wr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Qn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Qn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Mr}},sprite:{diffuse:{value:new Qn(15658734)},opacity:{value:1},center:{value:new wr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Mr}}};function va(){var e=null,t=!1,r=null;function n(i,a){!1!==t&&(r(i,a),e.requestAnimationFrame(n))}return{start:function(){!0!==t&&null!==r&&(e.requestAnimationFrame(n),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function ga(e,t){var r=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=n.get(t);r&&(e.deleteBuffer(r.buffer),n.delete(t))},update:function(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var a=n.get(t);void 0===a?n.set(t,function(t,r){var n=t.array,i=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,n,i),t.onUploadCallback();var o=5126;return n instanceof Float32Array?o=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?o=5123:n instanceof Int16Array?o=5122:n instanceof Uint32Array?o=5125:n instanceof Int32Array?o=5124:n instanceof Int8Array?o=5120:n instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(function(t,n,i){var a=n.array,o=n.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(r?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(a.buffer,t,i),a.version=t.version)}}}function ya(e,t,r,n){Ji.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new xa(e,t,r,n)),this.mergeVertices()}function xa(e,t,r,n){Ti.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};var i,a,o=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(r)||1,l=Math.floor(n)||1,h=c+1,u=l+1,p=e/c,d=t/l,f=[],m=[],v=[],g=[];for(a=0;a<u;a++){var y=a*d-s;for(i=0;i<h;i++){var x=i*p-o;m.push(x,-y,0),v.push(0,0,1),g.push(i/c),g.push(1-a/l)}}for(a=0;a<l;a++)for(i=0;i<c;i++){var b=i+h*a,_=i+h*(a+1),w=i+1+h*(a+1),M=i+1+h*a;f.push(b,_,M),f.push(_,w,M)}this.setIndex(f),this.setAttribute("position",new fi(m,3)),this.setAttribute("normal",new fi(v,3)),this.setAttribute("uv",new fi(g,2))}exports.UniformsLib=ma,ya.prototype=Object.create(Ji.prototype),ya.prototype.constructor=ya,xa.prototype=Object.create(Ti.prototype),xa.prototype.constructor=xa;var ba="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",_a="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",wa="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",Ma="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",Sa="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Ta="vec3 transformed = vec3( position );",Ea="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Aa="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",La="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Ra="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Ca="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Pa="#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",Oa="#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",Da="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Ia="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Na="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Fa="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",Ba="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",za="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",Ua="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Ga="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Ha="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Va="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",ka="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",ja="gl_FragColor = linearToOutputTexel( gl_FragColor );",Wa="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",qa="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Xa="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Ya="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Za="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Ja="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Qa="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",Ka="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",$a="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",eo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",to="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",ro="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",no="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",io="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",ao="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",oo="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",so="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",co="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lo="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",ho="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",uo="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",po="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",fo="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",mo="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",vo="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",go="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",yo="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",xo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",bo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",_o="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",wo="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Mo="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",So="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",To="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Eo="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ao="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",Lo="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Ro="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",Co="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Po="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",Oo="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",Do="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Io="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",No="#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Fo="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Bo="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",zo="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Uo="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Go="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Ho="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Vo="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",ko="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",jo="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Wo="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",qo="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",Xo="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Yo="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",Zo="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Jo="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Qo="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Ko="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",$o="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",es="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",ts="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",rs="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",ns="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",is="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",as="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",os="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",ss="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",cs="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ls="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",hs="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",us="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",ps="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",ds="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",fs="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",ms="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",vs="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",gs="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",ys="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",xs="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",bs="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",_s="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",ws="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ms="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ss="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ts="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Es="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",As="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ls="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Rs="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Cs="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ps="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Os="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",Ds="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Is="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ns="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Fs="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Bs="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",zs="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Us="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Gs={alphamap_fragment:ba,alphamap_pars_fragment:_a,alphatest_fragment:wa,aomap_fragment:Ma,aomap_pars_fragment:Sa,begin_vertex:Ta,beginnormal_vertex:Ea,bsdfs:Aa,bumpmap_pars_fragment:La,clipping_planes_fragment:Ra,clipping_planes_pars_fragment:Ca,clipping_planes_pars_vertex:Pa,clipping_planes_vertex:Oa,color_fragment:Da,color_pars_fragment:Ia,color_pars_vertex:Na,color_vertex:Fa,common:Ba,cube_uv_reflection_fragment:za,defaultnormal_vertex:Ua,displacementmap_pars_vertex:Ga,displacementmap_vertex:Ha,emissivemap_fragment:Va,emissivemap_pars_fragment:ka,encodings_fragment:ja,encodings_pars_fragment:Wa,envmap_fragment:qa,envmap_common_pars_fragment:Xa,envmap_pars_fragment:Ya,envmap_pars_vertex:Za,envmap_physical_pars_fragment:oo,envmap_vertex:Ja,fog_vertex:Qa,fog_pars_vertex:Ka,fog_fragment:$a,fog_pars_fragment:eo,gradientmap_pars_fragment:to,lightmap_fragment:ro,lightmap_pars_fragment:no,lights_lambert_vertex:io,lights_pars_begin:ao,lights_toon_fragment:so,lights_toon_pars_fragment:co,lights_phong_fragment:lo,lights_phong_pars_fragment:ho,lights_physical_fragment:uo,lights_physical_pars_fragment:po,lights_fragment_begin:fo,lights_fragment_maps:mo,lights_fragment_end:vo,logdepthbuf_fragment:go,logdepthbuf_pars_fragment:yo,logdepthbuf_pars_vertex:xo,logdepthbuf_vertex:bo,map_fragment:_o,map_pars_fragment:wo,map_particle_fragment:Mo,map_particle_pars_fragment:So,metalnessmap_fragment:To,metalnessmap_pars_fragment:Eo,morphnormal_vertex:Ao,morphtarget_pars_vertex:Lo,morphtarget_vertex:Ro,normal_fragment_begin:Co,normal_fragment_maps:Po,normalmap_pars_fragment:Oo,clearcoat_normal_fragment_begin:Do,clearcoat_normal_fragment_maps:Io,clearcoat_normalmap_pars_fragment:No,packing:Fo,premultiplied_alpha_fragment:Bo,project_vertex:zo,dithering_fragment:Uo,dithering_pars_fragment:Go,roughnessmap_fragment:Ho,roughnessmap_pars_fragment:Vo,shadowmap_pars_fragment:ko,shadowmap_pars_vertex:jo,shadowmap_vertex:Wo,shadowmask_pars_fragment:qo,skinbase_vertex:Xo,skinning_pars_vertex:Yo,skinning_vertex:Zo,skinnormal_vertex:Jo,specularmap_fragment:Qo,specularmap_pars_fragment:Ko,tonemapping_fragment:$o,tonemapping_pars_fragment:es,uv_pars_fragment:ts,uv_pars_vertex:rs,uv_vertex:ns,uv2_pars_fragment:is,uv2_pars_vertex:as,uv2_vertex:os,worldpos_vertex:ss,background_frag:cs,background_vert:ls,cube_frag:hs,cube_vert:us,depth_frag:ps,depth_vert:ds,distanceRGBA_frag:fs,distanceRGBA_vert:ms,equirect_frag:vs,equirect_vert:gs,linedashed_frag:ys,linedashed_vert:xs,meshbasic_frag:bs,meshbasic_vert:_s,meshlambert_frag:ws,meshlambert_vert:Ms,meshmatcap_frag:Ss,meshmatcap_vert:Ts,meshtoon_frag:Es,meshtoon_vert:As,meshphong_frag:Ls,meshphong_vert:Rs,meshphysical_frag:Cs,meshphysical_vert:Ps,normal_frag:Os,normal_vert:Ds,points_frag:Is,points_vert:Ns,shadow_frag:Fs,shadow_vert:Bs,sprite_frag:zs,sprite_vert:Us};exports.ShaderChunk=Gs;var Hs={basic:{uniforms:ea([ma.common,ma.specularmap,ma.envmap,ma.aomap,ma.lightmap,ma.fog]),vertexShader:Gs.meshbasic_vert,fragmentShader:Gs.meshbasic_frag},lambert:{uniforms:ea([ma.common,ma.specularmap,ma.envmap,ma.aomap,ma.lightmap,ma.emissivemap,ma.fog,ma.lights,{emissive:{value:new Qn(0)}}]),vertexShader:Gs.meshlambert_vert,fragmentShader:Gs.meshlambert_frag},phong:{uniforms:ea([ma.common,ma.specularmap,ma.envmap,ma.aomap,ma.lightmap,ma.emissivemap,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.fog,ma.lights,{emissive:{value:new Qn(0)},specular:{value:new Qn(1118481)},shininess:{value:30}}]),vertexShader:Gs.meshphong_vert,fragmentShader:Gs.meshphong_frag},standard:{uniforms:ea([ma.common,ma.envmap,ma.aomap,ma.lightmap,ma.emissivemap,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.roughnessmap,ma.metalnessmap,ma.fog,ma.lights,{emissive:{value:new Qn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Gs.meshphysical_vert,fragmentShader:Gs.meshphysical_frag},toon:{uniforms:ea([ma.common,ma.specularmap,ma.aomap,ma.lightmap,ma.emissivemap,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.gradientmap,ma.fog,ma.lights,{emissive:{value:new Qn(0)},specular:{value:new Qn(1118481)},shininess:{value:30}}]),vertexShader:Gs.meshtoon_vert,fragmentShader:Gs.meshtoon_frag},matcap:{uniforms:ea([ma.common,ma.bumpmap,ma.normalmap,ma.displacementmap,ma.fog,{matcap:{value:null}}]),vertexShader:Gs.meshmatcap_vert,fragmentShader:Gs.meshmatcap_frag},points:{uniforms:ea([ma.points,ma.fog]),vertexShader:Gs.points_vert,fragmentShader:Gs.points_frag},dashed:{uniforms:ea([ma.common,ma.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gs.linedashed_vert,fragmentShader:Gs.linedashed_frag},depth:{uniforms:ea([ma.common,ma.displacementmap]),vertexShader:Gs.depth_vert,fragmentShader:Gs.depth_frag},normal:{uniforms:ea([ma.common,ma.bumpmap,ma.normalmap,ma.displacementmap,{opacity:{value:1}}]),vertexShader:Gs.normal_vert,fragmentShader:Gs.normal_frag},sprite:{uniforms:ea([ma.sprite,ma.fog]),vertexShader:Gs.sprite_vert,fragmentShader:Gs.sprite_frag},background:{uniforms:{uvTransform:{value:new Mr},t2D:{value:null}},vertexShader:Gs.background_vert,fragmentShader:Gs.background_frag},cube:{uniforms:ea([ma.envmap,{opacity:{value:1}}]),vertexShader:Gs.cube_vert,fragmentShader:Gs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gs.equirect_vert,fragmentShader:Gs.equirect_frag},distanceRGBA:{uniforms:ea([ma.common,ma.displacementmap,{referencePosition:{value:new Dr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gs.distanceRGBA_vert,fragmentShader:Gs.distanceRGBA_frag},shadow:{uniforms:ea([ma.lights,ma.fog,{color:{value:new Qn(0)},opacity:{value:1}}]),vertexShader:Gs.shadow_vert,fragmentShader:Gs.shadow_frag}};function Vs(e,t,r,n){var i,a,o=new Qn(0),s=0,c=null,l=0,h=null;function u(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),u(o,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){u(o,s=e)},render:function(t,n,p,m){var v=n.background,g=e.xr,y=g.getSession&&g.getSession();if(y&&"additive"===y.environmentBlendMode&&(v=null),null===v?u(o,s):v&&v.isColor&&(u(v,1),m=!0),(e.autoClear||m)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.isWebGLCubeRenderTarget||v.mapping===pe)){void 0===a&&((a=new ki(new Ki(1,1,1),new ia({type:"BackgroundCubeMaterial",uniforms:$i(Hs.cube.uniforms),vertexShader:Hs.cube.vertexShader,fragmentShader:Hs.cube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a));var x=v.isWebGLCubeRenderTarget?v.texture:v;a.material.uniforms.envMap.value=x,a.material.uniforms.flipEnvMap.value=x.isCubeTexture?-1:1,c===v&&l===x.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=v,l=x.version,h=e.toneMapping),t.unshift(a,a.geometry,a.material,0,0,null)}else v&&v.isTexture&&(void 0===i&&((i=new ki(new xa(2,2),new ia({type:"BackgroundMaterial",uniforms:$i(Hs.background.uniforms),vertexShader:Hs.background.vertexShader,fragmentShader:Hs.background.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(i)),i.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),i.material.uniforms.uvTransform.value.copy(v.matrix),c===v&&l===v.version&&h===e.toneMapping||(i.material.needsUpdate=!0,c=v,l=v.version,h=e.toneMapping),t.unshift(i,i.geometry,i.material,0,0,null))}}}function ks(e,t,r,n){var i,a=n.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),r.update(n,i)},this.renderInstances=function(n,o,s,c){if(0!==c){var l,h;if(a)l=e,h="drawArraysInstanced";else if(h="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](i,o,s,c),r.update(s,i,c)}}}function js(e,t,r){var n;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==r.precision?r.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var c=!0===r.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),u=e.getParameter(3379),p=e.getParameter(34076),d=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=h>0,y=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==n)return n;var r=t.get("EXT_texture_filter_anisotropic");return n=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:a?e.getParameter(36183):0}}function Ws(){var e=this,t=null,r=0,n=!1,i=!1,a=new Fn,o=new Mr,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function l(t,r,n,i){var c=null!==t?t.length:0,l=null;if(0!==c){if(l=s.value,!0!==i||null===l){var h=n+4*c,u=r.matrixWorldInverse;o.getNormalMatrix(u),(null===l||l.length<h)&&(l=new Float32Array(h));for(var p=0,d=n;p!==c;++p,d+=4)a.copy(t[p]).applyMatrix4(u,o),a.normal.toArray(l,d),l[d+3]=a.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=c,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,a){var o=0!==e.length||i||0!==r||n;return n=i,t=l(e,a,0),r=e.length,o},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,a,o,h,u,p){if(!n||null===e||0===e.length||i&&!o)i?l(null):c();else{var d=i?0:r,f=4*d,m=u.clippingState||null;s.value=m,m=l(e,h,f,p);for(var v=0;v!==f;++v)m[v]=t[v];u.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function qs(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}function Xs(e,t,r){var n=new WeakMap,i=new WeakMap;function a(e){var o=e.target,s=n.get(o);for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);o.removeEventListener("dispose",a),n.delete(o);var l=i.get(s);l&&(t.remove(l),i.delete(s)),r.memory.geometries--}function o(e){var r=[],n=e.index,a=e.attributes.position,o=0;if(null!==n){var s=n.array;o=n.version;for(var c=0,l=s.length;c<l;c+=3){var h=s[c+0],u=s[c+1],p=s[c+2];r.push(h,u,u,p,p,h)}}else{s=a.array;o=a.version;for(c=0,l=s.length/3-1;c<l;c+=3){h=c+0,u=c+1,p=c+2;r.push(h,u,u,p,p,h)}}var d=new(gi(r)>65535?di:ui)(r,1);d.version=o,t.update(d,34963);var f=i.get(e);f&&t.remove(f),i.set(e,d)}return{get:function(e,t){var i=n.get(t);return i||(t.addEventListener("dispose",a),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ti).setFromObject(e)),i=t._bufferGeometry),n.set(t,i),r.memory.geometries++,i)},update:function(e){var r=e.index,n=e.attributes;for(var i in null!==r&&t.update(r,34963),n)t.update(n[i],34962);var a=e.morphAttributes;for(var i in a)for(var o=a[i],s=0,c=o.length;s<c;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var r=e.index;null!==r&&t.version<r.version&&o(e)}else o(e);return i.get(e)}}}function Ys(e,t,r,n){var i,a,o,s=n.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,n){e.drawElements(i,n,a,t*o),r.update(n,i)},this.renderInstances=function(n,c,l,h){if(0!==h){var u,p;if(s)u=e,p="drawElementsInstanced";else if(p="drawElementsInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[p](i,l,a,c*o,h),r.update(l,i,h)}}}function Zs(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,r,n){switch(n=n||1,t.calls++,r){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Js(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Qs(e){var t={},r=new Float32Array(8);return{update:function(n,i,a,o){var s=n.morphTargetInfluences,c=void 0===s?0:s.length,l=t[i.id];if(void 0===l){l=[];for(var h=0;h<c;h++)l[h]=[h,0];t[i.id]=l}var u=a.morphTargets&&i.morphAttributes.position,p=a.morphNormals&&i.morphAttributes.normal;for(h=0;h<c;h++)0!==(f=l[h])[1]&&(u&&i.deleteAttribute("morphTarget"+h),p&&i.deleteAttribute("morphNormal"+h));for(h=0;h<c;h++)(f=l[h])[0]=h,f[1]=s[h];l.sort(Js);var d=0;for(h=0;h<8;h++){var f;if(f=l[h]){var m=f[0],v=f[1];if(v){u&&i.setAttribute("morphTarget"+h,u[m]),p&&i.setAttribute("morphNormal"+h,p[m]),r[h]=v,d+=v;continue}}r[h]=0}var g=i.morphTargetsRelative?1:1-d;o.getUniforms().setValue(e,"morphTargetBaseInfluence",g),o.getUniforms().setValue(e,"morphTargetInfluences",r)}}}function Ks(e,t,r,n){var i={};return{update:function(e){var a=n.render.frame,o=e.geometry,s=t.get(e,o);return i[s.id]!==a&&(o.isGeometry&&s.updateFromObject(e),t.update(s),i[s.id]=a),e.isInstancedMesh&&r.update(e.instanceMatrix,34962),s},dispose:function(){i={}}}}function $s(e,t,r,n,i,a,o,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:se,o=void 0!==o?o:Ge,Er.call(this,e,t,r,n,i,a,o,s,c,l),this.flipY=!1}function ec(e,t,r,n){Er.call(this,null),this.image={data:e||null,width:t||1,height:r||1,depth:n||1},this.magFilter=ge,this.minFilter=ge,this.wrapR=me,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function tc(e,t,r,n){Er.call(this,null),this.image={data:e||null,width:t||1,height:r||1,depth:n||1},this.magFilter=ge,this.minFilter=ge,this.wrapR=me,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}exports.ShaderLib=Hs,Hs.physical={uniforms:ea([Hs.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Qn(0)},clearcoatNormalScale:{value:new wr(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Gs.meshphysical_vert,fragmentShader:Gs.meshphysical_frag},$s.prototype=Object.create(Er.prototype),$s.prototype.constructor=$s,$s.prototype.isCubeTexture=!0,Object.defineProperty($s.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),ec.prototype=Object.create(Er.prototype),ec.prototype.constructor=ec,ec.prototype.isDataTexture2DArray=!0,tc.prototype=Object.create(Er.prototype),tc.prototype.constructor=tc,tc.prototype.isDataTexture3D=!0;var rc=new Er,nc=new ec,ic=new tc,ac=new $s,oc=[],sc=[],cc=new Float32Array(16),lc=new Float32Array(9),hc=new Float32Array(4);function uc(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,a=oc[i];if(void 0===a&&(a=new Float32Array(i),oc[i]=a),0!==t){n.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=r,e[o].toArray(a,s)}return a}function pc(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function dc(e,t){for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}function fc(e,t){var r=sc[t];void 0===r&&(r=new Int32Array(t),sc[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocateTextureUnit();return r}function mc(e,t){var r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function vc(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(pc(r,t))return;e.uniform2fv(this.addr,t),dc(r,t)}}function gc(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)r[0]===t.r&&r[1]===t.g&&r[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(pc(r,t))return;e.uniform3fv(this.addr,t),dc(r,t)}}function yc(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z&&r[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(pc(r,t))return;e.uniform4fv(this.addr,t),dc(r,t)}}function xc(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(pc(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),dc(r,t)}else{if(pc(r,n))return;hc.set(n),e.uniformMatrix2fv(this.addr,!1,hc),dc(r,n)}}function bc(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(pc(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),dc(r,t)}else{if(pc(r,n))return;lc.set(n),e.uniformMatrix3fv(this.addr,!1,lc),dc(r,n)}}function _c(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(pc(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),dc(r,t)}else{if(pc(r,n))return;cc.set(n),e.uniformMatrix4fv(this.addr,!1,cc),dc(r,n)}}function wc(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.safeSetTexture2D(t||rc,i)}function Mc(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(t||nc,i)}function Sc(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||ic,i)}function Tc(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.safeSetTextureCube(t||ac,i)}function Ec(e,t){var r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function Ac(e,t){var r=this.cache;pc(r,t)||(e.uniform2iv(this.addr,t),dc(r,t))}function Lc(e,t){var r=this.cache;pc(r,t)||(e.uniform3iv(this.addr,t),dc(r,t))}function Rc(e,t){var r=this.cache;pc(r,t)||(e.uniform4iv(this.addr,t),dc(r,t))}function Cc(e,t){var r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function Pc(e){switch(e){case 5126:return mc;case 35664:return vc;case 35665:return gc;case 35666:return yc;case 35674:return xc;case 35675:return bc;case 35676:return _c;case 5124:case 35670:return Ec;case 35667:case 35671:return Ac;case 35668:case 35672:return Lc;case 35669:case 35673:return Rc;case 5125:return Cc;case 35678:case 36198:case 36298:case 36306:case 35682:return wc;case 35679:case 36299:case 36307:return Sc;case 35680:case 36300:case 36308:case 36293:return Tc;case 36289:case 36303:case 36311:case 36292:return Mc}}function Oc(e,t){e.uniform1fv(this.addr,t)}function Dc(e,t){e.uniform1iv(this.addr,t)}function Ic(e,t){e.uniform2iv(this.addr,t)}function Nc(e,t){e.uniform3iv(this.addr,t)}function Fc(e,t){e.uniform4iv(this.addr,t)}function Bc(e,t){var r=uc(t,this.size,2);e.uniform2fv(this.addr,r)}function zc(e,t){var r=uc(t,this.size,3);e.uniform3fv(this.addr,r)}function Uc(e,t){var r=uc(t,this.size,4);e.uniform4fv(this.addr,r)}function Gc(e,t){var r=uc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function Hc(e,t){var r=uc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function Vc(e,t){var r=uc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function kc(e,t,r){var n=t.length,i=fc(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.safeSetTexture2D(t[a]||rc,i[a])}function jc(e,t,r){var n=t.length,i=fc(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.safeSetTextureCube(t[a]||ac,i[a])}function Wc(e){switch(e){case 5126:return Oc;case 35664:return Bc;case 35665:return zc;case 35666:return Uc;case 35674:return Gc;case 35675:return Hc;case 35676:return Vc;case 5124:case 35670:return Dc;case 35667:case 35671:return Ic;case 35668:case 35672:return Nc;case 35669:case 35673:return Fc;case 35678:case 36198:case 36298:case 36306:case 35682:return kc;case 35680:case 36300:case 36308:case 36293:return jc}}function qc(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Pc(t.type)}function Xc(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Wc(t.type)}function Yc(e){this.id=e,this.seq=[],this.map={}}Xc.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),dc(t,e)},Yc.prototype.setValue=function(e,t,r){for(var n=this.seq,i=0,a=n.length;i!==a;++i){var o=n[i];o.setValue(e,t[o.id],r)}};var Zc=/([\w\d_]+)(\])?(\[|\.)?/g;function Jc(e,t){e.seq.push(t),e.map[t.id]=t}function Qc(e,t,r){var n=e.name,i=n.length;for(Zc.lastIndex=0;;){var a=Zc.exec(n),o=Zc.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===i){Jc(r,void 0===l?new qc(s,e,t):new Xc(s,e,t));break}var h=r.map[s];void 0===h&&Jc(r,h=new Yc(s)),r=h}}function Kc(e,t){this.seq=[],this.map={};for(var r=e.getProgramParameter(t,35718),n=0;n<r;++n){var i=e.getActiveUniform(t,n);Qc(i,e.getUniformLocation(t,i.name),this)}}function $c(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}Kc.prototype.setValue=function(e,t,r,n){var i=this.map[t];void 0!==i&&i.setValue(e,r,n)},Kc.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},Kc.upload=function(e,t,r,n){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=r[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,n)}},Kc.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var a=e[n];a.id in t&&r.push(a)}return r};var el=0;function tl(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function rl(e){switch(e){case It:return["Linear","( value )"];case Nt:return["sRGB","( value )"];case Bt:return["RGBE","( value )"];case Ut:return["RGBM","( value, 7.0 )"];case Gt:return["RGBM","( value, 16.0 )"];case Ht:return["RGBD","( value, 256.0 )"];case Ft:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case zt:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function nl(e,t,r){var n=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return n&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+r+"\n"+i+tl(e.getShaderSource(t))}function il(e,t){var r=rl(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function al(e,t){var r=rl(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function ol(e,t){var r;switch(t){case te:r="Linear";break;case re:r="Reinhard";break;case ne:r="Uncharted2";break;case ie:r="OptimizedCineon";break;case ae:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function sl(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(hl).join("\n")}function cl(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}function ll(e,t){for(var r={},n=e.getProgramParameter(t,35721),i=0;i<n;i++){var a=e.getActiveAttrib(t,i).name;r[a]=e.getAttribLocation(t,a)}return r}function hl(e){return""!==e}function ul(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function pl(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var dl=/^[ \t]*#include +<([\w\d.\/]+)>/gm;function fl(e){return e.replace(dl,ml)}function ml(e,t){var r=Gs[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return fl(r)}var vl=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function gl(e){return e.replace(vl,yl)}function yl(e,t,r,n){for(var i="",a=parseInt(t);a<parseInt(r);a++)i+=n.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function xl(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function bl(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===u?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===p&&(t="SHADOWMAP_TYPE_VSM"),t}function _l(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case se:case ce:t="ENVMAP_TYPE_CUBE";break;case pe:case de:t="ENVMAP_TYPE_CUBE_UV";break;case le:case he:t="ENVMAP_TYPE_EQUIREC";break;case ue:t="ENVMAP_TYPE_SPHERE"}return t}function wl(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ce:case he:t="ENVMAP_MODE_REFRACTION"}return t}function Ml(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Q:t="ENVMAP_BLENDING_MULTIPLY";break;case K:t="ENVMAP_BLENDING_MIX";break;case $:t="ENVMAP_BLENDING_ADD"}return t}function Sl(e,t,r){var n,i,a=e.getContext(),o=r.defines,s=r.vertexShader,c=r.fragmentShader,l=bl(r),h=_l(r),u=wl(r),p=Ml(r),d=e.gammaFactor>0?e.gammaFactor:1,f=r.isWebGL2?"":sl(r),m=cl(o),v=a.createProgram(),g=r.numMultiviewViews;if(r.isRawShaderMaterial?((n=[m].filter(hl).join("\n")).length>0&&(n+="\n"),(i=[f,m].filter(hl).join("\n")).length>0&&(i+="\n")):(n=[xl(r),"#define SHADER_NAME "+r.shaderName,m,r.instancing?"#define USE_INSTANCING":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(hl).join("\n"),i=[f,xl(r),"#define SHADER_NAME "+r.shaderName,m,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+u:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==ee?"#define TONE_MAPPING":"",r.toneMapping!==ee?Gs.tonemapping_pars_fragment:"",r.toneMapping!==ee?ol("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.matcapEncoding||r.envMapEncoding||r.emissiveMapEncoding||r.lightMapEncoding?Gs.encodings_pars_fragment:"",r.mapEncoding?il("mapTexelToLinear",r.mapEncoding):"",r.matcapEncoding?il("matcapTexelToLinear",r.matcapEncoding):"",r.envMapEncoding?il("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?il("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.lightMapEncoding?il("lightMapTexelToLinear",r.lightMapEncoding):"",r.outputEncoding?al("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(hl).join("\n")),s=pl(s=ul(s=fl(s),r),r),c=pl(c=ul(c=fl(c),r),r),s=gl(s),c=gl(c),r.isWebGL2&&!r.isRawShaderMaterial){var y=!1,x=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==s.match(x)&&null!==c.match(x)&&(y=!0,s=s.replace(x,""),c=c.replace(x,"")),n=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+n,i=["#version 300 es\n","#define varying in",y?"":"out highp vec4 pc_fragColor;",y?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i,g>0&&(n=(n=n.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+g+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+g+"];","uniform mat4 projectionMatrices["+g+"];","uniform mat4 viewMatrices["+g+"];","uniform mat3 normalMatrices["+g+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),i=(i=i.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+g+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var b,_,w=i+c,M=$c(a,35633,n+s),S=$c(a,35632,w);if(a.attachShader(v,M),a.attachShader(v,S),void 0!==r.index0AttributeName?a.bindAttribLocation(v,0,r.index0AttributeName):!0===r.morphTargets&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v),e.debug.checkShaderErrors){var T=a.getProgramInfoLog(v).trim(),E=a.getShaderInfoLog(M).trim(),A=a.getShaderInfoLog(S).trim(),L=!0,R=!0;if(!1===a.getProgramParameter(v,35714)){L=!1;var C=nl(a,M,"vertex"),P=nl(a,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(v,35715),"gl.getProgramInfoLog",T,C,P)}else""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==E&&""!==A||(R=!1);R&&(this.diagnostics={runnable:L,programLog:T,vertexShader:{log:E,prefix:n},fragmentShader:{log:A,prefix:i}})}return a.deleteShader(M),a.deleteShader(S),this.getUniforms=function(){return void 0===b&&(b=new Kc(a,v)),b},this.getAttributes=function(){return void 0===_&&(_=ll(a,v)),_},this.destroy=function(){a.deleteProgram(v),this.program=void 0},this.name=r.shaderName,this.id=el++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=S,this.numMultiviewViews=g,this}function Tl(e,t,r){var n=[],i=r.isWebGL2,a=r.logarithmicDepthBuffer,o=r.floatVertexTextures,s=r.precision,c=r.maxVertexUniforms,l=r.vertexTextures,h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},u=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function p(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=It,t}this.getParameters=function(n,u,d,v,g,y,x){var b=v.fog,_=n.isMeshStandardMaterial?v.environment:null,w=n.envMap||_,M=h[n.type],S=x.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(o)return 1024;var r=c,n=Math.floor((r-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(x):0;null!==n.precision&&(s=r.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",s,"instead.");var T=function(e,t){var r;if(t){var n=Hs[t];r={name:e.type,uniforms:ta.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}}else r={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};return r}(n,M);n.onBeforeCompile(T,e);var E=e.getRenderTarget(),A=E&&E.isWebGLMultiviewRenderTarget?E.numViews:0;return{isWebGL2:i,shaderID:M,shaderName:T.name,uniforms:T.uniforms,vertexShader:T.vertexShader,fragmentShader:T.fragmentShader,defines:n.defines,isRawShaderMaterial:n.isRawShaderMaterial,isShaderMaterial:n.isShaderMaterial,precision:s,instancing:!0===x.isInstancedMesh,supportsVertexTextures:l,numMultiviewViews:A,outputEncoding:null!==E?p(E.texture):e.outputEncoding,map:!!n.map,mapEncoding:p(n.map),matcap:!!n.matcap,matcapEncoding:p(n.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:p(w),envMapCubeUV:!!w&&(w.mapping===pe||w.mapping===de),lightMap:!!n.lightMap,lightMapEncoding:p(n.lightMap),aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:p(n.emissiveMap),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,objectSpaceNormalMap:n.normalMapType===Wt,tangentSpaceNormalMap:n.normalMapType===jt,clearcoatNormalMap:!!n.clearcoatNormalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,sheen:!!n.sheen,combine:n.combine,vertexTangents:n.normalMap&&n.vertexTangents,vertexColors:n.vertexColors,vertexUvs:!!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatNormalMap||n.displacementMap),uvsVertexOnly:!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatNormalMap||!n.displacementMap),fog:!!b,useFog:n.fog,fogExp2:b&&b.isFogExp2,flatShading:n.flatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:a,skinning:n.skinning&&S>0,maxBones:S,useVertexTexture:o,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numClippingPlanes:g,numClipIntersection:y,dithering:n.dithering,shadowMapEnabled:e.shadowMap.enabled&&d.length>0,shadowMapType:e.shadowMap.type,toneMapping:n.toneMapped?e.toneMapping:ee,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===m,flipSided:n.side===f,depthPacking:void 0!==n.depthPacking&&n.depthPacking,index0AttributeName:n.index0AttributeName,extensionDerivatives:n.extensions&&n.extensions.derivatives,extensionFragDepth:n.extensions&&n.extensions.frawbuffers,extensionDrawbuffers:n.extensions&&n.extensions.drawbuffers,extensionShaderTextureLOD:n.extensions&&n.extensions.shaderTextureLOD,rendererExtensionFragDepth:i||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:i||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:i||null!==t.get("EXT_shader_texture_lod"),onBeforeCompile:n.onBeforeCompile}},this.getProgramCacheKey=function(t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)r.push(n),r.push(t.defines[n]);if(void 0===t.isRawShaderMaterial){for(var i=0;i<u.length;i++)r.push(t[u[i]]);r.push(e.outputEncoding),r.push(e.gammaFactor)}return r.push(t.onBeforeCompile.toString()),r.join()},this.acquireProgram=function(t,r){for(var i,a=0,o=n.length;a<o;a++){var s=n[a];if(s.cacheKey===r){++(i=s).usedTimes;break}}return void 0===i&&(i=new Sl(e,r,t),n.push(i)),i},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function El(){var e=new WeakMap;return{get:function(t){var r=e.get(t);return void 0===r&&(r={},e.set(t,r)),r},remove:function(t){e.delete(t)},update:function(t,r,n){e.get(t)[r]=n},dispose:function(){e=new WeakMap}}}function Al(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ll(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Rl(){var e=[],t=0,r=[],n=[],i={id:-1};function a(r,n,a,o,s,c){var l=e[t];return void 0===l?(l={id:r.id,object:r,geometry:n,material:a,program:a.program||i,groupOrder:o,renderOrder:r.renderOrder,z:s,group:c},e[t]=l):(l.id=r.id,l.object=r,l.geometry=n,l.material=a,l.program=a.program||i,l.groupOrder=o,l.renderOrder=r.renderOrder,l.z=s,l.group=c),t++,l}return{opaque:r,transparent:n,init:function(){t=0,r.length=0,n.length=0},push:function(e,t,i,o,s,c){var l=a(e,t,i,o,s,c);(!0===i.transparent?n:r).push(l)},unshift:function(e,t,i,o,s,c){var l=a(e,t,i,o,s,c);(!0===i.transparent?n:r).unshift(l)},sort:function(e,t){r.length>1&&r.sort(e||Al),n.length>1&&n.sort(t||Ll)}}}function Cl(){var e=new WeakMap;function t(r){var n=r.target;n.removeEventListener("dispose",t),e.delete(n)}return{get:function(r,n){var i,a=e.get(r);return void 0===a?(i=new Rl,e.set(r,new WeakMap),e.get(r).set(n,i),r.addEventListener("dispose",t)):void 0===(i=a.get(n))&&(i=new Rl,a.set(n,i)),i},dispose:function(){e=new WeakMap}}}function Pl(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Dr,color:new Qn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new wr};break;case"SpotLight":r={position:new Dr,direction:new Dr,color:new Qn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new wr};break;case"PointLight":r={position:new Dr,color:new Qn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new wr,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new Dr,skyColor:new Qn,groundColor:new Qn};break;case"RectAreaLight":r={color:new Qn,position:new Dr,halfWidth:new Dr,halfHeight:new Dr}}return e[t.id]=r,r}}}var Ol=0;function Dl(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Il(){for(var e=new Pl,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},r=0;r<9;r++)t.probe.push(new Dr);var n=new Dr,i=new Hr,a=new Hr;return{setup:function(r,o,s){for(var c=0,l=0,h=0,u=0;u<9;u++)t.probe[u].set(0,0,0);var p=0,d=0,f=0,m=0,v=0,g=0,y=0,x=0,b=s.matrixWorldInverse;r.sort(Dl),u=0;for(var _=r.length;u<_;u++){var w=r[u],M=w.color,S=w.intensity,T=w.distance,E=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)c+=M.r*S,l+=M.g*S,h+=M.b*S;else if(w.isLightProbe)for(var A=0;A<9;A++)t.probe[A].addScaledVector(w.sh.coefficients[A],S);else if(w.isDirectionalLight){if((R=e.get(w)).color.copy(w.color).multiplyScalar(w.intensity),R.direction.setFromMatrixPosition(w.matrixWorld),n.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(n),R.direction.transformDirection(b),R.shadow=w.castShadow,w.castShadow){var L=w.shadow;R.shadowBias=L.bias,R.shadowRadius=L.radius,R.shadowMapSize=L.mapSize,t.directionalShadowMap[p]=E,t.directionalShadowMatrix[p]=w.shadow.matrix,g++}t.directional[p]=R,p++}else if(w.isSpotLight)(R=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(b),R.color.copy(M).multiplyScalar(S),R.distance=T,R.direction.setFromMatrixPosition(w.matrixWorld),n.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(n),R.direction.transformDirection(b),R.coneCos=Math.cos(w.angle),R.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),R.decay=w.decay,R.shadow=w.castShadow,w.castShadow&&(L=w.shadow,R.shadowBias=L.bias,R.shadowRadius=L.radius,R.shadowMapSize=L.mapSize,t.spotShadowMap[f]=E,t.spotShadowMatrix[f]=w.shadow.matrix,x++),t.spot[f]=R,f++;else if(w.isRectAreaLight)(R=e.get(w)).color.copy(M).multiplyScalar(S),R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(b),a.identity(),i.copy(w.matrixWorld),i.premultiply(b),a.extractRotation(i),R.halfWidth.set(.5*w.width,0,0),R.halfHeight.set(0,.5*w.height,0),R.halfWidth.applyMatrix4(a),R.halfHeight.applyMatrix4(a),t.rectArea[m]=R,m++;else if(w.isPointLight)(R=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(b),R.color.copy(w.color).multiplyScalar(w.intensity),R.distance=w.distance,R.decay=w.decay,R.shadow=w.castShadow,w.castShadow&&(L=w.shadow,R.shadowBias=L.bias,R.shadowRadius=L.radius,R.shadowMapSize=L.mapSize,R.shadowCameraNear=L.camera.near,R.shadowCameraFar=L.camera.far,t.pointShadowMap[d]=E,t.pointShadowMatrix[d]=w.shadow.matrix,y++),t.point[d]=R,d++;else if(w.isHemisphereLight){var R;(R=e.get(w)).direction.setFromMatrixPosition(w.matrixWorld),R.direction.transformDirection(b),R.direction.normalize(),R.skyColor.copy(w.color).multiplyScalar(S),R.groundColor.copy(w.groundColor).multiplyScalar(S),t.hemi[v]=R,v++}}t.ambient[0]=c,t.ambient[1]=l,t.ambient[2]=h;var C=t.hash;C.directionalLength===p&&C.pointLength===d&&C.spotLength===f&&C.rectAreaLength===m&&C.hemiLength===v&&C.numDirectionalShadows===g&&C.numPointShadows===y&&C.numSpotShadows===x||(t.directional.length=p,t.spot.length=f,t.rectArea.length=m,t.point.length=d,t.hemi.length=v,t.directionalShadowMap.length=g,t.pointShadowMap.length=y,t.spotShadowMap.length=x,t.directionalShadowMatrix.length=g,t.pointShadowMatrix.length=y,t.spotShadowMatrix.length=x,C.directionalLength=p,C.pointLength=d,C.spotLength=f,C.rectAreaLength=m,C.hemiLength=v,C.numDirectionalShadows=g,C.numPointShadows=y,C.numSpotShadows=x,t.version=Ol++)},state:t}}function Nl(){var e=new Il,t=[],r=[];return{init:function(){t.length=0,r.length=0},state:{lightsArray:t,shadowsArray:r,lights:e},setupLights:function(n){e.setup(t,r,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){r.push(e)}}}function Fl(){var e=new WeakMap;function t(r){var n=r.target;n.removeEventListener("dispose",t),e.delete(n)}return{get:function(r,n){var i;return!1===e.has(r)?(i=new Nl,e.set(r,new WeakMap),e.get(r).set(n,i),r.addEventListener("dispose",t)):!1===e.get(r).has(n)?(i=new Nl,e.get(r).set(n,i)):i=e.get(r).get(n),i},dispose:function(){e=new WeakMap}}}function Bl(e){ni.call(this),this.type="MeshDepthMaterial",this.depthPacking=Vt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function zl(e){ni.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Dr,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}Bl.prototype=Object.create(ni.prototype),Bl.prototype.constructor=Bl,Bl.prototype.isMeshDepthMaterial=!0,Bl.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},zl.prototype=Object.create(ni.prototype),zl.prototype.constructor=zl,zl.prototype.isMeshDistanceMaterial=!0,zl.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var Ul="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",Gl="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Hl(e,t,r){var n=new fa,i=new wr,a=new wr,o=new Ar,s=[],c=[],l={},u={0:f,1:d,2:m},v=new ia({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new wr},radius:{value:4}},vertexShader:Gl,fragmentShader:Ul}),g=v.clone();g.defines.HORIZONAL_PASS=1;var y=new Ti;y.setAttribute("position",new oi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var x=new ki(y,v),b=this;function w(r,n){var i=t.update(x);v.uniforms.shadow_pass.value=r.map.texture,v.uniforms.resolution.value=r.mapSize,v.uniforms.radius.value=r.radius,e.setRenderTarget(r.mapPass),e.clear(),e.renderBufferDirect(n,null,i,v,x,null),g.uniforms.shadow_pass.value=r.mapPass.texture,g.uniforms.resolution.value=r.mapSize,g.uniforms.radius.value=r.radius,e.setRenderTarget(r.map),e.clear(),e.renderBufferDirect(n,null,i,g,x,null)}function M(e,t,r){var n=e<<0|t<<1|r<<2,i=s[n];return void 0===i&&(i=new Bl({depthPacking:kt,morphTargets:e,skinning:t}),s[n]=i),i}function S(e,t,r){var n=e<<0|t<<1|r<<2,i=c[n];return void 0===i&&(i=new zl({morphTargets:e,skinning:t}),c[n]=i),i}function T(t,r,n,i,a,o){var s=t.geometry,c=null,h=M,d=t.customDepthMaterial;if(!0===n.isPointLight&&(h=S,d=t.customDistanceMaterial),void 0===d){var f=!1;!0===r.morphTargets&&(!0===s.isBufferGeometry?f=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(f=s.morphTargets&&s.morphTargets.length>0));var m=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?m=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),c=h(f,m,!0===t.isInstancedMesh)}else c=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var v=c.uuid,g=r.uuid,y=l[v];void 0===y&&(y={},l[v]=y);var x=y[g];void 0===x&&(x=c.clone(),y[g]=x),c=x}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=o===p?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:u[r.side],c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,!0===n.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(n.matrixWorld),c.nearDistance=i,c.farDistance=a),c}function E(r,i,a,o,s){if(!1!==r.visible){if(r.layers.test(i.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&s===p)&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);var c=t.update(r),l=r.material;if(Array.isArray(l))for(var h=c.groups,u=0,d=h.length;u<d;u++){var f=h[u],m=l[f.materialIndex];if(m&&m.visible){var v=T(r,m,o,a.near,a.far,s);e.renderBufferDirect(a,null,c,v,r,f)}}else if(l.visible){v=T(r,l,o,a.near,a.far,s);e.renderBufferDirect(a,null,c,v,r,null)}}for(var g=r.children,y=0,x=g.length;y<x;y++)E(g[y],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(t,s,c){if(!1!==b.enabled&&(!1!==b.autoUpdate||!1!==b.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),h=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),d=e.state;d.setBlending(_),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,m=t.length;f<m;f++){var v=t[f],g=v.shadow;if(void 0!==g){i.copy(g.mapSize);var y=g.getFrameExtents();if(i.multiply(y),a.copy(g.mapSize),(i.x>r||i.y>r)&&(console.warn("THREE.WebGLShadowMap:",v,"has shadow exceeding max texture size, reducing"),i.x>r&&(a.x=Math.floor(r/y.x),i.x=a.x*y.x,g.mapSize.x=a.x),i.y>r&&(a.y=Math.floor(r/y.y),i.y=a.y*y.y,g.mapSize.y=a.y)),null===g.map&&!g.isPointLightShadow&&this.type===p){var x={minFilter:we,magFilter:we,format:He};g.map=new Lr(i.x,i.y,x),g.map.texture.name=v.name+".shadowMap",g.mapPass=new Lr(i.x,i.y,x),g.camera.updateProjectionMatrix()}if(null===g.map){x={minFilter:ge,magFilter:ge,format:He};g.map=new Lr(i.x,i.y,x),g.map.texture.name=v.name+".shadowMap",g.camera.updateProjectionMatrix()}e.setRenderTarget(g.map),e.clear();for(var M=g.getViewportCount(),S=0;S<M;S++){var T=g.getViewport(S);o.set(a.x*T.x,a.y*T.y,a.x*T.z,a.y*T.w),d.viewport(o),g.updateMatrices(v,S),n=g.getFrustum(),E(s,c,g.camera,v,this.type)}g.isPointLightShadow||this.type!==p||w(g,c)}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}b.needsUpdate=!1,e.setRenderTarget(l,h,u)}}}function Vl(e,t,r){var o=r.isWebGL2;var s=new function(){var t=!1,r=new Ar,n=null,i=new Ar(0,0,0,0);return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,a,o,s){!0===s&&(t*=o,n*=o,a*=o),r.set(t,n,a,o),!1===i.equals(r)&&(e.clearColor(t,n,a,o),i.copy(r))},reset:function(){t=!1,n=null,i.set(-1,0,0,0)}}},c=new function(){var t=!1,r=null,n=null,i=null;return{setTest:function(e){e?xe(2929):be(2929)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case k:e.depthFunc(512);break;case j:e.depthFunc(519);break;case W:e.depthFunc(513);break;case q:e.depthFunc(515);break;case X:e.depthFunc(514);break;case Y:e.depthFunc(518);break;case Z:e.depthFunc(516);break;case J:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}},l=new function(){var t=!1,r=null,n=null,i=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(e){t||(e?xe(2960):be(2960))},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,o){n===t&&i===r&&a===o||(e.stencilFunc(t,r,o),n=t,i=r,a=o)},setOp:function(t,r,n){o===t&&s===r&&c===n||(e.stencilOp(t,r,n),o=t,s=r,c=n)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,r=null,n=null,i=null,a=null,o=null,s=null,c=null,l=null}}},h=e.getParameter(34921),u=new Uint8Array(h),p=new Uint8Array(h),d=new Uint8Array(h),v={},g=null,y=null,x=null,b=null,Q=null,K=null,$=null,ee=null,te=null,re=!1,ne=null,ie=null,ae=null,oe=null,se=null,ce=e.getParameter(35661),le=!1,he=0,ue=e.getParameter(7938);-1!==ue.indexOf("WebGL")?(he=parseFloat(/^WebGL\ ([0-9])/.exec(ue)[1]),le=he>=1):-1!==ue.indexOf("OpenGL ES")&&(he=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ue)[1]),le=he>=2);var pe=null,de={},fe=new Ar,me=new Ar;function ve(t,r,n){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<n;o++)e.texImage2D(r+o,0,6408,1,1,0,6408,5121,i);return a}var ge={};function ye(r,n){(u[r]=1,0===p[r]&&(e.enableVertexAttribArray(r),p[r]=1),d[r]!==n)&&((o?e:t.get("ANGLE_instanced_arrays"))[o?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,n),d[r]=n)}function xe(t){!0!==v[t]&&(e.enable(t),v[t]=!0)}function be(t){!1!==v[t]&&(e.disable(t),v[t]=!1)}ge[3553]=ve(3553,3553,1),ge[34067]=ve(34067,34069,6),s.setClear(0,0,0,1),c.setClear(1),l.setClear(0),xe(2929),c.setFunc(q),Te(!1),Ee(i),xe(2884),Se(_);var _e={[A]:32774,[L]:32778,[R]:32779};if(o)_e[C]=32775,_e[P]=32776;else{var we=t.get("EXT_blend_minmax");null!==we&&(_e[C]=we.MIN_EXT,_e[P]=we.MAX_EXT)}var Me={[O]:0,[D]:1,[I]:768,[F]:770,[V]:776,[G]:774,[z]:772,[N]:769,[B]:771,[H]:775,[U]:773};function Se(t,r,n,i,a,o,s,c){if(t!==_){if(y||(xe(3042),y=!0),t===E)a=a||r,o=o||n,s=s||i,r===b&&a===$||(e.blendEquationSeparate(_e[r],_e[a]),b=r,$=a),n===Q&&i===K&&o===ee&&s===te||(e.blendFuncSeparate(Me[n],Me[i],Me[o],Me[s]),Q=n,K=i,ee=o,te=s),x=t,re=null;else if(t!==x||c!==re){if(b===A&&$===A||(e.blendEquation(32774),b=A,$=A),c)switch(t){case w:e.blendFuncSeparate(1,771,1,771);break;case M:e.blendFunc(1,1);break;case S:e.blendFuncSeparate(0,0,769,771);break;case T:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case w:e.blendFuncSeparate(770,771,1,771);break;case M:e.blendFunc(770,1);break;case S:e.blendFunc(0,769);break;case T:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}Q=null,K=null,ee=null,te=null,x=t,re=c}}else y&&(be(3042),y=!1)}function Te(t){ne!==t&&(t?e.frontFace(2304):e.frontFace(2305),ne=t)}function Ee(t){t!==n?(xe(2884),t!==ie&&(t===i?e.cullFace(1029):t===a?e.cullFace(1028):e.cullFace(1032))):be(2884),ie=t}function Ae(t,r,n){t?(xe(32823),oe===r&&se===n||(e.polygonOffset(r,n),oe=r,se=n)):be(32823)}function Le(t){void 0===t&&(t=33984+ce-1),pe!==t&&(e.activeTexture(t),pe=t)}return{buffers:{color:s,depth:c,stencil:l},initAttributes:function(){for(var e=0,t=u.length;e<t;e++)u[e]=0},enableAttribute:function(e){ye(e,0)},enableAttributeAndDivisor:ye,disableUnusedAttributes:function(){for(var t=0,r=p.length;t!==r;++t)p[t]!==u[t]&&(e.disableVertexAttribArray(t),p[t]=0)},enable:xe,disable:be,useProgram:function(t){return g!==t&&(e.useProgram(t),g=t,!0)},setBlending:Se,setMaterial:function(e,t){e.side===m?be(2884):xe(2884);var r=e.side===f;t&&(r=!r),Te(r),e.blending===w&&!1===e.transparent?Se(_):Se(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),c.setFunc(e.depthFunc),c.setTest(e.depthTest),c.setMask(e.depthWrite),s.setMask(e.colorWrite);var n=e.stencilWrite;l.setTest(n),n&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ae(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:Te,setCullFace:Ee,setLineWidth:function(t){t!==ae&&(le&&e.lineWidth(t),ae=t)},setPolygonOffset:Ae,setScissorTest:function(e){e?xe(3089):be(3089)},activeTexture:Le,bindTexture:function(t,r){null===pe&&Le();var n=de[pe];void 0===n&&(n={type:void 0,texture:void 0},de[pe]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||ge[t]),n.type=t,n.texture=r)},unbindTexture:function(){var t=de[pe];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===fe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),fe.copy(t))},viewport:function(t){!1===me.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),me.copy(t))},reset:function(){for(var t=0;t<p.length;t++)1===p[t]&&(e.disableVertexAttribArray(t),p[t]=0);v={},pe=null,de={},g=null,x=null,ne=null,ie=null,s.reset(),c.reset(),l.reset()}}}function kl(e,t,r,n,i,a,o){var s,c=i.isWebGL2,l=i.maxTextures,h=i.maxCubemapSize,u=i.maxTextureSize,p=i.maxSamples,d=new WeakMap,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(e,t,r,n){var i=1;if((e.width>n||e.height>n)&&(i=n/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?_r.floorPowerOfTwo:Math.floor,o=a(i*e.width),c=a(i*e.height);void 0===s&&(s=m(o,c));var l=r?m(o,c):s;return l.width=o,l.height=c,l.getContext("2d").drawImage(e,0,0,o,c),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+c+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return _r.isPowerOfTwo(e.width)&&_r.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==ge&&e.minFilter!==we}function x(t,r,i,a){e.generateMipmap(t),n.get(r).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function b(r,n,i){if(!1===c)return n;if(null!==r){if(void 0!==e[r])return e[r];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+r+"'")}var a=n;return 6403===n&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===n&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===n&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325===a||33326===a||34842===a||34836===a?t.get("EXT_color_buffer_float"):34843!==a&&34837!==a||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),a}function _(e){return e===ge||e===ye||e===be?9728:9729}function w(t){var r=t.target;r.removeEventListener("dispose",w),function(t){var r=n.get(t);if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture),n.remove(t)}(r),r.isVideoTexture&&d.delete(r),o.memory.textures--}function M(t){var r=t.target;r.removeEventListener("dispose",M),function(t){var r=n.get(t),i=n.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var a=0;a<6;a++)e.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[a]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);if(t.isWebGLMultiviewRenderTarget){e.deleteTexture(r.__webglColorTexture),e.deleteTexture(r.__webglDepthStencilTexture),o.memory.textures-=2;for(var a=0,s=r.__webglViewFramebuffers.length;a<s;a++)e.deleteFramebuffer(r.__webglViewFramebuffers[a])}n.remove(t.texture),n.remove(t)}(r),o.memory.textures--}var S=0;function T(e,t){var i=n.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void O(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+t),r.bindTexture(3553,i.__webglTexture)}function E(t,i){if(6===t.image.length){var o=n.get(t);if(t.version>0&&o.__version!==t.version){P(o,t),r.activeTexture(33984+i),r.bindTexture(34067,o.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),l=t.image[0]&&t.image[0].isDataTexture,u=[],p=0;p<6;p++)u[p]=s||l?l?t.image[p].image:t.image[p]:v(t.image[p],!1,!0,h);var d,f=u[0],m=g(f)||c,_=a.convert(t.format),w=a.convert(t.type),M=b(t.internalFormat,_,w);if(C(34067,t,m),s){for(p=0;p<6;p++){d=u[p].mipmaps;for(var S=0;S<d.length;S++){var T=d[S];t.format!==He&&t.format!==Ge?null!==_?r.compressedTexImage2D(34069+p,S,M,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+p,S,M,T.width,T.height,0,_,w,T.data)}}o.__maxMipLevel=d.length-1}else{d=t.mipmaps;for(p=0;p<6;p++)if(l){r.texImage2D(34069+p,0,M,u[p].width,u[p].height,0,_,w,u[p].data);for(S=0;S<d.length;S++){var E=(T=d[S]).image[p].image;r.texImage2D(34069+p,S+1,M,E.width,E.height,0,_,w,E.data)}}else{r.texImage2D(34069+p,0,M,_,w,u[p]);for(S=0;S<d.length;S++){T=d[S];r.texImage2D(34069+p,S+1,M,_,w,T.image[p])}}o.__maxMipLevel=d.length}y(t,m)&&x(34067,t,f.width,f.height),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(33984+i),r.bindTexture(34067,o.__webglTexture)}}function A(e,t){r.activeTexture(33984+t),r.bindTexture(34067,n.get(e).__webglTexture)}var L={[fe]:10497,[me]:33071,[ve]:33648},R={[ge]:9728,[ye]:9984,[be]:9986,[we]:9729,[Me]:9985,[Te]:9987};function C(r,a,o){o?(e.texParameteri(r,10242,L[a.wrapS]),e.texParameteri(r,10243,L[a.wrapT]),32879!==r&&35866!==r||e.texParameteri(r,32882,L[a.wrapR]),e.texParameteri(r,10240,R[a.magFilter]),e.texParameteri(r,10241,R[a.minFilter])):(e.texParameteri(r,10242,33071),e.texParameteri(r,10243,33071),32879!==r&&35866!==r||e.texParameteri(r,32882,33071),a.wrapS===me&&a.wrapT===me||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(r,10240,_(a.magFilter)),e.texParameteri(r,10241,_(a.minFilter)),a.minFilter!==ge&&a.minFilter!==we&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(a.type===De&&null===t.get("OES_texture_float_linear"))return;if(a.type===Ie&&null===(c||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(r,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function P(t,r){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),o.memory.textures++)}function O(t,n,i){var o=3553;n.isDataTexture2DArray&&(o=35866),n.isDataTexture3D&&(o=32879),P(t,n),r.activeTexture(33984+i),r.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment);var s=function(e){return!c&&(e.wrapS!==me||e.wrapT!==me||e.minFilter!==ge&&e.minFilter!==we)}(n)&&!1===g(n.image),l=v(n.image,s,!1,u),h=g(l)||c,p=a.convert(n.format),d=a.convert(n.type),f=b(n.internalFormat,p,d);C(o,n,h);var m,_=n.mipmaps;if(n.isDepthTexture){if(f=6402,n.type===De){if(!1===c)throw new Error("Float Depth Texture only supported in WebGL2.0");f=36012}else c&&(f=33189);n.format===We&&6402===f&&n.type!==Ce&&n.type!==Oe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Ce,d=a.convert(n.type)),n.format===qe&&(f=34041,n.type!==ze&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=ze,d=a.convert(n.type))),r.texImage2D(3553,0,f,l.width,l.height,0,p,d,null)}else if(n.isDataTexture)if(_.length>0&&h){for(var w=0,M=_.length;w<M;w++)m=_[w],r.texImage2D(3553,w,f,m.width,m.height,0,p,d,m.data);n.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else r.texImage2D(3553,0,f,l.width,l.height,0,p,d,l.data),t.__maxMipLevel=0;else if(n.isCompressedTexture){for(w=0,M=_.length;w<M;w++)m=_[w],n.format!==He&&n.format!==Ge?null!==p?r.compressedTexImage2D(3553,w,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,w,f,m.width,m.height,0,p,d,m.data);t.__maxMipLevel=_.length-1}else if(n.isDataTexture2DArray)r.texImage3D(35866,0,f,l.width,l.height,l.depth,0,p,d,l.data),t.__maxMipLevel=0;else if(n.isDataTexture3D)r.texImage3D(32879,0,f,l.width,l.height,l.depth,0,p,d,l.data),t.__maxMipLevel=0;else if(_.length>0&&h){for(w=0,M=_.length;w<M;w++)m=_[w],r.texImage2D(3553,w,f,p,d,m);n.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else r.texImage2D(3553,0,f,p,d,l),t.__maxMipLevel=0;y(n,h)&&x(o,n,l.width,l.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function D(t,i,o,s){var c=a.convert(i.texture.format),l=a.convert(i.texture.type),h=b(i.texture.internalFormat,c,l);r.texImage2D(s,0,h,i.width,i.height,0,c,l,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function I(t,r,n){if(e.bindRenderbuffer(36161,t),r.depthBuffer&&!r.stencilBuffer){if(n){var i=F(r);e.renderbufferStorageMultisample(36161,i,33189,r.width,r.height)}else e.renderbufferStorage(36161,33189,r.width,r.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(r.depthBuffer&&r.stencilBuffer){if(n){i=F(r);e.renderbufferStorageMultisample(36161,i,35056,r.width,r.height)}else e.renderbufferStorage(36161,34041,r.width,r.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var o=a.convert(r.texture.format),s=a.convert(r.texture.type),c=b(r.texture.internalFormat,o,s);if(n){i=F(r);e.renderbufferStorageMultisample(36161,i,c,r.width,r.height)}else e.renderbufferStorage(36161,c,r.width,r.height)}e.bindRenderbuffer(36161,null)}function N(t){var r=n.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===We)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(r.depthTexture.format!==qe)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(36160,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=e.createRenderbuffer(),I(r.__webglDepthbuffer[a],t)}else e.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),I(r.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function F(e){return c&&e.isWebGLMultisampleRenderTarget?Math.min(p,e.samples):0}var B=!1,z=!1;this.allocateTextureUnit=function(){var e=S;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?O(i,e,t):(r.activeTexture(33984+t),r.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?O(i,e,t):(r.activeTexture(33984+t),r.bindTexture(32879,i.__webglTexture))},this.setTextureCube=E,this.setTextureCubeDynamic=A,this.setupRenderTarget=function(i){var s=n.get(i),l=n.get(i.texture);i.addEventListener("dispose",M),l.__webglTexture=e.createTexture(),o.memory.textures++;var h=!0===i.isWebGLCubeRenderTarget,u=!0===i.isWebGLMultisampleRenderTarget,p=!0===i.isWebGLMultiviewRenderTarget,d=g(i)||c;if(h){s.__webglFramebuffer=[];for(var f=0;f<6;f++)s.__webglFramebuffer[f]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),u)if(c){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var m=a.convert(i.texture.format),v=a.convert(i.texture.type),_=b(i.texture.internalFormat,m,v),w=F(i);e.renderbufferStorageMultisample(36161,w,_,i.width,i.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),i.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),I(s.__webglDepthRenderbuffer,i,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(p){var S=i.width,T=i.height,E=i.numViews;e.bindFramebuffer(36160,s.__webglFramebuffer);var A=t.get("OVR_multiview2");o.memory.textures+=2;var L=e.createTexture();e.bindTexture(35866,L),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,32856,S,T,E,0,6408,5121,null),A.framebufferTextureMultiviewOVR(36160,36064,L,0,0,E);var R=e.createTexture();e.bindTexture(35866,R),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,35056,S,T,E,0,34041,34042,null),A.framebufferTextureMultiviewOVR(36160,33306,R,0,0,E);var P=new Array(E);for(f=0;f<E;++f)P[f]=e.createFramebuffer(),e.bindFramebuffer(36160,P[f]),e.framebufferTextureLayer(36160,36064,L,0,f);s.__webglColorTexture=L,s.__webglDepthStencilTexture=R,s.__webglViewFramebuffers=P,e.bindFramebuffer(36160,null),e.bindTexture(35866,null)}if(h){for(r.bindTexture(34067,l.__webglTexture),C(34067,i.texture,d),f=0;f<6;f++)D(s.__webglFramebuffer[f],i,36064,34069+f);y(i.texture,d)&&x(34067,i.texture,i.width,i.height),r.bindTexture(34067,null)}else p||(r.bindTexture(3553,l.__webglTexture),C(3553,i.texture,d),D(s.__webglFramebuffer,i,36064,3553),y(i.texture,d)&&x(3553,i.texture,i.width,i.height),r.bindTexture(3553,null));i.depthBuffer&&N(i)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(y(t,g(e)||c)){var i=e.isWebGLCubeRenderTarget?34067:3553,a=n.get(t).__webglTexture;r.bindTexture(i,a),x(i,t,e.width,e.height),r.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(c){var r=n.get(t);e.bindFramebuffer(36008,r.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,r.__webglFramebuffer);var i=t.width,a=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?E(e,t):A(e,t)}}function jl(e,t,r){var n=r.isWebGL2;return{convert:function(e){var r;if(e===Ae)return 5121;if(e===Ne)return 32819;if(e===Fe)return 32820;if(e===Be)return 33635;if(e===Le)return 5120;if(e===Re)return 5122;if(e===Ce)return 5123;if(e===Pe)return 5124;if(e===Oe)return 5125;if(e===De)return 5126;if(e===Ie)return n?5131:null!==(r=t.get("OES_texture_half_float"))?r.HALF_FLOAT_OES:null;if(e===Ue)return 6406;if(e===Ge)return 6407;if(e===He)return 6408;if(e===Ve)return 6409;if(e===ke)return 6410;if(e===We)return 6402;if(e===qe)return 34041;if(e===Xe)return 6403;if(e===Ye)return 36244;if(e===Ze)return 33319;if(e===Je)return 33320;if(e===Qe)return 36248;if(e===Ke)return 36249;if(e===$e||e===et||e===tt||e===rt){if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===$e)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===et)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===tt)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===rt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===nt||e===it||e===at||e===ot){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===nt)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===it)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===at)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===ot)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return e===st?null!==(r=t.get("WEBGL_compressed_texture_etc1"))?r.COMPRESSED_RGB_ETC1_WEBGL:null:e===ct||e===lt||e===ht||e===ut||e===pt||e===dt||e===ft||e===mt||e===vt||e===gt||e===yt||e===xt||e===bt||e===_t?null!==(r=t.get("WEBGL_compressed_texture_astc"))?e:null:e===ze?n?34042:null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Wl(e,t,r,n){Lr.call(this,e,t,n),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=r}function ql(e,t){var r,n,i,a,o,s,c,l=2,h=e.extensions,u=e.properties,p=0;function d(e){return e.isArrayCamera?e.cameras:(o[0]=e,o)}this.isAvailable=function(){if(void 0===c){var e=h.get("OVR_multiview2");if(c=null!==e&&!1===t.getContextAttributes().antialias){p=t.getParameter(e.MAX_VIEWS_OVR),r=new Wl(0,0,l),s=new wr,a=[],i=[],o=[];for(var n=0;n<p;n++)a[n]=new Hr,i[n]=new Mr}}return c},this.attachCamera=function(t){!1!==function(e){if(void 0===e.isArrayCamera)return!0;var t=e.cameras;if(t.length>p)return!1;for(var r=1,n=t.length;r<n;r++)if(t[0].viewport.z!==t[r].viewport.z||t[0].viewport.w!==t[r].viewport.w)return!1;return!0}(t)&&(n=e.getRenderTarget(),function(t){if(n?s.set(n.width,n.height):e.getDrawingBufferSize(s),t.isArrayCamera){var i=t.cameras[0].viewport;r.setSize(i.z,i.w),r.setNumViews(t.cameras.length)}else r.setSize(s.x,s.y),r.setNumViews(l)}(t),e.setRenderTarget(r))},this.detachCamera=function(i){r===e.getRenderTarget()&&(e.setRenderTarget(n),function(e){var n=r,i=n.numViews,a=u.get(n).__webglViewFramebuffers,o=n.width,c=n.height;if(e.isArrayCamera)for(var l=0;l<i;l++){var h=e.cameras[l].viewport,p=h.x,d=h.y,f=p+h.z,m=d+h.w;t.bindFramebuffer(36008,a[l]),t.blitFramebuffer(0,0,o,c,p,d,f,m,16384,9728)}else t.bindFramebuffer(36008,a[0]),t.blitFramebuffer(0,0,o,c,0,0,s.x,s.y,16384,9728)}(i))},this.updateCameraProjectionMatricesUniform=function(e,r){for(var n=d(e),i=0;i<n.length;i++)a[i].copy(n[i].projectionMatrix);r.setValue(t,"projectionMatrices",a)},this.updateCameraViewMatricesUniform=function(e,r){for(var n=d(e),i=0;i<n.length;i++)a[i].copy(n[i].matrixWorldInverse);r.setValue(t,"viewMatrices",a)},this.updateObjectMatricesUniforms=function(e,r,n){for(var o=d(r),s=0;s<o.length;s++)a[s].multiplyMatrices(o[s].matrixWorldInverse,e.matrixWorld),i[s].getNormalMatrix(a[s]);n.setValue(t,"modelViewMatrices",a),n.setValue(t,"normalMatrices",i)}}function Xl(e){oa.call(this),this.cameras=e||[]}function Yl(){on.call(this),this.type="Group"}function Zl(e,t){var r=this,n=null,i=null,a="local-floor",o=null,s=[],c=new Map,l=new oa;l.layers.enable(1),l.viewport=new Ar;var h=new oa;h.layers.enable(2),h.viewport=new Ar;var u=new Xl([l,h]);u.layers.enable(1),u.layers.enable(2);var p=null,d=null;function f(e){var t=c.get(e.inputSource);t&&(t.targetRay&&t.targetRay.dispatchEvent({type:e.type}),t.grip&&t.grip.dispatchEvent({type:e.type}))}function m(){c.forEach(function(e,t){e.targetRay&&(e.targetRay.dispatchEvent({type:"disconnected",data:t}),e.targetRay.visible=!1),e.grip&&(e.grip.dispatchEvent({type:"disconnected",data:t}),e.grip.visible=!1)}),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),w.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function v(e){i=e,w.setContext(n),w.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}function g(e){for(var t=n.inputSources,r=0;r<s.length;r++)c.set(t[r],s[r]);for(r=0;r<e.removed.length;r++){var i=e.removed[r];(a=c.get(i))&&(a.targetRay&&a.targetRay.dispatchEvent({type:"disconnected",data:i}),a.grip&&a.grip.dispatchEvent({type:"disconnected",data:i}),c.delete(i))}for(r=0;r<e.added.length;r++){var a;i=e.added[r];(a=c.get(i))&&(a.targetRay&&a.targetRay.dispatchEvent({type:"connected",data:i}),a.grip&&a.grip.dispatchEvent({type:"connected",data:i}))}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=s[e];return void 0===t&&(t={},s[e]=t),void 0===t.targetRay&&(t.targetRay=new Yl,t.targetRay.matrixAutoUpdate=!1,t.targetRay.visible=!1),t.targetRay},this.getControllerGrip=function(e){var t=s[e];return void 0===t&&(t={},s[e]=t),void 0===t.grip&&(t.grip=new Yl,t.grip.matrixAutoUpdate=!1,t.grip.visible=!1),t.grip},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){a=e},this.getReferenceSpace=function(){return i},this.getSession=function(){return n},this.setSession=function(e){if(null!==(n=e)){n.addEventListener("select",f),n.addEventListener("selectstart",f),n.addEventListener("selectend",f),n.addEventListener("squeeze",f),n.addEventListener("squeezestart",f),n.addEventListener("squeezeend",f),n.addEventListener("end",m);var r=t.getContextAttributes(),i={antialias:r.antialias,alpha:r.alpha,depth:r.depth,stencil:r.stencil},o=new XRWebGLLayer(n,t,i);n.updateRenderState({baseLayer:o}),n.requestReferenceSpace(a).then(v),n.addEventListener("inputsourceschange",g)}};var y=new Dr,x=new Dr;function b(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){u.near=h.near=l.near=e.near,u.far=h.far=l.far=e.far,p===u.near&&d===u.far||(n.updateRenderState({depthNear:u.near,depthFar:u.far}),p=u.near,d=u.far);var t=e.parent,r=u.cameras;b(u,t);for(var i=0;i<r.length;i++)b(r[i],t);e.matrixWorld.copy(u.matrixWorld);for(var a=e.children,o=(i=0,a.length);i<o;i++)a[i].updateMatrixWorld(!0);return function(e,t,r){y.setFromMatrixPosition(t.matrixWorld),x.setFromMatrixPosition(r.matrixWorld);var n=y.distanceTo(x),i=t.projectionMatrix.elements,a=r.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],h=(i[8]-1)/i[0],u=(a[8]+1)/a[0],p=o*h,d=o*u,f=n/(-h+u),m=f*-h;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=o+f,g=s+f,b=p-m,_=d+(n-m),w=c*s/g*v,M=l*s/g*v;e.projectionMatrix.makePerspective(b,_,w,M,v,g)}(u,l,h),u};var _=null;var w=new va;w.setAnimationLoop(function(t,r){if(null!==(o=r.getViewerPose(i))){var a=o.views,c=n.renderState.baseLayer;e.setFramebuffer(c.framebuffer);for(var l=0;l<a.length;l++){var h=a[l],p=c.getViewport(h),d=u.cameras[l];d.matrix.fromArray(h.transform.matrix),d.projectionMatrix.fromArray(h.projectionMatrix),d.viewport.set(p.x,p.y,p.width,p.height),0===l&&u.matrix.copy(d.matrix)}}var f=n.inputSources;for(l=0;l<s.length;l++){var m=s[l],v=f[l],g=null,y=null;v&&(m.targetRay&&null!==(g=r.getPose(v.targetRaySpace,i))&&(m.targetRay.matrix.fromArray(g.transform.matrix),m.targetRay.matrix.decompose(m.targetRay.position,m.targetRay.rotation,m.targetRay.scale)),m.grip&&v.gripSpace&&null!==(y=r.getPose(v.gripSpace,i))&&(m.grip.matrix.fromArray(y.transform.matrix),m.grip.matrix.decompose(m.grip.position,m.grip.rotation,m.grip.scale))),m.targetRay&&(m.targetRay.visible=null!==g),m.grip&&(m.grip.visible=null!==y)}_&&_(t,r)}),this.setAnimationLoop=function(e){_=e},this.dispose=function(){}}function Jl(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",h=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,u=null,p=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=It,this.physicallyCorrectLights=!1,this.toneMapping=te,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,m,v,g,y,x,b,_,w,M,S,T,E,A,L,R,C,P,O=this,D=!1,I=null,N=0,F=0,B=null,z=null,U=-1,G={geometry:null,program:null,wireframe:!1},H=null,V=null,k=new Ar,j=new Ar,W=null,q=t.width,X=t.height,Y=1,Z=null,J=null,Q=new Ar(0,0,q,X),K=new Ar(0,0,q,X),$=!1,ee=new fa,re=new Ws,ne=!1,ie=!1,ae=new Hr,oe=new Dr;function se(){return null===B?Y:1}try{var ce={alpha:n,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:h,xrCompatible:!0};if(t.addEventListener("webglcontextlost",de,!1),t.addEventListener("webglcontextrestored",fe,!1),null===(d=r||t.getContext("webgl",ce)||t.getContext("experimental-webgl",ce)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ee){throw console.error("THREE.WebGLRenderer: "+Ee.message),Ee}function le(){m=new qs(d),!1===(v=new js(d,m,e)).isWebGL2&&(m.get("WEBGL_depth_texture"),m.get("OES_texture_float"),m.get("OES_texture_half_float"),m.get("OES_texture_half_float_linear"),m.get("OES_standard_derivatives"),m.get("OES_element_index_uint"),m.get("ANGLE_instanced_arrays")),m.get("OES_texture_float_linear"),P=new jl(d,m,v),(g=new Vl(d,m,v)).scissor(j.copy(K).multiplyScalar(Y).floor()),g.viewport(k.copy(Q).multiplyScalar(Y).floor()),y=new Zs(d),x=new El,b=new kl(d,m,g,x,v,P,y),_=new ga(d,v),w=new Xs(d,_,y),M=new Ks(d,w,_,y),L=new Qs(d),S=new Tl(O,m,v),T=new Cl,E=new Fl,A=new Vs(O,g,M,s),R=new ks(d,m,y,v),C=new Ys(d,m,y,v),y.programs=S.programs,O.capabilities=v,O.extensions=m,O.properties=x,O.renderLists=T,O.state=g,O.info=y}le();var he=new Zl(O,d);this.xr=he;var ue=new ql(O,d),pe=new Hl(O,M,v.maxTextureSize);function de(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1,le()}function me(e){var t=e.target;t.removeEventListener("dispose",me),function(e){ve(e),x.remove(e)}(t)}function ve(e){var t=x.get(e).program;e.program=void 0,void 0!==t&&S.releaseProgram(t)}this.shadowMap=pe,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var e=m.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=m.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(q,X,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new wr),e.set(q,X)},this.setSize=function(e,r,n){he.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=e,X=r,t.width=Math.floor(e*Y),t.height=Math.floor(r*Y),!1!==n&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new wr),e.set(q*Y,X*Y).floor()},this.setDrawingBufferSize=function(e,r,n){q=e,X=r,Y=n,t.width=Math.floor(e*n),t.height=Math.floor(r*n),this.setViewport(0,0,e,r)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Ar),e.copy(k)},this.getViewport=function(e){return e.copy(Q)},this.setViewport=function(e,t,r,n){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,r,n),g.viewport(k.copy(Q).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(K)},this.setScissor=function(e,t,r,n){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,r,n),g.scissor(j.copy(K).multiplyScalar(Y).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(e){g.setScissorTest($=e)},this.setOpaqueSort=function(e){Z=e},this.setTransparentSort=function(e){J=e},this.getClearColor=function(){return A.getClearColor()},this.setClearColor=function(){A.setClearColor.apply(A,arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha.apply(A,arguments)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===r||r)&&(n|=1024),d.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",de,!1),t.removeEventListener("webglcontextrestored",fe,!1),T.dispose(),E.dispose(),x.dispose(),M.dispose(),he.dispose(),xe.stop()},this.renderBufferImmediate=function(e,t){g.initAttributes();var r=x.get(e);e.hasPositions&&!r.position&&(r.position=d.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=d.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=d.createBuffer()),e.hasColors&&!r.color&&(r.color=d.createBuffer());var n=t.getAttributes();e.hasPositions&&(d.bindBuffer(34962,r.position),d.bufferData(34962,e.positionArray,35048),g.enableAttribute(n.position),d.vertexAttribPointer(n.position,3,5126,!1,0,0)),e.hasNormals&&(d.bindBuffer(34962,r.normal),d.bufferData(34962,e.normalArray,35048),g.enableAttribute(n.normal),d.vertexAttribPointer(n.normal,3,5126,!1,0,0)),e.hasUvs&&(d.bindBuffer(34962,r.uv),d.bufferData(34962,e.uvArray,35048),g.enableAttribute(n.uv),d.vertexAttribPointer(n.uv,2,5126,!1,0,0)),e.hasColors&&(d.bindBuffer(34962,r.color),d.bufferData(34962,e.colorArray,35048),g.enableAttribute(n.color),d.vertexAttribPointer(n.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),d.drawArrays(4,0,e.count),e.count=0};var ge=new sn;this.renderBufferDirect=function(e,t,r,n,i,a){null===t&&(t=ge);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Me(e,t,n,i);g.setMaterial(n,o);var c=!1;G.geometry===r.id&&G.program===s.id&&G.wireframe===(!0===n.wireframe)||(G.geometry=r.id,G.program=s.id,G.wireframe=!0===n.wireframe,c=!0),(n.morphTargets||n.morphNormals)&&(L.update(i,r,n,s),c=!0);var l=r.index,h=r.attributes.position;if(null===l){if(void 0===h||0===h.count)return}else if(0===l.count)return;var u,p=1;!0===n.wireframe&&(l=w.getWireframeAttribute(r),p=2);var f=R;null!==l&&(u=_.get(l),(f=C).setIndex(u)),c&&(!function(e,t,r,n){if(!1===v.isWebGL2&&(e.isInstancedMesh||t.isInstancedBufferGeometry)&&null===m.get("ANGLE_instanced_arrays"))return;g.initAttributes();var i=t.attributes,a=n.getAttributes(),o=r.defaultAttributeValues;for(var s in a){var c=a[s];if(c>=0){var l=i[s];if(void 0!==l){var h=l.normalized,u=l.itemSize,p=_.get(l);if(void 0===p)continue;var f=p.buffer,y=p.type,x=p.bytesPerElement;if(l.isInterleavedBufferAttribute){var b=l.data,w=b.stride,M=l.offset;b&&b.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(c,b.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=b.meshPerAttribute*b.count)):g.enableAttribute(c),d.bindBuffer(34962,f),d.vertexAttribPointer(c,u,y,h,w*x,M*x)}else l.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(c,l.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=l.meshPerAttribute*l.count)):g.enableAttribute(c),d.bindBuffer(34962,f),d.vertexAttribPointer(c,u,y,h,0,0)}else if("instanceMatrix"===s){var p=_.get(e.instanceMatrix);if(void 0===p)continue;var f=p.buffer,y=p.type;g.enableAttributeAndDivisor(c+0,1),g.enableAttributeAndDivisor(c+1,1),g.enableAttributeAndDivisor(c+2,1),g.enableAttributeAndDivisor(c+3,1),d.bindBuffer(34962,f),d.vertexAttribPointer(c+0,4,y,!1,64,0),d.vertexAttribPointer(c+1,4,y,!1,64,16),d.vertexAttribPointer(c+2,4,y,!1,64,32),d.vertexAttribPointer(c+3,4,y,!1,64,48)}else if(void 0!==o){var S=o[s];if(void 0!==S)switch(S.length){case 2:d.vertexAttrib2fv(c,S);break;case 3:d.vertexAttrib3fv(c,S);break;case 4:d.vertexAttrib4fv(c,S);break;default:d.vertexAttrib1fv(c,S)}}}}g.disableUnusedAttributes()}(i,r,n,s),null!==l&&d.bindBuffer(34963,u.buffer));var y=null!==l?l.count:h.count,x=r.drawRange.start*p,b=r.drawRange.count*p,M=null!==a?a.start*p:0,S=null!==a?a.count*p:1/0,T=Math.max(x,M),E=Math.min(y,x+b,M+S)-1,A=Math.max(0,E-T+1);if(0!==A){if(i.isMesh)!0===n.wireframe?(g.setLineWidth(n.wireframeLinewidth*se()),f.setMode(1)):f.setMode(4);else if(i.isLine){var P=n.linewidth;void 0===P&&(P=1),g.setLineWidth(P*se()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);i.isInstancedMesh?f.renderInstances(r,T,A,i.count):r.isInstancedBufferGeometry?f.renderInstances(r,T,A,r.maxInstancedCount):f.render(T,A)}},this.compile=function(e,t){(p=E.get(e,t)).init(),e.traverse(function(e){e.isLight&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))}),p.setupLights(t);var r={};e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)t.material[n].uuid in r==!1&&(we(t.material[n],e,t),r[t.material[n].uuid]=!0);else t.material.uuid in r==!1&&(we(t.material,e,t),r[t.material.uuid]=!0)})};var ye=null;var xe=new va;function be(e,t,r,n){for(var i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,c=o.geometry,l=void 0===n?o.material:n,h=o.group;if(r.isArrayCamera)if(V=r,he.enabled&&ue.isAvailable())_e(s,t,r,c,l,h);else for(var u=r.cameras,d=0,f=u.length;d<f;d++){var m=u[d];s.layers.test(m.layers)&&(g.viewport(k.copy(m.viewport)),p.setupLights(m),_e(s,t,m,c,l,h))}else V=null,_e(s,t,r,c,l,h)}}function _e(e,t,r,n,i,a){if(e.onBeforeRender(O,t,r,n,i,a),p=E.get(t,V||r),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=Me(r,t,i,e);g.setMaterial(i),G.geometry=null,G.program=null,G.wireframe=!1,function(e,t){e.render(function(e){O.renderBufferImmediate(e,t)})}(e,o)}else O.renderBufferDirect(r,t,n,i,e,a);e.onAfterRender(O,t,r,n,i,a),p=E.get(t,V||r)}function we(e,t,r){var n=x.get(e),i=p.state.lights,a=p.state.shadowsArray,o=i.state.version,s=S.getParameters(e,i.state,a,t,re.numPlanes,re.numIntersection,r),c=S.getProgramCacheKey(s),l=n.program,h=!0;if(void 0===l)e.addEventListener("dispose",me);else if(l.cacheKey!==c)ve(e);else if(n.lightsStateVersion!==o)n.lightsStateVersion=o,h=!1;else{if(void 0!==s.shaderID)return;h=!1}h&&(l=S.acquireProgram(s,c),n.program=l,n.uniforms=s.uniforms,n.environment=e.isMeshStandardMaterial?t.environment:null,n.outputEncoding=O.outputEncoding,e.program=l);var u=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<O.maxMorphTargets;d++)u["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(d=0;d<O.maxMorphNormals;d++)u["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var f=n.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=re.numPlanes,n.numIntersection=re.numIntersection,f.clippingPlanes=re.uniform),n.fog=t.fog,n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=o,n.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.spotLights.value=i.state.spot,f.rectAreaLights.value=i.state.rectArea,f.pointLights.value=i.state.point,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=n.program.getUniforms(),v=Kc.seqWithValue(m.seq,f);n.uniformsList=v}function Me(e,t,r,n){b.resetTextureUnits();var i=t.fog,a=r.isMeshStandardMaterial?t.environment:null,o=x.get(r),s=p.state.lights;if(ne&&(ie||e!==H)){var c=e===H&&r.id===U;re.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,o,c)}r.version===o.__version?void 0===o.program?we(r,t,n):r.fog&&o.fog!==i?we(r,t,n):o.environment!==a?we(r,t,n):o.needsLights&&o.lightsStateVersion!==s.state.version?we(r,t,n):void 0===o.numClippingPlanes||o.numClippingPlanes===re.numPlanes&&o.numIntersection===re.numIntersection?o.outputEncoding!==O.outputEncoding&&we(r,t,n):we(r,t,n):(we(r,t,n),o.__version=r.version);var l,h,u=!1,m=!1,y=!1,_=o.program,w=_.getUniforms(),M=o.uniforms;if(g.useProgram(_.program)&&(u=!0,m=!0,y=!0),r.id!==U&&(U=r.id,m=!0),u||H!==e){if(_.numMultiviewViews>0?ue.updateCameraProjectionMatricesUniform(e,w):w.setValue(d,"projectionMatrix",e.projectionMatrix),v.logarithmicDepthBuffer&&w.setValue(d,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),H!==e&&(H=e,m=!0,y=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var S=w.map.cameraPosition;void 0!==S&&S.setValue(d,oe.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&w.setValue(d,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&(_.numMultiviewViews>0?ue.updateCameraViewMatricesUniform(e,w):w.setValue(d,"viewMatrix",e.matrixWorldInverse))}if(r.skinning){w.setOptional(d,n,"bindMatrix"),w.setOptional(d,n,"bindMatrixInverse");var T=n.skeleton;if(T){var E=T.bones;if(v.floatVertexTextures){if(void 0===T.boneTexture){var A=Math.sqrt(4*E.length);A=_r.ceilPowerOfTwo(A),A=Math.max(A,4);var L=new Float32Array(A*A*4);L.set(T.boneMatrices);var R=new ua(L,A,A,He,De);T.boneMatrices=L,T.boneTexture=R,T.boneTextureSize=A}w.setValue(d,"boneTexture",T.boneTexture,b),w.setValue(d,"boneTextureSize",T.boneTextureSize)}else w.setOptional(d,T,"boneMatrices")}}return(m||o.receiveShadow!==n.receiveShadow)&&(o.receiveShadow=n.receiveShadow,w.setValue(d,"receiveShadow",n.receiveShadow)),m&&(w.setValue(d,"toneMappingExposure",O.toneMappingExposure),w.setValue(d,"toneMappingWhitePoint",O.toneMappingWhitePoint),o.needsLights&&(h=y,(l=M).ambientLightColor.needsUpdate=h,l.lightProbe.needsUpdate=h,l.directionalLights.needsUpdate=h,l.pointLights.needsUpdate=h,l.spotLights.needsUpdate=h,l.rectAreaLights.needsUpdate=h,l.hemisphereLights.needsUpdate=h),i&&r.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(M,i),r.isMeshBasicMaterial?Se(M,r):r.isMeshLambertMaterial?(Se(M,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(M,r)):r.isMeshToonMaterial?(Se(M,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isMeshPhongMaterial?(Se(M,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isMeshStandardMaterial?(Se(M,r,a),r.isMeshPhysicalMaterial?function(e,t,r){Te(e,t,r),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===f&&e.clearcoatNormalScale.value.negate());e.transparency.value=t.transparency}(M,r,a):Te(M,r,a)):r.isMeshMatcapMaterial?(Se(M,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isMeshDepthMaterial?(Se(M,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isMeshDistanceMaterial?(Se(M,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(M,r)):r.isMeshNormalMaterial?(Se(M,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(M,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(M,r)):r.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Y,e.scale.value=.5*X,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(M,r):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(M,r):r.isShadowMaterial&&(M.color.value.copy(r.color),M.opacity.value=r.opacity),void 0!==M.ltc_1&&(M.ltc_1.value=ma.LTC_1),void 0!==M.ltc_2&&(M.ltc_2.value=ma.LTC_2),Kc.upload(d,o.uniformsList,M,b),r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Kc.upload(d,o.uniformsList,M,b),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&w.setValue(d,"center",n.center),_.numMultiviewViews>0?ue.updateObjectMatricesUniforms(n,e,w):(w.setValue(d,"modelViewMatrix",n.modelViewMatrix),w.setValue(d,"normalMatrix",n.normalMatrix)),w.setValue(d,"modelMatrix",n.matrixWorld),_}function Se(e,t,r){e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap);var n,i,a=t.envMap||r;a&&(e.envMap.value=a,e.flipEnvMap.value=a.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=x.get(a).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix)),t.aoMap?i=t.aoMap:t.lightMap&&(i=t.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function Te(e,t,r){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||r)&&(e.envMapIntensity.value=t.envMapIntensity)}xe.setAnimationLoop(function(e){he.isPresenting||ye&&ye(e)}),"undefined"!=typeof window&&xe.setContext(window),this.setAnimationLoop=function(e){ye=e,he.setAnimationLoop(e),xe.start()},this.render=function(e,t){var r,n;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),r=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),n=arguments[3]),t&&t.isCamera){if(!D){G.geometry=null,G.program=null,G.wireframe=!1,U=-1,H=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),he.enabled&&he.isPresenting&&(t=he.getCamera(t)),(p=E.get(e,t)).init(),e.onBeforeRender(O,e,t,r||B),ae.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ee.setFromProjectionMatrix(ae),ie=this.localClippingEnabled,ne=re.init(this.clippingPlanes,ie,t),(u=T.get(e,t)).init(),function e(t,r,n,i){if(!1===t.visible)return;var a=t.layers.test(r.layers);if(a)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(r);else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||ee.intersectsSprite(t)){i&&oe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ae);var o=M.update(t),s=t.material;s.visible&&u.push(t,o,s,n,oe.z,null)}}else if(t.isImmediateRenderObject)i&&oe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ae),u.push(t,null,t.material,n,oe.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==y.render.frame&&(t.skeleton.update(),t.skeleton.frame=y.render.frame),!t.frustumCulled||ee.intersectsObject(t))){i&&oe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ae);var o=M.update(t),s=t.material;if(Array.isArray(s))for(var c=o.groups,l=0,h=c.length;l<h;l++){var d=c[l],f=s[d.materialIndex];f&&f.visible&&u.push(t,o,f,n,oe.z,d)}else s.visible&&u.push(t,o,s,n,oe.z,null)}var m=t.children;for(var l=0,h=m.length;l<h;l++)e(m[l],r,n,i)}(e,t,0,O.sortObjects),!0===O.sortObjects&&u.sort(Z,J),ne&&re.beginShadows();var i=p.state.shadowsArray;pe.render(i,e,t),p.setupLights(t),ne&&re.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),he.enabled&&ue.isAvailable()&&ue.attachCamera(t),A.render(u,e,t,n);var a=u.opaque,o=u.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&be(a,e,t,s),o.length&&be(o,e,t,s)}else a.length&&be(a,e,t),o.length&&be(o,e,t);e.onAfterRender(O,e,t),null!==B&&(b.updateRenderTargetMipmap(B),b.updateMultisampleRenderTarget(B)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),he.enabled&&ue.isAvailable()&&ue.detachCamera(t),u=null,p=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){I!==e&&null===B&&d.bindFramebuffer(36160,e),I=e},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return B},this.setRenderTarget=function(e,t,r){B=e,N=t,F=r,e&&void 0===x.get(e).__webglFramebuffer&&b.setupRenderTarget(e);var n=I,i=!1;if(e){var a=x.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(n=a[t||0],i=!0):n=e.isWebGLMultisampleRenderTarget?x.get(e).__webglMultisampledFramebuffer:a,k.copy(e.viewport),j.copy(e.scissor),W=e.scissorTest}else k.copy(Q).multiplyScalar(Y).floor(),j.copy(K).multiplyScalar(Y).floor(),W=$;if(z!==n&&(d.bindFramebuffer(36160,n),z=n),g.viewport(k),g.scissor(j),g.setScissorTest(W),i){var o=x.get(e.texture);d.framebufferTexture2D(36160,36064,34069+(t||0),o.__webglTexture,r||0)}},this.readRenderTargetPixels=function(e,t,r,n,i,a,o){if(e&&e.isWebGLRenderTarget){var s=x.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){var c=!1;s!==z&&(d.bindFramebuffer(36160,s),c=!0);try{var l=e.texture,h=l.format,u=l.type;if(h!==He&&P.convert(h)!==d.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Ae||P.convert(u)===d.getParameter(35738)||u===De&&(v.isWebGL2||m.get("OES_texture_float")||m.get("WEBGL_color_buffer_float"))||u===Ie&&(v.isWebGL2?m.get("EXT_color_buffer_float"):m.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===d.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&d.readPixels(t,r,n,i,P.convert(h),P.convert(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&d.bindFramebuffer(36160,z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,r){void 0===r&&(r=0);var n=Math.pow(2,-r),i=Math.floor(t.image.width*n),a=Math.floor(t.image.height*n),o=P.convert(t.format);b.setTexture2D(t,0),d.copyTexImage2D(3553,r,o,e.x,e.y,i,a,0),g.unbindTexture()},this.copyTextureToTexture=function(e,t,r,n){var i=t.image.width,a=t.image.height,o=P.convert(r.format),s=P.convert(r.type);b.setTexture2D(r,0),t.isDataTexture?d.texSubImage2D(3553,n||0,e.x,e.y,i,a,o,s,t.image.data):d.texSubImage2D(3553,n||0,e.x,e.y,o,s,t.image),g.unbindTexture()},this.initTexture=function(e){b.setTexture2D(e,0),g.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ql(e,t){this.name="",this.color=new Qn(e),this.density=void 0!==t?t:25e-5}function Kl(e,t,r){this.name="",this.color=new Qn(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function $l(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=cr,this.updateRange={offset:0,count:-1},this.version=0}Wl.prototype=Object.assign(Object.create(Lr.prototype),{constructor:Wl,isWebGLMultiviewRenderTarget:!0,copy:function(e){return Lr.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}}),Xl.prototype=Object.assign(Object.create(oa.prototype),{constructor:Xl,isArrayCamera:!0}),Yl.prototype=Object.assign(Object.create(on.prototype),{constructor:Yl,isGroup:!0}),Object.assign(Zl.prototype,gr.prototype),Object.assign(Ql.prototype,{isFogExp2:!0,clone:function(){return new Ql(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Kl.prototype,{isFog:!0,clone:function(){return new Kl(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty($l.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign($l.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var eh,th=new Dr;function rh(e,t,r,n){this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function nh(e){ni.call(this),this.type="SpriteMaterial",this.color=new Qn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(rh.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(rh.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,r=this.data.count;t<r;t++)th.x=this.getX(t),th.y=this.getY(t),th.z=this.getZ(t),th.applyMatrix4(e),this.setXYZ(t,th.x,th.y,th.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}}),nh.prototype=Object.create(ni.prototype),nh.prototype.constructor=nh,nh.prototype.isSpriteMaterial=!0,nh.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var ih=new Dr,ah=new Dr,oh=new Dr,sh=new wr,ch=new wr,lh=new Hr,hh=new Dr,uh=new Dr,ph=new Dr,dh=new wr,fh=new wr,mh=new wr;function vh(e){if(on.call(this),this.type="Sprite",void 0===eh){eh=new Ti;var t=new $l(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);eh.setIndex([0,1,2,0,2,3]),eh.setAttribute("position",new rh(t,3,0,!1)),eh.setAttribute("uv",new rh(t,2,3,!1))}this.geometry=eh,this.material=void 0!==e?e:new nh,this.center=new wr(.5,.5)}function gh(e,t,r,n,i,a){sh.subVectors(e,r).addScalar(.5).multiply(n),void 0!==i?(ch.x=a*sh.x-i*sh.y,ch.y=i*sh.x+a*sh.y):ch.copy(sh),e.copy(t),e.x+=ch.x,e.y+=ch.y,e.applyMatrix4(lh)}vh.prototype=Object.assign(Object.create(on.prototype),{constructor:vh,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ah.setFromMatrixScale(this.matrixWorld),lh.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),oh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ah.multiplyScalar(-oh.z);var r,n,i=this.material.rotation;0!==i&&(n=Math.cos(i),r=Math.sin(i));var a=this.center;gh(hh.set(-.5,-.5,0),oh,a,ah,r,n),gh(uh.set(.5,-.5,0),oh,a,ah,r,n),gh(ph.set(.5,.5,0),oh,a,ah,r,n),dh.set(0,0),fh.set(1,0),mh.set(1,1);var o=e.ray.intersectTriangle(hh,uh,ph,!1,ih);if(null!==o||(gh(uh.set(-.5,.5,0),oh,a,ah,r,n),fh.set(0,1),null!==(o=e.ray.intersectTriangle(hh,ph,uh,!1,ih)))){var s=e.ray.origin.distanceTo(ih);s<e.near||s>e.far||t.push({distance:s,point:ih.clone(),uv:Xn.getUV(ih,hh,uh,ph,dh,fh,mh,new wr),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return on.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var yh=new Dr,xh=new Dr;function bh(){on.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function _h(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ki.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Hr,this.bindMatrixInverse=new Hr}bh.prototype=Object.assign(Object.create(on.prototype),{constructor:bh,isLOD:!0,copy:function(e){on.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){for(var r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object}return null},raycast:function(e,t){if(this.levels.length>0){yh.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(yh);this.getObjectForDistance(r).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){yh.setFromMatrixPosition(e.matrixWorld),xh.setFromMatrixPosition(this.matrixWorld);var r=yh.distanceTo(xh);t[0].object.visible=!0;for(var n=1,i=t.length;n<i&&r>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(;n<i;n++)t[n].object.visible=!1}},toJSON:function(e){var t=on.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var a=r[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),_h.prototype=Object.assign(Object.create(ki.prototype),{constructor:_h,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Ar,t=this.geometry.attributes.skinWeight,r=0,n=t.count;r<n;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){ki.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var wh=new Hr,Mh=new Hr;function Sh(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new Hr)}}function Th(){on.call(this),this.type="Bone"}Object.assign(Sh.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Hr;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:Mh;wh.multiplyMatrices(o,t[i]),wh.toArray(r,16*i)}void 0!==n&&(n.needsUpdate=!0)},clone:function(){return new Sh(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e)return n}}}),Th.prototype=Object.assign(Object.create(on.prototype),{constructor:Th,isBone:!0});var Eh=new Hr,Ah=new Hr,Lh=[],Rh=new ki;function Ch(e,t,r){ki.call(this,e,t),this.instanceMatrix=new oi(new Float32Array(16*r),16),this.count=r,this.frustumCulled=!1}function Ph(e){ni.call(this),this.type="LineBasicMaterial",this.color=new Qn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}Ch.prototype=Object.assign(Object.create(ki.prototype),{constructor:Ch,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var r=this.matrixWorld,n=this.count;if(Rh.geometry=this.geometry,Rh.material=this.material,void 0!==Rh.material)for(var i=0;i<n;i++)this.getMatrixAt(i,Eh),Ah.multiplyMatrices(r,Eh),Rh.matrixWorld=Ah,Rh.raycast(e,Lh),Lh.length>0&&(Lh[0].instanceId=i,Lh[0].object=this,t.push(Lh[0]),Lh.length=0)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),Ph.prototype=Object.create(ni.prototype),Ph.prototype.constructor=Ph,Ph.prototype.isLineBasicMaterial=!0,Ph.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var Oh=new Dr,Dh=new Dr,Ih=new Hr,Nh=new On,Fh=new Sn;function Bh(e,t,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),on.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ti,this.material=void 0!==t?t:new Ph}Bh.prototype=Object.assign(Object.create(on.prototype),{constructor:Bh,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[0],n=1,i=t.count;n<i;n++)Oh.fromBufferAttribute(t,n-1),Dh.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=Oh.distanceTo(Dh);e.setAttribute("lineDistance",new fi(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;(r=e.lineDistances)[0]=0;for(n=1,i=a.length;n<i;n++)r[n]=r[n-1],r[n]+=a[n-1].distanceTo(a[n])}return this},raycast:function(e,t){var r=e.linePrecision,n=this.geometry,i=this.matrixWorld;if(null===n.boundingSphere&&n.computeBoundingSphere(),Fh.copy(n.boundingSphere),Fh.applyMatrix4(i),Fh.radius+=r,!1!==e.ray.intersectsSphere(Fh)){Ih.getInverse(i),Nh.copy(e.ray).applyMatrix4(Ih);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new Dr,c=new Dr,l=new Dr,h=new Dr,u=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var p=n.index,d=n.attributes.position.array;if(null!==p)for(var f=p.array,m=0,v=f.length-1;m<v;m+=u){var g=f[m],y=f[m+1];if(s.fromArray(d,3*g),c.fromArray(d,3*y),!(Nh.distanceSqToSegment(s,c,h,l)>o))h.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(h))<e.near||_>e.far||t.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,v=d.length/3-1;m<v;m+=u){if(s.fromArray(d,3*m),c.fromArray(d,3*m+3),!(Nh.distanceSqToSegment(s,c,h,l)>o))h.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(h))<e.near||_>e.far||t.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){var x=n.vertices,b=x.length;for(m=0;m<b-1;m+=u){var _;if(!(Nh.distanceSqToSegment(x[m],x[m+1],h,l)>o))h.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(h))<e.near||_>e.far||t.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var zh=new Dr,Uh=new Dr;function Gh(e,t){Bh.call(this,e,t),this.type="LineSegments"}function Hh(e,t){Bh.call(this,e,t),this.type="LineLoop"}function Vh(e){ni.call(this),this.type="PointsMaterial",this.color=new Qn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Gh.prototype=Object.assign(Object.create(Bh.prototype),{constructor:Gh,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[],n=0,i=t.count;n<i;n+=2)zh.fromBufferAttribute(t,n),Uh.fromBufferAttribute(t,n+1),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+zh.distanceTo(Uh);e.setAttribute("lineDistance",new fi(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for(r=e.lineDistances,n=0,i=a.length;n<i;n+=2)zh.copy(a[n]),Uh.copy(a[n+1]),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+zh.distanceTo(Uh)}return this}}),Hh.prototype=Object.assign(Object.create(Bh.prototype),{constructor:Hh,isLineLoop:!0}),Vh.prototype=Object.create(ni.prototype),Vh.prototype.constructor=Vh,Vh.prototype.isPointsMaterial=!0,Vh.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var kh=new Hr,jh=new On,Wh=new Sn,qh=new Dr;function Xh(e,t){on.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ti,this.material=void 0!==t?t:new Vh,this.updateMorphTargets()}function Yh(e,t,r,n,i,a,o){var s=jh.distanceSqToPoint(e);if(s<r){var c=new Dr;jh.closestPointToPoint(e,c),c.applyMatrix4(n);var l=i.ray.origin.distanceTo(c);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:c,index:t,face:null,object:o})}}function Zh(e,t,r,n,i,a,o,s,c){Er.call(this,e,t,r,n,i,a,o,s,c),this.format=void 0!==o?o:Ge,this.minFilter=void 0!==a?a:we,this.magFilter=void 0!==i?i:we,this.generateMipmaps=!1}function Jh(e,t,r,n,i,a,o,s,c,l,h,u){Er.call(this,null,a,o,s,c,l,n,i,h,u),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Qh(e,t,r,n,i,a,o,s,c){Er.call(this,e,t,r,n,i,a,o,s,c),this.needsUpdate=!0}function Kh(e,t,r,n,i,a,o,s,c,l){if((l=void 0!==l?l:We)!==We&&l!==qe)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&l===We&&(r=Ce),void 0===r&&l===qe&&(r=ze),Er.call(this,null,n,i,a,o,s,l,r,c),this.image={width:e,height:t},this.magFilter=void 0!==o?o:ge,this.minFilter=void 0!==s?s:ge,this.flipY=!1,this.generateMipmaps=!1}function $h(e){Ti.call(this),this.type="WireframeGeometry";var t,r,n,i,a,o,s,c,l,h,u=[],p=[0,0],d={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,n=m.length;t<n;t++){var v=m[t];for(r=0;r<3;r++)s=v[f[r]],c=v[f[(r+1)%3]],p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[l=p[0]+","+p[1]]&&(d[l]={index1:p[0],index2:p[1]})}for(l in d)o=d[l],h=e.vertices[o.index1],u.push(h.x,h.y,h.z),h=e.vertices[o.index2],u.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var g,y,x,b,_,w,M;if(h=new Dr,null!==e.index){for(g=e.attributes.position,y=e.index,0===(x=e.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),i=0,a=x.length;i<a;++i)for(t=_=(b=x[i]).start,n=_+b.count;t<n;t+=3)for(r=0;r<3;r++)s=y.getX(t+r),c=y.getX(t+(r+1)%3),p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[l=p[0]+","+p[1]]&&(d[l]={index1:p[0],index2:p[1]});for(l in d)o=d[l],h.fromBufferAttribute(g,o.index1),u.push(h.x,h.y,h.z),h.fromBufferAttribute(g,o.index2),u.push(h.x,h.y,h.z)}else for(t=0,n=(g=e.attributes.position).count/3;t<n;t++)for(r=0;r<3;r++)w=3*t+r,h.fromBufferAttribute(g,w),u.push(h.x,h.y,h.z),M=3*t+(r+1)%3,h.fromBufferAttribute(g,M),u.push(h.x,h.y,h.z)}this.setAttribute("position",new fi(u,3))}function eu(e,t,r){Ji.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new tu(e,t,r)),this.mergeVertices()}function tu(e,t,r){Ti.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,a=[],o=[],s=[],c=[],l=new Dr,h=new Dr,u=new Dr,p=new Dr,d=new Dr;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(n=0;n<=r;n++){var m=n/r;for(i=0;i<=t;i++){var v=i/t;e(v,m,h),o.push(h.x,h.y,h.z),v-1e-5>=0?(e(v-1e-5,m,u),p.subVectors(h,u)):(e(v+1e-5,m,u),p.subVectors(u,h)),m-1e-5>=0?(e(v,m-1e-5,u),d.subVectors(h,u)):(e(v,m+1e-5,u),d.subVectors(u,h)),l.crossVectors(p,d).normalize(),s.push(l.x,l.y,l.z),c.push(v,m)}}for(n=0;n<r;n++)for(i=0;i<t;i++){var g=n*f+i,y=n*f+i+1,x=(n+1)*f+i+1,b=(n+1)*f+i;a.push(g,y,b),a.push(y,x,b)}this.setIndex(a),this.setAttribute("position",new fi(o,3)),this.setAttribute("normal",new fi(s,3)),this.setAttribute("uv",new fi(c,2))}function ru(e,t,r,n){Ji.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new nu(e,t,r,n)),this.mergeVertices()}function nu(e,t,r,n){Ti.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1;var i=[],a=[];function o(e,t,r,n){var i,a,o=Math.pow(2,n),c=[];for(i=0;i<=o;i++){c[i]=[];var l=e.clone().lerp(r,i/o),h=t.clone().lerp(r,i/o),u=o-i;for(a=0;a<=u;a++)c[i][a]=0===a&&i===o?l:l.clone().lerp(h,a/u)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var p=Math.floor(a/2);a%2==0?(s(c[i][p+1]),s(c[i+1][p]),s(c[i][p])):(s(c[i][p+1]),s(c[i+1][p+1]),s(c[i+1][p]))}}function s(e){i.push(e.x,e.y,e.z)}function c(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function l(e,t,r,n){n<0&&1===e.x&&(a[t]=e.x-1),0===r.x&&0===r.z&&(a[t]=n/2/Math.PI+.5)}function h(e){return Math.atan2(e.z,-e.x)}!function(e){for(var r=new Dr,n=new Dr,i=new Dr,a=0;a<t.length;a+=3)c(t[a+0],r),c(t[a+1],n),c(t[a+2],i),o(r,n,i,e)}(n=n||0),function(e){for(var t=new Dr,r=0;r<i.length;r+=3)t.x=i[r+0],t.y=i[r+1],t.z=i[r+2],t.normalize().multiplyScalar(e),i[r+0]=t.x,i[r+1]=t.y,i[r+2]=t.z}(r),function(){for(var e=new Dr,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var r=h(e)/2/Math.PI+.5,n=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(r,1-n)}var o;(function(){for(var e=new Dr,t=new Dr,r=new Dr,n=new Dr,o=new wr,s=new wr,c=new wr,u=0,p=0;u<i.length;u+=9,p+=6){e.set(i[u+0],i[u+1],i[u+2]),t.set(i[u+3],i[u+4],i[u+5]),r.set(i[u+6],i[u+7],i[u+8]),o.set(a[p+0],a[p+1]),s.set(a[p+2],a[p+3]),c.set(a[p+4],a[p+5]),n.copy(e).add(t).add(r).divideScalar(3);var d=h(n);l(o,p+0,e,d),l(s,p+2,t,d),l(c,p+4,r,d)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],r=a[e+2],n=a[e+4],i=Math.max(t,r,n),o=Math.min(t,r,n);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),r<.2&&(a[e+2]+=1),n<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new fi(i,3)),this.setAttribute("normal",new fi(i.slice(),3)),this.setAttribute("uv",new fi(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function iu(e,t){Ji.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new au(e,t)),this.mergeVertices()}function au(e,t){nu.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ou(e,t){Ji.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new su(e,t)),this.mergeVertices()}function su(e,t){nu.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function cu(e,t){Ji.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new lu(e,t)),this.mergeVertices()}function lu(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];nu.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function hu(e,t){Ji.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new uu(e,t)),this.mergeVertices()}function uu(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];nu.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function pu(e,t,r,n,i,a){Ji.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new du(e,t,r,n,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function du(e,t,r,n,i){Ti.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},t=t||64,r=r||1,n=n||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,c=new Dr,l=new Dr,h=new wr,u=new Dr,p=[],d=[],f=[],m=[];function v(i){u=e.getPointAt(i/t,u);var o=a.normals[i],h=a.binormals[i];for(s=0;s<=n;s++){var f=s/n*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);l.x=v*o.x+m*h.x,l.y=v*o.y+m*h.y,l.z=v*o.z+m*h.z,l.normalize(),d.push(l.x,l.y,l.z),c.x=u.x+r*l.x,c.y=u.y+r*l.y,c.z=u.z+r*l.z,p.push(c.x,c.y,c.z)}}!function(){for(o=0;o<t;o++)v(o);v(!1===i?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=n;s++)h.x=o/t,h.y=s/n,f.push(h.x,h.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=n;o++){var e=(n+1)*(s-1)+(o-1),r=(n+1)*s+(o-1),i=(n+1)*s+o,a=(n+1)*(s-1)+o;m.push(e,r,a),m.push(r,i,a)}}()}(),this.setIndex(m),this.setAttribute("position",new fi(p,3)),this.setAttribute("normal",new fi(d,3)),this.setAttribute("uv",new fi(f,2))}function fu(e,t,r,n,i,a,o){Ji.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new mu(e,t,r,n,i,a)),this.mergeVertices()}function mu(e,t,r,n,i,a){Ti.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a},e=e||1,t=t||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,a=a||3;var o,s,c=[],l=[],h=[],u=[],p=new Dr,d=new Dr,f=new Dr,m=new Dr,v=new Dr,g=new Dr,y=new Dr;for(o=0;o<=r;++o){var x=o/r*i*Math.PI*2;for(A(x,i,a,e,f),A(x+.01,i,a,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=n;++s){var b=s/n*Math.PI*2,_=-t*Math.cos(b),w=t*Math.sin(b);p.x=f.x+(_*y.x+w*v.x),p.y=f.y+(_*y.y+w*v.y),p.z=f.z+(_*y.z+w*v.z),l.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),h.push(d.x,d.y,d.z),u.push(o/r),u.push(s/n)}}for(s=1;s<=r;s++)for(o=1;o<=n;o++){var M=(n+1)*(s-1)+(o-1),S=(n+1)*s+(o-1),T=(n+1)*s+o,E=(n+1)*(s-1)+o;c.push(M,S,E),c.push(S,T,E)}function A(e,t,r,n,i){var a=Math.cos(e),o=Math.sin(e),s=r/t*e,c=Math.cos(s);i.x=n*(2+c)*.5*a,i.y=n*(2+c)*o*.5,i.z=n*Math.sin(s)*.5}this.setIndex(c),this.setAttribute("position",new fi(l,3)),this.setAttribute("normal",new fi(h,3)),this.setAttribute("uv",new fi(u,2))}function vu(e,t,r,n,i){Ji.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new gu(e,t,r,n,i)),this.mergeVertices()}function gu(e,t,r,n,i){Ti.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||1,t=t||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var a,o,s=[],c=[],l=[],h=[],u=new Dr,p=new Dr,d=new Dr;for(a=0;a<=r;a++)for(o=0;o<=n;o++){var f=o/n*i,m=a/r*Math.PI*2;p.x=(e+t*Math.cos(m))*Math.cos(f),p.y=(e+t*Math.cos(m))*Math.sin(f),p.z=t*Math.sin(m),c.push(p.x,p.y,p.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),d.subVectors(p,u).normalize(),l.push(d.x,d.y,d.z),h.push(o/n),h.push(a/r)}for(a=1;a<=r;a++)for(o=1;o<=n;o++){var v=(n+1)*a+o-1,g=(n+1)*(a-1)+o-1,y=(n+1)*(a-1)+o,x=(n+1)*a+o;s.push(v,g,x),s.push(g,y,x)}this.setIndex(s),this.setAttribute("position",new fi(c,3)),this.setAttribute("normal",new fi(l,3)),this.setAttribute("uv",new fi(h,2))}Xh.prototype=Object.assign(Object.create(on.prototype),{constructor:Xh,isPoints:!0,raycast:function(e,t){var r=this.geometry,n=this.matrixWorld,i=e.params.Points.threshold;if(null===r.boundingSphere&&r.computeBoundingSphere(),Wh.copy(r.boundingSphere),Wh.applyMatrix4(n),Wh.radius+=i,!1!==e.ray.intersectsSphere(Wh)){kh.getInverse(n),jh.copy(e.ray).applyMatrix4(kh);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(r.isBufferGeometry){var s=r.index,c=r.attributes.position.array;if(null!==s)for(var l=s.array,h=0,u=l.length;h<u;h++){var p=l[h];qh.fromArray(c,3*p),Yh(qh,p,o,n,e,t,this)}else{h=0;for(var d=c.length/3;h<d;h++)qh.fromArray(c,3*h),Yh(qh,h,o,n,e,t,this)}}else{var f=r.vertices;for(h=0,d=f.length;h<d;h++)Yh(f[h],h,o,n,e,t,this)}}},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)r=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Zh.prototype=Object.assign(Object.create(Er.prototype),{constructor:Zh,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Jh.prototype=Object.create(Er.prototype),Jh.prototype.constructor=Jh,Jh.prototype.isCompressedTexture=!0,Qh.prototype=Object.create(Er.prototype),Qh.prototype.constructor=Qh,Qh.prototype.isCanvasTexture=!0,Kh.prototype=Object.create(Er.prototype),Kh.prototype.constructor=Kh,Kh.prototype.isDepthTexture=!0,$h.prototype=Object.create(Ti.prototype),$h.prototype.constructor=$h,eu.prototype=Object.create(Ji.prototype),eu.prototype.constructor=eu,tu.prototype=Object.create(Ti.prototype),tu.prototype.constructor=tu,ru.prototype=Object.create(Ji.prototype),ru.prototype.constructor=ru,nu.prototype=Object.create(Ti.prototype),nu.prototype.constructor=nu,iu.prototype=Object.create(Ji.prototype),iu.prototype.constructor=iu,au.prototype=Object.create(nu.prototype),au.prototype.constructor=au,ou.prototype=Object.create(Ji.prototype),ou.prototype.constructor=ou,su.prototype=Object.create(nu.prototype),su.prototype.constructor=su,cu.prototype=Object.create(Ji.prototype),cu.prototype.constructor=cu,lu.prototype=Object.create(nu.prototype),lu.prototype.constructor=lu,hu.prototype=Object.create(Ji.prototype),hu.prototype.constructor=hu,uu.prototype=Object.create(nu.prototype),uu.prototype.constructor=uu,pu.prototype=Object.create(Ji.prototype),pu.prototype.constructor=pu,du.prototype=Object.create(Ti.prototype),du.prototype.constructor=du,du.prototype.toJSON=function(){var e=Ti.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},fu.prototype=Object.create(Ji.prototype),fu.prototype.constructor=fu,mu.prototype=Object.create(Ti.prototype),mu.prototype.constructor=mu,vu.prototype=Object.create(Ji.prototype),vu.prototype.constructor=vu,gu.prototype=Object.create(Ti.prototype),gu.prototype.constructor=gu;var yu={triangulate:function(e,t,r){r=r||2;var n,i,a,o,s,c,l,h=t&&t.length,u=h?t[0]*r:e.length,p=xu(e,0,u,r,!0),d=[];if(!p||p.next===p.prev)return d;if(h&&(p=Eu(e,t,p,r)),e.length>80*r){n=a=e[0],i=o=e[1];for(var f=r;f<u;f+=r)(s=e[f])<n&&(n=s),(c=e[f+1])<i&&(i=c),s>a&&(a=s),c>o&&(o=c);l=0!==(l=Math.max(a-n,o-i))?1/l:0}return _u(p,d,r,n,i,l),d}};function xu(e,t,r,n,i){var a,o;if(i===qu(e,t,r,n)>0)for(a=t;a<r;a+=n)o=ku(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=ku(a,e[a],e[a+1],o);return o&&Bu(o,o.next)&&(ju(o),o=o.next),o}function bu(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!Bu(n,n.next)&&0!==Fu(n.prev,n,n.next))n=n.next;else{if(ju(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function _u(e,t,r,n,i,a,o){if(e){!o&&a&&Cu(e,n,i,a);for(var s,c,l=e;e.prev!==e.next;)if(s=e.prev,c=e.next,a?Mu(e,n,i,a):wu(e))t.push(s.i/r),t.push(e.i/r),t.push(c.i/r),ju(e),e=c.next,l=c.next;else if((e=c)===l){o?1===o?_u(e=Su(e,t,r),t,r,n,i,a,2):2===o&&Tu(e,t,r,n,i,a):_u(bu(e),t,r,n,i,a,1);break}}}function wu(e){var t=e.prev,r=e,n=e.next;if(Fu(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Iu(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Fu(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Mu(e,t,r,n){var i=e.prev,a=e,o=e.next;if(Fu(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,c=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,h=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,u=Ou(s,c,t,r,n),p=Ou(l,h,t,r,n),d=e.prevZ,f=e.nextZ;d&&d.z>=u&&f&&f.z<=p;){if(d!==e.prev&&d!==e.next&&Iu(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Fu(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==e.prev&&f!==e.next&&Iu(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Fu(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=u;){if(d!==e.prev&&d!==e.next&&Iu(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Fu(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==e.prev&&f!==e.next&&Iu(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Fu(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Su(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!Bu(i,a)&&zu(i,n,n.next,a)&&Gu(i,a)&&Gu(a,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(a.i/r),ju(n),ju(n.next),n=e=a),n=n.next}while(n!==e);return n}function Tu(e,t,r,n,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Nu(o,s)){var c=Vu(o,s);return o=bu(o,o.next),c=bu(c,c.next),_u(o,t,r,n,i,a),void _u(c,t,r,n,i,a)}s=s.next}o=o.next}while(o!==e)}function Eu(e,t,r,n){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=xu(e,t[i]*n,i<a-1?t[i+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),s.push(Du(o));for(s.sort(Au),i=0;i<s.length;i++)Lu(s[i],r),r=bu(r,r.next);return r}function Au(e,t){return e.x-t.x}function Lu(e,t){if(t=Ru(e,t)){var r=Vu(t,e);bu(r,r.next)}}function Ru(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r.prev;var c,l=r,h=r.x,u=r.y,p=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=h&&i!==n.x&&Iu(a<u?i:o,a,h,u,a<u?o:i,a,n.x,n.y)&&((c=Math.abs(a-n.y)/(i-n.x))<p||c===p&&n.x>r.x)&&Gu(n,e)&&(r=n,p=c),n=n.next;return r}function Cu(e,t,r,n){var i=e;do{null===i.z&&(i.z=Ou(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Pu(i)}function Pu(e){var t,r,n,i,a,o,s,c,l=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ);t++);for(c=l;s>0||c>0&&n;)0!==s&&(0===c||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,c--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1);return e}function Ou(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Du(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Iu(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function Nu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Uu(e,t)&&Gu(e,t)&&Gu(t,e)&&Hu(e,t)}function Fu(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Bu(e,t){return e.x===t.x&&e.y===t.y}function zu(e,t,r,n){return!!(Bu(e,r)&&Bu(t,n)||Bu(e,n)&&Bu(r,t))||Fu(e,t,r)>0!=Fu(e,t,n)>0&&Fu(r,n,e)>0!=Fu(r,n,t)>0}function Uu(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&zu(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Gu(e,t){return Fu(e.prev,e,e.next)<0?Fu(e,t,e.next)>=0&&Fu(e,e.prev,t)>=0:Fu(e,t,e.prev)<0||Fu(e,e.next,t)<0}function Hu(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function Vu(e,t){var r=new Wu(e.i,e.x,e.y),n=new Wu(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function ku(e,t,r,n){var i=new Wu(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function ju(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Wu(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qu(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}var Xu={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},isClockWise:function(e){return Xu.area(e)<0},triangulateShape:function(e,t){var r=[],n=[],i=[];Yu(e),Zu(r,e);var a=e.length;t.forEach(Yu);for(var o=0;o<t.length;o++)n.push(a),a+=t[o].length,Zu(r,t[o]);var s=yu.triangulate(r,n);for(o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function Yu(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Zu(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function Ju(e,t){Ji.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Qu(e,t)),this.mergeVertices()}function Qu(e,t){Ti.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var r=this,n=[],i=[],a=0,o=e.length;a<o;a++){s(e[a])}function s(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,h=void 0!==t.bevelThickness?t.bevelThickness:6,u=void 0!==t.bevelSize?t.bevelSize:h-2,p=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Ku;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);var v,g,y,x,b,_,w,M,S=!1;f&&(v=f.getSpacedPoints(s),S=!0,l=!1,g=f.computeFrenetFrames(s,!1),y=new Dr,x=new Dr,b=new Dr),l||(d=0,h=0,u=0,p=0);var T=e.extractPoints(o),E=T.shape,A=T.holes;if(!Xu.isClockWise(E))for(E=E.reverse(),w=0,M=A.length;w<M;w++)_=A[w],Xu.isClockWise(_)&&(A[w]=_.reverse());var L=Xu.triangulateShape(E,A),R=E;for(w=0,M=A.length;w<M;w++)_=A[w],E=E.concat(_);function C(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var P,O,D,I,N,F,B=E.length,z=L.length;function U(e,t,r){var n,i,a,o=e.x-t.x,s=e.y-t.y,c=r.x-e.x,l=r.y-e.y,h=o*o+s*s,u=o*l-s*c;if(Math.abs(u)>Number.EPSILON){var p=Math.sqrt(h),d=Math.sqrt(c*c+l*l),f=t.x-s/p,m=t.y+o/p,v=((r.x-l/d-f)*l-(r.y+c/d-m)*c)/(o*l-s*c),g=(n=f+o*v-e.x)*n+(i=m+s*v-e.y)*i;if(g<=2)return new wr(n,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?c>Number.EPSILON&&(y=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(n=-s,i=o,a=Math.sqrt(h)):(n=o,i=s,a=Math.sqrt(h/2))}return new wr(n/a,i/a)}for(var G=[],H=0,V=R.length,k=V-1,j=H+1;H<V;H++,k++,j++)k===V&&(k=0),j===V&&(j=0),G[H]=U(R[H],R[k],R[j]);var W,q,X=[],Y=G.concat();for(w=0,M=A.length;w<M;w++){for(_=A[w],W=[],H=0,k=(V=_.length)-1,j=H+1;H<V;H++,k++,j++)k===V&&(k=0),j===V&&(j=0),W[H]=U(_[H],_[k],_[j]);X.push(W),Y=Y.concat(W)}for(P=0;P<d;P++){for(D=P/d,I=h*Math.cos(D*Math.PI/2),O=u*Math.sin(D*Math.PI/2)+p,H=0,V=R.length;H<V;H++)J((N=C(R[H],G[H],O)).x,N.y,-I);for(w=0,M=A.length;w<M;w++)for(_=A[w],W=X[w],H=0,V=_.length;H<V;H++)J((N=C(_[H],W[H],O)).x,N.y,-I)}for(O=u+p,H=0;H<B;H++)N=l?C(E[H],Y[H],O):E[H],S?(x.copy(g.normals[0]).multiplyScalar(N.x),y.copy(g.binormals[0]).multiplyScalar(N.y),b.copy(v[0]).add(x).add(y),J(b.x,b.y,b.z)):J(N.x,N.y,0);for(q=1;q<=s;q++)for(H=0;H<B;H++)N=l?C(E[H],Y[H],O):E[H],S?(x.copy(g.normals[q]).multiplyScalar(N.x),y.copy(g.binormals[q]).multiplyScalar(N.y),b.copy(v[q]).add(x).add(y),J(b.x,b.y,b.z)):J(N.x,N.y,c/s*q);for(P=d-1;P>=0;P--){for(D=P/d,I=h*Math.cos(D*Math.PI/2),O=u*Math.sin(D*Math.PI/2)+p,H=0,V=R.length;H<V;H++)J((N=C(R[H],G[H],O)).x,N.y,c+I);for(w=0,M=A.length;w<M;w++)for(_=A[w],W=X[w],H=0,V=_.length;H<V;H++)N=C(_[H],W[H],O),S?J(N.x,N.y+v[s-1].y,v[s-1].x+I):J(N.x,N.y,c+I)}function Z(e,t){var r,n;for(H=e.length;--H>=0;){r=H,(n=H-1)<0&&(n=e.length-1);var i=0,a=s+2*d;for(i=0;i<a;i++){var o=B*i,c=B*(i+1);K(t+r+o,t+n+o,t+n+c,t+r+c)}}}function J(e,t,r){a.push(e),a.push(t),a.push(r)}function Q(e,t,i){$(e),$(t),$(i);var a=n.length/3,o=m.generateTopUV(r,n,a-3,a-2,a-1);ee(o[0]),ee(o[1]),ee(o[2])}function K(e,t,i,a){$(e),$(t),$(a),$(t),$(i),$(a);var o=n.length/3,s=m.generateSideWallUV(r,n,o-6,o-3,o-2,o-1);ee(s[0]),ee(s[1]),ee(s[3]),ee(s[1]),ee(s[2]),ee(s[3])}function $(e){n.push(a[3*e+0]),n.push(a[3*e+1]),n.push(a[3*e+2])}function ee(e){i.push(e.x),i.push(e.y)}!function(){var e=n.length/3;if(l){var t=0,i=B*t;for(H=0;H<z;H++)Q((F=L[H])[2]+i,F[1]+i,F[0]+i);for(i=B*(t=s+2*d),H=0;H<z;H++)Q((F=L[H])[0]+i,F[1]+i,F[2]+i)}else{for(H=0;H<z;H++)Q((F=L[H])[2],F[1],F[0]);for(H=0;H<z;H++)Q((F=L[H])[0]+B*s,F[1]+B*s,F[2]+B*s)}r.addGroup(e,n.length/3-e,0)}(),function(){var e=n.length/3,t=0;for(Z(R,t),t+=R.length,w=0,M=A.length;w<M;w++)Z(_=A[w],t),t+=_.length;r.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new fi(n,3)),this.setAttribute("uv",new fi(i,2)),this.computeVertexNormals()}exports.ShapeUtils=Xu,Ju.prototype=Object.create(Ji.prototype),Ju.prototype.constructor=Ju,Ju.prototype.toJSON=function(){var e=Ji.prototype.toJSON.call(this);return $u(this.parameters.shapes,this.parameters.options,e)},Qu.prototype=Object.create(Ti.prototype),Qu.prototype.constructor=Qu,Qu.prototype.toJSON=function(){var e=Ti.prototype.toJSON.call(this);return $u(this.parameters.shapes,this.parameters.options,e)};var Ku={generateTopUV:function(e,t,r,n,i){var a=t[3*r],o=t[3*r+1],s=t[3*n],c=t[3*n+1],l=t[3*i],h=t[3*i+1];return[new wr(a,o),new wr(s,c),new wr(l,h)]},generateSideWallUV:function(e,t,r,n,i,a){var o=t[3*r],s=t[3*r+1],c=t[3*r+2],l=t[3*n],h=t[3*n+1],u=t[3*n+2],p=t[3*i],d=t[3*i+1],f=t[3*i+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(s-h)<.01?[new wr(o,1-c),new wr(l,1-u),new wr(p,1-f),new wr(m,1-g)]:[new wr(s,1-c),new wr(h,1-u),new wr(d,1-f),new wr(v,1-g)]}};function $u(e,t,r){if(r.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var a=e[n];r.shapes.push(a.uuid)}else r.shapes.push(e.uuid);return void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}function ep(e,t){Ji.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new tp(e,t)),this.mergeVertices()}function tp(e,t){var r=(t=t||{}).font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ji;var n=r.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Qu.call(this,n,t),this.type="TextBufferGeometry"}function rp(e,t,r,n,i,a,o){Ji.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new np(e,t,r,n,i,a,o)),this.mergeVertices()}function np(e,t,r,n,i,a,o){Ti.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,c,l=Math.min(a+o,Math.PI),h=0,u=[],p=new Dr,d=new Dr,f=[],m=[],v=[],g=[];for(c=0;c<=r;c++){var y=[],x=c/r,b=0;for(0==c&&0==a?b=.5/t:c==r&&l==Math.PI&&(b=-.5/t),s=0;s<=t;s++){var _=s/t;p.x=-e*Math.cos(n+_*i)*Math.sin(a+x*o),p.y=e*Math.cos(a+x*o),p.z=e*Math.sin(n+_*i)*Math.sin(a+x*o),m.push(p.x,p.y,p.z),d.copy(p).normalize(),v.push(d.x,d.y,d.z),g.push(_+b,1-x),y.push(h++)}u.push(y)}for(c=0;c<r;c++)for(s=0;s<t;s++){var w=u[c][s+1],M=u[c][s],S=u[c+1][s],T=u[c+1][s+1];(0!==c||a>0)&&f.push(w,M,T),(c!==r-1||l<Math.PI)&&f.push(M,S,T)}this.setIndex(f),this.setAttribute("position",new fi(m,3)),this.setAttribute("normal",new fi(v,3)),this.setAttribute("uv",new fi(g,2))}function ip(e,t,r,n,i,a){Ji.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new ap(e,t,r,n,i,a)),this.mergeVertices()}function ap(e,t,r,n,i,a){Ti.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var o,s,c,l=[],h=[],u=[],p=[],d=e,f=(t-e)/(n=void 0!==n?Math.max(1,n):1),m=new Dr,v=new wr;for(s=0;s<=n;s++){for(c=0;c<=r;c++)o=i+c/r*a,m.x=d*Math.cos(o),m.y=d*Math.sin(o),h.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,p.push(v.x,v.y);d+=f}for(s=0;s<n;s++){var g=s*(r+1);for(c=0;c<r;c++){var y=o=c+g,x=o+r+1,b=o+r+2,_=o+1;l.push(y,x,_),l.push(x,b,_)}}this.setIndex(l),this.setAttribute("position",new fi(h,3)),this.setAttribute("normal",new fi(u,3)),this.setAttribute("uv",new fi(p,2))}function op(e,t,r,n){Ji.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new sp(e,t,r,n)),this.mergeVertices()}function sp(e,t,r,n){Ti.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t)||12,r=r||0,n=n||2*Math.PI,n=_r.clamp(n,0,2*Math.PI);var i,a,o,s=[],c=[],l=[],h=1/t,u=new Dr,p=new wr;for(a=0;a<=t;a++){var d=r+a*h*n,f=Math.sin(d),m=Math.cos(d);for(o=0;o<=e.length-1;o++)u.x=e[o].x*f,u.y=e[o].y,u.z=e[o].x*m,c.push(u.x,u.y,u.z),p.x=a/t,p.y=o/(e.length-1),l.push(p.x,p.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var v=i=o+a*e.length,g=i+e.length,y=i+e.length+1,x=i+1;s.push(v,g,x),s.push(g,y,x)}if(this.setIndex(s),this.setAttribute("position",new fi(c,3)),this.setAttribute("uv",new fi(l,2)),this.computeVertexNormals(),n===2*Math.PI){var b=this.attributes.normal.array,_=new Dr,w=new Dr,M=new Dr;for(i=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)_.x=b[o+0],_.y=b[o+1],_.z=b[o+2],w.x=b[i+o+0],w.y=b[i+o+1],w.z=b[i+o+2],M.addVectors(_,w).normalize(),b[o+0]=b[i+o+0]=M.x,b[o+1]=b[i+o+1]=M.y,b[o+2]=b[i+o+2]=M.z}}function cp(e,t){Ji.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new lp(e,t)),this.mergeVertices()}function lp(e,t){Ti.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))l(e);else for(var c=0;c<e.length;c++)l(e[c]),this.addGroup(o,s,c),o+=s,s=0;function l(e){var o,c,l,h=n.length/3,u=e.extractPoints(t),p=u.shape,d=u.holes;for(!1===Xu.isClockWise(p)&&(p=p.reverse()),o=0,c=d.length;o<c;o++)l=d[o],!0===Xu.isClockWise(l)&&(d[o]=l.reverse());var f=Xu.triangulateShape(p,d);for(o=0,c=d.length;o<c;o++)l=d[o],p=p.concat(l);for(o=0,c=p.length;o<c;o++){var m=p[o];n.push(m.x,m.y,0),i.push(0,0,1),a.push(m.x,m.y)}for(o=0,c=f.length;o<c;o++){var v=f[o],g=v[0]+h,y=v[1]+h,x=v[2]+h;r.push(g,y,x),s+=3}}this.setIndex(r),this.setAttribute("position",new fi(n,3)),this.setAttribute("normal",new fi(i,3)),this.setAttribute("uv",new fi(a,2))}function hp(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function up(e,t){Ti.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,n,i,a,o=[],s=Math.cos(_r.DEG2RAD*t),c=[0,0],l={},h=["a","b","c"];e.isBufferGeometry?(a=new Ji).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var u=a.vertices,p=a.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],v=0;v<3;v++)r=m[h[v]],n=m[h[(v+1)%3]],c[0]=Math.min(r,n),c[1]=Math.max(r,n),void 0===l[i=c[0]+","+c[1]]?l[i]={index1:c[0],index2:c[1],face1:d,face2:void 0}:l[i].face2=d;for(i in l){var g=l[i];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=u[g.index1];o.push(y.x,y.y,y.z),y=u[g.index2],o.push(y.x,y.y,y.z)}}this.setAttribute("position",new fi(o,3))}function pp(e,t,r,n,i,a,o,s){Ji.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new dp(e,t,r,n,i,a,o,s)),this.mergeVertices()}function dp(e,t,r,n,i,a,o,s){Ti.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var l=[],h=[],u=[],p=[],d=0,f=[],m=r/2,v=0;function g(r){var i,a,f,g=new wr,y=new Dr,x=0,b=!0===r?e:t,_=!0===r?1:-1;for(a=d,i=1;i<=n;i++)h.push(0,m*_,0),u.push(0,_,0),p.push(.5,.5),d++;for(f=d,i=0;i<=n;i++){var w=i/n*s+o,M=Math.cos(w),S=Math.sin(w);y.x=b*S,y.y=m*_,y.z=b*M,h.push(y.x,y.y,y.z),u.push(0,_,0),g.x=.5*M+.5,g.y=.5*S*_+.5,p.push(g.x,g.y),d++}for(i=0;i<n;i++){var T=a+i,E=f+i;!0===r?l.push(E,E+1,T):l.push(E+1,E,T),x+=3}c.addGroup(v,x,!0===r?1:2),v+=x}!function(){var a,g,y=new Dr,x=new Dr,b=0,_=(t-e)/r;for(g=0;g<=i;g++){var w=[],M=g/i,S=M*(t-e)+e;for(a=0;a<=n;a++){var T=a/n,E=T*s+o,A=Math.sin(E),L=Math.cos(E);x.x=S*A,x.y=-M*r+m,x.z=S*L,h.push(x.x,x.y,x.z),y.set(A,_,L).normalize(),u.push(y.x,y.y,y.z),p.push(T,1-M),w.push(d++)}f.push(w)}for(a=0;a<n;a++)for(g=0;g<i;g++){var R=f[g][a],C=f[g+1][a],P=f[g+1][a+1],O=f[g][a+1];l.push(R,C,O),l.push(C,P,O),b+=6}c.addGroup(v,b,0),v+=b}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(l),this.setAttribute("position",new fi(h,3)),this.setAttribute("normal",new fi(u,3)),this.setAttribute("uv",new fi(p,2))}function fp(e,t,r,n,i,a,o){pp.call(this,0,e,t,r,n,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function mp(e,t,r,n,i,a,o){dp.call(this,0,e,t,r,n,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function vp(e,t,r,n){Ji.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new gp(e,t,r,n)),this.mergeVertices()}function gp(e,t,r,n){Ti.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,a,o=[],s=[],c=[],l=[],h=new Dr,u=new wr;for(s.push(0,0,0),c.push(0,0,1),l.push(.5,.5),a=0,i=3;a<=t;a++,i+=3){var p=r+a/t*n;h.x=e*Math.cos(p),h.y=e*Math.sin(p),s.push(h.x,h.y,h.z),c.push(0,0,1),u.x=(s[i]/e+1)/2,u.y=(s[i+1]/e+1)/2,l.push(u.x,u.y)}for(i=1;i<=t;i++)o.push(i,i+1,0);this.setIndex(o),this.setAttribute("position",new fi(s,3)),this.setAttribute("normal",new fi(c,3)),this.setAttribute("uv",new fi(l,2))}ep.prototype=Object.create(Ji.prototype),ep.prototype.constructor=ep,tp.prototype=Object.create(Qu.prototype),tp.prototype.constructor=tp,rp.prototype=Object.create(Ji.prototype),rp.prototype.constructor=rp,np.prototype=Object.create(Ti.prototype),np.prototype.constructor=np,ip.prototype=Object.create(Ji.prototype),ip.prototype.constructor=ip,ap.prototype=Object.create(Ti.prototype),ap.prototype.constructor=ap,op.prototype=Object.create(Ji.prototype),op.prototype.constructor=op,sp.prototype=Object.create(Ti.prototype),sp.prototype.constructor=sp,cp.prototype=Object.create(Ji.prototype),cp.prototype.constructor=cp,cp.prototype.toJSON=function(){var e=Ji.prototype.toJSON.call(this);return hp(this.parameters.shapes,e)},lp.prototype=Object.create(Ti.prototype),lp.prototype.constructor=lp,lp.prototype.toJSON=function(){var e=Ti.prototype.toJSON.call(this);return hp(this.parameters.shapes,e)},up.prototype=Object.create(Ti.prototype),up.prototype.constructor=up,pp.prototype=Object.create(Ji.prototype),pp.prototype.constructor=pp,dp.prototype=Object.create(Ti.prototype),dp.prototype.constructor=dp,fp.prototype=Object.create(pp.prototype),fp.prototype.constructor=fp,mp.prototype=Object.create(dp.prototype),mp.prototype.constructor=mp,vp.prototype=Object.create(Ji.prototype),vp.prototype.constructor=vp,gp.prototype=Object.create(Ti.prototype),gp.prototype.constructor=gp;var yp=Object.freeze({__proto__:null,WireframeGeometry:$h,ParametricGeometry:eu,ParametricBufferGeometry:tu,TetrahedronGeometry:iu,TetrahedronBufferGeometry:au,OctahedronGeometry:ou,OctahedronBufferGeometry:su,IcosahedronGeometry:cu,IcosahedronBufferGeometry:lu,DodecahedronGeometry:hu,DodecahedronBufferGeometry:uu,PolyhedronGeometry:ru,PolyhedronBufferGeometry:nu,TubeGeometry:pu,TubeBufferGeometry:du,TorusKnotGeometry:fu,TorusKnotBufferGeometry:mu,TorusGeometry:vu,TorusBufferGeometry:gu,TextGeometry:ep,TextBufferGeometry:tp,SphereGeometry:rp,SphereBufferGeometry:np,RingGeometry:ip,RingBufferGeometry:ap,PlaneGeometry:ya,PlaneBufferGeometry:xa,LatheGeometry:op,LatheBufferGeometry:sp,ShapeGeometry:cp,ShapeBufferGeometry:lp,ExtrudeGeometry:Ju,ExtrudeBufferGeometry:Qu,EdgesGeometry:up,ConeGeometry:fp,ConeBufferGeometry:mp,CylinderGeometry:pp,CylinderBufferGeometry:dp,CircleGeometry:vp,CircleBufferGeometry:gp,BoxGeometry:Qi,BoxBufferGeometry:Ki});function xp(e){ni.call(this),this.type="ShadowMaterial",this.color=new Qn(0),this.transparent=!0,this.setValues(e)}function bp(e){ia.call(this,e),this.type="RawShaderMaterial"}function _p(e){ni.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Qn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function wp(e){_p.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new wr(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function Mp(e){ni.call(this),this.type="MeshPhongMaterial",this.color=new Qn(16777215),this.specular=new Qn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Sp(e){ni.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Qn(16777215),this.specular=new Qn(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Tp(e){ni.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ep(e){ni.call(this),this.type="MeshLambertMaterial",this.color=new Qn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ap(e){ni.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Qn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Lp(e){Ph.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}xp.prototype=Object.create(ni.prototype),xp.prototype.constructor=xp,xp.prototype.isShadowMaterial=!0,xp.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this},bp.prototype=Object.create(ia.prototype),bp.prototype.constructor=bp,bp.prototype.isRawShaderMaterial=!0,_p.prototype=Object.create(ni.prototype),_p.prototype.constructor=_p,_p.prototype.isMeshStandardMaterial=!0,_p.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},wp.prototype=Object.create(_p.prototype),wp.prototype.constructor=wp,wp.prototype.isMeshPhysicalMaterial=!0,wp.prototype.copy=function(e){return _p.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new Qn).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},Mp.prototype=Object.create(ni.prototype),Mp.prototype.constructor=Mp,Mp.prototype.isMeshPhongMaterial=!0,Mp.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Sp.prototype=Object.create(ni.prototype),Sp.prototype.constructor=Sp,Sp.prototype.isMeshToonMaterial=!0,Sp.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Tp.prototype=Object.create(ni.prototype),Tp.prototype.constructor=Tp,Tp.prototype.isMeshNormalMaterial=!0,Tp.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ep.prototype=Object.create(ni.prototype),Ep.prototype.constructor=Ep,Ep.prototype.isMeshLambertMaterial=!0,Ep.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ap.prototype=Object.create(ni.prototype),Ap.prototype.constructor=Ap,Ap.prototype.isMeshMatcapMaterial=!0,Ap.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Lp.prototype=Object.create(Ph.prototype),Lp.prototype.constructor=Lp,Lp.prototype.isLineDashedMaterial=!0,Lp.prototype.copy=function(e){return Ph.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Rp=Object.freeze({__proto__:null,ShadowMaterial:xp,SpriteMaterial:nh,RawShaderMaterial:bp,ShaderMaterial:ia,PointsMaterial:Vh,MeshPhysicalMaterial:wp,MeshStandardMaterial:_p,MeshPhongMaterial:Mp,MeshToonMaterial:Sp,MeshNormalMaterial:Tp,MeshLambertMaterial:Ep,MeshDepthMaterial:Bl,MeshDistanceMaterial:zl,MeshBasicMaterial:ii,MeshMatcapMaterial:Ap,LineDashedMaterial:Lp,LineBasicMaterial:Ph,Material:ni}),Cp={arraySlice:function(e,t,r){return Cp.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=new Array(t),n=0;n!==t;++n)r[n]=n;return r.sort(function(t,r){return e[t]-e[r]}),r},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),a=0,o=0;o!==n;++a)for(var s=r[a]*t,c=0;c!==t;++c)i[o++]=e[s+c];return i},flattenJSON:function(e,t,r,n){for(var i=1,a=e[0];void 0!==a&&void 0===a[n];)a=e[i++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[n])&&(t.push(a.time),r.push.apply(r,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[n])&&(t.push(a.time),o.toArray(r,r.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[n])&&(t.push(a.time),r.push(o)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,r,n,i){i=i||30;var a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var c=a.tracks[s],l=c.getValueSize(),h=[],u=[],p=0;p<c.times.length;++p){var d=c.times[p]*i;if(!(d<r||d>=n)){h.push(c.times[p]);for(var f=0;f<l;++f)u.push(c.values[p*l+f])}}0!==h.length&&(c.times=Cp.convertArray(h,c.times.constructor),c.values=Cp.convertArray(u,c.values.constructor),o.push(c))}a.tracks=o;var m=1/0;for(s=0;s<a.tracks.length;++s)m>a.tracks[s].times[0]&&(m=a.tracks[s].times[0]);for(s=0;s<a.tracks.length;++s)a.tracks[s].shift(-1*m);return a.resetDuration(),a}};function Pp(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function Op(e,t,r,n){Pp.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Dp(e,t,r,n){Pp.call(this,e,t,r,n)}function Ip(e,t,r,n){Pp.call(this,e,t,r,n)}function Np(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Cp.convertArray(t,this.TimeBufferType),this.values=Cp.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function Fp(e,t,r){Np.call(this,e,t,r)}function Bp(e,t,r,n){Np.call(this,e,t,r,n)}function zp(e,t,r,n){Np.call(this,e,t,r,n)}function Up(e,t,r,n){Pp.call(this,e,t,r,n)}function Gp(e,t,r,n){Np.call(this,e,t,r,n)}function Hp(e,t,r,n){Np.call(this,e,t,r,n)}function Vp(e,t,r,n){Np.call(this,e,t,r,n)}function kp(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=_r.generateUUID(),this.duration<0&&this.resetDuration()}function jp(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zp;case"vector":case"vector2":case"vector3":case"vector4":return Vp;case"color":return Bp;case"quaternion":return Gp;case"bool":case"boolean":return Fp;case"string":return Hp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Wp(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=jp(e.type);if(void 0===e.times){var r=[],n=[];Cp.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}exports.AnimationUtils=Cp,Object.assign(Pp.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var a;r:{n:if(!(e<n)){for(var o=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===o)break;if(i=n,e<(n=t[++r]))break t}a=t.length;break r}if(e>=i)break e;var s=t[1];e<s&&(r=2,i=s);for(o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===o)break;if(n=i,e>=(i=t[--r-1]))break t}a=r,r=0}for(;r<a;){var c=r+a>>>1;e<t[c]?a=c:r=c+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,a=0;a!==n;++a)t[a]=r[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Pp.prototype,{beforeStart_:Pp.prototype.copySampleValue_,afterEnd_:Pp.prototype.copySampleValue_}),Op.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Op,DefaultSettings_:{endingStart:Lt,endingEnd:Lt},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,a=e+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case Rt:i=e,o=2*t-r;break;case Ct:o=t+n[i=n.length-2]-n[i+1];break;default:i=e,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case Rt:a=e,s=2*r-t;break;case Ct:a=1,s=r+n[1]-n[0];break;default:a=e-1,s=t}var c=.5*(r-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-r),this._offsetPrev=i*l,this._offsetNext=a*l},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(r-t)/(n-t),f=d*d,m=f*d,v=-u*m+2*u*f-u*d,g=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,x=p*m-p*f,b=0;b!==o;++b)i[b]=v*a[l+b]+g*a[c+b]+y*a[s+b]+x*a[h+b];return i}}),Dp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Dp,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=(r-t)/(n-t),h=1-l,u=0;u!==o;++u)i[u]=a[c+u]*h+a[s+u]*l;return i}}),Ip.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Ip,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Np,{toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Cp.convertArray(e.times,Array),values:Cp.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(Np.prototype,{constructor:Np,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Et,InterpolantFactoryMethodDiscrete:function(e){return new Ip(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Dp(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Op(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Tt:t=this.InterpolantFactoryMethodDiscrete;break;case Et:t=this.InterpolantFactoryMethodLinear;break;case At:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tt;case this.InterpolantFactoryMethodLinear:return Et;case this.InterpolantFactoryMethodSmooth:return At}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,a=n-1;i!==n&&r[i]<e;)++i;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==i||a!==n){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Cp.arraySlice(r,i,a),this.values=Cp.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=r[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==n&&Cp.isTypedArray(n)){o=0;for(var c=n.length;o!==c;++o){var l=n[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}}return e},optimize:function(){for(var e=Cp.arraySlice(this.times),t=Cp.arraySlice(this.values),r=this.getValueSize(),n=this.getInterpolation()===At,i=1,a=e.length-1,o=1;o<a;++o){var s=!1,c=e[o];if(c!==e[o+1]&&(1!==o||c!==c[0]))if(n)s=!0;else for(var l=o*r,h=l-r,u=l+r,p=0;p!==r;++p){var d=t[l+p];if(d!==t[h+p]||d!==t[u+p]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];var f=o*r,m=i*r;for(p=0;p!==r;++p)t[m+p]=t[f+p]}++i}}if(a>0){e[i]=e[a];for(f=a*r,m=i*r,p=0;p!==r;++p)t[m+p]=t[f+p];++i}return i!==e.length?(this.times=Cp.arraySlice(e,0,i),this.values=Cp.arraySlice(t,0,i*r)):(this.times=e,this.values=t),this},clone:function(){var e=Cp.arraySlice(this.times,0),t=Cp.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}),Fp.prototype=Object.assign(Object.create(Np.prototype),{constructor:Fp,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Tt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Bp.prototype=Object.assign(Object.create(Np.prototype),{constructor:Bp,ValueTypeName:"color"}),zp.prototype=Object.assign(Object.create(Np.prototype),{constructor:zp,ValueTypeName:"number"}),Up.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Up,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=(r-t)/(n-t),l=s+o;s!==l;s+=4)Cr.slerpFlat(i,0,a,s-o,a,s,c);return i}}),Gp.prototype=Object.assign(Object.create(Np.prototype),{constructor:Gp,ValueTypeName:"quaternion",DefaultInterpolation:Et,InterpolantFactoryMethodLinear:function(e){return new Up(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Hp.prototype=Object.assign(Object.create(Np.prototype),{constructor:Hp,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Tt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Vp.prototype=Object.assign(Object.create(Np.prototype),{constructor:Vp,ValueTypeName:"vector"}),Object.assign(kp,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,a=r.length;i!==a;++i)t.push(Wp(r[i]).scale(n));return new kp(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,a=r.length;i!==a;++i)t.push(Np.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],c=[];s.push((o+i-1)%i,o,(o+1)%i),c.push(0,1,0);var l=Cp.getKeyframeOrder(s);s=Cp.sortedArray(s,1,l),c=Cp.sortedArray(c,1,l),n||0!==s[0]||(s.push(i),c.push(c[0])),a.push(new zp(".morphTargetInfluences["+t[o].name+"]",s,c).scale(1/r))}return new kp(e,-1,a)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],c=s.name.match(i);if(c&&c.length>1){var l=n[u=c[1]];l||(n[u]=l=[]),l.push(s)}}var h=[];for(var u in n)h.push(kp.CreateFromMorphTargetSequence(u,n[u],t,r));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var a=[],o=[];Cp.flattenJSON(r,a,o,n),0!==a.length&&i.push(new e(t,a,o))}},n=[],i=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var h={},u=0;u<l.length;u++)if(l[u].morphTargets)for(var p=0;p<l[u].morphTargets.length;p++)h[l[u].morphTargets[p]]=-1;for(var d in h){var f=[],m=[];for(p=0;p!==l[u].morphTargets.length;++p){var v=l[u];f.push(v.time),m.push(v.morphTarget===d?1:0)}n.push(new zp(".morphTargetInfluence["+d+"]",f,m))}a=h.length*(o||1)}else{var g=".bones["+t[c].name+"]";r(Vp,g+".position",l,"pos",n),r(Gp,g+".quaternion",l,"rot",n),r(Vp,g+".scale",l,"scl",n)}}return 0===n.length?null:new kp(i,a,n)}}),Object.assign(kp.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new kp(this.name,this.duration,e)}});var qp={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Xp(e,t,r){var n=this,i=!1,a=0,o=0,s=void 0,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){o++,!1===i&&void 0!==n.onStart&&n.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==n.onProgress&&n.onProgress(e,a,o),a===o&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,r=c.length;t<r;t+=2){var n=c[t],i=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}exports.Cache=qp;var Yp=new Xp;function Zp(e){this.manager=void 0!==e?e:Yp,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}exports.DefaultLoadingManager=Yp,Object.assign(Zp.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var Jp={};function Qp(e){Zp.call(this,e)}function Kp(e){Zp.call(this,e)}function $p(e){Zp.call(this,e)}function ed(e){Zp.call(this,e)}function td(e){Zp.call(this,e)}function rd(e){Zp.call(this,e)}function nd(e){Zp.call(this,e)}function id(){this.type="Curve",this.arcLengthDivisions=200}function ad(e,t,r,n,i,a,o,s){id.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function od(e,t,r,n,i,a){ad.call(this,e,t,r,r,n,i,a),this.type="ArcCurve"}function sd(){var e=0,t=0,r=0,n=0;function i(i,a,o,s){e=i,t=o,r=-3*i+3*a-2*o-s,n=2*i-2*a+o+s}return{initCatmullRom:function(e,t,r,n,a){i(t,r,a*(r-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,a,o,s){var c=(t-e)/a-(r-e)/(a+o)+(r-t)/o,l=(r-t)/o-(n-t)/(o+s)+(n-r)/s;i(t,r,c*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+r*a+n*(a*i)}}}Qp.prototype=Object.assign(Object.create(Zp.prototype),{constructor:Qp,load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=qp.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;if(void 0===Jp[e]){var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],c=!!o[2],l=o[3];l=decodeURIComponent(l),c&&(l=atob(l));try{var h,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var p=new Uint8Array(l.length),d=0;d<l.length;d++)p[d]=l.charCodeAt(d);h="blob"===u?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;h=f.parseFromString(l,s);break;case"json":h=JSON.parse(l);break;default:h=l}setTimeout(function(){t&&t(h),i.manager.itemEnd(e)},0)}catch(g){setTimeout(function(){n&&n(g),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{Jp[e]=[],Jp[e].push({onLoad:t,onProgress:r,onError:n});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(t){var r=this.response,n=Jp[e];if(delete Jp[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),qp.add(e,r);for(var a=0,o=n.length;a<o;a++){(s=n[a]).onLoad&&s.onLoad(r)}i.manager.itemEnd(e)}else{for(a=0,o=n.length;a<o;a++){var s;(s=n[a]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),m.addEventListener("progress",function(t){for(var r=Jp[e],n=0,i=r.length;n<i;n++){var a=r[n];a.onProgress&&a.onProgress(t)}},!1),m.addEventListener("error",function(t){var r=Jp[e];delete Jp[e];for(var n=0,a=r.length;n<a;n++){var o=r[n];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),m.addEventListener("abort",function(t){var r=Jp[e];delete Jp[e];for(var n=0,a=r.length;n<a;n++){var o=r[n];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}Jp[e].push({onLoad:t,onProgress:r,onError:n})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Kp.prototype=Object.assign(Object.create(Zp.prototype),{constructor:Kp,load:function(e,t,r,n){var i=this,a=new Qp(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){for(var t=[],r=0;r<e.length;r++){var n=kp.parse(e[r]);t.push(n)}return t}}),$p.prototype=Object.assign(Object.create(Zp.prototype),{constructor:$p,load:function(e,t,r,n){var i=this,a=[],o=new Jh;o.image=a;var s=new Qp(this.manager);function c(c){s.load(e[c],function(e){var r=i.parse(e,!0);a[c]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(l+=1)&&(1===r.mipmapCount&&(o.minFilter=we),o.format=r.format,o.needsUpdate=!0,t&&t(o))},r,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,h=0,u=e.length;h<u;++h)c(h);else s.load(e,function(e){var r=i.parse(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){a[s]={mipmaps:[]};for(var c=0;c<r.mipmapCount;c++)a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+c]),a[s].format=r.format,a[s].width=r.width,a[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=we),o.format=r.format,o.needsUpdate=!0,t&&t(o)},r,n);return o}}),ed.prototype=Object.assign(Object.create(Zp.prototype),{constructor:ed,load:function(e,t,r,n){var i=this,a=new ua,o=new Qp(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,function(e){var r=i.parse(e);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:me,a.wrapT=void 0!==r.wrapT?r.wrapT:me,a.magFilter=void 0!==r.magFilter?r.magFilter:we,a.minFilter=void 0!==r.minFilter?r.minFilter:we,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps,a.minFilter=Te),1===r.mipmapCount&&(a.minFilter=we),a.needsUpdate=!0,t&&t(a,r))},r,n),a}}),td.prototype=Object.assign(Object.create(Zp.prototype),{constructor:td,load:function(e,t,r,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=qp.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),qp.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}),rd.prototype=Object.assign(Object.create(Zp.prototype),{constructor:rd,load:function(e,t,r,n){var i=new $s,a=new td(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(r){a.load(e[r],function(e){i.images[r]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))},void 0,n)}for(var c=0;c<e.length;++c)s(c);return i}}),nd.prototype=Object.assign(Object.create(Zp.prototype),{constructor:nd,load:function(e,t,r,n){var i=new Er,a=new td(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(r){i.image=r;var n=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?Ge:He,i.needsUpdate=!0,void 0!==t&&t(i)},r,n),i}}),Object.assign(id.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),a=0;for(n.push(0),r=1;r<=e;r++)a+=(t=this.getPoint(r/e)).distanceTo(i),n.push(a),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,a=n.length;r=t||e*n[a-1];for(var o,s=0,c=a-1;s<=c;)if((o=n[i=Math.floor(s+(c-s)/2)]-r)<0)s=i+1;else{if(!(o>0)){c=i;break}c=i-1}if(n[i=c]===r)return i/(a-1);var l=n[i];return(i+(r-l)/(n[i+1]-l))/(a-1)},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var n=this.getPoint(t);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,n,i,a=new Dr,o=[],s=[],c=[],l=new Dr,h=new Hr;for(r=0;r<=e;r++)n=r/e,o[r]=this.getTangentAt(n),o[r].normalize();s[0]=new Dr,c[0]=new Dr;var u=Number.MAX_VALUE,p=Math.abs(o[0].x),d=Math.abs(o[0].y),f=Math.abs(o[0].z);for(p<=u&&(u=p,a.set(1,0,0)),d<=u&&(u=d,a.set(0,1,0)),f<=u&&a.set(0,0,1),l.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],l),c[0].crossVectors(o[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),c[r]=c[r-1].clone(),l.crossVectors(o[r-1],o[r]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(_r.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(h.makeRotationAxis(l,i))),c[r].crossVectors(o[r],s[r]);if(!0===t)for(i=Math.acos(_r.clamp(s[0].dot(s[e]),-1,1)),i/=e,o[0].dot(l.crossVectors(s[0],s[e]))>0&&(i=-i),r=1;r<=e;r++)s[r].applyMatrix4(h.makeRotationAxis(o[r],i*r)),c[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ad.prototype=Object.create(id.prototype),ad.prototype.constructor=ad,ad.prototype.isEllipseCurve=!0,ad.prototype.getPoint=function(e,t){for(var r=t||new wr,n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=a?0:n),!0!==this.aClockwise||a||(i===n?i=-n:i-=n);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=s-this.aX,p=c-this.aY;s=u*l-p*h+this.aX,c=u*h+p*l+this.aY}return r.set(s,c)},ad.prototype.copy=function(e){return id.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ad.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ad.prototype.fromJSON=function(e){return id.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},od.prototype=Object.create(ad.prototype),od.prototype.constructor=od,od.prototype.isArcCurve=!0;var cd=new Dr,ld=new sd,hd=new sd,ud=new sd;function pd(e,t,r,n){id.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=n||.5}function dd(e,t,r,n,i){var a=.5*(n-t),o=.5*(i-r),s=e*e;return(2*r-2*n+a+o)*(e*s)+(-3*r+3*n-2*a-o)*s+a*e+r}function fd(e,t){var r=1-e;return r*r*t}function md(e,t){return 2*(1-e)*e*t}function vd(e,t){return e*e*t}function gd(e,t,r,n){return fd(e,t)+md(e,r)+vd(e,n)}function yd(e,t){var r=1-e;return r*r*r*t}function xd(e,t){var r=1-e;return 3*r*r*e*t}function bd(e,t){return 3*(1-e)*e*e*t}function _d(e,t){return e*e*e*t}function wd(e,t,r,n,i){return yd(e,t)+xd(e,r)+bd(e,n)+_d(e,i)}function Md(e,t,r,n){id.call(this),this.type="CubicBezierCurve",this.v0=e||new wr,this.v1=t||new wr,this.v2=r||new wr,this.v3=n||new wr}function Sd(e,t,r,n){id.call(this),this.type="CubicBezierCurve3",this.v0=e||new Dr,this.v1=t||new Dr,this.v2=r||new Dr,this.v3=n||new Dr}function Td(e,t){id.call(this),this.type="LineCurve",this.v1=e||new wr,this.v2=t||new wr}function Ed(e,t){id.call(this),this.type="LineCurve3",this.v1=e||new Dr,this.v2=t||new Dr}function Ad(e,t,r){id.call(this),this.type="QuadraticBezierCurve",this.v0=e||new wr,this.v1=t||new wr,this.v2=r||new wr}function Ld(e,t,r){id.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Dr,this.v1=t||new Dr,this.v2=r||new Dr}function Rd(e){id.call(this),this.type="SplineCurve",this.points=e||[]}pd.prototype=Object.create(id.prototype),pd.prototype.constructor=pd,pd.prototype.isCatmullRomCurve3=!0,pd.prototype.getPoint=function(e,t){var r,n,i,a,o=t||new Dr,s=this.points,c=s.length,l=(c-(this.closed?0:1))*e,h=Math.floor(l),u=l-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/c)+1)*c:0===u&&h===c-1&&(h=c-2,u=1),this.closed||h>0?r=s[(h-1)%c]:(cd.subVectors(s[0],s[1]).add(s[0]),r=cd),n=s[h%c],i=s[(h+1)%c],this.closed||h+2<c?a=s[(h+2)%c]:(cd.subVectors(s[c-1],s[c-2]).add(s[c-1]),a=cd),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(r.distanceToSquared(n),p),f=Math.pow(n.distanceToSquared(i),p),m=Math.pow(i.distanceToSquared(a),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),ld.initNonuniformCatmullRom(r.x,n.x,i.x,a.x,d,f,m),hd.initNonuniformCatmullRom(r.y,n.y,i.y,a.y,d,f,m),ud.initNonuniformCatmullRom(r.z,n.z,i.z,a.z,d,f,m)}else"catmullrom"===this.curveType&&(ld.initCatmullRom(r.x,n.x,i.x,a.x,this.tension),hd.initCatmullRom(r.y,n.y,i.y,a.y,this.tension),ud.initCatmullRom(r.z,n.z,i.z,a.z,this.tension));return o.set(ld.calc(u),hd.calc(u),ud.calc(u)),o},pd.prototype.copy=function(e){id.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},pd.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},pd.prototype.fromJSON=function(e){id.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Dr).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Md.prototype=Object.create(id.prototype),Md.prototype.constructor=Md,Md.prototype.isCubicBezierCurve=!0,Md.prototype.getPoint=function(e,t){var r=t||new wr,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return r.set(wd(e,n.x,i.x,a.x,o.x),wd(e,n.y,i.y,a.y,o.y)),r},Md.prototype.copy=function(e){return id.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Md.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Md.prototype.fromJSON=function(e){return id.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Sd.prototype=Object.create(id.prototype),Sd.prototype.constructor=Sd,Sd.prototype.isCubicBezierCurve3=!0,Sd.prototype.getPoint=function(e,t){var r=t||new Dr,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return r.set(wd(e,n.x,i.x,a.x,o.x),wd(e,n.y,i.y,a.y,o.y),wd(e,n.z,i.z,a.z,o.z)),r},Sd.prototype.copy=function(e){return id.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Sd.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Sd.prototype.fromJSON=function(e){return id.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Td.prototype=Object.create(id.prototype),Td.prototype.constructor=Td,Td.prototype.isLineCurve=!0,Td.prototype.getPoint=function(e,t){var r=t||new wr;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},Td.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Td.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Td.prototype.copy=function(e){return id.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Td.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Td.prototype.fromJSON=function(e){return id.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ed.prototype=Object.create(id.prototype),Ed.prototype.constructor=Ed,Ed.prototype.isLineCurve3=!0,Ed.prototype.getPoint=function(e,t){var r=t||new Dr;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},Ed.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ed.prototype.copy=function(e){return id.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ed.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ed.prototype.fromJSON=function(e){return id.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ad.prototype=Object.create(id.prototype),Ad.prototype.constructor=Ad,Ad.prototype.isQuadraticBezierCurve=!0,Ad.prototype.getPoint=function(e,t){var r=t||new wr,n=this.v0,i=this.v1,a=this.v2;return r.set(gd(e,n.x,i.x,a.x),gd(e,n.y,i.y,a.y)),r},Ad.prototype.copy=function(e){return id.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ad.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ad.prototype.fromJSON=function(e){return id.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ld.prototype=Object.create(id.prototype),Ld.prototype.constructor=Ld,Ld.prototype.isQuadraticBezierCurve3=!0,Ld.prototype.getPoint=function(e,t){var r=t||new Dr,n=this.v0,i=this.v1,a=this.v2;return r.set(gd(e,n.x,i.x,a.x),gd(e,n.y,i.y,a.y),gd(e,n.z,i.z,a.z)),r},Ld.prototype.copy=function(e){return id.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ld.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ld.prototype.fromJSON=function(e){return id.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Rd.prototype=Object.create(id.prototype),Rd.prototype.constructor=Rd,Rd.prototype.isSplineCurve=!0,Rd.prototype.getPoint=function(e,t){var r=t||new wr,n=this.points,i=(n.length-1)*e,a=Math.floor(i),o=i-a,s=n[0===a?a:a-1],c=n[a],l=n[a>n.length-2?n.length-1:a+1],h=n[a>n.length-3?n.length-1:a+2];return r.set(dd(o,s.x,c.x,l.x,h.x),dd(o,s.y,c.y,l.y,h.y)),r},Rd.prototype.copy=function(e){id.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this},Rd.prototype.toJSON=function(){var e=id.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e},Rd.prototype.fromJSON=function(e){id.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new wr).fromArray(n))}return this};var Cd=Object.freeze({__proto__:null,ArcCurve:od,CatmullRomCurve3:pd,CubicBezierCurve:Md,CubicBezierCurve3:Sd,EllipseCurve:ad,LineCurve:Td,LineCurve3:Ed,QuadraticBezierCurve:Ad,QuadraticBezierCurve3:Ld,SplineCurve:Rd});function Pd(){id.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Od(e){Pd.call(this),this.type="Path",this.currentPoint=new wr,e&&this.setFromPoints(e)}function Dd(e){Od.call(this,e),this.uuid=_r.generateUUID(),this.type="Shape",this.holes=[]}function Id(e,t){on.call(this),this.type="Light",this.color=new Qn(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Nd(e,t,r){Id.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(on.DefaultUp),this.updateMatrix(),this.groundColor=new Qn(t)}function Fd(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new wr(512,512),this.map=null,this.mapPass=null,this.matrix=new Hr,this._frustum=new fa,this._frameExtents=new wr(1,1),this._viewportCount=1,this._viewports=[new Ar(0,0,1,1)]}function Bd(){Fd.call(this,new oa(50,1,.5,500))}function zd(e,t,r,n,i,a){Id.call(this,e,t),this.type="SpotLight",this.position.copy(on.DefaultUp),this.updateMatrix(),this.target=new on,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new Bd}function Ud(){Fd.call(this,new oa(90,1,.5,500)),this._frameExtents=new wr(4,2),this._viewportCount=6,this._viewports=[new Ar(2,1,1,1),new Ar(0,1,1,1),new Ar(3,1,1,1),new Ar(1,1,1,1),new Ar(3,0,1,1),new Ar(1,0,1,1)],this._cubeDirections=[new Dr(1,0,0),new Dr(-1,0,0),new Dr(0,0,1),new Dr(0,0,-1),new Dr(0,1,0),new Dr(0,-1,0)],this._cubeUps=[new Dr(0,1,0),new Dr(0,1,0),new Dr(0,1,0),new Dr(0,1,0),new Dr(0,0,1),new Dr(0,0,-1)]}function Gd(e,t,r,n){Id.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new Ud}function Hd(e,t,r,n,i,a){aa.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==r?r:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Vd(){Fd.call(this,new Hd(-5,5,5,-5,.5,500))}function kd(e,t){Id.call(this,e,t),this.type="DirectionalLight",this.position.copy(on.DefaultUp),this.updateMatrix(),this.target=new on,this.shadow=new Vd}function jd(e,t){Id.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Wd(e,t,r,n){Id.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function qd(e){Zp.call(this,e),this.textures={}}Pd.prototype=Object.assign(Object.create(id.prototype),{constructor:Pd,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Td(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,a=this.curves[n],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var a=i[n],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];t&&t.equals(l)||(r.push(l),t=l)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){id.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=id.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){id.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push((new Cd[n.type]).fromJSON(n))}return this}}),Od.prototype=Object.assign(Object.create(Pd.prototype),{constructor:Od,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var r=new Td(this.currentPoint.clone(),new wr(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,r,n){var i=new Ad(this.currentPoint.clone(),new wr(e,t),new wr(r,n));return this.curves.push(i),this.currentPoint.set(r,n),this},bezierCurveTo:function(e,t,r,n,i,a){var o=new Md(this.currentPoint.clone(),new wr(e,t),new wr(r,n),new wr(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this},splineThru:function(e){var t=new Rd([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,r,n,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,r,n,i,a),this},absarc:function(e,t,r,n,i,a){return this.absellipse(e,t,r,r,n,i,a),this},ellipse:function(e,t,r,n,i,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,r,n,i,a,o,s),this},absellipse:function(e,t,r,n,i,a,o,s){var c=new ad(e,t,r,n,i,a,o,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var h=c.getPoint(1);return this.currentPoint.copy(h),this},copy:function(e){return Pd.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Pd.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Pd.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Dd.prototype=Object.assign(Object.create(Od.prototype),{constructor:Dd,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Od.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=Od.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Od.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push((new Od).fromJSON(n))}return this}}),Id.prototype=Object.assign(Object.create(on.prototype),{constructor:Id,isLight:!0,copy:function(e){return on.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=on.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Nd.prototype=Object.assign(Object.create(Id.prototype),{constructor:Nd,isHemisphereLight:!0,copy:function(e){return Id.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Fd.prototype,{_projScreenMatrix:new Hr,_lightPositionWorld:new Dr,_lookTarget:new Dr,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,r=this.matrix,n=this._projScreenMatrix,i=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),n.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Bd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Bd,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,r=2*_r.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&n===t.aspect&&i===t.far||(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix()),Fd.prototype.updateMatrices.call(this,e)}}),zd.prototype=Object.assign(Object.create(Id.prototype),{constructor:zd,isSpotLight:!0,copy:function(e){return Id.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ud.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Ud,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var r=this.camera,n=this.matrix,i=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),r.position.copy(i),a.copy(r.position),a.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(a),r.updateMatrixWorld(),n.makeTranslation(-i.x,-i.y,-i.z),o.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),Gd.prototype=Object.assign(Object.create(Id.prototype),{constructor:Gd,isPointLight:!0,copy:function(e){return Id.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Hd.prototype=Object.assign(Object.create(aa.prototype),{constructor:Hd,isOrthographicCamera:!0,copy:function(e,t){return aa.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,n,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,a=r+e,o=n+t,s=n-t;if(null!==this.view&&this.view.enabled){var c=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=c*this.view.offsetX)+c*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=on.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Vd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Vd,isDirectionalLightShadow:!0,updateMatrices:function(e){Fd.prototype.updateMatrices.call(this,e)}}),kd.prototype=Object.assign(Object.create(Id.prototype),{constructor:kd,isDirectionalLight:!0,copy:function(e){return Id.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),jd.prototype=Object.assign(Object.create(Id.prototype),{constructor:jd,isAmbientLight:!0}),Wd.prototype=Object.assign(Object.create(Id.prototype),{constructor:Wd,isRectAreaLight:!0,copy:function(e){return Id.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Id.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),qd.prototype=Object.assign(Object.create(Zp.prototype),{constructor:qd,load:function(e,t,r,n){var i=this,a=new Qp(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var n=new Rp[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.sheen&&(n.sheen=(new Qn).setHex(e.sheen)),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(n.morphNormals=e.morphNormals),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(n.uniforms[i]={},a.type){case"t":n.uniforms[i].value=r(a.value);break;case"c":n.uniforms[i].value=(new Qn).setHex(a.value);break;case"v2":n.uniforms[i].value=(new wr).fromArray(a.value);break;case"v3":n.uniforms[i].value=(new Dr).fromArray(a.value);break;case"v4":n.uniforms[i].value=(new Ar).fromArray(a.value);break;case"m3":n.uniforms[i].value=(new Mr).fromArray(a.value);case"m4":n.uniforms[i].value=(new Hr).fromArray(a.value);break;default:n.uniforms[i].value=a.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)n.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=r(e.map)),void 0!==e.matcap&&(n.matcap=r(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=r(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),n.normalScale=(new wr).fromArray(s)}return void 0!==e.displacementMap&&(n.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=r(e.specularMap)),void 0!==e.envMap&&(n.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(n.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new wr).fromArray(e.clearcoatNormalScale)),n},setTextures:function(e){return this.textures=e,this}});var Xd={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(i){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Yd(){Ti.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Zd(e,t,r,n){"number"==typeof r&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),oi.call(this,e,t,r),this.meshPerAttribute=n||1}function Jd(e){Zp.call(this,e)}exports.LoaderUtils=Xd,Yd.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Yd,isInstancedBufferGeometry:!0,copy:function(e){return Ti.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Ti.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),Zd.prototype=Object.assign(Object.create(oi.prototype),{constructor:Zd,isInstancedBufferAttribute:!0,copy:function(e){return oi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=oi.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Jd.prototype=Object.assign(Object.create(Zp.prototype),{constructor:Jd,load:function(e,t,r,n){var i=this,a=new Qp(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=e.isInstancedBufferGeometry?new Yd:new Ti,r=e.data.index;if(void 0!==r){var n=new Qd[r.type](r.array);t.setIndex(new oi(n,1))}var i=e.data.attributes;for(var a in i){var o=i[a],s=(n=new Qd[o.type](o.array),new(o.isInstancedBufferAttribute?Zd:oi)(n,o.itemSize,o.normalized));void 0!==o.name&&(s.name=o.name),t.setAttribute(a,s)}var c=e.data.morphAttributes;if(c)for(var a in c){for(var l=c[a],h=[],u=0,p=l.length;u<p;u++){o=l[u],s=new oi(n=new Qd[o.type](o.array),o.itemSize,o.normalized);void 0!==o.name&&(s.name=o.name),h.push(s)}t.morphAttributes[a]=h}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);var d=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==d){u=0;for(var f=d.length;u!==f;++u){var m=d[u];t.addGroup(m.start,m.count,m.materialIndex)}}var v=e.data.boundingSphere;if(void 0!==v){var g=new Dr;void 0!==v.center&&g.fromArray(v.center),t.boundingSphere=new Sn(g,v.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var Qd={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Kd(e){Zp.call(this,e)}Kd.prototype=Object.assign(Object.create(Zp.prototype),{constructor:Kd,load:function(e,t,r,n){var i=this,a=""===this.path?Xd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new Qp(i.manager);o.setPath(this.path),o.load(e,function(r){var a=null;try{a=JSON.parse(r)}catch(s){return void 0!==n&&n(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)},r,n)},parse:function(e,t){var r=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,n,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=(new Dd).fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var n=new Jd,i=0,a=e.length;i<a;i++){var o,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new yp[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new yp[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new yp[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new yp[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new yp[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new yp[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new yp[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new yp[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new yp[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new yp[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new yp[s.type]((new Cd[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new yp[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new yp[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,h=s.shapes.length;l<h;l++){var u=t[s.shapes[l]];c.push(u)}o=new yp[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,h=s.shapes.length;l<h;l++){u=t[s.shapes[l]];c.push(u)}var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new Cd[p.type]).fromJSON(p)),o=new yp[s.type](c,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=n.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),r[s.uuid]=o}return r},parseMaterials:function(e,t){var r={},n={};if(void 0!==e){var i=new qd;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var c=[],l=0;l<s.materials.length;l++){var h=s.materials[l];void 0===r[h.uuid]&&(r[h.uuid]=i.parse(h)),c.push(r[h.uuid])}n[s.uuid]=c}else void 0===r[s.uuid]&&(r[s.uuid]=i.parse(s)),n[s.uuid]=r[s.uuid]}}return n},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=kp.parse(n);void 0!==n.uuid&&(i.uuid=n.uuid),t.push(i)}return t},parseImages:function(e,t){var r=this,n={};function i(e){return r.manager.itemStart(e),a.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e),r.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var a=new td(new Xp(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var c=e[o],l=c.url;if(Array.isArray(l)){n[c.uuid]=[];for(var h=0,u=l.length;h<u;h++){var p=l[h],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:r.resourcePath+p;n[c.uuid].push(i(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.resourcePath+c.url;n[c.uuid]=i(d)}}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(t[s.image])?new $s(t[s.image]):new Er(t[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=r(s.mapping,ef)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=r(s.wrap[0],tf),o.wrapT=r(s.wrap[1],tf)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=r(s.minFilter,rf)),void 0!==s.magFilter&&(o.magFilter=r(s.magFilter,rf)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),n[s.uuid]=o}return n},parseObject:function(e,t,r){var n;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,i=e.length;n<i;n++){var a=e[n];void 0===r[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(r[a])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}switch(e.type){case"Scene":n=new sn,void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new Qn(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new Kl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new Ql(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new oa(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new Hd(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new jd(e.color,e.intensity);break;case"DirectionalLight":n=new kd(e.color,e.intensity);break;case"PointLight":n=new Gd(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new Wd(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new zd(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new Nd(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(e.geometry),s=a(e.material);n=o.bones&&o.bones.length>0?new _h(o,s):new ki(o,s);break;case"InstancedMesh":o=i(e.geometry),s=a(e.material);var c=e.count,l=e.instanceMatrix;(n=new Ch(o,s,c)).instanceMatrix=new oi(new Float32Array(l.array),16);break;case"LOD":n=new bh;break;case"Line":n=new Bh(i(e.geometry),a(e.material),e.mode);break;case"LineLoop":n=new Hh(i(e.geometry),a(e.material));break;case"LineSegments":n=new Gh(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":n=new Xh(i(e.geometry),a(e.material));break;case"Sprite":n=new vh(a(e.material));break;case"Group":n=new Yl;break;default:n=new on}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var h=e.children,u=0;u<h.length;u++)n.add(this.parseObject(h[u],t,r));if("LOD"===e.type){void 0!==e.autoUpdate&&(n.autoUpdate=e.autoUpdate);for(var p=e.levels,d=0;d<p.length;d++){var f=p[d],m=n.getObjectByProperty("uuid",f.object);void 0!==m&&n.addLevel(m,f.distance)}}return n}});var $d,ef={UVMapping:oe,CubeReflectionMapping:se,CubeRefractionMapping:ce,EquirectangularReflectionMapping:le,EquirectangularRefractionMapping:he,SphericalReflectionMapping:ue,CubeUVReflectionMapping:pe,CubeUVRefractionMapping:de},tf={RepeatWrapping:fe,ClampToEdgeWrapping:me,MirroredRepeatWrapping:ve},rf={NearestFilter:ge,NearestMipmapNearestFilter:ye,NearestMipmapLinearFilter:be,LinearFilter:we,LinearMipmapNearestFilter:Me,LinearMipmapLinearFilter:Te};function nf(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Zp.call(this,e),this.options=void 0}function af(){this.type="ShapePath",this.color=new Qn,this.subPaths=[],this.currentPath=null}function of(e){this.type="Font",this.data=e}function sf(e,t,r){for(var n=Array.from?Array.from(e):String(e).split(""),i=t/r.resolution,a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i,o=[],s=0,c=0,l=0;l<n.length;l++){var h=n[l];if("\n"===h)s=0,c-=a;else{var u=cf(h,i,s,c,r);s+=u.offsetX,o.push(u.path)}}return o}function cf(e,t,r,n,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,c,l,h,u,p,d,f=new af;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":o=m[v++]*t+r,s=m[v++]*t+n,f.moveTo(o,s);break;case"l":o=m[v++]*t+r,s=m[v++]*t+n,f.lineTo(o,s);break;case"q":c=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,u=m[v++]*t+n,f.quadraticCurveTo(h,u,c,l);break;case"b":c=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,u=m[v++]*t+n,p=m[v++]*t+r,d=m[v++]*t+n,f.bezierCurveTo(h,u,p,d,c,l)}}return{offsetX:a.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function lf(e){Zp.call(this,e)}nf.prototype=Object.assign(Object.create(Zp.prototype),{constructor:nf,setOptions:function(e){return this.options=e,this},load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=qp.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;fetch(e).then(function(e){return e.blob()}).then(function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)}).then(function(r){qp.add(e,r),t&&t(r),i.manager.itemEnd(e)}).catch(function(t){n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}}),Object.assign(af.prototype,{moveTo:function(e,t){return this.currentPath=new Od,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,r,n){return this.currentPath.quadraticCurveTo(e,t,r,n),this},bezierCurveTo:function(e,t,r,n,i,a){return this.currentPath.bezierCurveTo(e,t,r,n,i,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],a=new Dd;a.curves=i.curves,t.push(a)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,a=0;a<r;i=a++){var o=t[i],s=t[a],c=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],c=-c,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var h=l*(e.x-o.x)-c*(e.y-o.y);if(0===h)return!0;if(h<0)continue;n=!n}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return n}var i=Xu.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return r(a);var o,s,c,l=[];if(1===a.length)return s=a[0],(c=new Dd).curves=s.curves,l.push(c),l;var h=!i(a[0].getPoints());h=e?!h:h;var u,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)o=i(u=(s=a[g]).getPoints()),(o=e?!o:o)?(!h&&f[v]&&v++,f[v]={s:new Dd,p:u},f[v].s.curves=s.curves,h&&v++,m[v]=[]):m[v].push({h:s,p:u[0]});if(!f[0])return r(a);if(f.length>1){for(var x=!1,b=[],_=0,w=f.length;_<w;_++)d[_]=[];for(_=0,w=f.length;_<w;_++)for(var M=m[_],S=0;S<M.length;S++){for(var T=M[S],E=!0,A=0;A<f.length;A++)n(T.p,f[A].p)&&(_!==A&&b.push({froms:_,tos:A,hole:S}),E?(E=!1,d[A].push(T)):x=!0);E&&d[_].push(T)}b.length>0&&(x||(m=d))}g=0;for(var L=f.length;g<L;g++){c=f[g].s,l.push(c);for(var R=0,C=(p=m[g]).length;R<C;R++)c.holes.push(p[R].h)}return l}}),Object.assign(of.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var r=[],n=sf(e,t,this.data),i=0,a=n.length;i<a;i++)Array.prototype.push.apply(r,n[i].toShapes());return r}}),lf.prototype=Object.assign(Object.create(Zp.prototype),{constructor:lf,load:function(e,t,r,n){var i=this,a=new Qp(this.manager);a.setPath(this.path),a.load(e,function(e){var r;try{r=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);t&&t(n)},r,n)},parse:function(e){return new of(e)}});var hf={getContext:function(){return void 0===$d&&($d=new(window.AudioContext||window.webkitAudioContext)),$d},setContext:function(e){$d=e}};function uf(e){Zp.call(this,e)}function pf(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Dr)}function df(e,t){Id.call(this,void 0,t),this.sh=void 0!==e?e:new pf}function ff(e,t,r){df.call(this,void 0,r);var n=(new Qn).set(e),i=(new Qn).set(t),a=new Dr(n.r,n.g,n.b),o=new Dr(i.r,i.g,i.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}function mf(e,t){df.call(this,void 0,t);var r=(new Qn).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}exports.AudioContext=hf,uf.prototype=Object.assign(Object.create(Zp.prototype),{constructor:uf,load:function(e,t,r,n){var i=new Qp(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,function(e){var r=e.slice(0);hf.getContext().decodeAudioData(r,function(e){t(e)})},r,n)}}),Object.assign(pf.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var r=e.x,n=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScale(a[1],.488603*n),t.addScale(a[2],.488603*i),t.addScale(a[3],.488603*r),t.addScale(a[4],r*n*1.092548),t.addScale(a[5],n*i*1.092548),t.addScale(a[6],.315392*(3*i*i-1)),t.addScale(a[7],r*i*1.092548),t.addScale(a[8],.546274*(r*r-n*n)),t},getIrradianceAt:function(e,t){var r=e.x,n=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScale(a[1],1.023328*n),t.addScale(a[2],1.023328*i),t.addScale(a[3],1.023328*r),t.addScale(a[4],.858086*r*n),t.addScale(a[5],.858086*n*i),t.addScale(a[6],.743125*i*i-.247708),t.addScale(a[7],.858086*r*i),t.addScale(a[8],.429043*(r*r-n*n)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var r=this.coefficients,n=0;n<9;n++)r[n].fromArray(e,t+3*n);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var r=this.coefficients,n=0;n<9;n++)r[n].toArray(e,t+3*n);return e}}),Object.assign(pf,{getBasisAt:function(e,t){var r=e.x,n=e.y,i=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*i,t[3]=.488603*r,t[4]=1.092548*r*n,t[5]=1.092548*n*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*r*i,t[8]=.546274*(r*r-n*n)}}),df.prototype=Object.assign(Object.create(Id.prototype),{constructor:df,isLightProbe:!0,copy:function(e){return Id.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Id.prototype.toJSON.call(this,e)}}),ff.prototype=Object.assign(Object.create(df.prototype),{constructor:ff,isHemisphereLightProbe:!0,copy:function(e){return df.prototype.copy.call(this,e),this},toJSON:function(e){return df.prototype.toJSON.call(this,e)}}),mf.prototype=Object.assign(Object.create(df.prototype),{constructor:mf,isAmbientLightProbe:!0,copy:function(e){return df.prototype.copy.call(this,e),this},toJSON:function(e){return df.prototype.toJSON.call(this,e)}});var vf=new Hr,gf=new Hr;function yf(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new oa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new oa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function xf(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(yf.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var r,n,i=e.projectionMatrix.clone(),a=t.eyeSep/2,o=a*t.near/t.focus,s=t.near*Math.tan(_r.DEG2RAD*t.fov*.5)/t.zoom;gf.elements[12]=-a,vf.elements[12]=a,r=-s*t.aspect+o,n=s*t.aspect+o,i.elements[0]=2*t.near/(n-r),i.elements[8]=(n+r)/(n-r),this.cameraL.projectionMatrix.copy(i),r=-s*t.aspect-o,n=s*t.aspect-o,i.elements[0]=2*t.near/(n-r),i.elements[8]=(n+r)/(n-r),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(gf),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(vf)}}),Object.assign(xf.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var bf=new Dr,_f=new Cr,wf=new Dr,Mf=new Dr;function Sf(){on.call(this),this.type="AudioListener",this.context=hf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xf}function Tf(e){on.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Sf.prototype=Object.assign(Object.create(on.prototype),{constructor:Sf,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){on.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(bf,_f,wf),Mf.set(0,0,-1).applyQuaternion(_f),t.positionX){var n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(bf.x,n),t.positionY.linearRampToValueAtTime(bf.y,n),t.positionZ.linearRampToValueAtTime(bf.z,n),t.forwardX.linearRampToValueAtTime(Mf.x,n),t.forwardY.linearRampToValueAtTime(Mf.y,n),t.forwardZ.linearRampToValueAtTime(Mf.z,n),t.upX.linearRampToValueAtTime(r.x,n),t.upY.linearRampToValueAtTime(r.y,n),t.upZ.linearRampToValueAtTime(r.z,n)}else t.setPosition(bf.x,bf.y,bf.z),t.setOrientation(Mf.x,Mf.y,Mf.z,r.x,r.y,r.z)}}),Tf.prototype=Object.assign(Object.create(on.prototype),{constructor:Tf,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Ef=new Dr,Af=new Cr,Lf=new Dr,Rf=new Dr;function Cf(e){Tf.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Pf(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Of(e,t,r){this.binding=e,this.valueSize=r;var n,i=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Cf.prototype=Object.assign(Object.create(Tf.prototype),{constructor:Cf,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(e){if(on.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Ef,Af,Lf),Rf.set(0,0,1).applyQuaternion(Af);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ef.x,r),t.positionY.linearRampToValueAtTime(Ef.y,r),t.positionZ.linearRampToValueAtTime(Ef.z,r),t.orientationX.linearRampToValueAtTime(Rf.x,r),t.orientationY.linearRampToValueAtTime(Rf.y,r),t.orientationZ.linearRampToValueAtTime(Rf.z,r)}else t.setPosition(Ef.x,Ef.y,Ef.z),t.setOrientation(Rf.x,Rf.y,Rf.z)}}}),Object.assign(Pf.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(Of.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==n;++o)r[i+o]=r[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*t;this._mixBufferRegion(r,n,o,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(r[s]!==r[s+t]){a.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,a=n;i!==a;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var a=0;a!==i;++a)e[t+a]=e[r+a]},_slerp:function(e,t,r,n){Cr.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){for(var a=1-n,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*n}}});var Df="\\[\\]\\.:\\/",If=new RegExp("["+Df+"]","g"),Nf="[^"+Df+"]",Ff="[^"+Df.replace("\\.","")+"]",Bf=/((?:WC+[\/:])*)/.source.replace("WC",Nf),zf=/(WCOD+)?/.source.replace("WCOD",Ff),Uf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Nf),Gf=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Nf),Hf=new RegExp("^"+Bf+zf+Uf+Gf+"$"),Vf=["material","materials","bones"];function kf(e,t,r){var n=r||jf.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function jf(e,t,r){this.path=t,this.parsedPath=r||jf.parseTrackName(t),this.node=jf.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Wf(){this.uuid=_r.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function qf(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,i=n.length,a=new Array(i),o={endingStart:Lt,endingEnd:Lt},s=0;s!==i;++s){var c=n[s].createInterpolant(null);a[s]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Mt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Xf(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Yf(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Zf(e,t,r){$l.call(this,e,t),this.meshPerAttribute=r||1}function Jf(e,t,r,n){this.ray=new On(e,t),this.near=r||0,this.far=n||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Qf(e,t){return e.distance-t.distance}function Kf(e,t,r,n){if(!1!==e.visible&&(e.raycast(t,r),!0===n))for(var i=e.children,a=0,o=i.length;a<o;a++)Kf(i[a],t,r,!0)}function $f(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function em(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}Object.assign(kf.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(jf,{Composite:kf,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new jf.Composite(e,t,r):new jf(e,t,r)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(If,"")},parseTrackName:function(e){var t=Hf.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=r.nodeName.substring(n+1);-1!==Vf.indexOf(i)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var a=n(i.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(jf.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=jf.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var a=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[n];if(void 0!==s){var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+n+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(jf.prototype,{_getValue_unbound:jf.prototype.getValue,_setValue_unbound:jf.prototype.setValue}),Object.assign(Wf.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,c=void 0,l=0,h=arguments.length;l!==h;++l){var u=arguments[l],p=u.uuid,d=n[p];if(void 0===d){d=t++,n[p]=d,e.push(u);for(var f=0,m=s;f!==m;++f)o[f].push(new jf(u,i[f],a[f]))}else if(d<r){c=e[d];var v=--r,g=e[v];n[g.uuid]=d,e[d]=g,n[p]=v,e[v]=u;for(f=0,m=s;f!==m;++f){var y=o[f],x=y[v],b=y[d];y[d]=x,void 0===b&&(b=new jf(u,i[f],a[f])),y[v]=b}}else e[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,l=r[c];if(void 0!==l&&l>=t){var h=t++,u=e[h];r[u.uuid]=l,e[l]=u,r[c]=h,e[h]=s;for(var p=0,d=i;p!==d;++p){var f=n[p],m=f[h],v=f[l];f[l]=m,f[h]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o].uuid,l=n[c];if(void 0!==l)if(delete n[c],l<r){var h=--r,u=e[h],p=e[g=--t];n[u.uuid]=l,e[l]=u,n[p.uuid]=h,e[h]=p,e.pop();for(var d=0,f=a;d!==f;++d){var m=(y=i[d])[h],v=y[g];y[l]=m,y[h]=v,y.pop()}}else{var g;n[(p=e[g=--t]).uuid]=l,e[l]=p,e.pop();for(d=0,f=a;d!==f;++d){var y;(y=i[d])[l]=y[g],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,h=new Array(c);n=i.length,r[e]=n,a.push(e),o.push(t),i.push(h);for(var u=l,p=s.length;u!==p;++u){var d=s[u];h[u]=new jf(d,e,t)}return h},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=r,a[r]=s,a.pop(),i[r]=i[o],i.pop(),n[r]=n[o],n.pop()}}}),Object.assign(qf.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,a=i/n,o=n/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+r,c[0]=e/o,c[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*r;if(a<0||0===r)return;this._startTime=null,t=r*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,h=0,u=c.length;h!==u;++h)c[h].evaluate(o),l[h].accumulate(n,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r)t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,r=this._clip.duration,n=this.loop,i=this._loopCount,a=n===St;if(0===e)return-1===i?t:a&&1==(1&i)?r-t:t;if(n===wt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=r||t<0){var o=Math.floor(t/r);t-=r*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=t;if(a&&1==(1&i))return r-t}return t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=Rt,n.endingEnd=Rt):(n.endingStart=e?this.zeroSlopeAtStart?Rt:Lt:Ct,n.endingEnd=t?this.zeroSlopeAtEnd?Rt:Lt:Ct)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=r,this}}),Xf.prototype=Object.assign(Object.create(gr.prototype),{constructor:Xf,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var h=0;h!==i;++h){var u=n[h],p=u.name,d=l[p];if(void 0!==d)a[h]=d;else{if(void 0!==(d=a[h])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[h].binding.parsedPath;++(d=new Of(jf.create(r,p,f),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),a[h]=d}o[h].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],a=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[n]},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new Dp(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?kp.findByName(r,e):e,a=null!==i?i.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var c=o.actionByRoot[n];if(void 0!==c)return c;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new qf(this,i,t);return this._bindAction(l,s),this._addInactiveAction(l,a,n),l},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?kp.findByName(r,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==r;++o){t[o]._update(n,e,i,a)}var s=this._bindings,c=this._nActiveBindings;for(o=0;o!==c;++o)s[o].apply(a);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var l=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=l,t[l]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Yf.prototype.clone=function(){return new Yf(void 0===this.value.clone?this.value:this.value.clone())},Zf.prototype=Object.assign(Object.create($l.prototype),{constructor:Zf,isInstancedInterleavedBuffer:!0,copy:function(e){return $l.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Jf.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){var n=r||[];return Kf(e,this,n,t),n.sort(Qf),n},intersectObjects:function(e,t,r){var n=r||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,a=e.length;i<a;i++)Kf(e[i],this,n,t);return n.sort(Qf),n}}),Object.assign($f.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(_r.clamp(t/this.radius,-1,1))),this}}),Object.assign(em.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}});var tm=new wr;function rm(e,t){this.min=void 0!==e?e:new wr(1/0,1/0),this.max=void 0!==t?t:new wr(-1/0,-1/0)}Object.assign(rm.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var r=tm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new wr),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new wr),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new wr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new wr),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return tm.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var nm=new Dr,im=new Dr;function am(e,t){this.start=void 0!==e?e:new Dr,this.end=void 0!==t?t:new Dr}function om(e){on.call(this),this.material=e,this.render=function(){}}Object.assign(am.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Dr),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Dr),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Dr),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){nm.subVectors(e,this.start),im.subVectors(this.end,this.start);var r=im.dot(im),n=im.dot(nm)/r;return t&&(n=_r.clamp(n,0,1)),n},closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t);return void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new Dr),this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),om.prototype=Object.create(on.prototype),om.prototype.constructor=om,om.prototype.isImmediateRenderObject=!0;var sm=new Dr;function cm(e,t){on.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var r=new Ti,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1;i<32;i++,a++){var o=i/32*Math.PI*2,s=a/32*Math.PI*2;n.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}r.setAttribute("position",new fi(n,3));var c=new Ph({fog:!1});this.cone=new Gh(r,c),this.add(this.cone),this.update()}cm.prototype=Object.create(on.prototype),cm.prototype.constructor=cm,cm.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},cm.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),sm.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sm),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var lm=new Dr,hm=new Hr,um=new Hr;function pm(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,pm(e.children[r]));return t}function dm(e){for(var t=pm(e),r=new Ti,n=[],i=[],a=new Qn(0,0,1),o=new Qn(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}r.setAttribute("position",new fi(n,3)),r.setAttribute("color",new fi(i,3));var l=new Ph({vertexColors:b,depthTest:!1,depthWrite:!1,transparent:!0});Gh.call(this,r,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function fm(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r;var n=new np(t,4,2),i=new ii({wireframe:!0,fog:!1});ki.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dm.prototype=Object.create(Gh.prototype),dm.prototype.constructor=dm,dm.prototype.updateMatrixWorld=function(e){var t=this.bones,r=this.geometry,n=r.getAttribute("position");um.getInverse(this.root.matrixWorld);for(var i=0,a=0;i<t.length;i++){var o=t[i];o.parent&&o.parent.isBone&&(hm.multiplyMatrices(um,o.matrixWorld),lm.setFromMatrixPosition(hm),n.setXYZ(a,lm.x,lm.y,lm.z),hm.multiplyMatrices(um,o.parent.matrixWorld),lm.setFromMatrixPosition(hm),n.setXYZ(a+1,lm.x,lm.y,lm.z),a+=2)}r.getAttribute("position").needsUpdate=!0,on.prototype.updateMatrixWorld.call(this,e)},fm.prototype=Object.create(ki.prototype),fm.prototype.constructor=fm,fm.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},fm.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var mm=new Dr,vm=new Qn,gm=new Qn;function ym(e,t,r){on.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new su(t);n.rotateY(.5*Math.PI),this.material=new ii({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=b);var i=n.getAttribute("position"),a=new Float32Array(3*i.count);n.setAttribute("color",new oi(a,3)),this.add(new ki(n,this.material)),this.update()}function xm(e,t,r,n){e=e||10,t=t||10,r=new Qn(void 0!==r?r:4473924),n=new Qn(void 0!==n?n:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],c=[],l=0,h=0,u=-o;l<=t;l++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);var p=l===i?r:n;p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3}var d=new Ti;d.setAttribute("position",new fi(s,3)),d.setAttribute("color",new fi(c,3));var f=new Ph({vertexColors:b});Gh.call(this,d,f)}function bm(e,t,r,n,i,a){e=e||10,t=t||16,r=r||8,n=n||64,i=new Qn(void 0!==i?i:4473924),a=new Qn(void 0!==a?a:8947848);var o,s,c,l,h,u,p,d=[],f=[];for(l=0;l<=t;l++)c=l/t*(2*Math.PI),o=Math.sin(c)*e,s=Math.cos(c)*e,d.push(0,0,0),d.push(o,0,s),p=1&l?i:a,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(l=0;l<=r;l++)for(p=1&l?i:a,u=e-e/r*l,h=0;h<n;h++)c=h/n*(2*Math.PI),o=Math.sin(c)*u,s=Math.cos(c)*u,d.push(o,0,s),f.push(p.r,p.g,p.b),c=(h+1)/n*(2*Math.PI),o=Math.sin(c)*u,s=Math.cos(c)*u,d.push(o,0,s),f.push(p.r,p.g,p.b);var m=new Ti;m.setAttribute("position",new fi(d,3)),m.setAttribute("color",new fi(f,3));var v=new Ph({vertexColors:b});Gh.call(this,m,v)}ym.prototype=Object.create(on.prototype),ym.prototype.constructor=ym,ym.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ym.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");vm.copy(this.light.color),gm.copy(this.light.groundColor);for(var r=0,n=t.count;r<n;r++){var i=r<n/2?vm:gm;t.setXYZ(r,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(mm.setFromMatrixPosition(this.light.matrixWorld).negate())},xm.prototype=Object.assign(Object.create(Gh.prototype),{constructor:xm,copy:function(e){return Gh.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),bm.prototype=Object.create(Gh.prototype),bm.prototype.constructor=bm;var _m=new Dr,wm=new Dr,Mm=new Dr;function Sm(e,t,r){on.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);var n=new Ti;n.setAttribute("position",new fi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Ph({fog:!1});this.lightPlane=new Bh(n,i),this.add(this.lightPlane),(n=new Ti).setAttribute("position",new fi([0,0,0,0,0,1],3)),this.targetLine=new Bh(n,i),this.add(this.targetLine),this.update()}Sm.prototype=Object.create(on.prototype),Sm.prototype.constructor=Sm,Sm.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Sm.prototype.update=function(){_m.setFromMatrixPosition(this.light.matrixWorld),wm.setFromMatrixPosition(this.light.target.matrixWorld),Mm.subVectors(wm,_m),this.lightPlane.lookAt(wm),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(wm),this.targetLine.scale.z=Mm.length()};var Tm=new Dr,Em=new aa;function Am(e){var t=new Ti,r=new Ph({color:16777215,vertexColors:x}),n=[],i=[],a={},o=new Qn(16755200),s=new Qn(16711680),c=new Qn(43775),l=new Qn(16777215),h=new Qn(3355443);function u(e,t,r){p(e,r),p(t,r)}function p(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",c),u("u2","u3",c),u("u3","u1",c),u("c","t",l),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),t.setAttribute("position",new fi(n,3)),t.setAttribute("color",new fi(i,3)),Gh.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Lm(e,t,r,n,i,a,o){Tm.set(i,a,o).unproject(n);var s=t[e];if(void 0!==s)for(var c=r.getAttribute("position"),l=0,h=s.length;l<h;l++)c.setXYZ(s[l],Tm.x,Tm.y,Tm.z)}Am.prototype=Object.create(Gh.prototype),Am.prototype.constructor=Am,Am.prototype.update=function(){var e=this.geometry,t=this.pointMap;Em.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Lm("c",t,e,Em,0,0,-1),Lm("t",t,e,Em,0,0,1),Lm("n1",t,e,Em,-1,-1,-1),Lm("n2",t,e,Em,1,-1,-1),Lm("n3",t,e,Em,-1,1,-1),Lm("n4",t,e,Em,1,1,-1),Lm("f1",t,e,Em,-1,-1,1),Lm("f2",t,e,Em,1,-1,1),Lm("f3",t,e,Em,-1,1,1),Lm("f4",t,e,Em,1,1,1),Lm("u1",t,e,Em,.7,1.1,-1),Lm("u2",t,e,Em,-.7,1.1,-1),Lm("u3",t,e,Em,0,2,-1),Lm("cf1",t,e,Em,-1,0,1),Lm("cf2",t,e,Em,1,0,1),Lm("cf3",t,e,Em,0,-1,1),Lm("cf4",t,e,Em,0,1,1),Lm("cn1",t,e,Em,-1,0,-1),Lm("cn2",t,e,Em,1,0,-1),Lm("cn3",t,e,Em,0,-1,-1),Lm("cn4",t,e,Em,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Rm=new _n;function Cm(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new Ti;i.setIndex(new oi(r,1)),i.setAttribute("position",new oi(n,3)),Gh.call(this,i,new Ph({color:t})),this.matrixAutoUpdate=!1,this.update()}function Pm(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Ti;n.setIndex(new oi(r,1)),n.setAttribute("position",new fi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Gh.call(this,n,new Ph({color:t})),this.geometry.computeBoundingSphere()}function Om(e,t,r){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var n=void 0!==r?r:16776960,i=new Ti;i.setAttribute("position",new fi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Bh.call(this,i,new Ph({color:n}));var a=new Ti;a.setAttribute("position",new fi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new ki(a,new ii({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}Cm.prototype=Object.create(Gh.prototype),Cm.prototype.constructor=Cm,Cm.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Rm.setFromObject(this.object),!Rm.isEmpty()){var t=Rm.min,r=Rm.max,n=this.geometry.attributes.position,i=n.array;i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=t.x,i[4]=r.y,i[5]=r.z,i[6]=t.x,i[7]=t.y,i[8]=r.z,i[9]=r.x,i[10]=t.y,i[11]=r.z,i[12]=r.x,i[13]=r.y,i[14]=t.z,i[15]=t.x,i[16]=r.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=r.x,i[22]=t.y,i[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Cm.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Cm.prototype.copy=function(e){return Gh.prototype.copy.call(this,e),this.object=e.object,this},Cm.prototype.clone=function(){return(new this.constructor).copy(this)},Pm.prototype=Object.create(Gh.prototype),Pm.prototype.constructor=Pm,Pm.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),on.prototype.updateMatrixWorld.call(this,e))},Om.prototype=Object.create(Bh.prototype),Om.prototype.constructor=Om,Om.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?f:d,this.lookAt(this.plane.normal),on.prototype.updateMatrixWorld.call(this,e)};var Dm,Im,Nm=new Dr;function Fm(e,t,r,n,i,a){on.call(this),void 0===e&&(e=new Dr(0,0,1)),void 0===t&&(t=new Dr(0,0,0)),void 0===r&&(r=1),void 0===n&&(n=16776960),void 0===i&&(i=.2*r),void 0===a&&(a=.2*i),void 0===Dm&&((Dm=new Ti).setAttribute("position",new fi([0,0,0,0,1,0],3)),(Im=new dp(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Bh(Dm,new Ph({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ki(Im,new ii({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,a)}function Bm(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Ti;r.setAttribute("position",new fi(t,3)),r.setAttribute("color",new fi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new Ph({vertexColors:b});Gh.call(this,r,n)}Fm.prototype=Object.create(on.prototype),Fm.prototype.constructor=Fm,Fm.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Nm.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Nm,t)}},Fm.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},Fm.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Fm.prototype.copy=function(e){return on.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Fm.prototype.clone=function(){return(new this.constructor).copy(this)},Bm.prototype=Object.create(Gh.prototype),Bm.prototype.constructor=Bm;var zm=4,Um=8,Gm=Math.pow(2,Um),Hm=[.125,.215,.35,.446,.526,.582],Vm=Um-zm+1+Hm.length,km=20,jm={[It]:0,[Nt]:1,[Bt]:2,[Ut]:3,[Gt]:4,[Ht]:5,[Ft]:6},Wm=new Hd,qm=vv(km),Xm=null,Ym=null,{_lodPlanes:Zm,_sizeLods:Jm,_sigmas:Qm}=av(),Km=null,$m=null,ev=null,tv=(1+Math.sqrt(5))/2,rv=1/tv,nv=[new Dr(1,1,1),new Dr(-1,1,1),new Dr(1,1,-1),new Dr(-1,1,-1),new Dr(0,tv,rv),new Dr(0,tv,-rv),new Dr(rv,0,tv),new Dr(-rv,0,tv),new Dr(tv,rv,0),new Dr(-tv,rv,0)];function iv(e){$m=e,hv(qm)}function av(){for(var e=[],t=[],r=[],n=Um,i=0;i<Vm;i++){var a=Math.pow(2,n);t.push(a);var o=1/a;i>Um-zm?o=Hm[i-Um+zm-1]:0==i&&(o=0),r.push(o);for(var s=1/(a-1),c=-s/2,l=1+s/2,h=[c,c,l,c,l,l,c,c,l,l,c,l],u=new Float32Array(108),p=new Float32Array(72),d=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,v=f>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];u.set(g,18*f),p.set(h,12*f);var y=[f,f,f,f,f,f];d.set(y,6*f)}var x=new Ti;x.setAttribute("position",new oi(u,3)),x.setAttribute("uv",new oi(p,2)),x.setAttribute("faceIndex",new oi(d,1)),e.push(x),n>zm&&n--}return{_lodPlanes:e,_sizeLods:t,_sigmas:r}}function ov(e){var t={magFilter:ge,minFilter:ge,generateMipmaps:!1,type:e?e.type:Ae,format:e?e.format:je,encoding:e?e.encoding:Bt,depthBuffer:!1,stencilBuffer:!1},r=uv(t);return r.depthBuffer=!e,Km=uv(t),r}function sv(e){Km.dispose(),$m.setRenderTarget(ev),e.scissorTest=!1,e.setSize(e.width,e.height)}function cv(e,t,r,n){var i=new oa(90,1,t,r),a=[1,1,1,1,-1,1],o=[1,1,-1,-1,-1,1],s=$m.outputEncoding,c=$m.toneMapping,l=$m.toneMappingExposure,h=$m.getClearColor(),u=$m.getClearAlpha();$m.toneMapping=te,$m.toneMappingExposure=1,$m.outputEncoding=It,e.scale.z*=-1;var p=e.background;if(p&&p.isColor){p.convertSRGBToLinear();var d=Math.max(p.r,p.g,p.b),f=Math.min(Math.max(Math.ceil(Math.log2(d)),-128),127);p=p.multiplyScalar(Math.pow(2,-f));var m=(f+128)/255;$m.setClearColor(p,m),e.background=null}for(var v=0;v<6;v++){var g=v%3;0==g?(i.up.set(0,a[v],0),i.lookAt(o[v],0,0)):1==g?(i.up.set(0,0,a[v]),i.lookAt(0,o[v],0)):(i.up.set(0,a[v],0),i.lookAt(0,0,o[v])),pv(n,g*Gm,v>2?Gm:0,Gm,Gm),$m.setRenderTarget(n),$m.render(e,i)}$m.toneMapping=c,$m.toneMappingExposure=l,$m.outputEncoding=s,$m.setClearColor(h,u),e.scale.z*=-1}function lv(e,t){var r=new sn;e.isCubeTexture?null==Ym&&(Ym=yv()):null==Xm&&(Xm=gv());var n=e.isCubeTexture?Ym:Xm;r.add(new ki(Zm[0],n));var i=n.uniforms;i.envMap.value=e,e.isCubeTexture||i.texelSize.value.set(1/e.image.width,1/e.image.height),i.inputEncoding.value=jm[e.encoding],i.outputEncoding.value=jm[e.encoding],pv(t,0,0,3*Gm,2*Gm),$m.setRenderTarget(t),$m.render(r,Wm)}function hv(e){var t=new sn;t.add(new ki(Zm[0],e)),$m.compile(t,Wm)}function uv(e){var t=new Lr(3*Gm,3*Gm,e);return t.texture.mapping=pe,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function pv(e,t,r,n,i){e.viewport.set(t,r,n,i),e.scissor.set(t,r,n,i)}function dv(e){var t=$m.autoClear;$m.autoClear=!1;for(var r=1;r<Vm;r++){fv(e,r-1,r,Math.sqrt(Qm[r]*Qm[r]-Qm[r-1]*Qm[r-1]),nv[(r-1)%nv.length])}$m.autoClear=t}function fv(e,t,r,n,i){mv(e,Km,t,r,n,"latitudinal",i),mv(Km,e,r,r,n,"longitudinal",i)}function mv(e,t,r,n,i,a,o){"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var s=new sn;s.add(new ki(Zm[n],qm));var c=qm.uniforms,l=Jm[r]-1,h=isFinite(i)?Math.PI/(2*l):2*Math.PI/(2*km-1),u=i/h,p=isFinite(i)?1+Math.floor(3*u):km;p>km&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${km}`);for(var d=[],f=0,m=0;m<km;++m){var v=m/u,g=Math.exp(-v*v/2);d.push(g),0==m?f+=g:m<p&&(f+=2*g)}for(m=0;m<d.length;m++)d[m]=d[m]/f;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=d,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o),c.dTheta.value=h,c.mipInt.value=Um-r,c.inputEncoding.value=jm[e.texture.encoding],c.outputEncoding.value=jm[e.texture.encoding];var y=Jm[n];pv(t,v=3*Math.max(0,Gm-2*y),(0===n?0:2*Gm)+2*y*(n>Um-zm?n-Um+zm:0),3*y,2*y),$m.setRenderTarget(t),$m.render(s,Wm)}function vv(e){var t=new bp({defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(e)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new Dr(0,1,0)},inputEncoding:{value:jm[It]},outputEncoding:{value:jm[It]}},vertexShader:xv(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n${bv()}\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:_,depthTest:!1,depthWrite:!1});return t.type="SphericalGaussianBlur",t}function gv(){var e=new bp({uniforms:{envMap:{value:null},texelSize:{value:new wr(1,1)},inputEncoding:{value:jm[It]},outputEncoding:{value:jm[It]}},vertexShader:xv(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n${bv()}\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:_,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function yv(){var e=new bp({uniforms:{envMap:{value:null},inputEncoding:{value:jm[It]},outputEncoding:{value:jm[It]}},vertexShader:xv(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n${bv()}\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:_,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function xv(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"}function bv(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"}function _v(e,t,r,n,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ti(e,t,r,i,a,o)}iv.prototype={constructor:iv,fromScene:function(e,t=0,r=.1,n=100){ev=$m.getRenderTarget();var i=ov();return cv(e,r,n,i),t>0&&fv(i,0,0,t),dv(i),sv(i),i},fromEquirectangular:function(e){return e.magFilter=ge,e.minFilter=ge,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){ev=$m.getRenderTarget();var t=ov(e);return lv(e,t),dv(t),sv(t),t},compileCubemapShader:function(){null==Ym&&hv(Ym=yv())},compileEquirectangularShader:function(){null==Xm&&hv(Xm=gv())},dispose:function(){qm.dispose(),null!=Ym&&Ym.dispose(),null!=Xm&&Xm.dispose();for(var e=0;e<Zm.length;e++)Zm[e].dispose()}};var wv=0;exports.LineStrip=wv;var Mv=1;function Sv(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Tv(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Ev(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Xh(e,t)}function Av(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new vh(e)}function Lv(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Xh(e,t)}function Rv(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Vh(e)}function Cv(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Vh(e)}function Pv(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Vh(e)}function Ov(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Dr(e,t,r)}function Dv(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new oi(e,t).setUsage(lr)}function Iv(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new si(e,t)}function Nv(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ci(e,t)}function Fv(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new li(e,t)}function Bv(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new hi(e,t)}function zv(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ui(e,t)}function Uv(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new pi(e,t)}function Gv(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new di(e,t)}function Hv(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new fi(e,t)}function Vv(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new mi(e,t)}function kv(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),pd.call(this,e),this.type="catmullrom",this.closed=!0}function jv(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),pd.call(this,e),this.type="catmullrom"}function Wv(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),pd.call(this,e),this.type="catmullrom"}function qv(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Bm(e)}function Xv(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Cm(e,t)}function Yv(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Gh(new up(e.geometry),new Ph({color:void 0!==t?t:16777215}))}function Zv(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Gh(new $h(e.geometry),new Ph({color:void 0!==t?t:16777215}))}function Jv(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Qp(e)}function Qv(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ed(e)}function Kv(e,t,r){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new ha(e,r)}exports.LinePieces=Mv,id.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(id.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Pd.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Ji,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new Dr(i.x,i.y,i.z||0))}return t}}),Object.assign(Od.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),kv.prototype=Object.create(pd.prototype),jv.prototype=Object.create(pd.prototype),Wv.prototype=Object.create(pd.prototype),Object.assign(Wv.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),xm.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},dm.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Zp.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Xd.extractUrlBase(e)}}),Zp.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Kd.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(rm.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(_n.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),fa.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},am.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(_r,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),_r.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),_r.ceilPowerOfTwo(e)}}),Object.assign(Mr.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Hr.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Dr).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,a)}}),Fn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Cr.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(On.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Xn.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Xn,{barycoordFromPoint:function(e,t,r,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Xn.getBarycoord(e,t,r,n,i)},normal:function(e,t,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Xn.getNormal(e,t,r,n)}}),Object.assign(Dd.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ju(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new cp(this,e)}}),Object.assign(wr.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Dr.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ar.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ji.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(on.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(on.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(ki.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(ki.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Pt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(bh.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Sh.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),_h.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(id.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),oa.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Id.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(oi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===lr},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(lr)}}}),Object.assign(oi.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?lr:cr),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ti.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new oi(arguments[1],arguments[2])))},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Ti.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties($l.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===lr},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign($l.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?lr:cr),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Qu.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Yf.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ni.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Qn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===v}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Mp.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ia.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Jl.prototype,{clearTarget:function(e,t,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Jl.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Nt:It}}}),Object.defineProperties(Hl.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Lr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Tf.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new uf).load(e,function(e){t.setBuffer(e)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Pf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},la.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var $v={merge:function(e,t,r){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function eg(){console.error("THREE.CanvasRenderer has been removed")}function tg(){console.error("THREE.JSONLoader has been removed.")}exports.GeometryUtils=$v,Sr.crossOrigin=void 0,Sr.loadTexture=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new nd;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,void 0,n);return t&&(a.mapping=t),a},Sr.loadTextureCube=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new rd;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,void 0,n);return t&&(a.mapping=t),a},Sr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Sr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var rg={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function ng(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}exports.SceneUtils=rg,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:e}}));
},{}],"x87H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrbitControls=exports.MapControls=void 0;var e=require("../../../build/three.module.js"),t=function(t,o){var n,a,i,c,s;void 0===o&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),o===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=o,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:e.MOUSE.ROTATE,MIDDLE:e.MOUSE.DOLLY,RIGHT:e.MOUSE.PAN},this.touches={ONE:e.TOUCH.ROTATE,TWO:e.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return b.phi},this.getAzimuthalAngle=function(){return b.theta},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(u),r.update(),p=h.NONE},this.update=(n=new e.Vector3,a=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),i=a.clone().inverse(),c=new e.Vector3,s=new e.Quaternion,function(){var e=r.object.position;return n.copy(e).sub(r.target),n.applyQuaternion(a),b.setFromVector3(n),r.autoRotate&&p===h.NONE&&R(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(b.theta+=E.theta*r.dampingFactor,b.phi+=E.phi*r.dampingFactor):(b.theta+=E.theta,b.phi+=E.phi),b.theta=Math.max(r.minAzimuthAngle,Math.min(r.maxAzimuthAngle,b.theta)),b.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=O,b.radius=Math.max(r.minDistance,Math.min(r.maxDistance,b.radius)),!0===r.enableDamping?r.target.addScaledVector(f,r.dampingFactor):r.target.add(f),n.setFromSpherical(b),n.applyQuaternion(i),e.copy(r.target).add(n),r.object.lookAt(r.target),!0===r.enableDamping?(E.theta*=1-r.dampingFactor,E.phi*=1-r.dampingFactor,f.multiplyScalar(1-r.dampingFactor)):(E.set(0,0,0),f.set(0,0,0)),O=1,!!(g||c.distanceToSquared(r.object.position)>d||8*(1-s.dot(r.object.quaternion))>d)&&(r.dispatchEvent(u),c.copy(r.object.position),s.copy(r.object.quaternion),g=!1,!0)}),this.dispose=function(){r.domElement.removeEventListener("contextmenu",ee,!1),r.domElement.removeEventListener("mousedown",B,!1),r.domElement.removeEventListener("wheel",W,!1),r.domElement.removeEventListener("touchstart",Q,!1),r.domElement.removeEventListener("touchend",$,!1),r.domElement.removeEventListener("touchmove",J,!1),document.removeEventListener("mousemove",G,!1),document.removeEventListener("mouseup",K,!1),r.domElement.removeEventListener("keydown",q,!1)};var r=this,u={type:"change"},l={type:"start"},m={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},p=h.NONE,d=1e-6,b=new e.Spherical,E=new e.Spherical,O=1,f=new e.Vector3,g=!1,v=new e.Vector2,T=new e.Vector2,y=new e.Vector2,P=new e.Vector2,L=new e.Vector2,A=new e.Vector2,N=new e.Vector2,j=new e.Vector2,w=new e.Vector2;function M(){return Math.pow(.95,r.zoomSpeed)}function R(e){E.theta-=e}function S(e){E.phi-=e}var k,C=(k=new e.Vector3,function(e,t){k.setFromMatrixColumn(t,0),k.multiplyScalar(-e),f.add(k)}),Y=function(){var t=new e.Vector3;return function(e,o){!0===r.screenSpacePanning?t.setFromMatrixColumn(o,1):(t.setFromMatrixColumn(o,0),t.crossVectors(r.object.up,t)),t.multiplyScalar(e),f.add(t)}}(),x=function(){var t=new e.Vector3;return function(e,o){var n=r.domElement;if(r.object.isPerspectiveCamera){var a=r.object.position;t.copy(a).sub(r.target);var i=t.length();i*=Math.tan(r.object.fov/2*Math.PI/180),C(2*e*i/n.clientHeight,r.object.matrix),Y(2*o*i/n.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(C(e*(r.object.right-r.object.left)/r.object.zoom/n.clientWidth,r.object.matrix),Y(o*(r.object.top-r.object.bottom)/r.object.zoom/n.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function D(e){r.object.isPerspectiveCamera?O/=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*e)),r.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function H(e){r.object.isPerspectiveCamera?O*=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/e)),r.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function U(e){v.set(e.clientX,e.clientY)}function V(e){P.set(e.clientX,e.clientY)}function _(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,o)}}function z(e){if(1==e.touches.length)P.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);P.set(t,o)}}function X(e){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+o*o);N.set(0,n)}function Z(e){if(1==e.touches.length)T.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(t,o)}y.subVectors(T,v).multiplyScalar(r.rotateSpeed);var n=r.domElement;R(2*Math.PI*y.x/n.clientHeight),S(2*Math.PI*y.y/n.clientHeight),v.copy(T)}function I(e){if(1==e.touches.length)L.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);L.set(t,o)}A.subVectors(L,P).multiplyScalar(r.panSpeed),x(A.x,A.y),P.copy(L)}function F(e){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+o*o);j.set(0,n),w.set(0,Math.pow(j.y/N.y,r.zoomSpeed)),D(w.y),N.copy(j)}function B(t){if(!1!==r.enabled){var o;switch(t.preventDefault(),r.domElement.focus?r.domElement.focus():window.focus(),t.button){case 0:o=r.mouseButtons.LEFT;break;case 1:o=r.mouseButtons.MIDDLE;break;case 2:o=r.mouseButtons.RIGHT;break;default:o=-1}switch(o){case e.MOUSE.DOLLY:if(!1===r.enableZoom)return;!function(e){N.set(e.clientX,e.clientY)}(t),p=h.DOLLY;break;case e.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===r.enablePan)return;V(t),p=h.PAN}else{if(!1===r.enableRotate)return;U(t),p=h.ROTATE}break;case e.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===r.enableRotate)return;U(t),p=h.ROTATE}else{if(!1===r.enablePan)return;V(t),p=h.PAN}break;default:p=h.NONE}p!==h.NONE&&(document.addEventListener("mousemove",G,!1),document.addEventListener("mouseup",K,!1),r.dispatchEvent(l))}}function G(e){if(!1!==r.enabled)switch(e.preventDefault(),p){case h.ROTATE:if(!1===r.enableRotate)return;!function(e){T.set(e.clientX,e.clientY),y.subVectors(T,v).multiplyScalar(r.rotateSpeed);var t=r.domElement;R(2*Math.PI*y.x/t.clientHeight),S(2*Math.PI*y.y/t.clientHeight),v.copy(T),r.update()}(e);break;case h.DOLLY:if(!1===r.enableZoom)return;!function(e){j.set(e.clientX,e.clientY),w.subVectors(j,N),w.y>0?D(M()):w.y<0&&H(M()),N.copy(j),r.update()}(e);break;case h.PAN:if(!1===r.enablePan)return;!function(e){L.set(e.clientX,e.clientY),A.subVectors(L,P).multiplyScalar(r.panSpeed),x(A.x,A.y),P.copy(L),r.update()}(e)}}function K(e){!1!==r.enabled&&(document.removeEventListener("mousemove",G,!1),document.removeEventListener("mouseup",K,!1),r.dispatchEvent(m),p=h.NONE)}function W(e){!1===r.enabled||!1===r.enableZoom||p!==h.NONE&&p!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),r.dispatchEvent(l),function(e){e.deltaY<0?H(M()):e.deltaY>0&&D(M()),r.update()}(e),r.dispatchEvent(m))}function q(e){!1!==r.enabled&&!1!==r.enableKeys&&!1!==r.enablePan&&function(e){var t=!1;switch(e.keyCode){case r.keys.UP:x(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:x(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:x(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:x(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}(e)}function Q(t){if(!1!==r.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(r.touches.ONE){case e.TOUCH.ROTATE:if(!1===r.enableRotate)return;_(t),p=h.TOUCH_ROTATE;break;case e.TOUCH.PAN:if(!1===r.enablePan)return;z(t),p=h.TOUCH_PAN;break;default:p=h.NONE}break;case 2:switch(r.touches.TWO){case e.TOUCH.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(e){r.enableZoom&&X(e),r.enablePan&&z(e)}(t),p=h.TOUCH_DOLLY_PAN;break;case e.TOUCH.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(e){r.enableZoom&&X(e),r.enableRotate&&_(e)}(t),p=h.TOUCH_DOLLY_ROTATE;break;default:p=h.NONE}break;default:p=h.NONE}p!==h.NONE&&r.dispatchEvent(l)}}function J(e){if(!1!==r.enabled)switch(e.preventDefault(),e.stopPropagation(),p){case h.TOUCH_ROTATE:if(!1===r.enableRotate)return;Z(e),r.update();break;case h.TOUCH_PAN:if(!1===r.enablePan)return;I(e),r.update();break;case h.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(e){r.enableZoom&&F(e),r.enablePan&&I(e)}(e),r.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(e){r.enableZoom&&F(e),r.enableRotate&&Z(e)}(e),r.update();break;default:p=h.NONE}}function $(e){!1!==r.enabled&&(r.dispatchEvent(m),p=h.NONE)}function ee(e){!1!==r.enabled&&e.preventDefault()}r.domElement.addEventListener("contextmenu",ee,!1),r.domElement.addEventListener("mousedown",B,!1),r.domElement.addEventListener("wheel",W,!1),r.domElement.addEventListener("touchstart",Q,!1),r.domElement.addEventListener("touchend",$,!1),r.domElement.addEventListener("touchmove",J,!1),r.domElement.addEventListener("keydown",q,!1),-1===r.domElement.tabIndex&&(r.domElement.tabIndex=0),this.update()};exports.OrbitControls=t,t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t;var o=function(o,n){t.call(this,o,n),this.mouseButtons.LEFT=e.MOUSE.PAN,this.mouseButtons.RIGHT=e.MOUSE.ROTATE,this.touches.ONE=e.TOUCH.PAN,this.touches.TWO=e.TOUCH.DOLLY_ROTATE};exports.MapControls=o,o.prototype=Object.create(e.EventDispatcher.prototype),o.prototype.constructor=o;
},{"../../../build/three.module.js":"gBK8"}],"Fjuq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=function(){return function(e,t,s,i,r,a,o){this.pointIndices=e,this.labelStrings=t,this.scaleFactors=s,this.useSceneOpacityFlags=i,this.defaultFontSize=r,this.fillColors=a,this.strokeColors=o}}();exports.LabelRenderParams=t,function(e){e[e.Perspective=0]="Perspective",e[e.Orthographic=1]="Orthographic"}(e=exports.CameraType||(exports.CameraType={}));var s=function(){return function(e,t,s,i,r,a,o,n,h,c,l,p,u,C){this.camera=e,this.cameraType=t,this.cameraTarget=s,this.screenWidth=i,this.screenHeight=r,this.nearestCameraSpacePointZ=a,this.farthestCameraSpacePointZ=o,this.backgroundColor=n,this.pointColors=h,this.pointScaleFactors=c,this.labels=l,this.polylineColors=p,this.polylineOpacities=u,this.polylineWidths=C}}();exports.RenderContext=s;
},{}],"wRhB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three");function r(r,t,n,o){var a=window.devicePixelRatio,c=(new e.Vector3).copy(o).project(r);return[(c.x+1)/2*t*a,-(c.y-1)/2*n*a]}function t(r,t){var n=3*t;return new e.Vector3(r[n],r[n+1],r[n+2])}function n(r,t,n){for(var o=1/0,a=0,c=(new e.Vector3).copy(n).sub(t),u=(new e.Vector3).copy(c).normalize(),i=r.length/3,p=0,s=new e.Vector3,l=new e.Vector3,x=0;x<i;x++){s.x=r[p],s.y=r[p+1],s.z=r[p+2],p+=3,l.copy(s).sub(t);var v=u.dot(l);v<0||(a=v>a?v:a,o=v<o?v:o)}return[o,a]}function o(r,t){return void 0===t&&(t=!0),r.needsUpdate=t,r.minFilter=e.LinearFilter,r.generateMipmaps=!1,r.flipY=!1,r}function a(r){return o(new e.Texture(r))}function c(r,t){var n=new e.Texture(r);return r.onload=function(){n.needsUpdate=!0,t()},o(n,!1)}function u(){try{var e=document.createElement("canvas");return null!=(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(r){return!1}}function i(e){for(var r=1/0,t=-1/0,n=0;n<e.length;n++){var o=e[n];o<r&&(r=o),o>t&&(t=o)}return[r,t]}function p(e,r,t){var n=r[1]-r[0],o=t[1]-t[0];return(e-r[0])/n*o+t[0]}function s(e,r,t){var n=Math.pow(r[1],Math.E)-Math.pow(r[0],Math.E),o=t[1]-t[0];return(Math.pow(e,Math.E)-r[0])/n*o+t[0]}function l(e,r,t,n,o){e[3*r]=t,e[3*r+1]=n,e[3*r+2]=o}function x(r){var t=new e.Color(r);return[255*t.r|0,255*t.g|0,255*t.b|0]}exports.vector3DToScreenCoords=r,exports.vector3FromPackedArray=t,exports.getNearFarPoints=n,exports.createTextureFromCanvas=a,exports.createTextureFromImage=c,exports.hasWebGLSupport=u,exports.extent=i,exports.scaleLinear=p,exports.scaleExponential=s,exports.packRgbIntoUint8Array=l,exports.styleRgbFromHexColor=x;var v=function(e){return 100*e+"%"};function f(r,t,n,o,a,c){var u="hsl("+(n+(o-n)*r/t)+", "+v(a)+", "+v(c)+")";return new e.Color(u)}exports.getDefaultPointInPolylineColor=f;
},{"three":"gBK8"}],"rRSn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,s){this.startCoordinates=[0,0],this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.style.display="none",this.svgElement.style.height="100%",this.svgElement.style.width="100%",this.svgElement.style.position="absolute",t.insertAdjacentElement("afterbegin",this.svgElement),this.rectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.rectElement.style.stroke=s.select.stroke,this.rectElement.style.strokeDasharray=s.select.strokeDashArray,this.rectElement.style.strokeWidth=""+s.select.strokeWidth,this.rectElement.style.fill=s.select.fill,this.rectElement.style.fillOpacity=""+s.select.fillOpacity,this.svgElement.appendChild(this.rectElement),this.selectionCallback=e,this.isMouseDown=!1}return t.prototype.onMouseDown=function(t,e){this.isMouseDown=!0,this.rectElement.style.display="block",this.svgElement.style.display="block",this.startCoordinates=[t,e],this.lastBoundingBox={x:this.startCoordinates[0],y:this.startCoordinates[1],width:1,height:1}},t.prototype.onMouseMove=function(t,e){this.isMouseDown&&(this.lastBoundingBox.x=Math.min(t,this.startCoordinates[0]),this.lastBoundingBox.y=Math.max(e,this.startCoordinates[1]),this.lastBoundingBox.width=Math.max(t,this.startCoordinates[0])-this.lastBoundingBox.x,this.lastBoundingBox.height=this.lastBoundingBox.y-Math.min(e,this.startCoordinates[1]),this.rectElement.setAttribute("x",""+this.lastBoundingBox.x),this.rectElement.setAttribute("y",""+(this.lastBoundingBox.y-this.lastBoundingBox.height)),this.rectElement.setAttribute("width",""+this.lastBoundingBox.width),this.rectElement.setAttribute("height",""+this.lastBoundingBox.height))},t.prototype.onMouseUp=function(){this.isMouseDown=!1,this.svgElement.style.display="none",this.rectElement.style.display="none",this.rectElement.setAttribute("width","0"),this.rectElement.setAttribute("height","0"),this.selectionCallback(this.lastBoundingBox)},t}();exports.ScatterPlotRectangleSelector=t;
},{}],"IiO1":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},e=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,r,n=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return s},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("three"),r=require("three/examples/jsm/controls/OrbitControls"),n=require("./render"),s=require("./util"),a=require("./scatter_plot_rectangle_selector"),h=2,l=5*h,c=.025*h,u=70,d=.01,p=100,m=1.2,f=16,C=17,y=new o.Vector3(.45,.9,1.6),g=new o.Vector3(0,0,0),v=new o.Vector3(0,0,4),b=new o.Vector3(0,0,0),P={mouseRotateSpeed:1,autoRotateSpeed:2,zoomSpeed:.125},w=function(){function h(e,i){var r=this;this.clickCallback=function(){},this.hoverCallback=function(){},this.selectCallback=function(){},this.selectEnabled=!0,this.visualizers=new Map,this.onCameraMoveListeners=[],this.height=0,this.width=0,this.dimensions=3,this.interactionMode="PAN",this.pickingTexture=new o.WebGLRenderTarget(0,0),this.orbitAnimationOnNextCameraCreation=!1,this.orbitAnimationId=null,this.worldSpacePointPositions=new Float32Array(0),this.pointColors=new Float32Array(0),this.pointScaleFactors=new Float32Array(0),this.polylineColors={},this.polylineOpacities=new Float32Array(0),this.polylineWidths=new Float32Array(0),this.selecting=!1,this.nearestPoint=null,this.mouseIsDown=!1,this.isDragSequence=!1,this.lastHovered=null,this.container=e,this.styles=i.styles,this.setParameters(i),this.computeLayoutValues(),this.scene=new o.Scene,this.renderer=new o.WebGLRenderer({alpha:!0,premultipliedAlpha:!1,antialias:!1}),this.renderer.setClearColor(this.styles.backgroundColor,1),this.container.appendChild(this.renderer.domElement),this.light=new o.PointLight(16772287,1,0),this.scene.add(this.light),this.orbitControlParams=t(t({},P),i.orbitControlParams),this.rectangleSelector=new a.ScatterPlotRectangleSelector(this.container,function(t){r.selectBoundingBox(t)},this.styles),this.addInteractionListeners(),this.setDimensions(3),this.makeCamera(i.camera),this.resize()}return h.prototype.setParameters=function(t){void 0!==t.onClick&&(this.clickCallback=t.onClick),void 0!==t.onHover&&(this.hoverCallback=t.onHover),void 0!==t.onSelect&&(this.selectCallback=t.onSelect),void 0!==t.selectEnabled&&(this.selectEnabled=t.selectEnabled)},h.prototype.addInteractionListeners=function(){this.container.addEventListener("mousemove",this.onMouseMove.bind(this)),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),this.container.addEventListener("mouseup",this.onMouseUp.bind(this)),this.container.addEventListener("click",this.onClick.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this),!1),window.addEventListener("keyup",this.onKeyUp.bind(this),!1)},h.prototype.addCameraControlsEventListeners=function(t){var e=this;t.addEventListener("start",function(){e.stopOrbitAnimation(),e.onCameraMoveListeners.forEach(function(i){return i(e.camera.position,t.target)})}),t.addEventListener("change",function(){e.render()}),t.addEventListener("end",function(){})},h.prototype.makeOrbitControls=function(t,e){null!=this.orbitCameraControls&&this.orbitCameraControls.dispose();var i=new r.OrbitControls(t,this.renderer.domElement);i.zoomSpeed=this.orbitControlParams.zoomSpeed,i.enableRotate=e,i.autoRotate=!1,i.enableKeys=!1,i.rotateSpeed=this.orbitControlParams.mouseRotateSpeed,e?(i.mouseButtons.LEFT=o.MOUSE.LEFT,i.mouseButtons.RIGHT=o.MOUSE.RIGHT):(i.mouseButtons.LEFT=o.MOUSE.RIGHT,i.mouseButtons.RIGHT=o.MOUSE.LEFT),i.reset(),this.camera=t,this.orbitCameraControls=i,this.addCameraControlsEventListeners(this.orbitCameraControls)},h.prototype.makeCamera=function(t){void 0===t&&(t={});var e=this.makeDefaultCameraDef(this.dimensions,t);this.recreateCamera(e),3===this.dimensions&&this.styles.axesVisible?this.add3dAxes():this.remove3dAxesFromScene()},h.prototype.makeCamera3D=function(t,e,i){var r,n=e/i;(r=new o.PerspectiveCamera(u,n,d,p)).position.set(t.position[0],t.position[1],t.position[2]);var s=new o.Vector3(t.target[0],t.target[1],t.target[2]);r.lookAt(s),r.zoom=t.zoom,r.updateProjectionMatrix(),this.camera=r,this.makeOrbitControls(r,!0)},h.prototype.makeCamera2D=function(t,e,i){var r,n=new o.Vector3(t.target[0],t.target[1],t.target[2]),s=e/i,a=-m,h=m,l=-m,c=m;s>1?(a*=s,h*=s):(c/=s,l/=s),(r=new o.OrthographicCamera(a,h,c,l,-1e3,1e3)).position.set(t.position[0],t.position[1],t.position[2]),r.up=new o.Vector3(0,0,1),r.lookAt(n),r.zoom=t.zoom,r.updateProjectionMatrix(),this.camera=r,this.makeOrbitControls(r,!1)},h.prototype.makeDefaultCameraDef=function(t,e){void 0===e&&(e={});var i=2===t,o=i?v:y,r=i?b:g,n={orthographic:i,zoom:1,position:[o.x,o.y,o.z],target:[r.x,r.y,r.z]};return e.zoom&&(n.zoom=e.zoom),e.position&&(n.position=e.position),e.target&&(n.target=e.target),n},h.prototype.recreateCamera=function(t){t.orthographic?this.makeCamera2D(t,this.width,this.height):this.makeCamera3D(t,this.width,this.height),this.orbitCameraControls.minDistance=c,this.orbitCameraControls.maxDistance=l,this.orbitCameraControls.update(),this.orbitAnimationOnNextCameraCreation&&this.startOrbitAnimation()},h.prototype.setInteractionMode=function(t){this.interactionMode=t,"SELECT"===t?(this.selecting=!0,this.container.style.cursor="crosshair"):(this.selecting=!1,this.container.style.cursor="default")},h.prototype.onClick=function(t,e){if(void 0===e&&(e=!0),!t||!this.selecting){if(!this.isDragSequence&&e){var i=null!=this.nearestPoint?[this.nearestPoint]:[];this.selectCallback(i),this.clickCallback(this.nearestPoint)}this.isDragSequence=!1,this.render()}},h.prototype.onMouseDown=function(t){this.isDragSequence=!1,this.mouseIsDown=!0,this.selecting?(this.orbitCameraControls.enabled=!1,this.rectangleSelector.onMouseDown(t.offsetX,t.offsetY),this.setNearestPointToMouse(t)):!t.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===o.MOUSE.RIGHT?(this.orbitCameraControls.mouseButtons.ORBIT=o.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=o.MOUSE.RIGHT):t.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===o.MOUSE.LEFT&&(this.orbitCameraControls.mouseButtons.ORBIT=o.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=o.MOUSE.LEFT)},h.prototype.onMouseUp=function(t){this.selecting&&(this.orbitCameraControls.enabled=!0,this.rectangleSelector.onMouseUp(),this.render()),this.mouseIsDown=!1},h.prototype.onMouseMove=function(t){this.isDragSequence=this.mouseIsDown,this.selecting&&this.mouseIsDown?(this.rectangleSelector.onMouseMove(t.offsetX,t.offsetY),this.render()):this.mouseIsDown||(this.setNearestPointToMouse(t),this.nearestPoint!=this.lastHovered&&(this.lastHovered=this.nearestPoint,this.hoverCallback(this.nearestPoint)))},h.prototype.onKeyDown=function(t){t.keyCode===C&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=o.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=o.MOUSE.LEFT),t.keyCode===f&&this.selectEnabled&&(this.selecting=!0,this.container.style.cursor="crosshair")},h.prototype.onKeyUp=function(t){t.keyCode===C&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=o.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=o.MOUSE.RIGHT),t.keyCode===f&&this.selectEnabled&&(this.selecting=!1,this.container.style.cursor="default",this.render())},h.prototype.getPointIndicesFromBoundingBox=function(t){if(null==this.worldSpacePointPositions)return[];this.camera.updateMatrixWorld();var i=window.devicePixelRatio||1,r=Math.floor(t.x*i),n=Math.floor(t.y*i),s=Math.max(Math.floor(t.width*i),1),a=Math.max(Math.floor(t.height*i),1);if(s<=2&&a<=2)return this.getPointIndicesFromBoundingBoxPickingTexture(t);for(var h=this.renderer.domElement,l=h.width,c=h.height,u=[],d=new o.Vector3,p=0;p<this.worldSpacePointPositions.length;p++){var m=3*p,f=e(this.worldSpacePointPositions.slice(m,m+3),3),C=f[0],y=f[1],g=f[2];d.x=C,d.y=y,d.z=g;var v=d.project(this.camera),b=(v.x+1)*l/2,P=-(v.y-1)*c/2;b>=r&&b<=r+s&&P<=n&&P>=n-a&&u.push(p)}return u},h.prototype.getPointIndicesFromBoundingBoxPickingTexture=function(t){if(null==this.worldSpacePointPositions)return[];var e=this.worldSpacePointPositions.length/3,i=window.devicePixelRatio||1,o=Math.floor(t.x*i),r=Math.floor(t.y*i),n=Math.max(Math.floor(t.width*i),1),s=Math.max(Math.floor(t.height*i),1),a=new Uint8Array(n*s*4);this.renderer.readRenderTargetPixels(this.pickingTexture,o,this.pickingTexture.height-r,n,s,a);for(var h=new Uint8Array(this.worldSpacePointPositions.length),l=0;l<n*s;l++){var c=a[4*l]<<16|a[4*l+1]<<8|a[4*l+2];16777215!==c&&c<e&&(h[c]=1)}var u=[];for(l=0;l<h.length;l++)1===h[l]&&u.push(l);return u},h.prototype.selectBoundingBox=function(t){var e=this.getPointIndicesFromBoundingBox(t);this.selectCallback(e)},h.prototype.setNearestPointToMouse=function(t){if(null!=this.pickingTexture){var e={x:t.offsetX,y:t.offsetY,width:1,height:1},i=this.getPointIndicesFromBoundingBoxPickingTexture(e);this.nearestPoint=i.length?i[0]:null}else this.nearestPoint=null},h.prototype.computeLayoutValues=function(){return this.width=this.container.offsetWidth,this.height=Math.max(1,this.container.offsetHeight),[this.width,this.height]},h.prototype.sceneIs3D=function(){return 3===this.dimensions},h.prototype.remove3dAxesFromScene=function(){var t=this.scene.getObjectByName("axes");return null!=t&&this.scene.remove(t),t},h.prototype.add3dAxes=function(){var t=new o.AxesHelper;t.name="axes",this.scene.add(t)},h.prototype.setDimensions=function(t){if(2!==t&&3!==t)throw new RangeError("dimensions must be 2 or 3");this.dimensions!==t&&(this.dimensions=t,this.makeCamera())},h.prototype.getCameraPosition=function(){var t=this.camera.position;return[t.x,t.y,t.z]},h.prototype.getCameraTarget=function(){var t=this.orbitCameraControls.target;return[t.x,t.y,t.z]},h.prototype.setCameraPositionAndTarget=function(t,e){this.stopOrbitAnimation(),this.camera.position.set(t[0],t[1],t[2]),this.orbitCameraControls.target.set(e[0],e[1],e[2]),this.orbitCameraControls.update(),this.render()},h.prototype.startOrbitAnimation=function(){this.sceneIs3D()&&(null!=this.orbitAnimationId&&this.stopOrbitAnimation(),this.orbitCameraControls.autoRotate=!0,this.orbitCameraControls.autoRotateSpeed=this.orbitControlParams.autoRotateSpeed,this.updateOrbitAnimation())},h.prototype.orbitIsAnimating=function(){return null!=this.orbitAnimationId},h.prototype.updateOrbitAnimation=function(){var t=this;this.orbitCameraControls.update(),this.orbitAnimationId=requestAnimationFrame(function(){return t.updateOrbitAnimation()})},h.prototype.stopOrbitAnimation=function(){this.orbitCameraControls.autoRotate=!1,this.orbitCameraControls.rotateSpeed=this.orbitControlParams.mouseRotateSpeed,null!=this.orbitAnimationId&&(cancelAnimationFrame(this.orbitAnimationId),this.orbitAnimationId=null)},h.prototype.setActiveVisualizers=function(t){var e,o,r,n,s=new Set(t.map(function(t){return t.id}));try{for(var a=i(this.visualizers.values()),h=a.next();!h.done;h=a.next()){var l=h.value;s.has(l.id)||(l.dispose(),this.visualizers.delete(l.id))}}catch(d){e={error:d}}finally{try{h&&!h.done&&(o=a.return)&&o.call(a)}finally{if(e)throw e.error}}try{for(var c=i(t),u=c.next();!u.done;u=c.next()){l=u.value;this.visualizers.set(l.id,l),l.setScene(this.scene),l.onResize(this.width,this.height),this.worldSpacePointPositions&&l.onPointPositionsChanged(this.worldSpacePointPositions)}}catch(p){r={error:p}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}},h.prototype.disposeAllVisualizers=function(){this.visualizers.forEach(function(t){return t.dispose()}),this.visualizers.clear()},h.prototype.setPointPositions=function(t){this.worldSpacePointPositions=t,this.visualizers.forEach(function(e){return e.onPointPositionsChanged(t)})},h.prototype.render=function(){var t=this.camera.position.clone();t.x+=1,t.y+=1,this.light.position.set(t.x,t.y,t.z);var e=this.camera instanceof o.PerspectiveCamera?n.CameraType.Perspective:n.CameraType.Orthographic,i=[0,0];null!=this.worldSpacePointPositions&&(i=s.getNearFarPoints(this.worldSpacePointPositions,this.camera.position,this.orbitCameraControls.target));var r=new n.RenderContext(this.camera,e,this.orbitCameraControls.target,this.width,this.height,i[0],i[1],this.styles.backgroundColor,this.pointColors,this.pointScaleFactors,this.labels,this.polylineColors,this.polylineOpacities,this.polylineWidths);this.visualizers.forEach(function(t){return t.onPickingRender(r)});var a=this.remove3dAxesFromScene();this.renderer.setRenderTarget(this.pickingTexture),this.renderer.render(this.scene,this.camera),null!=a&&this.scene.add(a),this.visualizers.forEach(function(t){return t.onRender(r)}),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)},h.prototype.setPointColors=function(t){this.pointColors=t},h.prototype.setPointScaleFactors=function(t){this.pointScaleFactors=t},h.prototype.setLabels=function(t){this.labels=t},h.prototype.setPolylineColors=function(t){this.polylineColors=t},h.prototype.setPolylineOpacities=function(t){this.polylineOpacities=t},h.prototype.setPolylineWidths=function(t){this.polylineWidths=t},h.prototype.resetZoom=function(){this.recreateCamera(this.makeDefaultCameraDef(this.dimensions)),this.render()},h.prototype.setDayNightMode=function(t){for(var e=this.container.querySelectorAll("canvas"),i=t?"invert(100%)":"",o=0;o<e.length;o++)e[o].style.filter=i},h.prototype.resize=function(t){void 0===t&&(t=!0);var i=e([this.width,this.height],2),r=i[0],n=i[1],s=e(this.computeLayoutValues(),2),a=s[0],h=s[1];if(3===this.dimensions){(l=this.camera).aspect=a/h,l.updateProjectionMatrix()}else{var l=this.camera,c=a/r,u=h/n,d=(l.right-l.left)*c/2,p=(l.top-l.bottom)*u/2;l.top=p,l.bottom=-p,l.left=-d,l.right=d,l.updateProjectionMatrix()}var m=window.devicePixelRatio||1;this.renderer.setPixelRatio(m),this.renderer.setSize(a,h);var f=new o.Vector2;this.renderer.getSize(f);var C=this.renderer.getPixelRatio();this.pickingTexture=new o.WebGLRenderTarget(f.width*C,f.height*C),this.pickingTexture.texture.minFilter=o.LinearFilter,this.visualizers.forEach(function(t){return t.onResize(a,h)}),t&&this.render()},h.prototype.onCameraMove=function(t){this.onCameraMoveListeners.push(t)},h.prototype.clickOnPoint=function(t){this.nearestPoint=t,this.onClick(null,!1)},h}();exports.ScatterPlot=w;
},{"three":"gBK8","three/examples/jsm/controls/OrbitControls":"x87H","./render":"Fjuq","./util":"wRhB","./scatter_plot_rectangle_selector":"rRSn"}],"J4gV":[function(require,module,exports) {
"use strict";var r=this&&this.__read||function(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var o,a,n=t.call(r),i=[];try{for(;(void 0===e||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three"),t=new Map,o=/^(rgba|hsla)\((\d+),\s*(\d+%?),\s*(\d+%?)(?:,\s*(\d+(?:\.\d+)?))?\)$/;function a(e){var t=o.exec(e);if(t){var a=r(t,6),n=(a[0],a[1]),i=a[2],l=a[3],c=a[4],u=a[5];return{colorString:n.replace("a","")+"("+i+","+l+","+c+")",opacity:parseFloat(u)}}return{colorString:e,opacity:1}}function n(r){if(t.has(r))return t.get(r);var o=a(r),n=o.colorString,i=o.opacity,l=new e.Color(n),c={r:l.r,g:l.g,b:l.b,opacity:i};return t.set(r,c),c}exports.parseColor=n;
},{"three":"gBK8"}],"xLgM":[function(require,module,exports) {
"use strict";var t=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var r="Points must be an array of either 2 or 3 dimensional number arrays",e=function(){function e(e,n){var o,i;void 0===n&&(n=[]),this.points=e,this.metadata=n;var a=e[0].length;if(2!==a&&3!==a)throw new Error(r);try{for(var s=t(e),l=s.next();!l.done;l=s.next()){if(a!==l.value.length)throw new Error(r)}}catch(u){o={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}this.dimensions=a}return e.prototype.setSpriteMetadata=function(t){this.spriteMetadata=t},e}();exports.Dataset=e;
},{}],"Tcu9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return{backgroundColor:"#ffffff",axesVisible:!0,fog:{color:"#ffffff",enabled:!0,threshold:5e3},label:{fontSize:10,scaleDefault:1,scaleLarge:2,fillColorSelected:"#000000",fillColorHover:"#000000",strokeColorSelected:"#ffffff",strokeColorHover:"#ffffff",strokeWidth:3,fillWidth:6},label3D:{fontSize:80,scale:2.2,color:"black",backgroundColor:"#ffffff",colorUnselected:"#ffffff",colorNoSelection:"#ffffff"},point:{colorUnselected:"rgba(227, 227, 227, 0.7)",colorNoSelection:"rgba(117, 117, 217, 0.7)",colorSelected:"rgba(250, 102, 102, 0.7)",colorHover:"rgba(118, 11, 79, 0.7)",scaleDefault:1,scaleSelected:1.2,scaleHover:1.2},polyline:{startHue:60,endHue:360,saturation:1,lightness:.3,defaultOpacity:.2,defaultLineWidth:2,selectedOpacity:.9,selectedLineWidth:3,deselectedOpacity:.05},select:{fill:"#dddddd",fillOpacity:.2,stroke:"#aaaaaa",strokeWidth:2,strokeDashArray:"10 5"},sprites:{minPointSize:5,imageSize:30,colorUnselected:"#ffffff",colorNoSelection:"#ffffff"}}};function f(f){var o=e();if(void 0===f)return o;for(var l in o){var t=l;"object"==typeof o[t]&&"object"==typeof f[t]?o[t]=Object.assign(o[t],f[t]):void 0!==f[t]&&(o[t]=f[t])}return o}exports.makeStyles=f;
},{}],"vbxS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RGB_NUM_ELEMENTS=3,exports.RGBA_NUM_ELEMENTS=4,exports.XYZ_NUM_ELEMENTS=3,exports.UV_NUM_ELEMENTS=2,exports.INDEX_NUM_ELEMENTS=1,exports.SCATTER_PLOT_CUBE_LENGTH=2;
},{}],"stF9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three"),t=require("./util"),r=require("./constants"),o=8192,i=256,s=6,n=function(e,t){return"\n      attribute vec2 posObj;\n      attribute vec4 color;\n      varying vec2 vUv;\n      varying vec4 vColor;\n\n      void main() {\n        vUv = uv;\n        vColor = color;\n\n        // Rotate label to face camera.\n\n        vec4 vRight = vec4(\n          modelViewMatrix[0][0], modelViewMatrix[1][0], modelViewMatrix[2][0], 0);\n\n        vec4 vUp = vec4(\n          modelViewMatrix[0][1], modelViewMatrix[1][1], modelViewMatrix[2][1], 0);\n\n        vec4 vAt = -vec4(\n          modelViewMatrix[0][2], modelViewMatrix[1][2], modelViewMatrix[2][2], 0);\n\n        mat4 pointToCamera = mat4(vRight, vUp, vAt, vec4(0, 0, 0, 1));\n\n        vec2 scaledPos = posObj * "+1/e+" * "+t+";\n\n        vec4 posRotated = pointToCamera * vec4(scaledPos, 0, 1);\n        vec4 mvPosition = modelViewMatrix * (vec4(position, 0) + posRotated);\n        gl_Position = projectionMatrix * mvPosition;\n      }"},l="\n      uniform sampler2D texture;\n      uniform bool picking;\n      varying vec2 vUv;\n      varying vec4 vColor;\n\n      void main() {\n        if (picking) {\n          gl_FragColor = vColor;\n        } else {\n          vec4 fromTexture = texture2D(texture, vUv);\n          gl_FragColor = vColor * fromTexture;\n        }\n      }",a=function(){function a(e){this.styles=e,this.id="3D_LABELS",this.labelStrings=[],this.worldSpacePointPositions=new Float32Array(0),this.pickingColors=new Float32Array(0),this.renderColors=new Float32Array(0),this.uniforms={},this.totalVertexCount=0,this.labelVertexMap=[]}return a.prototype.createGlyphTexture=function(){var e=this.styles.label3D,r=e.fontSize,s=e.backgroundColor,n=e.color,l=document.createElement("canvas");l.width=o,l.height=r;var a=l.getContext("2d");a.font="bold "+r+"px roboto",a.textBaseline="top",a.fillStyle=s,a.rect(0,0,l.width,l.height),a.fill(),a.fillStyle=n;for(var h=a.measureText(" ").width,u=new Float32Array(i),c=new Float32Array(i),p=0,v=0;v<i;v++){var f=" "+String.fromCharCode(v),g=a.measureText(f).width;u[v]=g-h,c[v]=p,a.fillText(f,p-h,0),p+=g}return{texture:t.createTextureFromCanvas(l),lengths:u,offsets:c}},a.prototype.processLabelVerts=function(e){var t=0;this.labelVertexMap=[];for(var r=0;r<e;r++){for(var o=this.labelStrings[r],i=[],n=0;n<o.length;n++){for(var l=0;l<s;l++)i.push(t*s+l);t++}this.labelVertexMap.push(i)}this.totalVertexCount=t*s},a.prototype.createColorBuffers=function(t){var o=this;this.pickingColors=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS),this.renderColors=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS);for(var i=function(t){var i=new e.Color(t);s.labelVertexMap[t].forEach(function(e){o.pickingColors[r.RGB_NUM_ELEMENTS*e]=i.r,o.pickingColors[r.RGB_NUM_ELEMENTS*e+1]=i.g,o.pickingColors[r.RGB_NUM_ELEMENTS*e+2]=i.b,o.renderColors[r.RGB_NUM_ELEMENTS*e]=1,o.renderColors[r.RGB_NUM_ELEMENTS*e+1]=1,o.renderColors[r.RGB_NUM_ELEMENTS*e+2]=1})},s=this,n=0;n<t;n++)i(n)},a.prototype.createLabels=function(){var i=this,a=this.styles.label3D,h=a.fontSize,u=a.scale;if(null!=this.labelStrings&&null!=this.worldSpacePointPositions){var c=this.worldSpacePointPositions.length/r.XYZ_NUM_ELEMENTS;if(c===this.labelStrings.length){this.glyphTexture=this.createGlyphTexture(),this.uniforms={texture:{type:"t"},picking:{type:"bool"}},this.material=new e.ShaderMaterial({uniforms:this.uniforms,transparent:!0,vertexShader:n(h,u),fragmentShader:l}),this.processLabelVerts(c),this.createColorBuffers(c);var p=new Float32Array(this.totalVertexCount*r.XYZ_NUM_ELEMENTS);this.positions=new e.BufferAttribute(p,r.XYZ_NUM_ELEMENTS);var v=new Float32Array(this.totalVertexCount*r.XYZ_NUM_ELEMENTS),f=new Float32Array(this.totalVertexCount*r.UV_NUM_ELEMENTS),g=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS),y=new e.BufferAttribute(v,2),m=new e.BufferAttribute(f,r.UV_NUM_ELEMENTS),x=new e.BufferAttribute(g,r.RGB_NUM_ELEMENTS);this.geometry=new e.BufferGeometry,this.geometry.setAttribute("posObj",y),this.geometry.setAttribute("position",this.positions),this.geometry.setAttribute("uv",m),this.geometry.setAttribute("color",x);for(var d=0,M=0;M<c;M++){for(var E=this.labelStrings[M],b=0,C=0;C<E.length;C++){var S=E.charCodeAt(C);b+=this.glyphTexture.lengths[S]}b/=-2;for(C=0;C<E.length;C++){S=E.charCodeAt(C);var _=this.glyphTexture.lengths[S],w=(b+_)/h,T=b/h,N=h/h;y.setXY(d*s+0,T,0),y.setXY(d*s+1,w,0),y.setXY(d*s+2,T,N),y.setXY(d*s+3,T,N),y.setXY(d*s+4,w,0),y.setXY(d*s+5,w,N);var A=this.glyphTexture.offsets[S],V=this.glyphTexture.offsets[S]+_;A/=o,V/=o;m.setXY(d*s+0,A,1),m.setXY(d*s+1,V,1),m.setXY(d*s+2,A,0),m.setXY(d*s+3,A,0),m.setXY(d*s+4,V,1),m.setXY(d*s+5,V,0),d++,b+=_}}var L=function(e){var r=t.vector3FromPackedArray(U.worldSpacePointPositions,e);U.labelVertexMap[e].forEach(function(e){i.positions.setXYZ(e,r.x,r.y,r.z)})},U=this;for(M=0;M<c;M++)L(M);this.labelsMesh=new e.Mesh(this.geometry,this.material),this.labelsMesh.frustumCulled=!1,this.scene.add(this.labelsMesh)}}},a.prototype.colorLabels=function(t){if(null!=this.labelStrings&&null!=this.geometry&&null!=t){var o=this.geometry.getAttribute("color");o.array=this.renderColors;for(var i=t.length/r.RGBA_NUM_ELEMENTS,s=0,n=0;n<i;++n){for(var l=new e.Color(t[s],t[s+1],t[s+2]),a=this.labelVertexMap[n].length,h=0;h<a;++h)o.setXYZ(this.labelVertexMap[n][h],l.r,l.g,l.b);s+=r.RGBA_NUM_ELEMENTS}o.needsUpdate=!0}},a.prototype.setScene=function(e){this.scene=e},a.prototype.dispose=function(){this.labelsMesh&&(this.scene&&this.scene.remove(this.labelsMesh),this.labelsMesh=null),this.geometry&&(this.geometry.dispose(),this.geometry=null),null!=this.glyphTexture&&null!=this.glyphTexture.texture&&(this.glyphTexture.texture.dispose(),this.glyphTexture.texture=null)},a.prototype.onPickingRender=function(e){if(null!=this.geometry){this.material.uniforms.texture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=!0;var t=this.geometry.getAttribute("color");t.array=this.pickingColors,t.needsUpdate=!0}else this.createLabels()},a.prototype.onRender=function(e){if(null!=this.geometry){this.colorLabels(e.pointColors),this.material.uniforms.texture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=!1;var t=this.geometry.getAttribute("color");t.array=this.renderColors,t.needsUpdate=!0}else this.createLabels()},a.prototype.onPointPositionsChanged=function(e){this.worldSpacePointPositions=e,this.dispose()},a.prototype.setLabelStrings=function(e){this.labelStrings=e,this.dispose()},a.prototype.onResize=function(e,t){},a}();exports.ScatterPlotVisualizer3DLabels=a;
},{"three":"gBK8","./util":"wRhB","./constants":"vbxS"}],"jt1s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three"),t=require("./render"),i=require("./util"),r=require("./constants"),n=function(e){return"\n    // Index of the specific vertex (passed in as bufferAttribute), and the\n    // variable that will be used to pass it to the fragment shader.\n    attribute float spriteIndex;\n    attribute vec4 color;\n    attribute float scaleFactor;\n\n    varying vec2 xyIndex;\n    varying vec4 vColor;\n\n    uniform bool sizeAttenuation;\n    uniform float pointSize;\n    uniform float spritesPerRow;\n    uniform float spritesPerColumn;\n\n    varying float fogDepth;\n\n    void main() {\n      // Pass index and color values to fragment shader.\n      vColor = color;\n      xyIndex = vec2(mod(spriteIndex, spritesPerRow),\n                floor(spriteIndex / spritesPerColumn));\n\n      // Transform current vertex by modelViewMatrix (model world position and\n      // camera world position matrix).\n      vec4 cameraSpacePos = modelViewMatrix * vec4(position, 1.0);\n\n      // Project vertex in camera-space to screen coordinates using the camera's\n      // projection matrix.\n      gl_Position = projectionMatrix * cameraSpacePos;\n\n      // Create size attenuation (if we're in 3D mode) by making the size of\n      // each point inversly proportional to its distance to the camera.\n      float outputPointSize = pointSize;\n      if (sizeAttenuation) {\n        outputPointSize = -pointSize / cameraSpacePos.z;\n        fogDepth = pointSize / outputPointSize * 1.2;\n      } else {  // Create size attenuation (if we're in 2D mode)\n        const float PI = 3.1415926535897932384626433832795;\n        const float minScale = 0.1;  // minimum scaling factor\n        const float outSpeed = 2.0;  // shrink speed when zooming out\n        const float outNorm = (1. - minScale) / atan(outSpeed);\n        const float maxScale = 15.0;  // maximum scaling factor\n        const float inSpeed = 0.02;  // enlarge speed when zooming in\n        const float zoomOffset = 0.3;  // offset zoom pivot\n        float zoom = projectionMatrix[0][0] + zoomOffset;  // zoom pivot\n        float scale = zoom < 1. ? 1. + outNorm * atan(outSpeed * (zoom - 1.)) :\n                      1. + 2. / PI * (maxScale - 1.) * atan(inSpeed * (zoom - 1.));\n        outputPointSize = pointSize * scale;\n      }\n\n      gl_PointSize =\n        max(outputPointSize * scaleFactor, "+e.toFixed(1)+");\n    }"},o="\n    bool point_in_unit_circle(vec2 spriteCoord) {\n      vec2 centerToP = spriteCoord - vec2(0.5, 0.5);\n      return dot(centerToP, centerToP) < (0.5 * 0.5);\n    }\n\n    bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n      vec3 v0 = vec3(0, 1, 0);\n      vec3 v1 = vec3(0.5, 0, 0);\n      vec3 v2 = vec3(1, 1, 0);\n      vec3 p = vec3(spriteCoord, 0);\n      float p_in_v0_v1 = cross(v1 - v0, p - v0).z;\n      float p_in_v1_v2 = cross(v2 - v1, p - v1).z;\n      return (p_in_v0_v1 > 0.0) && (p_in_v1_v2 > 0.0);\n    }\n\n    bool point_in_unit_square(vec2 spriteCoord) {\n      return true;\n    }\n  ",s="\n    varying vec2 xyIndex;\n    varying vec4 vColor;\n\n    uniform sampler2D texture;\n    uniform float spritesPerRow;\n    uniform float spritesPerColumn;\n    uniform bool isImage;\n\n    "+e.ShaderChunk.common+"\n    "+o+"\n    uniform vec3 fogColor;\n    varying float fogDepth;\n\t\tuniform float fogNear;\n    uniform float fogFar;\n\n    void main() {\n      if (isImage) {\n        // Coordinates of the vertex within the entire sprite image.\n        vec2 coords =\n          (gl_PointCoord + xyIndex) / vec2(spritesPerRow, spritesPerColumn);\n        gl_FragColor = vColor * texture2D(texture, coords);\n      } else {\n        bool inside = point_in_unit_circle(gl_PointCoord);\n        if (!inside) {\n          discard;\n        }\n        gl_FragColor = vColor;\n      }\n      float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n      gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n    }",a="\n    varying vec2 xyIndex;\n    varying vec4 vColor;\n    uniform bool isImage;\n\n    "+o+"\n\n    varying float fogDepth;\n\n    void main() {\n      xyIndex; // Silence 'unused variable' warning.\n      fogDepth; // Silence 'unused variable' warning.\n      if (isImage) {\n        gl_FragColor = vColor;\n      } else {\n        bool inside = point_in_unit_circle(gl_PointCoord);\n        if (!inside) {\n          discard;\n        }\n        gl_FragColor = vColor;\n      }\n    }",l=function(){function o(e,t){this.styles=e,this.id="SPRITES",this.isSpriteSheetMode=!1,this.spritesPerRow=0,this.spritesPerColumn=0,this.spriteDimensions=[0,0],this.worldSpacePointPositions=new Float32Array(0),this.pickingColors=new Float32Array(0),this.renderColors=new Float32Array(0),this.standinTextureForPoints=i.createTextureFromCanvas(document.createElement("canvas")),t&&(this.spriteSheetParams=t,this.setSpriteSheet(t),this.isSpriteSheetMode=!0),this.renderMaterial=this.createRenderMaterial(),this.pickingMaterial=this.createPickingMaterial()}return o.prototype.createUniforms=function(){return{texture:{type:"t"},spritesPerRow:{type:"f"},spritesPerColumn:{type:"f"},fogColor:{type:"c"},fogNear:{type:"f"},fogFar:{type:"f"},isImage:{type:"bool"},sizeAttenuation:{type:"bool"},pointSize:{type:"f"}}},o.prototype.createRenderMaterial=function(){this.isSpriteSheetMode;var t=this.createUniforms();return new e.ShaderMaterial({uniforms:t,vertexShader:n(this.styles.sprites.minPointSize),fragmentShader:s,transparent:!0,depthFunc:e.LessDepth,fog:this.styles.fog.enabled,blending:e.NormalBlending})},o.prototype.createPickingMaterial=function(){var t=this.createUniforms();return new e.ShaderMaterial({uniforms:t,vertexShader:n(this.styles.sprites.minPointSize),fragmentShader:a,transparent:!0,depthTest:!0,depthWrite:!0,fog:!1,blending:e.NormalBlending})},o.prototype.createPointSprites=function(t,i){var n=null!=i?i.length/r.XYZ_NUM_ELEMENTS:0,o=this.createGeometry(n);this.fog=new e.Fog(16777215),this.points=new e.Points(o,this.renderMaterial),this.points.frustumCulled=!1,null!=this.spriteIndexBufferAttribute&&this.points.geometry.setAttribute("spriteIndex",this.spriteIndexBufferAttribute),t.add(this.points)},o.prototype.calculatePointSize=function(e){var t=this.styles.sprites.imageSize;if(this.texture)return e?t:this.spriteDimensions[0];var i=null!=this.worldSpacePointPositions?this.worldSpacePointPositions.length/r.XYZ_NUM_ELEMENTS:1,n=200/Math.log(i)/Math.log(8);return e?n:n/1.5},o.prototype.createGeometry=function(t){var i=t;this.pickingColors=new Float32Array(i*r.RGBA_NUM_ELEMENTS);for(var n=0,o=0;o<i;o++){var s=new e.Color(o);this.pickingColors[n++]=s.r,this.pickingColors[n++]=s.g,this.pickingColors[n++]=s.b,this.pickingColors[n++]=1}var a=new e.BufferGeometry;return a.setAttribute("position",new e.BufferAttribute(new Float32Array([]),r.XYZ_NUM_ELEMENTS)),a.setAttribute("color",new e.BufferAttribute(new Float32Array([]),r.RGBA_NUM_ELEMENTS)),a.setAttribute("scaleFactor",new e.BufferAttribute(new Float32Array([]),r.INDEX_NUM_ELEMENTS)),a.computeVertexNormals(),a},o.prototype.setFogDistances=function(e,t,i){var n=this.styles.fog,o=n.threshold,s=n.enabled;if(e&&s){var a=this.worldSpacePointPositions.length/r.XYZ_NUM_ELEMENTS;this.fog.near=t;var l=2-Math.min(a,o)/o;this.fog.far=i*l}else this.fog.near=1/0,this.fog.far=1/0},o.prototype.dispose=function(){this.disposeGeometry(),this.disposeSpriteSheet()},o.prototype.disposeGeometry=function(){null!=this.points&&(this.scene.remove(this.points),this.points.geometry.dispose(),this.points=null,this.worldSpacePointPositions=null)},o.prototype.disposeSpriteSheet=function(){this.texture&&this.texture.dispose(),this.texture=null,this.renderMaterial=null,this.pickingMaterial=null,this.spriteSheetImage=null},o.prototype.setScene=function(e){this.scene=e},o.prototype.setSpriteSheet=function(t){var n=this,o=t.spriteDimensions,s=t.spriteIndices,a=t.onImageLoad,l=t.spritesheetImage;if("string"==typeof l){var p=l;(l=new Image).src=p}this.spriteSheetImage=l,this.texture=i.createTextureFromImage(this.spriteSheetImage,function(){n.spritesPerRow=n.spriteSheetImage.width/o[0],n.spritesPerColumn=n.spriteSheetImage.height/o[1],a()}),this.spriteDimensions=o,this.spriteIndexBufferAttribute=new e.BufferAttribute(s,r.INDEX_NUM_ELEMENTS),null!=this.points&&this.points.geometry.setAttribute("spriteIndex",this.spriteIndexBufferAttribute)},o.prototype.onPointPositionsChanged=function(e){null!=this.points&&this.worldSpacePointPositions.length!==e.length&&this.disposeGeometry(),this.worldSpacePointPositions=e,null==this.points&&this.createPointSprites(this.scene,e),this.spriteSheetParams&&this.setSpriteSheet(this.spriteSheetParams),this.renderMaterial=this.createRenderMaterial(),this.pickingMaterial=this.createPickingMaterial();var t=this.points.geometry.getAttribute("position");t.array=e,t.count=e.length/r.XYZ_NUM_ELEMENTS,t.needsUpdate=!0},o.prototype.onPickingRender=function(e){var i=e.cameraType===t.CameraType.Perspective;this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerRow,this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerColumn,this.pickingMaterial.uniforms.sizeAttenuation.value=i,this.pickingMaterial.uniforms.pointSize.value=this.calculatePointSize(i),this.points.material=this.pickingMaterial;var n=this.points.geometry.getAttribute("color");n.array=this.pickingColors,n.count=this.pickingColors.length/r.RGBA_NUM_ELEMENTS,n.needsUpdate=!0;var o=this.points.geometry.getAttribute("scaleFactor");o.array=e.pointScaleFactors,o.count=e.pointScaleFactors.length,o.count=e.pointScaleFactors.length/r.INDEX_NUM_ELEMENTS,o.needsUpdate=!0},o.prototype.onRender=function(t){var i=t.camera instanceof e.PerspectiveCamera;this.setFogDistances(i,t.nearestCameraSpacePointZ,t.farthestCameraSpacePointZ),this.scene.fog=this.fog,this.scene.fog.color=new e.Color(t.backgroundColor),this.renderMaterial.uniforms.fogColor.value=this.scene.fog.color,this.renderMaterial.uniforms.fogNear.value=this.fog.near,this.renderMaterial.uniforms.fogFar.value=this.fog.far,this.renderMaterial.uniforms.spritesPerRow.value=this.spritesPerRow,this.renderMaterial.uniforms.spritesPerColumn.value=this.spritesPerColumn,this.renderMaterial.uniforms.isImage.value=null!=this.texture,this.renderMaterial.uniforms.texture.value=null!=this.texture?this.texture:this.standinTextureForPoints,this.renderMaterial.uniforms.sizeAttenuation.value=i,this.renderMaterial.uniforms.pointSize.value=this.calculatePointSize(i),this.points.material=this.renderMaterial;var n=this.points.geometry.getAttribute("color");this.renderColors=t.pointColors,n.array=this.renderColors,n.count=this.renderColors.length/r.RGBA_NUM_ELEMENTS,n.needsUpdate=!0;var o=this.points.geometry.getAttribute("scaleFactor");o.array=t.pointScaleFactors,o.count=t.pointScaleFactors.length/r.INDEX_NUM_ELEMENTS,o.needsUpdate=!0},o.prototype.onResize=function(e,t){},o}();exports.ScatterPlotVisualizerSprites=l;
},{"three":"gBK8","./render":"Fjuq","./util":"wRhB","./constants":"vbxS"}],"qiPq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i,o){this.bound=t,this.cellWidth=i,this.cellHeight=o,this.numHorizCells=Math.ceil(this.boundWidth(t)/i),this.numVertCells=Math.ceil(this.boundHeight(t)/o),this.grid=new Array(this.numHorizCells*this.numVertCells)}return t.prototype.boundWidth=function(t){return t.hiX-t.loX},t.prototype.boundHeight=function(t){return t.hiY-t.loY},t.prototype.boundsIntersect=function(t,i){return!(t.loX>i.hiX||t.loY>i.hiY||t.hiX<i.loX||t.hiY<i.loY)},t.prototype.insert=function(t,i){if(void 0===i&&(i=!1),t.hiX<this.bound.loX||t.loX>this.bound.hiX||t.hiY<this.bound.loY||t.loY>this.bound.hiY)return!1;for(var o=this.getCellX(t.loX),e=this.getCellX(t.hiX),r=this.getCellY(t.loY),l=this.getCellY(t.hiY),h=r*this.numHorizCells+o,n=h,s=r;s<=l;s++){for(var u=o;u<=e;u++){var d=this.grid[n++];if(d)for(var f=0;f<d.length;f++)if(this.boundsIntersect(t,d[f]))return!1}n+=this.numHorizCells-(e-o+1)}if(i)return!0;n=h;for(s=r;s<=l;s++){for(u=o;u<=e;u++)this.grid[n]?this.grid[n].push(t):this.grid[n]=[t],n++;n+=this.numHorizCells-(e-o+1)}return!0},t.prototype.getCellX=function(t){return Math.floor((t-this.bound.loX)/this.cellWidth)},t.prototype.getCellY=function(t){return Math.floor((t-this.bound.loY)/this.cellHeight)},t}();exports.CollisionGrid=t;
},{}],"gstO":[function(require,module,exports) {
"use strict";var t=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,o,a=i.call(t),n=[];try{for(;(void 0===e||e-- >0)&&!(s=a.next()).done;)n.push(s.value)}catch(r){o={error:r}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return n};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three"),i=require("./render"),s=require("./label"),o=require("./util"),a=1e4,n=function(){function n(t,e){this.styles=e,this.id="CANVAS_LABELS",this.worldSpacePointPositions=new Float32Array(0),this.labelsActive=!0,this.canvas=document.createElement("canvas"),t.appendChild(this.canvas),this.gc=this.canvas.getContext("2d"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none"}return n.prototype.removeAllLabels=function(){var t=this.canvas.width*window.devicePixelRatio,e=this.canvas.height*window.devicePixelRatio;this.gc.clearRect(0,0,t,e)},n.prototype.makeLabels=function(n){if(null!=n.labels&&0!==n.labels.pointIndices.length&&null!=this.worldSpacePointPositions){var r,l=n.labels,c=n.cameraType===i.CameraType.Perspective,h=parseInt(this.gc.font,10),d=window.devicePixelRatio,p=this.canvas.width*d,v=this.canvas.height*d,u={loX:0,hiX:p,loY:0,hiY:v};r=new s.CollisionGrid(u,p/25,v/50);var y=[n.farthestCameraSpacePointZ,n.nearestCameraSpacePointZ],f=function(t){return o.scaleExponential(t,y,[.1,1])},g=n.camera.position,b=g.clone().sub(n.cameraTarget),m=new e.Vector3;this.gc.textBaseline="middle",this.gc.miterLimit=2;for(var P=Math.min(a,l.pointIndices.length),w=0;w<P;++w){var S,x=l.pointIndices[w];if(S=o.vector3FromPackedArray(this.worldSpacePointPositions,x),m.copy(g).sub(S),!(b.dot(m)<0)){var C=t(o.vector3DToScreenCoords(n.camera,n.screenWidth,n.screenHeight,S),2),k=C[0],A=C[1],R={loX:(k+=4)-2,hiX:k+1+2,loY:A-h/2-2,hiY:A+h/2+2};if(r.insert(R,!0)){var L=l.labelStrings[w],F=l.defaultFontSize*l.scaleFactors[w]*d;if(this.gc.font=F+"px roboto",R.hiX+=this.gc.measureText(L).width-1,r.insert(R)){var T=1;c&&1===l.useSceneOpacityFlags[w]&&(T=f(m.length())),this.gc.fillStyle=this.styleStringFromPackedRgba(l.fillColors,w,T),this.gc.strokeStyle=this.styleStringFromPackedRgba(l.strokeColors,w,T),this.gc.lineWidth=this.styles.label.strokeWidth,this.gc.strokeText(L,k,A),this.gc.lineWidth=this.styles.label.fillWidth,this.gc.fillText(L,k,A)}}}}}},n.prototype.styleStringFromPackedRgba=function(t,e,i){var s=3*e;return"rgba("+t[s]+","+t[s+1]+","+t[s+2]+","+i+")"},n.prototype.onResize=function(t,e){var i=window.devicePixelRatio;this.canvas.width=t*i,this.canvas.height=e*i,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"},n.prototype.dispose=function(){this.removeAllLabels()},n.prototype.onPointPositionsChanged=function(t){this.worldSpacePointPositions=t,this.removeAllLabels()},n.prototype.onRender=function(t){this.labelsActive&&(this.removeAllLabels(),this.makeLabels(t))},n.prototype.setScene=function(t){},n.prototype.onPickingRender=function(t){},n}();exports.ScatterPlotVisualizerCanvasLabels=n;
},{"three":"gBK8","./render":"Fjuq","./label":"qiPq","./util":"wRhB"}],"KHye":[function(require,module,exports) {
"use strict";var e=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("three"),i=require("./util"),n=require("./constants"),o=function(){function o(){this.id="POLYLINES",this.sequences=[],this.polylines=[],this.polylinePositionBuffer={},this.polylineColorBuffer={},this.pointSequenceIndices=new Map}return o.prototype.getPointSequenceIndex=function(e){return this.pointSequenceIndices.get(e)},o.prototype.updateSequenceIndices=function(){for(var e=0;e<this.sequences.length;e++)for(var t=this.sequences[e],i=0;i<t.indices.length-1;i++){var n=t.indices[i];this.pointSequenceIndices.set(n,e),this.pointSequenceIndices.set(n+1,e)}},o.prototype.createPolylines=function(){var i,n;this.updateSequenceIndices();try{for(var o=e(this.polylines),r=o.next();!r.done;r=o.next()){var s=r.value;this.scene.remove(s),s.geometry.dispose()}}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}this.polylines=[];for(var l=0;l<this.sequences.length;l++){var u=new t.BufferGeometry;u.addAttribute("position",this.polylinePositionBuffer[l]),u.addAttribute("color",this.polylineColorBuffer[l]);var c=new t.LineBasicMaterial({linewidth:1,opacity:1,transparent:!0,vertexColors:t.VertexColors});(s=new t.LineSegments(u,c)).frustumCulled=!1,this.polylines.push(s),this.scene.add(s)}},o.prototype.dispose=function(){var t,i;try{for(var n=e(this.polylines),o=n.next();!o.done;o=n.next()){var r=o.value;this.scene.remove(r),r.geometry.dispose()}}catch(s){t={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}this.polylines=[],this.polylinePositionBuffer={},this.polylineColorBuffer={}},o.prototype.setScene=function(e){this.scene=e},o.prototype.setSequences=function(e){this.sequences=e},o.prototype.onPointPositionsChanged=function(e){if(null==e&&this.dispose(),null!=e&&0!==this.sequences.length){for(var o=0;o<this.sequences.length;o++){var r=2*((u=this.sequences[o]).indices.length-1),s=new Float32Array(r*n.XYZ_NUM_ELEMENTS);this.polylinePositionBuffer[o]=new t.BufferAttribute(s,n.XYZ_NUM_ELEMENTS);var l=new Float32Array(r*n.RGBA_NUM_ELEMENTS);this.polylineColorBuffer[o]=new t.BufferAttribute(l,n.RGBA_NUM_ELEMENTS)}for(o=0;o<this.sequences.length;o++){for(var u=this.sequences[o],c=0,a=0;a<u.indices.length-1;a++){var f=u.indices[a],p=u.indices[a+1],h=i.vector3FromPackedArray(e,f),y=i.vector3FromPackedArray(e,p);this.polylinePositionBuffer[o].setXYZ(c,h.x,h.y,h.z),this.polylinePositionBuffer[o].setXYZ(c+1,y.x,y.y,y.z),c+=2}this.polylinePositionBuffer[o].needsUpdate=!0}this.createPolylines()}},o.prototype.onRender=function(e){for(var t=0;t<this.polylines.length;t++){var i=this.polylines[t].material;i.opacity=e.polylineOpacities[t],i.linewidth=e.polylineWidths[t],this.polylineColorBuffer[t].array=e.polylineColors[t],this.polylineColorBuffer[t].needsUpdate=!0}},o.prototype.onPickingRender=function(e){},o.prototype.onResize=function(e,t){},o}();exports.ScatterPlotVisualizerPolylines=o;
},{"three":"gBK8","./util":"wRhB","./constants":"vbxS"}],"Y0tI":[function(require,module,exports) {
"use strict";var t=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,s,o=i.call(t),n=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)n.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return n},e=this&&this.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(t(arguments[i]));return e},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./scatter_plot"),s=require("./color"),o=require("./data"),n=require("./render"),a=require("./styles"),l=require("./util"),c=require("./constants"),h=require("./scatter_plot_visualizer_3d_labels"),u=require("./scatter_plot_visualizer_sprites"),p=require("./scatter_plot_visualizer_canvas_labels"),d=require("./scatter_plot_visualizer_polylines"),y=function(){function t(t,e){var i=this;void 0===e&&(e={}),this.pointColorer=null,this.sequences=[],this.renderMode="POINT",this.rotateOnStart=!0,this.selectEnabled=!0,this.showLabelsOnHover=!0,this.hoverPointIndex=null,this.selectedPointIndices=new Set,this.clickCallback=function(){},this.hoverCallback=function(){},this.selectCallback=function(){},this.cameraMoveCallback=function(){},this.onHover=function(t){i.hoverCallback(t),i.hoverPointIndex=t,i.updateScatterPlotAttributes(),i.renderScatterPlot()},this.onClick=function(t){i.clickCallback(t)},this.select=function(t){i.selectEnabled&&(i.selectedPointIndices=new Set(t),i.updateScatterPlotAttributes(),i.renderScatterPlot())},this.onSelect=function(t){i.selectEnabled&&(i.selectCallback(t),i.select(t))},this.containerElement=t,this.styles=a.makeStyles(e.styles),this.setParameters(e),this.scatterPlot=new r.ScatterPlot(t,{camera:e.camera,onClick:this.onClick,onHover:this.onHover,onSelect:this.onSelect,selectEnabled:this.selectEnabled,styles:this.styles,orbitControlParams:e.orbitControls}),this.scatterPlot.onCameraMove(this.cameraMoveCallback)}return t.prototype.setParameters=function(t){void 0!==t.onClick&&(this.clickCallback=t.onClick),void 0!==t.onHover&&(this.hoverCallback=t.onHover),void 0!==t.onSelect&&(this.selectCallback=t.onSelect),void 0!==t.onCameraMove&&(this.cameraMoveCallback=t.onCameraMove),void 0!==t.pointColorer&&(this.pointColorer=t.pointColorer),void 0!==t.renderMode&&(this.renderMode=t.renderMode),void 0!==t.rotateOnStart&&(this.rotateOnStart=t.rotateOnStart),void 0!==t.selectEnabled&&(this.selectEnabled=t.selectEnabled),void 0!==t.showLabelsOnHover&&(this.showLabelsOnHover=t.showLabelsOnHover)},t.prototype.render=function(t){this.updateDataset(t),this.setVisualizers(),this.rotateOnStart&&this.scatterPlot.startOrbitAnimation()},t.prototype.renderScatterPlot=function(){this.dataset&&this.scatterPlot.render()},t.prototype.setRenderMode=function(t){this.renderMode=t,this.setVisualizers(),this.updateScatterPlotAttributes(),this.updateScatterPlotPositions()},t.prototype.setTextRenderMode=function(){this.setRenderMode("TEXT"),this.renderScatterPlot()},t.prototype.setPointRenderMode=function(){this.setRenderMode("POINT"),this.renderScatterPlot()},t.prototype.setSpriteRenderMode=function(){this.dataset&&this.dataset.spriteMetadata&&(this.setRenderMode("SPRITE"),this.renderScatterPlot())},t.prototype.setSequences=function(t){this.sequences=t,this.updatePolylineAttributes(),this.setVisualizers(),this.renderScatterPlot()},t.prototype.setPanMode=function(){this.scatterPlot.setInteractionMode("PAN")},t.prototype.setSelectMode=function(){this.scatterPlot.setInteractionMode("SELECT")},t.prototype.setDimensions=function(t){var e=t<2||t>3,i=this.dataset&&t>this.dataset.dimensions;if(e||i)throw new RangeError("Setting invalid dimensionality");this.scatterPlot.setDimensions(t),this.renderScatterPlot()},t.prototype.setPointColorer=function(t){this.pointColorer=t,this.updateScatterPlotAttributes(),this.renderScatterPlot()},t.prototype.callPointColorer=function(t,e){return t(e,this.selectedPointIndices,this.hoverPointIndex)},t.prototype.setHoverPointIndex=function(t){this.hoverPointIndex=t,this.updateScatterPlotAttributes(),this.scatterPlot.orbitIsAnimating()||this.renderScatterPlot()},t.prototype.resize=function(){this.scatterPlot.resize()},t.prototype.updateDataset=function(t){this.setDataset(t),this.scatterPlot.setDimensions(t.dimensions),this.updateScatterPlotAttributes(),this.updateScatterPlotPositions(),this.renderScatterPlot()},t.prototype.isOrbiting=function(){return this.scatterPlot.orbitIsAnimating()},t.prototype.startOrbitAnimation=function(){this.scatterPlot.startOrbitAnimation()},t.prototype.stopOrbitAnimation=function(){this.scatterPlot.stopOrbitAnimation()},t.prototype.setDataset=function(t){this.dataset=t,this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray())},t.prototype.updateScatterPlotPositions=function(){var t=this.dataset;if(t){var e=this.generatePointPositionArray(t);this.scatterPlot.setPointPositions(e)}},t.prototype.updateScatterPlotAttributes=function(){var t=this.dataset;if(t){var e=this.generatePointColorArray(t),i=this.generatePointScaleFactorArray(t),r=this.generateVisibleLabelRenderParams();this.scatterPlot.setPointColors(e),this.scatterPlot.setPointScaleFactors(i),this.scatterPlot.setLabels(r)}},t.prototype.updatePolylineAttributes=function(){var t=this.dataset;if(t){var e=this.generateLineSegmentColorMap(t),i=this.generateLineSegmentOpacityArray(t),r=this.generateLineSegmentWidthArray(t);this.scatterPlot.setPolylineColors(e),this.scatterPlot.setPolylineOpacities(i),this.scatterPlot.setPolylineWidths(r)}},t.prototype.generatePointPositionArray=function(t){var e,i,r=[0,0];e=l.extent(t.points.map(function(t){return t[0]})),i=l.extent(t.points.map(function(t){return t[1]})),3===t.dimensions&&(r=l.extent(t.points.map(function(t){return t[2]})));var s=function(t){return Math.abs(t[1]-t[0])},o=s(e),n=s(i),a=s(r),h=Math.max(o,n,a),u=c.SCATTER_PLOT_CUBE_LENGTH/2,p=function(t,e){return[t/h*-e,e*(t/h)]},d=p(o,u),y=p(n,u),f=p(a,u),P=new Float32Array(3*t.points.length),v=0;return t.points.forEach(function(s,o){var n=t.points[o];P[v++]=l.scaleLinear(n[0],e,d),P[v++]=l.scaleLinear(n[1],i,y),3===t.dimensions?P[v++]=l.scaleLinear(n[2],r,f):P[v++]=0}),P},t.prototype.generateVisibleLabelRenderParams=function(){var t=this.hoverPointIndex,i=this.selectedPointIndices,r=this.styles,s=null!==t?1:0,o=new Uint32Array(s),a=new Float32Array(s),c=new Int8Array(s),h=new Uint8Array(3*s),u=new Uint8Array(3*s),p=[];a.fill(r.label.scaleDefault),c.fill(1);var d=0;if(null!==t){p.push(this.getLabelText(t)),o[d]=t,a[d]=r.label.scaleLarge,c[d]=0;var y=l.styleRgbFromHexColor(r.label.fillColorHover);l.packRgbIntoUint8Array(h,d,y[0],y[1],y[2]);var f=l.styleRgbFromHexColor(r.label.strokeColorHover);l.packRgbIntoUint8Array(u,d,f[0],f[1],f[1]),++d}y=l.styleRgbFromHexColor(r.label.fillColorSelected),f=l.styleRgbFromHexColor(r.label.strokeColorSelected);if(1===i.size){var P=e(i)[0];p.push(this.getLabelText(P)),o[d]=P,a[d]=r.label.scaleLarge,c[d]=0,l.packRgbIntoUint8Array(h,d,y[0],y[1],y[2]),l.packRgbIntoUint8Array(u,d,f[0],f[1],f[2])}return new n.LabelRenderParams(new Float32Array(o),p,a,c,r.label.fontSize,h,u)},t.prototype.generatePointScaleFactorArray=function(t){var e,r,s=this.hoverPointIndex,o=this.selectedPointIndices,n=this.styles.point,a=n.scaleDefault,l=n.scaleSelected,c=n.scaleHover,h=new Float32Array(t.points.length);h.fill(a);o.size;try{for(var u=i(o.values()),p=u.next();!p.done;p=u.next()){h[p.value]=l}}catch(d){e={error:d}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return null!=s&&(h[s]=c),h},t.prototype.generatePointColorArray=function(t){var e,r,o=this.hoverPointIndex,n=this.pointColorer,a=this.selectedPointIndices,l=this.styles.point,h=l.colorHover,u=l.colorNoSelection,p=l.colorSelected,d=l.colorUnselected,y=new Float32Array(t.points.length*c.RGBA_NUM_ELEMENTS),f=d,P=u;"TEXT"===this.renderMode&&(f=this.styles.label3D.colorUnselected,P=this.styles.label3D.colorNoSelection),"SPRITE"===this.renderMode&&(f=this.styles.sprites.colorUnselected,P=this.styles.sprites.colorNoSelection);var v=t.points.length,b=this.selectedPointIndices.size;if(n)for(var S=0,g=0;g<v;++g){var z=s.parseColor(this.callPointColorer(n,g)||P);y[S++]=z.r,y[S++]=z.g,y[S++]=z.b,y[S++]=z.opacity}else{for(S=0,z=b>0?s.parseColor(f):s.parseColor(P),g=0;g<v;++g)y[S++]=z.r,y[S++]=z.g,y[S++]=z.b,y[S++]=z.opacity;z=s.parseColor(p);try{for(var C=i(a.values()),m=C.next();!m.done;m=C.next()){var A=m.value*c.RGBA_NUM_ELEMENTS;y[A++]=z.r,y[A++]=z.g,y[A++]=z.b,y[A++]=z.opacity}}catch(V){e={error:V}}finally{try{m&&!m.done&&(r=C.return)&&r.call(C)}finally{if(e)throw e.error}}if(null!=o){var L=s.parseColor(h),I=o*c.RGBA_NUM_ELEMENTS;y[I++]=L.r,y[I++]=L.g,y[I++]=L.b,y[I++]=L.opacity}}return y},t.prototype.generate3DLabelsArray=function(){var t=this.dataset;if(!t)return[];for(var e=[],i=t.points.length,r=0;r<i;++r)e.push(this.getLabelText(r));return e},t.prototype.generateLineSegmentColorMap=function(t){for(var e=this.pointColorer,i=this.styles,r={},o=0;o<this.sequences.length;o++){var n=this.sequences[o],a=new Float32Array(2*(n.indices.length-1)*3),c=0;if(e)for(var h=0;h<n.indices.length-1;h++){var u=s.parseColor(this.callPointColorer(e,n.indices[h])),p=s.parseColor(this.callPointColorer(e,n.indices[h+1]));a[c++]=u.r,a[c++]=u.g,a[c++]=u.b,a[c++]=p.r,a[c++]=p.g,a[c++]=p.b}else for(h=0;h<n.indices.length-1;h++){u=l.getDefaultPointInPolylineColor(h,n.indices.length,i.polyline.startHue,i.polyline.endHue,i.polyline.saturation,i.polyline.lightness),p=l.getDefaultPointInPolylineColor(h+1,n.indices.length,i.polyline.startHue,i.polyline.endHue,i.polyline.saturation,i.polyline.lightness);a[c++]=u.r,a[c++]=u.g,a[c++]=u.b,a[c++]=p.r,a[c++]=p.g,a[c++]=p.b}r[o]=a}return r},t.prototype.generateLineSegmentOpacityArray=function(t){var i=this.selectedPointIndices,r=this.styles,s=new Float32Array(this.sequences.length);if(i.size>0){s.fill(r.polyline.deselectedOpacity);var o=this.polylineVisualizer.getPointSequenceIndex(e(i)[0]);void 0!==o&&(s[o]=r.polyline.selectedOpacity)}else s.fill(r.polyline.defaultOpacity);return s},t.prototype.generateLineSegmentWidthArray=function(t){var i=this.selectedPointIndices,r=this.styles,s=new Float32Array(this.sequences.length);if(s.fill(r.polyline.defaultLineWidth),i.size>0){var o=this.polylineVisualizer.getPointSequenceIndex(e(i)[0]);void 0!==o&&(s[o]=r.polyline.selectedLineWidth)}return s},t.prototype.getLabelText=function(t){var e=this.dataset;if(!e)return"";var i=e.metadata[t];return i&&null!=i.label?""+i.label:""},t.prototype.initializeCanvasLabelsVisualizer=function(){return this.canvasLabelsVisualizer||(this.canvasLabelsVisualizer=new p.ScatterPlotVisualizerCanvasLabels(this.containerElement,this.styles)),this.canvasLabelsVisualizer},t.prototype.initialize3DLabelsVisualizer=function(){return this.labels3DVisualizer||(this.labels3DVisualizer=new h.ScatterPlotVisualizer3DLabels(this.styles)),this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray()),this.labels3DVisualizer},t.prototype.initializePointVisualizer=function(){return this.pointVisualizer||(this.pointVisualizer=new u.ScatterPlotVisualizerSprites(this.styles)),this.pointVisualizer},t.prototype.initializeSpritesheetVisualizer=function(){var t=this,e=this.styles,i=this.dataset,r=i.spriteMetadata;if(!this.spritesheetVisualizer&&r){if(!r.spriteImage||!r.singleSpriteSize)return;var s=i.points.length,o=void 0;if(r.spriteIndices)o=new Float32Array(r.spriteIndices);else{o=new Float32Array(s);for(var n=0;n<s;++n)o[n]=n}var a=new u.ScatterPlotVisualizerSprites(e,{spritesheetImage:r.spriteImage,spriteDimensions:r.singleSpriteSize,spriteIndices:o,onImageLoad:function(){return t.renderScatterPlot()}});a.id="SPRITE_SHEET_VISUALIZER",this.spritesheetVisualizer=a}return this.spritesheetVisualizer},t.prototype.initializePolylineVisualizer=function(){return this.polylineVisualizer||(this.polylineVisualizer=new d.ScatterPlotVisualizerPolylines),this.polylineVisualizer.setSequences(this.sequences),this.polylineVisualizer},t.prototype.setVisualizers=function(){var t=this.dataset,e=this.renderMode,i=[];if("TEXT"===e){var r=this.initialize3DLabelsVisualizer();i.push(r)}else if("POINT"===e){r=this.initializePointVisualizer();i.push(r)}else if("SPRITE"===e&&t.spriteMetadata){(r=this.initializeSpritesheetVisualizer())&&i.push(r)}if(this.sequences.length>0){r=this.initializePolylineVisualizer();i.push(r)}if(("POINT"===e||"SPRITE"===e)&&this.showLabelsOnHover){r=this.initializeCanvasLabelsVisualizer();i.push(r)}this.scatterPlot.setActiveVisualizers(i)},t.Dataset=o.Dataset,t}();exports.ScatterGL=y;
},{"./scatter_plot":"IiO1","./color":"J4gV","./data":"xLgM","./render":"Fjuq","./styles":"Tcu9","./util":"wRhB","./constants":"vbxS","./scatter_plot_visualizer_3d_labels":"stF9","./scatter_plot_visualizer_sprites":"jt1s","./scatter_plot_visualizer_canvas_labels":"gstO","./scatter_plot_visualizer_polylines":"KHye"}],"BcBC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./scatter_gl");exports.ScatterGL=e.ScatterGL;var t=require("./data");exports.Dataset=t.Dataset;
},{"./scatter_gl":"Y0tI","./data":"xLgM"}],"UCSq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VIDEO_SIZE=exports.TUNABLE_FLAG_VALUE_RANGE_MAP=exports.TUNABLE_FLAG_NAME_MAP=exports.STATE=exports.MODEL_BACKEND_MAP=exports.MEDIAPIPE_HANDS_CONFIG=exports.DEFAULT_RADIUS=exports.DEFAULT_LINE_WIDTH=exports.BACKEND_FLAGS_MAP=void 0;var e=_(require("@tensorflow-models/hand-pose-detection"));function t(e){if("function"!=typeof WeakMap)return null;var _=new WeakMap,E=new WeakMap;return(t=function(e){return e?E:_})(e)}function _(e,_){if(!_&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var E=t(_);if(E&&E.has(e))return E.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in e)if("default"!==A&&Object.prototype.hasOwnProperty.call(e,A)){var s=o?Object.getOwnPropertyDescriptor(e,A):null;s&&(s.get||s.set)?Object.defineProperty(r,A,s):r[A]=e[A]}return r.default=e,E&&E.set(e,r),r}const E=2;exports.DEFAULT_LINE_WIDTH=2;const r=4;exports.DEFAULT_RADIUS=4;const o={normal:{width:480,height:360},"640 X 480":{width:640,height:480},"640 X 360":{width:640,height:360},"360 X 270":{width:360,height:270}};exports.VIDEO_SIZE=o;const A={camera:{targetFPS:60,sizeOption:"normal"},backend:"",flags:{},modelConfig:{}};exports.STATE=A;const s={type:"full",render3D:!0};exports.MEDIAPIPE_HANDS_CONFIG=s;const L={WEBGL_VERSION:[1,2],WASM_HAS_SIMD_SUPPORT:[!0,!1],WASM_HAS_MULTITHREAD_SUPPORT:[!0,!1],WEBGL_CPU_FORWARD:[!0,!1],WEBGL_PACK:[!0,!1],WEBGL_FORCE_F16_TEXTURES:[!0,!1],WEBGL_RENDER_FLOAT32_CAPABLE:[!0,!1],WEBGL_FLUSH_THRESHOLD:[-1,0,.25,.5,.75,1,1.25,1.5,1.75,2],CHECK_COMPUTATION_FOR_ERRORS:[!0,!1]};exports.TUNABLE_FLAG_VALUE_RANGE_MAP=L;const n={"tfjs-wasm":["WASM_HAS_SIMD_SUPPORT","WASM_HAS_MULTITHREAD_SUPPORT"],"tfjs-webgl":["WEBGL_VERSION","WEBGL_CPU_FORWARD","WEBGL_PACK","WEBGL_FORCE_F16_TEXTURES","WEBGL_RENDER_FLOAT32_CAPABLE","WEBGL_FLUSH_THRESHOLD"],"mediapipe-gpu":[]};exports.BACKEND_FLAGS_MAP=n;const p={[e.SupportedModels.MediaPipeHands]:["mediapipe-gpu","tfjs-webgl"]};exports.MODEL_BACKEND_MAP=p;const S={PROD:"production mode",WEBGL_VERSION:"webgl version",WASM_HAS_SIMD_SUPPORT:"wasm SIMD",WASM_HAS_MULTITHREAD_SUPPORT:"wasm multithread",WEBGL_CPU_FORWARD:"cpu forward",WEBGL_PACK:"webgl pack",WEBGL_FORCE_F16_TEXTURES:"enforce float16",WEBGL_RENDER_FLOAT32_CAPABLE:"enable float32",WEBGL_FLUSH_THRESHOLD:"GL flush wait time(ms)"};exports.TUNABLE_FLAG_NAME_MAP=S;
},{"@tensorflow-models/hand-pose-detection":"iLuu"}],"NYSu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAndroid=o,exports.isMobile=a,exports.isiOS=i,exports.setBackendAndEnvFlags=f;var e=n(require("@tensorflow/tfjs-core")),t=require("./params");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}function i(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}function o(){return/Android/i.test(navigator.userAgent)}function a(){return o()||i()}async function s(t){const r=e.engine();if(!(t in r.registryFactory))throw new Error(`${t} backend is not registed.`);if(t in r.registry){const r=e.findBackendFactory(t);e.removeBackend(t),e.registerBackend(t,r)}await e.setBackend(t)}async function f(r,n){if(null==r)return;if("object"!=typeof r)throw new Error(`An object is expected, while a(n) ${typeof r} is found.`);for(const e in r){if(!(e in t.TUNABLE_FLAG_VALUE_RANGE_MAP))throw new Error(`${e} is not a tunable or valid environment flag.`);if(-1===t.TUNABLE_FLAG_VALUE_RANGE_MAP[e].indexOf(r[e]))throw new Error(`${e} value is expected to be in the range [${t.TUNABLE_FLAG_VALUE_RANGE_MAP[e]}], while ${r[e]}`+" is found.")}e.env().setFlags(r);const[i,o]=n.split("-");"tfjs"===i&&await s(o)}
},{"@tensorflow/tfjs-core":"tc6m","./params":"UCSq"}],"rxPu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Camera=void 0;var e=r(require("scatter-gl")),t=r(require("../shared/params")),i=require("../shared/util");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(a=function(e){return e?i:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=a(t);if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,i&&i.set(e,r),r}const s=[[0,0,0],[0,.1,0],[-.1,0,0],[-.1,-.1,0]],n={thumb:[0,1,2,3,4],indexFinger:[0,5,6,7,8],middleFinger:[0,9,10,11,12],ringFinger:[0,13,14,15,16],pinky:[0,17,18,19,20]},o=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]];function d(t){const i=document.querySelector(t);return{scatterGLEl:i,scatterGL:new e.ScatterGL(i,{rotateOnStart:!0,selectEnabled:!1,styles:{polyline:{defaultOpacity:1,deselectedOpacity:1}}}),scatterGLHasInitialized:!1}}const c=d("#scatter-gl-container-left"),l=d("#scatter-gl-container-right");class h{constructor(){this.video=document.getElementById("video"),this.canvas=document.getElementById("output"),this.ctx=this.canvas.getContext("2d")}static async setupCamera(e){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const{targetFPS:a,sizeOption:r}=e,s=t.VIDEO_SIZE[r],n={audio:!1,video:{facingMode:"user",width:(0,i.isMobile)()?t.VIDEO_SIZE["360 X 270"].width:s.width,height:(0,i.isMobile)()?t.VIDEO_SIZE["360 X 270"].height:s.height,frameRate:{ideal:a}}},o=await navigator.mediaDevices.getUserMedia(n),d=new h;d.video.srcObject=o,await new Promise(e=>{d.video.onloadedmetadata=(()=>{e(video)})}),d.video.play();const u=d.video.videoWidth,f=d.video.videoHeight;d.video.width=u,d.video.height=f,d.canvas.width=u,d.canvas.height=f,document.querySelector(".canvas-wrapper").style=`width: ${u}px; height: ${f}px`,d.ctx.translate(d.video.videoWidth,0),d.ctx.scale(-1,1);for(const i of[c,l])i.scatterGLEl.style=`width: ${u/2}px; height: ${f/2}px;`,i.scatterGL.resize(),i.scatterGLEl.style.display=t.STATE.modelConfig.render3D?"inline-block":"none";return d}drawCtx(){this.ctx.drawImage(this.video,0,0,this.video.videoWidth,this.video.videoHeight)}clearCtx(){this.ctx.clearRect(0,0,this.video.videoWidth,this.video.videoHeight)}drawResults(e){for(e.sort((e,t)=>e.handedness<t.handedness?1:e.handedness>t.handedness?-1:0);e.length<2;)e.push({});for(let t=0;t<e.length;++t){const i=[c,l][t];this.drawResult(e[t],i)}}drawResult(e,i){null!=e.keypoints&&this.drawKeypoints(e.keypoints,e.handedness),null!=i&&(null!=e.keypoints3D&&t.STATE.modelConfig.render3D?this.drawKeypoints3D(e.keypoints3D,e.handedness,i):this.drawKeypoints3D([],"",i))}drawKeypoints(e,i){const a=e;this.ctx.fillStyle="Left"===i?"Red":"Blue",this.ctx.strokeStyle="White",this.ctx.lineWidth=t.DEFAULT_LINE_WIDTH;for(let t=0;t<a.length;t++){const e=a[t].x,i=a[t].y;this.drawPoint(i-2,e-2,3)}const r=Object.keys(n);for(let t=0;t<r.length;t++){const i=r[t],a=n[i].map(t=>e[t]);this.drawPath(a,!1)}}drawPath(e,t){const i=new Path2D;i.moveTo(e[0].x,e[0].y);for(let a=1;a<e.length;a++){const t=e[a];i.lineTo(t.x,t.y)}t&&i.closePath(),this.ctx.stroke(i)}drawPoint(e,t,i){this.ctx.beginPath(),this.ctx.arc(t,e,i,0,2*Math.PI),this.ctx.fill()}drawKeypoints3D(i,a,r){const n=t.STATE.modelConfig.scoreThreshold||0,d=i.map(e=>[-e.x,-e.y,-e.z]),c=new e.ScatterGL.Dataset([...d,...s]);r.scatterGL.setPointColorer(e=>null==i[e]||i[e].score<n?"#ffffff":"Left"===a?"#ff0000":"#0000ff"),r.scatterGLHasInitialized?r.scatterGL.updateDataset(c):r.scatterGL.render(c);const l=o.map(e=>({indices:e}));r.scatterGL.setSequences(l),r.scatterGLHasInitialized=!0}}exports.Camera=h;
},{"scatter-gl":"BcBC","../shared/params":"UCSq","../shared/util":"NYSu"}],"laR4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setupDatGui=d;var e=l(require("@tensorflow-models/hand-pose-detection")),n=l(require("@tensorflow/tfjs-core")),t=l(require("../shared/params"));function o(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:n})(e)}function l(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(n);if(t&&t.has(e))return t.get(e);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var d=r?Object.getOwnPropertyDescriptor(e,a):null;d&&(d.get||d.set)?Object.defineProperty(l,a,d):l[a]=e[a]}return l.default=e,t&&t.set(e,l),l}let r;const a={};async function d(n){const o=new dat.GUI({width:300});o.domElement.id="gui";const l=o.addFolder("Camera");l.add(t.STATE.camera,"targetFPS").onFinishChange(e=>{t.STATE.isTargetFPSChanged=!0}),l.add(t.STATE.camera,"sizeOption",Object.keys(t.VIDEO_SIZE)).onChange(e=>{t.STATE.isSizeOptionChanged=!0}),l.open();const r=o.addFolder("Model"),a=n.get("model");let d=n.get("type"),c=n.get("maxNumHands");switch(a){case"mediapipe_hands":t.STATE.model=e.SupportedModels.MediaPipeHands,"full"!==d&&"lite"!==d&&(d=null),(null==c||c<1)&&(c=1);break;default:alert(`${n.get("model")}`)}r.add(t.STATE,"model",Object.values(e.SupportedModels)).onChange(e=>{t.STATE.isModelChanged=!0,i(r),s(u)}),i(r,d,c),r.open();const u=o.addFolder("Backend");return s(u),u.open(),o}async function s(e){for(;e.__controllers.length>0;)e.remove(e.__controllers[e.__controllers.length-1]);const n=t.MODEL_BACKEND_MAP[t.STATE.model];t.STATE.backend=n[0];const o=e.add(t.STATE,"backend",n);o.name("runtime-backend"),o.onChange(async n=>{t.STATE.isBackendChanged=!0,await A(e,n)}),await A(e,t.STATE.backend)}function i(n,o,l){for(;n.__controllers.length>1;)n.remove(n.__controllers[n.__controllers.length-1]);switch(t.STATE.model){case e.SupportedModels.MediaPipeHands:c(n,o,l);break;default:alert(`Model ${t.STATE.model} is not supported.`)}}function c(e,n,o){t.STATE.modelConfig={...t.MEDIAPIPE_HANDS_CONFIG},t.STATE.modelConfig.type=null!=n?n:"full",t.STATE.modelConfig.maxNumHands=null!=o?o:1,e.add(t.STATE.modelConfig,"type",["lite","full"]).onChange(e=>{t.STATE.isModelChanged=!0}),e.add(t.STATE.modelConfig,"maxNumHands",1,10).step(1).onChange(e=>{t.STATE.isModelChanged=!0}),e.add(t.STATE.modelConfig,"render3D").onChange(e=>{document.querySelector("#scatter-gl-container-left").style.display=e?"inline-block":"none",document.querySelector("#scatter-gl-container-right").style.display=e?"inline-block":"none"})}async function u(){r={},t.STATE.flags={};for(const e in t.BACKEND_FLAGS_MAP)for(let o=0;o<t.BACKEND_FLAGS_MAP[e].length;o++){const l=t.BACKEND_FLAGS_MAP[e][o];r[l]=await n.env().getAsync(l)}for(const e in r)t.BACKEND_FLAGS_MAP[t.STATE.backend].indexOf(e)>-1&&(t.STATE.flags[e]=r[e])}function f(e){const n=r[e];if("WEBGL_FORCE_F16_TEXTURES"===e)return[!1,!0];if("WEBGL_VERSION"===e){const e=[];for(let t=1;t<=n;t++)e.push(t);return e}if("WEBGL_FLUSH_THRESHOLD"===e){const e=[-1];for(let n=0;n<=2;n+=.25)e.push(n);return e}return"boolean"==typeof n?n?[!1,!0]:[!1]:null!=t.TUNABLE_FLAG_VALUE_RANGE_MAP[e]?t.TUNABLE_FLAG_VALUE_RANGE_MAP[e]:[n]}function T(e,n){const o=t.BACKEND_FLAGS_MAP[n];for(let l=0;l<o.length;l++){const n=o[l],r=t.TUNABLE_FLAG_NAME_MAP[n]||n,d=f(n);if(d.length<2){console.warn(`The ${n} is considered as untunable, `+`because its value range is [${d}].`);continue}let s;if("boolean"==typeof d[0])s=e.add(t.STATE.flags,n);else{if(s=e.add(t.STATE.flags,n,d),null==a[n]){a[n]={};for(let e=0;e<d.length;e++){const t=d[e],o=String(d[e]);a[n][o]=t}}s.onFinishChange(e=>{t.STATE.flags[n]=a[n][e]})}s.name(r).onChange(()=>{t.STATE.isFlagChanged=!0})}}async function A(e,n){await u();for(;e.__controllers.length>1;)e.remove(e.__controllers[e.__controllers.length-1]);T(e,n)}
},{"@tensorflow-models/hand-pose-detection":"iLuu","@tensorflow/tfjs-core":"tc6m","../shared/params":"UCSq"}],"QbYZ":[function(require,module,exports) {
"use strict";function e(){const e=new Stats;e.customFpsPanel=e.addPanel(new Stats.Panel("FPS","#0ff","#002")),e.showPanel(e.domElement.children.length-1);const t=document.getElementById("stats");t.appendChild(e.domElement);const n=t.querySelectorAll("canvas");for(let s=0;s<n.length;++s)n[s].style.width="140px",n[s].style.height="80px";return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setupStats=e;
},{}],"H99C":[function(require,module,exports) {
"use strict";require("@tensorflow/tfjs-backend-webgl");var e=c(require("@tensorflow/tfjs")),t=c(require("@mediapipe/hands")),n=c(require("@tensorflow/tfjs-backend-wasm")),a=c(require("@tensorflow-models/hand-pose-detection")),o=require("./camera"),s=require("./option_panel"),i=require("../shared/params"),r=require("../shared/stats_panel"),d=require("../shared/util");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(a,s,i):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}let p,u,T;n.setWasmPaths(`https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@${n.version_wasm}/dist/`);let m,g,f=0,y=0,S=0;async function h(){switch(i.STATE.model){case a.SupportedModels.MediaPipeHands:const e=i.STATE.backend.split("-")[0];if("mediapipe"===e)return a.createDetector(i.STATE.model,{runtime:e,modelType:i.STATE.modelConfig.type,maxHands:i.STATE.modelConfig.maxNumHands,solutionPath:`https://cdn.jsdelivr.net/npm/@mediapipe/hands@${t.VERSION}`});if("tfjs"===e)return a.createDetector(i.STATE.model,{runtime:e,modelType:i.STATE.modelConfig.type,maxHands:i.STATE.modelConfig.maxNumHands})}}async function E(){if((i.STATE.isTargetFPSChanged||i.STATE.isSizeOptionChanged)&&(u=await o.Camera.setupCamera(i.STATE.camera),i.STATE.isTargetFPSChanged=!1,i.STATE.isSizeOptionChanged=!1),i.STATE.isModelChanged||i.STATE.isFlagChanged||i.STATE.isBackendChanged){i.STATE.isModelChanged=!0,window.cancelAnimationFrame(g),null!=p&&p.dispose(),(i.STATE.isFlagChanged||i.STATE.isBackendChanged)&&await(0,d.setBackendAndEnvFlags)(i.STATE.flags,i.STATE.backend);try{p=await h(i.STATE.model)}catch(e){p=null,alert(e)}i.STATE.isFlagChanged=!1,i.STATE.isBackendChanged=!1,i.STATE.isModelChanged=!1}}function A(){m=(performance||Date).now()}function w(){const e=(performance||Date).now();y+=e-m,++f;if(e-S>=1e3){const t=y/f;y=0,f=0,T.customFpsPanel.update(1e3/t,120),S=e}}var k=!1,D=document.getElementById("dataset-button"),v=[];D.addEventListener("click",function(e){k?(console.log("Stop dataset"),e.target.innerHTML="START DATASET SNAPSHOTING",k=!1,localStorage.setItem("pointsDatasetJson",JSON.stringify(v))):(console.log("Start dataset"),e.target.innerHTML="Creating dataset... (click to stop)",localStorage.setItem("pointsDatasetJson",""),v=[],k=!0)});var C=document.getElementById("dataset-counter");function O(e){null!=e[0]&&null!=e[0].handedness&&(v.push(e[0].keypoints3D),C.innerHTML=v.length+" items collected for dataset")}function M(e){console.log(e[0].handedness+" "+e[0].keypoints[0].name+" "+e[0].keypoints[0].x+" "+e[0].keypoints[0].y),console.log("3d "+e[0].handedness+" "+e[0].keypoints3D[0].name+" "+e[0].keypoints3D[0].x+" "+e[0].keypoints3D[0].y+" "+e[0].keypoints3D[0].z),console.log("3d "+e[0].handedness+" "+e[0].keypoints3D[5].name+" "+e[0].keypoints3D[5].x+" "+e[0].keypoints3D[5].y+" "+e[0].keypoints3D[5].z),console.log("3d "+e[0].handedness+" "+e[0].keypoints3D[17].name+" "+e[0].keypoints3D[17].x+" "+e[0].keypoints3D[17].y+" "+e[0].keypoints3D[17].z),console.log("3d "+e[0].handedness+" "+e[0].keypoints3D[12].name+" "+e[0].keypoints3D[12].x+" "+e[0].keypoints3D[12].y+" "+e[0].keypoints3D[12].z)}async function b(){u.video.readyState<2&&await new Promise(e=>{u.video.onloadeddata=(()=>{e(video)})});let e=null;if(null!=p){A();try{e=await p.estimateHands(u.video,{flipHorizontal:!1}),k&&O(e),R&&F(e)}catch(t){p.dispose(),p=null,alert(t)}w()}u.drawCtx(),e&&e.length>0&&!i.STATE.isModelChanged&&u.drawResults(e)}async function L(){await E(),i.STATE.isModelChanged||await b(),g=requestAnimationFrame(L)}var N=[];async function j(){const t=new URLSearchParams(window.location.search);N=await e.loadLayersModel("trained_model/model.json"),t.append("model","mediapipe_hands"),t.has("model")?(await(0,s.setupDatGui)(t),T=(0,r.setupStats)(),u=await o.Camera.setupCamera(i.STATE.camera),await(0,d.setBackendAndEnvFlags)(i.STATE.flags,i.STATE.backend),p=await h(),L()):alert("Cannot find model in the query string.")}function H(e,t,n){var a=document.createElement("a"),o=new Blob([e],{type:n});a.href=URL.createObjectURL(o),a.download=t,a.click()}j();var I=document.getElementById("model-name-textbox"),P="";I.addEventListener("change",function(e){P=I.value});var x=document.getElementById("download-button");x.addEventListener("click",function(e){const t=localStorage.getItem("pointsDatasetJson");if(""===t)return void console.log("No data for download - please start and stop dataset creating.");if(!P)return void console.log("No model name - please provide model name before download");console.log("Download start"),e.target.innerHTML="PREPARING DATA FOR MODEL DOWNLOAD...";const n=JSON.parse(t),a=[];for(let s=0;s<n.length;s++){let e=[];for(let t=0;t<n[s].length;t++)e.push([n[s][t].x,n[s][t].y,n[s][t].z]);a.push(e)}const o=JSON.stringify(a);localStorage.setItem("tensorData",o),console.log("Model: "+P+" - downloading..."),H(o,P+".json","application/json"),e.target.innerHTML="DOWNLOAD DATASET",console.log("Download end")});var R=!1,q=document.getElementById("predict-button");q.addEventListener("click",function(e){R?(e.target.innerHTML="START GESTURE RECOGNITION",R=!1):(e.target.innerHTML="GESTURE RECOGNIZING ... (click to stop)",R=!0)});var B=document.getElementById("predict-result");function F(t){const n={0:"Non gesture",1:"Victoria",2:"OK"};if(0===t.length||null==t[0].keypoints3D)return void(B.innerHTML=n[0]);const a=t[0].keypoints3D,o=[];for(let e=0;e<a.length;e++)o.push([a[e].x,a[e].y,a[e].z]);const s=e.tensor([o]),i=N.predict(s).arraySync()[0];let r=0,d=i[0];for(let e=1;e<i.length;e++)i[e]>d&&(d=i[e],r=e);2===r&&d<2?r=0:d<1.6&&(r=0),B.innerHTML=n[r]}
},{"@tensorflow/tfjs-backend-webgl":"kg9U","@tensorflow/tfjs":"fHyk","@mediapipe/hands":"bfxE","@tensorflow/tfjs-backend-wasm":"Tlvt","@tensorflow-models/hand-pose-detection":"iLuu","./camera":"rxPu","./option_panel":"laR4","../shared/params":"UCSq","../shared/stats_panel":"QbYZ","../shared/util":"NYSu"}]},{},["H99C"], null)
//# sourceMappingURL=src.78f26dff.js.map